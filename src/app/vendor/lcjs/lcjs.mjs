/* LightningChart JS v4.2.0 */
import*as t from"immutable";import{Record as i}from"immutable";import{Eventer as s}from"@arction/eventer";import e from"earcut";class h{constructor(){this.i=!0}o(){return this.i}}class r extends h{constructor(t,i){super(),this.l=t,this.i=i}u(t){return t!==this.l&&(this.l=t,this.i=!0),this}S(){return this.l}o(){return super.o()}}const n=(t,i)=>({x:t,y:i}),o=(t,i)=>({x:t,y:i}),a=(t,i,s)=>({position:t,high:i,low:s}),l=(t,i,s)=>({x:t,y:i,z:s}),u=t=>{const i=Array(0),s=Array(0);return t.length>0&&t.forEach((t=>{i.push(n(t.position,t.high)),s.push(n(t.position,t.low))})),[i,s]},c=(t,i)=>({min:t,max:i}),d=(t,i,s,e)=>({x:Math.ceil(t),y:Math.ceil(i),width:Math.ceil(s),height:Math.ceil(e)}),f=(t,i=!0)=>new r(t,i),g=(t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}),m=g,y=(t,i)=>({left:void 0!==i.left?i.left:t.left,top:void 0!==i.top?i.top:t.top,right:void 0!==i.right?i.right:t.right,bottom:void 0!==i.bottom?i.bottom:t.bottom}),p=i({type:"color",r:1,g:1,b:1,a:1});class S extends p{constructor(t){super(t)}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.M||(this.M=new S({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.M}getLighter(){return this._||(this._=new S({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this._}getDarker(){return this.C||(this.C=new S({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.C}toRGBAString(){return`rgba( ${255*this.r}, ${255*this.g}, ${255*this.b}, ${255*this.a} )`}}const b=t=>!(!t||"object"!=typeof t||!("type"in t)||"color"!==t.type),v=(t,i,s,e=255)=>new S({r:t/255,g:i/255,b:s/255,a:e/255}),x=t=>{const i=t.startsWith("#")?t.substring(1):t.startsWith("0x")?t.substr(2):t;switch(i.length){case 8:return new S({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255,a:Number(`0x${i.substring(6,8)}`)/255});case 6:return new S({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255});case 4:return new S({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255,a:Number(`0x${i.charAt(3)}${i.charAt(3)}`)/255});case 3:return new S({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255});default:throw new Error(`ColorHEX parsing error | input: ${t}`)}},M=(t,i=1,s=1)=>{let e,h,r;t/=360;const n=Math.floor(6*t),o=6*t-n,a=s*(1-i),l=s*(1-o*i),u=s*(1-(1-o)*i);switch(n%6){case 0:e=s,h=u,r=a;break;case 1:e=l,h=s,r=a;break;case 2:e=a,h=s,r=u;break;case 3:e=a,h=l,r=s;break;case 4:e=u,h=a,r=s;break;default:e=s,h=a,r=l}return new S({r:e,g:h,b:r})},_=t=>{try{if(t.startsWith("rgba")){const i=t.substr(5).slice(0,-1),s=JSON.parse(`[${i}]`);return v(s[0],s[1],s[2],255*s[3])}if(t.startsWith("rgb")){const i=t.substr(4).slice(0,-1),s=JSON.parse(`[${i}]`);return v(s[0],s[1],s[2])}if(t.startsWith("hsl")){const i=t.substr(4).slice(0,-1).split(",").map(parseFloat),s=A(i[0],i[1],i[2]);return v(s[0],s[1],s[2])}return t.startsWith("#")||t.startsWith("0x")?x(t):x(k(t))}catch(t){}return console.warn(`ColorCSS parsing error: ${t}`),x("#fff")},A=(t,i,s)=>{i/=100,s/=100;const e=(1-Math.abs(2*s-1))*i,h=t/60,r=e*(1-Math.abs(h%2-1));let n=[];isNaN(t)?n=[0,0,0]:h<=1?n=[e,r,0]:h<=2?n=[r,e,0]:h<=3?n=[0,e,r]:h<=4?n=[0,r,e]:h<=5?n=[r,0,e]:h<=6&&(n=[e,0,r]);const o=s-.5*e;return[Math.round(255*(n[0]+o)),Math.round(255*(n[1]+o)),Math.round(255*(n[2]+o))]},w={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},k=t=>{const i=w[t.toLowerCase()];if(i)return i;throw new Error(`Unknown color code: ${t}`)},C=new S({}),T=v(0,0,0,0),F=(t,i)=>t.value-i.value,I=i({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:v(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1}),P=t=>{const{steps:i}=t,s=i.length;i.sort(F);const[e,h]=s>0?[i[0].value,i[s-1].value]:[0,0],r=s>0?s-1:0,n=Array(r);for(let t=0;t<r;t+=1)n[t]={min:i[t],max:i[t+1]};return{min:e,max:h,length:s,steps:i,subranges:n,isValid:s>0&&e!==h}};class D extends I{constructor(t){super(((t,i)=>({steps:t.steps,title:t.title,units:t.units,interpolate:t.interpolate,color:t.color,length:i.length,min:i.min,max:i.max,subranges:i.subranges,isValid:i.isValid}))(t,P(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.map((t=>`${t.value},${t.color.toString()}`)).join(",")}`}setSteps(t){return this.merge(P({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}getColors(t){if(Array.isArray(t)){if(Array.isArray(t[0])){const i=t,s=i.length,e=i[0].length,h=[...Array(s)].map((()=>Array(e)));for(let t=0;t<s;t+=1)for(let s=0;s<e;s+=1)h[t][s]=this.T(i[t][s]);return h}const i=t,s=i.length,e=Array(s);for(let t=0;t<s;t+=1)e[t]=this.T(i[t]);return e}return this.T(t)}T(t){const{steps:i}=this,s=i.length;if(0===s)return this.getFallbackColor();if(1===s)return i[0].color||this.color;if(this.interpolate){for(let n=0;n<s-1;n+=1){const s=i[n],o=i[n+1],a=Math.min(s.value,o.value),l=Math.max(s.value,o.value);if(t>=a&&t<=l){if(a===l)return s.color;const i=(t-s.value)/(o.value-s.value);return e=s.color,h=o.color,r=i,new S({r:e.r+(h.r-e.r)*r,g:e.g+(h.g-e.g)*r,b:e.b+(h.b-e.b)*r,a:e.a+(h.a-e.a)*r})}}return t<i[0].value?i[0].color:i[s-1].color}var e,h,r;for(let e=s-1;e>=0;e-=1)if(t>=i[e].value)return i[e].color;return i[0].color}}const B=t=>!(!t||"object"!=typeof t||!("type"in t)||"lut"!==t.type),O=i({type:"fillstyle",fillType:"empty"});class L extends O{toString(){return"emptyFill"}}const R=new L,E=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"empty"===t.fillType),z=i({type:"fillstyle",fillType:"solid",color:v(255,255,255)});class V extends z{}class N extends V{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}setColor(t){return b(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const G=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"solid"===t.fillType);class W extends V{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}setFallbackColor(t){return b(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const H=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"individual"===t.fillType),U=i({type:"fillstyle",fillType:"palette",lut:new D({steps:[]}),lookUpProperty:"value"});class $ extends U{constructor(t){super({...t,fillType:"palette"})}toString(){return`palettedFill:lut=${this.lut.toString()},lookUpProperty=${this.lookUpProperty}`}getPalette(){return this.get("lut")}setLookUpProperty(t){return"function"==typeof t?this.set("lookUpProperty",t(this.get("lookUpProperty"))):this.set("lookUpProperty",t)}getLookUpProperty(){return this.get("lookUpProperty")}}const j=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"palette"===t.fillType),Y={linear:(t,i,s)=>{const e=i-t;return h=>h<s?t+e/s*h:i},easeIn:(t,i,s)=>e=>e<s?t+Math.abs(2*(Math.sqrt(.5)*e/s)**2)*(i-t):i,easeOut:(t,i,s)=>e=>e<s?t+Math.abs(1-2*(Math.sqrt(.5)*(1-e/s))**2)*(i-t):i,ease:(t,i,s)=>e=>e<s?t+(e<s/2?.5*(e/s*2)**2.5:.5+.5*(1-(1-2*(e/s-.5))**2.5))*(i-t):i,logarithmic:t=>{const i=ui(t);return(s,e,h)=>{const r=i(s),n=i(e);return i=>i<h?t**(r+Math.abs(1-2*(Math.sqrt(.5)*(1-i/h))**2)*(n-r)):e}}};class X{constructor(t,i,e,h=Y.linear,r){this.delta=0,this.nextAnimations=new Array,this.F=!1,this.easing=Y.linear,this.I=new s,this.isOver=()=>(this.delta===this.duration||this.F)&&0===this.nextAnimations.length,this.values=t,this.action=i,this.duration=e,this.easing=h,this.P=r,this.eases=t.map((([t,i])=>h(t,i,e)))}D(){this.I.emit("start")}start(){return this.P.includes(this)||this.P.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach((t=>this.nextAnimations.push(t))):this.nextAnimations.push(t),this}NextAnimation(t,i,s=this.duration,e=this.easing){const h=new X(t,i,s,e,this.P);return this.nextAnimations.push(h),h}onAnimationStart(t,i){return this.I.on("start",t,i)}onAnimationEnd(t,i){return this.I.on("end",t,i)}onEveryAnimationEnd(t,i){return this.I.on("everyEnd",t,i)}onAllAnimationEnd(t,i){return this.I.on("allEnd",t,i)}allOffAnimationEnd(){return this.I.topicOff("end"),this}allOffEveryAnimationEnd(){return this.I.topicOff("everyEnd"),this}allOffAllAnimationEnd(){return this.I.topicOff("allEnd"),this}offAnimationEnd(t){return this.I.off(t,"end")}offEveryAnimationEnd(t){return this.I.off(t,"everyEnd")}offAllAnimationEnd(t){return this.I.off(t,"allEnd")}finish(t=!0){if(this.F=!0,this.P.splice(this.P.indexOf(this),1),this.nextAnimations.length>0){const i=this.nextAnimations[0];return t&&(this.I.listeners("allEnd").forEach(((t,s)=>i.onAllAnimationEnd(t,s))),this.I.listeners("everyEnd").forEach(((t,s)=>i.onEveryAnimationEnd(t,s)))),i.addNextAnimations(this.nextAnimations.slice(1)),i.start(),t&&(this.I.emit("end",i),this.I.emit("everyEnd",i)),i}t&&(this.I.emit("end",void 0),this.I.emit("everyEnd",void 0),this.I.emit("allEnd"))}finishAll(t=!0){let i=this;for(;i;)i=i.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(Pt):this.values.map(Pt)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let i=0;i<this.nextAnimations.length;i+=1)t+=this.nextAnimations[i].duration-this.nextAnimations[i].delta;return t}}const Z=(t,i=60)=>{i>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const s=[];let e,h,r=0;const n=()=>{e=void 0;const o=Date.now();h=h||o,r=o-h,r/1e3>=1/i&&(h=Date.now()-r%(1e3/i),s.forEach((t=>{0===t.delta&&t.D(),t.delta+=r-r%(1e3/i),t.delta>t.duration&&(t.delta=t.duration),t.action(t.eases.map((i=>i(t.delta)))),t.delta===t.duration&&t.finish()})),t()),s.length>0?e=kt.requestAnimationFrame(n):(e=void 0,h=void 0)};return(t=1e3,i=Y.linear)=>(h,r,o=t)=>{const a=new X(h,r,o,i,s).start();return e||(e=kt.requestAnimationFrame(n)),a}};var K,q;!function(t){t.circle="circle",t.ellipse="ellipse"}(K||(K={})),function(t){t.closestSide="closest-side",t.closestCorner="closest-corner",t.farthestSide="farthest-side",t.farthestCorner="farthest-corner"}(q||(q={}));const J=i({type:"fillstyle",fillType:"radial-gradient",stops:[{color:x("#f00"),offset:0},{color:x("#0f0"),offset:1}],position:n(.5,.5),shape:K.ellipse,extent:q.farthestCorner});class Q extends J{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.extent},${this.position.x},${this.position.y},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}}const tt=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"radial-gradient"===t.fillType),it=i({type:"fillstyle",fillType:"linear-gradient",stops:[{color:x("#f00"),offset:0},{color:x("#0f0"),offset:1}],angle:0});class st extends it{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const i=t.sort(((t,i)=>t.offset-i.offset));return this.set("stops",i)}getColorStops(){return this.get("stops")}setAngle(t,i){return this.set("angle",i?vs(t):t)}getAngle(t){return t?bs(this.get("angle")):this.get("angle")}}const et=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"linear-gradient"===t.fillType),ht=i({type:"linestyle",lineType:"empty"}),rt=new class extends ht{constructor(){super(...arguments),this.thickness=0}setThickness(t){return this}getThickness(){return 0}O(){return 0}setFillStyle(t){return this}getFillStyle(){return R}};class nt{constructor(t,i,e,h){this.cellIndex=t,this.cellSpan=i,this.cellsAmount=e,this.observedAmount=h,this.x=new ot,this.y=new ot,this.z=new ot,this.I=new s;const r={...t},n={...i};if(h){const t=t=>{this.cellsAmount.x=t.reduce(Ui,0),this.cellIndex.x=t.reduce(((t,i,s)=>s>=r.x?t:t+i),0),this.cellSpan.x=t.reduce(((t,i,s)=>s>=r.x&&s<r.x+n.x?t+i:t),0),this.I.emit("cell-resize")},i=h.x.L(t);t(h.x.S());const s=t=>{this.cellsAmount.y=t.reduce(Ui,0),this.cellIndex.y=t.reduce(((t,i,s)=>s>=r.y?t:t+i),0),this.cellSpan.y=t.reduce(((t,i,s)=>s>=r.y&&s<r.y+n.y?t+i:t),0),this.I.emit("cell-resize")},e=h.y.L(s);s(h.y.S()),this.R=()=>{h.x.V(i),h.y.V(e)}}}N(){return this.R&&(this.R(),this.R=void 0),this}G(t){return this.I.on("cell-resize",t)}W(t){return this.I.off(t,"cell-resize")}}class ot extends h{constructor(){super(...arguments),this.H=0,this.U=10,this.$=1}j(){return this.i=!1,this}Y(){return this.i=!0,this}getInnerStart(){return this.H}getInnerEnd(){return this.U}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}X(t,i){return this.H=t,this.U=i,this.Z(),this}K(t){return this.$=t,this.Z(),this}q(t){return t/this.$}Z(){const t=this.q(this.U-this.H),i=this.$;void 0!==this.J&&!1!==Ot(t,this.J)||(this.i=!0,this.tt=i,this.J=t)}it(){return this.J}st(){return this.tt}et(){return this.U<this.H}ht(t,i){return!0}}const at={d1:t=>new t.scale1DConstructor(0,1,1,void 0),d2:t=>(new t.scaleXYConstructor).rt({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new nt({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},lt=(t,i,s)=>i===s?t:s.nt(i.ot(t)),ut=(t,i,s)=>{if(i===s)return t;const e=i instanceof Vs?i.x:i.x instanceof Vs?i.x.x:i.x.ut,h=i instanceof Vs?i.y:i.y instanceof Vs?i.y.y:i.y.ut,r=s instanceof Vs?s.x:s.x instanceof Vs?s.x.x:s.x.ut,n=s instanceof Vs?s.y:s.y instanceof Vs?s.y.y:s.y.ut;return{...t,x:lt(t.x,e,r),y:lt(t.y,h,n)}},ct=(t,i,s)=>{if("axes"===i.id&&"world"===s.id)return i.chart.dt.ct(t);if("world"===i.id&&"axes"===s.id)return i.chart.dt.ft(t);if(i.id===s.id)return t;throw new Error("LC JS translatePoint3D misusage | originCoordinateSystem and targetCoordinateSystem arguments must be either Chart3D.coordsWorld or Chart3D.coordsAxis")},dt=(t,i,s)=>{const e=t(i,s);return t=>new N({color:e(t)})},ft=(t,i,s)=>{const e=t(i+1,s);return t=>new Q({stops:[{offset:0,color:e(t)},{offset:1,color:e(t).getDarker()}]})},gt=(t,i,s,e)=>{const h=t(i+1,e);return t=>new st({stops:[{offset:0,color:h(t).getDarker()},{offset:.5,color:h(t)},{offset:1,color:h(t).getDarker()}],angle:s||90})},mt=(...t)=>{if(0===t.length)return{remove:Bt};let i=!1;const s=t.map((s=>s.onIntervalChange(((e,h,r)=>((s,e,h)=>{i||(i=!0,t.filter((t=>t!==s)).forEach((t=>t.yt(e,h,!1,!1,"synchronizedAxis"))),i=!1)})(s,h,r)))));let e=!1;const h=t.map((i=>i.onStoppedStateChanged(((s,h)=>((i,s)=>{e||(e=!0,t.filter((t=>t!==i)).forEach((t=>t.setStopped(s))),e=!1)})(i,h)))));return{remove:()=>{t.forEach(((t,i)=>{t.offIntervalChange(s[i]),t.offStoppedStateChanged(h[i])}))}}},yt=(t,i,s,e)=>{if(!s||0===s.length)throw new Error("Invalid use regularColorSteps 'colorPalette' is undefined or empty");const h=null==e?void 0:e.formatLabels,r=null==e?void 0:e.alpha;return s.map(((e,n)=>{const o=t+n/(s.length-1)*(i-t);return{color:void 0!==r?e.setA(r):e,value:o,label:h?h(o):void 0}}))};class pt{constructor(t){this.St=t,this.bt=new Map}vt(t){const i=this.bt.get(t);return i&&i.length>0?i[0]:void 0}xt(t){let i=this.bt.get(t.lut);i?i.push(t):(i=[t],this.bt.set(t.lut,i))}Mt(t){const i=this.bt.get(t.lut);if(i){const s=i.indexOf(t);s>=0&&i.splice(s,1),0===i.length&&(this.St.deleteTexture(t.texture),this.bt.delete(t.lut))}}_t(){this.bt.forEach((t=>{var i;const s=null===(i=t[0])||void 0===i?void 0:i.texture;s&&this.St.deleteTexture(s)})),this.bt.clear()}}const St=t=>new pt(t);class bt extends Error{constructor(t,i){super(`ChartError: ${t} ${i?`in ${i.constructor.name}`:""}`),Object.setPrototypeOf(this,bt.prototype)}}class vt extends Error{constructor(t,i,s=!1){const e=`EngineError: ${t} ${i?`in ${i.constructor.name}`:""}`;super(e),s&&kt.alert(e),Object.setPrototypeOf(this,vt.prototype)}}class xt extends vt{constructor(t){super(t),Object.setPrototypeOf(this,xt.prototype)}}var Mt,_t,At,wt;!function(t){t[t.Content=0]="Content",t[t.PaddedContent=1]="PaddedContent",t[t.PaddedBackground=2]="PaddedBackground",t[t.Everything=3]="Everything"}(Mt||(Mt={})),function(t){t[t.never=0]="never",t[t.always=1]="always",t[t.whenHovered=2]="whenHovered",t[t.whenDragged=3]="whenDragged",t[t.whenNotDragged=4]="whenNotDragged",t[t.whenHoveredOrDragged=5]="whenHoveredOrDragged"}(_t||(_t={})),function(t){t[t.notDraggable=0]="notDraggable",t[t.draggable=1]="draggable",t[t.onlyHorizontal=2]="onlyHorizontal",t[t.onlyVertical=3]="onlyVertical"}(At||(At={})),function(t){t[t.Up=0]="Up",t[t.Right=1]="Right",t[t.Down=2]="Down",t[t.Left=3]="Left"}(wt||(wt={}));const kt="undefined"!=typeof window?window:"undefined"!=typeof global&&global._lcjs?global._lcjs:{},Ct=(t,i)=>t.x===i.x&&t.y===i.y,Tt=t=>t!==Ri&&t!==Ei&&!Number.isNaN(t)&&Number.isFinite(t)&&t!==1/0&&t!==-1/0,Ft=(t,i)=>Math.min(t,i.y),It=(t,i)=>Math.max(t,i.y),Pt=t=>t[1],Dt=t=>t.dispose(),Bt=()=>{},Ot=(t,i)=>t===i,Lt=(t,i,s)=>s>i?Math.min(Math.max(t,i),s):Math.min(Math.max(t,s),i),Rt=t=>Array.prototype.concat.apply([],t),Et=(t,i)=>{const{x:s,y:e}={x:t[0].length,y:t.length},{column:h,row:r}=i,n=Math.max(0,h.start),o=Math.min(s,h.end),a=Math.max(0,r.start),l=Math.min(e,r.end),u=o-n,c=l-a,d=Array.from(Array(c)).map((()=>Array(u)));for(let i=a,s=0;i<l;i+=1,s+=1)for(let e=n,h=0;e<o;e+=1,h+=1)d[s][h]=t[i][e];return{sliced:d,rows:c,columns:u}},zt=(t,i)=>{const s=i&&void 0!==i.row.start?i.row.start:0,e=i&&void 0!==i.row.end?i.row.end:t.y,h=i&&void 0!==i.column.start?i.column.start:0,r=i&&void 0!==i.column.end?i.column.end:t.x;return[Math.min(s,e),Math.max(s,e),Math.min(h,r),Math.max(h,r)]},Vt=(t,i)=>{for(;i;)t.push(t.shift()),i-=1},Nt=t=>{const i=[];for(const s of t)i.push(s.slice());return i},Gt=(t,i)=>void 0!==t?t:i,Wt=t=>t.At(),Ht=t=>t.wt(),Ut=t=>t.kt(),$t=t=>t.Ct(),jt=t=>t.min.x,Yt=t=>t.max.x,Xt=t=>t.min.y,Zt=t=>t.max.y,Kt=(t,i,s,e,h)=>{if(t.length>0){let r=h?e(h):void 0;for(let e=0;e<t.length;e+=1){const h=i(t[e]);void 0!==h&&(r=void 0!==r?s(r,h):h)}return r}if(h)return e(h)},qt=(t,i)=>t.position===i.position&&t.high===i.high&&t.low===i.low,Jt=n(0,1),Qt=n(1,0),ti=n(0,-1),ii=n(-1,0),si=n(0,0),ei=t=>{switch(t){case wt.Up:return Jt;case wt.Right:return Qt;case wt.Down:return ti;case wt.Left:return ii;default:return si}},hi=t=>t===wt.Left||t===wt.Right,ri=t=>{t.stopPropagation(),t.preventDefault()},ni=(t,i)=>{if(!i){const i=t.length,s=new Float32Array(2*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,e+=2}return s}const s=t.length,e=new Float32Array(4*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s.x),n=Math.fround(s.y);e[h+0]=r,e[h+1]=n,e[h+2]=s.x-r,e[h+3]=s.y-n,h+=4}return e},oi=t=>{const i=t.length,s=new Float32Array(3*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,s[e+2]=i.z,e+=3}return s},ai=t=>i=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)},li=t=>{let i=t.length;for(let s=0;s<i-1;s+=1)t[s].x===t[s+1].x&&t[s].y===t[s+1].y&&(t.splice(s,1),s-=1,i-=1);return t},ui=t=>{const i=Math.log(t);return t=>Math.log(t)/i},ci=ui(Math.E),di=(t,i)=>{const s=i[t];return s?s():void 0},fi=(t,i)=>{let s;if(i)s=i;else{const i={x:0,y:0};for(let s=0;s<t.length;s+=1)i.x+=t[s].x/t.length,i.y+=t[s].y/t.length;s=i}return t.sort(((t,i)=>xs(ds(t,s))-xs(ds(i,s))))},gi=(t,i,s)=>{if(0===t.length)return!1===s.canReturnB?i.slice():i;const e=i.length;if(e<1e5)return t.push.apply(t,i),t;for(let s=0;s<e;s+=1)t.push(i[s]);return t},mi=(t,i,s)=>s<0?t:s>1?i:v(t.getR()+s*(i.getR()-t.getR()),t.getG()+s*(i.getG()-t.getG()),t.getB()+s*(i.getB()-t.getB()),t.getA()+s*(i.getA()-t.getA())),yi=t=>255===t.getA()?t:t.setA(255),pi=(()=>{const t=v(0,0,0);return i=>(i=yi(i),new Q({shape:K.circle,extent:q.farthestCorner,position:{x:.2,y:.8},stops:[{offset:0,color:i},{offset:1,color:mi(i,t,.5)}]}))})(),Si=(()=>{const t=t=>{var i;if(t){if(G(t)){if(0===t.getColor().getA())return;return t.getColor()}if(tt(t)||et(t)){const s=t.getColorStops();return 3===s.length?s[1].color:null===(i=s[0])||void 0===i?void 0:i.color}j(t)}};return(i,s,e)=>{const h=[];if(e.fill&&h.push(e.fill),e.fill2&&h.push(e.fill2),e.stroke){const t=e.stroke.getFillStyle();t!==R&&h.push(t)}if(e.point3D){const t=e.point3D;h.push(t.getFillStyle())}let r;if(e.behavior&&!0===e.behavior.colorStep){const[i,e]=h.reduce(((i,s)=>{if(i[0]&&i[1])return i;const e=t(s);return e&&(void 0===i[0]?i[0]=e:i[1]=e),i}),[void 0,void 0]);r=i&&e?(n=i)===(o=e)||n.getR()===o.getR()&&n.getG()===o.getG()&&n.getB()===o.getB()?pi(n):(n=yi(n),o=yi(o),new st({angle:0,stops:[{offset:0,color:o},{offset:.5,color:o},{offset:.5,color:n},{offset:1,color:n}]})):s.uiButtonFillStyle}else{const i=h.reduce(((i,s)=>i||t(s)),void 0);r=i?pi(i):s.uiButtonFillStyle}var n,o;i.setButtonOffFillStyle(new N({color:v(255,255,255,0)})).setButtonOffStrokeStyle(s.uiButtonStrokeStyle).setButtonOnFillStyle(r).setButtonOnStrokeStyle(rt)}})(),bi=t=>{const i=t;if(j(i))return{lut:i.getPalette(),lookUpProperty:i.getLookUpProperty()}},vi=t=>{let i=0;return()=>(i+=1,`${t}-${i}`)},xi=(t,i)=>{let s="string"==typeof t?t:String(t);const e=s.indexOf(".");let h=e>=0?e:s.length;for(;h<i;h+=1)s=`0${s}`;return s},Mi=(t,i)=>"function"==typeof t?t(i):t,_i=t=>t.ctrlKey?Math.sign(t.deltaY)*Math.min(.05*Math.abs(t.deltaY),1):Math.sign(t.deltaY),Ai=(t,i)=>i(),wi=()=>new Error("LightningChart JS encountered an unexpected error.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact");new N({color:v(255,255,255,1)});const ki=t=>t===zi||t.min.x===zi.min.x&&t.max.x===zi.max.x&&t.min.y===zi.min.y&&t.max.y===zi.max.y,Ci=t=>Array.from(new Set(t)),Ti=t=>"boolean"==typeof t?t?1:0:t>1?1:t<0?0:t,Fi=(t,i)=>{throw new Error(i)},Ii=()=>{const t=Z((()=>{}));let i;return(s,e,h,r)=>{const n=null==r?void 0:r.onStart,o=null==r?void 0:r.onCompleted,a=(null==r?void 0:r.easing)||Y.ease,l=(null==r?void 0:r.durationMs)||1e3;let u;if(i)if(0===i.nextAnimations.length){const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else{s=i.nextAnimations.pop().values[0][0];const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else u=t(l,a)([[s,e]],(([t])=>{h(t)})),i=u;u.onAnimationEnd((()=>{i=void 0})),n&&u.onAnimationStart(n),o&&u.onAnimationEnd(o)}},Pi=t=>{let i;return()=>i||(i=t(),i)},Di=t=>{if(t===rt)return 0;const i=t.getThickness();return i<0?1:1*i},Bi=(t,i,s,e)=>{const h=`LightningChart JS Resources not found.\nresourcesBaseUrl: "${t}"\ninitiator: ${s}\nresource url: ${i}\nFor more information, please find the FAQ from API documentation at below link:\nhttps://lightningchart.com/js-charts/api-documentation/\nand read section "What is LightningChart JS Resources not found error?"`;if(e.shouldCrash)throw kt.alert(h),new Error(h);kt.console.warn(h)},Oi={left:0,right:0,top:0,bottom:0},Li={add:(t,i)=>l(t.x+i,t.y+i,t.z+i),addVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x+=t.x,s.y+=t.y,s.z+=t.z;return s},subtract:(t,i)=>l(t.x-i,t.y-i,t.z-i),subtractVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x-=t.x,s.y-=t.y,s.z-=t.z;return s},multiply:(t,i)=>l(t.x*i,t.y*i,t.z*i),divide:(t,i)=>l(t.x/i,t.y/i,t.z/i),multiplyVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x*=t.x,s.y*=t.y,s.z*=t.z;return s},divideVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x/=t.x,s.y/=t.y,s.z/=t.z;return s},length:t=>Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),normalize:t=>Li.divide(t,Li.length(t)),dot:(t,i)=>t.x*i.x+t.y*i.y+t.z*i.z,cross:(t,i)=>l(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x),angle:(t,i)=>Math.acos(Li.dot(t,i)/(Li.length(t)*Li.length(i))),rotateAroundAxis(t,i,s){const e=Math.cos(s),h=Math.sin(s),r=Li.dot(i,t),n=Li.cross(i,t);return Li.addVec(Li.multiply(t,e),Li.addVec(Li.multiply(i,(1-e)*r),Li.multiply(n,h)))},lerp:(t,i,s)=>(s=Lt(s,0,1),Li.addVec(Li.multiply(t,1-s),Li.multiply(i,s))),equals:(t,i)=>Ot(t.x,i.x)&&Ot(t.y,i.y)&&Ot(t.z,i.z),abs:t=>({x:Math.abs(t.x),y:Math.abs(t.y),z:Math.abs(t.z)}),sign:t=>({x:Math.sign(t.x),y:Math.sign(t.y),z:Math.sign(t.z)})},Ri=Number.MAX_SAFE_INTEGER,Ei=-Number.MAX_SAFE_INTEGER,zi=c(n(Ri,Ri),n(Ei,Ei)),Vi=c(l(Ri,Ri,Ri),l(Ei,Ei,Ei)),Ni=(t,i)=>{const s=Math.log(t)/Math.log(i);return Math.floor((t=>(Math.ceil(t)-t<1e-4?t=Math.ceil(t):t-Math.floor(t)<1e-4&&(t=Math.floor(t)),t))(s))},Gi=(t,i)=>!(i.min.x>t.max.x||i.max.x<t.min.x||i.min.y>t.max.y||i.max.y<t.min.y),Wi=(t,i)=>!(t[1].x<i[0].x||t[0].x>i[1].x||t[3].y<i[0].y||t[0].y>i[3].y),Hi=(t,i)=>c(n(Math.max(Math.min(t[0].x,t[2].x),Math.min(i[0].x,i[2].x)),Math.max(Math.min(t[0].y,t[2].y),Math.min(i[0].y,i[2].y))),n(Math.min(Math.max(t[0].x,t[2].x),Math.max(i[0].x,i[2].x)),Math.min(Math.max(t[0].y,t[2].y),Math.max(i[0].y,i[2].y)))),Ui=(t,i)=>i+t,$i=(t,i,s)=>{const e=ds(i,t),h=e.x*e.x+e.y*e.y;if(0===h)return t;const r=ds(s,t),o=(r.x*e.x+r.y*e.y)/h;return o<=0?t:o>=1?i:n(t.x+o*e.x,t.y+o*e.y)},ji=(t,i,s)=>s>i?t>=i&&t<=s:t>=s&&t<=i,Yi=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)},Xi=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return s*s+e*e},Zi=(t,i,s)=>{const e=Xi(i,s);if(0===e)return[Xi(t,i),i];let h=ys(ds(t,i),ds(s,i))/e;h=Math.max(0,Math.min(1,h));const r=n(i.x+h*(s.x-i.x),i.y+h*(s.y-i.y));return[Xi(t,r),r]},Ki=(t,i,s)=>cs(t,us(ds(i,t),s)),qi=(t,i,s)=>Li.addVec(t,Li.multiply(Li.subtractVec(i,t),s));function Ji(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y;for(let n=0;n<i;n+=1){const i=t[n];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y)}return c(n(e,r),n(s,h))}return zi}function Qi(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y,n=t[0].z,o=t[0].z;for(let a=0;a<i;a+=1){const i=t[a];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y),i.z>n&&(n=i.z),i.z<o&&(o=i.z)}return c(l(e,r,o),l(s,h,n))}return Vi}const ts=(...t)=>{const i={min:{x:Ri,y:Ri},max:{x:Ei,y:Ei}};for(const s of t)i.min.x=i.min.x<s.min.x?i.min.x:s.min.x,i.max.x=i.max.x>s.max.x?i.max.x:s.max.x,i.min.y=i.min.y<s.min.y?i.min.y:s.min.y,i.max.y=i.max.y>s.max.y?i.max.y:s.max.y;return i},is=(t,i)=>c(l(t.min.x<i.min.x?t.min.x:i.min.x,t.min.y<i.min.y?t.min.y:i.min.y,t.min.z<i.min.z?t.min.z:i.min.z),l(t.max.x>i.max.x?t.max.x:i.max.x,t.max.y>i.max.y?t.max.y:i.max.y,t.max.z>i.max.z?t.max.z:i.max.z));function ss(t,i,s,e){const h=t.x-e.x,r=t.y-e.y,n=e.x-s.x,o=s.y-e.y,a=o*h+n*r,l=(e.y-i.y)*h+(i.x-e.x)*r,u=o*(i.x-e.x)+n*(i.y-e.y);return u<0?a<=0&&l<=0&&a+l>=u:a>=0&&l>=0&&a+l<=u}const es=(t,i,s,e)=>n((t.x+i.x+s.x+e.x)/4,(t.y+i.y+s.y+e.y)/4),hs=(t,i,s,e,h)=>{if(i.x>s.x)if(i.x>e.x)if(i.x>h.x){if(t.x>i.x)return!1;if(h.x<e.x){if(h.x<s.x){if(t.x<h.x)return!1}else if(t.x<s.x)return!1}else if(e.x<s.x){if(t.x<e.x)return!1}else if(t.x<s.x)return!1}else{if(t.x>h.x)return!1;if(e.x<s.x){if(t.x<e.x)return!1}else if(t.x<s.x)return!1}else if(e.x>h.x){if(t.x>e.x)return!1;if(h.x<s.x){if(t.x<h.x)return!1}else if(t.x<s.x)return!1}else{if(t.x>h.x)return!1;if(t.x<s.x)return!1}else if(s.x>e.x)if(s.x>h.x){if(t.x>s.x)return!1;if(h.x<e.x){if(h.x<i.x){if(t.x<h.x)return!1}else if(t.x<i.x)return!1}else if(e.x<i.x){if(t.x<e.x)return!1}else if(t.x<i.x)return!1}else{if(t.x>h.x)return!1;if(e.x<i.x){if(t.x<e.x)return!1}else if(t.x<i.x)return!1}else if(e.x>h.x){if(t.x>e.x)return!1;if(h.x<i.x){if(t.x<h.x)return!1}else if(t.x<i.x)return!1}else{if(t.x>h.x)return!1;if(e.x<i.x){if(t.x<e.x)return!1}else if(t.x<i.x)return!1}if(i.y>s.y)if(i.y>e.y)if(i.y>h.y){if(t.y>i.y)return!1;if(h.y<e.y){if(h.y<s.y){if(t.y<h.y)return!1}else if(t.y<s.y)return!1}else if(e.y<s.y){if(t.y<e.y)return!1}else if(t.y<s.y)return!1}else{if(t.y>h.y)return!1;if(e.y<s.y){if(t.y<e.y)return!1}else if(t.y<s.y)return!1}else if(e.y>h.y){if(t.y>e.y)return!1;if(h.y<s.y){if(t.y<h.y)return!1}else if(t.y<s.y)return!1}else{if(t.y>h.y)return!1;if(t.y<s.y)return!1}else if(s.y>e.y)if(s.y>h.y){if(t.y>s.y)return!1;if(h.y<e.y){if(h.y<i.y){if(t.y<h.y)return!1}else if(t.y<i.y)return!1}else if(e.y<i.y){if(t.y<e.y)return!1}else if(t.y<i.y)return!1}else{if(t.y>h.y)return!1;if(e.y<i.y){if(t.y<e.y)return!1}else if(t.y<i.y)return!1}else if(e.y>h.y){if(t.y>e.y)return!1;if(h.y<i.y){if(t.y<h.y)return!1}else if(t.y<i.y)return!1}else{if(t.y>h.y)return!1;if(e.y<i.y){if(t.y<e.y)return!1}else if(t.y<i.y)return!1}return!0};function rs(t,i,s){return n(Math.cos(s)*(t.x-i.x)+Math.sin(s)*(t.y-i.y)+i.x,-Math.sin(s)*(t.x-i.x)+Math.cos(s)*(t.y-i.y)+i.y)}function ns(t,i){return n(t.x-i.x,t.y-i.y)}function os(t){const i=ls(t);return 0===i?n(0,0):n(t.x/i,t.y/i)}function as(t,i){let s={x:i.x-t.x,y:i.y-t.y};s=os(s);const e=Math.PI/2,h=s.x;return s.x=-Math.sin(e)*s.y,s.y=h*Math.sin(e),s}function ls(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function us(t,i){return n(t.x*i,t.y*i)}function cs(t,i){return n(t.x+i.x,t.y+i.y)}function ds(t,i){return n(t.x-i.x,t.y-i.y)}function fs(t,i){return n(t.x*i.x,t.y*i.y)}function gs(t,i){return n(t.x/i.x,t.y/i.y)}function ms(t){return us(t,-1)}function ys(t,i){return t.x*i.x+t.y*i.y}const ps=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.y+(t-i.x)*e;return n(t,h)},Ss=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.x+(t-i.y)/e;return n(h,t)};function bs(t){return t*Math.PI/180}function vs(t){return 180*t/Math.PI}function xs(t){return 180*Math.atan2(t.y,t.x)/Math.PI}function Ms(t){return n(Math.cos(t),Math.sin(t))}function _s(t){let i=-1;const s=Math.cos(t),e=Math.sin(t);return s>0&&s<1&&e>0&&e<1?i=1:s<0&&s>-1&&e>0&&e<1?i=2:s<0&&s>-1&&e<0&&e>-1?i=3:s>0&&s<1&&e<0&&e>-1&&(i=4),i}const As=(t,i,s,e)=>{let h,r,o,a;if(i.x-t.x!=0||e.x-s.x!=0)return i.x-t.x==0?(o=i.x,r=(e.y-s.y)/(e.x-s.x),a=r*(o-s.x)+s.y):e.x-s.x==0?(o=e.x,h=(i.y-t.y)/(i.x-t.x),a=h*(o-t.x)+t.y):(h=(i.y-t.y)/(i.x-t.x),r=(e.y-s.y)/(e.x-s.x),o=(s.y-r*s.x+h*t.x-t.y)/(h-r),a=h*(o-t.x)+t.y),n(o,a)},ws=(t,i)=>{const s=t.length,e=i.length,h=new Uint16Array(s+e);return h.set(t,0),h.set(i,s),h};class ks{constructor(){this.Tt=!0}getInnerStart(){return this.H}getInnerEnd(){return this.U}getInnerInterval(){return Math.abs(this.U-this.H)}X(t,i){return this.H=t,this.U=i,this}j(){return this.Tt=!1,this}Y(){return this.Tt=!0,this}}class Cs extends ks{constructor(t,i,s,e){if(super(),this.Ft=!0,this.It=!0,this.Pt=[0,0],this.Dt=!0,this.Bt=t,this.Ot=i,this.Lt=s,this.Rt=t,this.Et=i,e){const t=e.L(this.zt.bind(this));this.zt(e.S()),this.Vt=()=>e.V(t)}}K(t){return this.$=t,this.It=!0,this}Nt(t){return this.Pt=t.map(Math.abs),this.Dt=!0,this}Gt(){return this.Bt/this.Lt*this.$+this.Pt[0]}Wt(){return(this.Bt+this.Ot)/this.Lt*this.$-this.Pt[1]}Ht(){return this.getCellSize()-this.Ut()}$t(){return this.$}getCellSize(){return this.jt(this.$)}Ut(){return this.Pt[0]+this.Pt[1]}Yt(){return this.Pt}zt(t){this.Lt=t.reduce(Ui,0),this.Bt=t.reduce(((t,i,s)=>s>=this.Rt?t:t+i),0),this.Ot=t.reduce(((t,i,s)=>s>=this.Rt&&s<this.Rt+this.Et?t+i:t),0),this.Ft=!0,this.Xt()}jt(t){return t*this.Ot/this.Lt}j(){return super.j(),this.It=!1,this.Dt=!1,this.Ft=!1,this}Y(){return super.Y(),this.It=!0,this.Dt=!0,this.Ft=!0,this}}class Ts extends Cs{constructor(t,i,s,e){super(t,i,s,e),this.Zt={internal:10,function:Fs(10),number:10},this.$=1e3,this.X(1,1e3),this.Kt=this.qt()}ht(t,i,s,e,h){if(t===i)return!1;const r=Math.min(t,i)<Ps,n=Math.max(t,i)>Ds;return!r&&!n||!!h&&(i>t?{start:r?Ps:t,end:n?Ds:i}:{start:n?Ds:t,end:r?Ps:i})}ot(t){const i=this.Gt(),s=this.Wt(),e=Math.max(t,Ps);return i+(this.Zt.function(e)-this.Kt.scaleStartLog)/this.Kt.scaleIntervalLog*(s-i)}nt(t){const i=this.Gt(),s=(t-i)/(this.Wt()-i),e=this.Kt.scaleStartLog+s*this.Kt.scaleIntervalLog;return this.Zt.number**e}Xt(){this.Zt&&this.qt()}X(t,i){return super.X(t,i),this.Zt&&this.qt(),this}Nt(t){return super.Nt(t),this.Zt&&this.qt(),this}K(t){return super.K(t),this.Zt&&this.qt(),this}Jt(t){return this.Zt={internal:t,function:Fs(t),number:Is(t)},this}Qt(){return this.Zt.internal}ti(t,i){const s=this.ot(t)+i;return this.nt(s)}ii(){return this.It||this.Tt||this.Dt||this.Ft}qt(){const t=this.Zt.function(this.H),i=this.Zt.function(this.U)-t,s=2*this.Gt()/this.$-1,e=2*this.Wt()/this.$-1-s;return this.Kt={scaleStartLog:t,scaleIntervalLog:i,viewportStart:s,viewportSize:e},this.Kt}si(){return this.Kt}}const Fs=t=>"e"===t?ci:ui(t),Is=t=>"e"===t?Math.E:t,Ps=.9*1e-9,Ds=1.1*10**32,Bs=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],Os=(t,i,s)=>{const e=Math.abs(s-i),h=Math.max(2-Ni(e,10),0);return t.toFixed(h)},Ls={Numeric:(t,i)=>Os(t,i.getInnerStart(),i.getInnerEnd()),NumericUnits:(t,i)=>{const s=Math.abs(i.getInnerEnd()-i.getInnerStart()),e=t<0;t=Math.abs(t);let h="",r="";if(s>=1e3&&t>1e3){let i="";for(const s of Bs){const e=Math.round(1e3*t/s.unit)/1e3;if(e>=1){i=e.toString(),r=s.prefix;break}}h=(e?"-":"")+i}else{let i=String(Math.floor(t));const r=Ni(t,1e3);for(let t=1;t<=r;t+=1){const s=i.length-(3*t+(t-1));i=`${i.substring(0,s)} ${i.substring(s,i.length)}`}h=(e?"-":"")+i+(s<=10?((t,i)=>{if(0===i)return"";let s=(Math.abs(t)-Math.abs(Math.floor(t))).toString().substring(1);return s.length>i&&(s=s.substring(0,i+1)),s})(t,2-Ni(s,10)):"")}return h+=r,h}},Rs=(t,i)=>{const s=Fs(i);return"e"===i?t?(t,i)=>`${Math.floor(s(t))}e`:()=>"":(t,i)=>{const e=t.toString();if(t>1)return e;const h=Math.floor(s(t));return t.toFixed(Math.abs(h))}};class Es extends Cs{constructor(t,i,s,e){super(t,i,s,e),this.ei=!1,this.hi=!1,this.ri=0,this.$=1e3,this.X(0,10),this.Z()}ii(){return this.hi}ht(t,i,s,e,h){if(t===i)return!1;const r=Math.abs(e-s),n=Math.abs(i-t);if(!this.ei){const s=((t,i,s)=>{const e=((t,i)=>{if(i<Ri&&i>Ei&&t<Ri&&t>Ei){const s=Math.abs(t/2**23),e=Math.abs(i/2**23),h=Math.min(s,e);return 10**Math.floor(Math.log10(h))}})(t,i);if(void 0!==e)return e*s})(t,i,this.getCellSize());if(void 0===s)return!1;if(n>s)return!0;const e=(i+t)/2,o=(h?s/2:r/2)*(t>i?-1:1);return{start:e-o,end:e+o}}const o=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(n>o)return!0;const a=(i+t)/2,l=(h?o/2:r/2)*(t>i?-1:1);return{start:a-l,end:a+l}}Xt(){this.Z()}ot(t){return this.Gt()+(t-this.H)/(this.U-this.H)*(this.Wt()-this.Gt())}nt(t){return this.H+(t-this.Gt())/(this.Wt()-this.Gt())*(this.U-this.H)}X(t,i){return super.X(t,i),this.Z(),this}Nt(t){return super.Nt(t),this.Z(),this}K(t){return super.K(t),this.ni=zs(this.U-this.H,this.Pt,this.$,this.Ot,this.Lt),this.Z(),this}oi(){return this.ei=!0,this}ai(){return this.ei}li(){return Math.abs(this.ui)}ci(){return this.li()/this.ni}di(){return this.fi}gi(){return this.mi}getPixelSize(){return this.ni}si(){return this.Kt}Y(){return super.Y(),this.hi=!0,this}j(){return super.j(),this.hi=!1,this}yi(t,i=Ls.Numeric){return i(t,this)}pi(){const t=Math.abs(this.getInnerEnd()).toString().length,i=Math.abs(this.getInnerStart()).toString().length;return t>i?t:i}Si(t){return zs(t,this.Pt,this.$,this.Ot,this.Lt)}Z(){let t=this.H,i=this.U,s=0;this.ei&&(t=0,i=this.U-this.H,s=this.H);const e=i-t,h=zs(e,this.Pt,this.$,this.Ot,this.Lt);this.mi=t-this.Pt[0]*h,this.fi=i+this.Pt[1]*h;const r=this.fi-this.mi,n=r-this.ui,o=Math.abs(n/h),a=e-this.ri,l=Math.abs(a/h);(!this.Kt||o>=.4||l>=.4)&&(this.ri=e,this.ui=r,this.ni=h,this.hi=!0);const u=this.ui*this.Lt/(2*this.Ot),c=-(this.mi-this.ui*this.Bt/this.Ot)-u,d=2*this.Gt()/this.$-1,f=2*this.Wt()/this.$-1-d;this.Kt={displacement:c,scaling:u,highPrecisionOffset:s,viewportStart:d,viewportSize:f,scaleStartLog:0,scaleIntervalLog:0}}ti(t,i){return t+this.ni*i}}const zs=(t,i,s,e=1,h=1)=>t/(s*e/h-(i[0]+i[1]));class Vs{bi(t,i){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),this}j(){return this.x.j(),this.y.j(),this}Y(){return this.x.Y(),this.y.Y(),this}K(t,i){return"object"==typeof t?(this.x.K(t.x),this.y.K(t.y)):(this.x.K(t),this.y.K(i)),this}$t(){return n(this.x.$t(),this.y.$t())}vi(t){return this.x.Nt(t),this}xi(t){return this.y.Nt(t),this}Ut(){return n(this.x.Ut(),this.y.Ut())}Mi(t,i){return this.x.X(t,i),this}_i(t,i){return this.y.X(t,i),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),i=this.y.getCellSize();return{x:t-this.x.Ut(),y:i-this.y.Ut()}}Ai(){return this.x.ii()||this.y.ii()}}class Ns extends Vs{constructor(){super(...arguments),this.wi="LinearScaleXY"}rt(t,i,s,e){return this.x=new Es(t.x,i.x,s.x,e?e.x:void 0),this.y=new Es(t.y,i.y,s.y,e?e.y:void 0),this}ai(){return this.x.ai()||this.y.ai()}ki(){return n(this.x.getPixelSize(),this.y.getPixelSize())}si(){return{x:this.x.si(),y:this.y.si()}}ti(t,i){const s=this.ki();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}Ci(t,i,s,e){const h=this.ki(),r=as(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class Gs extends Vs{constructor(){super(...arguments),this.wi="MixedScaleXY"}ai(){return!1}ti(t,i){const s=this.x.ot(t.x),e=this.y.ot(t.y),h={x:s+i.x,y:e+i.y};return{x:this.x.nt(h.x),y:this.y.nt(h.y)}}Ci(t,i,s,e){const h={x:this.x.ot(t.x),y:this.y.ot(t.y)},r={x:this.x.ot(i.x),y:this.y.ot(i.y)},n=os(ds(r,h)),o=as(r,h),a={x:h.x+n.x*e+o.x*s,y:h.y+n.y*e+o.y*s};return{x:this.x.nt(a.x),y:this.y.nt(a.y)}}si(){const t=this.x.si(),i=this.y.si();return{uScaleStart:[this.x.H,this.y.H],uScaleInterval:[this.x.getInnerInterval(),this.y.getInnerInterval()],uScaleStartLog:[t.scaleStartLog,i.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,i.scaleIntervalLog],uViewportStart:[t.viewportStart,i.viewportStart],uViewportSize:[t.viewportSize,i.viewportSize]}}}const Ws=(t,i)=>t instanceof Ts||i instanceof Ts?(new Gs).bi(t,i):(new Ns).bi(t,i),Hs=t=>"client"===t,Us=t=>!!(t&&"object"==typeof t&&"clientX"in t&&"number"==typeof t.clientX&&"clientY"in t&&"number"==typeof t.clientY),$s=t=>"relative"===t,js=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y);var Ys;!function(t){t[t.noHighlighting=0]="noHighlighting",t[t.onHover=1]="onHover"}(Ys||(Ys={}));class Xs{constructor(t,i,e,h){this.Ti=!0,this.Fi=Ys.onHover,this.Ii=!1,this.Pi=!0,this.Di=!1,this.I=new s,this.Bi=[],this.Oi=[],this.Li=(t,i)=>{this.setVisible(i)},this.Ri=()=>this.setHighlight(1),this.Ei=()=>this.setHighlight(0),this.onMouseEnter=t=>this.I.on("mouseEnter",t),this.onMouseLeave=t=>this.I.on("mouseLeave",t),this.onMouseClick=t=>this.I.on("mouseClick",t),this.onMouseDoubleClick=t=>this.I.on("mouseDoubleClick",t),this.onMouseDown=t=>this.I.on("mouseDown",t),this.onMouseUp=t=>this.I.on("mouseUp",t),this.onMouseMove=t=>this.I.on("mouseMove",t),this.offMouseEnter=t=>this.I.off(t,"mouseEnter"),this.offMouseLeave=t=>this.I.off(t,"mouseLeave"),this.offMouseClick=t=>this.I.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.I.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.I.off(t,"mouseDown"),this.offMouseUp=t=>this.I.off(t,"mouseUp"),this.offMouseMove=t=>this.I.off(t,"mouseMove"),this.offMouseDragStart=t=>this.I.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.I.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.I.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.I.off(t,"mouseWheel"),this.zi=(t,i,s)=>{this.I.emit("mouseEnter",this,i),this.Di=!0,this.Fi===Ys.onHover&&this.setHighlight(!0)},this.Vi=(t,i,s)=>{this.I.emit("mouseLeave",this,i),this.Di=!1,this.Fi===Ys.onHover&&this.setHighlight(!1)},this.Ni=(t,i,s)=>{this.I.emit("mouseMove",this,i)},this.Gi=(t,i,s)=>this.I.emit("mouseClick",this,i),this.Wi=(t,i,s)=>this.I.emit("mouseDoubleClick",this,i),this.Hi=(t,i,s)=>this.I.emit("mouseDown",this,i),this.Ui=(t,i,s)=>this.I.emit("mouseUp",this,i),this.$i=(t,i,s,e)=>{this.I.emit("mouseDragStart",this,i,s)},this.ji=(t,i,s,e,h,r)=>{this.I.emit("mouseDrag",this,i,s,e,h)},this.Yi=(t,i,s,e,h)=>{this.I.emit("mouseDragStop",this,i,s,e)},this.Xi=(t,i,s)=>{this.I.emit("mouseWheel",this,i)},this.Zi=(t,i,s)=>{this.I.emit("touchStart",this,i),this.Di=!0,this.Fi===Ys.onHover&&this.setHighlight(!0)},this.Ki=(t,i,s)=>{this.I.emit("touchMove",this,i)},this.qi=(t,i,s)=>{this.I.emit("touchEnd",this,i),this.Di=!1,this.Fi===Ys.onHover&&this.setHighlight(!1)},this.Ji=t,this.Qi=i,this.ts=e,this.ss=new Map,this.es=h,this.hs=this.es.rs(this,{ns:{themeEffectEnabled:this.ts.effectsText},os:{}}),this.Ji.cs.us.ls(this,(t=>{this.ss.forEach(((i,s)=>s.ds(t))),this.Oi.forEach((i=>i.setHighlight(t))),this.Bi.forEach((i=>i.ds(t)))}),{animationEnabled:this.Ji.getAnimationsEnabled()})}fs(t,i){const s=void 0===(null==i?void 0:i.setEventHandlers)||i.setEventHandlers,e=void 0!==(null==i?void 0:i.isText)&&i.isText;this.ss.set(t,{isText:e});const h=Array.from(this.ss);this.hs.ns.gs(h.filter((t=>t[1].isText)).map((t=>t[0]))),this.hs.os.gs(h.filter((t=>!t[1].isText)).map((t=>t[0]))),t.setMouseInteractions(this.Ti).setVisible(this.Pi).ds(this.Ji.cs.us.ys(this,!0)),s&&t.setMouseEnterEventHandler(this.zi).setMouseLeaveEventHandler(this.Vi).setMouseClickEventHandler(this.Gi).setMouseDoubleClickEventHandler(this.Wi).setMouseDownEventHandler(this.Hi).setMouseUpEventHandler(this.Ui).setMouseMoveEventHandler(this.Ni).setMouseDragStartEventHandler(this.$i).setMouseDragEventHandler(this.ji).setMouseDragStopEventHandler(this.Yi).setMouseWheelEventHandler(this.Xi).setTouchStartEventHandler(this.Zi).setTouchMoveEventHandler(this.Ki).setTouchEndEventHandler(this.qi);const r=t.onDispose((()=>{t.offDispose(r),this.ss.delete(t)}))}ps(t){this.Bi=t;const i=this.Ji.cs.us.ys(this,!0);t.forEach((t=>{t.ds(i).Ss(this.Pi)}))}setEffect(t){return this.hs.ns.bs(t&&this.ts.effectsText),this.hs.os.bs(t),this.Ji.cs.vs(),this}getEffect(){return this.hs.ns.xs()||this.hs.os.xs()}onHighlight(t){return this.I.on("highlight",t)}offHighlight(t){return this.I.off(t)}setName(t){return this.Ms=t,this.Oi.forEach((t=>t.setText(this.Ms))),this}getName(){return this.Ms}dispose(){return this.Ii||(this.Ii=!0,this.ss.forEach(((t,i)=>i.dispose())),this.Qi(this),this.Oi.forEach((t=>{t.dispose()})),this.Oi.length=0,this.I.emit("dispose",this),this.Ji.cs.vs()),this}setVisible(t){return t===this.Pi||(this.Pi=t,this.ss.forEach(((i,s)=>s.setVisible(t))),this.Bi.forEach((i=>i.Ss(t))),this.Oi.forEach((i=>i.setOn(t))),this.I.emit("visibleStateChanged",this,this.Pi),this.Ji.cs.vs()),this}getVisible(){return this.Pi}onVisibleStateChanged(t){return this.I.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.I.off(t,"visibleStateChanged")}setHighlight(t){return this.Ji.cs.us._s(this,t),this.I.emit("highlight",t),this}getHighlight(){return this.Ji.cs.us.ys(this)}setAnimationHighlight(t){return this.Ji.cs.us.As(this,t),this}getAnimationHighlight(){return this.Ji.cs.us.ws(this)}setMouseInteractions(t){return this.Ti=t,this.ss.forEach(((i,s)=>s.setMouseInteractions(t))),this.Ji.cs.vs(),this}getMouseInteractions(){return this.Ti}getIsUnderMouse(){return this.Di}setHighlightOnHover(t){return this.Fi=t?Ys.onHover:Ys.noHighlighting,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Fi!==Ys.noHighlighting}attach(t,i=!0){t.setText(this.Ms),t.setButtonOffStrokeStyle(t.getButtonOffStrokeStyle().setThickness(1)),t.setButtonOnStrokeStyle(t.getButtonOnStrokeStyle().setThickness(1));const s=t.getLocked();return t.setLocked(!1).setOn(this.getVisible()).setLocked(s),i&&t.onSwitch(this.Li),t.setLocked(!i),t.onMouseEnter(this.Ri),t.onMouseLeave(this.Ei),this.onMouseEnter((()=>t.setHighlight(!0))),this.onMouseLeave((()=>t.setHighlight(!1))),this.onTouchStart((()=>t.setHighlight(!0))),this.onTouchEnd((()=>t.setHighlight(!1))),this.Oi.push(t),this}onMouseDragStart(t){return this.I.on("mouseDragStart",t)}onMouseDrag(t){return this.I.on("mouseDrag",t)}onMouseDragStop(t){return this.I.on("mouseDragStop",t)}onMouseWheel(t){return this.I.on("mouseWheel",t)}onTouchStart(t){return this.I.on("touchStart",t)}onTouchMove(t){return this.I.on("touchMove",t)}onTouchEnd(t){return this.I.on("touchEnd",t)}onDispose(t){return this.I.on("dispose",t)}offTouchStart(t){return this.I.off(t,"touchStart")}offTouchMove(t){return this.I.off(t,"touchMove")}offTouchEnd(t){return this.I.off(t,"touchEnd")}offDispose(t){return this.I.off(t,"dispose")}}class Zs extends Xs{constructor(t,i,s,e,h,r,n,o){super(i,s,n,o),this.ks=t,this.axis=e,this.ut=h,this.Cs=r,this.Ts()}}const Ks=t=>{const i=t.length;if(i>0){let s=0,e=0;for(let h=0;h<i;h+=1)s+=t[h].x,e+=t[h].y;return n(s/i,e/i)}return n(0,0)},qs=(...t)=>{const i=t.length,s=new Array(i).fill(!1),e=(e,h)=>{for(let r=0;r<i;r+=1){const i=t[r],n=i.Fs(e,h);n?i.Is(e,h,!0):s[r]&&s[r]&&i.Is(e,h,!1),s[r]=n}return!1};return{onTouchStart:e,onTouchMove:e,onTouchEnd:e}},Js=class{constructor(t,i=300){this.Ps=!1,this.Ds=[],this.Bs=300,this.Os=t,this.Bs=i}Fs(t,i){const s=kt.performance.now();let e=!1;for(let t=0;t<this.Ds.length;t+=1)s-this.Ds[t].time>=this.Bs?(this.Ds.splice(t,1),t-=1):this.Ds[t].state&&(e=!0);return this.Ps?0===i.interactions.length&&(this.Ds.push({state:!1,time:s}),this.Ps=!1):1===i.interactions.length&&"pointerdown"===i.type&&(this.Ds.push({state:!0,time:s}),e=!0,this.Ps=!0),e}Is(t,i,s){if(s){const s=this.Ds.reduce(((t,i)=>(i.state?t.on+=1:t.off+=1,t)),{on:0,off:0});s.on>=2&&s.off>=1&&(this.Os(t,i),this.Ds.length=0)}}},Qs=class{constructor(t,i,s,e=1,h=100){this.Ls=t,this.Rs=i,this.Es=s,this.zs=e,this.Vs=h}Fs(t,i){const s=i.interactions.length;if(s===this.zs){if(void 0!==this.Ns)return!0;if("pointerdown"===i.type&&(1===s||(t=>{const i=t.length;if(i>0){const s=Ks(t);let e=0;for(let h=0;h<i;h+=1)e=Math.max(e,Yi(s,n(t[h].x,t[h].y)));return e}return Ri})(i.interactions)<=this.Vs))return this.Ns=Ks(i.interactions),!0}return!1}Is(t,i,s){const e=this.Gs;if(!s||i.forceTouchEnd||"pointerup"===i.type)this.Es&&this.Es(t,this.Ns,e,i),this.Ns=void 0,this.Gs=void 0;else{const s=Ks(i.interactions);"pointerdown"===i.type?this.Ls&&this.Ls(t,this.Ns,i):"pointermove"===i.type&&this.Rs&&this.Rs(t,this.Ns,s,n(s.x-e.x,e.y-s.y),i),this.Gs=s}}},te=class{constructor(t,i,s){this.Ws=!1,this.Ls=t,this.Rs=i,this.Es=s}Fs(t,i){return this.Ws?2!==i.interactions.length&&(this.Ws=!1):2===i.interactions.length&&"pointerdown"===i.type&&(this.Ws=!0),this.Ws}Is(t,i,s){let e,h;if(s&&"pointerup"!==i.type){if("pointerdown"===i.type){const s=i.interactions;e=s[0],h=s[1],this.Ls(t,e,h,i)}else if("pointermove"===i.type){e=i.interactions[0],h=i.interactions[1];const s=this.Hs,r=this.Us,o=n(e.x-s.x,s.y-e.y),a=n(h.x-r.x,r.y-h.y);this.Rs(t,e,h,o,a,i)}}else{const s=i.interactions;this.Es(t,s[0],s[1],i)}this.Hs=e,this.Us=h}},ie=i({type:"linestyle",lineType:"solid",fillStyle:new N({color:v(255,255,255)}),thickness:1});class se extends ie{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}O(){const t=this.getThickness();return t<0?1:t}}const ee=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"solid"!==t.lineType);class he{constructor(t,i){this.$s=t,this.js=i,this.Ys=i.rows*Oe,this.Xs=i.columns*Le}}var re,ne;!function(t){t[t.ZoomIn=0]="ZoomIn",t[t.ZoomInX=1]="ZoomInX",t[t.ZoomInY=2]="ZoomInY",t[t.ZoomOut=3]="ZoomOut",t[t.ZoomOutX=4]="ZoomOutX",t[t.ZoomOutY=5]="ZoomOutY",t[t.ZoomToFit=6]="ZoomToFit",t[t.ToggleAnimations=7]="ToggleAnimations"}(re||(re={})),function(t){t[t.Circle=0]="Circle",t[t.Rectangle=1]="Rectangle",t[t.RoundedRectangle=2]="RoundedRectangle"}(ne||(ne={}));const oe={x:-43,y:0},ae={x:-65,y:0},le={x:-86,y:0},ue={x:-107,y:-1},ce={x:-128,y:-3},de={x:-150,y:0},fe={x:-171,y:0},ge={x:-276,y:0},me={x:-298,y:0},ye={x:0,y:0},pe={x:-21,y:0};class Se extends he{constructor(t,i,s,e){super(t,s),this.Zs=kt.document.createElement("button"),this.Ks=kt.document.createElement("div"),this.qs=kt.document.createElement("label"),this.js=s,this.Js=i,this.Ji=e}Qs(t,i,s,e){this.te(t,e),this.ie(),this.se(i),this.ee(),this.qs.textContent=s||"";const h=kt.document.createElement("div");this.he(h),this.Zs.onclick=this.onClick.bind(this),h.appendChild(this.Ks),h.appendChild(this.qs),this.Zs.appendChild(h)}ee(){this.Zs.style.cursor="pointer"}he(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}se(t){"string"==typeof t?(this.Ks.style.backgroundImage=`url(${t})`,this.Ks.style.backgroundSize="100%",this.Ks.style.backgroundRepeat="no-repeat",this.Ks.style.backgroundPosition="center",this.Ks.style.width="20px",this.Ks.style.height="20px"):this.applyStyleForSprite(t),this.Ks.style.margin="auto"}ie(){switch(this.Js){case ne.RoundedRectangle:this.Zs.style.borderRadius="10px";break;case ne.Rectangle:this.Zs.style.borderRadius="0px";break;case ne.Circle:default:this.Zs.style.borderRadius="31px"}}te(t,i){this.Zs.style.width=`${this.Xs.toString()}px`,this.Zs.style.height=`${this.Ys.toString()}px`,this.Zs.style.backgroundColor=t,this.Zs.style.opacity=i||Re,this.Zs.style.alignItems="center",this.Zs.style.border="2px solid #707070",this.Zs.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.Ks.style.backgroundImage=`url(${this.$s}/${Ee})`,this.Ks.style.backgroundPositionX=`${t.x}px`,this.Ks.style.backgroundPositionY=`${t.y}px`,this.Ks.style.backgroundSize="1600%",this.Ks.style.backgroundRepeat="no-repeat",this.Ks.style.width="20px",this.Ks.style.height="20px"}re(t){return t.appendChild(this.Zs),t}ne(){return this.Zs}}class be extends Se{constructor(t,i,s,e){super(t,i,s,e),this.oe="",this.ae="",this.le=!1,this.Ji=e}ue(){this.ce(),this.onToggledStateAction()}de(){this.fe(),this.onInitialStateAction()}fe(){this.ge(this.oe)}ce(){this.ge(this.ae)}ge(t){"string"==typeof t?this.Ks.style.background=t:(this.Ks.style.backgroundImage=`url(${this.$s}/${Ee})`,this.Ks.style.backgroundPositionX=`${t.x}px`,this.Ks.style.backgroundPositionY=`${t.y}px`)}onClick(){this.le?this.de():this.ue(),this.le=!this.le}}class ve extends Se{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ji=i;const e=this.Ji.getTheme();this.Qs(e.onScreenMenuBackgroundColor.toRGBAString(),oe)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:-1,y:-1})}}class xe extends Se{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ji=i;const e=this.Ji.getTheme();this.Qs(e.onScreenMenuBackgroundColor.toRGBAString(),ue)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:-1,y:0})}}class Me extends Se{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ji=i;const e=this.Ji.getTheme();this.Qs(e.onScreenMenuBackgroundColor.toRGBAString(),de)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:0,y:-1})}}class _e extends Se{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ji=i;const e=this.Ji.getTheme();this.Qs(e.onScreenMenuBackgroundColor.toRGBAString(),ae)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:1,y:1})}}class Ae extends Se{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ji=i;const e=this.Ji.getTheme();this.Qs(e.onScreenMenuBackgroundColor.toRGBAString(),ce)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:1,y:0})}}class we extends Se{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ji=i;const e=this.Ji.getTheme();this.Qs(e.onScreenMenuBackgroundColor.toRGBAString(),fe)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:0,y:1})}}class ke extends be{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ji=i;const e=this.Ji.getTheme();this.oe=ge,this.ae=me,this.Qs(e.onScreenMenuBackgroundColor.toRGBAString(),this.oe)}onToggledStateAction(){this.Ji.setAnimationsEnabled(!1)}onInitialStateAction(){this.Ji.setAnimationsEnabled(!0)}}class Ce extends Se{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ji=i;const e=this.Ji.getTheme();this.Qs(e.onScreenMenuBackgroundColor.toRGBAString(),le)}onClick(){this.Ji.forEachAxis((t=>{t.fit(!0)}))}}class Te extends Se{constructor(t,i,s){super(t,i.shape||ze,i.dimensions||{rows:1,columns:1},s);const e=s.getTheme(),h=i.color||e.onScreenMenuBackgroundColor.toRGBAString(),r=i.icon||"",n=i.label||"",o=i.opacity||"";this.Qs(h,r,n,o),this.ye=i.action}onClick(){this.ye(this.Ji)}}class Fe extends be{constructor(t,i,s,e){super(t,i,{rows:1,columns:1},s),this.Ji=s,this.pe=e,this.oe=pe,this.ae=ye,this.Qs(Ve,this.oe)}fe(){this.ge(this.oe),this.Zs.style.backgroundColor=Ve,this.Zs.style.border="2px solid #707070",this.Zs.style.margin="0px"}ce(){this.ge(this.ae),this.Zs.style.background="#FECC00 0% 0% no-repeat padding-box",this.Zs.style.border="10px solid #BCBCBC12",this.Zs.style.margin="1px"}onToggledStateAction(){var t;null===(t=this.pe)||void 0===t||t.style.setProperty("display","block")}onInitialStateAction(){var t;null===(t=this.pe)||void 0===t||t.style.setProperty("display","none")}}var Ie;!function(t){t.Move="move",t.ResizeColumn="col-resize",t.ResizeRow="row-resize",t.Horizontal="ew-resize",t.Vertical="ns-resize",t.NorthWest="nw-resize",t.NorthEast="ne-resize",t.Copy="copy",t.CrossHair="crosshair",t.Default="default",t.Help="help",t.Restricted="not-allowed",t.None="none",t.Point="pointer",t.Text="text",t.Wait="wait",t.ZoomIn="zoom-in",t.ZoomOut="zoom-out"}(Ie||(Ie={}));const Pe={LeftBottom:n(-1,-1),CenterBottom:n(0,-1),RightBottom:n(1,-1),LeftCenter:n(-1,0),Center:n(0,0),RightCenter:n(1,0),LeftTop:n(-1,1),CenterTop:n(0,1),RightTop:n(1,1)},De=new N({color:v(255,255,255,0)}),Be=new se({thickness:1,fillStyle:De}),Oe=60,Le=60,Re="1.0",Ee="osm/osm-sprite-transparent.png",ze=ne.Circle,Ve="#363636";var Ne;!function(t){t[t.TopRight=0]="TopRight",t[t.TopLeft=1]="TopLeft",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight"}(Ne||(Ne={}));class Ge extends Zs{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.Ms="Band",this.Se=0,this.be=0,this.ve=this.ts.bandFillStyle,this.xe=this.ts.bandStrokeStyle,this.Me=this.ks.we(this.ut).Ae(this.ve)._e(this.xe).ds(this.getHighlight()),this.fs(this.Me)}setValueStart(t){return this.Se=t,this.I.emit("valueChange",this,this.Se,this.be),this.ks.vs(),this}getValueStart(){return this.Se}setValueEnd(t){return this.be=t,this.I.emit("valueChange",this,this.Se,this.be),this.ks.vs(),this}getValueEnd(){return this.be}setFillStyle(t){this.ve="function"==typeof t?t(this.ve):t;const i=this.ve;return this.Me.Ae(i),this.ks.vs(),this}getFillStyle(){return this.ve}setStrokeStyle(t){this.xe="function"==typeof t?t(this.xe):t;const i=this.xe;return this.Me._e(i),this.ks.vs(),this}getStrokeStyle(){return this.xe}onValueChange(t){return this.I.on("valueChange",t)}offValueChange(t){return this.I.off(t,"valueChange")}ke(){return this.Me.Ce(this.Cs.toVec2(this.Se,this.Cs.getHeight(this.ut).getInnerStart())).K(this.Cs.toVec2(this.be-this.Se,this.Cs.getHeight(this.ut).getInnerInterval())),this}attach(t,i){return super.attach(t,i),Si(t,this.ts,{fill:this.ve,stroke:this.xe}),this}Te(t,i){t.ds(i),this.ks.vs()}Ts(){let t,i;const s=(s,e)=>{const h=ut(this.ks.cs.Fe(e.x,e.y),this.ks.cs.ut,this.ut),r=this.Cs.getWidth(h),n=this.axis.ut.ot(this.Se),o=this.axis.ut.ot(this.be),a=(this.axis.ut.ot(r)-n)/(o-n);t=!(a<.1||a>.9),!1===t&&(i=a<.5)},e=(s,e,h,r,n)=>{const o=this.Cs.getWidth(r);t?(this.Se=this.axis.ut.ti(this.Se,o),this.be=this.axis.ut.ti(this.be,o)):i?this.Se=this.axis.ut.ti(this.Se,o):this.be=this.axis.ut.ti(this.be,o),ri(n),this.I.emit("valueChange",this,this.Se,this.be),this.ks.vs()};this.onMouseMove(((i,e)=>{s(0,n(e.clientX,e.clientY));const h=t?Ie.Point:this.Cs.getWidth({x:Ie.Horizontal,y:Ie.Vertical});this.Ie=this.Ji.engine.setMouseStyle(h,this.Ie)})),this.onMouseLeave((()=>{this.Ji.engine.restoreMouseStyle(this.Ie),this.Ie=void 0})),this.onMouseDrag(((t,i,s,h,r)=>{0===s&&e(0,0,0,r,i)}));const h=qs(new Qs(s,e));this.onTouchStart(h.onTouchStart),this.onTouchMove(h.onTouchMove),this.onTouchEnd(h.onTouchEnd)}}class We extends Zs{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.Ms="Constant Line",this.l=0,this.xe=this.ts.constantLineStrokeStyle,this.Pe=!0,this.De=this.ks.Oe(this.ut).Be(this.xe).ds(this.getHighlight()),this.fs(this.De)}setValue(t){return this.l=t,this.I.emit("valueChange",this,this.l),this.ks.vs(),this}getValue(){return this.l}setStrokeStyle(t){this.xe="function"==typeof t?t(this.xe):t;const i=this.xe;return this.De.Be(i),this.ks.vs(),this}getStrokeStyle(){return this.xe}setInteractionMoveByDragging(t){return this.Pe=t,this}getInteractionMoveByDragging(){return this.Pe}onValueChange(t){return this.I.on("valueChange",t)}offValueChange(t){return this.I.off(t,"valueChange")}ke(){return this.De.Re(this.Cs.toVec2(this.l,this.Cs.getHeight(this.ut).getInnerStart())).Le(this.Cs.toVec2(this.l,this.Cs.getHeight(this.ut).getInnerEnd())),this}attach(t,i){return super.attach(t,i),Si(t,this.ts,{stroke:this.xe}),this}Te(t,i){t.ds(i),this.ks.vs()}Ts(){const t=(t,i)=>{this.Pe&&(this.l=this.axis.ut.ti(this.l,this.Cs.getWidth(i)),this.I.emit("valueChange",this,this.l),this.ks.vs(),ri(t))};this.onMouseMove((()=>{if(this.Pe){const t=this.Cs.getWidth({x:Ie.Horizontal,y:Ie.Vertical});this.Ie=this.Ji.engine.setMouseStyle(t,this.Ie)}})),this.onMouseLeave((()=>{this.Pe&&(this.Ji.engine.restoreMouseStyle(this.Ie),this.Ie=void 0)})),this.onMouseDrag(((i,s,e,h,r)=>{this.Pe&&0===e&&t(s,r)}));const i=qs(new Qs(void 0,((i,s,e,h,r)=>t(r,h))));this.onTouchStart(i.onTouchStart),this.onTouchMove(i.onTouchMove),this.onTouchEnd(i.onTouchEnd)}}const He={fitting:{start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i>=t?e:s},expansion:{start:(t,i,s,e)=>i>=t?s<t?s:t:e>t?e:t,end:(t,i,s,e)=>i>=t?e>i?e:i:s<i?s:i},progressive:{start:(t,i,s,e)=>i>t?He.progressive.end(t,i,s,e)+(t-i):e>t?e:t,end:(t,i,s,e)=>i>t?e>i?e:i:He.progressive.start(t,i,s,e)+(i-t)},regressive:{start:(t,i,s,e)=>i>t?s<t?s:t:He.regressive.end(t,i,s,e)+(t-i),end:(t,i,s,e)=>i>t?He.regressive.start(t,i,s,e)+(i-t):s<i?s:i}},Ue={Empty:"Empty",Numeric:"Numeric",DateTime:"DateTime",Time:"Time"},$e=t=>void 0!==t.Ee,je=t=>void 0!==t.ze,Ye={Ve:Ls.Numeric},Xe=(t,i)=>[t,i],Ze=(t,i,s,e)=>{const h=[],r=Math.round(Math.abs((t-i)/s));for(let n=1;n<r;n+=1){const r=Math.round((t+s*n)*e)/e;r<i&&h.push(r)}return h},Ke=(t,i,s,e,h)=>{Ot(t,0)&&(t=0),Ot(i,0)&&(i=0);const r=[];let n=void 0!==e?((t,i,s)=>t-(t-s)%i)(t,s,e):t;if(s<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${s}`);for(;n<i&&!1===Ot(n,i);)r.push(n),n+=s,n=Math.round(n*h)/h;return r.push(n),r},qe=(t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i&&!1===Ot(r,i);)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h},Je=(t,...i)=>{const s=i.length>0?i.length:t?1:0;return(e,h,r,n,o,a)=>{if(h>=s)return;const l=i[h]||1;let u=!1,c=!1,d=1;return t&&(u="ignore"in t?"first"===t.ignore||"both"===t.ignore:u,c="ignore"in t?"last"===t.ignore||"both"===t.ignore:c,d="offset"in t&&void 0!==t.offset?t.offset:d),((t,i,s,e,h)=>(s&&(t=t.filter(((t,i)=>i>0))),e&&(t=t.filter(((i,s)=>s<t.length-1))),t.filter(((t,s)=>(s+h)%i==0))))(e,l,u,c,d)}},Qe=(...t)=>{const i=t.length>0?t.length:0;return(s,e,h,r,n,o)=>{if(e>=i)return;const a=t[e]||1;return s.filter(((t,i)=>i%a==0))}},th=(t,i)=>{if(i.has(t))return i.get(t);const s=Ji(t.Ge.Ne());return i.set(t,s),s},ih=t=>{const i=new Map;if(t!==Ye){for(const s of t.We)i.set(s,new Map);for(const s of t.He)i.set(s,new Map)}return i};class sh{constructor(t,i,e,h,r,n,o){this.I=new s,this.Ue=Ye,this.$e=Ue.Empty,this.je=new Map,this.Ye=new Map,this.Xe=He.fitting,this.Ze=!0,this.Ke=Z((()=>this.chart.cs.vs()))(300,Y.linear),this.qe=!0,this.Pi=!0,this.Je=!1,this.Qe=Ei,this.th=!1,this.ih=!1,this.sh=Ei,this.eh=Ei,this.hh=Ei,this.rh={},this.oh=(t,i,s,e,h,r)=>{const n=[],o=[];for(const a of t){if(a<s||a>e){n.push(a);continue}const t=this.je.get(i),l=(t?t.get(a):void 0)||this.ah(a,i);l.lh=!1;const u=this.uh(l,h);r.set(l,u),n.push(a),o.push(l)}return{displayedKeyValues:n,createdTicks:o}},this.dh=(t,i,s,e,h,r,n,o,a,l,u)=>{const c=[];for(let d=0;d<t.length;d+=1){const f=t[d],g=i[d];let m,y,p;if(this.fh(f,s)){const i=th(f,a);y=[t[d-1],t[d+1]],p=y.concat(l).concat(u).filter((t=>void 0!==t)).filter((i=>i.gh!==s||!!t.find((t=>t===i)))).map((t=>Gi(i,th(t,a))?t:void 0)),m=p.some((t=>void 0!==t))}else m=!1;if(m){let t=!0;const i=p.filter((t=>void 0!==t));if(t&&s.mh&&i.every((t=>$e(t.gh)))&&(t=!1),t&&s.mh&&s.mh.yh&&!1===s.mh.yh(g,e,h,r,n,o)&&(t=!1),!1===t)continue;return!0}c.push(f)}return c},this.formatValue=t=>this.Ue.Ve(t,this.ut),this.ph=([t,i])=>{this.Sh(t,i)},this.chart=t,this.bh=i,this.ts=h,this.xh=n,this.ut=e,this.Mh=o,"logarithmic"===o.type&&this.setAnimationZoom(Y.logarithmic(Is(o.base))),this._h=n.numeric,this.Ah("Numeric"),this.wh=e.getInnerStart(),this.kh=e.getInnerEnd(),r&&this.setAnimationsEnabled(!1)}getTitle(){return this.Th.Ch()}setTitle(t){return this.Th.Fh(t),this.chart.cs.vs(),this}getTitleFillStyle(){return this.Th.Ih()}setTitleFillStyle(t){return this.Th.Ae(t),this.chart.cs.vs(),this}getTitleFont(){return this.Th.Ph()}setTitleFont(t){return this.Th.Dh(t),this.chart.cs.vs(),this}setTitleRotation(t){return this.Th.Bh(t),this.chart.cs.vs(),this}getTitleRotation(){return this.Th.Oh()}setTitleEffect(t){return this.Lh.bs(t),this.chart.cs.vs(),this}getTitleEffect(){return this.Lh.xs()}Ah(t,i){if(this.je.size>0&&this.Rh(),"Empty"===t)this.Ue=Ye,this.$e=t;else if("Numeric"===t){"Numeric"!==this.$e&&(this._h=this.xh.numeric);const s=i||(t=>t);this._h=s(this._h),this.Ue=this._h.Eh(this.Mh),this.$e=t}else if("DateTime"===t){"DateTime"!==this.$e&&(this._h=this.xh.datetime);const s=i||(t=>t);this._h=s(this._h),this.Ue=this._h.Eh(this.Mh),this.$e=t}else if("Time"===t){"Time"!==this.$e&&(this._h=this.xh.time);const s=i||(t=>t);this._h=s(this._h),this.Ue=this._h.Eh(this.Mh),this.$e=t}return this.Ye.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.Ye=ih(this.Ue),this.chart.cs.vs(),this}zh(){return this.Ue}Vh(t){this.Ue=t,this.Ye.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.Ye=ih(this.Ue),this.chart.cs.vs()}setInterval(t){const{start:i,end:s,animate:e,stopAxisAfter:h}=t;return this.yt(void 0!==i?i:this.wh,void 0!==s?s:this.kh,void 0!==e&&e,void 0===h||h,"userSetInterval"),this}yt(t,i,s=!1,e=!0,h){let r={start:t,end:i};const n=Math.abs(i-t);if(Math.abs(this.kh-this.wh),void 0!==this.Ue.Nh&&this.Ue.Nh>n){const s=(i+t)/2,e=this.Ue.Nh/2*(t>i?-1:1);r={start:s-e,end:s+e}}if(void 0!==this.Ue.Gh&&this.Ue.Gh<n){const s=(i+t)/2,e=this.Ue.Gh/2*(t>i?-1:1);r={start:s-e,end:s+e}}const o=this.ut.ht(r.start,r.end,this.wh,this.kh,!0);if(!1===o)return this;let a;switch(!0===o||(r=o),h){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":a=!0;break;case"zoomBandChart":case"synchronizedAxis":a=!1;break;default:return Fi(0,""),this}if(this.Wh&&this.Wh.finishAll(!1),this.Ke&&(!0===s||s>0)){this.setStopped(!0);const t=!0===s?void 0:s,i=!this.Wh||this.Wh.isOver()?this.Ke:this.Wh.NextAnimation.bind(this);this.Wh=i([[this.wh,r.start],[this.kh,r.end]],this.ph,t),this.Wh.onAnimationEnd((()=>{this.Wh=void 0,a&&(this.hh=kt.performance.now())})),this.Wh.onAnimationEnd((()=>this.setStopped(e)))}else this.Sh(r.start,r.end),e&&this.setStopped(!0),a&&(this.hh=kt.performance.now());return this}getInterval(){return{start:this.wh,end:this.kh}}setStopped(t){return t===this.Je||(t&&(this.Wh&&this.Wh.finishAll(!1),this.Wh=void 0),this.Je=t,this.I.emit("stoppedStateChanged",this,this.Je),this.Qe=kt.performance.now(),this.chart.cs.vs()),this}getStopped(){return this.Je}onStoppedStateChanged(t){return this.I.on("stoppedStateChanged",t)}offStoppedStateChanged(t){return this.I.off(t,"stoppedStateChanged")}fit(t,i=!1){const s=this.Hh();if(s){const e=this.kh>=this.wh,h=e?s.min:s.max,r=e?s.max:s.min;this.yt(h,r,t,i,"userFit")}return this}setScrollStrategy(t){return this.Xe=t,this.chart.cs.vs(),this}getScrollStrategy(){return this.Xe}setAnimationScroll(t){return this.Ze=Boolean(t),this.chart.cs.vs(),this}setAnimationZoom(t,i=300){return this.Wh&&(this.Wh.finishAll(!1),this.Wh=void 0),this.Ke=t?Z((()=>this.chart.cs.vs()))(i,t):void 0,this}setAnimationsEnabled(t){return this.qe=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(Y.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.qe}setVisible(t){const i=this.Pi!==t;return this.Pi=t,this.Th.setVisible(t),this.Uh((i=>{i.Ge.setVisible(t)})),i&&this.I.emit("visibleStateChanged",this,this.Pi),this}getVisible(){return this.Pi}onIntervalChange(t){return this.I.on("scaleChange",t)}offIntervalChange(t){return this.I.off(t,"scaleChange")}onVisibleStateChanged(t){return this.I.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.I.off(t,"visibleStateChanged")}$h(t,i){const s=new Map;if(this.Ue===Ye||!this.Pi)return this.Rh(),s;i=i||new Map;const e=this.jh(),h=e.min,r=e.max,n=r-h,o=t.physicalAxisSize;this.rh.physicalAxisSize=o;const a=hh(this.Ue,h,r,this.wh,this.kh,o),l=[];if(this.Yh(),l.push(...this.Xh(this.Ue,h,r,a,i,t,s)),this.Zh(this.Ue,h,r,a,i,t,l,s),this.Kh(),a)for(const[t,i]of this.Ye){const s=a.get(t);if(void 0!==s)for(const[t,e]of i)s.includes(t)||(null==e||e.dispose(),i.delete(t))}return this.rh.min=h,this.rh.max=r,this.rh.scaleInterval=n,this.rh.physicalAxisSize=o,s}qh(t){const i=t.gh.Jh;t.Ge.Fh(i(t.l,this.ut)).Is()}Qh(t,i){const s=i.tr;t.Ge.Ae(s.getLabelFillStyle()).Dh(s.getLabelFont()).Bh(s.getLabelRotation())}ah(t,i){const s=this.Ye.get(i);let e=s.get(t);e?(s.delete(t),e.gh=i,e.Ss(!0)):e=this.ir(t,i);const h=this.je.get(i)||new Map;return h.set(t,e),this.je.set(i,h),this.Qh(e,i),e}uh(t,i){const s=this.sr(t,i);return this.qh(t),s}Xh(t,i,s,e,h,r,n){const o=[];for(const a of t.We){const t=e.get(a);for(const e of t){if(e<i||e>s)continue;const t=this.je.get(a),l=(t?t.get(e):void 0)||this.ah(e,a),u=this.uh(l,r),c=th(l,h);o.find((t=>Gi(c,th(t,h))))&&l.Ge.setVisible(!1),l.lh=!1,n.set(l,u),o.push(l)}}return o}Zh(t,i,s,e,h,r,n,o){let a,l=[];for(const u of t.He){const t=e.get(u);if(!t)break;let c;if(void 0===a)c=[{start:i,end:s,keyValues:t}];else{c=[];for(let i=0;i<a.length-1;i+=1){const s=a[i],e=a[i+1],h={start:s,end:e,keyValues:[]};for(const i of t)i>=s&&i<e&&h.keyValues.push(i);c.push(h)}}if(a=t,je(u))continue;let d=0,f=-1,g=[],m=[];for(let t=0;t<c.length;t+=1){const e=this.oh(c[t].keyValues,u,i,s,r,o);g=g.concat(e.displayedKeyValues),m=m.concat(e.createdTicks)}let y=m,p=!0;if(u.tr.getLabelFillStyle()!==R){let t=[];for(;++f<c.length;){const e=c[f],r=e.start,o=e.end;let a=e.keyValues;if(d>0){if(void 0===u.mh){p=!1;break}const t=u.mh.er;if(a=t(a,d-1,r,o,i,s),void 0===a)break}const y=this.dh(m.filter((t=>a.some((i=>Ot(t.l,i))))),g,u,d,r,o,i,s,h,n,l);!0!==y?t=t.concat(y):(d+=1,f=-1,t=[])}y=t,m.forEach((i=>{t.find((t=>t===i))||this.hr(i)}))}if(l=y,!p)break}}hr(t){const i=this.je.get(t.gh);null==i||i.delete(t.l);const s=this.Ye.get(t.gh);s&&s.has(t.l)?t.dispose():s&&(t.Ss(!1),s.set(t.l,t))}Uh(t){for(const i of this.je.values())for(const s of i.values())t(s)}rr(t,i){for(const s of this.je.values())for(const e of s.values())i=t(i,e);return i}Rh(){this.je.forEach(((t,i)=>{t.forEach((t=>this.hr(t)))})),this.je.clear()}Yh(){for(const t of this.je.values())for(const i of t.values())i.lh=!0}Kh(){for(const t of this.je.values())for(const[i,s]of t.entries())s.lh&&(s.dispose(),t.delete(i))}jh(){const t=this.ut.getInnerStart()<this.ut.getInnerEnd()?this.ut.getInnerStart():this.ut.getInnerEnd(),i=this.ut.getInnerEnd()>this.ut.getInnerStart()?this.ut.getInnerEnd():this.ut.getInnerStart();return c(t,i)}fh(t,i){return!(t.lh||0===t.Ge.Ch().length||$e(i)&&!0!==i.nr)}ar(t,i){return this.Ue===Ye||(this.Ue.We.forEach((s=>{i=t(i,s.tr)})),this.Ue.He.forEach((s=>{(t=>void 0!==t.Jh)(s)&&(i=t(i,s.tr))}))),i}Hh(){let t=this.bh.lr();const i=this.bh.ur();let s;if(void 0!==t&&Tt(t)&&void 0!==i&&Tt(i)&&("logarithmic"===this.Mh.type&&(0===t&&(t=Math.min(1,i)),Math.sign(t)!==Math.sign(i)&&(t=Math.min(1,i-.1))),s?(s.min=Math.min(s.min,t),s.max=Math.max(s.max,i)):s=c(t,i)),s&&Tt(s.min)&&Tt(s.max))return Ot(s.min,s.max)?{min:s.min-1,max:s.max+1}:s}cr(){let t=0;const i=this.bh.dr();return i&&(t=Math.max(t,i)),t}gr(){const t=this.th;let i=!1;if(this.Xe&&!this.Je){const t=this.Hh();if(t){const s=this.wh,e=this.kh;let h=this.Xe.start(s,e,t.min,t.max),r=this.Xe.end(s,e,t.min,t.max);const n=!1===Ot(s,h),o=!1===Ot(e,r);if(h=n?h:s,r=o?r:e,n||o){let t=!1;if(this.Ze)if(this.Ze){t=!0;const a=n?this.mr(s,h):s,l=o?this.mr(e,r):e;if(!0===this.Sh(a,l,{allowClamping:!1})&&(n&&!1===Ot(a,h)||o&&!1===Ot(l,r))){this.chart.cs.vs(!0),i=!0;let t=Math.abs(r-h)/Math.abs(a-l);t<1&&(t=1/t),this.ih=t>=1.4}}else t=!1;t||this.Sh(h,r)}}}i?(this.th!==i&&(this.th=i,this.sh=kt.performance.now()),this.yr&&(clearTimeout(this.yr),this.yr=void 0)):!0===t&&void 0===this.yr&&(this.ih=!1,this.yr=setTimeout((()=>{!1!==this.th&&(this.th=!1,this.sh=kt.performance.now()),this.yr=void 0,this.chart.cs.vs()}),200))}Sh(t,i,s){const e=!s||!("allowClamping"in s)||void 0===s.allowClamping||s.allowClamping;let h={start:t,end:i},r=!0;const n=Math.abs(i-t),o=Math.abs(this.kh-this.wh);if(void 0!==this.Ue.Nh&&this.Ue.Nh>n){const s=(i+t)/2,n=(e?this.Ue.Nh/2:o/2)*(t>i?-1:1);h={start:s-n,end:s+n},r=!1}if(void 0!==this.Ue.Gh&&this.Ue.Gh<n){const s=(i+t)/2,n=(e?this.Ue.Gh/2:o/2)*(t>i?-1:1);h={start:s-n,end:s+n},r=!1}let a=this.ut.ht(h.start,h.end,this.wh,this.kh,e);if(!1===a)return!1;!0!==a&&(h=a);const l=this.cr(),u=this.pr(Math.min(h.start,h.end),Math.max(h.start,h.end),l);return a=this.ut.ht(h.end>h.start?u.min:u.max,h.end>h.start?u.max:u.min,this.wh,this.kh,!1),!!a&&(!0===a?this.ut.X(h.end>h.start?u.min:u.max,h.end>h.start?u.max:u.min):this.ut.X(h.start,h.end),this.wh=h.start,this.kh=h.end,this.I.emit("scaleChange",this,h.start,h.end),this.eh=kt.performance.now(),this.chart.cs.vs(),r)}Sr(){return this.th}br(){return void 0!==this.Wh}}class eh{constructor(t,i,s,e,h=s.vr(e).setMouseInteractions(!1)){this.lh=!1,this.Ii=!1,this.ss=[],this.gh=t,this.l=i,this.Mr=s,this._r=e,this.Ge=h,this.ss.push(h)}Ss(t){this.ss.forEach((i=>i.setVisible(t)))}dispose(){return this.Ii||(this.Ii=!0,this.ss.forEach((t=>t.dispose()))),this}}const hh=(t,i,s,e,h,r)=>{const n=new Map;for(const r of t.We){let t=r.Ar(i,s,e,h);t=rh(t),n.set(r,t)}let o;for(const e of t.He){let t;if(void 0===o)t=e.Ar(i,s,i,s);else{let h=[];const n=o.filter((t=>i<=t&&t<=s)).length;if(n>0){const t=r/(n-1);if(void 0!==e.wr&&e.wr>t)break}for(let t=0;t<o.length-1;t+=1){const r=e.Ar(o[t],o[t+1],i,s);h=h.concat(r)}t=h}t=rh(t),n.set(e,t),o=t}return n},rh=t=>(t=(t=>{const i={},s=[],e=t.length;let h=0;for(let r=0;r<e;r+=1){const e=t[r];1!==i[e]&&(i[e]=1,s[h]=e,h+=1)}return s})(t)).sort(((t,i)=>t-i)),nh=i({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class oh extends nh{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const ah=t=>!(!t||"object"!=typeof t||!("type"in t)||"font"!==t.type),lh=new oh,uh=new class{},ch=i({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new N,wireframeStyle:rt});class dh extends ch{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return"function"==typeof t?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const fh=t=>!(!t||"object"!=typeof t||!("type"in t)||"triangulated-points-3d"!==t.type),gh=i({type:"pixelated-points-3d",size:5,fillStyle:new N});class mh extends gh{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const yh=t=>!(!t||"object"!=typeof t||!("type"in t)||"pixelated-points-3d"!==t.type),ph={Triangulated:dh,Pixelated:mh};class Sh{constructor(t){this.kr=new Map,this.cs=t}ls(t,i,s){const e=s.animationEnabled;this.kr.set(t,{applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:e,curAnimatedHighlightValue:0});const h=t.onDispose((()=>{this.kr.delete(t),t.offDispose(h)}))}Cr(t,i){const s=i.animationEnabled,e=[],h=t.onDispose((()=>{e.forEach((t=>{this.kr.delete(t)})),t.offDispose(h)}));return{Tr:(t,i)=>{const h={applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0};e.push(t),this.kr.set(t,h)}}}_s(t,i){const s=this.kr.get(t);s&&(s.curUnanimatedHighlightValue=Ti(i),this.cs.vs())}ys(t,i=!1){const s=this.kr.get(t);return s?i?s.curAnimatedHighlightValue:s.curUnanimatedHighlightValue:0}As(t,i){const s=this.kr.get(t);s&&(s.animationEnabled=i)}ws(t){const i=this.kr.get(t);return!!i&&i.animationEnabled}Is(t){let i=!1;this.kr.forEach(((s,e)=>{let h;if(s.animationEnabled){const e=1e3;if(s.curUnanimatedHighlightValue>0){const r=s.curAnimationPositionMillis/e;h=s.curUnanimatedHighlightValue*Math.abs(Math.sin(r*Math.PI/2+.5));const n=0===s.curAnimatedHighlightValue?1:t;s.curAnimationPositionMillis+=n,i=!0}else s.curAnimatedHighlightValue>0&&0===s.curUnanimatedHighlightValue?(h=Math.max(s.curAnimatedHighlightValue-t/e,0),i=i||h>0):h=0,s.curAnimationPositionMillis=0}else h=s.curUnanimatedHighlightValue;h!==s.curAnimatedHighlightValue&&(s.applyHighlight(h),s.curAnimatedHighlightValue=h)})),i&&this.cs.vs(!0)}}const bh=new Map,vh=t=>{const i=t.getSize(),s=t.getFamily(),e=t.getWeight(),h=t.getStyle(),r=t.getVariant(),n=`${h} ${r?"small-caps":"normal"} ${e} ${i}px ${s}`;let o=bh.get(n);return o||(o=((t,i)=>({font:t,properties:i}))(n,{type:"font",size:i,family:s,style:h,variant:r,weight:e}),bh.set(n,o)),o};var xh,Mh;!function(t){t[t.click=0]="click",t[t.dbclick=1]="dbclick",t[t.mouseDown=2]="mouseDown",t[t.mouseUp=3]="mouseUp",t[t.contextmenu=4]="contextmenu",t[t.wheel=5]="wheel"}(xh||(xh={})),function(t){t[t.touchStart=0]="touchStart",t[t.touchMove=1]="touchMove",t[t.touchEnd=2]="touchEnd"}(Mh||(Mh={}));const _h=t=>({container:t.Fr,scale:t.ut,setMouseStyle:(i,s)=>t.Ir(i,s),restoreMouseStyle:i=>t.Pr(i),clientLocation2Engine:(i,s)=>t.Fe(i,s),engineLocation2Client:(i,s)=>t.Dr(i,s),captureFrame:(i,s)=>t.Br(i,s),renderFrame:(i,s,e=!1)=>t.Or(i,s,e),layout:()=>{t.Lr(),t.Rr()},setBackgroundFillStyle(i){return t.setBackgroundFillStyle(i),this},setBackgroundStrokeStyle(i){return t.setBackgroundStrokeStyle(i),this},getBackgroundFillStyle:()=>t.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>t.getBackgroundStrokeStyle(),addCustomIcon:(i,s)=>t.Er(i,s)}),Ah=[];let wh;const kh=()=>{if(void 0!==wh){const t=kt.getComputedStyle(kt.document.body),i=Number(t.getPropertyValue("margin-top").replace("px",""))+Number(t.getPropertyValue("margin-bottom").replace("px",""));wh.style.height=kt.innerHeight-i+"px",(()=>{for(let t=0;t<Ah.length;t+=1)Ah[t]()})()}},Ch=new N({color:v(255,255,255)}),Th={font:vh(lh),fillStyle:Ch,lineStyle:new se({fillStyle:Ch,thickness:1}),pointStyle3D:new ph.Triangulated};class Fh{constructor(t,i){this.I=new s,this.ut=at.d2({scaleXYConstructor:Ns}),this.zr=new Map,this.Vr=Z((()=>this.vs()),60),this.Nr=n(0,0),this.Gr=void 0,this.Wr=Bt,this.Hr=()=>{},this.Ur=[],this.$r=-1,this.jr=[],this.Yr=!0,this.Ii=!1,this.Rr=()=>{const{bottom:t,left:i}=this.Xr().getBoundingClientRect();return this.Nr=n(Math.floor(i),Math.floor(t)),this},this.Lr=()=>{this.Zr&&this.Zr()},this.Ir=(t,i)=>{if(!i){this.Fr.style.cursor=t;const i=this.$r;return this.$r+=1,this.jr.push([i,t]),i}return this.Pr(i),this.Ir(t)},this.Pr=t=>{const i=t?this.jr.findIndex((i=>i[0]===t)):-1;i>=0?(this.jr.splice(i,1),this.jr.length>0?this.Fr.style.cursor=this.jr[this.jr.length-1][1]:this.Fr.style.cursor="default"):(this.jr.push([0,"default"]),this.Fr.style.cursor="default")},this.Kr=t=>(this.qr.u(t),this),this.Jr=()=>this.qr.S(),this.Qr=()=>{this.Wr&&this.Wr(1e3/60),this.tn(),this.sn(),this.Hr&&this.Hr()},this.en=t=>(this.zr.set(t.hn(),t),this.zr=new Map([...this.zr.entries()].sort(((t,i)=>t[0]-i[0]))),t),this.rn=t=>(this.zr.delete(t),this),this.j=()=>(this.qr.i=!1,this),this.Y=()=>(this.qr.i=!0,this),this.nn=t=>{if(!this.Yr)return;const i=this.an,s=i&&i.clientX===t.clientX&&i.clientY===t.clientY,e=this.Fe(t.clientX,t.clientY),h=this.ln(t,{x:t.clientX,y:t.clientY});if(this.un&&((null==h?void 0:h.entity)!==this.un.entity||h.collectionMember!==this.un.collectionMember)&&!this.cn){this.un.entity.Di=!1;const i=this.un.entity.dn;i&&i(this.un.entity,t,this.un.collectionMember)}if(h&&h.entity.getMouseInteractions()&&!this.cn)if(h.entity.Di){if(!s){const i=h.entity.fn;i&&i(h.entity,t,h.collectionMember)}}else{h.entity.Di=!0;const i=h.entity.gn;i&&i(h.entity,t,h.collectionMember)}if(this.cn){const s=this.cn.entity.mn,e=i?n(t.clientX-i.clientX,i.clientY-t.clientY):{x:0,y:0};!s||0===e.x&&0===e.y||s(this.cn.entity,t,this.cn.button,this.cn.startLocation,e,this.cn.collectionMember)}this.yn=t,this.an=t,this.pn=e,this.un=h},this.Sn=t=>{if(this.Yr=!1,this.pn=void 0,this.yn=t,this.an=void 0,this.cn){const i=this.cn.entity.bn;i&&i(this.cn.entity,t,this.cn.button,this.cn.startLocation,this.cn.collectionMember),this.cn.entity.Di=!1;const s=this.cn.entity.dn;s&&s(this.cn.entity,t,this.cn.collectionMember),this.cn=void 0}if(this.vn){const i=this.vn.entity.xn;i&&i(this.vn.entity,t,this.vn.collectionMember),this.vn=void 0}if(this.un){this.un.entity.Di=!1;const i=this.un.entity.dn;i&&i(this.un.entity,t,this.un.collectionMember),this.un=void 0}},this.Mn=t=>{this.Yr=!0,this.yn=t},this._n=()=>this.pn,this.ts=t.theme,this.An=i.An,this.wn={kn:i.kn,Cn:i.Cn,Tn:i.Tn,Fn:i.Fn,In:i.In,Pn:i.Pn,Dn:t&&t.overrideInteractionMouseButtons?t.overrideInteractionMouseButtons:void 0,$s:t&&void 0!==t.resourcesBaseUrl&&null!==t.resourcesBaseUrl?t.resourcesBaseUrl:`${kt.location.origin}/resources`,Bn:!t||!("warnings"in t)||"boolean"!=typeof t.warnings||t.warnings,On:(()=>{const i=null==t?void 0:t.pickingPrecision;if("string"==typeof i){const t=i.toLowerCase();if("best"===t)return 1;if("high"===t)return.5;if("low"===t)return 1/8}return 1/4})(),Ln:void 0===(null==t?void 0:t.interactable)||t.interactable,Rn:void 0===t.textPixelSnappingEnabled||t.textPixelSnappingEnabled};const e=t?t.container:void 0;if(e){if("string"==typeof e){const t=kt.document.getElementById(e);if(!t)throw new Error(`Container "${e}" doesn't exist.`);this.Fr=t}else this.Fr=e;kt.addEventListener("resize",this.Lr),this.Ur.push((()=>{kt.removeEventListener("resize",this.Lr)}))}else{if(void 0===wh){const t=kt.document.createElement("div");t.id="lcjs-auto-flexbox",t.style.position="relative",t.style.width="100%",t.style.display="flex",t.style.flexDirection="column",kt.document.body.appendChild(t),wh=t,kt.addEventListener("resize",kh)}let t=1;for(;null!==kt.document.getElementById(`chart-${t}`);)t+=1;this.Fr=kt.document.createElement("div"),this.Fr.id=`chart-${t}`,this.Fr.style.flex="1",wh.appendChild(this.Fr),kh(),Ah.push(this.Lr),this.Ur.push((()=>{wh&&wh.removeChild(this.Fr),Ah.includes(this.Lr)&&Ah.splice(Ah.indexOf(this.Lr),1),0===Ah.length&&wh&&(kt.document.body.removeChild(wh),wh=void 0,kt.removeEventListener("resize",kh))}))}if(kt.ResizeObserver){const t=t=>{for(const i of t)i.target===this.Fr&&this.Lr()};this.En=new kt.ResizeObserver(t.bind(this)),this.En.observe(this.Fr)}""===this.Fr.style.position&&(this.Fr.style.position="relative"),this.Fr.style.boxSizing="content-box",this.Fr.addEventListener("fullscreenchange",this.Lr),this.Fr.addEventListener("webkitfullscreenchange",this.Lr);const h=t?t.maxFps:void 0;this.zn=h?-1===h?-1:0!==h?1e3/h:0:0;const r=new Map;let o=!1;const a=(t,i)=>s=>{const e=function(t){return{x:t.clientX,y:t.clientY}}(s);switch(s.type){case"pointerover":case"pointerenter":case"pointermove":case"pointerdown":r.set(s.pointerId,e);break;default:r.delete(s.pointerId),o=!1}switch(s.interactions=Array.from(r.values()),s.pointerType){case"pen":case"mouse":default:t&&t(s);break;case"touch":i&&i(s)}s.defaultPrevented&&(o=!0)};if(this.Fr.onwheel=this.Vn(xh.wheel),this.Fr.oncontextmenu=this.Vn(xh.contextmenu),this.Fr.onclick=this.Vn(xh.click),this.Fr.ondblclick=this.Vn(xh.dbclick),this.Fr.onlostpointercapture=()=>{o=!1},this.Fr.ontouchmove=t=>{o&&t.preventDefault()},this.Fr.onpointerover=a(),this.Fr.onpointerenter=a(this.Mn),this.Fr.onpointerdown=a(this.Vn(xh.mouseDown),this.Nn(Mh.touchStart)),this.Fr.onpointermove=a(this.nn,this.Nn(Mh.touchMove)),this.Fr.onpointerup=a(this.Vn(xh.mouseUp),this.Nn(Mh.touchEnd)),this.Fr.onpointercancel=a(),this.Fr.onpointerout=a(),this.Fr.onpointerleave=a(this.Sn,this.Nn(Mh.touchEnd)),!kt.requestAnimationFrame||!kt.cancelAnimationFrame)throw new Error("LightningChart JS depends on requestAnimationFrame. Make sure to load a polyfill in older browsers.");kt.addEventListener("scroll",this.Rr),this.qr=f(new S({r:0,g:0,b:0,a:0})),this.us=new Sh(this)}Gn(){return this.Wn}Hn(){return this.Un}setBackgroundFillStyle(t){return this.$n.Ae(t),this}getBackgroundFillStyle(){return this.$n.Ih()}setBackgroundStrokeStyle(t){return this.$n._e(t),this}getBackgroundStrokeStyle(){return this.$n.jn()}Yn(t){return this.Hr=t,this}Xn(t){return this.Wr=t,this}Zn(t){return this.zr.get(t)}Kn(){return Array.from(this.zr.keys()).reverse().reduce(((t,i)=>i!==Number.MAX_SAFE_INTEGER&&i>t?i:t),0)+1}Vn(t){return i=>this.qn(t,i)}qn(t,i){if(!this.Yr)return;t===xh.contextmenu&&ri(i);const s=this.Fe(i.clientX,i.clientY),e=this.ln(i,{x:i.clientX,y:i.clientY});if(t===xh.mouseUp){if(this.cn){const t=this.cn.entity.bn;if(t&&t(this.cn.entity,i,this.cn.button,this.cn.startLocation,this.cn.collectionMember),(null==e?void 0:e.entity)!==this.cn.entity||e.collectionMember!==this.cn.collectionMember){this.cn.entity.Di=!1;const t=this.cn.entity.dn;t&&t(this.cn.entity,i,this.cn.collectionMember)}this.cn=void 0}if(this.vn){const t=this.vn.entity.getMouseInteractions()&&this.vn.entity.xn;t&&t(this.vn.entity,i,this.vn.collectionMember),this.vn=void 0}}else if(e&&e.entity.getMouseInteractions()){const s=t===xh.click?e.entity.Jn:t===xh.dbclick?e.entity.Qn:t===xh.mouseDown?e.entity.io:t===xh.wheel?e.entity.so:t===xh.contextmenu?e.entity.eo:void 0;if(s&&s(e.entity,i,e.collectionMember),t===xh.mouseDown){this.vn={entity:e.entity,collectionMember:e.collectionMember,event:i};const t=this.vn.event.button,s=e.entity.ho;s&&s(e.entity,i,t,e.collectionMember),this.cn={entity:e.entity,collectionMember:e.collectionMember,button:t,startLocation:n(i.clientX,i.clientY)}}}this.yn=i,this.pn=s,this.un=e}Nn(t){return i=>this.ro(t,i)}ro(t,i){const s=i.interactions.length;if(this.no=i,this.oo){const e=t===Mh.touchMove?this.oo.entity.ao:t===Mh.touchEnd?this.oo.entity.lo:t===Mh.touchStart?this.oo.entity.uo:void 0;e&&e(this.oo.entity,i,this.oo.collectionMember),t===Mh.touchEnd&&0===s&&(this.oo.entity.Di=!1,this.oo=void 0)}else if(t===Mh.touchStart){for(let t=0;t<s&&(this.oo=this.ln(i,{x:i.interactions[t].x,y:i.interactions[t].y}),!this.oo);t+=1);if(this.oo){this.oo.entity.Di=!0;const t=this.oo.entity.uo;t&&t(this.oo.entity,i,this.oo.collectionMember)}}t===Mh.touchEnd?this.pn=void 0:this.pn=this.Fe(i.clientX,i.clientY)}co(t){return this.I.on("resize",t)}do(t){return this.I.off(t,"resize")}fo(){return this.I.topicOff("resize"),this}N(){if(this.Ii=!0,this.zr)for(const t of this.zr.values())t.N();this.Wr=void 0,this.Hr=void 0,kt.removeEventListener("scroll",this.Rr),this.Fr.removeEventListener("fullscreenchange",this.Lr),this.Fr.removeEventListener("webkitfullscreenchange",this.Lr),this.En&&(this.En.disconnect(),this.En=void 0),this.Ur.forEach((t=>{t()})),this.Ur.length=0,this.Gr&&kt.cancelAnimationFrame(this.Gr)}Fe(t,i){return n(t-this.Nr.x,this.Nr.y-i)}Dr(t,i){return n(t+this.Nr.x,this.Nr.y-i)}mo(t){const i=this.Fe(t.clientX,t.clientY);return{engineX:i.x,engineY:i.y}}yo(t){const i=this.Dr(t.engineX,t.engineY);return{clientX:i.x,clientY:i.y}}}const Ih=(t=1)=>({type:"horizontalProgressive",packager:(i,s,e)=>{if(i.length>1){const h=us(s,e*t),r=Math.abs(h.x),o=i.length,a=[];let l=0,u=0,c=i[0].x+r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.x<c&&u<o){const s=u;let e=t.y,h=t.y;for(;u<o&&i[u].x<=c;)i[u].y>e&&(e=i[u].y),i[u].y<h&&(h=i[u].y),u+=1;if(s!==u){const t=(a[l-1].x+i[u-1].x)/2;a[l+0]=n(t,h),a[l+1]=n(t,e),a[l+2]=i[u-1],l+=3}}c+=r}return a}return i.slice()}}),Ph=(t=1)=>({type:"horizontalRegressive",packager:(i,s,e)=>{if(i.length>1){const h=us(s,e*t),r=Math.abs(h.x),o=i.length,a=[];let l=0,u=0,c=i[0].x-r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.x>c&&u<o){const s=u;let e=t.y,h=t.y;for(;u<o&&i[u].x>=c;)i[u].y>e&&(e=i[u].y),i[u].y<h&&(h=i[u].y),u+=1;if(s!==u){const t=(a[l-1].x+i[u-1].x)/2;a[l+0]=n(t,h),a[l+1]=n(t,e),a[l+2]=i[u-1],l+=3}}c-=r}return a}return i.slice()}}),Dh=(t=1)=>({type:"verticalProgressive",packager:(i,s,e)=>{if(i.length>1){const h=us(s,e*t),r=Math.abs(h.y),o=i.length,a=[];let l=0,u=0,c=i[0].y+r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.y<c&&u<o){const s=u;let e=t.x,h=t.x;for(;u<o&&i[u].y<=c;)i[u].x>e&&(e=i[u].x),i[u].x<h&&(h=i[u].x),u+=1;if(s!==u){const t=(a[l-1].y+i[u-1].y)/2;a[l+0]=n(h,t),a[l+1]=n(e,t),a[l+2]=i[u-1],l+=3}}c+=r}return a}return i.slice()}}),Bh=(t=1)=>({type:"verticalRegressive",packager:(i,s,e)=>{if(i.length>1){const h=us(s,e*t),r=Math.abs(h.y),o=i.length,a=[];let l=0,u=0,c=i[0].y-r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.y>c&&u<o){const s=u;let e=t.x,h=t.x;for(;u<o&&i[u].y>=c;)i[u].x>e&&(e=i[u].x),i[u].x<h&&(h=i[u].x),u+=1;if(s!==u){const t=(a[l-1].y+i[u-1].y)/2;a[l+0]=n(h,t),a[l+1]=n(e,t),a[l+2]=i[u-1],l+=3}}c-=r}return a}return i.slice()}});var Oh,Lh;!function(t){t[t.Square=0]="Square",t[t.Circle=1]="Circle",t[t.Triangle=2]="Triangle"}(Oh||(Oh={})),function(t){t[t.Nearest=0]="Nearest",t[t.NearestX=1]="NearestX",t[t.NearestY=2]="NearestY"}(Lh||(Lh={}));const Rh=t=>{const i="nearest"===t?Lh.Nearest:"nearest-x"===t?Lh.NearestX:"nearest-y"===t?Lh.NearestY:void 0;return void 0!==i?i:Lh.NearestX},Eh=(t,i,s,e,h,r,n,o,a,l)=>{const u=t.length;if(0===u)return;const c=e?1:0,d=u-(h?2:1);if(s===Lh.Nearest)return zh(t,i,r,n,c,d);if(s===Lh.NearestX||s===Lh.NearestY){if("boolean"==typeof l&&("x"===a&&s===Lh.NearestX||"y"===a&&s===Lh.NearestY))return Gh(t,ut(i,n,r),a,l,c,d);if(s===Lh.NearestX)return Vh(t,ut(i,n,r),o,c,d);if(s===Lh.NearestY)return Nh(t,ut(i,n,r),o,c,d)}},zh=(t,i,s,e,h,r)=>{let n,o=Number.MAX_VALUE;for(let a=h;a<=r;a+=1){const h=t[a];if(!Number.isNaN(h.x)&&!Number.isNaN(h.y)){const t=ut(h,s,e),r=(t.x-i.x)**2+(t.y-i.y)**2;r<o&&(o=r,n=a)}}return n},Vh=(t,i,s,e,h)=>{if(i.x<s.min.x||i.x>s.max.x)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.x>i.x?e.x-i.x:i.x-e.x;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},Nh=(t,i,s,e,h)=>{if(i.y<s.min.y||i.y>s.max.y)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.y>i.y?e.y-i.y:i.y-e.y;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},Gh=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let g=h,m=Math.floor((h+r)/2),y=r,p=-1;for(;;){const i=o-(n?t[m].x:t[m].y);if(i*(e?-1:1)>0)g=Math.min(m+1,y),p=Math.floor((g+y)/2);else{if(0===Math.abs(i))return m;y=Math.max(m-1,g),p=Math.floor((g+y)/2)}if(p===m){const s=m>h?Math.abs(o-(n?t[m-1].x:t[m-1].y)):Ri,e=m<r?Math.abs(o-(n?t[m+1].x:t[m+1].y)):Ri,a=Math.abs(i);switch(Math.min(a,s,e)){case s:return m-1;case e:return m+1;default:return m}}else m=p}},Wh=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let g=h,m=Math.floor((h+r)/2),y=r,p=-1;for(;;){const s=o-(n?t[m].x:t[m].y);if(s*(e?-1:1)>0)g=Math.min(m+1,y),p=Math.floor((g+y)/2);else{if(0===Math.abs(s))return{a:m,b:m,lerpAmount:0};y=Math.max(m-1,g),p=Math.floor((g+y)/2)}if(p===m){if(s*(e?-1:1)<0&&m>h){const s=t[m-1],e=t[m];return{a:m-1,b:m,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}if(m<r){const s=t[m],e=t[m+1];return{a:m,b:m+1,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}return{a:m,b:m,lerpAmount:0}}m=p}};let Hh=0;class Uh{constructor(t,i,e){this.po=f(!0),this.So=!1,this.Di=!1,this.bo=!1,this.Ii=!1,this.Pi=!0,this.vo=void 0,this.xo=0,this.I=new s,this.fn=void 0,this.gn=void 0,this.dn=void 0,this.Jn=void 0,this.so=void 0,this.eo=void 0,this.Qn=void 0,this.io=void 0,this.xn=void 0,this.ho=void 0,this.mn=void 0,this.bn=void 0,this.uo=void 0,this.ao=void 0,this.lo=void 0,this.onDispose=t=>this.I.on("dispose",t),this.offDispose=t=>this.I.off(t,"dispose"),this.cs=t,this.Mo=i,this._o=e,this.Ao=Hh,Hh+=1,this.wo=t.ts.highlightColorOffset}ko(t){return void 0!==this._o.find((i=>i.type===t))}Co(t,i){var s;return!!this.ko(t)&&!0===i(null===(s=this._o.find((i=>i.type===t)))||void 0===s?void 0:s.args)}dispose(){return this.Ii||(this.Di&&this.dn&&this.dn(this,void 0,void 0),this.Ii=!0,this.Mo(this),this.I.emit("dispose",this)),this}setVisible(t){const i=this.Pi;return this.Pi=t,!t&&i&&(this.Di&&this.dn&&this.dn(this,void 0,void 0),this.Di=!1),this}getVisible(){return this.Pi}setMouseInteractions(t){const i=this.po.S();return this.po.u(t),t||(i&&this.Di&&this.dn&&this.dn(this,void 0,void 0),this.Di=!1),this}getMouseInteractions(){return this.po.S()}getIsUnderMouse(){return this.Di}getIsGrabbed(){return this.bo}setMouseMoveEventHandler(t){return this.fn=t,this}setMouseEnterEventHandler(t){return this.gn=t,this}setMouseLeaveEventHandler(t){return this.dn=t,this}setMouseClickEventHandler(t){return this.Jn=t,this}setMouseDoubleClickEventHandler(t){return this.Qn=t,this}setMouseDownEventHandler(t){return this.io=t,this}setMouseUpEventHandler(t){return this.xn=t,this}setMouseWheelEventHandler(t){return this.so=t,this}setMouseContextMenuEventHandler(t){return this.eo=t,this}setMouseDragEventHandler(t){return this.mn=t,this}setMouseDragStartEventHandler(t){return this.ho=t,this}setMouseDragStopEventHandler(t){return this.bn=t,this}setTouchStartEventHandler(t){return this.uo=t,this}setTouchMoveEventHandler(t){return this.ao=t,this}setTouchEndEventHandler(t){return this.lo=t,this}To(t){return this.vo=t,this}Fo(){return this.vo?this.vo:$h}ds(t){return this.xo=t,this}Io(){return this.xo}Po(t){return this.wo=t,this}Do(){return this.wo}}const $h=c(n(0,0),n(0,0));class jh extends Uh{constructor(t,i,s,e){super(t,s,e),this.Bo=0,this.ks=i,this.ks.Oo=!0}Lo(t){return this.Bo===t||(this.Bo=t,this.ks.Oo=!0),this}Ro(){return this.Bo}}class Yh extends jh{constructor(t,i,s,e,h){super(t,i,e,h),this.Eo=!0,this.ut=s}}const Xh=(t,i,s)=>{if(s instanceof Ns){const e=s.ki(),h=fs(i,{x:Math.abs(e.x),y:Math.abs(e.y)});return c(n(t.min.x-h.x,t.min.y-h.y),n(t.max.x+h.x,t.max.y+h.y))}return c(s.ti(n(t.min.x,t.min.y),us(i,-1)),s.ti(n(t.max.x,t.max.y),i))},Zh=(t,i)=>"function"==typeof i?i(t):i,Kh=(t,i)=>!t||t!==i,qh=(t,i)=>t===R&&i!==R,Jh=t=>t!==R;class Qh extends Yh{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ve=Th.fillStyle,this.cs=t}Ae(t){return this.ve=Zh(this.ve,t),this}Ih(){return this.ve}zo(){return Kh(this.Vo,this.ve)}No(){return qh(this.Vo,this.ve)}Go(){return Jh(this.ve)}Wo(t){this.Vo=t}}class tr extends Qh{constructor(t,i,s,e,h){super(t,i,s,e,h),this.xe=Th.lineStyle,this.cs=t}_e(t){return this.xe="function"==typeof t?t(this.xe):t,this}jn(){return this.xe}Ho(){return!this.Uo||this.Uo!==this.xe}$o(t){return!this.Uo||this.Uo.getThickness()!==t}Go(){return this.xe!==rt||super.Go()}No(){return(this.xe!==rt||this.ve!==R)&&this.Uo===rt&&this.Vo===R}jo(t){this.Uo=t}}class ir extends Qh{constructor(t,i,s,e,h,r=f(5)){super(t,i,s,e,h),this.size=f(5),this.size=r}K(t){return this.size.u(t),this}}class sr extends Qh{constructor(t,i,s,e,h,r=f(Th.font)){super(t,i,s,e,h),this.Yo=f(""),this.Xo=f(n(0,0)),this.Zo=f(0),this.Ko=f(0),this.qo=f(n(0,0)),this.Jo=f(0),this.Qo=f(lh),this.ta=n(0,0),this.Pt=f(g(1,1,1,1)),this.ia=f(m(4,4,4,4)),this.font=f(Th.font),this.sa=!1,this.font=r}Go(){return Jh(this.ve)&&this.Yo.S().length>0}No(){return!1===this.sa&&this.Go()}Fh(t){return this.Yo.u(t),this}Ch(){return this.Yo.S()}Dh(t){return ah(t)?this.Qo.u(t):this.Qo.u(t(this.Qo.S())),this}Ph(){return this.Qo.S()}ea(t){return this.Qo.u(this.Qo.S().setFamily(t)),this}ha(){return this.Qo.S().getFamily()}ra(t){return this.Qo.u(this.Qo.S().setSize(t)),this}na(){return this.Qo.S().getSize()}oa(t){return this.Qo.u(this.Qo.S().setWeight(t)),this}aa(){return this.Qo.S().getWeight()}la(t){return this.Qo.u(this.Qo.S().setStyle(t)),this}ua(){return this.Qo.S().getStyle()}ca(t){return this.Qo.u(this.Qo.S().setVariant(t)),this}da(){return this.Qo.S().getVariant()}Ce(t){return this.Xo.u(t),this}fa(){return this.Xo.S()}Bh(t){return this.Jo.u(t),this}Oh(){return this.Jo.S()}ga(t,i){return this.qo.u(n(t,i)),this}ma(){return this.qo.S()}ya(t){return this.Ko.u(t),this}pa(){return this.Ko.S()}Sa(t){return this.Zo.u(t),this}ba(){return this.Zo.S()}va(t){return this.Ko.u(t.x),this.Zo.u(t.y),this}xa(t){return this.Pt.u(t),this}Ma(){return this.Pt.S()}_a(t){return this.ia.u(t),this}Aa(){return this.ia.S()}}class er extends ir{constructor(t,i,s,e,h,r=5){super(t,i,s,e,h,f(r)),this.wa=[],this.ka=f(Oh.Square),this.Jo=f(0),this.Ca=f(!1),this.Ta=f(!1),this.Fa=f(!1),this.Ia=zi,this.Pa=0,this.Da=[],this.Ba=0,this.Oa=zi,this.La=Lh.Nearest,this.Ra=!1}Ea(t){return this.La=t,this}za(){return this.Da}Va(){return this.wa}Na(t){return this.ka.u(t),this}Bh(t){return this.Jo.u(t),this}Ga(t){return this.Ca.u(t),this}Wa(t){return this.Ta.u(t),this}Ha(t){return this.Fa.u(t),this}Ua(t,i){return Array.isArray(t)||(t=[t]),this.Ba+=t.length,this.Da=gi(this.Da,t,{canReturnB:!0}),this.Oa&&(this.Oa=i?ts(this.Oa,i):void 0),this}$a(){return this.Ra=!0,this.wa.length=0,this.Pa=0,this.Ia=zi,this.Da=[],this.Ba=0,this}ja(){return this.Pa}Ya(){return this.Ba}}class hr extends tr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Xo=f(n(0,0)),this.$=f(n(100,100)),this.Jo=f(0),this.ta=f(n(0,0)),this.Xa=!1}Is(){return this.Za(),this}Ce(t){const i=this.Xo.S();return t.x===i.x&&t.y===i.y||(this.Xo.u(t),this.Za()),this}fa(){return this.Xo.S()}Ka(t){const i=this.Xo.S();return t!==i.x&&(this.Xo.u(n(t,i.y)),this.Za()),this}qa(t){const i=this.Xo.S();return t!==i.y&&(this.Xo.u(n(i.x,t)),this.Za()),this}K(t){const i=this.$.S();return t.x===i.x&&t.y===i.y||(this.$.u(n(t.x,t.y)),this.Za()),this}$t(){return this.$.S()}Ja(t){const i=this.$.S();return t!==i.x&&(this.$.u(n(t,i.y)),this.Za()),this}Qa(t){const i=this.$.S();return t!==i.x&&(this.$.u(n(i.x,t)),this.Za()),this}Bh(t){return this.Jo.u(t),this}Oh(){return this.Jo.S()}tl(t){const i=this.ta.S();return t===i&&i.x===t.x&&i.y===t.y||(void 0===t?(this.Xa=!1,this.Za()):(this.Xa=!0,this.ta.u(t))),this}Za(){if(!this.Xa){const t=this.Xo.S(),i=this.$.S(),s=n(t.x+i.x/2,t.y+i.y/2),e=this.ta.S();s.x===e.x&&s.y===e.y||this.ta.u(s)}}}class rr extends tr{constructor(){super(...arguments),this.wa=[],this.Xo=f(n(0,0)),this.Ia=zi,this.il=!1}sl(t){return t=li(t),this.wa=t,this.il=!0,this}el(){return this.wa}wt(){return this.Ia.max.x}At(){return this.Ia.min.x}Ct(){return this.Ia.max.y}kt(){return this.Ia.min.y}hl(){return 0}rl(){return 0}}class nr extends rr{}class or extends Qh{constructor(t,i,s,e,h){super(t,i,s,e,h),this.nl=new Array,this.ol=new Array,this.al=f({type:"disabled",packager:(t,i,s)=>t.slice()}),this.Ia=zi,this.ll=0,this.ul=!1,this.Da=[Array(),Array()],this.cl=!1,this.dl=(new N).setColor(v(42,171,240)),this.Ra=!1,this.fl=!1,this.ml=!1}Ua(t,i){const s=this.ll-1,e=s>0&&!this.cl;let[h,r]=e?[[this.nl[s]],[this.ol[s]]]:[[],[]];if(t instanceof Array){const[i,s]=u(t);h=gi(h,i,{canReturnB:!0}),r=gi(r,s,{canReturnB:!0})}else{const i=t.position;h.push(n(i,t.high)),r.push(n(i,t.low))}return this.cl?(this.Da[0]=gi(this.Da[0],h,{canReturnB:!0}),this.Da[1]=gi(this.Da[1],r,{canReturnB:!0})):(this.Da=[h,r],this.cl=!0),this.Ia=ts(this.Ia,i||ts(Ji(h),Ji(r))),this}$a(){return this.Ra=!0,this.nl.length=0,this.ol.length=0,this.ll=0,this.Ia=zi,this}Va(){return[this.nl,this.ol]}za(){return[this.Da[0],this.Da[1]]}yl(t){return this.al.u(t),this}pl(){return this.al.S()}Sl(t){return this.dl="function"==typeof t?t(this.dl):t,this}bl(){return this.dl}ja(){return this.ll-(Number(this.fl)+Number(this.ml))}Ya(){return this.Da.length}vl(t){return this.fl=t,this}xl(){return this.fl}Ml(t){return this.ml=t,this}_l(){return this.ml}No(){return this.Vo===R&&this.Al===R&&(this.ve!==R||this.dl!==R)}wl(t){this.Al=t}Go(){return this.dl!==R||super.Go()}zo(){return super.zo()||!this.Al||this.Al!==this.dl}}class ar extends tr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Xo=f(n(0,0)),this.kl=f(0),this.fi=f(360),this.Cl=f(100),this.Tl=f(100),this.Fl=f(0),this.Il=f(void 0),this.Pl=n(0,0),this.Dl=n(0,0),this.Bl=n(0,0)}Ol(){return this.Cl.S()}Ll(){return this.Tl.S()}fa(){return this.Xo.S()}Rl(){return this.kl.S()}di(){return this.fi.S()}El(){return this.Fl.S()}zl(){return this.Il.S()}Vl(){return this.Pl}Nl(){return this.Dl}Gl(){return this.Bl}Ce(t){return this.Xo.u(t),this}Wl(t){return this.kl.u(t),this}Le(t){return this.fi.u(t),this}Hl(t){return this.Tl.u(t),this.Cl.u(t),this}Ul(t){return this.Cl.u(t),this}$l(t){return this.Tl.u(t),this}jl(t){return this.Fl.u(t<0?0:t),this}Yl(t){return this.Il.u(void 0!==t&&t<=0?void 0:t),this}}var lr;!function(t){t[t.Complex=0]="Complex",t[t.Simple=1]="Simple"}(lr||(lr={}));const ur=(t,i)=>"function"==typeof i?i(t):i,cr=(t,i)=>!t||t!==i,dr=(t,i)=>!t||t.getThickness()!==i,fr=(t,i)=>t===rt&&i!==rt,gr=t=>t!==rt&&t.getFillStyle()!==R;class mr extends Yh{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Xl=Th.lineStyle,this.engine=t}Be(t){return this.Xl=ur(this.Xl,t),this}Zl(){return this.Xl}Ho(){return cr(this.Kl,this.Xl)}ql(t){return dr(this.Kl,t)}No(){return fr(this.Kl,this.Xl)}Go(){return gr(this.Xl)}Jl(t){this.Kl=t}}class yr extends mr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.mi=n(0,0),this.fi=n(0,0),this.Ql=!1}u({min:t,max:i}){return t.x===this.mi.x&&t.y===this.mi.y&&i.x===this.fi.x&&i.y===this.fi.y||(this.Ql=!0,this.mi=t,this.fi=i),this}gi(){return this.mi}di(){return this.fi}Re(t){return t.x===this.mi.x&&t.y===this.mi.y||(this.Ql=!0,this.mi=t),this}Le(t){return t.x===this.fi.x&&t.y===this.fi.y||(this.Ql=!0,this.fi=t),this}}class pr extends mr{constructor(t,i,s,e,h){super(t,i,s,e,h)}}class Sr extends mr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.tu=[],this.Ia=zi,this.Da=new Array,this.Pa=0,this.La=Lh.NearestX,this.Ra=!1,this.iu=f(void 0),this.fl=!1,this.ml=!1}su(t){return this.iu.u(t),this}eu(){return this.iu.S()}za(){return this.Da}Va(){return this.tu}Ea(t){return this.La=t,this}$a(){return this.Ra=!0,this.tu.length=0,this.Pa=0,this.Da=[],this.Ia=zi,this}ja(){return this.Pa-(Number(this.fl)+Number(this.ml))}Ya(){return this.Da.length}vl(t){return this.fl=t,this}xl(){return this.fl}Ml(t){return this.ml=t,this}_l(){return this.ml}}class br extends Qh{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ll=0,this.hu=0,this.$=f({x:0,y:0}),this.ru=f({x:0,y:0}),this.nu=f({x:0,y:0}),this.mi={x:0,y:0},this.fi={x:0,y:0},this.ou=!0,this.au=!0,this.lu=!0,this.Ia=zi,this.uu=!0,this.cu=R}du(t){return this.cu=Zh(this.cu,t),this}fu(){return this.cu}u(t){return vr.u(this,t,((t,i)=>({x:t,y:i}))),this}gu(){return vr.gu(this)}mu(){return vr.mu(this)}fa(){return vr.fa(this)}Ya(){return vr.Ya(this)}yu(t,i,s){return vr.yu(this,t,i,s),this}pu(t,i,s){return vr.pu(this,t,i,s),this}Su(t,i){return vr.Su(this,t,i),this}bu(t,i){return vr.bu(this,t,i),this}vu(t,i){return vr.vu(this,t,i),this}$a(){return vr.$a(this,((t,i)=>({x:t,y:i}))),this}xu(){return vr.xu(this)}Mu(){return vr.Mu(this)}_u(){return vr._u(this)}ja(){return vr.ja(this)}No(){return vr.No(this)}Go(){return vr.Go(this)}Au(){return this.wu}ku(){return this.Cu}}const vr={u(t,i,s){t.ou=!0,t.au=!0,t.lu=!0;const{start:e}=i,{end:h}=i,{rows:r}=i,{columns:n}=i;t.uu=i.pixelate;const o={x:i.pixelate&&n>=1||!i.pixelate&&n>1?n:0,y:i.pixelate&&r>=1||!i.pixelate&&r>1?r:0};t.ru.u(o),t.mi={...e},t.fi={...h},t.$.u(ds(h,e)),vr.Tu(t,s)},Tu(t,i){const s=t.ru.S();if(s.x>0&&s.y>0){t.wu?t.wu.length=0:t.wu=[];const e=t.uu?cs(s,{x:1,y:1}):{x:s.x,y:s.y};t.nu.u(e),t.wu=Array.from(Array(e.y)).map((()=>Array(e.x))),t.Cu=Array.from(Array(s.y)).map((()=>Array(s.x))),vr.Fu(t,s,e,i),t.ll=e.x*e.y,t.hu=s.x*s.y}else t.wu=void 0,t.nu.u({x:0,y:0})},Fu(t,i,s,e){const h=t.mi,r=t.fi,n=t.wu,o=t.Cu;if(n){const i=s.x,o=s.y,{x:a,y:l}=t.$.S(),u={x:a/(i-1),y:l/(o-1)};for(let t=0;t<o;t+=1)for(let s=0;s<i;s+=1)n[t][s]=e(u.x*s,u.y*t);const d=e(0,0),f=e(r.x-h.x,r.y-h.y),g={},m={};for(const t of Object.keys(d))g[t]=Math.min(d[t],f[t]),m[t]=Math.max(d[t],f[t]);t.Ia=c(g,m)}if(o){const t=i.x,s=i.y;for(let i=0;i<s;i+=1)for(let s=0;s<t;s+=1)o[i][s]={intensity:0}}},gu:t=>t.ru.i||t.nu.i,mu(t){const i=t.ru.S();return{columns:i.x,rows:i.y}},fa(t){const i=t.mi,s=t.fi;return{start:{x:i.x,y:i.y},end:{x:s.x,y:s.y}}},Ya(t){throw new Error("Method not implemented.")},yu(t,i,s,e){const h="geometry"===s||"y"===s?t.wu:t.Cu;if(h){const r=t.nu.S();if("y"===s){const t=Nt(h);for(let s=0;s<r.y;s+=1){let e=s-i;for(;e<0;)e+=r.y;for(let i=0;i<r.x;i+=1)h[e][i]={...t[e][i],y:t[s][i].y}}}else Vt(h,i);const n=h===t.wu?t.nu.S():t.ru.S(),o={column:{start:0,end:n.x},row:{start:n.y-i,end:n.y}};vr.Iu(t,s,e,o)}},pu(t,i,s,e){const h="geometry"===s||"y"===s?t.wu:t.Cu;if(h){const r=t.nu.S();if("y"===s){const t=Nt(h);for(let s=0;s<r.x;s+=1){let e=s-i;for(;e<0;)e+=r.x;for(let i=0;i<r.y;i+=1)h[i][e]={...t[i][e],y:t[i][s].y}}}else h.forEach((t=>Vt(t,i)));const n=h===t.wu?t.nu.S():t.ru.S(),o={column:{start:n.x-i,end:n.x},row:{start:0,end:n.y}},a=(t=>{const i=t.length,s=i>0?t[0].length:0,e=Array.from(Array(s)).map((()=>Array(i)));for(let h=0;h<s;h+=1)for(let s=0;s<i;s+=1)e[h][s]=t[s][h];return e})(e);vr.Iu(t,s,a,o)}},Iu(t,i,s,e){"color"===i&&vr.Su(t,s,e),"value"===i&&vr.bu(t,s,e),"geometry"===i&&vr.vu(t,s,e),"y"===i&&vr.Pu(t,s,e)},Su(t,i,s){const e=t.Cu;if(e){const[h,r,n,o]=zt(t.ru.S(),s);if("function"==typeof i)for(let t=h;t<r;t+=1)for(let s=n;s<o;s+=1){const h=e[t][s],r=i(t,s,{intensity:h.intensity,color:h.color});e[t][s].color=r||h.color}else{const t=i.length,s=t>0?i[0].length:0;for(let a=h,l=0;a<r&&l<t;a+=1,l+=1)for(let t=n,h=0;t<o&&h<s;t+=1,h+=1){const s=i[l][h];s&&(e[a][t].color=s)}}t.ou=!0}},bu(t,i,s){const e=t.Cu;if(e){const[h,r,n,o]=zt(t.ru.S(),s);if("function"==typeof i)for(let t=h;t<r;t+=1)for(let s=n;s<o;s+=1){const h=i(t,s,{intensity:e[t][s].intensity});(h||0===h)&&(e[t][s].intensity=h)}else{const t=i.length,s=t>0?i[0].length:0;for(let a=h,l=0;a<r&&l<t;a+=1,l+=1)for(let t=n,h=0;t<o&&h<s;t+=1,h+=1){const s=i[l][h];(s||0===s)&&(e[a][t].intensity=s)}}t.au=!0}},vu(t,i,s){const e=t.wu;if(e){const[h,r,n,o]=zt(t.nu.S(),s);if("function"==typeof i)for(let t=h;t<r;t+=1)for(let s=n;s<o;s+=1){const h=i(t,s,{...e[t][s]});void 0!==h&&(e[t][s]={...h})}else{const t=i.length,s=t>0?i[0].length:0;for(let a=h,l=0;a<r&&l<t;a+=1,l+=1)for(let t=n,h=0;t<o&&h<s;t+=1,h+=1){const s=i[l][h];void 0!==s&&(e[a][t]={...s})}}t.lu=!0}},Pu(t,i,s){const e=t.wu;if(e){const[h,r,n,o]=zt(t.nu.S(),s);if("function"==typeof i)for(let t=h;t<r;t+=1)for(let s=n;s<o;s+=1){const h=e[t][s],r=i(t,s,h.y);void 0!==r&&(e[t][s]={...h,y:r})}else{const t=i.length,s=t>0?i[0].length:0;for(let a=h,l=0;a<r&&l<t;a+=1,l+=1)for(let t=n,h=0;t<o&&h<s;t+=1,h+=1){const s=e[a][t],r=i[l][h];void 0!==r&&(e[a][t]={...s,y:r})}}t.lu=!0}},$a(t,i){t.ou=!0,t.au=!0,t.lu=!0,t.wu=void 0,t.Cu=void 0,t.ll=0,t.hu=0,t.ru.u({x:0,y:0}),t.nu.u({x:0,y:0}),t.mi={x:0,y:0},t.fi={x:0,y:0},t.Ia=c(i(Ri,Ri),i(Ei,Ei))},xu(t){const i=t.nu.S();return{x:i.x,y:i.y}},Mu(t){const i=t.ru.S();return{x:i.x,y:i.y}},_u:t=>t.ll,ja:t=>t.hu,No:t=>qh(t.Vo,t.ve)||qh(t.Du,t.cu),Go:t=>Jh(t.ve)||Jh(t.cu)},xr=t=>{const i=t.getDraggingMode();return void 0!==i&&i!==At.notDraggable?i===At.draggable?Ie.Move:i===At.onlyHorizontal?Ie.Horizontal:Ie.Vertical:void 0};class Mr{constructor(){this.Pi=!0,this.I=new s,this.Bu=0,this.Ou=(t,i)=>{0===this.Bu&&this.I.emit("mouseEnter",this,i),this.Bu+=1},this.Lu=(t,i)=>{this.Bu-=1,this.Bu<1&&(this.I.emit("mouseLeave",this,i),this.Bu=0)},this.Ru=(t,i)=>{this.I.emit("mouseClick",this,i)},this.Eu=(t,i)=>{this.I.emit("mouseDoubleClick",this,i)},this.zu=(t,i)=>{this.I.emit("mouseDown",this,i)},this.Vu=(t,i)=>{this.I.emit("mouseUp",this,i)},this.Nu=(t,i)=>{this.I.emit("mouseMove",this,i)},this.Gu=(t,i,s)=>{this.I.emit("mouseDragStart",this,i,s)},this.Wu=(t,i,s,e,h)=>{this.I.emit("mouseDrag",this,i,s,e,h)},this.Hu=(t,i,s,e)=>{this.I.emit("mouseDragStop",this,i,s,e)},this.Uu=(t,i)=>{this.I.emit("mouseWheel",this,i)},this.$u=(t,i)=>{this.Bu+=1,this.I.emit("touchStart",this,i)},this.ju=(t,i)=>{this.I.emit("touchMove",this,i)},this.Yu=(t,i)=>{this.Bu-=1,this.I.emit("touchEnd",this,i)},this.Xu=t=>(t instanceof Yh?t.setMouseEnterEventHandler(this.Ou).setMouseLeaveEventHandler(this.Lu).setMouseClickEventHandler(this.Ru).setMouseDoubleClickEventHandler(this.Eu).setMouseDownEventHandler(this.zu).setMouseUpEventHandler(this.Vu).setMouseMoveEventHandler(this.Nu).setMouseDragEventHandler(this.Wu).setMouseDragStartEventHandler(this.Gu).setMouseDragStopEventHandler(this.Hu).setMouseWheelEventHandler(this.Uu).setTouchStartEventHandler(this.$u).setTouchMoveEventHandler(this.ju).setTouchEndEventHandler(this.Yu):(t.onMouseEnter(this.Ou),t.onMouseLeave(this.Lu),t.onMouseClick(this.Ru),t.onMouseDoubleClick(this.Eu),t.onMouseDown(this.zu),t.onMouseUp(this.Vu),t.onMouseMove(this.Nu),t.onMouseDrag(this.Wu),t.onMouseDragStart(this.Gu),t.onMouseDragStop(this.Hu),t.onMouseWheel(this.Uu),t.onTouchStart(this.$u),t.onTouchMove(this.ju),t.onTouchEnd(this.Yu)),t)}onMouseEnter(t){return this.I.on("mouseEnter",t)}onMouseLeave(t){return this.I.on("mouseLeave",t)}onMouseClick(t){return this.I.on("mouseClick",t)}onMouseDoubleClick(t){return this.I.on("mouseDoubleClick",t)}onMouseDown(t){return this.I.on("mouseDown",t)}onMouseUp(t){return this.I.on("mouseUp",t)}onMouseMove(t){return this.I.on("mouseMove",t)}onMouseDragStart(t){return this.I.on("mouseDragStart",t)}onMouseDrag(t){return this.I.on("mouseDrag",t)}onMouseDragStop(t){return this.I.on("mouseDragStop",t)}onMouseWheel(t){return this.I.on("mouseWheel",t)}onTouchStart(t){return this.I.on("touchStart",t)}onTouchMove(t){return this.I.on("touchMove",t)}onTouchEnd(t){return this.I.on("touchEnd",t)}offMouseEnter(t){return this.I.off(t,"mouseEnter")}offMouseLeave(t){return this.I.off(t,"mouseLeave")}offMouseClick(t){return this.I.off(t,"mouseClick")}offMouseDoubleClick(t){return this.I.off(t,"mouseDoubleClick")}offMouseDown(t){return this.I.off(t,"mouseDown")}offMouseUp(t){return this.I.off(t,"mouseUp")}offMouseMove(t){return this.I.off(t,"mouseMove")}offMouseDragStart(t){return this.I.off(t,"mouseDragStart")}offMouseDrag(t){return this.I.off(t,"mouseDrag")}offMouseDragStop(t){return this.I.off(t,"mouseDragStop")}offMouseWheel(t){return this.I.off(t,"mouseWheel")}offTouchStart(t){return this.I.off(t,"touchStart")}offTouchMove(t){return this.I.off(t,"touchMove")}offTouchEnd(t){return this.I.off(t,"touchEnd")}getIsUnderMouse(){return this.Bu>0}setVisible(t){const i=this.Pi!==t;return this.Pi=t,i&&this.I.emit("visibleStateChanged",this,this.Pi),this}getVisible(){return this.Pi}onVisibleStateChanged(t){return this.I.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.I.off(t,"visibleStateChanged")}}const _r=(t,i,s)=>{const e=t.getDraggingMode();if(e!==At.notDraggable){const h=t.scale.ti(t.getPosition(),{x:e!==At.onlyVertical?i.x:0,y:e!==At.onlyHorizontal?i.y:0}),r=t.scale,n=t.getSize(),o=t.getOrigin(),a=r.ti({x:r.x.getInnerStart(),y:r.y.getInnerStart()},fs({x:(1+o.x)/2,y:(1+o.y)/2},n)),l=r.ti({x:r.x.getInnerEnd(),y:r.y.getInnerEnd()},fs({x:(o.x-1)/2,y:(o.y-1)/2},n)),u={x:Math.min(Math.max(h.x,a.x),l.x),y:Math.min(Math.max(h.y,a.y),l.y)};t.setPosition(u),ri(s)}},Ar=(t,i,s,e,h)=>{_r(t,h,i)},wr=(t,i,s,e,h)=>{_r(t,e,h)};class kr extends Mr{constructor(t,i,s,e,h){super(),this.position=n(50,50),this.origin=n(0,0),this.size=n(0,0),this.Ii=!1,this.Zu=void 0,this.Ku=void 0,this.qu=xr,this.Ju=void 0,this.Qu=()=>{const t="function"==typeof this.qu?this.qu(this):this.qu;t&&(this.Ku=this.ks.cs.Ir(t))},this.tc=()=>{this.ks.cs.Pr(this.Ku)},this.Pt=g(0,0,0,0),this.ks=t,this.renderingScale=i,this.scale=s,this.Mo=e,this.ts=h,this.ks.vs(),this.onMouseEnter(this.Qu),this.onMouseLeave(this.tc),this.onMouseDrag(Ar);const r=qs(new Qs(Bt,wr,Bt));this.onTouchStart(r.onTouchStart),this.onTouchMove(r.onTouchMove),this.onTouchEnd(r.onTouchEnd),this.ts=h}setEffect(t){return this.hs=this.hs||this.ks.cs.hs.rs(this,{ic:{shapes:this.sc()}}),this.hs.ic.bs(t),this}getEffect(){return!!this.hs&&this.hs.ic.xs()}setAutoDispose(t){return this.Ju=t,this.ks.vs(),this}getAutoDispose(){return this.Ju}getSize(t=Mt.Everything){return t===Mt.Everything?n(this.size.x+(this.Pt.left+this.Pt.right),this.size.y+(this.Pt.bottom+this.Pt.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.Pt="object"==typeof t?y(this.Pt,t):{left:t,top:t,right:t,bottom:t},this.ks.vs(),this}getMargin(){return this.Pt}ke(){if(this.Ju){const t=this.size,i=this.renderingScale.$t(),s={x:t.x/i.x,y:t.y/i.y};("max-width"===this.Ju.type&&s.x>=this.Ju.maxWidth||"max-height"===this.Ju.type&&s.y>=this.Ju.maxHeight)&&this.dispose()}return this}Is(){return this}dispose(){return this.Ii||(this.ks.vs(),this.Ii=!0,this.Mo(this),this.I.emit("dispose",this)),this}setVisible(t){return super.setVisible(t),this.ks.vs(),this}onDispose(t){return this.I.on("dispose",t)}offDispose(t){return this.I.off(t,"dispose")}setPosition(t){return this.position=t,this.ks.vs(),this}getPosition(t=this.origin,i=Mt.Everything){const s=this.getSize(Mt.Everything),e=this.scale.ti(this.position,fs({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},s));if(i===Mt.Everything)return this.scale.ti(e,fs({x:(t.x+1)/2,y:(t.y+1)/2},s));const h=this.scale.ti(e,{x:this.Pt.left,y:this.Pt.bottom}),r=this.getSize(Mt.Content);return this.scale.ti(h,fs({x:(t.x+1)/2,y:(t.y+1)/2},r))}setOrigin(t){return this.origin=t,this.ks.vs(),this}getOrigin(){return this.origin}setDraggingMode(t=At.notDraggable){return this.Zu=t,this.ks.vs(),this}getDraggingMode(){return void 0!==this.Zu?this.Zu:At.notDraggable}setMouseStyle(t){return this.qu=t,this}getMouseStyle(){return this.qu}}class Cr extends kr{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.ia=g(),this.hc=0,this.ks=t,this.rc=e,this.backgroundElement=new this.rc(this.ks,this.renderingScale,this.scale,Bt,r),this.Xu(this.backgroundElement)}sc(){return this.backgroundElement.sc()}onHighlight(t){return this.I.on("highlight",t)}offHighlight(t){return this.I.off(t)}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}ke(){return super.ke(),this.Ii||this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,Mt.PaddedBackground)).ke(),this}Is(){const t=this.getSize(Mt.PaddedContent);return this.backgroundElement.nc(t).Is(),super.Is()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.ia="object"==typeof t?y(this.ia,t):{left:t,top:t,right:t,bottom:t},this.ks.vs(),this}getPadding(){return this.ia}getSize(t=Mt.Everything){let i=super.getSize(t);return t>=Mt.PaddedContent&&(i=n(i.x+this.ia.left+this.ia.right,i.y+this.ia.bottom+this.ia.top)),t>=Mt.PaddedBackground&&(i=n(i.x+this.backgroundElement.oc()+this.backgroundElement.ac(),i.y+this.backgroundElement.lc()+this.backgroundElement.uc())),i}getPosition(t=this.origin,i=Mt.Everything){if(i===Mt.Everything)return super.getPosition(t,i);const s=super.getPosition(n(-1,-1),Mt.Everything),e=this.getMargin(),h=this.scale.ti(s,{x:e.left,y:e.bottom});if(i===Mt.PaddedBackground){const i=this.getSize(Mt.PaddedBackground);return this.scale.ti(h,fs({x:(t.x+1)/2,y:(t.y+1)/2},i))}const r=this.scale.ti(h,{x:this.backgroundElement.oc(),y:this.backgroundElement.lc()});if(i===Mt.PaddedContent){const i=this.getSize(Mt.PaddedContent);return this.scale.ti(r,fs({x:(t.x+1)/2,y:(t.y+1)/2},i))}const o=this.getPadding(),a=this.scale.ti(r,{x:o.left,y:o.bottom}),l=this.getSize(Mt.Content);return this.scale.ti(a,fs({x:(t.x+1)/2,y:(t.y+1)/2},l))}setMouseInteractions(t){return this.backgroundElement.setMouseInteractions(t),this}getMouseInteractions(){return this.backgroundElement.getMouseInteractions()}getHighlight(){return this.hc}setHighlight(t){return this.hc=Ti(t),this.backgroundElement.setHighlight(t),this.I.emit("highlight",t),this}}const Tr=t=>"setBackground"in t;class Fr extends Mr{constructor(t,i,s,e,h,r,n,o,a,l,u){super(),this.l=0,this.cc=1,this.dc=!0,this.fc=new oh,this.gc=!0,this.Ii=!1,this.axisScale=e,this.renderingScale=h,this.mc=n,this.yc=o,this.Sc=a,this.Mo=l,this.bc=i,this.vc=s,this.xc=this.Xu(this.bc.Oe(this.renderingScale)),this.ts=u,this.Mc=this.Xu(this.Sc._c(this.vc,this.renderingScale,r,Bt,this.ts,!1).setOrigin(ei(this.yc)).setDirection(this.yc)),this.axis=t,this.setMouseInteractions(!1),"major"===this.Mc.Ac?this.xc.Be(u.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):"minor"===this.Mc.Ac?this.xc.Be(u.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):"other"===this.Mc.Ac&&this.xc.Be(u.cursorGridStrokeStyleX)}setValue(t){return this.l=t,this.vc.vs(),this.I.emit("valueChange",this.l),this}getValue(){return this.l}setTextFormatter(t){return this.wc=t,this.vc.vs(),this}setTickLength(t){return this.Mc.setPointerLength(t),this.bc.vs(),this}getTickLength(){return this.Mc.getPointerLength()}setTickLabelPadding(t){return this.Mc.setTickLabelPadding(t),this.bc.vs(),this}setTickLabelRotation(t){return this.Mc.setTextRotation(t),this.bc.vs(),this}getTickLabelRotation(){return this.Mc.getTextRotation()}getTickLabelPadding(){return this.Mc.getTickLabelPadding()}setGridStrokeLength(t){return this.cc=t,this.bc.vs(),this}getGridStrokeLength(){return this.cc}setGridStrokeStyle(t){return this.xc.Be(t),this.bc.vs(),this}getGridStrokeStyle(){return this.xc.Zl()}dispose(){return this.Ii||(this.Ii=!0,this.xc.dispose(),this.Mc.dispose(),this.Mo(this),this.bc.cs.vs(),this.I.emit("dispose",this)),this}onDispose(t){return this.I.on("dispose",t)}offDispose(t){return this.I.off(t,"dispose")}setMarkerVisible(t){return this.dc=t,this.vc.vs(),this}getMarkerVisible(){return this.dc}setMarker(t){return t(this.Mc),this.vc.vs(),this}getMarker(){return this.Mc}setMouseInteractions(t){return this.Mc.setMouseInteractions(t),this.xc.setMouseInteractions(t),this}getMouseInteractions(){return this.xc.getMouseInteractions()}setAllocatesAxisSpace(t){return this.gc=t,this.vc.vs(),this}getAllocatesAxisSpace(){return this.gc}isInScale(){return ji(this.l,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}onValueChange(t){return this.I.on("valueChange",t)}offValueChange(t){return this.I.off(t,"valueChange")}}class Ir extends Fr{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,u,a,l),this.kc=!1,this.Mo=a,this.bc=i,this.vc=s}dispose(){return this.kc=!1,super.dispose()}update(){return this}plot(t,i,s,e){if(this.isInScale()&&this.getVisible()){this.kc=!1;const h=lt(this.l,this.axisScale,this.mc.getWidth(this.renderingScale));this.xc.setVisible(!0).Re(this.mc.toPoint(h,t)).Le(this.mc.toPoint(h,t-(s+i*this.cc))),this.dc?(this.wc&&this.Mc.setText(this.wc(this.l,this)),this.Mc.setVisible(!0).setPosition(this.mc.toPoint(h,e))):this.Mc.setVisible(!1)}else this.xc.setVisible(!1),this.Mc.setVisible(!1);return this.Mc.Is().ke(),this}Cc(){const t=this.Mc.Is().getSize();return this.mc.getHeight(t)}}const Pr=(t,i)=>t.setTextFillStyle(i.uiTextFillStyle).setTextFont(i.uiTextFont),Dr=(t,i)=>(Si(t.setButtonOffSize(i.uiButtonSize).setButtonOnSize(i.uiButtonSize),i,{fill:i.uiButtonFillStyle}),t),Br=(t,i,s)=>{s&&Tr(t)&&t.setBackground((t=>t.setFillStyle(i.uiBackgroundFillStyle).setStrokeStyle(i.uiBackgroundStrokeStyle))).setEffect(!0)},Or={uiElement:void 0,stylers:t.List(),addStyler(t){return{...this,stylers:this.stylers.push(t)}},applyStylers(t,i){return this.stylers.forEach((s=>void 0!==s?s(t,i):void 0)),t}},Lr={background:void 0,setBackground(t){return{...this,background:t}}},Rr={_c(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,e,h),h);return Br(n,h,r),n}},Er={_c(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.background,e,h),h);return Br(n,h,r),n}};class zr extends kr{constructor(){super(...arguments),this.Tc=!0}ke(){return super.ke(),this}setMouseInteractions(t){return this.Tc=t,this}getMouseInteractions(){return this.Tc}sc(){return[]}}class Vr extends zr{onHighlight(t){return this.I.on("highlight",t)}offHighlight(t){return this.I.off(t)}nc(t){return this.size=t,this}oc(){return 0}ac(){return 0}uc(){return 0}lc(){return 0}setHighlight(t){return this}getHighlight(){return 0}setFillStyle(){return this}getFillStyle(){return R}setStrokeStyle(){return this}getStrokeStyle(){return rt}setStrokeThickness(){return this}getStrokeThickness(){return 0}}class Nr extends Vr{constructor(){super(...arguments),this.setSize=this.nc.bind(this)}}class Gr extends kr{constructor(){super(...arguments),this.ve=R,this.I=new s,this.hc=0}onHighlight(t){return this.I.on("highlight",t)}offHighlight(t){return this.I.off(t)}sc(){return[this.ka]}setFillStyle(t){return this.ve="function"==typeof t?t(this.ve):t,this.ka.Ae(this.ve),this.ks.vs(),this}getFillStyle(){return this.ve}getHighlight(){return this.hc}setHighlight(t){return this.hc=t,this.ka.ds(t),this.I.emit("highlight",t),this.ks.vs(),this}setMouseInteractions(t){return this.ka.setMouseInteractions(t),this}getMouseInteractions(){return this.ka.getMouseInteractions()}dispose(){return super.dispose(),this.ka.dispose(),this}setVisible(t){return super.setVisible(t),this.ka.setVisible(t),this}}class Wr extends Gr{constructor(){super(...arguments),this.xe=rt}setStrokeStyle(t){return this.xe="function"==typeof t?t(this.xe):t,this.ka._e(this.xe),this.ks.vs(),this}getStrokeStyle(){return this.xe}}class Hr extends Wr{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.ks=t,this.ka=this.ks.Fc(this.renderingScale,lr.Simple)._e(this.getStrokeStyle()).Ae(this.getFillStyle()).setVisible(!1),this.Xu(this.ka)}Ic(){const t=this.Pc();if(t.length>2){const i=Ji(t),s=n(i.max.x-i.min.x,i.max.y-i.min.y);this.setContentSize(s);const e=t.map((t=>{const e=cs(t,us(i.min,-1));return this.scale.ti(this.position,cs(e,fs(us(cs(this.origin,n(1,1)),-.5),s)))})).map((t=>ut(t,this.scale,this.renderingScale)));this.ka.sl(e).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.ka&&this.ka.setVisible(!1),this.setContentSize(n(0,0))}ke(){return super.ke(),this.Ii||this.Ic(),this}Is(){return this.Ic(),super.Is()}setVisible(t){return super.setVisible(t),this.ka.setVisible(t),this}}class Ur extends Gr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Yo="label",this.ka=this.ks.vr(this.renderingScale).Ae(this.ve).Fh(this.Yo),this.Xu(this.ka)}ke(){const t=this.getPosition(n(0,0),Mt.Content),i=ut(t,this.scale,this.renderingScale);return this.ka.Ce(i),this}Is(){this.ka.Is();const t=0===this.Yo.length?n(0,0):this.ka.Dc();return this.setContentSize(t),super.Is()}setText(t){return this.Yo=t,this.ka.Fh(this.Yo),this.ks.vs(),this}getText(){return this.Yo}setFont(t){return this.ka.Dh(t),this.ks.vs(),this}getFont(){return this.ka.Ph()}setTextRotation(t){return this.ka.Bh(t),this.ks.vs(),this}getTextRotation(){return this.ka.Oh()}}const $r={...Or,...Rr,uiElement:Ur};class jr extends Wr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.fitTo=this.nc.bind(this),this.setSize=this.fitTo,this.ka=this.ks.we(i).Ae(this.ve)._e(this.getStrokeStyle()),this.Xu(this.ka)}ke(){const t=Ji([this.getPosition(n(-1,-1),Mt.Content),this.getPosition(n(1,1),Mt.Content)].map((t=>ut(t,this.scale,this.renderingScale)))),i={x:t.max.x-t.min.x,y:t.max.y-t.min.y};return this.ka.K(i).Ce(ut(this.getPosition(n(-1,-1),Mt.Content),this.scale,this.renderingScale)),this}nc(t){return this.setContentSize(t),this.ks.vs(),this}oc(){return 0}ac(){return 0}uc(){return 0}lc(){return 0}}class Yr extends Wr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Bc=n(0,0),this.setSize=this.fitTo.bind(this),this.ka=t.Oc(i).Wl(0).Le(360).Ae(this.ve)._e(this.getStrokeStyle()),this.Xu(this.ka)}ke(){const t=this.getSize(Mt.Content).x/2;return this.ka.Ul(t*this.renderingScale.ki().x).$l(t*this.renderingScale.ki().y).Ce(ut(this.getPosition(n(0,0),Mt.Content),this.scale,this.renderingScale)).Yl(255).Is(),this}nc(t){const i=Math.sqrt(t.x*t.x/4+t.y*t.y/4);return this.setContentSize(n(2*i,2*i)),this.Bc=t,this.ks.vs(),this}oc(){return(this.getSize(Mt.Content).x-this.Bc.x)/2}ac(){return(this.getSize(Mt.Content).x-this.Bc.x)/2}uc(){return(this.getSize(Mt.Content).y-this.Bc.y)/2}lc(){return(this.getSize(Mt.Content).y-this.Bc.y)/2}fitTo(t){const i=Math.min(t.x,t.y);return this.setContentSize(n(i,i)),this.Bc=t,this}}class Xr extends Hr{constructor(t,i,s,e,h){super(t,i,s,lr.Simple,e,h),this.Lc=f(n(0,0)),this.Rc=!1,this.setSize=this.fitTo.bind(this),this.ks=t,this.Ic()}Pc(){const t=this.Lc.S();if(this.Rc){const i=Math.min(t.x,t.y);return[n(0,0),n(i/2,i/2),n(0,i),n(-i/2,i/2)]}const i=2*Math.sqrt(this.Lc.S().x*this.Lc.S().x/4+this.Lc.S().y*this.Lc.S().y/4),s=n(Math.cos(Math.PI/4)*i,0),e=n(0,Math.sin(Math.PI/4)*i),h=n(0,0),r=cs(h,cs(s,e)),o=cs(r,cs(e,us(s,-1)));return[h,r,o,ds(o,cs(s,e))]}nc(t){return this.Lc.u(t),this.Rc=!1,this.ks.vs(),this}oc(){return this.Rc?0:(this.getSize(Mt.Content).x-this.Lc.S().x)/2}ac(){return this.Rc?0:(this.getSize(Mt.Content).x-this.Lc.S().x)/2}uc(){return this.Rc?0:(this.getSize(Mt.Content).y-this.Lc.S().y)/2}lc(){return this.Rc?0:(this.getSize(Mt.Content).y-this.Lc.S().y)/2}fitTo(t){return this.Lc.u(t),this.Rc=!0,this.ks.vs(),this}}class Zr extends Hr{constructor(t,i,s,e,h){super(t,i,s,lr.Simple,e,h),this.Ec=f(n(0,0)),this.zc=f(10),this.Vc=f(void 0),this.yc=f(wt.Right),this.Ic()}setDirection(t){return this.yc.u(t),this.ks.vs(),this}getDirection(){return this.yc.S()}setPointerLength(t){return this.zc.u(t),this.ks.vs(),this}getPointerLength(){return this.zc.S()}setPointerAngle(t){return this.Vc.u(t),this.ks.vs(),this}getPointerAngle(){let t=this.Vc.S();if(void 0===t){const i=this.Nc();if(0===i)return 0;t=0!==i?180*Math.atan(2*this.getPointerLength()/i)/Math.PI:0}return Math.min(Math.max(t,1),89)}nc(t){return this.Ec.u(t),this.ks.vs(),this}Gc(){const t=this.getPointerAngle();return 0===t?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}Wc(){return hi(this.yc.S())?this.Ec.S().x:this.Ec.S().y}Nc(){return hi(this.yc.S())?this.Ec.S().y:this.Ec.S().x}oc(){switch(this.yc.S()){case wt.Right:return 0;case wt.Left:return this.getPointerLength();case wt.Up:case wt.Down:return Math.max(0,this.Gc()-this.Nc());default:return 0}}ac(){switch(this.yc.S()){case wt.Right:return this.getPointerLength();case wt.Left:return 0;case wt.Up:case wt.Down:return Math.max(0,this.Gc()-this.Nc());default:return 0}}uc(){switch(this.yc.S()){case wt.Right:case wt.Left:return Math.max(0,this.Gc()-this.Nc());case wt.Up:return this.getPointerLength();case wt.Down:default:return 0}}lc(){switch(this.yc.S()){case wt.Right:case wt.Left:return Math.max(0,this.Gc()-this.Nc());case wt.Up:return 0;case wt.Down:return this.getPointerLength();default:return 0}}Pc(){const t=ei(this.yc.S()),i=as(n(0,0),t),s=this.getPointerLength(),e=this.Gc(),h=this.Wc(),r=this.Nc();if(!(0!==s&&0!==e||0!==h&&0!==r))return[];const o=n(0,0),a=cs(cs(o,us(t,-s)),us(i,e/2)),l=cs(a,us(i,(r-e)/2)),u=cs(l,us(t,-h)),c=cs(cs(o,us(t,-s)),us(i,-e/2)),d=cs(c,us(i,-(r-e)/2)),f=cs(d,us(t,-h));let g;return g=0===h||0===r?[o,a,c]:0===s||0===e?[l,u,f,d]:Ot(r,e)?[o,a,u,f,c]:[o,a,l,u,f,d,c],g}}class Kr extends zr{setSize(t){return this.setContentSize(t),this.ks.vs(),this}}class qr extends Cr{constructor(){super(...arguments),this.Hc=[],this.Uc=0,this.$c=t=>{const i=this.Hc.indexOf(t);i>=0&&this.Hc.splice(i,1)}}getMembers(){return this.Hc}getMemberCount(){return this.Hc.length}setMinimumSize(t){return this.jc=t,this.ks.vs(),this}getMinimumSize(){return this.jc}addElement(t,i=-1){const s=t._c(this.ks,this.renderingScale,this.scale,this.$c,this.ts,!1);return s.setMouseInteractions(this.getMouseInteractions()),i>=0?this.Hc.splice(i,0,s):this.Hc.push(s),s.setVisible(this.getVisible()),this.Xu(s),this.Ii&&(Ai(0,(()=>{})),s.dispose()),s}dispose(){return super.dispose(),this.Hc.slice().forEach(Dt),this}setVisible(t){return super.setVisible(t),this.Hc.forEach((i=>i.setVisible(t))),this}setMouseInteractions(t){super.setMouseInteractions(t);for(let i=0;i<this.Hc.length;i+=1)this.Hc[i].setMouseInteractions(t);return this}getMouseInteractions(){if(super.getMouseInteractions())return!0;for(let t=0;t<this.Hc.length;t+=1)if(this.Hc[t].getMouseInteractions())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let s=0;s<this.Hc.length;s+=1){const e=this.Hc[s];"getHighlight"in(i=e)&&"setHighlight"in i&&e.setHighlight(t)}var i;return this}}class Jr extends qr{ke(){super.ke();const t=this.getPosition(n(-1,1),Mt.Content),i=this.Hc.reduce(((t,i)=>t+ +(i instanceof Kr)),0),s=i>0?(this.size.x-this.Uc)/i:0;return this.Hc.reduce(((i,e)=>e instanceof Kr?this.scale.ti({x:i,y:t.y},{x:s+e.getSize().x,y:0}).x:e.setOrigin(n(-1,1)).setPosition(n(i,t.y)).ke().getPosition(n(1,0)).x),t.x),this}Is(){for(let t=0;t<this.Hc.length;t+=1){const i=this.Hc[t];i instanceof Qr&&i.setMinimumSize(0),i.Is()}const t=this.Hc.reduce(this.Yc.bind(this),o(0,0));this.Uc=t.x;const i=void 0===this.jc?t:n(Math.max(t.x,this.jc),t.y);this.setContentSize(i);for(let t=0;t<this.Hc.length;t+=1){const s=this.Hc[t];s instanceof Qr&&s.setMinimumSize(i.y).Is()}return super.Is()}Yc(t,i){const s=i.getSize();return t.x+=s.x,t.y=Math.max(t.y,s.y),t}addGap(t=0,i=-1){return this.addElement(tn,i).setSize(n(0,t))}}class Qr extends qr{ke(){super.ke();const t=this.getPosition(n(-1,1),Mt.Content),i=this.Hc.reduce(((t,i)=>t+ +(i instanceof Kr)),0),s=i>0?(this.size.y-this.Uc)/i:0;return this.Hc.reduce(((i,e)=>e instanceof Kr?this.scale.ti({x:t.x,y:i},{x:0,y:-(s+e.getSize().y)}).y:e.setOrigin(n(-1,1)).setPosition(n(t.x,i)).ke().getPosition(n(0,-1)).y),t.y),this}Is(){for(let t=0;t<this.Hc.length;t+=1){const i=this.Hc[t];i instanceof Jr&&i.setMinimumSize(0),i.Is()}const t=this.Hc.reduce(this.Yc.bind(this),o(0,0));this.Uc=t.y;const i=void 0===this.jc?t:n(t.x,Math.max(t.y,this.jc));this.setContentSize(i);for(let t=0;t<this.Hc.length;t+=1){const s=this.Hc[t];s instanceof Jr&&s.setMinimumSize(i.x).Is()}return super.Is()}Yc(t,i){const s=i.getSize();return t.y+=s.y,t.x=Math.max(t.x,s.x),t}addGap(t=0,i=-1){return this.addElement(tn,i).setSize(n(0,t))}}const tn={...Or,...Rr,uiElement:Kr};class sn extends Jr{constructor(){super(...arguments),this.Hc=[]}addColumn(){return this.addElement(rn,void 0)}getColumn(t,i=!1){return i&&this.Hc.length<=t?(this.addColumn(),this.getColumn(t,!0)):this.Hc[t]}}class en extends Qr{constructor(){super(...arguments),this.Hc=[]}addRow(){return this.addElement(nn,void 0)}getRow(t,i=!1){return i&&this.Hc.length<=t?(this.addRow(),this.getRow(t,!0)):this.Hc[t]}}const hn={...Or,...Lr,...Er},rn={...hn,uiElement:Qr,background:jr},nn={...hn,uiElement:Jr,background:jr},on={setTextLabel:null,setText(t){return this.setTextLabel.setText(t),this},getText(){return this.setTextLabel.getText()}},an=(t,i)=>{const s={},e=`stylable${t}s`;return s[e]=i,s[`set${t}FillStyle`]=function(t){return this[e].forEach((i=>i.setFillStyle(t))),this},s[`get${t}FillStyle`]=function(){return this[e][0].getFillStyle()},s[`set${t}Font`]=function(t){return this[e].forEach((i=>i.setFont(t))),this},s[`get${t}Font`]=function(){return this[e][0].getFont()},s[`set${t}Rotation`]=function(t){return this[e].forEach((i=>i.setTextRotation(t))),this},s[`get${t}Rotation`]=function(){return this[e][0].getTextRotation()},s},ln=an("Text",[]),un={button:void 0,isLocked:!1,setOn(t){if(!this.isLocked){const i=this.button.getOn()!==t;this.button.setOn(t),i&&this.I.emit("switch",t)}return this},getOn(){return this.button.getOn()},setLocked(t){return this.isLocked=t,this},getLocked(){return this.isLocked},onSwitch(t){return this.I.on("switch",(i=>t(this,i)))},offSwitch(t){return this.I.off(t,"switch")},setButtonOffFillStyle(t){return this.button.setOffFillStyle(t),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOffStrokeStyle(t){return this.button.setOffStrokeStyle(t),this},getButtonOffStrokeStyle(){return this.button.getOffStrokeStyle()},setButtonOffSize(t){return this.button.setOffSize(t),this},getButtonOffSize(){return this.button.getOffSize()},setButtonOnFillStyle(t){return this.button.setOnFillStyle(t),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonOnStrokeStyle(t){return this.button.setOnStrokeStyle(t),this},getButtonOnStrokeStyle(){return this.button.getOnStrokeStyle()},setButtonOnSize(t){return this.button.setOnSize(t),this},getButtonOnSize(){return this.button.getOnSize()}},cn={pointable:void 0,setDirection(t){return this.pointable.setDirection(t),this},getDirection(){return this.pointable.getDirection()},setPointerLength(t){return this.pointable.setPointerLength(t),this},getPointerLength(){return this.pointable.getPointerLength()}},dn={...Or,...Lr,background:jr,_c(t,i,s,e,h,r){const n=new Jr(t,i,s,this.background,e,h),o=n.addElement($r,void 0),a=Object.assign(n,on,{setTextLabel:o},ln,{stylableTexts:[o]});return Br(a,h,r),this.applyStylers(a,h)}}.addStyler(Pr),fn={...Or,...Lr,background:Zr,_c(t,i,s,e,h,r){const n=new Jr(t,i,s,this.background,e,h),o=n.addElement($r,void 0),a=n.getBackground(),l=Object.assign(n,on,{setTextLabel:o},ln,{stylableTexts:[o]},cn,{pointable:a},{setTickLabelPadding(t){return this.getDirection()===wt.Up?this.setPadding({top:t}):this.getDirection()===wt.Down?this.setPadding({bottom:t}):this.getDirection()===wt.Right?this.setPadding({right:t}):this.getDirection()===wt.Left&&this.setPadding({left:t}),this},getTickLabelPadding(){return this.getDirection()===wt.Up?this.getPadding().top:this.getDirection()===wt.Down?this.getPadding().bottom:this.getDirection()===wt.Right?this.getPadding().right:this.getPadding().left}});return l.Ac="other",l.setPointerLength(h.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(h.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(h.uiTextFont).setTextFillStyle(h.uiTextFillStyle).setBackground((t=>t.setFillStyle(h.uiBackgroundFillStyle).setStrokeStyle(h.uiBackgroundStrokeStyle))),Br(l,h,r),this.applyStylers(l,h)}};class gn extends kr{constructor(t,i,e,h,r,n,o){super(t,i,e,n,o),this.Ps=!1,this.I=new s,this.getOn=()=>this.Ps,this.Xc=this.Xu(new h(this.ks,this.renderingScale,this.scale,Bt,o)),this.Zc=this.Xu(new r(this.ks,this.renderingScale,this.scale,Bt,o))}sc(){return[...this.Xc.sc(),...this.Zc.sc()]}onHighlight(t){return this.I.on("highlight",t)}offHighlight(t){return this.I.off(t)}setOn(t){return this.Ps=t,this.ks.vs(),this}setOffFillStyle(t){return this.Xc.setFillStyle(t),this}getOffFillStyle(){return this.Xc.getFillStyle()}setOffStrokeStyle(t){return this.Xc.setStrokeStyle(t),this}getOffStrokeStyle(){return this.Xc.getStrokeStyle()}setOffSize(t){return this.Xc.fitTo("number"==typeof t?n(t,t):t),this}getOffSize(){return this.Xc.getSize()}setOnFillStyle(t){return this.Zc.setFillStyle(t),this}getOnFillStyle(){return this.Zc.getFillStyle()}setOnStrokeStyle(t){return this.Zc.setStrokeStyle(t),this}getOnStrokeStyle(){return this.Zc.getStrokeStyle()}setOnSize(t){return this.Zc.fitTo("number"==typeof t?n(t,t):t),this}getOnSize(){return this.Zc.getSize()}ke(){return super.ke(),this.Ps?(this.Xc.setVisible(!1),this.Zc.setVisible(this.getVisible()).setPosition(this.getPosition(n(0,0),Mt.Content)).ke()):(this.Xc.setVisible(this.getVisible()).setPosition(this.getPosition(n(0,0),Mt.Content)).ke(),this.Zc.setVisible(!1)),this}Is(){const t=this.Xc.Is().getSize(),i=this.Zc.Is().getSize();return this.setContentSize(n(Math.max(t.x,i.x),Math.max(t.y,i.y))),super.Is()}dispose(){return super.dispose(),this.Xc.dispose(),this.Zc.dispose(),this}setMouseInteractions(t){return this.Zc.setMouseInteractions(t),this.Xc.setMouseInteractions(t),this}getMouseInteractions(){return this.Zc.getMouseInteractions()}setHighlight(t){const i=Ti(t);return this.Zc.setHighlight(i),this.Xc.setHighlight(i),this.I.emit("highlight",t),this.ks.vs(),this}getHighlight(){return this.Zc.getHighlight()}}const mn={...Or,uiElement:gn,pictureOff:Yr,pictureOn:Yr,setPictureOff(t){return{...this,pictureOff:t}},setPictureOn(t){return{...this,pictureOn:t}},_c(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.pictureOff,this.pictureOn,e,h),h);return Br(n,h,r),n}},yn={...Or,...Lr,background:jr,buttonBuilder:mn,setPictureOff(t){return{...this,buttonBuilder:this.buttonBuilder.setPictureOff(t)}},setPictureOn(t){return{...this,buttonBuilder:this.buttonBuilder.setPictureOn(t)}},_c(t,i,s,e,h,r){const n=new Jr(t,i,s,this.background,e,h),o=n.addElement(rn);o.addGap();const a=o.addElement(this.buttonBuilder);o.addGap();const l=n.addElement(rn);l.addGap();const u=l.addElement($r);l.addGap(),n.addGap();const c=Object.assign(n,on,{setTextLabel:u},ln,{stylableTexts:[u]},un,{button:a});return c.onMouseClick(((t,i)=>{c.setOn(!c.getOn())})),c.onMouseEnter((()=>c.setHighlight(!0))),c.onMouseLeave((()=>c.setHighlight(!1))),c.setMouseStyle(Ie.Point),c.setPadding({left:6}),Br(c,h,r),this.applyStylers(c,h)}}.addStyler(Pr).addStyler(Dr);class pn extends kr{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Kc=[],this.qc=2,this.Jc="",this.Qc=(t,i)=>void 0!==t.label?t.label:Os(t.value,i.min,i.max),this.td=0,this.sd=0,this.ed=!1,this.ks=t,this.hd=r,this.rd=this.Xu(t.we(i)._e(rt)),this.nd=this.Xu(t.vr(i).Ae(h.uiTextFillStyle).Dh(h.uiTextFont).setMouseInteractions(!1)),"vertical"===r?(this.od=140,this.ad=25):(this.od=160,this.ad=15)}sc(){return[this.rd,this.nd]}ld(t){this.ud=t;const i=vn(t,"vertical"===this.hd?0:90,this.ed);return this.rd.Ae(i),this.ks.vs(),this}dd(){return this.ud}fd(t){return this.od=t,this.ks.vs(),this}gd(){return this.od}md(t){return this.ad=t,this.ks.vs(),this}yd(){return this.ad}pd(t){return this.Jc=t,this.ks.vs(),this}Sd(){return this.Jc}bd(t){return this.Qc=t,this.ks.vs(),this}setLUTDisplayProportionalSteps(t){if(this.ed=t,this.ud){const t=vn(this.ud,"vertical"===this.hd?0:90,this.ed);this.rd.Ae(t)}return this.ks.vs(),this}getLUTDisplayProportionalSteps(){return this.ed}setFillStyle(t){return this.nd.Ae(t),this.ks.vs(),this}getFillStyle(){return this.nd.Ih()}setFont(t){return this.nd.Dh(t),this.ks.vs(),this}getFont(){return this.nd.Ph()}setTextRotation(t){return this.sd=t,this.nd.Bh(t),this.ks.vs(),this}getTextRotation(){return this.nd.Oh()}ke(){var t,i,s,e;if(super.ke(),this.Ii)return this;const h=this.ud;if(h){const r=this.renderingScale.ki(),n=h.min,o=h.max;if("vertical"===this.hd){const s=this.getPosition({x:-1,y:-1},Mt.Content),e=cs(s,{x:this.rd.$t().x+this.qc*r.x,y:0}),a={x:e.x,y:e.y+(this.Jc.length>0?this.td*r.y+this.nd.$t().y:0)+.5*((null===(t=this.Kc[0])||void 0===t?void 0:t.$t().y)||0)},l={x:a.x,y:this.getPosition({x:-1,y:1},Mt.Content).y-.5*((null===(i=this.Kc[this.Kc.length-1])||void 0===i?void 0:i.$t().y)||0)};this.rd.Ce({x:s.x,y:a.y}),this.nd.va({x:-1,y:-1}).Ce(e),h.getSteps().forEach(((t,i)=>{const s=Ki(a,l,this.ed?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.Kc[i].va({x:-1,y:0}).Ce(s)}))}else{const t=this.getPosition({x:-1,y:-1},Mt.Content),i=this.getPosition({x:1,y:1},Mt.Content),a=this.Kc.reduce(((t,i)=>Math.max(t,i.$t().y)),0),l=cs(t,{x:.5*((null===(s=this.Kc[0])||void 0===s?void 0:s.$t().x)||0),y:a}),u={x:i.x,y:l.y},c={x:u.x-(.5*((null===(e=this.Kc[this.Kc.length-1])||void 0===e?void 0:e.$t().x)||0)+(this.Jc.length>0?this.td*r.x+this.nd.$t().x:0)),y:l.y},d={x:l.x,y:l.y+this.qc*r.y};this.rd.Ce(d),this.nd.va({x:1,y:1}).Ce(u),h.getSteps().forEach(((t,i)=>{const s=Ki(l,c,this.ed?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.Kc[i].va({x:0,y:1}).Ce(s)}))}}return this}Is(){if(this.ud&&this.getVisible()){const t=this.ud.getSteps();for(let i=this.Kc.length;i<t.length;i+=1)this.Kc.push(this.Xu(this.ks.vr(this.renderingScale).setMouseInteractions(!1)));for(let i=0;i<t.length;i+=1)this.Kc[i].Ae(this.nd.Ih()).Dh(this.nd.Ph()).Fh(this.Qc(t[i],this.ud)).Bh(this.sd);for(let i=t.length;i<this.Kc.length;i+=1)this.Kc[i].dispose();if(this.Kc.length=t.length,this.nd.Fh(this.Jc),"vertical"===this.hd){const t=this.ad,i=this.od;this.rd.K({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=t+Math.max(this.Kc.reduce(((t,i)=>Math.max(t,i.Is().Dc().x)),0),this.nd.Is().Dc().x),e=(this.Jc.length>0?this.td+this.nd.Is().Dc().y:0)+i+.5*this.Kc[0].Is().Dc().y+.5*this.Kc[this.Kc.length-1].Is().Dc().y;this.setContentSize({x:s,y:e})}else{const t=this.od,i=this.ad;this.rd.K({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=Math.max(this.Jc.length>0?this.td+this.nd.Is().Dc().x:0,.5*this.Kc[this.Kc.length-1].Is().Dc().x),e=t+.5*this.Kc[0].Is().Dc().x+s,h=i+this.qc+this.Kc.reduce(((t,i)=>Math.max(t,i.Is().Dc().y)),0);this.setContentSize({x:e,y:h})}}else this.Kc.forEach((t=>t.dispose())),this.Kc.length=0,this.nd.setVisible(!1),this.rd.setVisible(!1),this.setContentSize({x:0,y:0});return super.Is()}dispose(){return super.dispose(),this.rd.dispose(),this.Kc.forEach(Dt),this.nd.dispose(),this}setMouseInteractions(t){return this.rd.setMouseInteractions(t),this}getMouseInteractions(){return this.rd.getMouseInteractions()}}const Sn={lutElement:{},setLUT(t){return this.lutElement.ld(t),this},getLUT(){return this.lutElement.dd()},setLUTLength(t){return this.lutElement.fd(t),this},getLUTLength(){return this.lutElement.gd()},setLUTThickness(t){return this.lutElement.md(t),this},getLUTThickness(){return this.lutElement.yd()},setLookUpUnit(t){return this.lutElement.pd(t),this},getLookUpUnit(){return this.lutElement.Sd()},setLUTStepValueFormatter(t){return this.lutElement.bd(t),this},setLUTDisplayProportionalSteps(t){return this.lutElement.setLUTDisplayProportionalSteps(t),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}},bn={...Or,...Lr,background:jr,alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},_c(t,i,s,e,h,r){const n=new Qr(t,i,s,this.background,e,h),o=n.addElement({_c:()=>new pn(t,i,s,Bt,h,this.alignment)}),a=Object.assign(n,ln,{stylableTexts:[o]},Sn,{lutElement:o});return Br(a,h,r),this.applyStylers(a,h)}}.addStyler(Pr),vn=(t,i,s)=>{const e=t.getSteps(),h=t.min,r=t.max-h;if(!0===t.getInterpolation())return new st({angle:i,stops:e.map(((i,n)=>({offset:s?(i.value-h)/r:n/(e.length-1),color:i.color||t.color})))});const n=[];for(let i=0;i<e.length;i+=1){const o=e[i];n.push({offset:s?.9*(o.value-h)/r:i/e.length,color:o.color||t.color});const a=i<e.length-1?e[i+1]:void 0;n.push({offset:s?a?.9*(a.value-h)/r:1:a?(i+1)/e.length:1,color:o.color||t.color})}return new st({angle:i,stops:n})},xn={...Or,...Lr,background:jr,buttonBuilder:mn,setPictureOff(t){return{...this,buttonBuilder:this.buttonBuilder.setPictureOff(t)}},setPictureOn(t){return{...this,buttonBuilder:this.buttonBuilder.setPictureOn(t)}},alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},_c(t,i,s,e,h){const r=new Qr(t,i,s,this.background,e,h),n=r.addElement(nn),o=n.addElement(rn);o.addGap();const a=o.addElement(this.buttonBuilder);o.addGap();const l=n.addElement(rn);l.addGap();const u=l.addElement($r);l.addGap();const c=r.addElement({_c:()=>new pn(t,i,s,Bt,h,this.alignment)});"vertical"===this.alignment&&c.setMargin({left:h.uiButtonSize+6});const d=Object.assign(r,on,{setTextLabel:u},ln,{stylableTexts:[u,c]},an("LUTText",[c]),un,{button:a},Sn,{lutElement:c});return d.onMouseClick((()=>{d.setOn(!d.getOn())})),d.onMouseEnter((()=>d.setHighlight(!0))),d.onMouseLeave((()=>d.setHighlight(!1))),d.setMouseStyle(Ie.Point),d.setPadding({left:6}),this.applyStylers(d,h)}}.addStyler(Pr).addStyler(Dr),Mn={alignment:null,title:null,entryStylers:null,legendBoxDisposed:null,entries:[],add(t,i){const s=!i||"object"!=typeof i||void 0===i.toggleVisibilityOnClick||i.toggleVisibilityOnClick,e=i&&"object"==typeof i&&void 0!==i.builder?i.builder:void 0;return this.legendBoxDisposed()||(t instanceof na?this.addChart(t,s,e):"attach"in t?this.addAttachable(t,s,e):t&&this.addDashboard(t,s,e)),this},addAttachable(t,i,s){const e=t.dd&&t.dd();let h=s;h||(h=e?xn.setAlignment(this.alignment):yn);const r=this.addElement(h);if(e&&"setLUT"in r){r.setLUT(e.lut);const t=e.lut.getUnits(),i=e.lookUpProperty,s=t.length>0?t:"x"===i?"x":"y"===i?"y":"z"===i?"z":"";r.setLookUpUnit(s)}return this.entryStylers.forEach((t=>t(r))),this.entries.push({entry:r,component:t}),t.attach(r,i),this},addChart(t,i,s){return t.vd().forEach((t=>this.addAttachable(t,i,s))),this},addDashboard(t,i,s){return t.getCells().filter((t=>t.panel instanceof na)).forEach((t=>this.addChart(t.panel,i,s))),this},setTitle(t){return this.title.setText(t),this},getTitle(){return this.title.getText()},setTitleFillStyle(t){return this.title.setTextFillStyle(t),this},getTitleFillStyle(){return this.title.getTextFillStyle()},setTitleFont(t){return this.title.setTextFont(t),this},getTitleFont(){return this.title.getTextFont()},setTitleRotation(t){return this.title.setTextRotation(t),this},getTitleRotation(){return this.title.getTextRotation()},setEntries(t){return this.entries.forEach((i=>t(i.entry,i.component))),this}},_n={alignment:"vertical",layoutBuilder:rn,setAlignment(t){return{...this,alignment:t,layoutBuilder:"horizontal"===t?nn:rn}},getAlignment(){return this.alignment},titleBuilder:dn,styleTitle(t){return{...this,titleBuilder:this.titleBuilder.addStyler(t)}},entryStylers:[],styleEntries(t){return{...this,entryStylers:[...this.entryStylers,t]}}},An={...Or,...Lr,..._n,background:jr,_c(t,i,s,e,h,r){const n=this.layoutBuilder.setBackground(this.background)._c(t,i,s,e,h,!1);let o=Object.assign(n,Mn,{alignment:this.alignment,entryStylers:this.entryStylers,legendBoxDisposed:()=>n.Ii});o.entries=[];const a=o.addElement("horizontal"===this.alignment?rn:nn),l=a.addElement(this.titleBuilder).setText("Legend").setTextFillStyle(h.legendTitleFillStyle).setTextFont(h.legendTitleFont);return a.addGap(),o=Object.assign(o,{title:l}),"horizontal"===this.alignment&&l.setMargin({right:6}),Br(o,h,r),this.applyStylers(o,h)}}.addStyler(((t,i)=>t.setPadding(5)));class wn extends kr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.xd=10,this.Md=wt.Up,this._d=0,this.Ac="major",this.Yo=this.Xu(t.vr(this.renderingScale)),this.De=this.Xu(t.Oe(this.renderingScale))}sc(){return[this.Yo]}ke(){if(super.ke(),this.Ii)return this;const t=ut(this.getPosition(),this.scale,this.renderingScale),i=this.renderingScale.ti(t,{x:this.Md===wt.Right?-this.xd:this.Md===wt.Left?this.xd:0,y:this.Md===wt.Up?-this.xd:this.Md===wt.Down?this.xd:0}),s=this.renderingScale.ti(i,{x:this.Md===wt.Right?-this._d:this.Md===wt.Left?this._d:0,y:this.Md===wt.Up?-this._d:this.Md===wt.Down?this._d:0});return this.De.Re(t).Le(i),this.Yo.Ce(s).va(this.Md===wt.Up?{x:0,y:1}:this.Md===wt.Down?{x:0,y:-1}:this.Md===wt.Right?{x:1,y:0}:{x:-1,y:0}),this}Is(){const t=this.De.Zl().getThickness();return this.size=this.Md===wt.Left||this.Md===wt.Right?{x:this.xd+this._d+this.Yo.Is().Dc().x,y:t}:{y:this.xd+this._d+this.Yo.Is().Dc().y,x:t},super.Is()}dispose(){return super.dispose(),this.Yo.dispose(),this.De.dispose(),this}setVisible(t){return super.setVisible(t),this.Yo.setVisible(t),this.De.setVisible(t),this}setMouseInteractions(t){return this.Yo.setMouseInteractions(t),this.De.setMouseInteractions(t),this}getMouseInteractions(){return this.Yo.getMouseInteractions()}getText(){return this.Yo.Ch()}setTextFillStyle(t){return this.Yo.Ae(t),this.ks.vs(),this}getTextFillStyle(){return this.Yo.Ih()}setTextFont(t){return this.Yo.Dh(t),this}setTextRotation(t){return this.Yo.Bh(t),this}getTextRotation(){return this.Yo.Oh()}getTextFont(){return this.Yo.Ph()}setText(t){return this.Yo.Fh(t),this.ks.vs(),this}setDirection(t){return this.Md=t,this.ks.vs(),this}getDirection(){return this.Md}setPointerLength(t){return this.xd=t,this.ks.vs(),this}getPointerLength(){return this.xd}setTickLabelPadding(t){return this._d=t,this.ks.vs(),this}getTickLabelPadding(){return this._d}setTickStyle(t){return this.De.Be(t),this.ks.vs(),this}getTickStyle(){return this.De.Zl()}}const kn={...Or,_c(t,i,s,e,h,r){const n=new wn(t,i,s,e,h);return Br(n,h,r),this.applyStylers(n,h)}}.addStyler(Pr),Cn=kn.addStyler(((t,i)=>(t.Ac="major",t.setPointerLength(i.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.majorTickStyle.labelFillStyle)))),Tn=kn.addStyler(((t,i)=>(t.Ac="minor",t.setPointerLength(i.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.minorTickStyle.labelFillStyle)))),Fn=yn.addStyler((t=>t.onSwitch(((i,s)=>!0===s?setTimeout((()=>t.setOn(!1)),300):void 0)))),In=An.setAlignment("horizontal"),Pn=An.setAlignment("vertical"),Dn={TextBox:dn,CheckBox:yn,ButtonBox:Fn,PointableTextBox:fn,AxisTickMajor:Cn,AxisTickMinor:Tn,LUTRange:bn},Bn={HorizontalLegendBox:In,VerticalLegendBox:Pn},On=(t,i,s)=>t*(1-s)+i*s,Ln=(t,i,s,e,h)=>{if(void 0===i.value||void 0===s.value||void 0===e.value||void 0===h.value)return;const r=(t.x-s.point.x)/(h.point.x-s.point.x),n=(h.point.y-s.point.y)*r+s.point.y,o=(t.x-i.point.x)/(e.point.x-i.point.x),a=(e.point.y-i.point.y)*o+i.point.y,l=(t.y-a)/(n-a),u=On(s.value,h.value,r),c=On(i.value,e.value,o);return On(c,u,l)},Rn={warm:t=>i=>M(60/(t-1)*i,.8,.8),cold:t=>i=>M(60/(t-1)*i+180,.8,.8),fullSpectrum:t=>i=>M(360/t*i,.8,.8),reverseSpectrum:t=>i=>M(360/t*(t-i),.8,.8),flatUI:t=>i=>M(360/t*i+8,.8,.8-.15/t*i),arction:t=>i=>{const s=1-.2/t*i;return M(360/t*i+51,s,s)},arctionWarm:t=>i=>{const s=t-1,e=1-.2/s*i;return M(46-46/s*i+4,e,e)},sunset:t=>i=>{const s=[170,320];return M(i%2?s[0]:s[1],.8,.5+.5/(t-1)*i)},dynamic:t=>i=>{const s=i%2,e=[234,346];return M(s?e[0]:e[1],s?.3:.9,.5+.5/(t-1)*i)},magenta:t=>i=>{const s=[.9,.6];return M(354,i%2?s[0]:s[1],.5+.5/(t-1)*i)},greyscale:t=>i=>M(0,0,.25+.5/(t-1)*i),frozen:t=>i=>{const s=[.8,.6];return M(160+80/(t-1)*i,.6,i%2?s[0]:s[1])},retro:t=>i=>{const s=[6,183];return M(i%2?s[0]:s[1],.7,.5+.5/(t-1)*i)},crayons:t=>i=>{let s=180+230/(t-1)*i;return s>360&&(s-=360),M(s,.9,.8)},custom:(t,i)=>s=>{const e=.25+.5/(t-1)*s;if(!i)return M(0,0,e);const h=i.getR()/255,r=i.getG()/255,n=i.getB()/255,o=Math.max(h,r,n),a=Math.min(h,r,n);let l=0;if(o!==a){const t=o-a;switch(o){case h:l=(r-n)/t+(r<n?6:0);break;case r:l=(n-h)/t+2;break;case n:l=(h-r)/t+4;break;default:l=0}return l=l/6*360,M(l,.8,e)}return M(0,0,e)},sector:(t,i,s=.8,e=.8)=>h=>r=>M(t+(i-t)/h*r,s,e),auroraBorealis:t=>i=>En([{value:0,hex:"#23FF7A"},{value:1/9,hex:"#03E65D"},{value:2/9,hex:"#04D155"},{value:3/9,hex:"#00B849"},{value:4/9,hex:"#00A869"},{value:5/9,hex:"#008F68"},{value:6/9,hex:"#00815E"},{value:7/9,hex:"#017153"},{value:8/9,hex:"#704A85"},{value:1,hex:"#743A70"}],t,i),blueSciFi:t=>i=>En([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#E2E7FF"},{value:2/9,hex:"#ACB9F8"},{value:3/9,hex:"#889DFF"},{value:4/9,hex:"#547EEF"},{value:5/9,hex:"#4068D8"},{value:6/9,hex:"#2B50B7"},{value:7/9,hex:"#1B3E9F"},{value:8/9,hex:"#8D1395"},{value:1,hex:"#780A74"}],t,i),light:t=>i=>En([{value:0,hex:"#FECC00"},{value:1/9,hex:"#F7B300"},{value:2/9,hex:"#EF9900"},{value:3/9,hex:"#E88000"},{value:4/9,hex:"#E06600"},{value:5/9,hex:"#DD5A00"},{value:6/9,hex:"#D94D00"},{value:7/9,hex:"#D13300"},{value:8/9,hex:"#C91A00"},{value:1,hex:"#C10000"}],t,i),monochrome:t=>i=>En([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#EEEEEE"},{value:2/9,hex:"#DCDCDC"},{value:3/9,hex:"#C1C1C1"},{value:4/9,hex:"#A4A2A2"},{value:5/9,hex:"#8B8B8B"},{value:6/9,hex:"#787878"},{value:7/9,hex:"#656565"},{value:8/9,hex:"#565555"},{value:1,hex:"#434343"}],t,i),night:t=>i=>En([{value:0,hex:"#F0F9E0"},{value:1/9,hex:"#C9DFA4"},{value:2/9,hex:"#B5C796"},{value:3/9,hex:"#8998B7"},{value:4/9,hex:"#6E7E9E"},{value:5/9,hex:"#5C6D8F"},{value:6/9,hex:"#47587A"},{value:7/9,hex:"#374B72"},{value:8/9,hex:"#273C65"},{value:1,hex:"#192847"}],t,i),sunset2:t=>i=>En([{value:0,hex:"#22334D"},{value:1/9,hex:"#82062C"},{value:2/9,hex:"#AB001D"},{value:3/9,hex:"#D80428"},{value:4/9,hex:"#CF5D1B"},{value:5/9,hex:"#CF8229"},{value:6/9,hex:"#CF9D29"},{value:7/9,hex:"#C4BE25"},{value:8/9,hex:"#E1DC49"},{value:1,hex:"#FFFA67"}],t,i)},En=(t,i,s)=>{const e=Vn(i,s),[h,r]=Nn(e,t),n=zn(t[h]),o=zn(t[r]),a=0!==n.value?(o.value-e)/n.value:0,l={value:a,h:On(n.h,o.h,a),s:On(n.s,o.s,a),v:On(n.v,o.v,a)};return M(l.h,l.s,l.v)},zn=t=>{const i=(t=>{const i=t.r,s=t.g,e=t.b,h=Math.max(i,s,e),r=Math.min(i,s,e);let n=0;const o=h,a=h-r,l=0===h?0:a/h;if(h===r)n=0;else{switch(h){case i:n=(s-e)/a+(s<e?6:0);break;case s:n=(e-i)/a+2;break;case e:n=(i-s)/a+4}n/=6}return[360*n,l,o]})(x(t.hex));return{value:t.value,h:i[0],s:i[1],v:i[2]}},Vn=(t,i)=>{const s=i/t;return s<0?0:s>1?1:s},Nn=(t,i)=>{if(i.length<2)throw new Error("Invalid palette size");for(let s=0;s<i.length;s+=1)if(t<i[s].value)return[s-1,s];return[i.length-2,i.length-1]};class Gn{constructor(){this.type="simple"}}const Wn=t=>!(!t||"object"!=typeof t||!("type"in t)||"simple"!==t.type),Hn=new Gn;class Un{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=x("#000"),this.specularColor=x("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const $n=t=>!(!t||"object"!=typeof t||!("type"in t)||"phong"!==t.type),jn=new Un,Yn={Simple:Gn,Phong:Un};var Xn;!function(t){t[t.Fill=0]="Fill",t[t.Fit=1]="Fit",t[t.Stretch=2]="Stretch",t[t.Center=3]="Center",t[t.Tile=4]="Tile"}(Xn||(Xn={}));const Zn=i({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:v(0,0,0,0),sourceMissingColor:v(0,0,0,0),fitMode:Xn.Fill});class Kn extends Zn{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return b(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return b(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}}const qn=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"image"===t.fillType),Jn={Dotted:[1,3],DottedDense:[1,1],Dashed:[3,1],DashedEqual:[2,2],DashedLoose:[2,4],DashDotted:[3,2,1,2]},Qn=i({type:"linestyle",lineType:"dashed",pattern:Jn.DashedEqual,fillStyle:new N({color:v(255,255,255)}),thickness:1,patternScale:3});class to extends Qn{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return this.set("thickness",t)}getThickness(){return this.get("thickness")}O(){const t=this.getThickness();return t<0?1:t}setPattern(t){return this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const io=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"dashed"!==t.lineType),so=i({type:"icon",width:void 0,height:void 0,Ad:void 0,wd:Bt,kd:Bt});class eo extends so{constructor(t,i,s,e){super({...e,Ad:t,wd:i,kd:s})}dispose(){return this.kd(this),this}setWidth(t){const i=this.set("width",t);return this.wd(i),i}getWidth(){return this.get("width")}setHeight(t){const i=this.set("height",t);return this.wd(i),i}getHeight(){return this.get("height")}setSize(t,i){const s=this.withMutations((s=>{s.set("width",t).set("height",i)}));return this.wd(s),s}$t(){if(!this.Ad)return{x:0,y:0};const t=this.Ad.width,i=this.Ad.height,s=this.width,e=this.height;return"number"==typeof s&&"number"==typeof e?{x:s,y:e}:"number"==typeof s?{x:s,y:i*s/t}:"number"==typeof e?{x:t*e/i,y:e}:{x:t,y:i}}}const ho=t=>!(!t||"object"!=typeof t||!("type"in t)||"icon"!==t.type),ro=i({type:"glow",color:v(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class no extends ro{constructor(t){super(t)}setSpread(t){return this.set("spread","function"==typeof t?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur","function"==typeof t?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color","function"==typeof t?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset","function"==typeof t?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}const oo=t=>!(!t||"object"!=typeof t||!("type"in t)||"glow"!==t.type),ao=(t,i)=>{if(Us(t)){const s=i.mo(t);return{x:s.engineX,y:s.engineY}}return t},lo=t=>{let i=!1,s={type:"linear"};if(t&&(void 0!==t.opposite&&(i=t.opposite),t.type&&"linear-highPrecision"===t.type&&(s={type:"linear-highPrecision"}),t.type&&"logarithmic"===t.type)){let i=10;if(t.base)if("E"===t.base||"e"===t.base||"natural"===t.base)i="e";else if("number"==typeof t.base)i=t.base;else if("string"==typeof t.base)try{i=Number(t.base)}catch(i){console.warn(`Unidentified logarithmic base "${t.base}"`)}s={base:i,type:"logarithmic"}}return{opposite:i,type:s}},uo=(t,i,s,e=1)=>Lt(t+.1*e*(i-t)+.5*e*s.getPixelSize()*Math.sign(i-t),t,i),co=(t,i,s,e=1)=>{const h=s.ot(t),r=s.ot(i);return Lt(s.nt(h+.1*e*(r-h)+.5*e*Math.sign(r-h)),t,i)};class fo extends eh{constructor(t,i,s,e,h,r,n){super(t,i,s,e,n),this.Cd=h,this.Td=r}}class go extends sh{constructor(t,i,e,h,r,o,a,l,u,c,d,f,g,m,y,p,S){var b;super(d,c,l,y,p,{numeric:c.getWidth({x:y.xAxisNumericTicks,y:y.yAxisNumericTicks}),datetime:c.getWidth({x:y.xAxisDateTimeTicks,y:y.yAxisDateTimeTicks}),time:c.getWidth({x:y.xAxisTimeTicks,y:y.yAxisTimeTicks})},S),this.Fd=new Map,this.Id=void 0,this.Pd=0,this.Dd=[],this.Bd=[],this.Xe=He.fitting,this.Od=!0,this.Ld=0,this.Rd=8,this.Ed=void 0,this.zd=void 0,this.Vd=20,this.Nd=1,this.Gd=!0,this.Wd=!0,this.Hd=!0,this.Ud=!0,this.$d=!0,this.jd=!0,this.Yd=!0,this.Xd=!0,this.Zd=!0,this.Kd=!0,this.qd=this.bh.defaultDragMouseStyle,this.Jd=this.bh.defaultDragMouseStyle,this.Qd=this.bh.defaultDragMouseStyle,this.tf=this.bh.defaultDragMouseStyle,this.if=this.bh.defaultDragMouseStyle,this.I=new s,this.sf=[],this.ef=t=>{const i=this.Bd.indexOf(t);i>=0&&this.Bd.splice(i,1)},this.hf=t=>(this.Bd.indexOf(t)<0&&this.Bd.push(t),this.ef),this.Zi=(t,i)=>this.I.emit("axisAreaTouch",this,i),this.rf=ai(this.sf),this.onAxisInteractionAreaMouseClick=t=>this.I.on("axisAreaMouseClick",t),this.onAxisInteractionAreaMouseDoubleClick=t=>this.I.on("axisAreaDoubleClick",t),this.onAxisInteractionAreaMouseDown=t=>this.I.on("axisAreaMouseDown",t),this.onAxisInteractionAreaMouseUp=t=>this.I.on("axisAreaMouseUp",t),this.onAxisInteractionAreaMouseEnter=t=>this.I.on("axisAreaMouseEnter",t),this.onAxisInteractionAreaMouseLeave=t=>this.I.on("axisAreaMouseLeave",t),this.onAxisInteractionAreaMouseMove=t=>this.I.on("axisAreaMouseMove",t),this.onAxisInteractionAreaMouseWheel=t=>this.I.on("axisAreaMouseWheel",t),this.onAxisInteractionAreaMouseDragStart=t=>this.I.on("axisAreaMouseDragStart",t),this.onAxisInteractionAreaMouseDrag=t=>this.I.on("axisAreaMouseDrag",t),this.onAxisInteractionAreaMouseDragStop=t=>this.I.on("axisAreaMouseDragStop",t),this.onAxisInteractionAreaTouchStart=t=>this.I.on("axisAreaTouchStart",t),this.onAxisInteractionAreaTouch=t=>this.I.on("axisAreaTouch",t),this.onAxisInteractionAreaTouchStop=t=>this.I.on("axisAreaTouchEnd",t),this.offAxisInteractionAreaMouseClick=t=>this.I.off(t,"axisAreaMouseClick"),this.offAxisInteractionAreaMouseDoubleClick=t=>this.I.off(t,"axisAreaDoubleClick"),this.offAxisInteractionAreaMouseDown=t=>this.I.off(t,"axisAreaMouseDown"),this.offAxisInteractionAreaMouseUp=t=>this.I.off(t,"axisAreaMouseUp"),this.offAxisInteractionAreaMouseEnter=t=>this.I.off(t,"axisAreaMouseEnter"),this.offAxisInteractionAreaMouseLeave=t=>this.I.off(t,"axisAreaMouseLeave"),this.offAxisInteractionAreaMouseMove=t=>this.I.off(t,"axisAreaMouseMove"),this.offAxisInteractionAreaMouseWheel=t=>this.I.off(t,"axisAreaMouseWheel"),this.offAxisInteractionAreaMouseDragStart=t=>this.I.off(t,"axisAreaMouseDragStart"),this.offAxisInteractionAreaMouseDrag=t=>this.I.off(t,"axisAreaMouseDrag"),this.offAxisInteractionAreaMouseDragStop=t=>this.I.off(t,"axisAreaMouseDragStop"),this.offAxisInteractionAreaTouchStart=t=>this.I.off(t,"axisAreaTouchStart"),this.offAxisInteractionAreaTouch=t=>this.I.off(t,"axisAreaTouch"),this.offAxisInteractionAreaTouchStop=t=>this.I.off(t,"axisAreaTouchEnd"),this.nf=(t,i)=>i.getAllocatesAxisSpace()?Math.max(t,i.update().Cc()):t,this.af=t=>{const i=this.Dd.indexOf(t);-1!==i&&this.Dd.splice(i,1)},this.lf=(t,i)=>{this.I.emit("axisAreaDoubleClick",this,i),this.Ud&&(this.setStopped(!1),ri(i))},this.uf=t=>{this.I.emit("axisAreaMouseEnter",this),(this.Wd||this.Gd||this.Hd||this.Ud)&&this.cf(t)},this.df=t=>{this.ff(t),this.I.emit("axisAreaMouseLeave",this)},this.gf=(t,i,s)=>{var e,h;this.I.emit("axisAreaMouseDragStart",this,i,s);const r=Gt(null===(e=this.chart.mf.Dn)||void 0===e?void 0:e.axisXYZoomMouseButton,0),o=Gt(null===(h=this.chart.mf.Dn)||void 0===h?void 0:h.axisXYPanMouseButton,2),a=n(i.clientX,i.clientY);s===o&&this.Wd?(this.yf(t),ri(i)):s===r&&this.Gd&&(this.pf(t,a),ri(i))},this.Sf=(t,i,s,e,h)=>{var r,o;this.I.emit("axisAreaMouseDrag",this,i,s,e,h);const a=Gt(null===(r=this.chart.mf.Dn)||void 0===r?void 0:r.axisXYZoomMouseButton,0),l=Gt(null===(o=this.chart.mf.Dn)||void 0===o?void 0:o.axisXYPanMouseButton,2),u=n(i.clientX,i.clientY);s===l&&this.Wd?(this.bf(t,h),ri(i)):s===a&&this.Gd&&(this.vf(t,e,u,h),ri(i))},this.xf=(t,i,s,e)=>{var h,r;this.I.emit("axisAreaMouseDragStop",this,i,s,e);const o=Gt(null===(h=this.chart.mf.Dn)||void 0===h?void 0:h.axisXYZoomMouseButton,0),a=Gt(null===(r=this.chart.mf.Dn)||void 0===r?void 0:r.axisXYPanMouseButton,2),l=n(i.clientX,i.clientY);s===a&&this.Wd?(this.Mf(t),ri(i)):s===o&&this.Gd&&(this._f(t,e,l),ri(i)),t.getIsUnderMouse()&&(this.Wd||this.Gd||this.Hd||this.Ud)&&this.cf(t)},this.Af=(t,i)=>{if(this.I.emit("axisAreaMouseWheel",this,i),this.Hd){this.setStopped(!0);const t=this.bh.getWidth(this.wf.cs.Fe(i.clientX,i.clientY)),s=this.ut.nt(t);this.zoom(s,_i(i)),ri(i)}},this.kf=(t,i)=>this.I.emit("axisAreaMouseClick",this,i),this.Cf=(t,i)=>this.I.emit("axisAreaMouseDown",this,i),this.Tf=(t,i)=>this.I.emit("axisAreaMouseUp",this,i),this.Ff=(t,i)=>this.I.emit("axisAreaMouseMove",this,i),this.If=(t,i,s)=>{this.I.emit("axisAreaTouchStart",this,s),this.Gd&&(this.cf(t),this.pf(t,i),ri(s))},this.Pf=(t,i,s,e,h)=>{this.I.emit("axisAreaTouch",this,h),this.Gd&&(this.vf(t,i,s,e),ri(h))},this.Df=(t,i,s,e)=>{this.I.emit("axisAreaTouchEnd",this,e),this.Gd&&(this._f(t,i,s),this.ff(t),ri(e))},this.Bf=(t,i,s,e)=>{(this.Wd||this.Hd)&&(this.cf(t),this.yf(t),ri(e))},this.Of=(t,i,s,e,h,r)=>{if(this.Wd){const i=n((e.x+h.x)/2,(e.y+h.y)/2);this.bf(t,i),ri(r)}if(this.Hd){const t=this.wf.cs.Fe(i.x,i.y),n=this.wf.cs.Fe(s.x,s.y),o=Math.abs(this.bh.getWidth(ds(t,e))-this.bh.getWidth(ds(n,h)))-Math.abs(this.bh.getWidth(t)-this.bh.getWidth(n)),a=this.ut.ti(this.wh,-o),l=this.ut.ti(this.kh,o);this.Sh(a,l),ri(r)}},this.Lf=(t,i,s,e)=>{(this.Wd||this.Hd)&&(this.Mf(t),this.ff(t),ri(e))},this.Rf=(t,i)=>{(this.$d||this.jd)&&this.Ef(t)},this.zf=(t,i)=>{this.Vf(t)},this.Nf=(t,i,s)=>{const e=n(i.clientX,i.clientY);this.$d&&this.Gf(t,e)},this.Wf=(t,i,s,e,h)=>{const r=n(i.clientX,i.clientY);this.$d&&this.Hf(t,r,e,h)},this.Uf=(t,i,s,e,h)=>{const r=n(i.clientX,i.clientY);this.$d&&this.$f(t,r,e,h)},this.jf=(t,i,s,e)=>{const h=n(i.clientX,i.clientY);(this.$d||this.jd)&&this.Yf(t,h,e),(this.$d||this.jd)&&this.Ef(t)},this.Xf=(t,i)=>{this.jd&&(this.setStopped(!0),this.zoom(this.wh,_i(i)),ri(i))},this.Zf=(t,i)=>{this.jd&&(this.setStopped(!0),this.zoom(this.kh,_i(i)),ri(i))},this.Kf=(t,i,s)=>{this.$d&&(this.Ef(t),this.Gf(t,i),ri(s))},this.qf=(t,i,s,e,h)=>{this.$d&&(this.Hf(t,i,s,e),ri(h))},this.Jf=(t,i,s,e,h)=>{this.$d&&(this.$f(t,i,s,e),ri(h))},this.Qf=(t,i,s,e)=>{this.$d&&(this.Yf(t,i,s),this.Vf(t),ri(e))},this.Cd=t,this.tg=i,this.wf=e,this.ig=r,this.sg=o,this.chart=d,this.eg=g,this.hg=h,this.es=a,m(this,this.hf),l.rg=this,this.ng=f,this.og=this.ng>50?1:-1,this.ag=(b=this.bh.toPoint(0,-this.og),Math.abs(b.x)>=Math.abs(b.y)?b.x>=0?wt.Right:wt.Left:b.y>=0?wt.Up:wt.Down),this.lg=u,this.ug=this.ut instanceof Es?(new Ns).bi(this.bh.toVec2(this.ut,this.lg)):(new Gs).bi(this.bh.toVec2(this.ut,this.lg)),this.cg=this.chart.pixelScale,this.dg=(new Ns).bi(this.bh.toVec2(this.bh.getWidth(this.cg),this.lg)),this.gg=this.wf.Oe(this.ug).setMouseInteractions(!1),this.mg=this.wf.Oe(this.ug).setMouseInteractions(!1),this.yg=this.wf.Oe(this.ug).setMouseInteractions(!1),this.pg=this.hg.we(this.cg).Ae(c.getWidth({x:y.xAxisOverlayStyle,y:y.yAxisOverlayStyle}))._e(rt).Po(y.highlightColorOffsetAxisOverlay||y.highlightColorOffset),this.Sg=this.hg.we(this.cg).Ae(c.getWidth({x:y.xAxisZoomingBandFillStyle,y:y.yAxisZoomingBandFillStyle}))._e(c.getWidth({x:y.xAxisZoomingBandStrokeStyle,y:y.yAxisZoomingBandStrokeStyle})),this.bg=this.hg.we(this.cg).Ae(c.getWidth({x:y.xAxisOverlayStyle,y:y.yAxisOverlayStyle}))._e(rt).Po(y.highlightColorOffsetAxisOverlay||y.highlightColorOffset),this.vg=this.hg.we(this.cg).Ae(c.getWidth({x:y.xAxisOverlayStyle,y:y.yAxisOverlayStyle}))._e(rt).Po(y.highlightColorOffsetAxisOverlay||y.highlightColorOffset),this.Th=this.hg.vr(this.ug).setMouseInteractions(!1).Bh(this.bh.getTitleTextRotation(this.og)),this.chart.cs.us.ls(this.pg,(t=>this.pg.ds(t)),{animationEnabled:this.qe}),this.chart.cs.us.ls(this.bg,(t=>this.bg.ds(t)),{animationEnabled:this.qe}),this.chart.cs.us.ls(this.vg,(t=>this.vg.ds(t)),{animationEnabled:this.qe});const v=qs(new Qs(this.If,this.Pf,this.Df,1),new te(this.Bf,this.Of,this.Lf),new Js(this.lf)),x=qs(new Qs(this.Kf,this.qf,this.Qf)),M=qs(new Qs(this.Kf,this.Jf,this.Qf));this.pg.setMouseEnterEventHandler(this.uf).setMouseLeaveEventHandler(this.df).setMouseDragStartEventHandler(this.gf).setMouseDragEventHandler(this.Sf).setMouseDragStopEventHandler(this.xf).setMouseWheelEventHandler(this.Af).setMouseDoubleClickEventHandler(this.lf).setMouseClickEventHandler(this.kf).setMouseDownEventHandler(this.Cf).setMouseUpEventHandler(this.Tf).setMouseMoveEventHandler(this.Ff).setTouchStartEventHandler(v.onTouchStart).setTouchMoveEventHandler(v.onTouchMove).setTouchEndEventHandler(v.onTouchEnd),this.bg.setMouseEnterEventHandler(this.Rf).setMouseLeaveEventHandler(this.zf).setMouseDragStartEventHandler(this.Nf).setMouseDragEventHandler(this.Wf).setMouseDragStopEventHandler(this.jf).setMouseWheelEventHandler(this.Xf).setTouchStartEventHandler(x.onTouchStart).setTouchMoveEventHandler(x.onTouchMove).setTouchEndEventHandler(x.onTouchEnd),this.vg.setMouseEnterEventHandler(this.Rf).setMouseLeaveEventHandler(this.zf).setMouseDragStartEventHandler(this.Nf).setMouseDragEventHandler(this.Uf).setMouseDragStopEventHandler(this.jf).setMouseWheelEventHandler(this.Zf).setTouchStartEventHandler(M.onTouchStart).setTouchMoveEventHandler(M.onTouchMove).setTouchEndEventHandler(M.onTouchEnd),this.gg.Be(c.getWidth({x:y.xAxisStrokeStyle,y:y.yAxisStrokeStyle})),this.mg.Be(c.getWidth({x:y.xAxisNibStyle,y:y.yAxisNibStyle})),this.yg.Be(c.getWidth({x:y.xAxisNibStyle,y:y.yAxisNibStyle})),this.Th.Ae(c.getWidth({x:y.xAxisTitleFillStyle,y:y.yAxisTitleFillStyle})).Dh(c.getWidth({x:y.xAxisTitleFont,y:y.yAxisTitleFont})),this.hs=a.rs(this,{}),this.Lh=this.hs.xg([this.Th]).bs(y.effectsText)}Sr(){return this.th}br(){return void 0!==this.Wh}setTickStrategy(t,i){return super.Ah(t,i)}getTickStrategy(){return this.$e}addBand(t=!0){const i=t?this.sg:this.ig,s=new Ge(i,this.chart,this.rf,this,this.ug,this.bh,this.ts,this.es);return this.sf.push(s),s}addConstantLine(t=!0){const i=t?this.sg:this.ig,s=new We(i,this.chart,this.rf,this,this.ug,this.bh,this.ts,this.es);return this.sf.push(s),s}Mg(t){this.sf.forEach(t)}_g(t){return this.sf.map(t)}getHighlighters(){return this.sf}setThickness(t){return"number"==typeof t?(this.Ag=t,this.wg=t):"object"==typeof t&&(this.Ag=t.min,this.wg=t.max),this.Cd.vs(),this}getThickness(){return{min:this.Ag,max:this.wg}}setMouseInteractions(t){return this.setAxisInteractionPanByDragging(t).setAxisInteractionReleaseByDoubleClicking(t).setAxisInteractionZoomByDragging(t).setAxisInteractionZoomByWheeling(t).setNibInteractionScaleByDragging(t).setNibInteractionScaleByWheeling(t)}kg(){return this.Bd}ir(t,i){return new fo(i,t,this.wf,this.ug,this.Cd,this.ug)}Rh(){if(this.Fd){for(const t of this.Fd)t[1].grid.dispose(),t[1].tick.dispose();this.Fd.clear()}super.Rh()}sr(t,i){const{tickStart:s}=i,e=t.gh.tr,h=s+e.getTickLength()*this.og+e.getTickPadding()*this.og;t.Ge.Ce(this.bh.toPoint(t.l,h)).va(this.bh.toPoint(e.getLabelAlignment(),-this.og)).Bh(e.labelRotation).setVisible(this.getVisible())}Cg(t,i){const{startPosition:s,gridStrokeLen:e,gridStrokeStart:h,tickStart:r}=i,n=t.gh.tr,o=s-e*n.getGridStrokeLength(),a=r+n.getTickLength()*this.og;return{gridStroke:{start:this.bh.toPoint(t.l,h),end:this.bh.toPoint(t.l,o)},tickStroke:{start:this.bh.toPoint(t.l,r),end:this.bh.toPoint(t.l,a)}}}Tg(t,i,s,e){return this.Cd.Oe(this.ug).Be(new se({fillStyle:new N({color:M(360*(1-e))}),thickness:5})).Re(this.bh.toVec2(t,0)).Le(this.bh.toVec2(t,this.og*(50*e)))}mr(t,i){return"linear"===this.Mh.type?uo(t,i,this.ut):co(t,i,this.ut)}Fg(t,i){return i instanceof Es?uo:co}pr(t,i,s){if("logarithmic"!==this.Mh.type){const e=this.ut.Si(i-t);return{min:t-s*e,max:i+s*e}}const e=this.ut;return{min:e.ti(t,-s),max:e.ti(i,s)}}ke(t,i,s){const e=this.gg.Zl(),h=this.ut.getInnerStart()<this.ut.getInnerEnd()?this.ut.getInnerStart():this.ut.getInnerEnd(),r=this.ut.getInnerEnd()>this.ut.getInnerStart()?this.ut.getInnerEnd():this.ut.getInnerStart(),n=this.ut.Ht(),o=this.lg.getInnerInterval(),a=e.getThickness()*this.og/2,l=this.ng/100*o,u=l+t,c=u+a,d=o*this.og,f=c+a,g=this.Dd.reduce(this.nf,0);let m,y=0;if(this.Pi||this.Rh(),this.Ue!==Ye&&this.Pi){const t=this.ut.Ht();this.$h({physicalAxisSize:t,startPosition:l,gridStrokeLen:d,gridStrokeStart:u,tickStart:f});for(const[i,s]of this.je){let e=this.Fd.get(i);if(!e)if(i.Ee)e={grid:this.Cd.Ig(this.ug).setMouseInteractions(!1),tick:this.Cd.Ig(this.ug).setMouseInteractions(!1)};else if("Pg"in i){const t=Array.from(this.je.keys()).filter((t=>"Pg"in t)).reverse().indexOf(i),s=this.tg[t];if(!s)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact Arction support.");e={grid:s.Ig(this.ug).setMouseInteractions(!1),tick:s.Ig(this.ug).setMouseInteractions(!1)}}if(e){e.grid.$a(),e.tick.$a();for(const[i,h]of s){const i=this.Cg(h,{physicalAxisSize:t,startPosition:l,gridStrokeLen:d,gridStrokeStart:u,tickStart:f});e.grid.Tr().Dg(i.gridStroke.start,i.gridStroke.end),e.tick.Tr().Dg(i.tickStroke.start,i.tickStroke.end)}e.grid.Be(i.tr.getGridStrokeStyle()),e.tick.Be(i.tr.getTickStyle()),this.Fd.set(i,e)}}for(const t of this.je.values()){let i=Ei;for(const s of t.values()){const t=s.gh.tr,e=this.bh.getHeight(s.Ge.$t()),h=t.getTickLength()+t.getTickPadding()+e+t.getLabelPadding();i=Math.max(i,h)}y=Math.max(y,i)}m=f+Math.max(y,g)*this.og}else y=0,m=f+g*this.og;this.gg.Re(this.bh.toPoint(h,c)).Le(this.bh.toPoint(r,c)),this.mg.Re(this.bh.toPoint(this.ut.ti(this.ut.getInnerStart(),this.Rd),c)).Le(this.bh.toPoint(this.ut.getInnerStart(),c)),this.yg.Re(this.bh.toPoint(this.ut.ti(this.ut.getInnerEnd(),-this.Rd),c)).Le(this.bh.toPoint(this.ut.getInnerEnd(),c));const p=this.Th&&this.Th.Ch().length>0?this.bh.getHeight(this.Th.Is().$t()):0,S=m+.5*p*this.og;this.Th.Ce(this.bh.toPoint(this.ut.ti(this.ut.getInnerStart(),n/2),S));const b=f,v=b+this.og*this.Pd,x=this.$d||this.jd?Math.min(this.Vd,.25*n):0,M={start:this.bh.toVec2(this.ut.ti(this.ut.getInnerStart(),x),b),end:this.bh.toVec2(this.ut.ti(this.ut.getInnerEnd(),-x),v)};if(this.Id){const i=this.ng/100*o+t,s=-this.og*o-t,e={start:this.bh.toVec2(this.Id.min,f+this.og*this.Pd),end:this.bh.toVec2(this.Id.max,i+s)},h=ut(e.start,this.ug,this.cg),r=ut(e.end,this.ug,this.cg);this.Sg.Ce(h).K(ds(r,h)).setVisible(!0)}else this.Sg.setVisible(!1);const _=ut(this.bh.toVec2(this.ut.getInnerStart(),v),this.ug,this.cg),A=ut(M.start,this.ug,this.cg),w=ut(M.end,this.ug,this.cg),k=ut(this.bh.toVec2(this.ut.getInnerEnd(),b),this.ug,this.cg);this.pg.Ce(A).K(ds(w,A)),this.bg.Ce(_).K(ds(A,_)),this.vg.Ce(w).K(ds(k,w));for(const i of this.Dd)i.update().plot(u,d,t,f);for(const t of this.sf)t.ke();const C=e.getThickness()+Math.max(y,g)+(this.Th&&this.Th.Ch().length>0?p+this.Ld:0);return this.Pd=Lt(C,void 0!==this.Ag?this.Ag:0,void 0!==this.wg?this.wg:Ri),this}Bg(t){const i=this.gg.Zl().getThickness()*this.og/2,s=this.lg.getInnerInterval(),e=this.ng/100*s+t,h=e+i,r=s*this.og,n=h+i;for(const i of this.Dd)i.update().plot(e,r,t,n);for(const t of this.sf)t.ke()}Og(){return this.Pd}Lg(t,i){i=i||Dn.AxisTickMajor;const s=new Ir(this,t?this.Cd:this.hg,this.hg,this.ut,this.dg,this.dg,this.bh,this.ag,this.af,this.ts,i).setTextFormatter(this.formatValue);return this.Dd.push(s),s}cf(t){this.chart.cs.us._s(t,1),this.Ed=t.cs.Ir(this.qd,this.Ed)}ff(t){this.chart.cs.us._s(t,0),t.cs.Pr(this.Ed)}yf(t){this.setStopped(!0),t.cs.Pr(this.Ed)}bf(t,i){const s=-this.bh.getWidth(i);this.pan(s),this.Ed=t.cs.Ir(this.Jd,this.Ed)}pan(t){const i=this.wh,s=this.kh,e=this.ut.ti(i,t),h=this.ut.ti(s,t);this.Sh(e,h,{allowClamping:!1})}zoom(t,i){const s=this.ut.ot(this.wh),e=this.ut.ot(this.kh),h=this.ut.ot(t),r=Lt((h-s)/(e-s),0,1),n=.2*this.ut.Ht(),o=r*this.Nd*n*-i,a=(1-r)*this.Nd*n*i,l=this.ut.ti(this.wh,o),u=this.ut.ti(this.kh,a);this.Sh(l,u)}Mf(t){this.Id=void 0,t.cs.Pr(this.Ed)}pf(t,i){this.setStopped(!0),t.cs.Pr(this.Ed),this.chart.cs.us._s(this.pg,0)}vf(t,i,s,e){const h=ut(this.wf.cs.Fe(s.x,s.y),this.wf.cs.ut,this.ug),r=Lt(this.bh.getWidth(h),this.wh,this.kh),n=this.bh.getWidth(ut(this.wf.cs.Fe(i.x,i.y),this.wf.cs.ut,this.ug)),o=ji(this.bh.getHeight(h),this.bh.getHeight(ut(this.pg.fa(),this.cg,this.ug)),this.bh.getHeight(ut(cs(this.pg.fa(),this.pg.$t()),this.cg,this.ug)));Math.abs(this.ut.ot(r)-this.ut.ot(n))>10&&o?(this.Id=c(Math.min(r,n),Math.max(r,n)),this.Ed=t.cs.Ir(this.Qd,this.Ed)):(this.Id=void 0,this.Ed=t.cs.Ir(this.qd,this.Ed)),this.wf.vs()}_f(t,i,s){if(this.Id){const t=this.Id.min,i=this.Id.max,s=this.kh<this.wh;this.yt(s?i:t,s?t:i,!0,!0,"interactionSetInterval")}this.Id=void 0,t.cs.Pr(this.Ed)}Ef(t){this.chart.cs.us._s(t,1),this.zd=t.cs.Ir(this.tf,this.zd)}Vf(t){this.chart.cs.us._s(t,0),t.cs.Pr(this.zd)}Gf(t,i){this.setStopped(!0),this.zd=t.cs.Ir(this.if,this.zd)}Hf(t,i,s,e){const h=this.bh.getWidth(e);this.Sh(this.ut.ti(this.wh,h),this.kh)}$f(t,i,s,e){const h=this.bh.getWidth(e);this.Sh(this.wh,this.ut.ti(this.kh,h))}Yf(t,i,s){t.cs.Pr(this.zd),t.getIsUnderMouse()&&(this.zd=t.cs.Ir(this.tf)),this.wf.vs()}addCustomTick(t){return this.Lg(!0,t)}getUiPosition(){return this.ng}setStrokeStyle(t){return this.gg.Be(t),this.wf.vs(),this}getStrokeStyle(){return this.gg.Zl()}getOverlayStyle(){return this.pg.Ih()}setOverlayStyle(t){return this.pg.Ae(t),this.wf.vs(),this}setAxisInteractionZoomByDragging(t){return this.Gd=t,this}getAxisInteractionZoomByDragging(){return this.Gd}setAxisInteractionPanByDragging(t){return this.Wd=t,this}getAxisInteractionPanByDragging(){return this.Wd}setAxisInteractionZoomByWheeling(t){return this.Hd=t,this}getAxisInteractionZoomByWheeling(){return this.Hd}setAxisInteractionReleaseByDoubleClicking(t){return this.Ud=t,this}getAxisInteractionReleaseByDoubleClicking(){return this.Ud}setAxisMouseHoverStyle(t=this.bh.defaultDragMouseStyle){return this.qd=t,this}getAxisMouseHoverStyle(){return this.qd}setAxisMousePanStyle(t=this.bh.defaultDragMouseStyle){return this.Jd=t,this}getAxisMousePanStyle(){return this.Jd}setAxisMouseZoomStyle(t=this.bh.defaultDragMouseStyle){return this.Qd=t,this}getAxisMouseZoomStyle(){return this.Qd}setAnimationHighlight(t){return this.chart.cs.us.As(this.pg,t),this.chart.cs.us.As(this.bg,t),this.chart.cs.us.As(this.vg,t),this}getAnimationHighlight(){return this.chart.cs.us.ws(this.pg)}getTitleMargin(){return this.Ld}setTitleMargin(t){return this.Ld=t,this.wf.vs(),this}getNibLength(){return this.Rd}setNibLength(t){return this.Rd=t,this.wf.vs(),this}getNibStyle(){return this.mg.Zl()}setNibStyle(t){return this.mg.Be(t),this.yg.Be(t),this.wf.vs(),this}getNibOverlayStyle(){return this.bg.Ih()}setNibOverlayStyle(t){return this.bg.Ae(t),this.vg.Ae(t),this.wf.vs(),this}setNibMousePickingAreaSize(t){return this.Vd=t,this.wf.vs(),this}getNibMousePickingAreaSize(){return this.Vd}setNibInteractionScaleByDragging(t){return this.$d=t,this}getNibInteractionScaleByDragging(){return this.$d}setNibInteractionScaleByWheeling(t){return this.jd=t,this}getNibInteractionScaleByWheeling(){return this.jd}setNibMouseHoverStyle(t=this.bh.defaultDragMouseStyle){return this.tf=t,this}getNibMouseHoverStyle(){return this.tf}setNibMouseScaleStyle(t=this.bh.defaultDragMouseStyle){return this.if=t,this}getNibMouseScaleStyle(){return this.if}setChartInteractions(t){return this.setChartInteractionFitByDrag(t),this.setChartInteractionPanByDrag(t),this.setChartInteractionZoomByDrag(t),this.setChartInteractionZoomByWheel(t),this}setChartInteractionPanByDrag(t){return this.Yd=t,this}getChartInteractionPanByDrag(){return this.Yd}setChartInteractionZoomByWheel(t){return this.Xd=t,this}getChartInteractionZoomByWheel(){return this.Xd}setChartInteractionZoomByDrag(t){return this.Zd=t,this}getChartInteractionZoomByDrag(){return this.Zd}setChartInteractionFitByDrag(t){return this.Kd=t,this}getChartInteractionFitByDrag(){return this.Kd}j(){return this.ut.j(),this}Y(){return this.ut.Y(),this}dispose(){this.mg.dispose(),this.yg.dispose(),this.gg.dispose(),this.pg.dispose(),this.Sg.dispose(),this.bg.dispose(),this.vg.dispose(),this.Th.dispose(),this.Uh(Dt);for(const t of this.Fd.values())t.grid.dispose(),t.tick.dispose();return this.Bd.slice().forEach(Dt),this.sf.slice().forEach(Dt),this.eg(this),this.I.emit("dispose",this),this}onDispose(t){return this.I.on("dispose",t)}offDispose(t){return this.I.off(t,"dispose")}setVisible(t){this.mg.setVisible(t),this.yg.setVisible(t),this.gg.setVisible(t),this.Th.setVisible(t),this.pg.setVisible(t),this.bg.setVisible(t),this.vg.setVisible(t),this.Uh((i=>{i.Ss(t)}));for(const i of this.Fd.values())i.grid.setVisible(t),i.tick.setVisible(t);return super.setVisible(t),this.Cd.vs(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.qe),this}}const mo={getWidth:t=>t.x,getHeight:t=>t.y,toVec2:(t,i)=>({x:t,y:i}),toPoint:(t,i)=>n(t,i)},yo={getWidth:t=>t.y,getHeight:t=>t.x,toVec2:(t,i)=>({x:i,y:t}),toPoint:(t,i)=>n(i,t)},po=t=>!!(t&&"object"==typeof t&&"x"in t&&t.x instanceof go&&"y"in t&&t.y instanceof go),So=i({type:"visible-ticks",gridStrokeLength:1,gridStrokeStyle:new se,tickLength:7,tickStyle:new se,tickPadding:0,labelFont:new oh,labelFillStyle:new N,labelPadding:0,labelAlignment:0,labelRotation:0});class bo extends So{}class vo extends bo{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle","function"==typeof t?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle","function"==typeof t?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle","function"==typeof t?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelFont(t){return this.set("labelFont","function"==typeof t?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelPadding(t){return this.set("labelPadding",t)}getLabelPadding(){return this.get("labelPadding")}setLabelAlignment(t){return this.set("labelAlignment",t)}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const xo=t=>!(!t||"object"!=typeof t||!("type"in t)||"visible-ticks"!==t.type),Mo=Object.assign(Object.create(new class extends bo{}({type:"empty-ticks"})),{}),_o=t=>!(!t||"object"!=typeof t||!("type"in t)||"empty-ticks"!==t.type),Ao=(t,i,s,e,h)=>r=>n=>{const o=new Date(n+r),a={year:o.getFullYear(),monthIndex:o.getMonth(),day:o.getDate(),hours:o.getHours(),minutes:o.getMinutes(),seconds:o.getSeconds(),millis:o.getMilliseconds()},l=e?e(a):void 0;if(0===t&&!0===l)return n;const u=a[i];h.includes("year")&&(a.year=Math.floor(a.year/s)*s),h.includes("monthIndex")&&(a.monthIndex=0),h.includes("day")&&(a.day=1),h.includes("hours")&&(a.hours=0),h.includes("minutes")&&(a.minutes=0),h.includes("seconds")&&(a.seconds=0),h.includes("millis")&&(a.millis=0);let c=(0===t?1:t)*s;return-1===t&&!1===l&&(c=0),0!==c&&(a[i]=s*(c>0?Math.floor((u+c)/s):Math.ceil((u+c)/s))),new Date(a.year,a.monthIndex,a.day,a.hours,a.minutes,a.seconds,a.millis).getTime()-r},wo=(t,i,s,...e)=>Ao(-1,t,i,s,e),ko=(t,i,s,...e)=>Ao(-1,t,i,s,e),Co=(t,i,s,...e)=>Ao(0,t,i,s,e),To=(t,i,...s)=>Ao(1,t,i,void 0,s),Fo=t=>i=>s=>{const e=new Date(s+i),h=e.getDay(),r=1===h&&0===e.getHours()&&0===e.getMinutes()&&0===e.getSeconds()&&0===e.getMilliseconds();if(0===t&&!0===r)return s;let n=e.getDate();return-1===t&&1===h&&!1===r||(-1===t?n-=h>=2?h-1:h+6:n+=h>0?8-h:1),new Date(e.getFullYear(),e.getMonth(),n,0,0,0,0).getTime()-i},Io=[{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:Je({ignore:"first"},2,5)},minorTicks:{amount:4,fitFunction:Je(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:wo("seconds",1,(t=>0===t.millis),"millis")},majorTicks:{fitFunction:Qe(5,10,15,30)},minorTicks:{amount:4,fitFunction:Je(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:wo("minutes",1,(t=>0===t.seconds&&0===t.millis),"seconds","millis")},majorTicks:{fitFunction:Qe(5,10,15,30)},minorTicks:{amount:12,fitFunction:Je(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:wo("hours",1,(t=>0===t.minutes&&0===t.seconds&&0===t.millis),"minutes","seconds","millis")},majorTicks:{fitFunction:Qe(3,6,12)},minorTicks:{amount:8,fitFunction:Je(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:wo("day",1,(t=>0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"hours","minutes","seconds","millis")},majorTicks:{fitFunction:Je({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:Je({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:Fo(-1),getNextKeyValueIncludingRef:Fo(0),getNextKeyValue:Fo(1),greatTicks:!0,majorTicks:{fitFunction:Je(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:ko("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Co("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValue:To("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Je(void 0,2,3)},minorTicks:{fitFunction:Je(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:ko("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Co("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:To("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Je({ignore:"first"},2,5)},minorTicks:{fitFunction:Je(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:ko("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Co("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:To("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Je(void 0,2,4)},minorTicks:{fitFunction:Je(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:ko("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Co("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:To("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:ko("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Co("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:To("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],Po=(t,i,s)=>{let e=((t,i,s,e,h)=>{const r=i-t;let n;for(let t=0;t<Io.length;t+=1){const i=r/Io[t].unit;if(i<=1){n=Io[t];break}}return n})(i,s);if(void 0!==e&&0===Io.indexOf(e)&&(e=Io[1]),void 0===e)return;if("great"===t)return e;const h="major"===t?1:2,r=Io[Io.indexOf(e)-h];return void 0===r?Io[0]:r},Do=(t,i)=>(s,e,h,r)=>{const n=Po("great",s,e);if(void 0===n)return[];if("Decade"===n.label||"Century"===n.label||"Millennium"===n.label)return[];const o=r>h?s:e,a=(s+e)/2,l=r>h?e:s;if(Io.indexOf(n)<=Io.findIndex((t=>"Hour"===t.label)))return"left"===i?[o]:[];let u;if(!0===n.irregular)u=qe(s,e,n.getPrevKeyValue(t),n.getNextKeyValue(t));else{const i=n.greatTicks.getReferenceKeyValue(t)(s);u=Ke(s,e,n.unit,i,1)}const c=((t,i,s)=>{for(const e of s)if(e>=t&&e<=i)return e})(s,e,u);return"left"===i?void 0===c||ji(c,a,l)?[o]:[c]:void 0!==c&&ji(c,a,l)?[c]:[l]},Bo=(t,i)=>(s,e,h,r)=>{const n=Po(t,h,r);let o;if(void 0===n)return[];if("great"===t&&void 0!==n.greatTicks)if(!0===n.irregular)o=qe(s,e,n.getPrevKeyValue(i),n.getNextKeyValue(i));else{const t=n.greatTicks.getReferenceKeyValue(i)(s);o=Ke(s,e,n.unit,t,1)}else if("major"===t&&void 0!==n.majorTicks)o=!0===n.irregular?((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h})(s,e,n.getPrevKeyValue(i),n.getNextKeyValue(i)):((t,i,s)=>{const e=[];let h=t,r=0;for(;h<i;)if(e.push(h),h+=s,r+=1,r>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return e.push(h),e})(s,e,n.unit);else{if("minor"!==t||void 0===n.minorTicks)return[];if(!0===n.irregular)o=((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h})(s,e,n.getNextKeyValueIncludingRef(i),n.getNextKeyValue(i));else{const t=(t=>{if(void 0!==t)return Io[Io.indexOf(t)+1]})(n);if(void 0===t)return[];o=Ze(s,e,t.unit/n.minorTicks.amount,1)}}return o},Oo=t=>(i,s,e,h,r,n)=>{const o=Po(t,r,n);if(void 0===o)return;let a;return"major"===t?a=o.majorTicks.fitFunction:o.minorTicks&&(a=o.minorTicks.fitFunction),a?a(i,s,e,h,r,n):void 0},Lo=i({type:"date-time-ticks",locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new vo,majorTickStyle:new vo,minorTickStyle:new vo,formatOptionsMajorCentury:{year:"numeric"},formatOptionsMinorDecade:{year:"numeric"},formatOptionsMajorDecade:{year:"numeric"},formatOptionsMinorYear:{year:"numeric"},formatOptionsMajorYear:{year:"numeric"},formatOptionsMinorMonth:{month:"short"},formatOptionsGreatYear:{year:"numeric"},formatOptionsMajorMonth:{month:"long"},formatOptionsMinorWeek:{day:"numeric"},formatOptionsGreatMonth:{year:"numeric",month:"long"},formatOptionsMajorWeek:{day:"numeric",weekday:"short"},formatOptionsMinorDay:{day:"numeric",weekday:"short"},formatOptionsGreatWeek:(t,i,s)=>{const e=new Date(t),h=(t=>{const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7));const s=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-s.getTime())/864e5+1)/7)})(e);return`${new Intl.DateTimeFormat(s,{year:"numeric",month:"long"}).format(e)} Week ${h}`},formatOptionsMajorDay:{weekday:"long",day:"numeric"},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit"},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric"},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit"},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit"},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric"},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit"},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit"},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},formatOptionsMajorSecond:{second:"2-digit"},formatOptionsMinorMillisecond:t=>{const i=new Date(t);return`${(i.getSeconds()+i.getUTCMilliseconds()/1e3).toFixed(2)}`},formatOptionsGreatSecond:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},formatOptionsMajorMilliSecond:t=>{const i=new Date(t);return`${(i.getSeconds()+i.getUTCMilliseconds()/1e3).toFixed(1)}`}});class Ro extends Lo{Eh(t){const i=void 0!==this.dateOrigin?this.dateOrigin.getTime():0,s=t=>Io.map((i=>{const s=((t,i,s)=>{switch(s.label){case"MilliSecond100":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorMilliSecond:t.formatOptionsMinorMillisecond;case"Second":return"Great"===i?t.formatOptionsGreatSecond:"Major"===i?t.formatOptionsMajorSecond:t.formatOptionsMinorSecond;case"Minute":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorMinute:t.formatOptionsMinorMinute;default:case"Hour":return"Great"===i?t.formatOptionsGreatHour:"Major"===i?t.formatOptionsMajorHour:t.formatOptionsMinorHour;case"Day":return"Great"===i?t.formatOptionsGreatDay:"Major"===i?t.formatOptionsMajorDay:t.formatOptionsMinorDay;case"Week":return"Great"===i?t.formatOptionsGreatWeek:"Major"===i?t.formatOptionsMajorWeek:t.formatOptionsMinorWeek;case"Month":return"Great"===i?t.formatOptionsGreatMonth:"Major"===i?t.formatOptionsMajorMonth:t.formatOptionsMinorMonth;case"Year":return"Great"===i?t.formatOptionsGreatYear:"Major"===i?t.formatOptionsMajorYear:t.formatOptionsMinorYear;case"Decade":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorDecade:t.formatOptionsMinorDecade;case"Century":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,t,i);if("object"!=typeof s)return s;try{return new Intl.DateTimeFormat(this.locale,s)}catch(t){let i="";for(const t in s)i+=` ${t}: ${s[t]},`;kt.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${i}} )`)}})),e=new Map;e.set("great",s("Great")),e.set("major",s("Major")),e.set("minor",s("Minor"));const h=t=>String(t),r=(t,s)=>(r,n)=>{let o=r+i;const a=n.getInnerStart(),l=n.getInnerEnd(),u=a>l,c=Po(t,u?l:a,u?a:l);if(void 0===c)return h(o);if("great"===t){const t=Ot(r,"left"===s?a:l);let e;if(e=!1===t?r:!1===c.irregular?"left"===s&&!1===u||"right"===s&&!0===u?c.greatTicks.getReferenceKeyValue(i)(r):c.greatTicks.getReferenceKeyValue(i)(r+1*c.unit):"left"===s&&!1===u||"right"===s&&!0===u?c.getPrevKeyValue(i)(r):c.getNextKeyValue(i)(r),o=e+i,"right"===s&&!0===t)return""}const d=e.get(t);if(void 0===d)return h(o);const f=d[Io.indexOf(c)];return void 0===f?"":"function"==typeof f?f(o,n,this.locale):f.format(o)},n=[],o=[{Ge:"Great ticks (directive)",Pg:0,ze:!0,Ar:Bo("great",i),wr:void 0},{Ge:"Major ticks",Pg:1,tr:this.majorTickStyle,Jh:r("major"),Ar:Bo("major",i),mh:{er:Oo("major")},wr:void 0}];this.greatTickStyle!==Mo&&(n.push({Ge:"Great ticks (left)",tr:this.greatTickStyle.setLabelAlignment(-1),Jh:r("great","left"),Ar:Do(i,"left"),Ee:!0,nr:!1}),n.push({Ge:"Great ticks (right)",tr:this.greatTickStyle.setLabelAlignment(1),Jh:r("great","right"),Ar:Do(i,"right"),Ee:!0,nr:!1})),this.minorTickStyle!==Mo&&o.push({Ge:"Minor ticks",Pg:2,tr:this.minorTickStyle,Jh:r("minor"),Ar:Bo("minor",i),mh:{er:Oo("minor"),yh:(t,i,s,e,h,r)=>{const n=Po("minor",h,r);return!n||"Week"!==n.label}},wr:void 0});const a=this.cursorFormatter;return{We:n,He:o,Ve:a?(t,s,e)=>a(i+t,s,e):(t,s,e)=>{const h=new Date(i+t);return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"numeric",day:"numeric",minute:"2-digit",hour:"2-digit"}).format(h)} `},Nh:1e3,Gh:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setGreatTickStyle(t){if("function"==typeof t){const i=this.get("greatTickStyle");return i!==Mo?this.set("greatTickStyle",t(i)):this}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return i!==Mo?this.set("minorTickStyle",t(i)):this}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,i,s){return this.withMutations((e=>e.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsGreatSecond",t||this.formatOptionsGreatSecond).set("formatOptionsMajorCentury",i||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",i||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",i||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",i||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",i||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",i||this.formatOptionsMajorDay).set("formatOptionsMajorHour",i||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",i||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",i||this.formatOptionsMajorSecond).set("formatOptionsMajorMilliSecond",i||this.formatOptionsMajorMilliSecond).set("formatOptionsMinorDecade",s||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",s||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",s||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",s||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",s||this.formatOptionsMinorDay).set("formatOptionsMinorHour",s||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",s||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",s||this.formatOptionsMinorSecond)))}setFormattingDecade(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorDecade",t)),i&&(s=s.set("formatOptionsMinorYear",i)),s)))}setFormattingYear(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorYear",t)),i&&(s=s.set("formatOptionsMinorMonth",i)),s)))}setFormattingMonth(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatYear",t)),i&&(e=e.set("formatOptionsMajorMonth",i)),s&&(e=e.set("formatOptionsMinorWeek",s)),e)))}setFormattingWeek(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMonth",t)),i&&(e=e.set("formatOptionsMajorWeek",i)),s&&(e=e.set("formatOptionsMinorDay",s)),e)))}setFormattingDay(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatWeek",t)),i&&(e=e.set("formatOptionsMajorDay",i)),s&&(e=e.set("formatOptionsMinorHour",s)),e)))}setFormattingHour(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatDay",t)),i&&(e=e.set("formatOptionsMajorHour",i)),s&&(e=e.set("formatOptionsMinorMinute",s)),e)))}setFormattingMinute(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatHour",t)),i&&(e=e.set("formatOptionsMajorMinute",i)),s&&(e=e.set("formatOptionsMinorSecond",s)),e)))}setFormattingSecond(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMinute",t)),i&&(e=e.set("formatOptionsMajorSecond",i)),s&&(e=e.set("formatOptionsMinorMillisecond",s)),e)))}setFormattingMilliSecond(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatSecond",t)),i&&(s=s.set("formatOptionsMajorMilliSecond",i)),s)))}}const Eo=t=>!(!t||"object"!=typeof t||!("type"in t)||"date-time-ticks"!==t.type),zo=(t,i)=>(s,e)=>{const h=e-s;if(i){const i=Math.log10(h/2);let r=10**Math.floor(i-t);const n=1/r;r=Math.round(r*n)/n;const o=Math.round(Math.floor(s/(10*r))*r*10*n)/n;return Ke(o,e,r,void 0,n)}const r=Math.log10(h);let n=10**Math.round(r-t);const o=1/n;return n=Math.round(n*o)/o,Ze(s,e,n,o)},Vo=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%5==0)):void 0,No=Je(void 0,2,5),Go=(t,i,s,e,h,r)=>0===i?[t[1],t[3],t[5]]:1===i?[t[0],t[3]]:2===i?[t[1]]:void 0,Wo=(t,i)=>{const s=Fs(t),e=Is(t);if(i)return(t,i)=>{const h=[],r=Math.floor(s(t)),n=Math.ceil(s(i));for(let t=r-1;t<=n+1;t+=1){const i=e**t;h.push(i)}return h};const h=10===t?9:4;return(t,i)=>{const r=Math.round(s(t)),n=Math.round(s(i)),o=[],a=e**r,l=(e**n-a)/h;for(let s=1;s<=h;s+=1){const e=a+l*s;e>t&&e<i&&o.push(e)}return o}},Ho=i({type:"numeric-ticks",cursorFormatter:void 0,extremeTickStyle:new vo,majorTickStyle:new vo,minorTickStyle:new vo,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0});class Uo extends Ho{Eh(t){const i=this.formattingOffset,s=this.get("extremeFormattingFunction")||("logarithmic"===t.type?Rs(!0,t.base):Ls.Numeric),e=this.get("majorFormattingFunction")||("logarithmic"===t.type?Rs(!0,t.base):Ls.Numeric),h=this.get("minorFormattingFunction")||("logarithmic"===t.type?Rs(!0,t.base):Ls.Numeric),r=[],n=[];this.extremeTickStyle!==Mo&&r.push({Ge:"Extreme ticks",tr:this.extremeTickStyle,Jh:void 0===i?s:(t,e,h)=>s(i+t,e,h),Ar:Xe,Ee:!0,nr:!0}),n.push({Ge:"Major ticks",Pg:0,tr:this.majorTickStyle,Jh:void 0===i?e:(t,s,h)=>e(i+t,s,h),Ar:"logarithmic"===t.type?Wo(t.base,!0):zo(0,!0),mh:"logarithmic"===t.type?void 0:{er:Vo},wr:void 0}),this.minorTickStyle!==Mo&&n.push({Ge:"Minor ticks",Pg:1,tr:this.minorTickStyle,Jh:void 0===i?h:(t,s,e)=>h(i+t,s,e),Ar:"logarithmic"===t.type?Wo(t.base,!1):zo(1,!1),mh:"logarithmic"===t.type?{er:Go}:{er:No},wr:50});const o=this.cursorFormatter?this.cursorFormatter:Ls.Numeric;return{We:r,He:n,Ve:void 0===i?o:(t,s,e)=>o(i+t,s,e),Nh:1e-9,Gh:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if("function"==typeof t){const i=this.get("extremeTickStyle");return i!==Mo?this.set("extremeTickStyle",t(i)):this}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return i!==Mo?this.set("minorTickStyle",t(i)):this}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations((i=>i.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const $o=t=>!(!t||"object"!=typeof t||!("type"in t)||"numeric-ticks"!==t.type),jo=i({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new vo,minorTickStyle:new vo,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),Yo=(t,i)=>{const s=i-t;return s>=864e5?"MajorHours12":s>=36e5?"MajorHours":s>=6e5?"MajorMinutes15":s>=6e4?"MajorMinutes":s>=1e4?"MajorSeconds15":s>=1e3?"MajorSeconds":s>=100?"MajorMilliseconds100":s>=10?"MajorMilliseconds10":s>=1?"MajorMilliseconds":s>=.1?"MajorMicroseconds100":s>=.01?"MajorMicroseconds10":s>=.001?"MajorMicroseconds":s<=.001?"MajorNanoseconds100":"Unknown"},Xo={hhmmss:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/36e5);i%=36e5;const h=Math.floor(i/6e4);i%=6e4;const r=Math.floor(i/1e3);return`${s}${xi(e,2)}:${xi(h,2)}:${xi(r,2)}`},hhmmssmmm:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/36e5);i%=36e5;const h=Math.floor(i/6e4);i%=6e4;const r=Math.floor(i/1e3);i%=1e3;const n=Math.floor(i/1);return`${s}${xi(e,2)}:${xi(h,2)}:${xi(r,2)}.${xi(n,3)}`},hhmmssmmmuuu:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/36e5),h=Math.floor(i/6e4)%60,r=Math.floor(i/1e3)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${s}${xi(e,2)}:${xi(h,2)}:${xi(r,2)}.${xi(n,3)}${o}`},hhmmssmmmuuunnn:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/36e5),h=Math.floor(i/6e4)%60,r=Math.floor(i/1e3)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${s}${xi(e,2)}:${xi(h,2)}:${xi(r,2)}.${xi(n,3)}${o}`}},Zo={MajorHours12:{major:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>{const h=432e5;return t=Math.floor(t/(4*h))*h*4,Ke(t,i,h,void 0,1e6)},fitKeyValues:Je({ignore:"first"},2,4)},minor:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>Ze(t,i,36e5,1e6),fitKeyValues:Je({},2,3,4,6)},defaultValueFormatter:Xo.hhmmss},MajorHours:{major:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>{const h=36e5;return t=Math.floor(t/(12*h))*h*12,Ke(t,i,h,void 0,1e6)},fitKeyValues:Je({ignore:"first"},2,6,12)},minor:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>Ze(t,i,3e5,1e6),fitKeyValues:Je({},2,4,6)},defaultValueFormatter:Xo.hhmmss},MajorMinutes15:{major:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>(t=36e5*Math.floor(t/36e5),Ke(t,i,9e5,void 0,1e6)),fitKeyValues:Je({ignore:"first"},2)},minor:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>Ze(t,i,6e4,1e6),fitKeyValues:Je({},3,5)},defaultValueFormatter:Xo.hhmmss},MajorMinutes:{major:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>{const h=6e4;return t=Math.floor(t/6e5)*h*10,Ke(t,i,h,void 0,1e6)},fitKeyValues:Je({ignore:"first"},2,5)},minor:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>Ze(t,i,5e3,1e6),fitKeyValues:Je({},2,3,4,6)},defaultValueFormatter:Xo.hhmmss},MajorSeconds15:{major:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>{const h=15e3;return t=Math.floor(t/6e4)*h*4,Ke(t,i,h,void 0,1e6)},fitKeyValues:Je({ignore:"first"},2,4)},minor:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>Ze(t,i,1e3,1e6),fitKeyValues:Je({},3,5)},defaultValueFormatter:Xo.hhmmss},MajorSeconds:{major:{format:Xo.hhmmssmmm,getKeyValues:(t,i,s,e)=>{const h=1e3;return t=Math.floor(t/1e4)*h*10,Ke(t,i,h,void 0,1e6)},fitKeyValues:Je({ignore:"first"},2,5)},minor:{format:Xo.hhmmssmmm,getKeyValues:(t,i,s,e)=>Ze(t,i,100,1e6),fitKeyValues:Je({},2,3,5)},defaultValueFormatter:Xo.hhmmssmmm},MajorMilliseconds100:{major:{format:Xo.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=100*Math.floor(t/1e3)*10,Ke(t,i,100,void 0,1e6)),fitKeyValues:Je({ignore:"first"},2,5)},minor:{format:Xo.hhmmssmmm,getKeyValues:(t,i,s,e)=>Ze(t,i,10,1e6),fitKeyValues:Je({},2,3,5)},defaultValueFormatter:Xo.hhmmssmmm},MajorMilliseconds10:{major:{format:Xo.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=10*Math.floor(t/100)*10,Ke(t,i,10,void 0,1e6)),fitKeyValues:Je({ignore:"first"},2,5)},minor:{format:Xo.hhmmssmmm,getKeyValues:(t,i,s,e)=>Ze(t,i,1,1e6),fitKeyValues:Je({},2,3,5)},defaultValueFormatter:Xo.hhmmssmmm},MajorMilliseconds:{major:{format:Xo.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=1*Math.floor(t/10)*10,Ke(t,i,1,void 0,1e6)),fitKeyValues:Je({ignore:"first"},2,5)},minor:{format:Xo.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Ze(t,i,.1,1e6),fitKeyValues:Je({},2)},defaultValueFormatter:Xo.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:Xo.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=.1*Math.floor(t/1)*10,Ke(t,i,.1,void 0,1e6)),fitKeyValues:Je({ignore:"first"},2,5)},minor:{format:Xo.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Ze(t,i,.01,1e6),fitKeyValues:Je({},2,3,5)},defaultValueFormatter:Xo.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:Xo.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>{const h=.01;return t=Math.floor(t/.1)*h*10,Ke(t,i,h,void 0,1e6)},fitKeyValues:Je({ignore:"first"},2,5)},minor:{format:Xo.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Ze(t,i,.001,1e6),fitKeyValues:Je({},2,3,5)},defaultValueFormatter:Xo.hhmmssmmmuuu},MajorMicroseconds:{major:{format:Xo.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=.001;return t=Math.floor(t/.01)*h*10,Ke(t,i,h,void 0,1e6)},fitKeyValues:Je({ignore:"first"},2,5)},minor:{format:Xo.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>Ze(t,i,100*1e-6,1e6),fitKeyValues:Je({},2,3,5)},defaultValueFormatter:Xo.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:Xo.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=100*1e-6;return t=Math.floor(t/.001)*h*10,Ke(t,i,h,void 0,1e6)},fitKeyValues:Je({ignore:"first"},2,5)},minor:{format:Xo.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>Ze(t,i,10*1e-6,1e6),fitKeyValues:Je({},2,3,5)},defaultValueFormatter:Xo.hhmmssmmmuuunnn},Unknown:{major:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},minor:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},defaultValueFormatter:(t,i,s)=>""}};class Ko extends jo{Eh(t){const i=this.timeOrigin||0,s=[{Ge:"Major ticks",Pg:0,tr:this.majorTickStyle,Jh:this.majorFormattingFunction?this.majorFormattingFunction:(t,s,e)=>{const h=Yo(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,Zo[h].major.format)(t+i,s,e)},Ar:(t,i,s,e)=>{const h=Yo(s,e);return(0,Zo[h].major.getKeyValues)(t,i,s,e)},mh:{er:(t,i,s,e,h,r)=>{const n=Yo(h,r),o=Zo[n].major.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},wr:void 0}];return xo(this.minorTickStyle)&&s.push({Ge:"Minor ticks",Pg:1,tr:this.minorTickStyle,Jh:this.minorFormattingFunction?this.minorFormattingFunction:(t,s,e)=>{const h=Yo(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,Zo[h].minor.format)(t+i,s,e)},Ar:(t,i,s,e)=>{const h=Yo(s,e);return(0,Zo[h].minor.getKeyValues)(t,i,s,e)},mh:{er:(t,i,s,e,h,r)=>{const n=Yo(h,r),o=Zo[n].minor.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},wr:void 0}),{We:[],He:s,Ve:this.cursorFormatter||((t,s,e)=>{const h=Yo(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return Zo[h].defaultValueFormatter(t+i,s,e)}),Nh:1e-4,Gh:864e6}}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return i!==Mo?this.set("minorTickStyle",t(i)):this}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations((i=>i.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const qo=t=>!(!t||"object"!=typeof t||!("type"in t)||"time-ticks"!==t.type),Jo=(t,i,s="image/png",e)=>{i+=`.${s.slice(s.indexOf("image/")+6)}`;const h=t.captureFrame(s,e);if("image/png"!==s&&h.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${s}\nCheck support table for HTMLCanvasElement.toDataURL`);if(kt.navigator.msSaveBlob)kt.navigator.msSaveBlob(h,i);else{const t=kt.document.createElement("a");kt.document.body.appendChild(t);const s=kt.URL.createObjectURL(h);t.href=s,t.download=i,t.click(),setTimeout((()=>{kt.URL.revokeObjectURL(s),kt.document.body.removeChild(t)}),0)}},Qo=(t,i,s,e,h,r)=>{const n=t._c(i,s,e,h,r,!0);return n.setDraggingMode(At.draggable),n},ta=(t,i)=>{if("relative"===t)return i;if(t instanceof Vs)return t;const s=t.x instanceof sh?t.x.ut:t.x.x,e=t.y instanceof sh?t.y.ut:t.y.y;return Ws(s,e)},ia=(t,i,s,e,h)=>{if(s){const r=t,n=i,o=po(n)?n:$s(n)?e:void 0;if(o&&Hs(s)){const t=ut(r,o,h.ut);return h.yo({engineX:t.x,engineY:t.y})}if(o&&$s(s))return ut(r,o,e);if(o&&po(s))return ut(r,o,s)}else{const s=t;if($s(i)){const t=h.mo(s);return ut({x:t.engineX,y:t.engineY},h.ut,e)}if(po(i)){const t=i,e=h.mo(s);return ut({x:e.engineX,y:e.engineY},h.ut,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class sa{constructor(t,i,e,h,r,o,a,l){this.coordsRelative="relative",this.coordsClient="client",this.Rg=[],this.Eg=[],this.I=new s,this.zg=void 0,this.Vg=void 0,this.Ng=void 0,this.Pt=g(0,0,0,0),this.Ii=!1,this.Gg=()=>{this.Wg=!0,this.Hg.vs()},this.Ug=t=>i=>{const s=this.Rg.indexOf(i);-1!==s&&this.Rg.splice(s,1),this.cs.vs(),t.N()},this.$g=t=>{const i=this.Eg.indexOf(t);-1!==i&&this.Eg.splice(i,1),this.cs.vs()},this.Wg=!0,this.mf=t,this.jg=e,this.Hg=h,this.removePanel=r,this.ts=i.cs.ts;const u=i.cs.$t();if(this.uiScale=e.d2({scaleXYConstructor:Ns}).Mi(0,100)._i(0,100).K(u),this.pixelScale=e.d2({scaleXYConstructor:Ns}).Mi(0,this.uiScale.x.getCellSize())._i(0,this.uiScale.y.getCellSize()).K(u),this.engine=i.cs.Yg,this.cs=i.cs.Xg,this.hs=this.cs.hs.rs(this,{}),this.Zg=()=>i.Kg("unidentified ui"),this.qg=i.Jg(),this.Qg=this.Hg.we(this.uiScale).Ce(n(0,0)).K(n(100,100)).Ae(o)._e(a).setMouseMoveEventHandler(((t,i)=>this.I.emit("mouseMovePanelBackground",this,i))).setMouseEnterEventHandler(((t,i)=>this.I.emit("mouseEnterPanelBackground",this,i))).setMouseLeaveEventHandler(((t,i)=>this.I.emit("mouseLeavePanelBackground",this,i))).setMouseDownEventHandler(((t,i)=>this.I.emit("mouseDownPanelBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.I.emit("mouseUpPanelBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.I.emit("mouseClickPanelBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.I.emit("mouseDoubleClickPanelBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.I.emit("mouseWheelPanelBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.I.emit("mouseDragStartPanelBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.I.emit("mouseDragPanelBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.I.emit("mouseDragStopPanelBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>this.I.emit("touchStartPanelBackground",this,i))).setTouchMoveEventHandler(((t,i)=>this.I.emit("touchMovePanelBackground",this,i))).setTouchEndEventHandler(((t,i)=>this.I.emit("touchEndPanelBackground",this,i))),l){const t=l.on(this.Gg);this.tm=()=>l.off(t)}else{const t=i.cs.co(this.Gg);this.im=i.cs.do.bind(i.cs,t)}this.zg=r}getTheme(){return this.ts}getSizePixels(){return this.pixelScale.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.Qg.Ae(t),this.Hg.vs(),this}getBackgroundFillStyle(){return this.Qg.Ih()}setBackgroundStrokeStyle(t){return this.Qg._e(t),this.Hg.vs(),this}getBackgroundStrokeStyle(){return this.Qg.jn()}translateCoordinate(t,i,s){return ia(t,i,s,this.pixelScale,this.cs)}sm(t){return this.Rg.push(t),this.cs.vs(),t}hm(t){return this.Eg.push(t),this.cs.vs(),t}addUIElement(t=dn,i=this.uiScale){i=ta(i,this.pixelScale);const s=this.Zg();return this.sm(Qo(t,s,this.uiScale,i,this.Ug(s),this.ts))}addLegendBox(t=An,i=this.uiScale){i=ta(i,this.pixelScale);const s=this.hm(Qo(t,this.qg,this.uiScale,i,this.$g,this.ts));return s.setDraggingMode(At.notDraggable),void 0!==i&&i!==this.uiScale||(void 0===t||"vertical"===t.getAlignment()?s.setOrigin(Pe.RightCenter).setPosition({x:100,y:50}):s.setOrigin(Pe.CenterBottom).setPosition(this.uiScale.ti({x:50,y:0},{x:0,y:3}))),s}dispose(){return this.Ii||(this.Ii=!0,this.im&&this.im(),this.tm&&this.tm(),ea(this.uiScale),ea(this.pixelScale),this.Vg&&this.Vg(),this.Hg.N(),this.qg.N(),this.Rg.slice().forEach((t=>{t.dispose()})),this.Eg.slice().forEach((t=>{t.dispose()})),this.cs.vs(),this.zg&&this.zg(this),this.I.emit("dispose",this)),this}onDispose(t){return this.I.on("dispose",t)}offDispose(t){return this.I.off(t,"dispose")}saveToFile(t,i,s){return Jo(this.engine,t,i,s),this}xa(t){this.Pt=t,this.Gg()}j(){return this.pixelScale.j(),this.uiScale.j(),this}Y(){return this.pixelScale.Y(),this.uiScale.Y(),this}ke(t){if(this.Wg){const t=this.Hg.cs.$t(),i=t.x,s=t.y;this.uiScale.K(i,s),this.pixelScale.K(i,s);const e=[this.Pt.left,this.Pt.right],h=[this.Pt.bottom,this.Pt.top];this.uiScale.vi(e),this.uiScale.xi(h);const r=this.uiScale.getInnerIntervalPixels();this.pixelScale.Mi(0,r.x).vi(e)._i(0,r.y).xi(h),this.I.emit("resize",this,r.x,r.y,i,s)}this.Wg=!1}rm(){for(let t=0;t<this.Rg.length;t+=1)this.Rg[t].Is().ke();for(let t=0;t<this.Eg.length;t+=1)this.Eg[t].Is().ke();this.Ng&&this.Ng()}nm(t,i){if(t){const s=t(i);this.onResize(s.Is.bind(s)),this.Vg=s.N.bind(s),this.Ng=s.Is.bind(s)}}onBackgroundMouseEnter(t){return this.I.on("mouseEnterPanelBackground",t)}offBackgroundMouseEnter(t){return this.I.off(t,"mouseEnterPanelBackground")}onBackgroundMouseMove(t){return this.I.on("mouseMovePanelBackground",t)}offBackgroundMouseMove(t){return this.I.off(t,"mouseMovePanelBackground")}onBackgroundMouseLeave(t){return this.I.on("mouseLeavePanelBackground",t)}offBackgroundMouseLeave(t){return this.I.off(t,"mouseLeavePanelBackground")}onBackgroundMouseDown(t){return this.I.on("mouseDownPanelBackground",t)}offBackgroundMouseDown(t){return this.I.off(t,"mouseDownPanelBackground")}onBackgroundMouseUp(t){return this.I.on("mouseUpPanelBackground",t)}offBackgroundMouseUp(t){return this.I.off(t,"mouseUpPanelBackground")}onBackgroundMouseClick(t){return this.I.on("mouseClickPanelBackground",t)}offBackgroundMouseClick(t){return this.I.off(t,"mouseClickPanelBackground")}onBackgroundMouseDoubleClick(t){return this.I.on("mouseDoubleClickPanelBackground",t)}offBackgroundMouseDoubleClick(t){return this.I.off(t,"mouseDoubleClickPanelBackground")}onBackgroundMouseDragStart(t){return this.I.on("mouseDragStartPanelBackground",t)}offBackgroundMouseDragStart(t){return this.I.off(t,"mouseDragStartPanelBackground")}onBackgroundMouseDrag(t){return this.I.on("mouseDragPanelBackground",t)}offBackgroundMouseDrag(t){return this.I.off(t,"mouseDragPanelBackground")}onBackgroundMouseDragStop(t){return this.I.on("mouseDragStopPanelBackground",t)}offBackgroundMouseDragStop(t){return this.I.off(t,"mouseDragStopPanelBackground")}onBackgroundMouseWheel(t){return this.I.on("mouseWheelPanelBackground",t)}offBackgroundMouseWheel(t){return this.I.off(t,"mouseWheelPanelBackground")}onBackgroundTouchStart(t){return this.I.on("touchStartPanelBackground",t)}offBackgroundMouseTouchStart(t){return this.I.off(t,"touchStartPanelBackground")}onBackgroundTouchMove(t){return this.I.on("touchMovePanelBackground",t)}offBackgroundTouchMove(t){return this.I.off(t,"touchMovePanelBackground")}onBackgroundTouchEnd(t){return this.I.on("touchEndPanelBackground",t)}offBackgroundTouchEnd(t){return this.I.off(t,"touchEndPanelBackground")}onResize(t){return this.I.on("resize",t)}offResize(t){return this.I.off(t,"resize")}}const ea=t=>{t.Vt&&t.Vt()};class ha extends sa{constructor(t,i,s,e,h,r){super(t,i,s,i.om("uipanel bg",0),e,i.cs.ts.uiPanelBackgroundFillStyle,i.cs.ts.uiPanelBackgroundStrokeStyle,r),this.nm(h,this.pixelScale)}setMinimumSize(t){return this.jc=t,this.cs.vs(),this}getMinimumSize(){return this.jc}ke(t){super.ke(t),super.rm()}}const ra=g(10,10,10,10);class na extends sa{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,u),this.am={},this.ia=ra,this.qe=!0,this.lm=i.um("chart internal ui",0),this.dm=this.lm.vr(this.uiScale).Fh("Chart").Ce(n(50,100)).va(n(0,1)).Dh(a).Ae(l).setMouseInteractions(!1),this.fm=this.hs.xg([this.dm]).bs(this.ts.effectsText)}setAnimationsEnabled(t){return this.qe=t,this}getAnimationsEnabled(){return this.qe}setTitle(t){return this.dm.Fh(t),this.cs.vs(),this}getTitle(){return this.dm.Ch()}getTitleSize(){return this.dm.Is().Dc()}setTitleFillStyle(t){return this.dm.Ae(t),this.Gg(),this}getTitleFillStyle(){return this.dm.Ih()}setTitleFont(t){return this.dm.Dh(t),this.Gg(),this}getTitleFont(){return this.dm.Ph()}setTitleRotation(t){return this.dm.Bh(t),this.cs.vs(),this}getTitleRotation(){return this.dm.Oh()}setTitleEffect(t){return this.fm.bs(t),this.cs.vs(),this}getTitleEffect(){return this.fm.xs()}setTitleMargin(t){var i,s;return this.am="object"==typeof t?this.am?(i=this.am,{left:void 0!==(s=t).left?s.left:i.left,top:void 0!==s.top?s.top:i.top,right:void 0!==s.right?s.right:i.right,bottom:void 0!==s.bottom?s.bottom:i.bottom}):t:{left:t,top:t,right:t,bottom:t},this.Gg(),this}getTitleMargin(){return this.am}setPadding(t){return this.ia="object"==typeof t?y(this.ia,t):{left:t,top:t,right:t,bottom:t},this.Gg(),this}getPadding(){return this.ia}gm(t){const i=t.ym(),s=null==i?void 0:i.height,e=null==i?void 0:i.width;if(void 0!==s&&void 0!==e)return{x:s/2,y:e/2}}dispose(){return super.dispose(),this.lm.N(),this}}const oa={pm:(t,i)=>t.Ih()!==R&&0!==t.Ch().length&&t.getVisible()?t.Is().Dc().y:0,Sm(t,i){t.Ce(n(50,100)).xa({top:void 0!==i.top?i.top:10,right:i.right||0,left:i.left||0,bottom:i.bottom||0})}};var aa;!function(t){t[t.LabelsInsideSlices=0]="LabelsInsideSlices",t[t.LabelsOnSides=1]="LabelsOnSides"}(aa||(aa={}));const la={SortByName:(t,i)=>t.getName().localeCompare(i.getName(),void 0,{numeric:!0}),SortByValueAscending:(t,i)=>t.getAnimatedValue()-i.getAnimatedValue(),SortByValueDescending:(t,i)=>i.getAnimatedValue()-t.getAnimatedValue(),None:()=>0},ua={Name:t=>`${t.getName()}`,NamePlusValue:t=>`${t.getName()}: ${Math.round(t.getAnimatedValue())}`,NamePlusRelativeValue:(t,i)=>`${t.getName()}: ${(100*i).toFixed(2)}%`};class ca extends Xs{constructor(){super(...arguments),this.Ms="Slice",this.l=0}}const da=(t,i)=>{ri(i),t.setExploded(!t.getExploded())};class fa extends ca{}class ga extends fa{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.bm=!1,this.vm=R,this.xm=R,this.Mm=this.l,this._m=this.bm?1:0,this.Am=this.getVisible(),this.wm=Z((()=>this.Ji.cs.vs())),this.km=Z((()=>this.Ji.cs.vs())),this.Cm=()=>{this.Tm=void 0},this.Fm=()=>{this.Im=void 0},this.index=t,this.Ji=e,this.scale=h,this.Qi=r,this.Pm=i.Oc(h).ds(this.getHighlight()),this.fs(this.Pm),this.Ge=s.vr(h).ds(this.getHighlight()),this.fs(this.Ge,{isText:!0}),this.onMouseClick(da),this.onTouchEnd(da)}setValue(t){return this.Ji.getAnimationsEnabled()?this.Am&&this.Dm(this.Mm,t):this.Mm=t,this.l=t,this.Ji.cs.vs(),this}getValue(){return this.l}setExploded(t){if(t&&!1===this.Ji.getMultipleSliceExplosion()){const t=this.Ji.getSlices();for(let i=0;i<t.length;i+=1)t[i]!==this&&t[i].getExploded()&&t[i].setExploded(!1)}return this.Ji.getAnimationsEnabled()?(this.Im&&this.Im.finish(),this.Im=this.km(300,Y.ease)([[this._m,t?1:0]],(([t])=>{this._m=t,this.Ji.cs.vs()})),this.Im.onEveryAnimationEnd(this.Fm),this.bm=!this.bm):!1!==this.Ji.getMultipleSliceExplosion()||t?(this._m=this.bm?0:1,this.bm=!this.bm):(this._m=0,this.bm=!this.bm),this.Ji.cs.vs(),this}getExploded(){return this.bm}setVisible(t){return this.Am=t,!1===t?this.Ji.getAnimationsEnabled()&&this.Mm>0?(this.Tm&&(this.Tm.finish(!1),this.Tm=void 0),this.Dm(this.Mm,0,(()=>super.setVisible(!1)))):(this.Mm=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(this.Tm&&(this.Tm.finish(!1),this.Tm=void 0),super.setVisible(!0),this.Dm(this.Mm,this.l)):(this.Mm=this.l,super.setVisible(!0)),this}Dm(t,i,s){this.Tm=this.wm(300,Y.ease)([[t,i]],(([t])=>{this.Mm=t,this.Ji.cs.vs()})),this.Tm.onEveryAnimationEnd(this.Cm),s&&this.Tm.onAnimationEnd(s)}setStyle(t,i,s,e){this.vm=t,this.xm=s,this.Pm.Ae(this.vm)._e(i),this.Ge.Ae(this.xm).Dh(e);for(let t=0;t<this.Oi.length;t+=1)this.styleAttachedEntry(this.Oi[t])}getAnimatedValue(){return this.Mm}getAnimatedExplosion(){return this._m}attach(t,i=!0){return super.attach(t,i),this.styleAttachedEntry(t),this}styleAttachedEntry(t){Si(t,this.ts,{fill:this.vm,stroke:this.Pm.jn()})}}const ma=(t,i,s)=>cs(i,us(Ms(.5*(t.Rl()+t.di())*Math.PI/180),s)),ya=(t,i,s,e,h,r)=>{const n=t.length;let o=90;for(let a=0;a<n;a+=1){const l=t[a],u=o-360*i[a],c=l.getAnimatedExplosion();if(0===c||1===n)l.Pm.Ce(s);else{const t=cs(s,us(Ms(.5*(o+u)*Math.PI/180),r*c));l.Pm.Ce(t)}l.Pm.Wl(o).Le(u).Ul(e).$l(e).jl(h),o=u}},pa=t=>{const i=t.getSlices();for(let t=0;t<i.length;t+=1)i[t].setExploded(!1)};class Sa extends na{constructor(t,i,s,e,h,r,n){super(t,i,s,i.om("pieChart bg",0),e,i.cs.ts.pieChartBackgroundFillStyle,i.cs.ts.pieChartBackgroundStrokeStyle,i.cs.ts.pieChartTitleFont,i.cs.ts.pieChartTitleFillStyle,r),this.Bm=[],this.Om=la.SortByName,this.Fl=0,this.Lm=this.ts.pieChartSliceFillStylePalette,this.Rm=this.ts.pieChartSliceStrokeStyle,this.Em=!0,this.zm=this.ts.pieChartSliceLabelFont,this.Vm=this.ts.pieChartSliceLabelFillStyle,this.Nm=0,this.Gm=!1,this.Wm=20,this.Hm=!0,this.Um=!0,this.$m=t=>{const i=this.Bm.indexOf(t);i>=0&&(this.Bm.splice(i,1),this.jm())},this.mf.Cn||this.mf.kn||this.cs.An(7),this.Ym=i.Xm("pieChart bottom",0),this.Zm=i.Xm("pieChart top",1),this.dm.Fh("Pie Chart"),this.nm(h,this.pixelScale),this.onBackgroundMouseDoubleClick(pa);const o=qs(new Js(pa));this.onBackgroundTouchStart(o.onTouchStart),this.onBackgroundTouchMove(o.onTouchMove),this.onBackgroundTouchEnd(o.onTouchEnd),n&&this.setAnimationsEnabled(!1)}addSlice(t,i){const s=new ga(this.Nm,this.Ym,this.Zm,this,this.pixelScale,this.$m,this.ts,this.cs.hs);this.Nm+=1,s.setName(t);const e=this.qe;return this.qe=!1,s.setValue(i),this.qe=e,s.setEffect(this.Hm),this.Km(s),this.Bm.push(s),this.jm(),s.setHighlightOnHover(this.Em),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Bm}setMultipleSliceExplosion(t){return this.Gm=t,this}getMultipleSliceExplosion(){return this.Gm}setInnerRadius(t){return this.Fl=t,this.cs.vs(),this}getInnerRadius(){return this.Fl}setSliceExplosionOffset(t){return this.Wm=t,this.cs.vs(),this}getSliceExplosionOffset(){return this.Wm}setLUT(t){return this.ud=t,this.cs.vs(),this}setSliceFillStyle(t){this.Lm=t;for(let t=0;t<this.Bm.length;t+=1)this.Km(this.Bm[t]);return this.cs.vs(),this}getSliceFillStyle(){return this.Lm}setSliceStrokeStyle(t){this.Rm="function"==typeof t?t(this.Rm):t;for(let t=0;t<this.Bm.length;t+=1)this.Km(this.Bm[t]);return this.cs.vs(),this}getSliceStrokeStyle(){return this.Rm}setSliceEffect(t){return this.Hm=t,this.Bm.forEach((i=>i.hs.os.bs(t))),this.cs.vs(),this}getSliceEffect(){return this.Hm}setSliceSorter(t){return this.Om=t,this.Bm=this.Bm.sort(this.Om),this.cs.vs(),this}getSliceSorter(){return this.Om}setLabelFillStyle(t){this.Vm="function"==typeof t?t(this.Vm):t;for(let t=0;t<this.Bm.length;t+=1)this.Km(this.Bm[t]);return this.cs.vs(),this}getLabelFillStyle(){return this.Vm}setLabelFont(t){this.zm="function"==typeof t?t(this.zm):t;for(let t=0;t<this.Bm.length;t+=1)this.Km(this.Bm[t]);return this.cs.vs(),this}getLabelFont(){return this.zm}setLabelEffect(t){return this.Um=t,this.Bm.forEach((i=>i.hs.ns.bs(t))),this.cs.vs(),this}getLabelEffect(){return this.Um}setLabelFormatter(t){return this.qm=t,this.cs.vs(),this}getLabelFormatter(){return this.qm}setSliceHighlightOnHover(t){return this.Em=t,this.Bm.forEach((i=>i.setHighlightOnHover(t))),this}ke(t){super.ke(t),oa.Sm(this.dm,this.am),super.rm();const i=oa.pm(this.dm,this.am),s=n(this.pixelScale.x.getInnerInterval()-(this.ia.left+this.ia.right),this.pixelScale.y.getInnerInterval()-(this.ia.bottom+this.ia.top+i)),e=n(this.ia.left+s.x/2,this.ia.bottom+s.y/2);if(this.ud){const t=this.ud;this.Bm.forEach((i=>{this.Km(i,new N({color:t.getColors(i.getAnimatedValue())}))}))}for(let t=0;t<this.Bm.length;t+=1){const i=this.Bm[t].getAnimatedValue()>0;this.Bm[t].Pm.setVisible(i),this.Bm[t].Ge.setVisible(i)}this.Bm=this.Bm.sort(this.Om);const h=this.Bm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/r:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.Ge.Fh(this.qm(i,o[t])).Is()}this.Jm(h,o,e,s)}Km(t,i=this.Lm(t.index)){t.setStyle(i,this.Rm,this.Vm,this.zm)}jm(){this.Bm=this.Bm.sort(this.Om),this.cs.vs()}vd(){return this.Bm}dispose(){return super.dispose(),this.Zm.N(),this.Ym.N(),this.Bm.slice().forEach((t=>t.dispose())),this}}const ba={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}},va=(...t)=>{const i=[];return t.forEach((t=>{var s;t&&"object"==typeof(s=t)&&s&&"pattern"in s&&i.push({type:"DataPattern",args:t})})),i};var xa;!function(t){t[t.TopRight=0]="TopRight",t[t.TopLeft=1]="TopLeft",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight"}(xa||(xa={}));const Ma=(t,i,s,e,h,r,o,a,l)=>{if(0===t.length)return;const u=e.x+i*h.x*.5,c=1===s?Math.max:Math.min;let d;for(let h=0;h<t.length;h+=1){const f=t[h];let g;d&&(g=d.Ge.fa().y+s*(d.Ge.$t().y+10));const m=ma(f.Pm,e,r+a+o+l).y,y=void 0===g?m:c(m,g);f.Ge.Ce(n(u,y)).ya(i).Sa(0),d=f}},_a=(t,i,s,e,h,r)=>{const o=h*t.getAnimatedExplosion(),a=t.Pm,l=t.Ge,u=ma(a,s,e+r+o),c=Ss(l.fa().y,u,s),d=n(l.fa().x-i*(r+l.$t().x),c.y);return-1===i&&c.x<d.x||1===i&&c.x>d.x?[u,d]:[u,c,d]},Aa=(...t)=>i=>{const s=(t=>{let i=.5*(t.Pm.Rl()+t.Pm.di());for(i%=360;i<0;)i+=360;return i<=90?xa.TopRight:i<180?xa.TopLeft:i<270?xa.BottomLeft:xa.BottomRight})(i);return t.includes(s)},wa=Aa(xa.BottomLeft,xa.TopLeft),ka=Aa(xa.BottomRight,xa.TopRight),Ca=Aa(xa.TopLeft,xa.TopRight),Ta=Aa(xa.BottomLeft,xa.BottomRight);class Fa extends Sa{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.qm=ua.NamePlusValue,this.Qm=5,this.ty=5,this.iy=[],this.sy=this.ts.pieChartConnectorStrokeStyle,this.setPadding({bottom:50})}setLabelConnectorStyle(t){this.sy=t;for(let t=0;t<this.iy.length;t+=1)this.iy[t].Be(this.sy);return this.cs.vs(),this}getLabelConnectorStyle(){return this.sy}setLabelConnectorLength(t){return this.ty=t,this.cs.vs(),this}getLabelConnectorLength(){return this.ty}setLabelConnectorGap(t){return this.Qm=t,this.cs.vs(),this}getLabelConnectorGap(){return this.Qm}Jm(t,i,s,e){const h=this.Wm,r=this.Qm,n=this.ty,o=this.zm.getSize();let a=0;if(1===t.length)a=t[0].Ge.$t().x;else for(let i=0;i<t.length;i+=1)a=Math.max(a,t[1].Ge.$t().x);const l=Math.max(0,.5*Math.min(e.x-2*a,e.y-2*o)-(r+h+n));ya(t,i,s,l,this.Fl,h);const u=t.filter(wa),c=t.filter(ka),d=u.filter(Ca),f=u.filter(Ta).reverse(),g=c.filter(Ca).reverse(),m=c.filter(Ta);Ma(f,-1,-1,s,e,l,h,r,n),Ma(d,-1,1,s,e,l,h,r,n),Ma(m,1,-1,s,e,l,h,r,n),Ma(g,1,1,s,e,l,h,r,n);for(let t=0;t<this.iy.length;t+=1)this.iy[t].setVisible(!1);for(let t=0;t<u.length;t+=1)u[t].getVisible()&&this.ey(_a(u[t],-1,s,l,h,r));for(let t=0;t<c.length;t+=1)c[t].getVisible()&&this.ey(_a(c[t],1,s,l,h,r))}getMinimumSize(){return n(500,300)}ey(t){let i;for(let t=0;t<this.iy.length;t+=1)if(!this.iy[t].getVisible()){i=this.iy[t].setVisible(!0);break}void 0===i&&(i=this.Zm.hy(this.pixelScale,void 0,[ba.InternalUI]).Be(this.sy),this.iy.push(i)),i.$a().Ua(t)}}class Ia extends Sa{constructor(){super(...arguments),this.qm=ua.Name,this.ny=.5}Jm(t,i,s,e){const h=this.Wm,r=Math.max(0,.5*Math.min(e.x,e.y)-h);ya(t,i,s,r,this.Fl,h);for(let i=0;i<t.length;i+=1){const e=t[i],n=e.Pm,o=e.Ge,a=this.Fl/100,l=((1-a)*this.ny+a)*r+e.getAnimatedExplosion()*h,u=ma(n,s,l);o.Ce(u).ya(0).Sa(0)}}getMinimumSize(){return n(200,200)}setLabelPosition(t){return this.ny=t,this.cs.vs(),this}getLabelPosition(){return this.ny}}const Pa={LabelsOnSides:Fa,LabelsInsideSlices:Ia},Da=t=>{if(ee(t)){const i=t.getThickness(),s=t.getFillStyle();if(G(s))return 1===i?uh:new dh({size:i,fillStyle:s,shape:"sphere"})}return uh};class Ba{constructor(t,i,s,e){this.oy=[],this.ly=t,this.uy=i,this.gy=s,this.my=e}yy(){this.oy.forEach((t=>t.$a())),this.gy&&this.gy();const t=[];return{add:(i,s)=>{t.push({instanceUniqueProperties:i,instanceSharedProperties:s})},finishPlot:()=>{const i=[];t.forEach((t=>{const s=i.find((i=>((t,i)=>{const s=Object.keys(t);for(const e of s)if(t[e]!==i[e])return!1;return!0})(i.sharedProperties,t.instanceSharedProperties)));s?s.instances.push(t.instanceUniqueProperties):i.push({sharedProperties:t.instanceSharedProperties,instances:[t.instanceUniqueProperties]})}));const s=this.oy.slice();i.forEach((t=>{let i=s.pop();i||(i=this.ly(),this.oy.push(i)),this.uy(i,t.instances,t.sharedProperties)})),s.forEach((t=>{t.dispose();const i=this.oy.indexOf(t);i<0?Ai(0,(()=>{})):this.oy.splice(i,1)})),this.my&&this.my(this.oy)}}}py(){this.oy.forEach((t=>{t.dispose()})),this.oy.length=0}}class Oa{constructor(t){this.Sy=[],this.by=t}yy(){return this.vy(),{add:()=>this.xy(),finishPlot:()=>{this.My()}}}xy(){let t=this.Sy.find((t=>t.isFree));return t||(t={isFree:!1,shape:this.by()},this.Sy.push(t)),t.isFree=!1,t.shape}vy(){this.Sy.forEach((t=>{t.isFree=!0}))}My(){this.Sy.filter((t=>t.isFree)).forEach((t=>{t.shape.dispose(),this.Sy.splice(this.Sy.indexOf(t),1)}))}py(){this.Sy.forEach((t=>t.shape.dispose())),this.Sy.length=0}}class La{constructor(t,i,e,h,r,n,o,a,l,u){this.I=new s,this.l=0,this.Pi=!0,this.Ii=!1,this.vs=t,this._y=i,this.Ay=e,this.wy=h,this.ky=r,this.Cy=n,this.sd=o,this.Ty=a,this.Fy=l,this.wc=u}setValue(t){return t===this.l||(this.l=t,this.vs(),this.I.emit("valueChange",this.l)),this}getValue(){return this.l}setTickStyle(t){return this.Ay="function"==typeof t?t(this.Ay):t,this.vs(),this}getTickStyle(){return this.Ay}setTickLength(t){return this.wy=t,this.vs(),this}getTickLength(){return this.wy}setGridStrokeStyle(t){return this.ky="function"==typeof t?t(this.ky):t,this.vs(),this}getGridStrokeStyle(){return this.ky}setTextPadding(t){return this.Cy=t,this.vs(),this}getTextPadding(){return this.Cy}setTextRotation(t){return this.sd=t,this.vs(),this}getTextRotation(){return this.sd}setTextFillStyle(t){return this.Ty="function"==typeof t?t(this.Ty):t,this.vs(),this}getTextFillStyle(){return this.Ty}setTextFont(t){return this.Fy="function"==typeof t?t(this.Fy):t,this.vs(),this}getTextFont(){return this.Fy}setTextFormatter(t){return this.wc=t,this.vs(),this}onValueChange(t){return this.I.on("valueChange",t)}offValueChange(t){return this.I.off(t,"valueChange")}dispose(){return this.Ii||(this.Ii=!0,this._y(),this.vs(),this.I.emit("dispose",this)),this}onDispose(t){return this.I.on("dispose",t)}offDispose(t){return this.I.off(t,"dispose")}setVisible(t){const i=this.Pi!==t;return this.Pi=t,i&&(this.I.emit("visibleStateChanged",this,this.Pi),this.vs()),this}getVisible(){return this.Pi}onVisibleStateChanged(t){return this.I.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.I.off(t,"visibleStateChanged")}}class Ra extends sh{constructor(t,i,s,e,h,r,n,o,a){super(t,i,s,e,o,{numeric:i.Iy({x:t.cs.ts.xAxis3DNumericTicks,y:t.cs.ts.yAxis3DNumericTicks,z:t.cs.ts.zAxis3DNumericTicks}),datetime:i.Iy({x:t.cs.ts.xAxis3DDateTimeTicks,y:t.cs.ts.yAxis3DDateTimeTicks,z:t.cs.ts.zAxis3DDateTimeTicks}),time:i.Iy({x:t.cs.ts.xAxis3DTimeTicks,y:t.cs.ts.yAxis3DTimeTicks,z:t.cs.ts.zAxis3DTimeTicks})},{type:"linear"}),this.Dd=[],this.Py=()=>{},this.Dy=()=>{},this.By=()=>{},this.Oy=()=>{},this.chart=t,this.dt=h,this.Ly=r,this.Ry=n,this.Ey=this.dt.ut;const l=this.bh.Iy({x:this.ts.xAxis3DStrokeStyle,y:this.ts.yAxis3DStrokeStyle,z:this.ts.zAxis3DStrokeStyle});this.zy=this.dt.hy([ba.InternalUI]).Be(l).Vy(Da(l)).setMouseInteractions(!1),this.Th=this.Ly.vr(this.Ry).setMouseInteractions(!1).Ae(i.Iy({x:t.cs.ts.xAxis3DTitleFillStyle,y:t.cs.ts.yAxis3DTitleFillStyle,z:t.cs.ts.zAxis3DTitleFillStyle})).Dh(i.Iy({x:t.cs.ts.xAxis3DTitleFont,y:t.cs.ts.yAxis3DTitleFont,z:t.cs.ts.zAxis3DTitleFont})),this.Ny=new Oa((()=>this.Ly.vr(this.Ry))),this.Gy=new Ba((()=>this.dt.Ig().setMouseInteractions(!1)),((t,i,s)=>{t.$a().Be(s.lineStyle),i.forEach((({positions:i})=>t.Ua(i)))})),this.hs=a,this.Lh=this.hs.xg([this.Th]).bs(e.effectsText),this.zy.setMouseEnterEventHandler(this.Py).setMouseLeaveEventHandler(this.Dy).setMouseDragEventHandler(this.By).setMouseDragStopEventHandler(this.Oy),s.rg=this}setTickStrategy(t,i){return super.Ah(t,i)}getTickStrategy(){return this.$e}addCustomTick(){const t=new La((()=>this.chart.cs.vs()),(()=>{const i=this.Dd.indexOf(t);i>=0&&this.Dd.splice(i,1)}),this.ts.xAxis3DNumericTicks.majorTickStyle.tickStyle,this.ts.xAxis3DNumericTicks.majorTickStyle.tickLength,this.ts.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this.ts.xAxis3DNumericTicks.majorTickStyle.tickPadding,this.ts.xAxis3DNumericTicks.majorTickStyle.labelRotation,this.ts.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this.ts.xAxis3DNumericTicks.majorTickStyle.labelFont,(t=>this.formatValue(t)));return this.Dd.push(t),this.chart.cs.vs(),t}setStrokeStyle(t){return this.zy.Be(t).Vy(Da(this.zy.Zl())),this.chart.cs.vs(),this}getStrokeStyle(){return this.zy.Zl()}setMouseInteractions(t){return this}setVisible(t){return super.setVisible(t),this.zy.setVisible(t),!1===t&&(this.Gy.py(),this.Ny.py()),this.Ly.vs(),this}kg(){return this.chart.getSeries()}Wy(t){return Math.abs(this.ut.q(t)*this.dt.Hy(1))}pr(t,i,s){const e=Math.abs(this.ut.q(i-t)*this.dt.Hy(1));return{min:t-s*e,max:i+s*e}}ir(t,i){return new Ea(i,t,this.Ly,this.Ry,this.dt)}sr(t,i){const s=this.Uy(i,t.l,t.gh.tr.tickLength,t.gh.tr.tickPadding);return t.Ge.Ce(s.labelPosition).va(s.labelAlignment),s}Uy(t,i,s,e){const{wuSize:h,start:r,end:o,tickDirection3D:a,tickDirection2D:l}=t,u=(i-this.ut.getInnerStart())/(this.ut.getInnerEnd()-this.ut.getInnerStart()),c=Li.addVec(qi(r,o,u),Li.multiplyVec(Li.multiply(a,this.dt.Hy(.5*this.zy.Zl().getThickness())),h)),d=Li.addVec(c,Li.multiplyVec(Li.multiply(a,this.dt.Hy(s)),h)),f=this.dt.$y(d)||n(0,0);return{labelPosition:cs(ut(f,this.chart.engine.scale,this.Ry),us(l,e)),labelAlignment:{x:-l.x,y:-l.y},posTickEnd3D:d,posTickStart3D:c,tickPositionRelative:u}}Tg(t,i,s){const{wuSize:e,start:h,end:r,tickDirection3D:o}=i,a=(t-this.ut.getInnerStart())/(this.ut.getInnerEnd()-this.ut.getInnerStart()),l=Li.addVec(qi(h,r,a),Li.multiplyVec(Li.multiply(o,this.dt.Hy(.5*this.zy.Zl().getThickness())),e)),u=Li.addVec(l,Li.multiplyVec(Li.multiply(o,this.dt.Hy(10)),e)),c=this.dt.$y(l)||n(0,0),d=this.dt.$y(u)||n(0,0);return this.Ly.Oe(this.Ry).Re(c).Le(d).Be(new se({fillStyle:new N({color:M(120*s)}),thickness:1}))}mr(t,i){return za(t,i,this.ut)}ke(t){if(!this.Pi)return;const i=Math.min(this.wh,this.kh),s=Math.max(this.wh,this.kh),e=this.Ey,h=l(e.x.it(),e.y.it(),e.z.it());let r,o;this.jy()?(r=l(e.x.getInnerEnd(),e.y.getInnerStart(),e.z.getInnerStart()),o=l(e.x.getInnerEnd(),e.y.getInnerStart(),e.z.getInnerEnd())):(r=l(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),o=this.bh.Yy(l(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),r));const a=this.bh.Md,u=this.dt.$y(r)||n(0,0),c=this.dt.$y(o)||n(0,0),d=qi(r,o,.5),f=Li.addVec(d,Li.multiplyVec(Li.multiply(a,-1),h)),g=this.dt.$y(d)||n(0,0),m=this.dt.$y(f)||n(0,0),y=os(ds(ut(g,this.chart.engine.scale,this.Ry),ut(m,this.chart.engine.scale,this.Ry)));this.zy.$a().Ua([r,o]);const{gridlinePositionA:p,gridlinePositionB:S,gridlinePositionC:b}=this.bh.Xy(t),v=t=>({x:-1===t.x?this.Ey.x.getInnerStart():1===t.x?this.Ey.x.getInnerEnd():0,y:-1===t.y?this.Ey.y.getInnerStart():1===t.y?this.Ey.y.getInnerEnd():0,z:-1===t.z?this.Ey.z.getInnerStart():1===t.z?this.Ey.z.getInnerEnd():0}),x=v(p),M=v(S),_=v(b),A={physicalAxisSize:ls(ds(u,c)),wuSize:h,start:r,end:o,tickDirection3D:a,tickDirection2D:y,gridlinePositionA:x,gridlinePositionB:M,gridlinePositionC:_},w=this.$h(A),k=this.Gy.yy();for(const[t,i]of this.je)for(const[,s]of i){const i=w.get(s);if(!i)continue;const e=this.Zy(A,i);k.add({positions:[e.tickStroke.start,e.tickStroke.end]},{lineStyle:t.tr.tickStyle}),e.gridStroke&&k.add({positions:e.gridStroke},{lineStyle:t.tr.gridStrokeStyle})}const C=this.Ny.yy(),T={x:0,y:0};this.Dd.forEach((t=>{if(!t.Pi||t.l<i||t.l>s)return;const e=this.Uy(A,t.l,t.wy,t.Cy),h=this.Zy(A,e),r=C.add().Ce(e.labelPosition).va(e.labelAlignment).Ae(t.Ty).Dh(t.Fy).Fh(t.wc(t.l)).Bh(t.sd).Is().$t();T.x=Math.max(T.x,r.x),T.y=Math.max(T.y,r.y),k.add({positions:[h.tickStroke.start,h.tickStroke.end]},{lineStyle:t.Ay}),h.gridStroke&&k.add({positions:h.gridStroke},{lineStyle:t.ky})})),C.finishPlot(),k.finishPlot();const F=this.rr(((t,i)=>{const s=i.Ge.$t();return t.x=Math.max(t.x,s.x),t.y=Math.max(t.y,s.y),t}),{x:T.x,y:T.y}),I=Math.atan((c.y-u.y)/(c.x-u.x));this.Th.va({x:0,y:0}).Bh(180*-I/Math.PI);const P=Li.addVec(d,Li.multiplyVec(Li.multiply(a,this.dt.Hy(.5*this.zy.Zl().getThickness()+this.ar(((t,i)=>Math.max(t,i.tickLength)),0))),h)),D=this.dt.$y(P)||n(0,0),B=cs(ut(D,this.chart.engine.scale,this.Ry),cs(cs(fs(F,y),us(y,this.ar(((t,i)=>Math.max(t,i.labelPadding)),0))),fs(us(this.Th.Is().$t(),.5),y)));this.Th.Ce(B),this.zy.Ky={overrideFollowing:!1,skipMousePicking:!1}}Zy(t,i){const{gridlinePositionA:s,gridlinePositionB:e,gridlinePositionC:h}=t,r=i.posTickStart3D,n=i.posTickEnd3D,o=i.tickPositionRelative;let a;return Ot(o,0)||Ot(o,1)||(a=[this.qy()?{...s,x:r.x}:this.Jy()?{...s,y:r.y}:this.jy()?{...s,z:r.z}:{x:0,y:0,z:0},this.qy()?{...e,x:r.x}:this.Jy()?{...e,y:r.y}:this.jy()?{...e,z:r.z}:{x:0,y:0,z:0},this.qy()?{...h,x:r.x}:this.Jy()?{...h,y:r.y}:this.jy()?{...h,z:r.z}:{x:0,y:0,z:0}]),{gridStroke:a,tickStroke:{start:r,end:n}}}Rh(){super.Rh(),this.Gy.py(),this.Ny.py()}qy(){return this.bh.qy()}Jy(){return this.bh.Jy()}jy(){return this.bh.jy()}}class Ea extends eh{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Cd=h}}const za=(t,i,s)=>Lt(t+.1*(i-t)+Math.abs(s.it())/100*Math.sign(i-t),Math.min(t,i),Math.max(t,i)),Va=(t,i,s,e)=>({lr:()=>{const s=t();let e;for(const t of s){if(!t.Qy())continue;const s=i(t);e=void 0===s?e:void 0!==e?Math.min(e,s):s}return e},ur:()=>{const i=t();let e;for(const t of i){if(!t.Qy())continue;const i=s(t);e=void 0===i?e:void 0!==e?Math.max(e,i):i}return e},dr:()=>{const i=t();let s;for(const t of i){if(!t.Qy())continue;const i=e(t);s=void 0===i?s:void 0!==s?Math.max(s,i):i}return s}}),Na=t=>({...Va(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.dr().y)),Iy:t=>t.y,Yy:(t,i)=>({x:i.x,y:t.y,z:i.z}),Md:l(-1,0,0),Xy:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:l(i.x,0,i.z),gridlinePositionB:l(i.x,0,-i.z),gridlinePositionC:l(-i.x,0,-i.z)}},qy:()=>!1,Jy:()=>!0,jy:()=>!1}),Ga=t=>({...Va(t,(t=>t.getZMin()),(t=>t.getZMax()),(t=>t.dr().z)),Iy:t=>t.z,Yy:(t,i)=>({x:i.x,y:i.y,z:t.z}),Md:l(1,0,0),Xy:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:l(i.x,-i.y,0),gridlinePositionB:l(i.x,i.y,0),gridlinePositionC:l(-i.x,i.y,0)}},qy:()=>!1,Jy:()=>!1,jy:()=>!0});class Wa extends Xs{constructor(t,i,s,e,h){super(t,i,e,h),this.tp=jn,this.ip=!0,this.sp=!0,this.Ji=t,this.dt=s,this.ss=new Map,this.onMouseWheel(this.Ji.ep),this.onMouseDrag(this.Ji.hp),this.onTouchStart(this.Ji.rp.onTouchStart),this.onTouchMove(this.Ji.rp.onTouchMove),this.onTouchEnd(this.Ji.rp.onTouchEnd)}setAutoScrollingEnabled(t){return this.ip=t,this.Ji.cs.vs(),this}getAutoScrollingEnabled(){return this.ip}setColorShadingStyle(t){return this.tp=t,this.ss.forEach(((i,s)=>s.np(t))),this.dt.vs(),this}getColorShadingStyle(){return this.tp}setDepthTestEnabled(t){return this.sp=t,this.ss.forEach(((i,s)=>s.op(t))),this.dt.vs(),this}getDepthTestEnabled(){return this.sp}ap(){}ke(){}my(){}getXMax(){const t=this.ka;return t?t.wt():void 0}getXMin(){const t=this.ka;return t?t.At():void 0}getYMax(){const t=this.ka;return t?t.Ct():void 0}getYMin(){const t=this.ka;return t?t.kt():void 0}getZMax(){const t=this.ka;return t?t.lp():void 0}getZMin(){const t=this.ka;return t?t.up():void 0}dr(){const t=this.ka;return t?l(t.hl(),t.rl(),t.cp()):l(0,0,0)}}class Ha extends Wa{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Ms="Box Series 3D",this.dp=.25,this.dd=()=>bi(this.ve),this.ve=Mi(this.ts.boxSeries3DFillStyle,h),this.ka=this.dt.gp().op(this.sp).Ae(this.ve).fp(this.dp).ds(this.getHighlight()),this.fs(this.ka)}invalidateData(t){const i=t.length;if(0===i)return this;const s=t[0];if(!s)return this;let e;if("xMin"in s||"yMin"in s||"zMin"in s||"xMax"in s||"yMax"in s||"zMax"in s){e=[];for(let s=0;s<i;s+=1){const i=t[s],h="xMin"in i&&"xMax"in i,r="yMin"in i&&"yMax"in i,n="zMin"in i&&"zMax"in i;e[s]={color:i.color,value:i.value,id:i.id,xCenter:h?(i.xMin+i.xMax)/2:void 0,yCenter:r?(i.yMin+i.yMax)/2:void 0,zCenter:n?(i.zMin+i.zMax)/2:void 0,xSize:h?i.xMax-i.xMin:void 0,ySize:r?i.yMax-i.yMin:void 0,zSize:n?i.zMax-i.zMin:void 0}}}else e=t;return this.ka.mp(e.slice()),this.Ji.cs.vs(),this}setFillStyle(t){return this.ve="function"==typeof t?t(this.ve):t,this.ka.Ae(t),this.Ji.cs.vs(),this}getFillStyle(){return this.ve}setRoundedEdges(t){return void 0!==t&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.dp=void 0!==t?Lt(t,0,1):void 0,this.ka.fp(this.dp),this.dt.vs(),this}getRoundedEdges(){return this.dp}Qy(){return this.ip&&this.getVisible()}Te(t,i){t.ds(i),this.Ji.cs.vs()}ke(){super.ke(),this.ka.Is(!1)}attach(t,i){return super.attach(t,i),Si(t,this.ts,{fill:this.ve}),this}}class Ua extends Wa{constructor(t,i,s,e,h){super(t,i,s,e,h),this.dd=()=>bi(this.Xl.getFillStyle())}setStrokeStyle(t){this.Xl="function"==typeof t?t(this.Xl):t;const i=this.Xl;return this.ka.Be(i),this.dt.vs(),this}getStrokeStyle(){return this.Xl}add(t){return(t=Array.isArray(t)?t:[t])?(this.ka.Ua(t.slice()),this.dt.vs(),this):this}clear(){return this.ka.$a(),this}getPointAmount(){const t=this.ka;return t.ja()+t.Ya()}Qy(){return this.ip&&this.getPointAmount()>0&&this.getVisible()}Te(t,i){t.ds(i),this.dt.vs()}attach(t,i){return super.attach(t,i),Si(t,this.ts,{stroke:this.Xl}),this}}class $a extends Ua{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Ms="Line Series 3D",this.Xl=Mi(e.lineSeries3DStrokeStyle,h),this.yp=Th.pointStyle3D,this.pp(this.Xl),this.ka=this.dt.hy([ba.UserSeries]).op(this.sp).Be(this.Xl).Vy(this.yp).ds(this.getHighlight()),this.fs(this.ka)}setStrokeStyle(t){super.setStrokeStyle(t),this.pp(this.Xl);const i=this.yp;return this.ka.Vy(i),this}pp(t){const i=new ph.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.yp=i}}class ja extends Ua{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Ms="Point Line Series 3D",this.dd=()=>bi(this.Xl.getFillStyle())||bi(this.yp.getFillStyle()),this.yp=Mi(e.pointLineSeries3DPointStyle,h),this.Xl=Mi(e.lineSeries3DStrokeStyle,h),this.Sp(),this.ka=this.dt.hy([ba.UserSeries]).op(this.sp).Be(this.Xl).Vy(this.yp).ds(this.getHighlight()),this.fs(this.ka)}setPointStyle(t){return this.yp="function"==typeof t?t(this.yp):t,this.Sp(),this.ka.Vy(this.yp),this.dt.vs(),this}getPointStyle(){return this.yp}setStrokeStyle(t){super.setStrokeStyle(t);const i=this.Xl,s=Math.abs(i.getThickness()),e=this.yp;s>e.getSize()&&(this.yp=e.setSize(s)),this.Sp();const h=this.yp;return this.ka.Vy(h),this.dt.vs(),this}Sp(){const t=this.yp,i=t.getSize();this.yp=t.setSize(i)}Te(t,i){t.ds(i),this.dt.vs()}}class Ya extends Wa{constructor(t,i,s,e,h,r){super(t,i,s,e,h)}add(t){return(t=Array.isArray(t)?t:[t])?(this.ka.Ua(t.slice()),this.dt.vs(),this):this}clear(){return this.ka.$a(),this}getPointAmount(){const t=this.ka;return t.ja()+t.Ya()}Qy(){return this.ip&&this.getPointAmount()>0&&this.getVisible()}Te(t,i){t.ds(i),this.dt.vs()}attach(t,i){return super.attach(t,i),Si(t,this.ts,{point3D:this.bp}),this}}class Xa extends Ya{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Ms="Point Series 3D",this.dd=()=>bi(this.bp.getFillStyle());const n=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.Ji.getSeries().length;this.bp=Mi(e.pointSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.ka=this.dt.xp(o).op(this.sp).vp(this.bp).ds(this.getHighlight()),this.fs(this.ka)}setPointStyle(t){this.bp="function"==typeof t?t(this.bp):t;const i=this.bp;return this.ka.vp(i),this.dt.vs(),this}getPointStyle(){return this.bp}}class Za extends Ya{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Ms="Point Cloud Series 3D",this.dd=()=>bi(this.bp.getFillStyle());const n=this.Ji.getSeries().length;this.bp=Mi(e.pointCloudSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.ka=this.dt.xp(o).vp(this.bp).ds(this.getHighlight()),this.fs(this.ka)}setPointStyle(t){this.bp="function"==typeof t?t(this.bp):t;const i=this.bp;return this.ka.vp(i),this.dt.vs(),this}getPointStyle(){return this.bp}}const Ka={Triangulated:Xa,Pixelated:Za};class qa extends na{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.Mp=[],this._p=0,this.Ap=t=>{const i=this.Mp.indexOf(t);i>=0&&(this.Mp.splice(i,1),this.I.emit("seriesDispose",this,t))},this.wp=()=>{this._p+=1},this.kp=()=>{this._p-=1},this.onSeriesBackgroundMouseEnter=t=>this.I.on("mouseEnterSeriesBackground",t),this.onSeriesBackgroundMouseLeave=t=>this.I.on("mouseLeaveSeriesBackground",t),this.onSeriesBackgroundMouseMove=t=>this.I.on("mouseMoveSeriesBackground",t),this.onSeriesBackgroundMouseDown=t=>this.I.on("mouseDownSeriesBackground",t),this.onSeriesBackgroundMouseUp=t=>this.I.on("mouseUpSeriesBackground",t),this.onSeriesBackgroundMouseClick=t=>this.I.on("mouseClickSeriesBackground",t),this.onSeriesBackgroundMouseDoubleClick=t=>this.I.on("mouseDoubleClickSeriesBackground",t),this.onSeriesBackgroundMouseDragStart=t=>this.I.on("mouseDragStartSeriesBackground",t),this.onSeriesBackgroundMouseDrag=t=>this.I.on("mouseDragSeriesBackground",t),this.onSeriesBackgroundMouseDragStop=t=>this.I.on("mouseDragStopSeriesBackground",t),this.onSeriesBackgroundMouseWheel=t=>this.I.on("mouseWheelSeriesBackground",t),this.onSeriesBackgroundTouchStart=t=>this.I.on("touchStartSeriesBackground",t),this.onSeriesBackgroundTouchMove=t=>this.I.on("touchMoveSeriesBackground",t),this.onSeriesBackgroundTouchEnd=t=>this.I.on("touchEndSeriesBackground",t),this.offSeriesBackgroundMouseEnter=t=>this.I.off(t,"mouseEnterSeriesBackground"),this.offSeriesBackgroundMouseLeave=t=>this.I.off(t,"mouseLeaveSeriesBackground"),this.offSeriesBackgroundMouseMove=t=>this.I.off(t,"mouseMoveSeriesBackground"),this.offSeriesBackgroundMouseDown=t=>this.I.off(t,"mouseDownSeriesBackground"),this.offSeriesBackgroundMouseUp=t=>this.I.off(t,"mouseUpSeriesBackground"),this.offSeriesBackgroundMouseClick=t=>this.I.off(t,"mouseClickSeriesBackground"),this.offSeriesBackgroundMouseDoubleClick=t=>this.I.off(t,"mouseDoubleClickSeriesBackground"),this.offSeriesBackgroundMouseDragStart=t=>this.I.off(t,"mouseDragStartSeriesBackground"),this.offSeriesBackgroundMouseDrag=t=>this.I.off(t,"mouseDragSeriesBackground"),this.offSeriesBackgroundMouseDragStop=t=>this.I.off(t,"mouseDragStopSeriesBackground"),this.offSeriesBackgroundMouseWheel=t=>this.I.off(t,"mouseWheelSeriesBackground"),this.offSeriesBackgroundTouchStart=t=>this.I.off(t,"touchStartSeriesBackground"),this.offSeriesBackgroundTouchMove=t=>this.I.off(t,"touchMoveSeriesBackground"),this.offSeriesBackgroundTouchEnd=t=>this.I.off(t,"touchEndSeriesBackground"),this.Cp=this.hs.xg()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.Mp.forEach((i=>i.setAnimationHighlight(t))),this}Tp(t,i){this.Cp.gs([i]),t.setMouseMoveEventHandler(((t,i)=>{this.I.emit("mouseMoveSeriesBackground",this,i)})).setMouseEnterEventHandler(((t,i)=>{this.I.emit("mouseEnterSeriesBackground",this,i)})).setMouseLeaveEventHandler(((t,i)=>{this.I.emit("mouseLeaveSeriesBackground",this,i)})).setMouseDownEventHandler(((t,i)=>this.I.emit("mouseDownSeriesBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.I.emit("mouseUpSeriesBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.I.emit("mouseClickSeriesBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.I.emit("mouseDoubleClickSeriesBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.I.emit("mouseWheelSeriesBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.I.emit("mouseDragStartSeriesBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.I.emit("mouseDragSeriesBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.I.emit("mouseDragStopSeriesBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>{this.I.emit("touchStartSeriesBackground",this,i)})).setTouchMoveEventHandler(((t,i)=>{this.I.emit("touchMoveSeriesBackground",this,i)})).setTouchEndEventHandler(((t,i)=>{this.I.emit("touchEndSeriesBackground",this,i)}))}setSeriesBackgroundFillStyle(t){return this.Fp.Ae(t),this.cs.vs(),this}getSeriesBackgroundFillStyle(){return this.Fp.Ih()}setSeriesBackgroundStrokeStyle(t){return this.Ip._e(t),this.cs.vs(),this}getSeriesBackgroundStrokeStyle(){return this.Ip.jn()}setSeriesBackgroundEffect(t){return this.Cp.bs(t),this.cs.vs(),this}getSeriesBackgroundEffect(){return this.Cp.xs()}Pp(t){this.Mp.push(t),t.onMouseEnter(this.wp),t.onMouseLeave(this.kp),void 0!==this.Dp&&t.setHighlightOnHover(this.Dp),this.I.emit("seriesAdded",this,t)}vd(){return this.Mp}Bp(){return this._p}setSeriesHighlightOnHover(t){return this.Dp=t,this.Mp.forEach((i=>i.setHighlightOnHover(t))),this}dispose(){return this.Mp.slice().forEach(Dt),super.dispose()}}const Ja=Li.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class Qa{constructor(t,i,s,e){this.Op=!0,this.Lp=!0,this.Rp=2*-Math.PI/2160,this.Ep=2*Math.PI/2160,this.zp=.1,this.Vp=1*Math.PI/180,this.Np=t,this.Gp=i,this.Wp=s,this.$y=e}getDefaultCameraConfiguration(t){const i={direction:Ja,location:Li.multiply(Ja,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:i.direction,cameraLocation:i.location})||i}applyCameraInteractions(t,i){let s={direction:t.cameraDirection,location:t.cameraLocation};return i.forEach((t=>{"rotate"===t.type?s=this.Hp(s,t):"wheel-zoom"===t.type?s=this.$p(s,t):"rotate+zoom"===t.type?s=this.jp(s,t):"fixed-rotate"===t.type?s=this.Yp(s,t):"move"===t.type&&(s=this.Xp(s,t))})),this.Op?s=this.Zp(t.boundingBox,s):this.Lp&&(s=this.Kp(t.boundingBox,s)),s}Hp(t,i){const{rotation:s}=i,e=t.location,h=Li.multiply(Li.normalize(t.location),-1),{Right:r,Up:n}=this.qp(h);let o=e;const a=this.Jp(h),l=s.x*this.Rp*a;o=Li.rotateAroundAxis(o,n,l);const u=(s.y>0?1:-1)*Math.min(Math.abs(s.y)*this.Ep,a-this.Vp);return 0!==u&&(o=Li.rotateAroundAxis(o,r,u)),{location:o,direction:Li.multiply(Li.normalize(o),-1)}}$p(t,i){const{deltaY:s}=i;this.Op&&this.Qp(!1);const e=t.location,h=Li.multiply(Li.normalize(e),-1),r=s*this.zp,n=Li.length(e)*-r;return{direction:h,location:Li.addVec(e,Li.multiply(h,n))}}jp(t,i){const{rotation:s,cameraDistance:e}=i;this.Op&&this.Qp(!1);let h=this.Hp(t,{type:"rotate",rotation:s});const r=h.location,n=Li.multiply(Li.normalize(r),-1),o=Li.multiply(n,-e);return h={direction:Li.multiply(Li.normalize(o),-1),location:o},h}Yp(t,i){this.Op&&this.Qp(!1);const{rotation:s}=i,e=t.location,h=t.direction,{Right:r,Up:n}=this.qp(h),o=s.x*this.Rp;let a=Li.normalize(Li.rotateAroundAxis(h,n,o));const l=s.y*this.Ep;return a=Li.normalize(Li.rotateAroundAxis(a,r,l)),{location:e,direction:a}}Xp(t,i){this.Op&&this.Qp(!1),this.Lp=!1;const{amountRight:s,amountForward:e}=i,h=t.location,r=t.direction,{Right:n}=this.qp(r);return{location:Li.addVec(h,Li.multiply(r,.01*e),Li.multiply(n,.01*s)),direction:r}}boundingBoxChanged(t){const i={location:t.cameraLocation,direction:Li.multiply(Li.normalize(t.cameraLocation),-1)};return this.Op?this.Zp(t.boundingBox,i):this.Kp(t.boundingBox,i)}cameraLocationChanged(t){const i={location:t.cameraLocation,direction:Li.multiply(Li.normalize(t.cameraLocation),-1)};return this.Op?this.Zp(t.boundingBox,i):this.Kp(t.boundingBox,i)}viewportChanged(t){const i={location:t.cameraLocation,direction:Li.multiply(Li.normalize(t.cameraLocation),-1)};if(this.Op)return this.Zp(t.boundingBox,i)}Zp(t,i,s){let e=i;s=void 0!==s?s:0,e=this.tS(t,e,100,20,1,s,5);const h=this.Jp(e.direction);return e=this.iS(e,this.sS(t,e,100,1),h),e}tS(t,i,s,e,h,r,n){return tl(r,n,(t=>({direction:i.direction,location:Li.multiply(i.direction,-t)})),(i=>this.eS(t,i)),s,h,"linear",e)}sS(t,i,s,e){const{Right:h,Left:r,Up:n,Down:o}=this.qp(i.direction),a=this.hS(t,!1,i);let l=i;const u=e,c=.1;return Math.abs(a.bottom-a.top)>u&&(l=a.bottom<a.top?il(0,c,(t=>({location:l.location,direction:Li.normalize(Li.lerp(l.direction,o,t))})),(i=>this.rS(t,i)),0,u,!0,s):il(0,c,(t=>({location:l.location,direction:Li.normalize(Li.lerp(l.direction,n,t))})),(i=>this.rS(t,i)),0,u,!0,s)),Math.abs(a.left-a.right)>u&&(l=a.left<a.right?il(0,c,(t=>({location:l.location,direction:Li.normalize(Li.lerp(l.direction,r,t))})),(i=>this.nS(t,i)),0,u,!0,s):il(0,c,(t=>({location:l.location,direction:Li.normalize(Li.lerp(l.direction,h,t))})),(i=>this.nS(t,i)),0,u,!0,s)),l}eS(t,i){const s=this.hS(t,!0,i);return Math.min(s.left+s.right,s.top+s.bottom)}nS(t,i){const s=this.hS(t,!1,i);return Math.abs(s.left-s.right)}rS(t,i){const s=this.hS(t,!1,i);return Math.abs(s.top-s.bottom)}hS(t,i,s){const e=Ji(this.oS(t,i,s).map((t=>ut(t,this.Np,this.Gp))));return{left:e.min.x,right:this.Gp.x.getInnerEnd()-e.max.x,top:this.Gp.y.getInnerEnd()-e.max.y,bottom:e.min.y}}oS(t,i,s){const e=this.Wp,h=l(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),r=l(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),n=[],o=i?16:4,a=(h.x+r.x)/2,u=(h.z+r.z)/2,c=Math.sqrt(2)*(r.x-a),d=Math.sqrt(2)*(r.z-u);return[h.y,r.y].forEach((t=>{for(let i=0;i<o;i+=1){const s=Math.PI/4+2*Math.PI*i/o,e=a+Math.cos(s)*c,h=u+Math.sin(s)*d;n.push({x:e,y:t,z:h})}})),n.map((t=>this.$y(t,s))).filter((t=>void 0!==t))}Kp(t,i){const s=Li.length(i.location),e=this.aS(t);return s<e?{direction:i.direction,location:Li.multiply(i.direction,-e)}:i}aS(t){return.8*Math.sqrt(t.x**2+t.y**2+t.z**2)}qp(t){const i=l(0,1,0),s=Li.normalize(Li.cross(i,Li.multiply(t,-1)));let e=Li.cross(s,t);return e.y=Math.abs(e.y),e=Li.normalize(e),{Right:s,Up:e,Down:Li.multiply(e,-1),Left:Li.multiply(s,-1)}}Jp(t){const i={x:0,y:1,z:0},s=Li.angle(t,i),e=Li.angle(t,Li.multiply(i,-1));return Math.min(s,e)}iS(t,i,s){return{location:Li.lerp(t.location,i.location,s),direction:Li.normalize(Li.lerp(t.direction,i.direction,s))}}Qp(t){return this.Op=t,this}lS(){return this.Op}}const tl=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=(i+t)/2;do{const o=s(u);if(a={value:u,result:o,score:e(o)},Math.abs(a.score-h)<=r)break;const c=a.score>h;c&&"linear"===n||!c&&"reversed"===n?(u=(a.value+t)/2,i=a.value):(u=(a.value+i)/2,t=a.value),l+=1}while(l<o);return a.result},il=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=t;do{const c=s(u),d=e(c);if(void 0===a||Math.abs(d-h)<Math.abs(a.score-h)){if(a={value:u,result:c,score:e(c)},Math.abs(a.score-h)<=r)break}else if(n)break;l+=1,u+=1/(o-1)*(i-t)}while(l<o);return a.result};class sl extends Wa{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Ms="Surface Grid Series 3D",this.dd=()=>bi(this.ve),this.tp=Hn;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.Ji.getSeries().length;this.ve=Mi(this.ts.surfaceGridSeries3DFillStyle,n),this.cu=Mi(this.ts.surfaceGridSeries3DWireframeStyle,n);const o=e.start||{x:0,z:0},a=e.end?{x:(e.end.x-o.x)/e.columns,z:(e.end.z-o.z)/e.rows}:e.step||{x:1,z:1},l={heatmapDataType:"intensity",dataOrder:e.dataOrder||"columns",columns:e.columns,rows:e.rows,start:o,step:a};this.wn=l,this.ka=this.dt.uS(l).Ae(this.ve).du(this.cu).np(this.tp).ds(this.getHighlight()),this.fs(this.ka)}setFillStyle(t){return this.ve="function"==typeof t?t(this.ve):t,this.ka.Ae(this.ve),this.dt.vs(),this}getFillStyle(){return this.ve}setWireframeStyle(t){return this.cu="function"==typeof t?t(this.cu):t,this.ka.du(this.cu),this.dt.vs(),this}getWireframeStyle(){return this.ka.fu()}setIntensityInterpolation(t){return t=t||"disabled",this.ka.cS(t),this.dt.vs(),this}getIntensityInterpolation(){return this.ka.dS()}invalidateIntensityValues(t){if(Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.wn.dataOrder?t.length:t[0].length,rows:"rows"===this.wn.dataOrder?t.length:t[0].length},s="columns"===this.wn.dataOrder?this.wn.columns:this.wn.rows,e="columns"===this.wn.dataOrder?this.wn.rows:this.wn.columns;if(i.x>s||i.y>e){if(!0===this.Ji.mf.Bn){const t=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.wn.columns}x${this.wn.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;kt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.ka.fS({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.wn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.wn.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.wn.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.wn.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.wn.dataOrder?this.wn.columns:this.wn.rows)-1,o=("columns"===this.wn.dataOrder?this.wn.rows:this.wn.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.Ji.mf.Bn){const s=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.wn.columns}x${this.wn.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;kt.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.ka.fS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.dt.vs(),this}invalidateHeightMap(t){if(Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.wn.dataOrder?t.length:t[0].length,rows:"rows"===this.wn.dataOrder?t.length:t[0].length},s="columns"===this.wn.dataOrder?this.wn.columns:this.wn.rows,e="columns"===this.wn.dataOrder?this.wn.rows:this.wn.columns;if(i.x>s||i.y>e){if(!0===this.Ji.mf.Bn){const t=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.wn.columns}x${this.wn.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;kt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.ka.gS({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.wn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.wn.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.wn.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.wn.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.wn.dataOrder?this.wn.columns:this.wn.rows)-1,o=("columns"===this.wn.dataOrder?this.wn.rows:this.wn.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.Ji.mf.Bn){const s=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.wn.columns}x${this.wn.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;kt.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.ka.gS({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.dt.vs(),this}setCullMode(t){return this.ka.mS("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.ka.yS()}ap(){}ke(){}my(){}Qy(){return this.ip&&this.getVisible()}Te(t,i){t.ds(i),this.dt.vs()}}class el extends Wa{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Ms="Surface Grid Series 3D",this.dd=()=>bi(this.ve),this.tp=Hn;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.Ji.getSeries().length;this.ve=Mi(this.ts.surfaceScrollingGridSeries3DFillStyle,n),this.cu=Mi(this.ts.surfaceScrollingGridSeries3DWireframeStyle,n);const o=e.start||{x:0,z:0},a=e.step||{x:1,z:1},l={heatmapDataType:"intensity",scrollDimension:e.scrollDimension||"columns",columns:e.columns,rows:e.rows,start:o,step:a};this.wn=l,this.ka=this.dt.pS(l).Ae(this.ve).du(this.cu).np(this.tp).ds(this.getHighlight()),this.fs(this.ka)}setFillStyle(t){return this.ve="function"==typeof t?t(this.ve):t,this.ka.Ae(this.ve),this.dt.vs(),this}getFillStyle(){return this.ve}setWireframeStyle(t){return this.cu="function"==typeof t?t(this.cu):t,this.ka.du(this.cu),this.dt.vs(),this}getWireframeStyle(){return this.ka.fu()}setIntensityInterpolation(t){return t=t||"disabled",this.ka.cS(t),this.dt.vs(),this}getIntensityInterpolation(){return this.ka.dS()}clear(){return this.ka.$a(),this.dt.vs(),this}addValues(t){if(!t)return this;let i=t.yValues,s=t.intensityValues;if(!i&&!s)return this;if(i&&0===i.length&&(i=void 0),s&&0===s.length&&(s=void 0),i){const t=i[0].length,s=0+t-1,e="columns"===this.wn.scrollDimension?this.wn.rows:this.wn.columns;if(s>e-1){if(!0===this.Ji.mf.Bn){const i=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.\nGrid was created with ${e} ${"columns"===this.wn.scrollDimension?"rows":"columns"}, input yValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;kt.console.warn(i)}const s=[];for(let t=0;t<i.length;t+=1)s[t]=i[t].slice(0,e+1);i=s}}if(s){const t=s[0].length,i=0+t-1,e="columns"===this.wn.scrollDimension?this.wn.rows:this.wn.columns;if(i>e-1){if(!0===this.Ji.mf.Bn){const i=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.\nGrid was created with ${e} ${"columns"===this.wn.scrollDimension?"rows":"columns"}, input intensityValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;kt.console.warn(i)}const i=[];for(let t=0;t<s.length;t+=1)i[t]=s[t].slice(0,e+1);s=i}}if(i&&s){const t=i.length,e=s.length;if(t!==e){if(!0===this.Ji.mf.Bn){const i=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.\nyValues: ${t}\nintensityValues: ${e}\nData will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;kt.console.warn(i)}t>e?i=i.slice(0,e):s=s.slice(0,t)}}const e=i?i.length:null==s?void 0:s.length,h=i?i[0].length:null==s?void 0:s[0].length;return this.ka.SS({startPrimary:0,startSecondary:0,lengthPrimary:e,lengthSecondary:h,heightMapValues:i,intensityValues:s}),this.dt.vs(),this}setCullMode(t){return this.ka.mS("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.ka.yS()}ap(){}ke(){}my(){}Qy(){return this.ip&&this.getVisible()}Te(t,i){t.ds(i),this.dt.vs()}}const hl=t=>!!(t&&"object"==typeof t&&"id"in t&&"chart"in t&&t.chart instanceof nl),rl=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y&&"z"in t&&"number"==typeof t.z);class nl extends qa{constructor(t,i,s,e,h,r,o){var a;let u;super(t,i,s,i.om("chart3D bg",0),e,i.cs.ts.chart3DBackgroundFillStyle,i.cs.ts.chart3DBackgroundStrokeStyle,i.cs.ts.chart3DTitleFont,i.cs.ts.chart3DTitleFillStyle,r),this.bS=1,this.vS=[],this.xS=2,this.MS=!0,this._S=!0,this.AS=!0,this.wS=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.axes={id:"axes",chart:this},this.world={id:"world",chart:this},this.Ur=[],this.Zr=()=>{const t=this.dt.kS();this.TS.CS(t),this.FS.CS(t);const i=this.IS.viewportChanged(this.PS());i&&this.DS(i),this.cs.vs()},this.hp=(t,i,s,e,h)=>{if(this.AS){const t=h;this.vS.push({type:"rotate",rotation:t}),this.cs.vs(),ri(i)}},this.ep=(t,i)=>{if(this._S){if(this.MS)Math.sign(this.wS)!==Math.sign(i.deltaY)?this.wS=_i(i):this.wS+=_i(i);else{const t=_i(i);this.vS.push({type:"wheel-zoom",deltaY:t})}this.cs.vs(),ri(i)}},this.mf.Cn||this.mf.kn||this.cs.An(1),this.dm.Fh("Chart3D"),this.BS=s.d3(),this.BS.x.X(-1,1),this.BS.y.X(-1,1),this.BS.z.X(-1,1),this.dt=i.OS("chart3D layer3D",0,this.BS),this.TS=i.LS("chart3D series bg",0),this.FS=i.Xm("chart3D axis ui",1),this.RS={x:new Ra(this,(a=()=>this.Mp,{...Va(a,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.dr().x)),Iy:t=>t.x,Yy:(t,i)=>({x:t.x,y:i.y,z:i.z}),Md:l(0,-1,0),Xy:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:l(0,i.y,i.z),gridlinePositionB:l(0,i.y,-i.z),gridlinePositionC:l(0,-i.y,-i.z)}},qy:()=>!0,Jy:()=>!1,jy:()=>!1}),this.BS.x,this.ts,this.dt,this.FS,this.pixelScale,!1,this.hs),y:new Ra(this,Na((()=>this.Mp)),this.BS.y,this.ts,this.dt,this.FS,this.pixelScale,!1,this.hs),z:new Ra(this,Ga((()=>this.Mp)),this.BS.z,this.ts,this.dt,this.FS,this.pixelScale,!1,this.hs)},this.ES=this.dt.hy([ba.InternalUI]).setMouseInteractions(!1),this.setBoundingBoxStrokeStyle(this.ts.chart3DBoundingBoxStrokeStyle),this.Fp=this.TS.Fc(this.engine.scale,lr.Simple).Ae(this.ts.chart3DSeriesBackgroundFillStyle)._e(rt).setMouseInteractions(!0),this.Ip=this.TS.Fc(this.engine.scale,lr.Simple).Ae(R)._e(this.ts.chart3DSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.Tp(this.Fp,this.Ip),this.zS({x:1,y:1,z:1},!0),this.IS=new Qa(this.engine.scale,this.pixelScale,this.BS,((t,i)=>(i&&this.DS(i),this.dt.$y(t)))),this.VS=this.IS.getDefaultCameraConfiguration(this.NS(this.GS)),this.DS(this.VS),this.rp=qs(new te(((t,i,s)=>{u={locationOne:i,locationTwo:s,cameraLocation:this.dt.getCameraLocation()}}),((t,i,s,e,h,r)=>{if(!this.AS&&!this._S)return;const o=(u.locationOne.x-u.locationTwo.x)**2+(u.locationOne.y-u.locationTwo.y)**2,a=(i.x-s.x)**2+(i.y-s.y)**2,l=Li.length(u.cameraLocation),c=o/a*l,d=n((e.x+h.x)/2,(e.y+h.y)/2);this.vS.push({type:"rotate+zoom",rotation:this.AS?d:{x:0,y:0},cameraDistance:this._S?c:l}),this.cs.vs(),ri(r)}),(t=>{})),new Qs((t=>{}),((t,i,s,e,h)=>{if(this.AS){const t=e;this.vS.push({type:"rotate",rotation:t}),this.cs.vs(),ri(h)}}),(t=>{}))),this.onBackgroundTouchStart(this.rp.onTouchStart),this.onBackgroundTouchMove(this.rp.onTouchMove),this.onBackgroundTouchEnd(this.rp.onTouchEnd),this.onSeriesBackgroundTouchStart(this.rp.onTouchStart),this.onSeriesBackgroundTouchMove(this.rp.onTouchMove),this.onSeriesBackgroundTouchEnd(this.rp.onTouchEnd),this.onBackgroundMouseDrag(this.hp),this.onBackgroundMouseWheel(this.ep),this.onBackgroundMouseDown(((t,i)=>{ri(i)})),this.onSeriesBackgroundMouseDrag(this.hp),this.onSeriesBackgroundMouseWheel(this.ep),this.onSeriesBackgroundMouseDown(((t,i)=>{ri(i)})),o&&!0===o.disableAnimations&&this.setAnimationsEnabled(!1),this.onResize(this.Zr),this.Zr(),this.nm(h,this.pixelScale)}addPointSeries(t){const i=new(t&&t.type||Xa)(this,this.Ap,this.dt,this.ts,this.cs.hs,t);return this.Pp(i),i}addLineSeries(t){const i=new $a(this,this.Ap,this.dt,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length,this.cs.hs);return this.Pp(i),i}addPointLineSeries(t){const i=new ja(this,this.Ap,this.dt,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length,this.cs.hs);return this.Pp(i),i}addSurfaceGridSeries(t){const i=new sl(this,this.Ap,this.dt,t,this.ts,this.cs.hs);return this.Pp(i),i}addSurfaceScrollingGridSeries(t){const i=new el(this,this.Ap,this.dt,t,this.ts,this.cs.hs);return this.Pp(i),i}addBoxSeries(t){const i=new Ha(this,this.Ap,this.dt,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length,this.cs.hs);return this.Pp(i),i}translateCoordinate(t,i,s){if(hl(i)||hl(s)||rl(t)){if(hl(i)&&hl(s)&&rl(t)){if("axes"===i.id&&"world"===s.id)return this.dt.ct(t);if("world"===i.id&&"axes"===s.id)return this.dt.ft(t);if(i.id===s.id)return t}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return ia(t,i,s,this.pixelScale,this.cs)}getDefaultAxisX(){return this.RS.x}getDefaultAxisY(){return this.RS.y}getDefaultAxisZ(){return this.RS.z}getDefaultAxes(){return[this.RS.x,this.RS.y,this.RS.z]}setCameraLocation(t){let i={location:t,direction:Li.normalize(Li.multiply(t,-1))};const s=this.IS.cameraLocationChanged(this.PS(i));return s&&(i=s),this.DS(i),this.cs.vs(),this}getCameraLocation(){return this.dt.getCameraLocation()}getCameraDirection(){return this.dt.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.IS.Qp(t);const i=this.IS.cameraLocationChanged(this.PS());return i&&this.DS(i),this}getCameraAutomaticFittingEnabled(){return this.IS.lS()}onCameraChange(t){return this.I.on("cameraChange",t)}offCameraChange(t){return this.I.off(t,"cameraChange")}setBoundingBoxStrokeStyle(t){return this.ES.Be(t).Vy(Da(this.ES.Zl())),this.dt.vs(),this}getBoundingBoxStrokeStyle(){return this.ES.Zl()}setBoundingBox(t){return this.zS(t,!1),this}zS(t,i){this.GS=t;const s=this.NS(t);if(this.BS.x.K(s.x),this.BS.y.K(s.y),this.BS.z.K(-s.z),!i){const t=this.IS.boundingBoxChanged(this.PS());t&&this.DS(t)}this.cs.vs()}getBoundingBox(){return this.GS}ke(t){if(oa.Sm(this.dm,this.am),0!==this.wS){const i=this.wS*t*.006;this.vS.push({type:"wheel-zoom",deltaY:i}),this.wS=Math.sign(this.wS)*Math.max(Math.abs(this.wS)-.01*t,0),0!==this.wS&&this.cs.vs(!0)}const i=this.getCameraDirection();if(this.vS.length>0){const t=this.IS.applyCameraInteractions(this.PS(),this.vS);t&&this.DS(t),this.vS.length=0}this.WS&&Li.equals(this.WS.location,this.VS.location)&&Li.equals(this.WS.direction,this.VS.direction)||this.I.emit("cameraChange",this,this.getCameraLocation()),this.WS=this.VS,super.ke(t);for(let t=0;t<this.Mp.length;t+=1)this.Mp[t].ap();for(let t=0;t<this.Mp.length;t+=1)this.Mp[t].ke();this.RS.x.gr(),this.RS.y.gr(),this.RS.z.gr(),this.RS.x.ke(i),this.RS.y.ke(i),this.RS.z.ke(i),super.rm();const s=this.BS,e=l(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),h=l(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd());this.ES.$a().Ua([l(h.x,e.y,e.z),l(h.x,h.y,e.z),l(h.x,h.y,h.z),l(h.x,e.y,h.z),l(e.x,e.y,h.z),l(e.x,h.y,h.z),l(h.x,h.y,h.z),l(h.x,h.y,e.z),l(e.x,h.y,e.z),l(e.x,h.y,h.z),l(e.x,e.y,h.z),l(e.x,e.y,e.z)]);const r=[l(e.x,e.y,e.z),l(h.x,e.y,e.z),l(e.x,h.y,e.z),l(h.x,h.y,e.z),l(e.x,e.y,h.z),l(h.x,e.y,h.z),l(e.x,h.y,h.z),l(h.x,h.y,h.z)].map((t=>this.dt.$y(t))),n=this.dt.$y(l((e.x+h.x)/2,(e.y+h.y)/2,(e.z+h.z)/2)),o=fi(r,n),a=[];for(let t=0;t<o.length;t+=1){const i=o[t];ss(i,n,o[t>0?t-1:o.length-1],o[t<o.length-1?t+1:0])||a.push(i)}const u=fi(a,n);this.Fp.sl(u),this.Ip.sl(u);for(let t=0;t<this.Mp.length;t+=1)this.Mp[t].my()}dispose(){return this.Ur.forEach((t=>{t()})),this.Ur.length=0,this.BS.N(),this.dt.N(),this.FS.N(),this.TS.N(),super.dispose()}j(){return this.BS.x.j(),this.BS.y.j(),this.BS.z.j(),super.j()}Y(){return super.Y()}DS(t){this.dt.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(Li.addVec(t.location,Li.multiply(t.direction,-this.xS))),this.VS=t,this.cs.vs()}NS(t){return Li.divide(t,Li.length(t)/this.bS)}PS(t=this.VS){return{boundingBox:this.NS(this.GS),cameraLocation:t.location,cameraDirection:t.direction}}setMouseInteractions(t){return this.setMouseInteractionZoom(t).setMouseInteractionRotate(t)}setMouseInteractionZoom(t){return this._S=t,this}getMouseInteractionZoom(){return this._S}setMouseInteractionRotate(t){return this.AS=t,this}getMouseInteractionRotate(){return this.AS}forEachAxis(t){return t(this.RS.x),t(this.RS.y),t(this.RS.z),this}getSeries(){return this.Mp}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}setAnimationZoom(t){return this.MS=!!t,this}getAnimationZoom(){return this.MS}}const ol={Column:rn,Row:nn};class al extends ha{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.HS=new Map,this.US=this.addUIElement(ol.Row).setPosition({x:0,y:100}).setOrigin(Pe.LeftTop).setBackground((t=>t.setFillStyle(R).setStrokeStyle(rt)))}add(t,i){return(t instanceof na?[t]:t instanceof ag?t.getCells().filter((t=>t.panel instanceof na)).map((t=>t.panel)):[]).forEach((t=>{const s=this.US.addElement(Bn.VerticalLegendBox).setBackground((t=>t.setFillStyle(R).setStrokeStyle(rt))).add(t,i).setTitle(t.getTitle());this.HS.set(t,s)})),this.cs.vs(),this}setLegendBoxes(t){return this.HS.forEach(((i,s)=>t(i,s))),this}getMinimumSize(){return super.getMinimumSize()||this.US.getSize()}}class ll{constructor(t,i){this.$S=t,this.jS=i}alter(t){this.YS=void 0!==this.YS?this.YS:this.jS(),this.XS=t,this.$S(t)}resetValue(){void 0!==this.XS&&(void 0!==this.YS&&this.isAltered()&&this.$S(this.YS),this.YS=void 0,this.XS=void 0)}getNormalValue(){return void 0!==this.YS?this.YS:this.jS()}isAltered(){return void 0!==this.XS&&this.jS()===this.XS}}class ul{constructor(t,i){this.ZS=[],this.KS=t,this.ut=i}update(){return this.KS.getVisible()?!(this.qS()&&(!this.JS()||(this.resetTable(),this.KS.Is(),this.qS()))&&(this.QS(),this.KS.Is(),this.qS()&&(this.resetTable(),this.KS.Is(),1))):(this.JS()&&this.resetTable(),!0)}JS(){for(let t=0;t<this.ZS.length;t+=1)if(this.ZS[t].isAltered())return!0;return!1}resetTable(){for(let t=0;t<this.ZS.length;t+=1)this.ZS[t].resetValue();return this}qS(){return((t,i)=>{const s=ut(t.getPosition(n(-1,-1),Mt.PaddedBackground),t.scale,i),e=ut(t.getPosition(n(1,1),Mt.PaddedBackground),t.scale,i);return s.x<i.x.getInnerStart()||e.x>i.x.getInnerEnd()||s.y<i.y.getInnerStart()||e.y>i.y.getInnerEnd()})(this.KS,this.ut)}tb(){return((t,i)=>{const s=ut(t.getPosition(n(-1,-1),Mt.PaddedBackground),t.scale,i),e=ut(t.getPosition(n(1,1),Mt.PaddedBackground),t.scale,i);return s.x<i.x.getInnerStart()||e.x>i.x.getInnerEnd()})(this.KS,this.ut)}ib(){return((t,i)=>{const s=ut(t.getPosition(n(-1,-1),Mt.PaddedBackground),t.scale,i),e=ut(t.getPosition(n(1,1),Mt.PaddedBackground),t.scale,i);return s.y<i.y.getInnerStart()||e.y>i.y.getInnerEnd()})(this.KS,this.ut)}sb(t){return this.ZS.push(t),t}}class cl extends ul{constructor(){super(...arguments),this.ta=this.sb(new ll((t=>this.KS.setOrigin(t)),(()=>this.KS.getOrigin())))}QS(){const t=this.ta.getNormalValue(),i=n(this.tb()?-t.x:t.x,this.ib()?-t.y:t.y);this.ta.alter(i)}}class dl extends ul{constructor(t,i,s,e){super(t,i),this.eb=this.sb(new ll((t=>this.KS.setTextFont((i=>i.setSize(t)))),(()=>this.KS.getTextFont().getSize()))),this.hb=s,this.rb=e}QS(){const t=this.eb.getNormalValue(),i=this.hb;if(i<t)for(let s=1;s<=this.rb;s+=1){const e=t-(t-i)*(s/this.rb);if(this.eb.alter(e),this.KS.Is(),!this.qS())return}}}const fl={Flip:(t,i)=>new cl(t,i),FontSize:(t=5,i=5)=>(s,e)=>new dl(s,e,t,i)};class gl{constructor(){this.nb=[]}addRow(...t){return this.nb.push(t),this}}class ml extends gl{_c(){const t=this.nb;return this.nb=[],t}ob(){return this.nb.length=0,this}}class yl extends en{constructor(){super(...arguments),this.fc=this.ts.cursorResultTableTextFont,this.sd=0,this.Ty=this.ts.cursorResultTableTextFillStyle}setContent(t){for(let i=0;i<t.length;i+=1){const s=t[i];let e=!1;for(let t=0;t<s.length;t+=1){const i=s[t];if(void 0===i||0===i.length){e=!0;break}}e||(s.unshift(""),s.push(""))}this.ab();const i=t.length;let s=this.getMembers().length;for(let e=0;e<Math.max(i,s);e+=1){const h=this.getRow(e,!0);if(e>=i)this.getMembers()[e].dispose(),e-=1,s-=1;else{const i=t[e].length;let s=h.getMembers().length;for(let r=0;r<Math.max(i,s);r+=1){const n=t[e][r],o=h.getMembers();if(r>=i)h.getMembers()[r].dispose(),r-=1,s-=1;else if(void 0!==n&&n.length>0){for(let t=o.length;t<r;t+=1)h.addGap(void 0,void 0);let t;if(r>=o.length)t=h.addElement($r,void 0);else{const i=o[r];i instanceof Kr?(h.getMembers()[r].dispose(),t=h.addElement($r,r)):t=i}t.setFont(this.fc).setFillStyle(this.Ty).setText(n).setTextRotation(this.sd)}else{for(let t=o.length;t<r;t+=1)h.addGap(void 0,void 0);r>=o.length?h.addGap(void 0,void 0):o[r]instanceof Ur&&(h.getMembers()[r].dispose(),h.addGap(void 0,r))}}}}return this.ks.vs(),this}setTextFillStyle(t){this.Ty="function"==typeof t?t(this.Ty):t;for(let t=0;t<this.getMemberCount();t+=1){const i=this.getRow(t);for(let t=0;t<i.getMembers().length;t+=1){const s=i.getMembers()[t];s instanceof Ur&&s.setFillStyle(this.Ty)}}return this.ks.vs(),this}getTextFillStyle(){return this.Ty}setTextFont(t){return ah(t)?this.fc=t:this.fc=t(this.fc),this.ks.vs(),this}getTextFont(){return this.fc}setTextRotation(t){return this.sd=t,this.ks.vs(),this}getTextRotation(){return this.sd}ab(){for(let t=0;t<this.Hc.length;t+=1)for(let i=0;i<this.Hc[t].getMembers().length;i+=1)this.Hc[t].getMembers()[i].dispose()}Is(){for(let t=0;t<this.Hc.length;t+=1)this.Hc[t].setMinimumSize(void 0);super.Is();for(let t=0;t<this.Hc.length;t+=1)this.Hc[t].setMinimumSize(this.size.x);return super.Is(),this}}class pl{constructor(t,i,s,e,h,r){this.lb=!0,this.ub=!0,this.cb=!1,this.Xo=n(0,0),this.Pi=!0,this.ks=t,this.renderingScale=i,this.scale=s,this.fb=e,this.gb=h,this.mb=new this.fb(this.ks,this.renderingScale,this.scale,Bt,r).setMouseInteractions(!1).setFillStyle(r.cursorPointMarkerFillStyle).setStrokeStyle(r.cursorPointMarkerStrokeStyle),this.KS=new yl(this.ks,this.renderingScale,this.scale,this.gb,Bt,r).setMouseInteractions(!1).setBackground((t=>t.setFillStyle(r.cursorResultTableFillStyle).setStrokeStyle(r.cursorResultTableStrokeStyle))).setTextFillStyle(r.cursorResultTableTextFillStyle).setTextFont(r.cursorResultTableTextFont),this.yb=fl.Flip(this.KS,this.scale)}dispose(){return this.mb.dispose(),this.KS.dispose(),this}pointAt(t){return this.Xo=t.scale===this.scale?t.location:ut(t.location,t.scale,this.scale),this.mb.setPosition(this.Xo),this.KS.setPosition(this.Xo).setContent(t.resultTableContent),this.ks.vs(),this}getPosition(){return this.Xo}setVisible(t){return this.Pi=t,this.ks.vs(),this}getVisible(){return this.Pi}setPointMarkerVisible(t){return this.lb=t,this.ks.vs(),this}getPointMarkerVisible(){return this.lb}setPointMarker(t){return t(this.mb),this.ks.vs(),this}getPointMarker(){return this.mb}setResultTableVisible(t){return this.ub=t,this.ks.vs(),this}getResultTableVisible(){return this.ub}setResultTable(t){return t(this.KS),this.ks.vs(),this}getResultTable(){return this.KS}setAutoFitStrategy(t){return this.yb&&this.yb.resetTable(),this.yb=t?t(this.KS,this.ks.cs.ut):void 0,this.ks.vs(),this}getAutoFitStrategy(){return void 0!==this.yb}ke(){return this.yb&&this.yb.update(),this.KS.setVisible(this.cb&&this.Pi&&this.ub),this.mb.setVisible(this.cb&&this.Pi&&this.lb),this.mb.ke(),this.KS.ke(),this}Is(){return this.mb.Is(),this.KS.Is(),this.cb=((t,i,s=i)=>{const e=i!==s?ut(t,i,s):t;return e.x>=s.x.getInnerStart()&&e.x<=s.x.getInnerEnd()&&e.y>=s.y.getInnerStart()&&e.y<=s.y.getInnerEnd()})(this.Xo,this.scale),this}}class Sl extends pl{constructor(){super(...arguments),this.pb=!1}pointAt(t){return this.Sb(t.fillStyle),super.pointAt(t)}Sb(t){t&&this.pb&&this.KS.setTextFillStyle(t)}setResultTableAutoTextStyle(t){return this.pb=t,this.ks.vs(),this}getResultTableAutoTextStyle(){return this.pb}}class bl extends pl{setPosition(t){return this.Xo=t,this.mb.setPosition(t),this.KS.setPosition(t),this.ks.vs(),this}}class vl{constructor(t,i,s=[]){this.bb=[],this.vb=(t,i)=>(this.bb.forEach((s=>s(t,i))),t),this.fb=t,this.gb=i,this.bb=s}}class xl extends vl{constructor(){super(...arguments),this.xb=(t,i,s,e)=>this.vb(new Sl(t,i,s,this.fb,this.gb,e),e),this.addStyler=t=>new xl(this.fb,this.gb,this.bb.map((t=>t)).concat(t)),this.setPointMarker=t=>new xl(t,this.gb,this.bb.map((t=>t))),this.setResultTableBackground=t=>new xl(this.fb,t,this.bb.map((t=>t)))}}class Ml extends vl{constructor(){super(...arguments),this.Mb=(t,i,s,e)=>this.vb(new bl(t,i,s,this.fb,this.gb,e),e),this.addStyler=t=>new Ml(this.fb,this.gb,this.bb.map((t=>t)).concat(t)),this.setPointMarker=t=>new Ml(t,this.gb,this.bb.map((t=>t))),this.setResultTableBackground=t=>new Ml(this.fb,t,this.bb.map((t=>t)))}}const _l=t=>t.setPointMarker((t=>t.setSize(n(5,5)).setOrigin(n(0,0)))).setResultTable((t=>t.setEffect(!0).setOrigin(n(-1,-1)).setMargin(5))),Al=(t,i)=>t.setPointMarker((t=>t.setFillStyle(i.chartMarkerPointMarkerFillStyle).setStrokeStyle(i.chartMarkerPointMarkerStrokeStyle).setSize(n(20,20)).setOrigin(n(0,0)))).setResultTable((t=>t.setEffect(!0).setBackground((t=>t)).setOrigin(n(-1,-1)).setMargin(10))),wl=new xl(jr,jr,[_l]),kl=new xl(jr,Zr,[_l,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(n(0,-1)).setMargin(0).setBackground((t=>{t instanceof Zr&&t.setDirection(wt.Down).setPointerLength(10).setPointerAngle(60)}))))]),Cl=wl,Tl=kl;new Ml(Xr,jr,[Al,t=>t.setResultTableVisible(!1)]);const Fl=new Ml(Nr,jr,[Al,t=>t.setResultTable((t=>t.setOrigin(Pe.LeftBottom)))]),Il=(t,i,s,e,h)=>({location:t,scale:i,resultTableContent:s,series:e,fillStyle:h}),Pl={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},Dl=(t,i)=>!(!i.name||t.name.toLowerCase()!==i.name.toLowerCase())||"ISO_A3"in t&&"ISO_A3"in i&&t.ISO_A3.toLowerCase()===i.ISO_A3.toLowerCase(),Bl=(t,i)=>{let s=i.geometry;return s=Ol(t,i,s),s=Ll(t,i,s),s},Ol=(t,i,s)=>{if(t===Pl.Asia){const t=[];for(let i=0;i<s.length;i+=1){t[i]=[];const e=s[i],h=t[i];for(let t=0;t<e.length;t+=1){const i=e[t];i.x<-100?h[t]={x:i.x+360,y:i.y}:h[t]=i}}return t}return s},Ll=(t,i,s)=>{const e=i.name.toLowerCase();let h;if(t===Pl.USA&&("alaska"===e?h={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:"hawaii"===e&&(h={translate:{x:48,y:7},scale:{x:1,y:1}})),h){const{translate:t,scale:r}=h,n=Ji(Rt(s)),o=[];for(let i=0;i<s.length;i+=1){o[i]=[];const h=s[i],a=o[i];for(let i=0;i<h.length;i+=1){const s=h[i];let o=s.x;"alaska"===e&&1===Math.sign(o)&&(o=-180-(180-o)),a[i]={x:t.x+(o-n.min.x)*r.x+n.min.x,y:t.y+(s.y-n.min.y)*r.y+n.min.y}}}return i.outlier=!0,i.transform={...h,vertexBoundaries:n},o}return s},Rl={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},El={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};var zl;!function(t){t[t.disabled=0]="disabled",t[t.snapToClosest=1]="snapToClosest",t[t.onHover=2]="onHover"}(zl||(zl={}));class Vl extends qa{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this._b=zl.snapToClosest,this.Ab=t=>{this.Mp.includes(t)||(this.Mp.push(t),this.I.emit("seriesAdded",this,t))},this.wb=i.kb();const u=()=>{this._b!==zl.disabled&&this.cs.vs()},c=()=>{this._b!==zl.disabled&&this.cs.vs()},d=()=>{this._b!==zl.disabled&&this.cs.vs()},f=()=>{this._b!==zl.disabled&&this.cs.vs()},g=()=>{this._b!==zl.disabled&&this.cs.vs()},m=()=>{this._b!==zl.disabled&&this.cs.vs()};this.onSeriesBackgroundMouseEnter(u),this.onSeriesBackgroundMouseMove(c),this.onSeriesBackgroundMouseLeave(d),this.onSeriesBackgroundTouchStart(f),this.onSeriesBackgroundTouchMove(g),this.onSeriesBackgroundTouchEnd(m),this.Cb(((t,i)=>{const s=i.onMouseEnter(u),e=i.onMouseMove(c),h=i.onMouseLeave(d),r=i.onTouchStart(f),n=i.onTouchMove(g),o=i.onTouchEnd(m),a=this.Tb(((t,l)=>{l===i&&(i.offMouseEnter(s),i.offMouseMove(e),i.offMouseLeave(h),i.offTouchStart(r),i.offTouchMove(n),i.offTouchEnd(o)),this.Fb(a)}))}))}setAutoCursor(t){return this.Ib&&t(this.Ib),this.cs.vs(),this}getAutoCursor(){return this.Ib}setAutoCursorMode(t){return this._b=t,this.cs.vs(),this}getAutoCursorMode(){return this._b}Pb(t){if(t.x<this.uiScale.x.Gt()||t.x>this.uiScale.x.Wt()||t.y<this.uiScale.y.Gt()||t.y>this.uiScale.y.Wt())return;let i,s=Number.MAX_VALUE;for(const e of this.Mp)if(e.getCursorEnabled()&&e.getVisible()){const h=e.Pb(t,!1);if(h){const e=ut(h.location,h.scale,this.engine.scale),r=Yi(t,e);Number.isNaN(r)||i&&!(r<s)||(i=h,s=r)}}return i||void 0}solveNearest(t){if(t=t||this.cs._n())return this.Pb(ao(t,this.cs))}Db(t){let i;if(!t){const t=this.cs._n(),s=this.Mp.find((t=>t.getIsUnderMouse())),e=this.Fp.getIsUnderMouse();this._b===zl.snapToClosest?(e||void 0!==s)&&(i=t&&this.Pb(t)):this._b===zl.onHover&&void 0!==s&&s.getCursorEnabled()&&(i=t&&s.Pb(t,!0))}i?this.Ib.pointAt(i).setVisible(!0):this.Ib.setVisible(!1),this.Ib.Is().ke()}Cb(t){return this.I.on("seriesAdded",t)}Bb(t){return this.I.off(t)}Tb(t){return this.I.on("seriesDispose",t)}Fb(t){return this.I.off(t)}dispose(){return this.wb.N(),this.Ib.dispose(),super.dispose()}}class Nl extends na{constructor(t,i,s,e,h,r,n){super(t,i,s,i.om("mapChart bg",0),e,i.cs.ts.mapChartBackgroundFillStyle,i.cs.ts.mapChartBackgroundStrokeStyle,i.cs.ts.mapChartTitleFont,i.cs.ts.mapChartTitleFillStyle,n),this.Ob=[],this.ut=this.jg.d2({scaleXYConstructor:Ns}),this.Ti=!0,this.Lb=this.ts.mapChartSeparateRegionFillStyle,this.Rb=this.ts.mapChartSeparateRegionStrokeStyle,this.Eb=zl.onHover,this.zb=Gl,this.qe=!0,this.Vb=0,this.Nb=!0,this.Gb=new Map,this.onMouseEnter=t=>this.I.on("mouseEnter",t),this.onMouseLeave=t=>this.I.on("mouseLeave",t),this.onMouseClick=t=>this.I.on("mouseClick",t),this.onMouseDoubleClick=t=>this.I.on("mouseDoubleClick",t),this.onMouseDown=t=>this.I.on("mouseDown",t),this.onMouseUp=t=>this.I.on("mouseUp",t),this.onMouseMove=t=>this.I.on("mouseMove",t),this.offMouseEnter=t=>this.I.off(t,"mouseEnter"),this.offMouseLeave=t=>this.I.off(t,"mouseLeave"),this.offMouseClick=t=>this.I.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.I.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.I.off(t,"mouseDown"),this.offMouseUp=t=>this.I.off(t,"mouseUp"),this.offMouseMove=t=>this.I.off(t,"mouseMove"),this.offMouseDragStart=t=>this.I.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.I.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.I.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.I.off(t,"mouseWheel"),this.onMapDataReady=t=>{const i=this.I.on("mapDataReady",t);return this.Wb&&kt.setTimeout((()=>t())),i},this.onViewChange=t=>this.I.on("viewChange",t),this.Hb=(t,i,s,e,h)=>{this.ut.x.K(e).Nt([this.Pt.left+this.ia.left,this.Pt.right+this.ia.right]),this.ut.y.K(h).Nt([this.Pt.bottom+this.ia.bottom,this.Pt.top+this.ia.top+oa.pm(this.dm,this.am)]),this.Ub&&this.$b(this.jb,this.ut,this.Ub)},this.zi=(t,i)=>{const s=i;if(!s||!this.Wb)return;const{iRegion:e,region:h}=this.Yb(this.Wb,s);this.Eb!==zl.disabled&&(this.Xb(h,e),ri(t)),this.Nb&&this.cs.us._s(h,!0),this.I.emit("mouseEnter",this,t)},this.Vi=(t,i)=>{const s=i;if(!s||!this.Wb)return;const{iRegion:e,region:h}=this.Yb(this.Wb,s);this.Zb(h,e),this.Nb&&this.cs.us._s(h,!1),this.I.emit("mouseLeave",this,t),t&&ri(t)},this.Ni=(t,i)=>{const s=i;if(!s||!this.Wb)return;const{iRegion:e,region:h}=this.Yb(this.Wb,s);this.Eb!==zl.disabled&&(this.Xb(h,e),ri(t)),this.I.emit("mouseMove",this,t)},this.Gi=(t,i)=>this.I.emit("mouseClick",this,t),this.Wi=(t,i)=>this.I.emit("mouseDoubleClick",this,t),this.Hi=(t,i)=>this.I.emit("mouseDown",this,t),this.Ui=(t,i)=>this.I.emit("mouseUp",this,t),this.$i=(t,i,s)=>{this.I.emit("mouseDragStart",this,t,i)},this.ji=(t,i,s,e,h)=>{this.I.emit("mouseDrag",this,t,i,s,e)},this.Yi=(t,i,s,e)=>{this.I.emit("mouseDragStop",this,t,i,s)},this.Xi=(t,i)=>{this.I.emit("mouseWheel",this,t)},this.Zi=(t,i)=>{const s=i;if(!s||!this.Wb)return;const{iRegion:e,region:h}=this.Yb(this.Wb,s);this.Kb=this.engine.clientLocation2Engine(t.clientX,t.clientY),this.Xb(h,e),this.Nb&&this.cs.us._s(h,!0),this.I.emit("touchStart",this,t),ri(t)},this.Ki=(t,i)=>{const s=i;if(!s||!this.Wb)return;const{iRegion:e,region:h}=this.Yb(this.Wb,s);this.Kb=this.engine.clientLocation2Engine(t.clientX,t.clientY),this.Xb(h,e),this.I.emit("touchMove",this,t),ri(t)},this.qi=(t,i)=>{const s=i;if(!s||!this.Wb)return;const{iRegion:e,region:h}=this.Yb(this.Wb,s);this.Kb=void 0,this.Zb(h,e),this.Nb&&this.cs.us._s(h,!1),this.I.emit("touchEnd",this,t),ri(t)},this.mf.Cn||this.mf.kn||this.cs.An(3),(null==r?void 0:r.disableAnimations)&&(this.qe=!1),this.qb=i.Xm("mapChart plotting",0),this.onResize(this.Hb),this.dm.Fh("Map Chart");const o=Gt(r?r.autoCursorBuilder:void 0,Fl);this.Jb=o.Mb(i.kb(),this.ut,this.ut,this.ts).setVisible(!1),this.Qb=this.hs.xg(),this.nm(h,this.uiScale),this.tv=this.qb.sv(this.ut).setMouseInteractions(this.Ti).setMouseEnterEventHandler(((t,i,s)=>this.zi(i,s))).setMouseLeaveEventHandler(((t,i,s)=>this.Vi(i,s))).setMouseClickEventHandler(((t,i,s)=>this.Gi(i,s))).setMouseDoubleClickEventHandler(((t,i,s)=>this.Wi(i,s))).setMouseDownEventHandler(((t,i,s)=>this.Hi(i,s))).setMouseUpEventHandler(((t,i,s)=>this.Ui(i,s))).setMouseMoveEventHandler(((t,i,s)=>this.Ni(i,s))).setMouseDragStartEventHandler(((t,i,s,e)=>this.$i(i,s,e))).setMouseDragEventHandler(((t,i,s,e,h,r)=>this.ji(i,s,e,h,r))).setMouseDragStopEventHandler(((t,i,s,e,h)=>this.Yi(i,s,e,h))).setMouseWheelEventHandler(((t,i,s)=>this.Xi(i,s))).setTouchStartEventHandler(((t,i,s)=>this.Zi(i,s))).setTouchMoveEventHandler(((t,i,s)=>this.Ki(i,s))).setTouchEndEventHandler(((t,i,s)=>this.qi(i,s))).Ae(this.ts.mapChartFillStyle)._e(this.ts.mapChartStrokeStyle),this.ev=this.qb.sv(this.ut).setMouseInteractions(this.Ti).Ae(this.ts.mapChartOutlierRegionFillStyle)._e(this.ts.mapChartOutlierRegionStrokeStyle);const a=Gt(r&&r.type,Pl.World);this.jb=a,this.hv(a).then((()=>{this.I.emit("mapDataReady")}))}setFillStyle(t){return this.tv.Ae(t),this.cs.vs(),this}getFillStyle(){return this.tv.Ih()}setStrokeStyle(t){return this.tv._e(t),this.cs.vs(),this}getStrokeStyle(){return this.tv.jn()}setEffect(t){return this.Qb.bs(t),this.cs.vs(),this}getEffect(){return this.Qb.xs()}setOutlierRegionFillStyle(t){return this.ev.Ae(t),this.cs.vs(),this}getOutlierRegionFillStyle(){return this.ev.Ih()}setOutlierRegionStrokeStyle(t){return this.ev._e(t),this.cs.vs(),this}getOutlierRegionStrokeStyle(){return this.ev.jn()}setSeparateRegionFillStyle(t){return this.Lb="function"==typeof t?t(this.Lb):t,this.Ob.forEach((t=>t.Ae(this.Lb))),this.cs.vs(),this}getSeparateRegionFillStyle(){return this.Lb}setSeparateRegionStrokeStyle(t){return this.Rb="function"==typeof t?t(this.Rb):t,this.Ob.forEach((t=>t._e(this.Rb))),this.cs.vs(),this}getSeparateRegionStrokeStyle(){return this.Rb}invalidateRegionValues(t){if(!this.Wb||!this.rv)return this.nv=this.nv||[],this.nv.push(t),this;if("function"==typeof t)for(let i=0;i<this.Wb.regions.length;i+=1){const s=this.Wb.regions[i],e=this.rv[i],h=t({...s,geometry:void 0},e);if(void 0!==h&&h!==e){this.rv[i]=h;const t=this.Gb.get(s);null==t||t.forEach((t=>{t.ov(h)}))}}else for(const i of t)if(i)for(let t=0;t<this.Wb.regions.length;t+=1){const s=this.Wb.regions[t],e=this.rv[t];if(void 0!==i.value&&i.value!==e&&Dl(s,i)){this.rv[t]=i.value;const e=this.Gb.get(s);null==e||e.forEach((t=>{t.ov(i.value)}))}}return this.cs.vs(),this}setAutoCursor(t){return this.Jb&&t(this.Jb),this.cs.vs(),this}getAutoCursor(){return this.Jb}setAutoCursorMode(t){return this.Eb=t,this.cs.vs(),this}getAutoCursorMode(){return this.Eb}setCursorResultTableFormatter(t){return this.zb=t,this.cs.vs(),this}getCursorResultTableFormatter(){return this.zb}onMouseDragStart(t){return this.I.on("mouseDragStart",t)}onMouseDrag(t){return this.I.on("mouseDrag",t)}onMouseDragStop(t){return this.I.on("mouseDragStop",t)}onMouseWheel(t){return this.I.on("mouseWheel",t)}onTouchStart(t){return this.I.on("touchStart",t)}onTouchMove(t){return this.I.on("touchMove",t)}onTouchEnd(t){return this.I.on("touchEnd",t)}offTouchStart(t){return this.I.off(t,"touchStart")}offTouchMove(t){return this.I.off(t,"touchMove")}offTouchEnd(t){return this.I.off(t,"touchEnd")}setMouseInteractions(t){return this.Ti=t,this.tv.setMouseInteractions(t),this}getMouseInteractions(){return this.Ti}setHighlight(t){var i;return t=Ti(t),this.Vb=t,null===(i=this.Wb)||void 0===i||i.regions.forEach((i=>{this.cs.us._s(i,t)})),this.I.emit("highlight",t),this}getHighlight(){return this.Vb}setAnimationHighlight(t){var i;return null===(i=this.Wb)||void 0===i||i.regions.forEach((i=>{this.cs.us.As(i,t)})),this}getAnimationHighlight(){var t;return this.cs.us.ws(null===(t=this.Wb)||void 0===t?void 0:t.regions[0])}setHighlightOnHover(t){return this.Nb=t,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Nb}onHighlight(t){return this.I.on("highlight",t)}offHighlight(t){return this.I.off(t)}offMapDataReady(t){return this.I.off(t,"mapDataReady")}offViewChange(t){return this.I.off(t,"viewChange")}async hv(t){const i=await((t,i)=>{let s;if(t===Pl.World)s="countries_world.json";else if(t===Pl.NorthAmerica)s="countries_northAmerica.json";else if(t===Pl.SouthAmerica)s="countries_southAmerica.json";else if(t===Pl.Africa)s="countries_africa.json";else if(t===Pl.Europe)s="countries_europe.json";else if(t===Pl.Asia)s="countries_asia.json";else if(t===Pl.USA)s="states_usa.json";else if(t===Pl.Canada)s="territoriesProvinces_canada.json";else{if(t!==Pl.Australia){const i=`LCJS MapChart unidentified \`type\`: ${t}`;throw kt.alert(i),new Error(i)}s="territories_australia.json"}const e=`${i}/maps/${s}`;return kt.fetch(e).then((t=>t.json())).catch((t=>{Bi(i,e,"Map Chart",{shouldCrash:!0})}))})(t,this.mf.$s);this.rv=new Array(i.regions.length).map((t=>{})).fill(void 0);const s=Rl[t];if(!s)throw new Error("Unidentified map type.");for(const t of i.outliers)for(const i of t.geometry)this.ev.Tr().sl(i);if(t===Pl.USA){const t=25.8,i=29.7;this.Ob.push(this.qb.we(this.ut).setMouseInteractions(!1).Ae(this.Lb)._e(this.Rb).Ce({x:-126,y:t}).K({x:10,y:i-t}),this.qb.we(this.ut).setMouseInteractions(!1).Ae(this.Lb)._e(this.Rb).Ce({x:-113,y:t}).K({x:7,y:i-t}))}const e=this.cs.us.Cr(this.tv,{animationEnabled:this.qe});for(let s=0;s<i.regions.length;s+=1){const h=i.regions[s],r=Bl(t,h),n=[];for(const t of r)t.length<3||n.push(this.tv.Tr().sl(t));this.Gb.set(h,n),e.Tr(h,(t=>{n.forEach((i=>i.ds(t)))}))}if(this.Qb.gs([this.tv]),this.Ub=s,this.$b(t,this.ut,s),this.Wb=i,this.nv){for(const t of this.nv)this.invalidateRegionValues(t);this.nv=void 0}this.cs.vs()}$b(t,i,s){const e=El[t],h=i.x.getCellSize(),r=i.y.getCellSize()/h,n={min:{x:s.min.x,y:s.min.y},max:{x:s.max.x,y:s.max.y}};if(r<e){const t=(n.max.x-n.min.x)*(e/r-1);n.min.x-=t/2,n.max.x+=t/2}else if(r>e){const t=(n.max.y-n.min.y)*(r/e-1);n.min.y-=t/2,n.max.y+=t/2}i.x.X(n.min.x,n.max.x),i.y.X(n.min.y,n.max.y);const o=this.ut.x.Yt(),a=this.ut.y.Yt();this.I.emit("viewChange",{latitudeRange:{start:n.min.y,end:n.max.y},longitudeRange:{start:n.min.x,end:n.max.x},margin:{top:a[1],bottom:a[0],left:o[0],right:o[1]}})}Xb(t,i){this.av={region:t,iRegion:i},this.cs.vs()}Zb(t,i){this.av&&t===this.av.region&&(this.av=void 0,this.cs.vs())}Yb(t,i){const s=Array.from(this.Gb.entries()).findIndex((([t,s])=>s.includes(i)));return{iRegion:s,region:null==t?void 0:t.regions[s]}}setAnimationsEnabled(t){return this.qe=!t,this}getAnimationsEnabled(){return this.qe}getMinimumSize(){}vd(){return[this]}ke(t){super.ke(t),super.rm(),oa.Sm(this.dm,this.am);const i=d(this.ut.x.Gt(),this.ut.y.Gt(),this.ut.x.Ht(),this.ut.y.Ht());this.qb.CS(i);const s=this.cs._n()||this.Kb;if(this.av&&s){const t=this.rv&&this.rv[this.av.iRegion];let i=ut(s,this.engine.scale,this.ut);i={x:Lt(i.x,this.ut.x.getInnerStart(),this.ut.x.getInnerEnd()),y:Lt(i.y,this.ut.y.getInnerStart(),this.ut.y.getInnerEnd())};let e=i.x,h=i.y;const r=this.av.region.transform;this.av.region.outlier&&r&&(e=(e-r.translate.x-r.vertexBoundaries.min.x)/r.scale.x+r.vertexBoundaries.min.x,h=(h-r.translate.y-r.vertexBoundaries.min.y)/r.scale.y+r.vertexBoundaries.min.y),this.Jb.setPosition(i).setVisible(!0).getResultTable().setContent(this.zb(new ml,this.av.region,t,e,h,this)._c())}else this.Jb.setVisible(!1);return this.Jb.Is().ke(),this}dispose(){return this.qb.N(),this.Jb.dispose(),ea(this.ut),super.dispose()}j(){return super.j(),this.ut.j(),this}Y(){return super.Y(),this.ut.Y(),this}dd(){return bi(this.getFillStyle())}attach(t,i){return t.setText(this.getTitle()),t.setButtonOffStrokeStyle(t.getButtonOffStrokeStyle().setThickness(1)),t.setButtonOnStrokeStyle(t.getButtonOnStrokeStyle().setThickness(1)),t.setOn(!0).setLocked(!0),t.onMouseEnter((()=>{this.setHighlight(!0)})),t.onMouseLeave((()=>{this.setHighlight(!1)})),this.onMouseEnter((()=>t.setHighlight(!0))),this.onMouseLeave((()=>t.setHighlight(!1))),this.onTouchStart((()=>t.setHighlight(!0))),this.onTouchEnd((()=>t.setHighlight(!1))),Si(t,this.ts,{fill:this.getFillStyle()}),this}}const Gl=(t,i,s,e,h,r)=>(t.addRow(`${i.name}`).addRow(Wl(e,h)),void 0!==s&&t.addRow(`Region value: ${s.toFixed(1)}`),t),Wl=(t,i)=>{const s=t>0,e=i>0;return`${[xi(Math.abs(0|t),2),"° ",xi(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(s?"E":"W")}, ${[xi(Math.abs(0|i),2),"° ",xi(Math.abs(0|(i<0?i=-i:i)%1*60),2),"' "].join("")+(e?"N":"S")}`};class Hl extends sh{constructor(t,i,s,e,h,r,n,o,a){super(t,i,i.lv(s),e,h,{numeric:i.uv({amplitude:e.polarAmplitudeAxisNumericTicks,radial:e.polarAmplitudeAxisNumericTicks}),datetime:i.uv({amplitude:e.polarAmplitudeAxisDateTimeTicks,radial:e.polarAmplitudeAxisDateTimeTicks}),time:i.uv({amplitude:e.polarAmplitudeAxisTimeTicks,radial:e.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.cv=r,this.dv=n,this.fv=o,this.hs=a,this.gv=s,this.mv=i.uv({amplitude:e.polarAmplitudeAxisStrokeStyle,radial:e.polarRadialAxisStrokeStyle}),this.Th=o.vr(s).setMouseInteractions(!1).Dh(i.uv({amplitude:e.polarAmplitudeAxisTitleFont,radial:e.polarRadialAxisTitleFont})).Ae(i.uv({amplitude:e.polarAmplitudeAxisTitleFillStyle,radial:e.polarRadialAxisTitleFillStyle})),this.Lh=this.hs.xg([this.Th]).bs(e.effectsText)}setTickStrategy(t,i){return super.Ah(t,i)}setStrokeStyle(t){return this.mv="function"==typeof t?t(this.mv):t,this.dv.vs(),this}getStrokeStyle(){return this.mv}ir(t,i){return new Ul(i,t,this.gv,this.fv,this.fv,this.yv(this.cv,this.gv),this.fv.Oe(this.gv).setMouseInteractions(!1))}sr(t,i){const s=this.pv(this.gv,t);this.Sv&&!1===this.Sv(t)?t.Ge.setVisible(!1):t.Ge.setVisible(!0).Ce(cs(this.bv(this.gv,t.l),s.padding)).va(s.alignment).Bh(s.rotation).ga(s.offset.x,s.offset.y),this.vv(this.gv,t.xv,t.Mv,t)}setMouseInteractions(t){return this}ke(){this.$h({physicalAxisSize:0});const t=this.rr(((t,i)=>{const s=i.gh.tr,e=.5*this.mv.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.Ge.Is().$t().y/this.gv.ki().y)+s.labelPadding;return Math.max(t,e)}),0);return this._v(this.gv,this.mv,t),this.Av(this.gv,this.Th,t),t}}class Ul extends fo{constructor(t,i,s,e,h,r,n,o){super(t,i,e,s,h,s,o),this.xv=r,this.Mv=n,r.setMouseInteractions(!1),this.ss.push(r,n)}}class $l extends Hl{constructor(t,i,s,e,h,r,n,o,a){super(t,jl((()=>this.kg())),i,s,e,h,r,n,o),this.zy=this.dv.Oe(this.gv).setMouseInteractions(!1),this.wv=a,this.setScrollStrategy(He.expansion),this.setTickStrategy(Ue.Numeric),this.setTitle("Amplitude")}kg(){return this.wv()}mr(t,i){return uo(t,i,this.gv.y)}pr(t,i,s){const e=2*(i-t),h=this.gv.x.Si(e);return{min:t-s*h,max:i+s*h}}bv(t,i){return{x:t.kv()?i-t.Cv().start:t.Cv().start-i,y:0}}yv(t,i){return t.Oc(i)}vv(t,i,s,e){const h=e.gh.tr,r=t.kv()?e.l-t.Cv().start:t.Cv().start-e.l;Ot(e.l,t.Cv().start)||Ot(e.l,t.Cv().end)?i.setVisible(!1):i.setVisible(!0).Wl(0).Le(360).Yl(void 0).jl(0).Hl(r).Yl(60).Ae(R)._e(h.gridStrokeStyle);const n=.5*this.mv.getThickness();s.Re({x:r,y:-n*t.ki().y}).Le({x:r,y:-(n+h.tickLength)*t.ki().y}).Be(h.tickStyle)}pv(t,i){const s=i.gh.tr;return{alignment:{x:0,y:1},padding:{x:0,y:t.ki().y*-(.5*this.mv.getThickness()+s.tickLength+s.tickPadding)},rotation:0,offset:{x:0,y:0}}}_v(t,i,s){const e=t.kv()?t.Cv().end-t.Cv().start:t.Cv().start-t.Cv().end;this.zy.Re({x:0,y:0}).Le({x:e,y:0}).Be(i)}Av(t,i,s){const e=t.kv()?(t.Cv().start+t.Cv().end)/2-t.Cv().start:t.Cv().start-(t.Cv().start+t.Cv().end)/2;i.va({x:0,y:1}).Ce({x:e,y:-s*t.ki().y})}}const jl=t=>({...Va(t,(t=>t.getAmplitudeMin()),(t=>t.getAmplitudeMax()),(t=>{})),lv:t=>({getInnerStart:()=>t.Cv().start,getInnerEnd:()=>t.Cv().end,X:(i,s)=>t.Tv(i,s),ht:(i,s,e,h,r)=>t.y.ht(i,s,e,h,r)}),uv:t=>t.amplitude});class Yl extends Hl{constructor(t,i,s,e,h,r,n,o){super(t,Zl,i,s,e,h,r,n,o),this.Fv=90,this.Iv=12,this.Pv=Xl,this.zy=this.dv.Oc(this.gv).setMouseInteractions(!1),this.Sv=t=>{let i=180*(t.l-this.gv.Dv())/Math.PI%360;for(;i<0;)i+=360;for(;i>360;)i-=360;if(i>=0&&i<=20||i>=340&&i<=360)return!1},this.Xe=void 0,this.setTickStyle(s.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.Fv)}setTickStyle(t){return this.Bv="function"==typeof t?t(this.Bv):t,this.Ov(),this.dv.vs(),this}getTickStyle(){return this.Bv}setTickFormattingFunction(t){return this.Pv=t,this.Ov(),this.dv.vs(),this}getTickFormattingFunction(){return this.Pv}setClockwise(t){this.gv.Lv(t);const i=this.Fv*Math.PI/180;return t?this.gv.Rv(i+Math.PI/2):this.gv.Rv(i-Math.PI/2),this.dv.vs(),this}getClockwise(){return!this.gv.Ev()}setNorth(t){for(;t<0;)t+=360;t%=360,this.Fv=t;const i=t*Math.PI/180;return this.getClockwise()?this.gv.Rv(i+Math.PI/2):this.gv.Rv(i-Math.PI/2),this.dv.vs(),this}getNorth(){return 180*this.gv.Dv()/Math.PI}setDivision(t){return this.Iv=t,this.Ov(),this.dv.vs(),this}getDivision(){return this.Iv}kg(){return[]}mr(t,i){return i}pr(t,i,s){return{min:t,max:i}}bv(t,i){const s=t.Ev()?1:-1,e=t.Dv(),h=t.kv()?t.Cv().end-t.Cv().start:t.Cv().start-t.Cv().end;return{x:Math.cos((i-e)*s)*h,y:Math.sin((i-e)*s)*h}}yv(t,i){return t.Oe(i)}vv(t,i,s,e){const h=this.Bv,r=t.Ev()?1:-1,n=t.Dv(),o=(e.l-n)*r,a=Math.cos(o),l=Math.sin(o),u=t.kv()?t.Cv().end-t.Cv().start:t.Cv().start-t.Cv().end,c={x:a*u,y:l*u};i.Re({x:0,y:0}).Le(c);const d={x:c.x+a*h.tickLength*t.ki().x,y:c.y+l*h.tickLength*t.ki().y};s.Re(c).Le(d),i.Be(h.gridStrokeStyle),s.Be(h.tickStyle)}pv(t,i){const s=this.Bv,e=t.Ev()?1:-1,h=t.Dv();let r,n=(i.l-h)*e;for(;n<0;)n+=2*Math.PI;for(;n>=2*Math.PI;)n-=2*Math.PI;r=n>0&&n<=Math.PI?-n+Math.PI/2:-n-Math.PI/2;const o=s.tickLength+s.tickPadding,a=Math.cos(n)*o*t.ki().x,l=Math.sin(n)*o*t.ki().y;return{alignment:{x:0,y:0},padding:{x:a,y:l},rotation:180*r/Math.PI,offset:{x:a,y:l}}}_v(t,i,s){const e=t.kv()?t.Cv().end-t.Cv().start:t.Cv().start-t.Cv().end;this.zy.Wl(0).Le(360).jl(0).Hl(e+.5*i.getThickness()*t.ki().x).Yl(360).Ae(R)._e(i)}Av(t,i,s){const e=t.Dv(),h=this.pv(t,{l:0+e}),r=t.kv()?t.Cv().end-t.Cv().start:t.Cv().start-t.Cv().end;i.va(h.alignment).Bh(h.rotation).ga(h.offset.x,h.offset.y).Ce(cs({x:r,y:0},h.padding))}Ov(){this.Vh({We:[],He:[{Ge:"Radial ticks",Pg:0,tr:this.Bv,Jh:this.Pv,Ar:(t,i,s,e)=>{const h=[],r=2*Math.PI/this.Iv;for(let t=0;t<2*Math.PI;t+=r)h.push(t);return h},mh:{er:()=>{},yh:()=>!1},wr:void 0}],Ve:Xl,Nh:void 0,Gh:void 0})}}const Xl=(t,i,s)=>(180*t/Math.PI).toFixed(0),Zl={lr:()=>{},ur:()=>{},dr:()=>{},lv:t=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,X:(t,i)=>{},ht:(i,s,e,h,r)=>t.x.ht(i,s,e,h,r)}),uv:t=>t.radial},Kl=t=>!!(t&&"object"==typeof t&&"axisAmplitude"in t&&"axisRadial"in t),ql=t=>!!(t&&"object"==typeof t&&"angle"in t&&"number"==typeof t.angle&&"amplitude"in t&&"number"==typeof t.amplitude);class Jl extends Xs{constructor(t,i,s,e,h,r){super(i,s,h,r),this.Ms="Sector",this.zv=0,this.Vv=1*Math.PI/2,this.Nv=void 0,this.Gv=void 0,this.ks=t,this.gv=e,this.Pm=this.ks.Oc(this.gv).ds(this.getHighlight()),this.fs(this.Pm),this.ve=h.polarSectorFillStyle,this.xe=h.polarSectorStrokeStyle,this.setMouseInteractions(!1)}setAngleStart(t){return this.zv=Lt(t,0,360),this.ks.vs(),this}getAngleStart(){return this.zv}setAngleEnd(t){return this.Vv=Lt(t,0,360),this.ks.vs(),this}getAngleEnd(){return this.Vv}setAmplitudeStart(t){return this.Nv=t,this.ks.vs(),this}getAmplitudeStart(){return this.Nv}setAmplitudeEnd(t){return this.Gv=t,this.ks.vs(),this}getAmplitudeEnd(){return this.Gv}setFillStyle(t){return this.ve="function"==typeof t?t(this.ve):t,this.ks.vs(),this}getFillStyle(){return this.ve}setStrokeStyle(t){return this.xe="function"==typeof t?t(this.xe):t,this.ks.vs(),this}getStrokeStyle(){return this.xe}ke(){const t=this.gv.Cv(),i=180*this.gv.Dv()/Math.PI,s=void 0!==this.Nv?Lt(this.Nv,t.start,t.end):t.start,e=void 0!==this.Gv?Lt(this.Gv,t.start,t.end):t.end,h=this.gv.kv()?s-t.start:t.start-s,r=this.gv.kv()?e-t.start:t.start-e,n=Math.min(h,r),o=Math.max(h,r),a=this.gv.Ev()?1:-1,l=Math.abs(this.Vv-this.zv);this.Pm.Wl((this.zv-i)*a).Le((this.Vv-i)*a).jl(100*n/o).Hl(o).Ae(this.ve)._e(this.xe).Yl(Math.ceil(l/2))}Te(t,i){t.ds(i),this.ks.vs()}attach(t,i=!0){return super.attach(t,i),Si(t,this.ts,{fill:this.ve,stroke:this.xe}),this}}class Ql extends Xs{constructor(){super(...arguments),this.ip=!0,this.Wv=!0}setAutoScrollingEnabled(t){return this.ip=t,this.Ji.cs.vs(),this}getAutoScrollingEnabled(){return this.ip}ap(){}ke(){}my(){}setCursorEnabled(t){return this.Wv=t,this}getCursorEnabled(){return this.Wv}}class tu extends Ql{constructor(t,i,s,e,h,r){super(i,s,h,r),this.ks=t,this.Ji=i,this.scale=e}getAmplitudeMin(){return this.Hv?this.Hv.min:void 0}getAmplitudeMax(){return this.Hv?this.Hv.max:void 0}}const iu=(t,i,s,e,h)=>t.addRow(i.getName()).addRow("Angle:","",Math.round(s).toString()).addRow("Amplitude","",h(e)),su=(t,i)=>{const s=[],e=i.Cv().start,h=i.Cv().end,r=i.kv(),n=i.Ev()?1:-1,o=i.Dv(),a=Math.abs(h-e),l=Math.min(e,h)+.001*a,u=Math.max(e,h)-.001*a;for(const i of t){const t=Lt(i.amplitude,l,u),h=i.angle*Math.PI/180-o,a=Math.cos(h*n)*(r?t-e:e-t),c=Math.sin(h*n)*(r?t-e:e-t),d=i.color;s.push({x:a,y:c,color:d})}return s},eu=t=>{const i={min:Ri,max:Ei};for(const s of t)i.min=Math.min(i.min,s.amplitude),i.max=Math.max(i.max,s.amplitude);return i},hu=t=>t.slice().map((t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360})),ru=(t,i)=>{let s=xs(t);for(i.Ev()||(s*=-1),s+=180*i.Dv()/Math.PI;s<0;)s+=360;s%=360;const e=ls(t),h=i.Cv(),r=Math.abs(h.end-h.start);return{angle:s,amplitude:On(h.start,h.end,e/r)}};class nu extends tu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.Ms="Heatmap Series",this.Uv=!0,this.zb=ou,this.dd=()=>bi(this.ve);const o=this.Ji.getSeries().length;this.ve=Mi(this.ts.polarHeatmapSeriesFillStyle||this.ts.heatmapGridSeriesFillStyle,o);const a=n.amplitudeStart||0,l=n.amplitudeEnd?(n.amplitudeEnd-a)/(n.annuli-1):n.amplitudeStep||1,u={sectors:n.sectors,annuli:n.annuli,amplitudeStart:a,amplitudeStep:l,heatmapDataType:"intensity",dataOrder:n.dataOrder||"annuli"};this.wn=u,this.$v=t.jv(e,[],u).Ae(this.ve).ds(this.getHighlight()),this.fs(this.$v);const c=Math.min(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep),d=Math.max(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep);this.Hv={min:c,max:d},this.setHighlightOnHover(!1)}invalidateIntensityValues(t){if(Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,sectors:"annuli"===this.wn.dataOrder?t[0].length:t.length,annuli:"annuli"===this.wn.dataOrder?t.length:t[0].length},s="annuli"===this.wn.dataOrder?this.wn.annuli:this.wn.sectors,e="annuli"===this.wn.dataOrder?this.wn.sectors:this.wn.annuli;if(i.x>s||i.y>e){if(!0===this.Ji.mf.Bn){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nHeatmap ${s}x${e}, input ${i.x}x${i.y}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;kt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);if(0===(t=h).length||0===t[0].length)return this}this.$v.fS({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,sectors:"annuli"===this.wn.dataOrder?t.values[0].length:t.values.length,annuli:"annuli"===this.wn.dataOrder?t.values.length:t.values[0].length},s="annuli"===this.wn.dataOrder?t.iAnnulus:t.iSector,e=s+i.primary-1,h="annuli"===this.wn.dataOrder?t.iSector:t.iAnnulus,r=h+i.secondary-1,n="annuli"===this.wn.dataOrder?this.wn.annuli-1:this.wn.sectors-1,o="annuli"===this.wn.dataOrder?this.wn.sectors-1:this.wn.annuli-1;if(s<0||h<0){if(!0===this.Ji.mf.Bn){const i=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.\nNo intensity values will be invalidated.`;kt.console.warn(i)}return this}if(e>n||r>o){if(!0===this.Ji.mf.Bn){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nMax indexes ${n}x${o}, input ${i.primary}x${i.secondary} starting at [${s},${h}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;kt.console.warn(t)}const a=Math.max(e-n,0),l=i.primary-a,u=Math.max(r-o,0),c=[];for(let i=0;i<l;i+=1)c[i]=t.values[i].slice(0,u>0?-u:void 0);if(0===(t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:c}).values.length||0===t.values[0].length)return this}this.$v.fS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.ks.vs(),this}setFillStyle(t){return this.ve="function"==typeof t?t(this.ve):t,this.$v.Ae(this.ve),this.ks.vs(),this}getFillStyle(){return this.ve}setCursorResultTableFormatter(t){return this.zb=t,this.Ji.cs.vs(),this}getCursorResultTableFormatter(){return this.zb}clear(){return this.$v.$a(),this.ks.vs(),this}setCursorInterpolationEnabled(t){return this.Uv=t,this.ks.cs.vs(),this}getCursorInterpolationEnabled(){return this.Uv}setCursorEnabled(t){return super.setCursorEnabled(t)}setIntensityInterpolation(t){return t=t||"disabled",this.$v.cS(t),this.ks.vs(),this}getIntensityInterpolation(){return this.$v.dS()}Qy(){return this.ip&&this.getVisible()}Te(t,i){t.ds(i),this.ks.vs()}Pb(t,i){const s=ut(t,this.Ji.engine.scale,this.scale),e=ru(s,this.scale),h=this.Uv?this.$v.Yv(e):this.$v.Pb(e);if(h)return Il(su([h],this.scale)[0],this.scale,this.zb(new ml,this,{angleDeg:h.angle,amplitude:h.amplitude,intensity:h.cellValue,iAnnulus:h.iAnnulus,iSector:h.iSector},this.Ji.getAmplitudeAxis().formatValue)._c(),this,this.ve)}solveNearestFromScreen(t){return this.Pb(ao(t,this.Ji.cs),!1)}ke(){}attach(t,i=!0){return super.attach(t,i),Si(t,this.ts,{fill:this.ve}),this}}const ou=(t,i,s,e)=>t.addRow(i.getName()).addRow("Angle:","",Math.round(s.angleDeg).toString()).addRow("Amplitude","",e(s.amplitude)).addRow("Intensity","",s.intensity.toFixed(1));class au extends tu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Ms="Line Series",this.Xv=[],this.Zv=!1,this.Kv=!1,this.zb=iu,this.Xl=Mi(this.ts.polarLineSeriesStrokeStyle,r),this.qv=t.hy(e,void 0,[ba.UserSeries]).Be(this.Xl).ds(this.getHighlight()).Ea(Lh.Nearest),this.fs(this.qv)}setCursorResultTableFormatter(t){return this.zb=t,this.Ji.cs.vs(),this}getCursorResultTableFormatter(){return this.zb}setData(t){return this.Xv=hu(t),this.Zv=!0,this.Hv=eu(this.Xv),this.ks.vs(),this}setStrokeStyle(t){this.Xl="function"==typeof t?t(this.Xl):t;const i=this.Xl;return this.qv.Be(i),this.ks.vs(),this}getStrokeStyle(){return this.Xl}setConnectDataAutomaticallyEnabled(t){return this.Kv=t,this.ks.vs(),this}getConnectDataAutomaticallyEnabled(){return this.Kv}Qy(){return this.ip&&this.Xv.length>0&&this.getVisible()}Te(t,i){t.ds(i),this.ks.vs()}Pb(t,i){return this.Jv(t,this.qv)}solveNearestFromScreen(t){return this.Jv(ao(t,this.Ji.cs),this.qv)}Jv(t,i){const s=i.Qv(t);if(!s)return;const{angle:e,amplitude:h}=ru(s,this.scale);return Il(s,this.scale,this.zb(new ml,this,e,h,this.Ji.getAmplitudeAxis().formatValue)._c(),this,this.Xl.getFillStyle())}ke(){if(this.Zv||this.scale.tx()){const t=su(this.Xv,this.scale),i=Ji(t);this.Kv?(t.push({...t[0]}),this.qv.Ml(!0)):this.qv.Ml(!1),this.qv.$a().Ua(t).To(i),this.Zv=!1,this.qv.Is()}}attach(t,i=!0){return super.attach(t,i),Si(t,this.ts,{stroke:this.Xl}),this}}class lu extends tu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Ms="Point Line Series",this.Xv=[],this.Zv=!1,this.Kv=!1,this.ix=3,this.Jo=0,this.sx=Oh.Circle,this.zb=iu,this.ve=Mi(this.ts.polarPointLineSeriesFillStyle,r),this.Xl=Mi(this.ts.polarPointLineSeriesStrokeStyle,r),this.qv=t.hy(e,void 0,[ba.UserSeries]).Be(this.Xl).ds(this.getHighlight()).Ea(Lh.Nearest),this.fs(this.qv),this.hx=t.xp(e).Ae(this.ve).Na(this.sx).K(this.ix).ds(this.getHighlight()).Ea(Lh.Nearest),this.fs(this.hx)}setCursorResultTableFormatter(t){return this.zb=t,this.Ji.cs.vs(),this}getCursorResultTableFormatter(){return this.zb}setData(t){return this.Xv=hu(t),this.Zv=!0,this.Hv=eu(this.Xv),this.ks.vs(),this}setStrokeStyle(t){this.Xl="function"==typeof t?t(this.Xl):t;const i=this.Xl;return this.qv.Be(i),this.ks.vs(),this}getStrokeStyle(){return this.Xl}setPointFillStyle(t){this.ve="function"==typeof t?t(this.ve):t;const i=this.ve;return this.hx.Ae(i),this.ks.vs(),this}getPointFillStyle(){return this.ve}setPointSize(t){return this.ix=t,this.hx.K(t),this.ks.vs(),this}getPointSize(){return this.ix}setPointShape(t){return this.sx=t,this.hx.Na(this.sx),this}getPointShape(){return this.sx}setPointRotation(t){return this.Jo=t,this.hx.Bh(t),this.ks.vs(),this}getPointRotation(){return this.Jo}setConnectDataAutomaticallyEnabled(t){return this.Kv=t,this.ks.vs(),this}getConnectDataAutomaticallyEnabled(){return this.Kv}Qy(){return this.ip&&this.Xv.length>0&&this.getVisible()}Te(t,i){t.ds(i),this.ks.vs()}Pb(t,i){return this.Jv(t,this.qv)}solveNearestFromScreen(t){return this.Jv(ao(t,this.Ji.cs),this.qv)}Jv(t,i){const s=i instanceof er?i.Pb(t):i.Qv(t);if(!s)return;const{angle:e,amplitude:h}=ru(s,this.scale);return Il(s,this.scale,this.zb(new ml,this,e,h,this.Ji.getAmplitudeAxis().formatValue)._c(),this,"color"in s&&H(this.ve)?new N({color:s.color}):this.ve)}ke(){if(this.Zv||this.scale.tx()){const t=su(this.Xv,this.scale),i=Ji(t);this.Kv?(t.push({...t[0]}),this.qv.Ml(!0)):this.qv.Ml(!1),this.qv.$a().Ua(t).To(i),this.hx.$a().Ua(t).To(i),this.Zv=!1,this.qv.Is(),this.hx.Is()}}}class uu extends tu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Ms="Point Series",this.Xv=[],this.Zv=!1,this.ix=3,this.Jo=0,this.sx=Oh.Circle,this.zb=iu,this.ve=Mi(this.ts.polarPointSeriesFillStyle,r),this.hx=t.xp(e).Ae(this.ve).Na(this.sx).K(this.ix).ds(this.getHighlight()).Ea(Lh.Nearest),this.fs(this.hx)}setCursorResultTableFormatter(t){return this.zb=t,this.Ji.cs.vs(),this}getCursorResultTableFormatter(){return this.zb}setData(t){return this.Xv=hu(t),this.Zv=!0,this.Hv=eu(this.Xv),this.ks.vs(),this}setPointFillStyle(t){this.ve="function"==typeof t?t(this.ve):t;const i=this.ve;return this.hx.Ae(i),this.ks.vs(),this}getPointFillStyle(){return this.ve}setPointSize(t){return this.ix=t,this.hx.K(t),this.ks.vs(),this}getPointSize(){return this.ix}setPointShape(t){return this.sx=t,this.hx.Na(this.sx),this}getPointShape(){return this.sx}setPointRotation(t){return this.Jo=t,this.hx.Bh(t),this.ks.vs(),this}getPointRotation(){return this.Jo}Qy(){return this.ip&&this.Xv.length>0&&this.getVisible()}Te(t,i){t.ds(i),this.ks.vs()}Pb(t,i){const s=this.hx.Pb(t);if(!s)return;const{angle:e,amplitude:h}=ru(s,this.scale);return Il(s,this.scale,this.zb(new ml,this,e,h,this.Ji.getAmplitudeAxis().formatValue)._c(),this,"color"in s&&H(this.ve)?new N({color:s.color}):this.ve)}solveNearestFromScreen(t){return this.Pb(ao(t,this.Ji.cs),!1)}ke(){if(this.Zv||this.scale.tx()){const t=su(this.Xv,this.scale),i=Ji(t);this.hx.$a().Ua(t).To(i),this.Zv=!1,this.hx.Is()}}attach(t,i=!0){return super.attach(t,i),Si(t,this.ts,{fill:this.ve}),this}}class cu{constructor(t,i,e,h){this.I=new s,this.nx=!1,this.Ji=t,this.ox=i,this.Mp=e,this.ka=h}setGeometry(t){return this.lx=t,this.nx=!0,this.Ji.cs.vs(),this}getGeometry(){return this.lx}setMouseInteractions(t){return this.ka.setMouseInteractions(t),this}dispose(){return this.ka.dispose(),this.ox(this),this.I.emit("dispose",this),this}onDispose(t){return this.I.on("dispose",t)}offDispose(t){return this.I.off(t,"dispose")}setVisible(t){const i=this.ka.getVisible()!==t;return this.ka.setVisible(t),i&&this.I.emit("visibleStateChanged",this,t),this.Ji.cs.vs(),this}getVisible(){return this.ka.getVisible()}onVisibleStateChanged(t){return this.I.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.I.off(t,"visibleStateChanged")}}const du=(t,i,s)=>{const e=i.ut,h=s.ut;let r=(t.x-e.getInnerStart())/(e.getInnerEnd()-e.getInnerStart()),o=(t.y-h.getInnerStart())/(h.getInnerEnd()-h.getInnerStart());return 1===s.og&&(r=1-r),1===i.og&&(o=1-o),n(o,r)};class fu extends bl{constructor(t,i,s,e,h,r,n,o,a){super(t,i,Ws(s.ut,e.ut),h,r,a),this.ux=!1,this.gx=!1,this.mx=!0,this.yx=!0,this.Sx=!1,this.bx=!1,this.setGridStrokeYStyle=t=>(this.vx.setGridStrokeStyle(t),this),this.getGridStrokeYStyle=()=>this.vx.getGridStrokeStyle(),this.axisX=s,this.axisY=e,this.xx=n,this.Mx=o,this._x=this.axisX.Lg(!1,this.xx).setMouseInteractions(!1).setAllocatesAxisSpace(!1),this.vx=this.axisY.Lg(!1,this.Mx).setMouseInteractions(!1).setAllocatesAxisSpace(!1)}dispose(){return super.dispose(),this._x.dispose(),this.vx.dispose(),this}pointAt(t){return super.pointAt(t),this.setPosition(ut(t.location,t.scale,this.scale)),this}setPosition(t){super.setPosition(t),this._x.setValue(t.x),this.vx.setValue(t.y);const i=du(n(this._x.getValue(),this.vx.getValue()),this.axisX,this.axisY);return this._x.setGridStrokeLength(this.Sx?i.x:1),this.vx.setGridStrokeLength(this.bx?i.y:1),this}ke(){this._x.setVisible(this.Pi&&this.cb).setMarkerVisible(this.Pi&&this.cb&&this.ux),this.vx.setVisible(this.Pi&&this.cb).setMarkerVisible(this.Pi&&this.cb&&this.gx);const t=du(n(this._x.getValue(),this.vx.getValue()),this.axisX,this.axisY);return this._x.setGridStrokeLength(this.Sx?t.x:1),this.vx.setGridStrokeLength(this.bx?t.y:1),super.ke()}setGridStrokeXCut(t){return this.Sx=t,this.ks.vs(),this}getGridStrokeXCut(){return this.Sx}setGridStrokeYCut(t){return this.bx=t,this.ks.vs(),this}getGridStrokeYCut(){return this.bx}setGridStrokeXStyle(t){return this._x.setGridStrokeStyle(t),this}getGridStrokeXStyle(){return this._x.getGridStrokeStyle()}setTickMarkerXVisible(t){return this.ux=t,this.ks.vs(),this}getTickMarkerXVisible(){return this.ux}setTickMarkerYVisible(t){return this.gx=t,this.ks.vs(),this}getTickMarkerYVisible(){return this.gx}setTickMarkerX(t){return this._x.setMarker(t),this}setTickMarkerY(t){return this.vx.setMarker(t),this}getTickMarkerX(){return this._x.getMarker()}getTickMarkerY(){return this.vx.getMarker()}}class gu extends Sl{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,o),this.Sx=!1,this.bx=!1,this.Ax=!1,this.wx=!1,this.kx=new Map,this.Cx=new Map,this.ux=!0,this.gx=!0,this.fb=e,this.gb=h,this.xx=r,this.Mx=n,this.Tx=o.cursorGridStrokeStyleX,this.Fx=o.cursorGridStrokeStyleY}dispose(){return super.dispose(),this.kx.forEach((t=>t.dispose())),this.Cx.forEach((t=>t.dispose())),this.Ix=void 0,this.Px=void 0,this}ke(){return this.Ix&&this.Ix.setVisible(this.Pi&&this.cb).setMarkerVisible(this.Pi&&this.cb&&this.ux),this.Px&&this.Px.setVisible(this.Pi&&this.cb).setMarkerVisible(this.Pi&&this.cb&&this.gx),super.ke()}pointAt(t){const{location:i}=t,{series:s}=t,{axisX:e}=s,{axisY:h}=s,r=this.ah(e,!0),o=this.ah(h,!1);r!==this.Ix&&this.Ix&&this.Ix.setVisible(!1),o!==this.Px&&this.Px&&this.Px.setVisible(!1),r.setValue(i.x),o.setValue(i.y);const a=du(n(i.x,i.y),e,h);return r.setGridStrokeLength(this.Sx?a.x:1),o.setGridStrokeLength(this.bx?a.y:1),this.Ix=r,this.Px=o,super.pointAt(t)}Sb(t){if(super.Sb(t),t){const i=i=>i.setTextFillStyle(t);this.Ix&&this.Ax&&this.Ix.setMarker(i),this.Px&&this.wx&&this.Px.setMarker(i)}}ah(t,i){let s=(i?this.kx:this.Cx).get(t);return s||(i?(s=t.Lg(!1,this.xx),this.kx.set(t,s)):(s=t.Lg(!1,this.Mx),this.Cx.set(t,s)),this.Qh(s,i),s.setMouseInteractions(!1).setAllocatesAxisSpace(!1)),s}Qh(t,i){const s=i?this.Tx:this.Fx;return t.setGridStrokeStyle(s),t.setMouseInteractions(!1),(i?this.ux:this.gx)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.Sx=t,this.ks.vs(),this}getGridStrokeXCut(){return this.Sx}setGridStrokeYCut(t){return this.bx=t,this.ks.vs(),this}getGridStrokeYCut(){return this.bx}setGridStrokeXStyle(t){return this.Tx=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.kx.forEach((t=>t.setGridStrokeStyle(this.Tx))),this}getGridStrokeXStyle(){return this.Tx}setGridStrokeYStyle(t){return this.Fx=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.Cx.forEach((t=>t.setGridStrokeStyle(this.Fx))),this}getGridStrokeYStyle(){return this.Fx}setTickMarkerXVisible(t){return this.ux=t,this.ks.vs(),this}getTickMarkerXVisible(){return this.ux}setTickMarkerYVisible(t){return this.gx=t,this.ks.vs(),this}getTickMarkerYVisible(){return this.gx}setTickMarkerX(t){return this.kx.forEach((i=>i.setMarker(t))),this.xx=this.xx.addStyler(t),this.ks.vs(),this}setTickMarkerY(t){return this.Cx.forEach((i=>i.setMarker(t))),this.Mx=this.Mx.addStyler(t),this.ks.vs(),this}setTickMarkerXAutoTextStyle(t){return this.Ax=t,this.ks.vs(),this}getTickMarkerXAutoTextStyle(){return this.Ax}setTickMarkerYAutoTextStyle(t){return this.wx=t,this.ks.vs(),this}getTickMarkerYAutoTextStyle(){return this.wx}}class mu extends vl{constructor(t,i,s,e,h){super(t,i,h),this.fb=t,this.gb=i,this.xx=s,this.Mx=e,this.bb=h}}class yu extends mu{constructor(){super(...arguments),this.xb=(t,i,s,e)=>this.vb(new gu(t,i,s,this.fb,this.gb,this.xx,this.Mx,e),e),this.addStyler=t=>new yu(this.fb,this.gb,this.xx,this.Mx,this.bb.map((t=>t)).concat(t)),this.setPointMarker=t=>new yu(t,this.gb,this.xx,this.Mx,this.bb.map((t=>t))),this.setResultTableBackground=t=>new yu(this.fb,t,this.xx,this.Mx,this.bb.map((t=>t)))}}class pu extends mu{constructor(){super(...arguments),this.Mb=(t,i,s,e,h)=>this.vb(new fu(t,i,s,e,this.fb,this.gb,this.xx,this.Mx,h),h),this.addStyler=t=>new pu(this.fb,this.gb,this.xx,this.Mx,this.bb.map((t=>t)).concat(t)),this.setPointMarker=t=>new pu(t,this.gb,this.xx,this.Mx,this.bb.map((t=>t))),this.setResultTableBackground=t=>new pu(this.fb,t,this.xx,this.Mx,this.bb.map((t=>t)))}}const Su=new yu(jr,jr,Dn.PointableTextBox,Dn.PointableTextBox,[(t,i)=>{_l(t),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),Tr(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),Tr(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),bu=new pu(Xr,jr,Dn.PointableTextBox,Dn.PointableTextBox,[(t,i)=>{Al(t,i),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),Tr(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),Tr(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),vu=(t,i,s)=>{switch(t){case _t.always:return!0;case _t.never:return!1;case _t.whenDragged:return s;case _t.whenHovered:return i&&!s;case _t.whenHoveredOrDragged:return s||i;case _t.whenNotDragged:return!s;default:return!1}},xu=(t,i)=>Math.min(Math.max(t,i.getInnerStart()),i.getInnerEnd());class Mu{constructor(t,i,e,h,r,o){this.Dx=_t.always,this.Bx=_t.always,this.po=!0,this.Ii=!1,this.Ox=!1,this.Lx=!1,this.Xo=n(0,0),this.Zu=At.draggable,this.Ku=void 0,this.I=new s,this.Pi=!0,this.Rx=(t,i,s)=>{this.Ox=!0,this.ks.vs();const e=this.Zu===At.notDraggable?this.Zu:s||this.Zu;this.Ku=this.ks.cs.Ir(e===At.notDraggable?Ie.Restricted:e===At.draggable?Ie.Move:e===At.onlyHorizontal?Ie.Horizontal:Ie.Vertical)},this.Ex=()=>{this.Ox=!1,this.ks.vs(),this.ks.cs.Pr(this.Ku)},this.zx=(t,i)=>{this.Lx=!0,ri(i),this.ks.vs()},this.Vx=(t,i)=>{if(this.Zu!==At.notDraggable){const s=i||this.Zu,e=ut(this.ks.cs.Fe(t.x,t.y),this.ks.cs.ut,this.scale),h=n(s!==At.onlyVertical?xu(e.x,this.scale.x):this.Xo.x,s!==At.onlyHorizontal?xu(e.y,this.scale.y):this.Xo.y);return this.setPosition(h),!0}return!1},this.Nx=(t,i)=>{this.Lx=!1,ri(i),this.ks.vs()},this.onDispose=t=>this.I.on("dispose",t),this.offDispose=t=>this.I.off(t,"dispose"),this.ks=t,this.renderingScale=i,this.scale=e,this.Jb=h,this.Gx=r,this.ts=o;const a=h.getPointMarker().setMouseInteractions(!0);a.onMouseEnter(((t,i)=>this.Rx(t,i))),a.onMouseLeave(this.Ex),a.onMouseDragStart(this.zx),a.onMouseDrag(((t,i)=>this.Vx(n(i.clientX,i.clientY))&&ri(i))),a.onMouseDragStop(this.Nx),a.onTouchStart(this.zx),a.onTouchMove(((t,i)=>this.Vx(n(i.clientX,i.clientY))&&ri(i))),a.onTouchEnd(this.Nx),h.getResultTable().setMouseInteractions(!0),this.setPosition(this.Xo)}setPosition(t){return this.Xo=t,this.Jb.setPosition(t),this.I.emit("positionChange",this,this.Xo),this}getPosition(){return this.Xo}onPositionChange(t){return this.I.on("positionChange",t)}offPositionChange(t){return this.I.off(t,"positionChange")}setPointMarkerVisibility(t){return this.Dx=t,this.ks.vs(),this}getPointMarkerVisibility(){return this.Dx}setResultTableVisibility(t){return this.Bx=t,this.ks.vs(),this}getResultTableVisibility(){return this.Bx}setMouseInteractions(t){return this.po=t,this.Jb.getPointMarker().setMouseInteractions(t),this.Jb.getResultTable().setMouseInteractions(t),this}getMouseInteractions(){return this.po}setAutoFitStrategy(t){return this.Jb.setAutoFitStrategy(t),this}getAutoFitStrategy(){return this.Jb.getAutoFitStrategy()}isAttached(){return!0}ke(){const t=this.isAttached();return vu(this.Dx,this.Ox,this.Lx)?this.Jb.setPointMarkerVisible(!0):this.Jb.setPointMarkerVisible(!1),t&&vu(this.Bx,this.Ox,this.Lx)?this.Jb.setResultTableVisible(!0):this.Jb.setResultTableVisible(!1),this.Jb.ke(),this}Is(){return this.Jb.Is(),this}pointAt(t){return this.Jb.pointAt(t),this}dispose(){return this.Ii||(this.Ii=!0,this.Gx(this),this.Jb.dispose(),this.I.emit("dispose")),this}setVisible(t){const i=this.Pi!==t;return this.Pi=t,this.Jb.setVisible(t),i&&this.I.emit("visibleStateChanged",this,this.Pi),this}getVisible(){return this.Pi}onVisibleStateChanged(t){return this.I.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.I.off(t,"visibleStateChanged")}setPointMarker(t){return this.Jb.setPointMarker(t),this}getPointMarker(){return this.Jb.getPointMarker()}setResultTable(t){return this.Jb.setResultTable(t),this}getResultTable(){return this.Jb.getResultTable()}setDraggingMode(t=At.notDraggable){return this.Zu=t,this.ks.vs(),this}getDraggingMode(){return this.Zu}}class _u extends Mu{constructor(t,i,s,e,h,r){super(t,i,s,e.Mb(t,i,s,r),h,r)}}class Au extends Mu{constructor(t,i,s,e,h,r,o){super(t,i,Ws(s.ut,e.ut),h.Mb(t,i,s,e,o),r,o),this.Wx=_t.always,this.Hx=_t.always,this.Ux=_t.always,this.$x=_t.always,this.gridStrokeStyleX=this.Jb.getGridStrokeXStyle(),this.gridStrokeStyleY=this.Jb.getGridStrokeYStyle(),this.ks=t,this.axisX=s,this.axisY=e,this.Gx=r;const a=this.Jb.getTickMarkerX().setMouseInteractions(!0);a.onMouseEnter(((t,i)=>this.Rx(t,i,At.onlyHorizontal))),a.onMouseLeave(this.Ex),a.onMouseDragStart(this.zx),a.onMouseDrag(((t,i)=>this.Vx(n(i.clientX,i.clientY),At.onlyHorizontal)&&ri(i))),a.onMouseDragStop(this.Nx),a.onTouchStart(this.zx),a.onTouchMove(((t,i)=>this.Vx(n(i.clientX,i.clientY),At.onlyHorizontal)&&ri(i)));const l=this.Jb.getTickMarkerY().setMouseInteractions(!0);l.onMouseEnter(((t,i)=>this.Rx(t,i,At.onlyVertical))),l.onMouseLeave(this.Ex),l.onMouseDragStart(this.zx),l.onMouseDrag(((t,i)=>this.Vx(n(i.clientX,i.clientY),At.onlyVertical)&&ri(i))),l.onMouseDragStop(this.Nx),l.onTouchStart(this.zx),l.onTouchMove(((t,i)=>this.Vx(n(i.clientX,i.clientY),At.onlyVertical)&&ri(i)))}ke(){const t=this.isAttached();return this.Pi&&t&&vu(this.Ux,this.Ox,this.Lx)?this.Jb.setTickMarkerXVisible(!0):this.Jb.setTickMarkerXVisible(!1),this.Pi&&t&&vu(this.$x,this.Ox,this.Lx)?this.Jb.setTickMarkerYVisible(!0):this.Jb.setTickMarkerYVisible(!1),this.Jb.setGridStrokeXStyle(this.Pi&&t&&vu(this.Wx,this.Ox,this.Lx)?this.gridStrokeStyleX:rt),this.Jb.setGridStrokeYStyle(this.Pi&&t&&vu(this.Hx,this.Ox,this.Lx)?this.gridStrokeStyleY:rt),super.ke()}setGridStrokeXVisibility(t){return this.Wx=t,this.ks.vs(),this}getGridStrokeXVisibility(){return this.Wx}setGridStrokeYVisibility(t){return this.Hx=t,this.ks.vs(),this}getGridStrokeYVisibility(){return this.Hx}setTickMarkerXVisibility(t){return this.Ux=t,this.ks.vs(),this}getTickMarkerXVisibility(){return this.Ux}setTickMarkerYVisibility(t){return this.$x=t,this.ks.vs(),this}getTickMarkerYVisibility(){return this.$x}setGridStrokeXCut(t){return this.Jb.setGridStrokeXCut(t),this}getGridStrokeXCut(){return this.Jb.getGridStrokeXCut()}setGridStrokeYCut(t){return this.Jb.setGridStrokeYCut(t),this}getGridStrokeYCut(){return this.Jb.getGridStrokeYCut()}setGridStrokeXStyle(t){return this.gridStrokeStyleX="function"==typeof t?t(this.gridStrokeStyleX):t,this}getGridStrokeXStyle(){return this.Jb.getGridStrokeXStyle()}setGridStrokeYStyle(t){return this.gridStrokeStyleY="function"==typeof t?t(this.gridStrokeStyleY):t,this}getGridStrokeYStyle(){return this.Jb.getGridStrokeYStyle()}setTickMarkerX(t){return this.Jb.setTickMarkerX(t),this}getTickMarkerX(){return this.Jb.getTickMarkerX()}setTickMarkerY(t){return this.Jb.setTickMarkerY(t),this}getTickMarkerY(){return this.Jb.getTickMarkerY()}setMouseInteractions(t){return super.setMouseInteractions(t),this.Jb.getTickMarkerX().setMouseInteractions(t),this.Jb.getTickMarkerY().setMouseInteractions(t),this}}class wu extends Au{}class ku extends wu{constructor(t,i,s,e,h,r){super(t,i,s.axisX,s.axisY,e,h,r),this.jx=!1,this.ks=t,this.owningSeries=s}setPosition(t){return super.setPosition(t),this.jx=!1,this.ks.vs(),this}Is(){if(!this.jx){const t=this.owningSeries.solveNearestFromScreen(ut(this.Xo,this.scale,this.ks.cs.ut));t?(this.Xo=ut(t.location,this.owningSeries.scale,this.scale),this.Jb.pointAt(t),this.jx=!0):this.Jb.setPosition(this.Xo)}return super.Is()}isAttached(){return this.jx}}class Cu extends Ql{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,a,l),this.Yx=[],this.addMarker=(t=bu)=>{const i=new ku(this.Xx(),this.Ji.uiScale,this,t,this.removeMarker,this.ts);return this.Yx.push(i),i},this.removeMarker=t=>{const i=this.Yx.indexOf(t);-1!==i&&this.Yx.splice(i,1)},this.ss=new Map,this.chart=t,this.ks=s,this.axisX=e,this.axisY=h,this.axisXAttachHandler=r,this.axisYAttachHandler=n,this.Xx=o,this.scale=Ws(e.ut,h.ut),this.Zx=t.Kx,t.Kx+=1,this.qx(this.scale),this.attacheAxis(),this.onMouseEnter(this.chart.Jx),this.onMouseLeave(this.chart.Qx),this.onMouseWheel(this.chart.ep),this.onMouseDragStart(this.chart.tM),this.onMouseDrag(this.chart.hp),this.onMouseDragStop(this.chart.iM),this.onTouchStart(this.chart.rp.onTouchStart),this.onTouchMove(this.chart.rp.onTouchMove),this.onTouchEnd(this.chart.rp.onTouchEnd)}attacheAxis(){this.sM=this.axisXAttachHandler(this),this.eM=this.axisYAttachHandler(this)}ke(){super.ke();for(let t=0;t<this.Yx.length;t+=1)this.Yx[t].Is().ke()}fs(t,i){super.fs(t,i),t.Lo(this.Zx)}setDrawOrder(t){return this.Zx=t.seriesDrawOrderIndex,this.ss.forEach(((t,i)=>{i.Lo(this.Zx)})),this.Ji.cs.vs(),this}dispose(){return super.dispose(),this.Yx.slice().forEach((t=>t.dispose())),this.sM(this),this.eM(this),this}hM(){for(let t=0;t<this.Yx.length;t+=1)this.Yx[t].setPosition(this.Yx[t].getPosition());this.ks.vs()}getBoundaries(){return c(n(this.getXMin()||0,this.getYMin()||0),n(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const Tu=(t,i,s,e)=>{const h=t.length;let r=0;if(void 0!==i){const h=s-i;if(h>0){const i=t.slice(r,h);r+=h,e(i,!0)}}for(;r<h;){const i=t.slice(r,r+s);r+=s,e(i,!1)}},Fu=(t,i=(t=>t))=>{const s=[];let e;for(let h=0;h<t.length;h+=1){e=t[h];const r=i(e.Va()),n=e.za(),o=n?i(n):[];let a=!1,l=!1;"xl"in e&&(a=e.xl(),l=e._l()),s.push.apply(s,r.slice(a?1:0,r.length-(l&&0===o.length?1:0))),s.push.apply(s,o.slice(a&&0===r.length?1:0,o.length-(l?1:0)))}return s},Iu=(t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:e+i*s,y:t[s]};return h},Pu=(t,i,s,e)=>t.addRow(i.getName()).addRow("X","",i.axisX.formatValue(s)).addRow("Y","",i.axisY.formatValue(e));class Du extends Cu{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,l,u),this.rM=[],this.tu=[],this.nM=0,this.Di=!1,this.Fi=Ys.onHover,this.zb=Pu,this.oM=a}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.nM=void 0!==i&&i>0?i:0,this.ks.vs(),this}add(t){if(Array.isArray(t)?this.aM(t):this.aM([t]),this.tu.length>0){const t=this.tu[this.tu.length-1];this.lM={x:t.x,y:t.y}}return this}addArrayX(t,i=1,s){let e=s;return e||(e=this.lM?this.lM.y+i:0),this.add(((t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:t[s],y:e+i*s};return h})(t,i,e)),this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.lM?this.lM.x+i:0),this.add(Iu(t,i,e)),this}addArraysXY(t,i){if(t.length!==i.length)throw new Error("arrayX and arrayY lengths are not equal");return this.add(((t,i)=>{const s=new Array(t.length);for(let e=0;e<t.length;e+=1)s[e]={x:t[e],y:i[e]};return s})(t,i)),this}setCursorResultTableFormatter(t){return this.zb=t,this.Ji.cs.vs(),this}getCursorResultTableFormatter(){return this.zb}getPointAmount(){return this.rM.reduce(((t,i)=>t+i.ja()+i.Ya()),this.tu.length)}clear(){this.uM=void 0;for(let t=0;t<this.rM.length;t+=1)this.rM[t].$a();return this.tu.length=0,this.lM=void 0,this.ks.vs(),this.I.emit("dataClear",this),this}getLastPoint(){return this.lM}Qy(){return this.ip&&this.getPointAmount()>0&&this.getVisible()}getXMax(){return this.oM.getXMax(this.rM,this.uM)||0}getXMin(){return this.oM.getXMin(this.rM,this.uM)||0}getYMax(){return this.oM.getYMax(this.rM,this.uM)||0}getYMin(){return this.oM.getYMin(this.rM,this.uM)||0}dr(){const t=n(0,0);for(const i of this.rM)t.x=Math.max(t.x,i.hl()),t.y=Math.max(t.y,i.rl());return t}cM(t,i,s,e){this.oM.cM(t,i,s,e,this.scale,(t=>{}))}ap(){super.ap();const t=this.rM.length;this.dM&&this.cM(this.rM,this.getPointAmount(),this.dM,this.nM),t!==this.rM.length&&this.hM()}ke(){super.ke();const t=this.getBoundaries();this.tu.length>0&&(this.fM(this.tu),this.tu=[]);for(const i of this.rM)i.To(t);return super.ke()}my(){super.my(),this.uM=void 0,this.tu.length=0}aM(t){0!==t.length&&(this.uM?this.uM=ts(this.uM,Ji(t)):this.uM=Ji(t),this.I.emit("dataAdd",this,t,this.uM),this.tu=gi(this.tu,t,{canReturnB:!1}),this.ks.vs())}gM(){return Fu(this.rM)}mM(t){return this.I.on("dataAdd",t)}yM(t){return this.I.off(t)}pM(t){return this.I.on("dataClear",t)}SM(t){return this.I.off(t)}}const Bu=(t,i,s,e)=>{let h,r,n=Number.MAX_VALUE;for(let o=0;o<i.length;o+=1){const a=i[o],l=s(a,t);if(l){const i=e(t,l);(void 0===h||i<n)&&(h=l,r=a,n=i)}}return h&&r?[h,r]:void 0};class Ou extends tu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Ms="Polygon Series",this.bM=[],this.vM=[],this.zb=iu,this.xM=t=>{const i=this.vM.indexOf(t);i>=0&&this.vM.splice(i,1);const s=this.bM.findIndex((i=>i===t.ka));s>=0&&this.bM.splice(s,1),this.ks.vs()},this.ve=Mi(this.ts.polarPolygonSeriesFillStyle,r),this.xe=Mi(this.ts.polarPolygonSeriesStrokeStyle,r)}setCursorResultTableFormatter(t){return this.zb=t,this.Ji.cs.vs(),this}getCursorResultTableFormatter(){return this.zb}addPolygon(){const t=new cu(this.Ji,this.xM,this,this.MM());return this.vM.push(t),t}setFillStyle(t){this.ve="function"==typeof t?t(this.ve):t;const i=this.ve;for(const t of this.bM)t.Ae(i);return this.ks.vs(),this}getFillStyle(){return this.ve}setStrokeStyle(t){this.xe="function"==typeof t?t(this.xe):t;const i=this.xe;for(const t of this.bM)t._e(i);return this.ks.vs(),this}getStrokeStyle(){return this.xe}Qy(){return this.ip&&void 0!==this.vM.find((t=>void 0!==t._M))&&this.getVisible()}ke(){this.vM.forEach((t=>{(t.nx||this.scale.tx())&&t.AM&&(t.ka.sl(su(t.AM,this.scale)),t.nx=!1,t.ka.Is())}))}ap(){super.ap();const t=c(Ri,Ei);this.vM.forEach((i=>{if(!i.lx)return;const s=!i.nx&&i.AM?i.AM:hu(i.lx);i.AM=s;const e=!i.nx&&i._M?i._M:eu(s);i._M=e,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)})),this.Hv=t}Te(t,i){t.ds(i),this.ks.vs()}Pb(t,i){const s=Bu(t,this.bM,((t,i)=>{const s=t.Pb(i);if(s)return ut(s,this.scale,t.cs.ut)}),Yi);if(!s)return;const e=ut(s[0],s[1].cs.ut,this.scale),h=this.wM(s[1]);if(!h)return;const{angle:r,amplitude:n}=ru(e,this.scale);return{location:e,scale:this.scale,resultTableContent:this.zb(new ml,this,r,n,this.Ji.getAmplitudeAxis().formatValue)._c(),series:this,fillStyle:this.ve,polarPolygon:h}}solveNearestFromScreen(t){return this.Pb(ao(t,this.Ji.cs),!1)}attach(t,i=!0){return super.attach(t,i),Si(t,this.ts,{fill:this.ve,stroke:this.xe}),this}MM(){const t=this.ks.Fc(this.scale,lr.Simple).Ae(this.ve)._e(this.xe).ds(this.getHighlight());return this.bM.push(t),this.fs(t),t}wM(t){return this.vM.find((i=>i.ka===t))}}class Lu extends tu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Ms="Area Series",this.Xv=[],this.Zv=!1,this.Kv=!1,this.kM=!1,this.zb=iu,this.ve=Mi(this.ts.polarAreaSeriesFillStyle,r),this.xe=Mi(this.ts.polarAreaSeriesStrokeStyle,r)}setCursorResultTableFormatter(t){return this.zb=t,this.Ji.cs.vs(),this}getCursorResultTableFormatter(){return this.zb}setData(t){const i=(t=>{const i=[];let s,e,h=!1;for(let r=0;r<t.length;r+=1){const n=t[r];let o=!0;if(s){o=!1;const t=n.angle-s.angle;if(Ot(t,0))o=!0;else{const i=Math.sign(t);void 0===e?(e=i,o=!0):e===i&&(o=!0)}}o?i.push(n):h=!0,s=n}return{progressivePoints:i,userDataModified:h}})(t);return i.userDataModified&&!1===this.kM&&(console.warn(`${this.Ms} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.kM=!0),this.Xv=i.progressivePoints,this.Zv=!0,this.Hv=eu(this.Xv),this.ks.vs(),this}setFillStyle(t){return this.ve="function"==typeof t?t(this.ve):t,this.ks.vs(),this}getFillStyle(){return this.ve}setStrokeStyle(t){return this.xe="function"==typeof t?t(this.xe):t,this.ks.vs(),this}getStrokeStyle(){return this.xe}setConnectDataAutomaticallyEnabled(t){return this.Kv=t,this.ks.vs(),this}getConnectDataAutomaticallyEnabled(){return this.Kv}Qy(){return this.ip&&this.Xv.length>0&&this.getVisible()}attach(t,i=!0){return super.attach(t,i),Si(t,this.ts,{fill:this.ve,stroke:this.xe}),this}}class Ru extends Lu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.CM=this.ks.Fc(this.scale,lr.Simple).ds(this.getHighlight()),this.fs(this.CM)}ke(){if(this.Zv||this.scale.tx()){const t=this.Xv,i=!0===this.Kv?su(t.concat((t=>{if(0===t.length)return t;const i=t[0],s=t[t.length-1];if(Ot(i.angle,s.angle))return t;const e=1*Math.sign(s.angle-i.angle);let h=0;const r=[];for(let t=s.angle+e;!Ot(t%360,i.angle%360);t+=e)if(r.push({angle:t,amplitude:0}),h+=1,h>360)return[];for(let t=0;t<r.length;t+=1)r[t].amplitude=On(s.amplitude,i.amplitude,(t+1)/(r.length+1));return r})(t)),this.scale):[...su(t,this.scale),{x:0,y:0}];this.CM.sl(i).Ae(this.ve)._e(this.xe),this.Zv=!1,this.CM.Is()}}Te(t,i){t.ds(i),this.ks.vs()}Pb(t,i){const s=this.CM.Pb(t);if(!s)return;const{angle:e,amplitude:h}=ru(s,this.scale);return Il(s,this.scale,this.zb(new ml,this,e,h,this.Ji.getAmplitudeAxis().formatValue)._c(),this,this.ve)}solveNearestFromScreen(t){return this.Pb(ao(t,this.Ji.cs),!1)}}class Eu extends Vs{constructor(){super(...arguments),this.wi="RadialScale",this.TM={start:0,end:1},this.FM=!1,this.IM=0,this.$=n(0,0),this.PM=[0,0],this.DM=[0,0],this.i=!0,this.hi=!0,this.BM=!0,this.OM=!0,this.LM={x:0,y:0},this.Kt={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}Tv(t,i){return t===this.TM.start&&i===this.TM.end||(this.TM={start:t,end:i},this.BM=!0,this.RM()),this}Cv(){return this.TM}kv(){return this.TM.end>=this.TM.start}Lv(t){this.FM=t,this.OM=!0}Ev(){return!1===this.FM}Rv(t){this.IM=t,this.OM=!0}Dv(){return this.IM}ii(){return this.hi}ai(){return!1}rt(t,i,s,e){return this.x=new Es(t.x,i.x,s.x,e?e.x:void 0),this.y=new Es(t.y,i.y,s.y,e?e.y:void 0),this}si(){return this.Kt}tx(){return this.BM}EM(){return this.OM}ki(){return this.LM}j(){return this.i=!1,this.hi=!1,this.BM=!1,this.OM=!1,this}Y(){return this.i=!0,this.hi=!0,this.BM=!0,this.OM=!0,this}K(t,i){return"object"==typeof t?(this.$.x=t.x,this.$.y=t.y):(this.$.x=t,this.$.y=i),this.RM(),this}vi(t){return this.PM=t,this.RM(),this}xi(t){return this.DM=t,this.RM(),this}Ut(){return n(this.PM[0]+this.PM[1],this.DM[0]+this.DM[1])}$t(){return this.$}RM(){const t=this.TM,i=n(this.x.jt(this.$.x),this.y.jt(this.$.y)),s=this.PM[0]+this.PM[1],e=this.DM[0]+this.DM[1],h=Math.max(i.x-s,0),r=Math.max(i.y-e,0),o=.5*(h>r?r:h),a=[this.PM[0]+Math.max((h-2*o)/2,0),this.PM[1]+Math.max((h-2*o)/2,0)],l=[this.DM[0]+Math.max((r-2*o)/2,0),this.DM[1]+Math.max((r-2*o)/2,0)],u=Math.abs(t.end-t.start);this.x.K(this.$.x).Nt(a).X(-u,u),this.y.K(this.$.y).Nt(l).X(-u,u),this.LM={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.Kt={x:this.x.si(),y:this.y.si()},this.Y()}ti(t,i){const s=this.ki();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}Ci(t,i,s,e){const h=this.ki(),r=as(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class zu extends Vl{constructor(t,i,s,e,h,r,n){super(t,i,s,i.om("polarChart bg",0),e,i.cs.ts.polarChartBackgroundFillStyle,i.cs.ts.polarChartBackgroundStrokeStyle,i.cs.ts.polarChartTitleFont,i.cs.ts.polarChartTitleFillStyle,n),this.coordsClient="client",this._b=zl.snapToClosest,this.sf=[],this.po=!0,this.zM=(t,i,s,e,h)=>{this.gv.K(e,h)},this.rf=ai(this.sf),this.VM=t=>{this.sf.push(t)},this.NM=()=>this.Mp,this.mf.Cn||this.mf.kn||this.cs.An(4),this.GM=i.LS("polarChart series bg",0),this.WM=i.Xm("polarChart axis gridlines",0),this.HM=i.Xm("polarChart series",1),this.UM=i.Xm("polarChart axis lines",2),this.$M=i.Xm("polarChart axis ticks",3),this.gv=s.d2({scaleXYConstructor:Eu}),this.onResize(this.zM),this.dm.Fh("Polar Chart");const o=Gt(r?r.autoCursorBuilder:void 0,Tl);this.Ib=o.xb(this.wb,this.uiScale,this.uiScale,this.ts),this.Fp=this.GM.Oc(this.gv).Ae(this.ts.polarChartSeriesBackgroundFillStyle)._e(rt).Wl(0).Le(360).jl(0),this.Ip=this.GM.Oc(this.gv).Ae(R)._e(this.ts.polarChartSeriesBackgroundStrokeStyle).Wl(0).Le(360).jl(0),super.Tp(this.Fp,this.Ip),this.nm(h,this.pixelScale),this.jM=new $l(this,this.gv,this.ts,!(!r||!0!==r.disableAnimations),this.WM,this.UM,this.$M,this.hs,this.NM),this.YM=new Yl(this,this.gv,this.ts,!(!r||!0!==r.disableAnimations),this.WM,this.UM,this.$M,this.hs),this.coordsAxis={axisAmplitude:this.jM,axisRadial:this.YM},r&&!0===r.disableAnimations&&this.setAnimationsEnabled(!1)}getSeries(){return this.Mp}translateCoordinate(t,i,s){if(s){const i=t,e=this.pixelScale,h=s;if(Hs(h)){const t=ut(i,e,this.engine.scale);return this.cs.yo({engineX:t.x,engineY:t.y})}if($s(h))return i;if(Kl(h)){const t=ut(i,e,this.gv);return ru(t,this.gv)}}else{const s=t,e=i;if(Us(s)){if(Kl(e)){const t=this.cs.mo(s),i=ut({x:t.engineX,y:t.engineY},this.engine.scale,this.gv);return ru(i,this.gv)}if(Hs(e))return s;if($s(e)){const t=this.cs.mo(s);return ut({x:t.engineX,y:t.engineY},this.cs.ut,this.pixelScale)}}else if(ql(s)){if(Kl(e))return s;const t=su([s],this.gv)[0];if(Hs(e)){const i=ut(t,this.gv,this.engine.scale),s={engineX:i.x,engineY:i.y};return this.cs.yo(s)}if($s(e))return ut(t,this.gv,this.pixelScale)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const i=new au(this.HM,this,this.Ap,this.gv,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length,this.cs.hs);return this.Pp(i),i}addPointSeries(t){const i=new uu(this.HM,this,this.Ap,this.gv,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length,this.cs.hs);return this.Pp(i),i}addPointLineSeries(t){const i=new lu(this.HM,this,this.Ap,this.gv,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length,this.cs.hs);return this.Pp(i),i}addAreaSeries(t){const i=new Ru(this.HM,this,this.Ap,this.gv,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length,this.cs.hs);return this.Pp(i),i}addPolygonSeries(t){const i=new Ou(this.HM,this,this.Ap,this.gv,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length,this.cs.hs);return this.Pp(i),i}addHeatmapSeries(t){const i=new nu(this.HM,this,this.Ap,this.gv,this.ts,this.cs.hs,t);return this.Pp(i),i}addSector(){const t=new Jl(this.HM,this,this.rf,this.gv,this.ts,this.cs.hs);return this.VM(t),t}getAmplitudeAxis(){return this.jM}getRadialAxis(){return this.YM}ke(t){var i,s;super.ke(t),oa.Sm(this.dm,this.am);for(const t of this.Mp)t.ap();this.jM.gr(),this.YM.gr();for(const t of this.Mp)t.ke();for(let t=1;t<=2;t+=1){const i=this.jM.ke(),s=this.YM.ke(),e=oa.pm(this.dm,this.am),h=[this.ia.left+s,this.ia.right+s],r=[this.ia.bottom+s,this.ia.top+s+e];this.gv.vi(h).xi(r);const n=4;if(!(!this.XM||Math.abs(this.XM.amplitude-i)>=n||Math.abs(this.XM.radial-s)>=n)||1!==t){this.XM={amplitude:i,radial:s};break}}const e=this.gv.Cv().start,h=this.gv.Cv().end,r=this.gv.kv()?((null===(i=this.XM)||void 0===i?void 0:i.radial)||0)*this.gv.x.getPixelSize()+h-e:((null===(s=this.XM)||void 0===s?void 0:s.radial)||0)*this.gv.x.getPixelSize()+e-h;this.Fp.Hl(r).Yl(360),this.Ip.Hl(r).Yl(360);for(const t of this.sf)t.ke();this.Db(!1);for(const t of this.Mp)t.my();return super.rm(),this.ZM(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.jM.setAnimationsEnabled(t),this.YM.setAnimationsEnabled(t),this}setMouseInteractions(t){return this.po=t,this}getMouseInteractions(){return this.po}getMinimumSize(){return n(Vu,Vu)}ZM(){}forEachAxis(t){return t(this.jM),t(this.YM),this}dispose(){return this.GM.N(),this.WM.N(),this.HM.N(),this.UM.N(),this.$M.N(),this.sf.slice().forEach((t=>t.dispose())),super.dispose()}vd(){return[...this.Mp,...this.sf]}}const Vu=300;class Nu extends ca{}class Gu extends Nu{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.Ms="Slice",this.l=0,this.bm=!1,this.KM=R,this.xm=R,this.Mm=this.l,this.wm=Z((()=>this.Ji.cs.vs())),this.Cm=()=>{this.Tm=void 0},this.index=t,this.Ji=e,this.scale=h,this.Qi=r,this.CM=i.Fc(h,lr.Simple).ds(this.getHighlight()),this.fs(this.CM),this.Ge=s.vr(h).ds(this.getHighlight()),this.fs(this.Ge,{isText:!0})}setValue(t){return this.Ji.getAnimationsEnabled()?this.getVisible()&&this.Dm(this.Mm,t):this.Mm=t,this.l=t,this.Ji.cs.vs(),this}getValue(){return this.l}setVisible(t){return!1===t?this.Ji.getAnimationsEnabled()&&this.Mm>0?(this.Tm&&(this.Tm.finish(!1),this.Tm=void 0),this.Dm(this.Mm,0,(()=>super.setVisible(!1)))):(this.Mm=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(this.Tm&&(this.Tm.finish(!1),this.Tm=void 0),super.setVisible(!0),this.Dm(this.Mm,this.l)):(this.Mm=this.l,super.setVisible(!0)),this}Dm(t,i,s){this.Tm=this.wm(300,Y.ease)([[t,i]],(([t])=>{this.Mm=t,this.Ji.cs.vs()})),this.Tm.onEveryAnimationEnd(this.Cm),s&&this.Tm.onAnimationEnd(s)}setStyle(t,i,s,e){this.KM=t,this.xm=s,this.CM.Ae(this.KM)._e(i),this.Ge.Ae(this.xm).Dh(e);for(let t=0;t<this.Oi.length;t+=1)this.styleAttachedEntry(this.Oi[t])}getAnimatedValue(){return this.Mm}Te(t,i){return t.ds(i),this.Ji.cs.vs(),this}attach(t,i=!0){return super.attach(t,i),this.styleAttachedEntry(t),this}styleAttachedEntry(t){Si(t,this.ts,{fill:this.KM,stroke:this.CM.jn()})}}var Wu;!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(Wu||(Wu={}));const Hu=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},Uu=(t,i,s,e,h,r=0,n=Wu.VariableHeight,o)=>{i=Hu(i,e.x),s=Hu(s,e.x);const a=t.length;let l=0,u=0;l=t.reduce(((t,i)=>t+i.getAnimatedValue()),0);let c={x:o-i/2,y:e.y+h.bottom},d={x:o+i/2,y:e.y+h.bottom},f={x:0,y:h.bottom},g={x:0,y:h.bottom},m=0,y=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;y+=t[i].getAnimatedValue();const o=n===Wu.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-y/l*e.y;if(n===Wu.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==m&&m-o-r<s&&(r=Math.max(0,m-o-s)),m=o}const p=(i-s)/2/e.y;for(let m=0;m<a;m+=1){const y=t[m];u+=y.getAnimatedValue();const S=n===Wu.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-u/l*e.y;let b=0;m>0&&(c={x:f.x+p*r,y:f.y-r},d={x:g.x-p*r,y:g.y-r}),b=(i+u/l*(s-i))/2,f={x:o-b,y:parseInt(`${n===Wu.VariableWidth?c.y-S:S}`,10)},g={x:o+b,y:parseInt(`${n===Wu.VariableWidth?d.y-S:S}`,10)},d.x>=c.x&&g.x>f.x&&y.CM.sl([f,c,d,g])}};class $u extends na{constructor(t,i,s,e,h,r,n){super(t,i,s,i.om("funnelChart bg",0),e,i.cs.ts.funnelChartBackgroundFillStyle,i.cs.ts.funnelChartBackgroundStrokeStyle,i.cs.ts.funnelChartTitleFont,i.cs.ts.funnelChartTitleFillStyle,r),this.Bm=[],this.Om=la.None,this.Em=!0,this.Nm=0,this.qM=80,this.JM=20,this.QM=0,this.t_=Wu.VariableHeight,this.Hm=!0,this.$m=t=>{const i=this.Bm.indexOf(t);i>=0&&(this.Bm.splice(i,1),this.jm())},this.mf.Cn||this.mf.kn||this.cs.An(5),this.Um=this.ts.effectsText,this.Ym=i.Xm("funnelChart bottom",0),this.Zm=i.Xm("funnelChart top",1),this.dm.Fh("Funnel Chart"),this.Lm=this.ts.funnelChartSliceFillStylePalette,this.Rm=this.ts.funnelChartSliceStrokeStyle,this.zm=this.ts.funnelChartSliceLabelFont,this.Vm=this.ts.funnelChartSliceLabelFillStyle,n&&this.setAnimationsEnabled(!1),this.nm(h,this.pixelScale)}addSlice(t,i){const s=new Gu(this.Nm,this.Ym,this.Zm,this,this.pixelScale,this.$m,this.ts,this.cs.hs);return this.Nm+=1,s.setName(t),s.setValue(i),s.hs.ns.bs(this.Um),s.hs.os.bs(this.Hm),this.Bm.push(s),this.cs.vs(),s.setHighlightOnHover(this.Em),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Bm}setHeadWidth(t){return this.qM=t,this.cs.vs(),this}getHeadWidth(){return this.qM}setNeckWidth(t){return this.JM=t,this.cs.vs(),this}getNeckWidth(){return this.JM}setSliceGap(t){return this.QM=Math.min(Math.max(t,0),20),this.cs.vs(),this}setSliceMode(t){return this.t_=t,this.cs.vs(),this}getFunnelSliceMode(){return this.t_}setLUT(t){return this.ud=t,this.cs.vs(),this}setSliceFillStyle(t){return this.Lm=t,this.cs.vs(),this}getSliceFillStyle(){return this.Lm}setSliceStrokeStyle(t){return this.Rm="function"==typeof t?t(this.Rm):t,this.cs.vs(),this}getSliceStrokeStyle(){return this.Rm}setSliceEffect(t){return this.Hm=t,this.Bm.forEach((i=>i.hs.os.bs(t))),this.cs.vs(),this}getSliceEffect(){return this.Hm}setSliceSorter(t){return this.Om=t,this.Bm=this.Bm.sort(this.Om),this.cs.vs(),this}getSliceSorter(){return this.Om}setLabelFillStyle(t){return this.Vm="function"==typeof t?t(this.Vm):t,this.cs.vs(),this}getLabelFillStyle(){return this.Vm}setLabelFont(t){return this.zm="function"==typeof t?t(this.zm):t,this.cs.vs(),this}getLabelFont(){return this.zm}setLabelEffect(t){return this.Um=t,this.Bm.forEach((i=>i.hs.ns.bs(t))),this.cs.vs(),this}getLabelEffect(){return this.Um}setLabelFormatter(t){return this.qm=t,this.cs.vs(),this}getLabelFormatter(){return this.qm}setSliceHighlightOnHover(t){return this.Em=t,this.Bm.forEach((i=>i.setHighlightOnHover(t))),this}ke(t){super.ke(t),oa.Sm(this.dm,this.am),super.rm();const i=oa.pm(this.dm,this.am),s=n(this.pixelScale.x.getInnerInterval()-(this.ia.left+this.ia.right),this.pixelScale.y.getInnerInterval()-(this.ia.bottom+this.ia.top+i)),e=n(this.ia.left+s.x/2,this.ia.bottom+s.y/2);this.Bm=this.Bm.sort(this.Om);for(let t=0,{length:i}=this.Bm;t<i;t+=1)this.Km(this.Bm[t],t);const h=this.Bm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/r:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.Ge.Fh(this.qm(i,o[t])).Is()}o.push(r),this.Jm(h,o,e,s)}Km(t,i){t.setStyle(this.ud?new N({color:this.ud.getColors(t.getAnimatedValue())}):this.Lm(i),this.Rm,this.Vm,this.zm)}jm(){this.Bm=this.Bm.sort(this.Om),this.cs.vs()}vd(){return this.Bm}dispose(){return this.Ym.N(),this.Zm.N(),this.Bm.slice().forEach((t=>t.dispose())),super.dispose()}}const ju=(t,i,s)=>{const e=t.el();if(e.length>0){let t;const h=(e[1].y-e[0].y)/2+e[0].y;return t=i===qu.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:t,y:h}}},Yu=t=>{const i=t.el();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Xu extends $u{constructor(){super(...arguments),this.qm=ua.NamePlusValue,this.Qm=10,this.i_=qu.Left,this.s_=aa.LabelsOnSides,this.iy=[],this.sy=this.ts.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.sy=t;for(let t=0;t<this.iy.length;t+=1)this.iy[t].Be(this.sy);return this.cs.vs(),this}getLabelConnectorStyle(){return this.sy}setLabelConnectorGap(t){return this.Qm=t,this.cs.vs(),this}getLabelConnectorGap(){return this.Qm}setLabelSide(t){return this.i_=t,this.cs.vs(),this}getLabelSide(){return this.i_}Jm(t,i,s,e){const h=this.Qm;let r=0;for(let i=0;i<t.length;i+=1)r=Math.max(r,t[i].Ge.$t().x);const o=e.x+this.ia.left+this.ia.right,a=this.i_===qu.Right?(this.ia.left+(o-(this.ia.right+r)))/2:(this.ia.left+r+(o-this.ia.right))/2,l=e.x-r,u=n(l,e.y);Uu(t,this.qM,this.JM,u,this.ia,this.QM,this.t_,a),this.e_(t,this.i_===qu.Left?-1:1,-1,s,e);for(let t=0;t<this.iy.length;t+=1)this.iy[t].setVisible(!1);for(let i=0;i<t.length;i+=1)t[i].getVisible()&&this.ey(this.h_(t[i],-1,s,h))}getMinimumSize(){return n(500,300)}e_(t,i,s,e,h){if(0===t.length)return;const r=e.x+i*h.x*.5,o=1===s?Math.max:Math.min;let a;for(let e=0;e<t.length;e+=1){const h=t[e];if(0===h.CM.el().length)h.Ge.setVisible(!1);else{let t;h.Ge.setVisible(!0),a&&(t=a.Ge.fa().y+s*(a.Ge.$t().y+10));const e=(ju(h.CM,this.i_,0)||n(0,0)).y,l=void 0===t?e:o(e,t);h.Ge.Ce(n(r,l)).ya(i).Sa(0),a=h}}}h_(t,i,s,e){const h=t.CM,r=t.Ge,o=ju(h,this.i_,e);if(o){const t={x:ps(this.i_===qu.Left?r.fa().x-i*(e+r.$t().x):r.fa().x+i*(e+r.$t().x),o,s).x,y:Ss(r.fa().y,o,s).y};return[o,t,n(this.i_===qu.Left?r.fa().x-i*(e+r.$t().x):r.fa().x+i*(e+r.$t().x),t.y)]}}ey(t){if(t){let i;for(let t=0;t<this.iy.length;t+=1)if(!this.iy[t].getVisible()){i=this.iy[t].setVisible(!0);break}void 0===i&&(i=this.Zm.hy(this.pixelScale,void 0,[ba.InternalUI]).Be(this.sy),this.iy.push(i)),i.$a().Ua(t)}}}class Zu extends $u{constructor(){super(...arguments),this.qm=ua.Name,this.s_=aa.LabelsInsideSlices}Jm(t,i,s,e){const h=this.ia.left+e.x/2;Uu(t,this.qM,this.JM,e,this.ia,this.QM,this.t_,h);for(let i=0;i<t.length;i+=1){const s=t[i],e=s.CM,h=s.Ge,r=Yu(e);r&&h.Ce(r).ya(0).Sa(0)}}getMinimumSize(){return n(200,200)}}const Ku={LabelsOnSides:Xu,LabelsInsideSlices:Zu};var qu,Ju;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(qu||(qu={}));class Qu extends na{constructor(t,i,s,e,h,r,n){super(t,i,s,i.om("gaugeChart bg",0),e,i.cs.ts.gaugeChartBackgroundFillStyle,i.cs.ts.gaugeChartBackgroundStrokeStyle,i.cs.ts.gaugeChartTitleFont,i.cs.ts.gaugeChartTitleFillStyle,r),this.Bm=[],this.$m=t=>{const i=this.Bm.indexOf(t);i>=0&&this.Bm.splice(i,1)},this.mf.Cn||this.mf.kn||this.cs.An(6),this.ks=i.Xm("gaugeChart layer",0),this.Zm=i.Xm("gaugeChart top layer",1),this.dm.Fh("Gauge Chart"),this.nm(h,this.pixelScale);const o=qs();this.onBackgroundTouchStart(o.onTouchStart),this.onBackgroundTouchMove(o.onTouchMove),this.onBackgroundTouchEnd(o.onTouchEnd),n&&this.setAnimationsEnabled(!1)}dispose(){return this.ks.N(),this.Zm.N(),this.Bm.slice().forEach((t=>t.dispose())),super.dispose()}}class tc extends Qu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.Dl=90,this.Bl=-270,this.r_={min:this.Dl,max:this.Bl},this.n_=Z((()=>this.ks.vs())),this.o_=()=>{this.a_=void 0},this.l_=i.Xm("radialGaugeChart bg arc",2),this.u_=this.ks.Oc(this.pixelScale).Ae(this.ts.gaugeChartEmptyGaugeFillStyle)._e(this.ts.gaugeChartEmptyGaugeStrokeStyle)}setAngleInterval(t,i){t===i?i-=360:Math.abs(i-t)>360&&(i-=(i-t)%360);const s=this.Dl,e=this.Bl,h=this.r_;return this.getAnimationsEnabled()?this.c_(h,{min:t,max:i}):(h.min=t,h.max=i,this.Dl=t,this.Bl=i),this.I.emit("angleIntervalChange",this,{min:s,max:e},{min:t,max:i}),this.cs.vs(),this}getAngleInterval(){return{min:this.Dl,max:this.Bl}}setGaugeFillStyle(t){return this.u_.Ae(t),this.cs.vs(),this}setGaugeStrokeStyle(t){return this.u_._e(t),this.cs.vs(),this}c_(t,i,s){this.a_=this.n_(1e3,Y.ease)([[t.min,i.min],[t.max,i.max]],(([t,i])=>{this.r_={min:t,max:i},this.Dl=t,this.Bl=i,this.ks.vs()})),this.a_.onEveryAnimationEnd(this.o_),s&&this.a_.onAnimationEnd(s)}onAngleIntervalChange(t){return this.I.on("angleIntervalChange",t)}offAngleIntervalChange(t){return this.I.off(t,"angleIntervalChange")}dispose(){return super.dispose(),this.l_.N(),this}}class ic extends ca{d_(t){return this.I.on("valueChange",t)}f_(t){return this.I.on("valueIntervalChange",t)}offValueChange(t){return this.I.off(t,"valueChange")}offIntervalChange(t){return this.I.off(t,"valueIntervalChange")}attach(t,i=!0){return super.attach(t,i),this.styleAttachedEntry(t),this}styleAttachedEntry(t){Si(t,this.ts,{fill:this.g_})}}class sc extends ic{onValueChange(t){return this.d_(t)}onIntervalChange(t){return this.f_(t)}}class ec extends sc{constructor(t,i,s,e,h,r,n){super(s,h,r,n),this.Dl=0,this.Bl=0,this.m_=0,this.y_=0,this.p_=0,this.S_=100,this.b_=!0,this.Mm=this.l,this.Am=this.getVisible(),this.wm=Ii(),this.v_=t=>{this.Mm=t,this.Ji.cs.vs()},this.x_=t,this.Mr=i,this.Ji=s,this.scale=e,this.g_=this.ts.gaugeChartGaugeFillStyle,this.Pm=t.Oc(e).Ae(this.g_)._e(rt).ds(this.getHighlight()),this.fs(this.Pm),this.M_=i.vr(e).ds(this.getHighlight()),this.fs(this.M_,{isText:!0}),this.__=i.vr(e).ds(this.getHighlight()),this.fs(this.__,{isText:!0}),this.Ge=i.vr(e).ds(this.getHighlight()),this.fs(this.Ge,{isText:!0}),this.M_.Ae(r.gaugeChartIntervalLabelsFillStyle).Dh(r.gaugeChartIntervalLabelsFont),this.__.Ae(r.gaugeChartIntervalLabelsFillStyle).Dh(r.gaugeChartIntervalLabelsFont),this.Ge.Ae(r.gaugeChartValueLabelFillStyle).Dh(r.gaugeChartValueLabelFont),this.setName("Gauge Slice")}ke(){const t=this.Ji.getDataLabelFormatter(),i=this.Dl/90<this.Bl/90?1:-1;let s=this.Ji.getAnimationsEnabled()?this.Mm:this.l;const[e,h]=this.p_<this.S_?[this.p_,this.S_]:[this.S_,this.p_];s<e?s=e:s>h&&(s=h);const r=this.Bl-i*this.y_,n=this.Dl+i*this.m_,o=this.S_-this.p_,a=(0!==o?(r-n)/o:1/0)*(s-this.p_);this.Pm.Wl(n).Le(n+a);const l="function"==typeof t?t(s,{getInnerStart:()=>e,getInnerEnd:()=>h}):t.format(s);this.Ge.Fh(l)}A_(){const t=this.Ji.getIntervalLabelFormatter(),i="function"==typeof t?t(this.p_,{getInnerStart:()=>this.p_,getInnerEnd:()=>this.S_}):t.format(this.p_);return this.M_.Fh(i).Is(),this.M_.$t()}w_(){const t=this.Ji.getIntervalLabelFormatter(),i="function"==typeof t?t(this.S_,{getInnerStart:()=>this.p_,getInnerEnd:()=>this.S_}):t.format(this.S_);return this.__.Fh(i).Is(),this.__.$t()}setName(t){return super.setName(t),this.Ji.cs.vs(),this}setValue(t){const i=this.l;return this.Ji.getAnimationsEnabled()?this.Am&&this.wm(i,t,this.v_):this.Mm=t,this.l=t,this.I.emit("valueChange",this,i,t),this.Ji.cs.vs(),this}getValue(){return this.l}setVisible(t){return this.Am=t,!1===t?this.Ji.getAnimationsEnabled()&&this.Mm>0?this.wm(this.Mm,0,this.v_,{onCompleted:()=>super.setVisible(!1)}):(this.Mm=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(super.setVisible(!0),this.wm(this.Mm,this.l,this.v_)):(this.Mm=this.l,super.setVisible(!0)),this}setInterval(t,i){const s=this.p_,e=this.S_;return this.I.emit("valueIntervalChange",this,{min:s,max:e},{min:t,max:i}),this.p_=t,this.S_=i,this.Ji.cs.vs(),this}setIntervalLabelsFont(t){return this.M_.Dh(t),this.__.Dh(t),this.Ji.cs.vs(),this}getIntervalLabelsFont(){return this.M_.Ph()}setIntervalLabelsFillStyle(t){return this.M_.Ae(t),this.__.Ae(t),this.Ji.cs.vs(),this}getIntervalLabelsFillStyle(){return this.M_.Ih()}setIntervalLabelsVisible(t){return t?(this.M_.setVisible(!0),this.__.setVisible(!0)):(this.M_.setVisible(!1),this.__.setVisible(!1)),this.b_=t,this}getIntervalLabelsVisible(){return this.b_}setAngleInterval(t,i){return this.Dl=t,this.Bl=i,this.Ji.cs.vs(),this}setMinAngle(t){return this.Dl=t,this.Ji.cs.vs(),this}setMaxAngle(t){return this.Bl=t,this.Ji.cs.vs(),this}setMarginInDegrees(t=this.m_,i=this.y_){return t!==this.m_&&(this.m_=t),i!==this.y_&&(this.y_=i),this.Ji.cs.vs(),this}setFillStyle(t){this.g_="function"==typeof t?t(this.g_):t;const i=this.g_;this.Pm.Ae(i);for(let t=0;t<this.Oi.length;t+=1)this.styleAttachedEntry(this.Oi[t]);return this.Ji.cs.vs(),this}k_(t){return this.Ge.Ae(t),this.Mr.vs(),this}C_(){return this.Ge.Ih()}getAnimatedValue(){return this.Mm}}function hc(t,i,s,e,h,r=Math.floor(Math.sqrt(e>h?25*e:25*h))){const o=Array(r+2),a=Math.PI;let l=0,u=0;const c=i*a/180,d=(s*a/180-c)/r;for(o[l]=n(t.x,t.y),l+=1;l<=r+1;)o[l]=n(t.x+e*Math.cos(c+u*d),t.y+h*Math.sin(c+u*d)),l+=1,u+=1;return[o,r]}class rc extends tc{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.ad=20,this.T_=new Intl.NumberFormat,this.F_=new Intl.NumberFormat,this.I_=!1,this.P_=5;const o=new ec(this.ks,this.Zm,this,this.pixelScale,this.$m,this.ts,this.cs.hs);this.D_=o,this.Bm.push(o),this.setPadding(10)}ke(t){super.ke(t),oa.Sm(this.dm,this.am),super.rm();const i=oa.pm(this.dm,this.am),s=Ji([this.D_.A_(),this.D_.w_()]),e=n(this.pixelScale.x.getInnerInterval()-(this.ia.left+this.ia.right+2*s.max.x),this.pixelScale.y.getInnerInterval()-(this.ia.bottom+this.ia.top+1*s.max.y+i)),h=Math.max(.5*Math.min(e.x,e.y),0),r=n(this.ia.left+s.max.x+.5*e.x,this.ia.bottom+s.max.y+.5*e.y),o=this.I_?this.B_(r,h):r,a=this.u_.xe.getThickness(),l=h-.5*a,u=h-this.ad;let c=u/h*100;c=c>100||c<0?99:c;const d=100*(1-(this.ad-a)/h);this.O_(o,u)&&(this.u_.Hl(h).jl(c),this.D_.Pm.Hl(l).jl(d));const f=.5*(g=h,(m=this.Bl-this.Dl)/(2*Math.PI*g*(m/360))*a);var g,m;this.u_.Wl(this.Dl).Le(this.Bl).Ce(o),this.D_.Pm.Ce(o),this.D_.Ge.Ce(o),this.ud&&this.D_.setFillStyle(new N({color:this.ud.getColors(this.D_.getAnimatedValue())})),this.D_.setMinAngle(this.Dl).setMaxAngle(this.Bl).setMarginInDegrees(f,f).ke();const y=this.u_.Ol();if(this.D_.getIntervalLabelsVisible()){this.L_(this.Dl,this.Bl,o,y+this.P_);const t=this.D_.M_.Is().Ne(),i=this.D_.__.Is().Ne();Wi(t,i)&&this.R_(t,i,o,y+this.P_)}}O_(t,i){const s=us(this.D_.Ge.Is().$t(),.5),e=t.x+i,h=t.x-i,r=t.y+i,n=t.y-i;return!(t.x+s.x>e||t.x-s.x<h||t.y+s.y>r||t.y-s.y<n)}R_(t,i,s,e){const h=Hi(t,i),[r,o]=[_s(bs(this.Dl)),_s(bs(this.Bl))],[a,l]=r!==o||1!==r&&3!==r?[ds(h.min,s),ds(h.max,s)]:[ds(n(h.min.x,h.max.y),s),ds(n(h.max.x,h.min.y),s)],u=a.x*l.x+a.y*l.y,c=ls(a)*ls(l),d=.7*vs(Math.acos(u/c)),[f,g]=this.E_();this.L_(this.Dl-f*d,this.Bl-g*d,s,e)}E_(){const t=this.Bl-this.Dl,i=Math.sign(t);let s=Math.sign(this.Dl),e=Math.sign(this.Bl);return s===e&&(i>=0?s=-e:e=-s),[s,e]}B_(t,i){const[s]=hc(t,this.Dl,this.Bl,i,i),e=Ji(s),h=.5*(e.max.x-e.min.x),r=.5*(e.max.y-e.min.y);return cs(ds(t,n(e.min.x+h,e.min.y+r)),t)}L_(t,i,s,e){const h=bs(t),r=bs(i);this.D_.M_.Ce(rs(n(s.x+e,s.y),s,-h)),this.D_.__.Ce(rs(n(s.x+e,s.y),s,-r)),this.D_.M_.va(n(-Math.cos(h),-Math.sin(h))),this.D_.__.va(n(-Math.cos(r),-Math.sin(r)))}getDefaultSlice(){return this.D_}setAutoScaling(t){return this.I_=t,this.cs.vs(),this}getAutoScaling(){return this.I_}setDataLabelFormatter(t){return this.F_=t,this.cs.vs(),this}getDataLabelFormatter(){return this.F_}setIntervalLabelFormatter(t){return this.T_=t,this.cs.vs(),this}getIntervalLabelFormatter(){return this.T_}setIntervalLabelPadding(t){return this.P_=t,this.cs.vs(),this}getIntervalLabelPadding(){return this.P_}setThickness(t){return this.ad=t,this}setLUT(t){return this.ud=t,this.cs.vs(),this}setDataLabelFont(t){return this.D_.Ge.Dh(t),this.cs.vs(),this}getDataLabelFont(){return this.D_.Ge.Ph()}getMinimumSize(){return n(500,300)}setDataLabelFillStyle(t){return this.D_.k_(t),this.cs.vs(),this}getDataLabelFillStyle(){return this.D_.C_()}vd(){return this.Bm}dispose(){return this.D_.dispose(),super.dispose()}}class nc extends ca{}class oc extends nc{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.Ms="Slice",this.l=0,this.bm=!1,this.KM=R,this.xm=R,this.Mm=this.l,this.wm=Z((()=>this.Ji.cs.vs())),this.Cm=()=>{this.Tm=void 0},this.index=t,this.Ji=e,this.scale=h,this.Qi=r,this.CM=i.Fc(h,lr.Simple).ds(this.getHighlight()),this.fs(this.CM),this.Ge=s.vr(h).ds(this.getHighlight()),this.fs(this.Ge,{isText:!0})}setValue(t){return this.Ji.getAnimationsEnabled()?this.getVisible()&&this.Dm(this.Mm,t):this.Mm=t,this.l=t,this.Ji.cs.vs(),this}getValue(){return this.l}setVisible(t){return!1===t?this.Ji.getAnimationsEnabled()&&this.Mm>0?(this.Tm&&(this.Tm.finish(!1),this.Tm=void 0),this.Dm(this.Mm,0,(()=>super.setVisible(!1)))):(this.Mm=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(this.Tm&&(this.Tm.finish(!1),this.Tm=void 0),super.setVisible(!0),this.Dm(this.Mm,this.l)):(this.Mm=this.l,super.setVisible(!0)),this}Dm(t,i,s){this.Tm=this.wm(300,Y.ease)([[t,i]],(([t])=>{this.Mm=t,this.Ji.cs.vs()})),this.Tm.onEveryAnimationEnd(this.Cm),s&&this.Tm.onAnimationEnd(s)}setStyle(t,i,s,e){this.KM=t,this.xm=s,this.CM.Ae(this.KM)._e(i),this.Ge.Ae(this.xm).Dh(e);for(let t=0;t<this.Oi.length;t+=1)this.styleAttachedEntry(this.Oi[t])}getAnimatedValue(){return this.Mm}attach(t,i=!0){return super.attach(t,i),this.styleAttachedEntry(t),this}styleAttachedEntry(t){Si(t,this.ts,{fill:this.KM,stroke:this.CM.jn()})}}!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(Ju||(Ju={}));const ac=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},lc=(t,i,s,e,h,r=0,n=Ju.VariableHeight,o)=>{i=ac(i,e.x),s=ac(s,e.x);const a=t.length;let l=0,u=0;l=t.reduce(((t,i)=>t+i.getAnimatedValue()),0);let c={x:o-i/2,y:e.y+h.bottom},d={x:o+i/2,y:e.y+h.bottom},f={x:0,y:h.bottom},g={x:0,y:h.bottom},m=0,y=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;y+=t[i].getAnimatedValue();const o=n===Ju.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-y/l*e.y;if(n===Ju.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==m&&m-o-r<s&&(r=Math.max(0,m-o-s)),m=o}const p=(i-s)/2/e.y;for(let m=0;m<a;m+=1){const y=t[m];u+=y.getAnimatedValue();const S=n===Ju.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-u/l*e.y;let b=0;m>0&&(c={x:f.x+p*r,y:f.y-r},d={x:g.x-p*r,y:g.y-r}),b=(i+u/l*(s-i))/2,f={x:o-b,y:parseInt(`${n===Ju.VariableWidth?c.y-S:S}`,10)},g={x:o+b,y:parseInt(`${n===Ju.VariableWidth?d.y-S:S}`,10)},d.x>=c.x&&g.x>=f.x&&y.CM.sl([f,c,d,g])}};class uc extends na{constructor(t,i,s,e,h,r,n){super(t,i,s,i.om("pyramidChart bg",0),e,i.cs.ts.pyramidChartBackgroundFillStyle,i.cs.ts.pyramidChartBackgroundStrokeStyle,i.cs.ts.pyramidChartTitleFont,i.cs.ts.pyramidChartTitleFillStyle,r),this.Bm=[],this.Om=la.None,this.Lm=this.ts.pyramidChartSliceFillStylePalette,this.Rm=this.ts.pyramidChartSliceStrokeStyle,this.Em=!0,this.zm=this.ts.pyramidChartSliceLabelFont,this.Vm=this.ts.pyramidChartSliceLabelFillStyle,this.Nm=0,this.qM=0,this.JM=80,this.QM=0,this.t_=Ju.VariableHeight,this.Hm=!0,this.$m=t=>{const i=this.Bm.indexOf(t);i>=0&&(this.Bm.splice(i,1),this.jm())},this.mf.Cn||this.mf.kn||this.cs.An(8),this.Um=this.ts.effectsText,this.Ym=i.Xm("pyramidChart bottom",0),this.Zm=i.Xm("pyramidChart top",1),this.dm.Fh("Pyramid Chart"),n&&this.setAnimationsEnabled(!1),this.nm(h,this.pixelScale)}addSlice(t,i){const s=new oc(this.Nm,this.Ym,this.Zm,this,this.pixelScale,this.$m,this.ts,this.cs.hs);return this.Nm+=1,s.setName(t),s.setValue(i),s.hs.ns.bs(this.Um),s.hs.os.bs(this.Hm),this.Bm.push(s),this.cs.vs(),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Bm}setNeckWidth(t){return this.JM=t,this.cs.vs(),this}getNeckWidth(){return this.JM}setSliceGap(t){return this.QM=Math.min(Math.max(t,0),20),this.cs.vs(),this}setSliceMode(t){return this.t_=t,this.cs.vs(),this}getPyramidSliceMode(){return this.t_}setLUT(t){return this.ud=t,this.cs.vs(),this}setSliceFillStyle(t){return this.Lm=t,this.cs.vs(),this}getSliceFillStyle(){return this.Lm}setSliceStrokeStyle(t){return this.Rm="function"==typeof t?t(this.Rm):t,this.cs.vs(),this}getSliceStrokeStyle(){return this.Rm}setSliceEffect(t){return this.Hm=t,this.Bm.forEach((i=>i.hs.os.bs(t))),this.cs.vs(),this}getSliceEffect(){return this.Hm}setSliceSorter(t){return this.Om=t,this.Bm=this.Bm.sort(this.Om),this.cs.vs(),this}getSliceSorter(){return this.Om}setLabelFillStyle(t){return this.Vm="function"==typeof t?t(this.Vm):t,this.cs.vs(),this}getLabelFillStyle(){return this.Vm}setLabelFont(t){return this.zm="function"==typeof t?t(this.zm):t,this.cs.vs(),this}getLabelFont(){return this.zm}setLabelEffect(t){return this.Um=t,this.Bm.forEach((i=>i.hs.ns.bs(t))),this.cs.vs(),this}getLabelEffect(){return this.Um}setLabelFormatter(t){return this.qm=t,this.cs.vs(),this}getLabelFormatter(){return this.qm}setSliceHighlightOnHover(t){return this.Em=t,this.Bm.forEach((i=>i.setHighlightOnHover(t))),this}ke(t){super.ke(t),oa.Sm(this.dm,this.am),super.rm();const i=oa.pm(this.dm,this.am),s=n(this.pixelScale.x.getInnerInterval()-(this.ia.left+this.ia.right),this.pixelScale.y.getInnerInterval()-(this.ia.bottom+this.ia.top+i)),e=n(this.ia.left+s.x/2,this.ia.bottom+s.y/2);this.Bm=this.Bm.sort(this.Om);for(let t=0,{length:i}=this.Bm;t<i;t+=1)this.Km(this.Bm[t],t);const h=this.Bm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/r:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.Ge.Fh(this.qm(i,o[t])).Is()}o.push(r),this.Jm(h,o,e,s)}Km(t,i){t.setStyle(this.ud?new N({color:this.ud.getColors(t.getAnimatedValue())}):this.Lm(i),this.Rm,this.Vm,this.zm)}jm(){this.Bm=this.Bm.sort(this.Om),this.cs.vs()}vd(){return this.Bm}dispose(){return this.Ym.N(),this.Zm.N(),this.Bm.slice().forEach((t=>t.dispose())),super.dispose()}}const cc=(t,i,s)=>{const e=t.el();if(e.length>0){let t;const h=(e[1].y-e[0].y)/2+e[0].y;return t=i===yc.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:t,y:h}}},dc=t=>{const i=t.el();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class fc extends uc{constructor(){super(...arguments),this.qm=ua.NamePlusValue,this.Qm=10,this.i_=yc.Left,this.s_=aa.LabelsOnSides,this.iy=[],this.sy=this.ts.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.sy=t;for(let t=0;t<this.iy.length;t+=1)this.iy[t].Be(this.sy);return this.cs.vs(),this}getLabelConnectorStyle(){return this.sy}setLabelConnectorGap(t){return this.Qm=t,this.cs.vs(),this}getLabelConnectorGap(){return this.Qm}setLabelSide(t){return this.i_=t,this.cs.vs(),this}getLabelSide(){return this.i_}Jm(t,i,s,e){const h=this.Qm;let r=0;for(let i=0;i<t.length;i+=1)r=Math.max(r,t[i].Ge.$t().x);const o=e.x+this.ia.left+this.ia.right,a=this.i_===yc.Right?(this.ia.left+(o-(this.ia.right+r)))/2:(this.ia.left+r+(o-this.ia.right))/2,l=e.x-r,u=n(l,e.y);lc(t,this.qM,this.JM,u,this.ia,this.QM,this.t_,a),this.e_(t,this.i_===yc.Left?-1:1,-1,s,e);for(let t=0;t<this.iy.length;t+=1)this.iy[t].setVisible(!1);for(let i=0;i<t.length;i+=1)if(t[i].getVisible()){const e=this.h_(t[i],-1,s,h);e&&this.ey(e)}}getMinimumSize(){return n(500,300)}e_(t,i,s,e,h){if(0===t.length)return;const r=e.x+i*h.x*.5,o=1===s?Math.max:Math.min;let a;for(let e=0;e<t.length;e+=1){const h=t[e];let l;0===h.CM.el().length?h.Ge.setVisible(!1):h.Ge.setVisible(!0),a&&(l=a.Ge.fa().y+s*(a.Ge.$t().y+10));const u=cc(h.CM,this.i_,0);if(u){const t=u.y,s=void 0===l?t:o(t,l);h.Ge.Ce(n(r,s)).ya(i).Sa(0)}a=h}}h_(t,i,s,e){const h=t.CM,r=t.Ge,o=cc(h,this.i_,e);if(o){const t={x:ps(this.i_===yc.Left?r.fa().x-i*(e+r.$t().x):r.fa().x+i*(e+r.$t().x),o,s).x,y:Ss(r.fa().y,o,s).y};return[o,t,n(this.i_===yc.Left?r.fa().x-i*(e+r.$t().x):r.fa().x+i*(e+r.$t().x),t.y)]}}ey(t){let i;for(let t=0;t<this.iy.length;t+=1)if(!this.iy[t].getVisible()){i=this.iy[t].setVisible(!0);break}void 0===i&&(i=this.Zm.hy(this.pixelScale,void 0,[ba.InternalUI]).Be(this.sy),this.iy.push(i)),i.$a().Ua(t)}}class gc extends uc{constructor(){super(...arguments),this.qm=ua.Name,this.s_=aa.LabelsInsideSlices}Jm(t,i,s,e){const h=this.ia.left+e.x/2;lc(t,this.qM,this.JM,e,this.ia,this.QM,this.t_,h);for(let i=0;i<t.length;i+=1){const s=t[i].CM,e=t[i].Ge,h=dc(s);h&&e.Ce(h).ya(0).Sa(0)}}getMinimumSize(){return n(200,200)}}const mc={LabelsOnSides:fc,LabelsInsideSlices:gc};var yc;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(yc||(yc={}));const pc=(t,i,s,e,h,r)=>(t.alignmentX=(h+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,t.alignmentY=h%(2*Math.PI)<=Math.PI?-1:1,t.paddingX=Math.cos(h)*r,t.paddingY=Math.sin(h)*r,t),Sc=(t,i,s,e,h,r,n,o)=>{if(0===i)return t.paddingX=o,t.alignmentX=-1,t};var bc;!function(t){t[t.Normal=0]="Normal",t[t.Circle=1]="Circle"}(bc||(bc={}));class vc{constructor(t,i,e,h,r,n,o,a){this.I=new s,this.z_=t,this.Mr=i,this.scale=e,this.chart=h,this.tag=r,this.axisScale=n,this.V_=o,this.N_=a,this.G_=this.z_.Oe(this.scale).setMouseInteractions(!1),this.W_=this.Mr.vr(this.scale).Fh(this.tag).setMouseInteractions(!1),this.H_=this.V_(this,this.Mr.hy(this.scale,void 0,[ba.InternalUI])).Be(this.chart.getNibStyle()),this.N_.gs([this.W_])}Jm(t,i,s,e,h,r,o){const a=i.length,l=i[s>0?s-1:a-1],u=i[s],c=i[s<a-1?s+1:0],d=this.chart.getNibLength();this.G_.Re(t).Le(u).Be(this.chart.getAxisStyle()),this.H_.$a().Ua(r===bc.Normal?[Ki(u,l,Lt(.5*d/ls(ds(l,u)),0,1)),u,Ki(u,c,Lt(.5*d/ls(ds(c,u)),0,1))]:((t,i,s,e,h=2)=>{const r=e/s,o=[];for(let a=-e/2;a<=e/2;a+=h){const h=r*(a/e)+i,l=n(t.x+Math.cos(h)*s,t.y+Math.sin(h)*s);o.push(l)}return o})(t,e,h,d)),o?this.W_.setVisible(!0).Ce(cs(u,n(o.paddingX,o.paddingY))).ya(o.alignmentX).Sa(o.alignmentY):this.W_.setVisible(!1)}getLabelSize(){return this.W_.Dh(this.chart.getAxisLabelFont()).Ae(this.chart.getAxisLabelStyle()).Is().$t()}dispose(){this.G_&&this.G_.dispose(),this.W_&&this.W_.dispose(),this.H_&&this.H_.dispose()}}const xc=(t,i,s,e,h)=>t.addRow(i.getName()).addRow("Axis:","",e).addRow("Value:","",h(s));class Mc extends Ql{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,a,l,c),this.Ms="Spider Series",this.tu=new Map,this.Fi=Ys.onHover,this.zb=xc,this.ix=8,this.Jo=0,this.U_=Ii(),this.j_={},this.Y_={},this.Am=this.getVisible(),this.X_=1,this.Z_=((t,i)=>{const s=Z((()=>{}));let e,h,r=1;return(n,o,a)=>{if(n===h)return;h=n;const l=(null==a?void 0:a.easing)||Y.ease,u=(null==a?void 0:a.durationMs)||1e3;e&&(e.finish(!1),e=void 0),!1===n?o&&r?(e=s(u,l)([[r,0]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0,i(!1)}))):(r=0,i(!1)):o?(i(!0),e=s(u,l)([[r,1]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0}))):(r=1,i(!0))}})((t=>{this.X_=t,this.ks.cs.vs()}),(t=>{super.setVisible(t)})),this.Ji=t,this.ks=i,this.sx=e,this.K_=h,this.RS=r,this.q_=n,this.J_=o,this.scale=s,this.Q_=Mi(l.spiderSeriesFillStyle,u),this.tA=Mi(l.spiderSeriesStrokeStyle,u),this.iA=Mi(l.spiderSeriesPointFillStyle,u)}Qy(){return this.ip&&this.tu.size>0&&this.getVisible()}addPoints(...t){t=t.filter((t=>void 0!==t.axis));for(let i=0;i<t.length;i+=1)this.K_(t[i].axis);if(this.Ji.getAnimationsEnabled()&&void 0!==this.j_){const i=new Map;let s;t.forEach((t=>i.set(t.axis,t.value))),this.U_(0,1,(t=>{i.forEach(((i,e)=>{const h=(null==s?void 0:s.get(e))||0;this.tu.set(e,h+t*(i-h)),this.ks.cs.vs()}))}),{easing:this.j_.easing,durationMs:this.j_.durationMs,onStart:()=>{s=new Map(this.tu)}})}else for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.tu.set(s,t[i].value)}return this.ks.vs(),this}getValue(t,i=!1){const s=this.tu.get(t),e=this.Ji.getOriginValue();if(void 0!==s)return i?e+this.X_*(s-e):s}setAnimationAddPoints(t,i){return this.j_=t?{easing:t,durationMs:i}:void 0,this.ks.vs(),this}setVisibleStateChangedAnimation(t,i){return this.Y_=t?{easing:t,durationMs:i}:void 0,this.ks.vs(),this}setCursorResultTableFormatter(t){return this.zb=t,this.Ji.cs.vs(),this}getCursorResultTableFormatter(){return this.zb}setCursorEnabled(t){return super.setCursorEnabled(t)}setFillStyle(t){return this.Q_="function"==typeof t?t(this.Q_):t,this.CM&&(this.CM.Ae(this.Q_),this.ks.vs()),this}getFillStyle(){return this.Q_}setStrokeStyle(t){return this.tA="function"==typeof t?t(this.tA):t,this.CM&&(this.CM._e(this.tA),this.ks.vs()),this}getStrokeStyle(){return this.tA}setPointFillStyle(t){return this.iA="function"==typeof t?t(this.iA):t,this.hx&&(this.hx.Ae(this.iA),this.ks.vs()),this}getPointFillStyle(){return this.iA}setPointSize(t){return this.ix=t,this.hx&&this.hx.K(t),this}getPointSize(){return this.ix}getPointShape(){return this.sx}setPointRotation(t){return this.Jo=t,this.hx&&this.hx.Bh(t),this.ks.vs(),this}getPointRotation(){return this.Jo}ke(){if(super.ke(),!this.Ii){const t=new Array(this.RS.length),i=this.Ji.getOriginValue();for(let s=0;s<this.RS.length;s+=1){const e=this.tu.get(this.RS[s].tag);t[s]=void 0!==e?this.q_(this.RS[s].tag,i+this.X_*(e-i)):this.q_(this.RS[s].tag,i)}li(t),t.length>=3&&(this.CM||(this.CM=this.ks.Fc(this.scale,lr.Simple)._e(this.tA).Ae(this.Q_).ds(this.getHighlight()),this.fs(this.CM)),this.CM.sl(t),this.hx||(this.hx=this.ks.xp(this.scale).K(this.ix).Na(this.sx).Bh(this.Jo).Ae(this.iA).ds(this.getHighlight()),this.fs(this.hx)),this.hx.$a().Ua(t))}}attach(t,i=!0){return super.attach(t,i),Si(t,this.ts,{fill:this.Q_,stroke:this.tA}),this}sA(){for(let t=0;t<this.Oi.length;t+=1)Si(this.Oi[t],this.ts,{fill:this.Q_,stroke:this.tA})}Pb(t,i){if(this.CM){const i=this.J_(t);if(void 0!==i&&this.tu.has(i.tag)){const t=this.tu.get(i.tag),s=this.q_(i.tag,t);return Il(s,this.scale,this.zb(new ml,this,t,i.tag,this.Ji.formatValue)._c(),this,this.Q_)}}}solveNearestFromScreen(t){return this.Pb(ao(t,this.Ji.cs),!1)}Te(t,i){return t.ds(i),this.ks.vs(),this}setVisible(t){var i,s;return this.Am=t,this.Z_(t,this.Ji.getAnimationsEnabled()&&void 0!==this.Y_,{easing:null===(i=this.Y_)||void 0===i?void 0:i.easing,durationMs:null===(s=this.Y_)||void 0===s?void 0:s.durationMs}),this}}const _c=(t,i)=>{const s=Math.PI/2-2*t*Math.PI/i;return s>=0?s:s+2*Math.PI},Ac=t=>Ji(t.W_.Ne()),wc=t=>Ji(t.Ne()),kc=(t,i,s,e)=>t.jl(0).Ce(s).Wl(90).Le(-270).Yl(i===bc.Circle?void 0:e.length),Cc={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},Tc={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},Fc=()=>{Tc.alignmentX=0,Tc.alignmentY=0,Tc.paddingX=0,Tc.paddingY=0};class Ic extends Vl{constructor(t,i,s,e,h,r,o){super(t,i,s,i.om("spiderChart bg",0),e,i.cs.ts.spiderChartBackgroundFillStyle,i.cs.ts.spiderChartBackgroundStrokeStyle,i.cs.ts.spiderChartTitleFont,i.cs.ts.spiderChartTitleFillStyle,o),this._b=zl.onHover,this.ia=g(20,20,20,20),this.axisScale=at.d1({scale1DConstructor:Es,dimension:"x"}).X(0,1),this.RS=[],this.eA=[],this.hA=[],this.rA=He.expansion,this.nA=!0,this.oA=Sc,this.aA=pc,this.po=!0,this.lA=bc.Normal,this.uA=4,this.cA=this.ts.spiderChartWebStyle,this.dA=this.ts.spiderChartScaleLabelFillStyle,this.fA=this.ts.spiderChartScaleLabelFont,this.gA=5,this.mA=this.ts.spiderChartAxisLabelFillStyle,this.yA=this.ts.spiderChartAxisLabelFont,this.pA=5,this.SA=this.ts.spiderChartAxisStrokeStyle,this.bA=this.ts.spiderChartAxisNibStrokeStyle,this.Rd=10,this.vA=g(),this.hasAxis=t=>this.RS.reduce(((i,s)=>i||s.tag===t),!1),this.formatValue=t=>this.axisScale.yi(t,Ls.Numeric),this.xA=()=>(t=>{const i=t.length;for(let s=0;s<i;s+=1)for(let e=s+1;e<i;e+=1)if(Gi(t[s],t[e]))return!0;return!1})(this.RS.map(Ac).concat(this.hA.map(wc))),this.MA=()=>this._A.Oc(this.pixelScale).setMouseInteractions(!1),this.AA=t=>t.dispose(),this.wA=()=>this.wf.vr(this.pixelScale).setMouseInteractions(!1),this.kA=t=>t.dispose(),this.CA=t=>this.formatValue(this.axisScale.getInnerStart()+t*(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart())),this.TA=(t,i)=>{let s,e;const h=()=>{void 0!==this.FA&&this.FA.finish(),s=c(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),e=this.rA,this.rA=void 0},r=(i,e,h,r,o)=>{const a=n(h.x-e.x,e.y-h.y),l=this.RS.findIndex((i=>i===t));if(l>=0&&void 0!==s){const i=_c(l,this.RS.length),e=n(Math.cos(i),Math.sin(i)),h=a.x*e.x+a.y*e.y,r=ls(ds(t.G_.gi(),t.G_.di())),u=s.min+(s.max-s.min)*Math.max(1+h/r,.01);this.axisScale.X(s.min,u),ri(o),this.cs.vs()}},o=()=>{if(s=void 0,void 0!==e)if(this.qe){const t=c(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),i=this.IA(),s=e;if(void 0!==i){const e=s.start(t.min,t.max,i.min,i.max),h=s.end(t.min,t.max,i.min,i.max);this.FA=this.Hg.cs.Vr(300,Y.ease)([[0,1]],(([i])=>{this.axisScale.X(t.min+i*(e-t.min),t.max+i*(h-t.max))})),this.FA.onAnimationEnd((()=>{this.FA=void 0,this.rA=s}))}else this.rA=e}else this.rA=e;e=void 0};i.setMouseEnterEventHandler(this.PA).setMouseLeaveEventHandler(this.DA).setMouseDragStartEventHandler(h).setMouseDragEventHandler(((t,i,s,e,h)=>r(0,n(i.clientX,i.clientY),e,0,i))).setMouseDragStopEventHandler(o);const a=qs(new Qs(((t,i,s)=>{this.PA(t),h(),ri(s)}),r,((t,i,s,e)=>{this.DA(t),o(),ri(e)})));return i.setTouchStartEventHandler(a.onTouchStart).setTouchMoveEventHandler(a.onTouchMove).setTouchEndEventHandler(a.onTouchEnd)},this.BA=t=>{this.nA&&!this.hasAxis(t)&&this.addAxis(t)},this.q_=(t,i)=>{for(const s of this.RS)if(s.tag===t){const t=Math.max(Math.min((i-this.axisScale.getInnerStart())/(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart()),1),0);return Ki(s.G_.gi(),s.G_.di(),t)}},this.J_=t=>{if(0===this.RS.length)return;const i=ds(ut(t,this.engine.scale,this.pixelScale),this.RS[0].G_.gi()),s=Math.atan2(i.y,i.x);let e,h=Ri;for(const t of this.RS){const i=ds(t.G_.di(),t.G_.gi()),r=Math.atan2(i.y,i.x),n=Math.abs(s-r);n<h&&(e=t,h=n)}return e},this.PA=t=>{this.po&&(t.Be(this.bA),this.cs.vs())},this.DA=t=>{t.Be(this.bA),this.cs.vs()},this.mf.Cn||this.mf.kn||this.cs.An(9),this.GM=i.LS("spiderChart series bg",0),this._A=i.Xm("spiderChart web shapes",0),this.OA=i.Xm("spiderChart axis bg",1),this.qb=i.Xm("spiderChart plotting",2),this.wf=i.Xm("spiderChart fg",3),this.N_=this.hs.xg().bs(this.ts.effectsText),this.dm.Fh("Spider Chart");const a=Gt(r?r.autoCursorBuilder:void 0,kl);this.Ib=a.xb(this.wb,this.uiScale,this.uiScale,this.ts),this.Fp=this.GM.Oc(this.pixelScale).Ae(this.ts.spiderChartSeriesBackgroundFillStyle)._e(rt).Wl(90).Le(-270).jl(0),this.Ip=this.GM.Oc(this.pixelScale).Ae(R)._e(this.ts.spiderChartSeriesBackgroundStrokeStyle).Wl(90).Le(-270).jl(0),super.Tp(this.Fp,this.Ip),r&&!0===r.disableAnimations&&this.setAnimationsEnabled(!1),this.nm(h,this.pixelScale)}getSeries(){return this.Mp}addAxis(t){if("string"==typeof t){if(!this.hasAxis(t)){const i=new vc(this.OA,this.wf,this.pixelScale,this,t,this.axisScale,this.TA,this.N_);this.RS.push(i)}}else t&&this.RS.push(t);return this.N_.gs(this.RS.map((t=>t.W_))),this.cs.vs(),this}addSeries(t){const i="object"==typeof t?t.pointShape?t.pointShape:Oh.Circle:t||Oh.Circle,s="object"==typeof t&&t.automaticColorIndex?t.automaticColorIndex:this.Mp.length,e=new Mc(this,this.qb,this.pixelScale,i,this.BA,this.RS,this.q_,this.J_,this.Ap,this.ts,s,this.cs.hs);return this.Pp(e),e}getSeriesCount(){return this.Mp.length}setWebMode(t){return this.lA=t,this.cs.vs(),this}getWebMode(){return this.lA}setWebCount(t){return this.uA=t,this.cs.vs(),this}getWebCount(){return this.uA}setWebStyle(t){return this.cA="function"==typeof t?t(this.cA):t,this.cs.vs(),this}getWebStyle(){return this.cA}setScaleLabelStyle(t){return this.dA="function"==typeof t?t(this.dA):t,this.cs.vs(),this}getScaleLabelStyle(){return this.dA}setScaleLabelFont(t){return this.fA="function"==typeof t?t(this.fA):t,this.cs.vs(),this}getScaleLabelFont(){return this.fA}setScaleLabelPadding(t){return this.gA=t,this.cs.vs(),this}getScaleLabelPadding(){return this.gA}setScaleLabelStrategy(t){return this.oA=t,this.cs.vs(),this}setScaleLabelFormatter(t){return this.formatValue=t,this.cs.vs(),this}setAxisLabelStyle(t){return this.mA="function"==typeof t?t(this.mA):t,this.cs.vs(),this}getAxisLabelStyle(){return this.mA}setAxisLabelFont(t){return this.yA="function"==typeof t?t(this.yA):t,this.cs.vs(),this}getAxisLabelFont(){return this.yA}setAxisLabelEffect(t){return this.N_.bs(t),this.cs.vs(),this}getAxisLabelEffect(){return this.N_.xs()}setAxisLabelPadding(t){return this.pA=t,this.cs.vs(),this}getAxisLabelPadding(){return this.pA}setAxisLabelStrategy(t){return this.aA=t,this.cs.vs(),this}setAxisStyle(t){return this.SA="function"==typeof t?t(this.SA):t,this.cs.vs(),this}getAxisStyle(){return this.SA}setNibStyle(t){return this.bA="function"==typeof t?t(this.bA):t,this.cs.vs(),this}getNibStyle(){return this.bA}setNibLength(t){return this.Rd=t,this.cs.vs(),this}getNibLength(){return this.Rd}setAutoAxis(t){return this.nA=t,this}getAutoAxis(){return this.nA}setMouseInteractions(t){return this.po=t,this}getMouseInteractions(){return this.po}setAxisScrollStrategy(t){return this.rA=t,this.cs.vs(),this}getAxisScrollStrategy(){return this.rA}setAxisInterval(t,i=0){return this.axisScale.X(i,t),this.cs.vs(),this}getOriginValue(){return this.axisScale.getInnerStart()}getEdgeValue(){return this.axisScale.getInnerEnd()}ke(t){super.ke(t),oa.Sm(this.dm,this.am);const i=this.RS.length,s=oa.pm(this.dm,this.am),e=n(this.pixelScale.x.getInnerInterval()-(this.ia.left+this.ia.right),this.pixelScale.y.getInnerInterval()-(this.ia.bottom+this.ia.top+s)),h=((t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}))(0,0,0,0);if(void 0!==this.aA){const t=Math.min(e.x,e.y)/2;for(let s=0;s<i;s+=1){const e=_c(s,i),r=Math.cos(e),o=Math.sin(e),a=this.RS[s].getLabelSize();Fc();const l=this.aA(Tc,s,i,this.RS[s].tag,e,this.pA),u=n(r*t+l.paddingX,o*t+l.paddingY);r>0?h.right=Math.max(h.right,u.x+.5*(1-l.alignmentX)*a.x-t):h.left=Math.max(h.left,-u.x+.5*(l.alignmentX+1)*a.x-t),o>0?h.top=Math.max(h.top,u.y+.5*(1-l.alignmentY)*a.y-t):h.bottom=Math.max(h.bottom,-u.y+.5*(l.alignmentY+1)*a.y-t)}}if(this.rA){const t=this.IA();if(void 0!==t){const i=this.rA.start(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max),s=this.rA.end(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max);this.axisScale.X(i,s)}}const r=n(this.pixelScale.x.getInnerStart()+(h.left+this.pixelScale.x.getInnerInterval()-h.right)/2,this.pixelScale.y.getInnerStart()+(h.bottom+this.pixelScale.y.getInnerInterval()-h.top)/2),o=Math.min(e.x/2-(h.left+h.right)/2,e.y/2-(h.bottom+h.top)/2);this.vA=g(this.Pt.left+this.ia.left+h.left,this.Pt.top+this.ia.top+s+h.top,this.Pt.right+this.ia.right+h.right,this.Pt.bottom+this.ia.bottom+h.bottom),this.Jm(r,o);for(const t of this.Mp)t.ap();for(const t of this.Mp)t.ke();super.rm(),this.Db(!1);for(const t of this.Mp)t.my()}dispose(){return this.GM.N(),this._A.N(),this.OA.N(),this.qb.N(),this.wf.N(),super.dispose()}getMinimumSize(){return n(this.vA.left+this.vA.right+100,this.vA.bottom+this.vA.top+100)}Jm(t,i){const s=this.RS.length,e=[];for(let h=0;h<s;h+=1){const r=_c(h,s),o=n(t.x+Math.cos(r)*i,t.y+Math.sin(r)*i);e.push(o)}kc(this.Fp,this.lA,t,e),kc(this.Ip,this.lA,t,e),this.Fp.Hl(i),this.Ip.Hl(i),((t,i,s,e,h,r,n,o)=>{const a=t.length,l=r.length,u=i>0&&l>1;for(let l=0;l<Math.max(i,a);l+=1)if(u&&l<i){l>=a&&t.push(n());const o=t[l];kc(o,s,e,r);const u=h*((l+1)/i);o.Hl(u)}else l<t.length&&o(t[l]);t.length=u?i:0})(this.eA,this.uA,this.lA,t,i,e,this.MA,this.AA);for(const t of this.eA)t.Ae(R)._e(this.cA);for(let h=0;h<s;h+=1){const r=this.RS[h],n=_c(h,s);Fc();const o=void 0!==this.aA?this.aA(Tc,h,s,this.RS[h].tag,n,this.pA):void 0;r.Jm(t,e,h,n,i,this.lA,o)}((t,i,s,e,h,r,o,a,l,u)=>{const c=h.length,d=t.length;let f=0;if(void 0!==i)for(let l=0;l<c;l+=1){const g=h[l].tag,m=_c(l,c);for(let h=0;h<s+ +(0===l);h+=1){Cc.alignmentX=0,Cc.alignmentY=0,Cc.paddingX=0,Cc.paddingY=0;const y=i(Cc,l,c,g,m,h,s,e);if(void 0!==y){f>=d&&t.push(a());const i=t[f];f+=1;const e=(s-h)/s,c=Ki(r,o[l],e);i.Ce(cs(c,n(y.paddingX,y.paddingY))).ya(y.alignmentX).Sa(y.alignmentY).Fh(u(e))}}}for(let i=f;i<d;i+=1)l(t[i]);t.length=f})(this.hA,this.oA,this.uA,this.gA,this.RS,t,e,this.wA,this.kA,this.CA);for(const t of this.hA)t.Ae(this.dA).Dh(this.fA)}IA(){let t,i;const s=this.getSeriesCount()>1;for(const e of this.RS)for(const h of this.Mp){const r=h.getValue(e.tag,s);void 0!==r&&(t=void 0===t?r:Math.min(t,r),i=void 0===i?r:Math.max(i,r))}if(void 0!==t&&void 0!==i)return c(t,i)}}const Pc=t=>({defaultDragMouseStyle:Ie.Horizontal,getTitleTextRotation:()=>0,...Va(t,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.dr().x))}),Dc=t=>({defaultDragMouseStyle:Ie.Vertical,getTitleTextRotation:t=>90*t,...Va(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.dr().y))});class Bc extends Mr{constructor(t,i,e,h){super(),this.ss=[],this.hc=0,this.Tc=!0,this.I=new s,this.LA=t=>(this.ss.push(t),this.Xu(t),t.setMouseInteractions(this.Tc),t),this.getHighlight=()=>this.hc,this.ks=t,this.scale=i,this.RA=e,this.ts=h}EA(){return this.ss}onHighlight(t){return this.I.on("highlight",t)}offHighlight(t){return this.I.off(t)}dispose(){return this.ss.forEach(Dt),this.RA&&this.RA(this),this.ks.cs.vs(),this.I.emit("dispose",this),this}setVisible(t){return super.setVisible(t),this.ss.forEach((i=>i.setVisible(t))),this.ks.cs.vs(),this}onDispose(t){return this.I.on("dispose",t)}offDispose(t){return this.I.off(t,"dispose")}setHighlight(t){return this.hc=Ti(t),this.ks.vs(),this}setMouseInteractions(t){this.Tc=t;for(let t=0;t<this.ss.length;t+=1)this.ss[t].setMouseInteractions(this.Tc);return this}getMouseInteractions(){return this.Tc}}class Oc extends Cu{constructor(){super(...arguments),this.zA=[],this.RA=t=>{const i=this.zA.findIndex((i=>i===t));i>=0&&this.zA.splice(i,1),this.ks.vs()}}clear(){return this.zA.slice().forEach(Dt),this.zA.length=0,this.ks.vs(),this}VA(t,i){void 0!==i?this.zA.splice(i,0,t):this.zA.push(t),t.EA().forEach((t=>this.fs(t,{setEventHandlers:!1}))),t.onMouseEnter(((t,i)=>this.zi(t,i))),t.onMouseLeave(((t,i)=>this.Vi(t,i))),t.onMouseClick(((t,i)=>this.Gi(t,i))),t.onMouseDoubleClick(((t,i)=>this.Wi(t,i))),t.onMouseDown(((t,i)=>this.Hi(t,i))),t.onMouseUp(((t,i)=>this.Ui(t,i))),t.onMouseMove(((t,i)=>this.Ni(t,i))),t.onMouseDragStart(((t,i,s)=>this.$i(t,i,s))),t.onMouseDrag(((t,i,s,e,h)=>this.ji(t,i,s,e,h))),t.onMouseDragStop(((t,i,s,e)=>this.Yi(t,i,s,e))),t.onMouseWheel(((t,i)=>this.Xi(t,i))),t.onTouchStart(((t,i)=>this.Zi(t,i))),t.onTouchMove(((t,i)=>this.Ki(t,i))),t.onTouchEnd(((t,i)=>this.qi(t,i))),this.ks.vs()}Te(t,i){t.setHighlight(i)}NA(t){return this.zA.find((i=>i.EA().includes(t)))}setCursorEnabled(t){return super.setCursorEnabled(t)}}class Lc extends Bc{}class Rc extends Oc{constructor(){super(...arguments),this.GA=void 0,this.WA=()=>{this.GA=void 0}}Qy(){return this.ip&&this.zA.length>0&&this.getVisible()}setDefaultStyle(t){this.HA=t,this.zA.forEach(t),t(this.UA);for(let t=0;t<this.Oi.length;t+=1)this.$A(this.Oi[t]);return this}setCursorResultTableFormatter(t){return this.zb=t,this.Ji.cs.vs(),this}getCursorResultTableFormatter(){return this.zb}Pb(t,i){const s=Bu(t,i?this.zA.filter((t=>t.getVisible()&&t.getIsUnderMouse())):this.zA.filter((t=>t.getVisible())),this.jA,Yi);if(void 0!==s)return{location:ut(s[0],this.ks.cs.ut,this.scale),scale:this.scale,resultTableContent:this.zb(new ml,this,s[1])._c(),series:this,fillStyle:s[1].getDominantStyle(),figure:s[1]}}solveNearestFromScreen(t){return this.Pb(ao(t,this.Ji.cs),!1)}VA(t){super.VA(t),this.HA&&this.HA(t)}clear(){return this.GA=void 0,super.clear()}getXMax(){return this.GA||(this.GA=this.YA()),this.GA.max.x}getXMin(){return this.GA||(this.GA=this.YA()),this.GA.min.x}getYMax(){return this.GA||(this.GA=this.YA()),this.GA.max.y}getYMin(){return this.GA||(this.GA=this.YA()),this.GA.min.y}dr(){return n(0,0)}YA(){const t=c(o(Ri,Ri),o(Ei,Ei));for(let i=0;i<this.zA.length;i+=1)if(this.zA[i].getVisible()){const s=this.zA[i].getBoundaries();t.min.x=Math.min(t.min.x,s.min.x),t.min.y=Math.min(t.min.y,s.min.y),t.max.x=Math.max(t.max.x,s.max.x),t.max.y=Math.max(t.max.y,s.max.y)}return t}attach(t,i=!0){return super.attach(t,i),this.$A(t),this}$A(t){Si(t,this.ts,{fill:this.UA.getDominantStyle()})}}class Ec extends Lc{constructor(t,i,s,e,h,r,n,o,a,l,u,d){super(t,i,s,d),this.ks=t,this.scale=i,this.dimensionStrategy=e,this.start=h,this.end=r,this.lowerExtreme=n,this.lowerQuartile=o,this.median=a,this.upperQuartile=l,this.upperExtreme=u,this.boundaries=c(this.dimensionStrategy.toPoint(h,n),this.dimensionStrategy.toPoint(r,u))}getBoundaries(){return this.boundaries}}class zc extends Ec{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d){super(t,i,s,e,h,r,n,o,a,l,u,c),this.XA=1,this.ZA=1,this.KA=this.LA(this.ks.we(this.scale)),this.qA=this.LA(this.ks.Oe(this.scale)),this.JA=this.LA(this.ks.Oe(this.scale)),this.QA=this.LA(this.ks.Oe(this.scale)),this.tw=this.LA(this.ks.Oe(this.scale)),this.iw=this.LA(this.ks.Oe(this.scale)),this.ks=t,this.scale=i,this.dimensionStrategy=e,this.start=h,this.end=r,this.lowerExtreme=n,this.lowerQuartile=o,this.median=a,this.upperQuartile=l,this.upperExtreme=u,this.sw=this.ts.boxSeriesBodyFillStyle,this.ew=this.ts.boxSeriesBodyStrokeStyle,this.Xl=this.ts.boxSeriesStrokeStyle,this.hw=this.ts.boxSeriesMedianStrokeStyle,this.KA.Ae(this.sw)._e(this.ew),this.qA.Be(this.Xl),this.JA.Be(this.Xl),this.QA.Be(this.Xl),this.tw.Be(this.Xl),this.iw.Be(this.hw),this.Is()}setBodyWidth(t){return this.XA=t,this.Is(),this}getBodyWidth(){return this.XA}setBodyFillStyle(t){return this.sw="function"==typeof t?t(this.sw):t,this.KA.Ae(this.sw),this.ks.vs(),this}getBodyFillStyle(){return this.sw}setBodyStrokeStyle(t){return this.ew="function"==typeof t?t(this.ew):t,this.KA._e(this.ew),this.ks.vs(),this}getBodyStrokeStyle(){return this.ew}setTailWidth(t){return this.ZA=t,this.Is(),this}getTailWidth(){return this.ZA}setStrokeStyle(t){this.Xl="function"==typeof t?t(this.Xl):t;const i=this.Xl;return this.qA.Be(i),this.JA.Be(i),this.QA.Be(i),this.tw.Be(i),this.ks.vs(),this}getStrokeStyle(){return this.Xl}setMedianStrokeStyle(t){return this.hw="function"==typeof t?t(this.hw):t,this.iw.Be(this.hw),this.ks.vs(),this}getMedianStrokeStyle(){return this.hw}Is(){this.KA.Ce(this.dimensionStrategy.toPoint((this.start+this.end-this.XA*(this.end-this.start))/2,this.lowerQuartile)).K(this.dimensionStrategy.toPoint((this.end-this.start)*this.XA,this.upperQuartile-this.lowerQuartile)),this.qA.Re(this.dimensionStrategy.toPoint((this.start+this.end)/2,this.lowerQuartile)).Le(this.dimensionStrategy.toPoint((this.start+this.end)/2,this.lowerExtreme)),this.JA.Re(this.dimensionStrategy.toPoint((this.start+this.end)/2,this.upperQuartile)).Le(this.dimensionStrategy.toPoint((this.start+this.end)/2,this.upperExtreme)),this.QA.Re(this.dimensionStrategy.toPoint((this.start+this.end-this.ZA*(this.end-this.start))/2,this.lowerExtreme)).Le(this.dimensionStrategy.toPoint((this.start+this.end+this.ZA*(this.end-this.start))/2,this.lowerExtreme)),this.tw.Re(this.dimensionStrategy.toPoint((this.start+this.end-this.ZA*(this.end-this.start))/2,this.upperExtreme)).Le(this.dimensionStrategy.toPoint((this.start+this.end+this.ZA*(this.end-this.start))/2,this.upperExtreme)),this.iw.Re(this.dimensionStrategy.toPoint((this.start+this.end-this.XA*(this.end-this.start))/2,this.median)).Le(this.dimensionStrategy.toPoint((this.start+this.end+this.XA*(this.end-this.start))/2,this.median)),this.ks.vs()}getDominantStyle(){return this.KA.Ih()}}class Vc extends Bc{constructor(t,i,s,e,h){super(t,i,s,h),this.Xo=0,this.rw=0,this.nw=0,this.ow=0,this.aw=0,this.lw=0,this.uw=-1,this.ks=t,this.scale=i,this.positive=e,this.ts=h}cw(t,i,s,e,h,r){return this.Xo=t,this.rw=i,this.nw=s,this.ow=e,this.aw=h,this.uw=r,this.dw(),this.ks.vs(),this}Ja(t){return this.lw=t,this.dw(),this.ks.vs(),this}getPosition(){return this.Xo}getOpen(){return this.rw}getHigh(){return this.nw}getLow(){return this.ow}getClose(){return this.aw}fw(){return this.lw}getDataIndices(){return this.uw}}class Nc extends Vc{constructor(){super(...arguments),this.Xl=this.ts.ohlcCandleStrokeStyle,this.sw=this.positive?this.ts.ohlcCandleBodyFillStylePositive:this.ts.ohlcCandleBodyFillStyleNegative,this.ew=this.positive?this.ts.ohlcCandleBodyStrokeStylePositive:this.ts.ohlcCandleBodyStrokeStyleNegative,this.gw=this.LA(this.ks.Oe(this.scale)),this.KA=this.LA(this.ks.we(this.scale)),this.mw=this.LA(this.ks.Oe(this.scale))}setStrokeStyle(t){return this.Xl="function"==typeof t?t(this.Xl):t,this.dw(),this}getStrokeStyle(){return this.Xl}setBodyFillStyle(t){return this.sw="function"==typeof t?t(this.sw):t,this.dw(),this}getBodyFillStyle(){return this.sw}setBodyStrokeStyle(t){return this.ew="function"==typeof t?t(this.ew):t,this.dw(),this}getBodyStrokeStyle(){return this.ew}getDominantStyle(){return this.sw}dw(){const t=this.hc;this.gw.Re(n(this.Xo,this.ow)).Le(n(this.Xo,Math.min(this.aw,this.rw))).Be(this.Xl).ds(t),this.KA.Ae(this.sw)._e(this.ew).ds(t),this.mw.Re(n(this.Xo,Math.max(this.aw,this.rw))).Le(n(this.Xo,this.nw)).Be(this.Xl).ds(t),this.ks.vs()}Is(){const t=n(this.Xo-this.lw/2,Math.min(this.aw,this.rw)),i=ds(this.aw!==this.rw?n(this.Xo+this.lw/2,Math.min(this.aw,this.rw)+Math.abs(this.aw-this.rw)):{x:this.Xo+this.lw/2,y:this.scale.ti(t,{x:0,y:2}).y},t);this.KA.Ce(t).K(i)}}class Gc extends Vc{constructor(){super(...arguments),this.yw=this.positive?this.ts.ohlcBarStrokeStylePositive:this.ts.ohlcBarStrokeStyleNegative,this.pw=this.LA(this.ks.Oe(this.scale)),this.Sw=this.LA(this.ks.Oe(this.scale)),this.bw=this.LA(this.ks.Oe(this.scale))}setStrokeStyle(t){return this.yw="function"==typeof t?t(this.yw):t,this.dw(),this}getStrokeStyle(){return this.yw}getDominantStyle(){return this.yw.getFillStyle()}dw(){const t=this.hc;this.pw.Re(n(this.Xo-this.lw/2,this.rw)).Le(n(this.Xo,this.rw)).Be(this.yw).ds(t),this.bw.Re(n(this.Xo,this.aw)).Le(n(this.Xo+this.lw/2,this.aw)).Be(this.yw).ds(t),this.Sw.Re(n(this.Xo,this.ow)).Le(n(this.Xo,this.nw)).Be(this.yw).ds(t),this.ks.vs()}Is(){}}const Wc={Candlestick:Nc,Bar:Gc};var Hc;!function(t){t[t.before=0]="before",t[t.middle=.5]="middle",t[t.after=1]="after"}(Hc||(Hc={}));const Uc=(t,i)=>{const s=[],e=t.length,h=i;if(e>0){let i=0,r=t[0];s[i]=r,i+=1;for(let o=1;o<e;o+=1){const e=t[o];if(h<=0)s[i]=n(r.x,e.y),i+=1;else{const t=r.x*(1-h)+e.x*h;s[i]=n(t,r.y),i+=1,s[i]=n(t,e.y),i+=1}s[i]=e,i+=1,r=e}}return s},$c=(t,i)=>{const s=t*t,e=s*t,h=1-t,r=h*h,o=r*h;return n(o*i[0].x+3*t*r*i[1].x+3*s*h*i[2].x+e*i[3].x,o*i[0].y+3*t*r*i[1].y+3*s*h*i[2].y+e*i[3].y)},jc=(t,i=32)=>{if(2===t.length)return[t[0],t[1]];const s=(t=>{const i=1e-5,s=t.length-1,e=Array(s);if(s>1){let h=n(0,0),r=n(0,0),o=n(0,0),a=os(ds(t[1],t[0]));const l=3;let u=0,c=0;for(let d=0;d<s;d+=1){const f=Array(4);if(f[0]=t[d],f[1]=t[d],f[3]=t[d+1],f[2]=t[d+1],o=a,h=r,d+1<s?(a=t[d+2]===t[d+1]?n(0,0):os(ds(t[d+2],t[d+1])),r=os(cs(o,a))):r=n(0,0),t[d+1].y===t[d].y)u=0,c=0;else{const s=t[d+1].x-t[d].x;u=Math.abs(h.x)>i?Math.abs(s/(l*h.x)):1,c=Math.abs(r.x)>i?Math.abs(s/(l*r.x)):1}f[1]=cs(us(h,u),f[1]),f[2]=ds(f[2],us(r,c)),e[d]=f}}return e.length>0?e:[]})(t),e=s.length,h=Array(e*i);let r=0;for(let t=0;t<e;t+=1)for(let e=0;e<=i;e+=1)h[r]=$c(e/i,s[t]),r+=1;return h};class Yc extends Du{constructor(t,i,s,e,h,r,o,a,l,u,d,f,g,m){super(t,i,s,e,h,r,o,a,l,d,f),this.rM=[],this.Ms="Point Line series",this.dM=1e5,this.ix=5,this.Jo=0,this.Ca=!1,this.Ta=!1,this.Fa=!1,this.Uv=!0,this.xw="nearest-x",this.Mw=1,this._w=[],this.Aw=t=>{if(this.rM.length>0){const i=this.rM[this.rM.length-1];if(t.length>0){const s=i.Va(),e=i.za(),h=s.length+e.length-+i.xl();if(h>=this.dM){const r=e.length>0?e[e.length-1]:s[i.xl()?h:h-1],o=n((r.x+t[0].x)/2,(r.y+t[0].y)/2);i.Ua(o,c(n(o.x,o.y),n(o.x,o.y))).Ml(!0),this.ww([o].concat(t)).vl(!0)}else i.Ua(t,this.uM)}}else t.length>0&&this.ww(t)},this.kw=t=>{if(this._w.length>0){const i=this._w[this._w.length-1];t.length>0&&((i.Va().length+i.za().length)*this.Mw>=this.dM?this.Cw(t):i.Ua(t))}else t.length>0&&this.Cw(t)},this.Tw=(t,i)=>{const s=t.Pb(i);if(s)return ut(s,this.scale,this.ks.cs.ut)},this.Fw=(t,i)=>{const s=t.Iw(i);if(s)return ut(s,this.scale,this.ks.cs.ut)},this.sx=u,this.Pw=g,this.Dw=Mi(d.pointLineSeriesFillStyle,m),this.Xl=Mi(this.ts.pointLineSeriesStrokeStyle,m)}add(t){return super.add(t),this}gM(){return Fu(this._w)}setStrokeStyle(t){this.Xl="function"==typeof t?t(this.Xl):t;const i=this.Xl;for(let t=0;t<this.rM.length;t+=1)this.rM[t].Be(i);return this.ks.vs(),this}getStrokeStyle(){return this.Xl}setPointFillStyle(t){this.Dw="function"==typeof t?t(this.Dw):t;const i=this.Dw;for(let t=0;t<this._w.length;t+=1)this._w[t].Ae(i);return this.ks.vs(),this}getPointFillStyle(){return this.Dw}setPointSize(t){this.ix=t;for(let i=0;i<this._w.length;i+=1)this._w[i].K(t);return this.ks.vs(),this}getPointSize(){return this.ix}getPointShape(){return this.sx}setPointRotation(t){this.Jo=t;for(let i=0;i<this._w.length;i+=1)this._w[i].Bh(t);return this.ks.vs(),this}getPointRotation(){return this.Jo}setIndividualPointSizeEnabled(t){this.Ca=t;for(let i=0;i<this._w.length;i+=1)this._w[i].Ga(t);return this.ks.vs(),this}getIndividualPointSizeEnabled(){return this.Ca}setIndividualPointRotationEnabled(t){this.Ta=t;for(let i=0;i<this._w.length;i+=1)this._w[i].Wa(t);return this.ks.vs(),this}getIndividualPointRotationEnabled(){return this.Ta}setIndividualPointValueEnabled(t){this.Fa=t;for(let i=0;i<this._w.length;i+=1)this._w[i].Ha(t);return this.ks.vs(),this}getIndividualPointValueEnabled(){return this.Fa}setVisible(t){return super.setVisible(t),this._w.forEach((i=>i.setVisible(t))),this}setCursorInterpolationEnabled(t){return this.Uv=t,this.ks.cs.vs(),this}getCursorInterpolationEnabled(){return this.Uv}setCursorSolveBasis(t){return this.xw=t,this.rM.forEach((i=>i.Ea(Rh(t)))),this._w.forEach((i=>i.Ea(Rh(t)))),this.ks.vs(),this}getCursorSolveBasis(){return this.xw}dd(){return bi(this.Dw)||bi(this.Xl.getFillStyle())}qx(t){}Te(t,i){t.ds(i),this.ks.vs()}fM(t){const i=this.rM.length>0?this.rM[this.rM.length-1].Va().length+this.rM[this.rM.length-1].za().length-+this.rM[this.rM.length-1].xl():void 0;Tu(t,i,this.dM,this.Aw),Tu(t,i,this.dM,this.kw)}Cw(t,i){const s=this.ks.xp(this.scale).Ua(t,i).setMouseInteractions(this.Ti).Ae(this.Dw).Na(this.sx).K(this.ix).Bh(this.Jo).Ga(this.Ca).Wa(this.Ta).Ha(this.Fa).Ea(Rh(this.xw)).ds(this.getHighlight());return this.fs(s),this._w.push(s),s}ww(t,i){const s=this.ks.hy(this.scale,void 0,[ba.UserSeries,...this.Pw]).Ua(t,i).setMouseInteractions(this.Ti).Be(this.Xl).Ea(Rh(this.xw)).ds(this.getHighlight());return this.fs(s),this.rM.push(s),s}attach(t,i=!0){return Si(t,this.ts,{stroke:this.Xl,fill:this.Dw}),super.attach(t,i)}getPointAmount(){return this._w.reduce(((t,i)=>t+i.ja()+i.Ya()),this.tu.length)}clear(){super.clear();for(let t=0;t<this.rM.length;t+=1)this.rM[t].dispose();this.rM.length=0;for(let t=0;t<this._w.length;t+=1)this._w[t].dispose();return this._w.length=0,this}cM(t,i,s,e){super.cM(t,i,s,e),this.oM.cM(this._w,i,s,e,this.scale,(t=>{}))}Pb(t,i,s=this.Uv){const e=s?Bu(t,i?this.rM.filter((t=>t.getIsUnderMouse())):this.rM,this.Fw,"nearest-x"===this.xw?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.xw?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2):Bu(t,i?this._w.filter((t=>t.getIsUnderMouse())):this._w,this.Tw,"nearest-x"===this.xw?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.xw?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==e){const t=ut(e[0],this.ks.cs.ut,this.scale),i=e[1]instanceof Sr?e[1].Zl():e[1].Ih(),s=e[1]instanceof er?e[1].Ih():void 0,h=e[1]instanceof Sr?e[1].Zl().getFillStyle():void 0,r=H(i)?e[0].color?new N({color:e[0].color}):new N({color:i.getFallbackColor()}):void 0;return Il(t,this.scale,this.zb(new ml,this,t.x,t.y,t)._c(),this,h||r||s)}}solveNearestFromScreen(t,i=this.Uv){return this.Pb(ao(t,this.Ji.cs),!1,i)}}const Xc=(t,i)=>t.za().length>=i?t.za().slice(-i):Array.prototype.concat(t.Va(),t.za()).slice(-i),Zc=(t,i,s)=>{const e=Array.prototype.concat(t.Va(),t.za()).slice(0,-s-1).concat(i.slice(s+1,2*s+2));t.$a().Ua(e).Is()};class Kc extends Yc{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d,f){super(t,i,s,e,h,r,n,o,a,l,u,c,d,f),this.Ms="Spline Series",this.Mw=32,this.dM=8e3,this.Bw=t=>{if(0===t.length)return;const i=this._w.length;if(i>0){const s=i>1,e=this._w[i-1];if(s){const s=Array.prototype.concat(e.Va(),e.za()),h=s.length;if(32*h>=this.dM){const s=Xc(e,3),h=Array.prototype.concat(s,t),r=jc(h,32);Zc(this.rM[i-1],r,32),this.ww(r.slice(66))}else if(h<5){const e=this._w[i-2],h=Xc(e,3),r=Array.prototype.concat(h,s,t),n=jc(r,32),o=this.rM[i-1],a=n.slice(66);o.$a().Ua(a).Is()}else{const s=this.rM[i-1],h=Array.prototype.concat(s.Va(),s.za()),r=Xc(e,4),n=Array.prototype.concat(r,t),o=jc(n,32),a=h.slice(0,-66).concat(o.slice(33));s.$a().Ua(a).Is()}}else{const s=Array.prototype.concat(e.Va(),e.za()),h=s.length,r=this.rM[i-1];if(32*h>=this.dM){const i=Xc(e,3),s=Array.prototype.concat(i,t),h=jc(s,32);Zc(this.rM[0],h,32),this.ww(h.slice(66))}else if(h+t.length>1){const i=Array.prototype.concat(s,t),e=jc(i,32);r.$a().Ua(e).Is()}else r.Ua(t)}}else{const i=t.length>0?jc(t,32):t,s=Ji(i);this.ww(i,s)}this.kw(t)}}setCursorInterpolationEnabled(t){return super.setCursorInterpolationEnabled(t)}fM(t){const i=this._w.length,s=this._w.length>0?this._w[i-1].Va().length+this._w[i-1].za().length:void 0;Tu(t,s,Math.ceil(this.dM/this.Mw),this.Bw)}solveNearestFromScreen(t,i=this.Uv){if(i)return super.solveNearestFromScreen(ao(t,this.Ji.cs),i);const s=Bu(ao(t,this.Ji.cs),this._w,this.Tw,"nearest-x"===this.xw?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.xw?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==s){const t=ut(s[0],this.ks.cs.ut,this.scale);return Il(t,this.scale,this.zb(new ml,this,t.x,t.y,t)._c(),this,s[1].Ih())}}}class qc{constructor(){this.wi="FreeformPattern",this.al={type:"disabled",packager:(t,i,s)=>t.slice()}}cM(t,i,s,e,h,r){if(e>0){const h=Math.trunc((i-e)/s);if(h>0&&t.length>1){const i=t.splice(0,h);for(let t=0;t<i.length;t+=1)r(i[t]),i[t].dispose()}}}Ow(t,i){const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)}getXMax(t=[],i){return Kt(t,Ht,Math.max,Yt,i)}getXMin(t=[],i){return Kt(t,Wt,Math.min,jt,i)}getYMax(t=[],i){return Kt(t,$t,Math.max,Zt,i)}getYMin(t=[],i){return Kt(t,Ut,Math.min,Xt,i)}}const Jc=t=>{switch(t){case"normal":default:return 1;case"high":return.25}},Qc=i({al:{type:"disabled",packager:(t,i,s)=>t.slice()}});class td extends Qc{cM(t,i,s,e,h,r){if(e>0){const i=Math.ceil(e/s),n=t.length-i;if(n>0){const i=this.Lw(t,h);if(i>0){const s=n-i>0?i:n;if(s>0){for(let i=0;i<s;i+=1)r(t[i]),t[i].dispose();t.splice(0,s)}}}}}}const id=(t,i)=>{const s=i.kt();return t?Math.min(s,t):s},sd=(t,i)=>{const s=i.Ct();return t?Math.max(s,t):s};class ed extends td{Ow(t,i){return Math.abs(t.x-i.x)}getYMax(t=[],i){return t.reduce(sd,i?i.max.y:void 0)}getYMin(t=[],i){return t.reduce(id,i?i.min.y:void 0)}}const hd=(t,i)=>{const s=i.At();return t?Math.min(s,t):s},rd=(t,i)=>{const s=i.wt();return t?Math.max(s,t):s};class nd extends td{Ow(t,i){return Math.abs(t.y-i.y)}getXMax(t=[],i){return t.reduce(rd,i?i.max.x:void 0)}getXMin(t=[],i){return t.reduce(hd,i?i.min.x:void 0)}}const od={horizontalProgressive:new class extends ed{constructor(){super({al:Ih()}),this.wi="HorizontalProgressivePattern"}Lw(t,i){const s=t.length,e=Math.min(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.x.ti(t[r].wt(),t[r].hl())<e&&(h+=1);return h}getXMax(t=[],i){return void 0!==i?i?i.max.x:void 0:t.length>0?t[t.length-1].wt():void 0}getXMin(t=[],i){return t.length>0&&t[0].ja()>0?t[0].At():i?i.min.x:void 0}setPrecision(t){return this.set("_columnPackaging",Ih(Jc(t)))}},horizontalRegressive:new class extends ed{constructor(){super({al:Ph()}),this.wi="HorizontalRegressivePattern"}Lw(t,i){const s=t.length,e=Math.max(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.x.ti(t[r].At(),-t[r].hl())&&(h+=1);return h}getXMax(t=[],i){return t.length>0&&t[0].ja()>0?t[0].wt():i?i.max.x:void 0}getXMin(t=[],i){return void 0!==i?i?i.min.x:void 0:t.length>0?t[t.length-1].At():void 0}setPrecision(t){return this.set("_columnPackaging",Ph(Jc(t)))}},verticalProgressive:new class extends nd{constructor(){super({al:Dh()}),this.wi="VerticalProgressivePattern"}Lw(t,i){const s=t.length,e=Math.min(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.y.ti(t[r].Ct(),t[r].rl())<e&&(h+=1);return h}getYMax(t=[],i){return void 0!==i?i?i.max.y:void 0:t.length>0?t[t.length-1].Ct():void 0}getYMin(t=[],i){return t.length>0&&t[0].ja()>0?t[0].kt():i?i.min.y:void 0}setPrecision(t){return this.set("_columnPackaging",Dh(Jc(t)))}},verticalRegressive:new class extends nd{constructor(){super({al:Bh()}),this.wi="VerticalRegressivePattern"}Lw(t,i){const s=t.length,e=Math.max(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.y.ti(t[r].kt(),-t[r].rl())&&(h+=1);return h}getYMax(t=[],i){return t.length>0&&t[0].ja()>0?t[0].Ct():i?i.max.y:void 0}getYMin(t=[],i){return void 0!==i?i?i.min.y:void 0:t.length>0?t[t.length-1].kt():void 0}setPrecision(t){return this.set("_columnPackaging",Bh(Jc(t)))}},freeform:new qc};class ad extends Yc{constructor(t,i,s,e,h,r,o,a,l,u,d,f,g,m){super(t,i,s,e,h,r,o,a,od.horizontalProgressive,l,d,f,g,m),this.Ms="Step Series",this.Aw=t=>{const i=this.rM.length>0?this.rM[this.rM.length-1].Va().length+this.rM[this.rM.length-1].za().length:void 0;Tu(t,i,this.dM,this.Rw)},this.Rw=t=>{const i=t.length;if(this.rM.length>0){const s=this.rM[this.rM.length-1];if(i>0){const i=s.Va(),e=s.za(),h=e.length>0?e[e.length-1]:i[i.length-1],r=Uc([h].concat(t),this.Ew);r.shift();const o=n((h.x+r[0].x)/2,(h.y+r[0].y)/2),a=Array.prototype.concat(o,r);(e.length>0?i.length+e.length:i.length)>=this.dM?(s.Ua(o,c(n(o.x,o.y),n(o.x,o.y))).Ml(!0),this.ww(a).vl(!0),this.Cw(t)):s.Ua(a)}}else i>0&&this.ww(Uc(t,this.Ew));this.kw(t)},this.Ew=u,void 0===this.Pw.find((t=>"DataPattern"===t.type))&&this.Pw.push({type:"DataPattern",args:{pattern:"ProgressiveX"}})}}class ld extends Du{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d,f){super(t,i,s,e,h,r,n,o,a,l,u),this.rM=[],this.Ms="Line Series",this.Uv=!0,this.dM=void 0,this.xw="nearest-x",this.iu=void 0,this.dd=()=>bi(this.Xl.getFillStyle()),this.zw=(t,i)=>{const s=t.Qv(i);if(s)return ut(s,this.scale,this.ks.cs.ut)},this.Fw=(t,i)=>{const s=t.Iw(i);if(s)return ut(s,this.scale,this.ks.cs.ut)},this.Pw=c,this.wn=f,this.Xl=Mi(this.ts.lineSeriesStrokeStyle,d),this.Vw={individualLookupValuesEnabled:void 0!==(null==f?void 0:f.individualLookupValuesEnabled)&&f.individualLookupValuesEnabled}}add(t){return super.add(t),this}setMouseInteractions(t){return super.setMouseInteractions(t)}setStrokeStyle(t){this.Xl="function"==typeof t?t(this.Xl):t;const i=this.Xl;for(let t=0;t<this.rM.length;t+=1)this.rM[t].Be(i);return this.ks.vs(),this}getStrokeStyle(){return this.Xl}setDataCleaning(t){return this.iu=t,this.rM.forEach((t=>t.su(this.iu))),this.ks.vs(),this}setCursorInterpolationEnabled(t){return this.Uv=t,this.ks.cs.vs(),this}getCursorInterpolationEnabled(){return this.Uv}setCursorSolveBasis(t){return this.xw=t,this.rM.forEach((i=>i.Ea(Rh(t)))),this.ks.vs(),this}getCursorSolveBasis(){return this.xw}qx(t){}fM(t){let i=this.rM[0];i||(i=this.ww(),this.rM.push(i),this.fs(i)),i.Ua(t)}ww(){return this.ks.hy(this.scale,this.Vw,[ba.UserSeries,...this.Pw]).Be(this.Xl).su(this.iu).Ea(Rh(this.xw)).ds(this.getHighlight())}attach(t,i=!0){return Si(t,this.ts,{stroke:this.Xl}),super.attach(t,i)}Te(t,i){t.ds(i),this.ks.vs()}cM(t,i,s,e){}Pb(t,i,s=this.Uv){const e=Bu(t,i?this.rM.filter((t=>t.getIsUnderMouse())):this.rM,s?this.Fw:this.zw,"nearest-x"===this.xw?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.xw?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==e){const t=ut(e[0],this.ks.cs.ut,this.scale),i=e[1].Zl();return Il(t,this.scale,this.zb(new ml,this,t.x,t.y,t)._c(),this,i.getFillStyle())}}solveNearestFromScreen(t,i=this.Uv){return this.Pb(ao(t,this.Ji.cs),!1,i)}}class ud extends Lc{constructor(t,i,s,e,h,r){super(t,i,s,h),this.Nw={x:0,y:0,width:0,height:0},this.Gw={x1:0,y1:0,x2:0,y2:0},this.Ia=c(n(0,0),n(0,0)),this.ve=Mi(h.rectangleSeriesFillStyle,r),this.ks=t,this.WA=e,this.scale=i,this.xe=Mi(h.rectangleSeriesStrokeStyle,r),this.Me=this.LA(this.ks.we(this.scale)).Ae(this.ve)._e(this.xe)}getBoundaries(){return this.Ia}setDimensions(t){return"x"in t?(this.Nw=t,this.Gw={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.Gw=t,this.Nw={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.Me.Ce(n(this.Nw.x,this.Nw.y)).K(n(this.Nw.width,this.Nw.height)),this.Ia=Ji([this.Nw,n(this.Nw.x+this.Nw.width,this.Nw.y+this.Nw.height)]),this.WA(),this.ks.vs(),this}getDimensionsPositionAndSize(){return this.Nw}getDimensionsTwoPoints(){return this.Gw}setFillStyle(t){return this.ve="function"==typeof t?t(this.ve):t,this.Me.Ae(this.ve),this.ks.vs(),this}getFillStyle(){return this.ve}setStrokeStyle(t){return this.xe="function"==typeof t?t(this.xe):t,this.Me._e(this.xe),this.ks.vs(),this}getStrokeStyle(){return this.xe}getDominantStyle(){return this.Me.Ih()}}class cd extends Rc{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.Ms="Rectangle Series",this.zb=(t,i,s)=>{const e=s.getDimensionsPositionAndSize();return t.addRow(i.Ms).addRow("X","",i.axisX.formatValue(e.x)).addRow("Y","",i.axisX.formatValue(e.y)).addRow("Width","",i.axisX.formatValue(e.width)).addRow("Height","",i.axisX.formatValue(e.height))},this.jA=t=>{const i=t.getDimensionsPositionAndSize(),s=n(i.x+i.width/2,i.y+i.height/2);return ut(s,this.scale,this.ks.cs.ut)},this.Ww=c,this.UA=new ud(this.ks,this.scale,Bt,Bt,this.ts,this.Ww).dispose()}qx(t){}add(t){const i=new ud(this.ks,this.scale,this.RA,this.WA,this.ts,this.Ww).setDimensions(t);return this.VA(i),i}}class dd extends Lc{constructor(t,i,s,e,h,r){super(t,i,s,h),this.Hw=[],this.Ia=zi,this.ks=t,this.scale=i,this.WA=e,this.ve=Mi(h.polygonSeriesFillStyle,r),this.xe=Mi(h.polygonSeriesStrokeStyle,r),this.CM=this.LA(this.ks.Fc(this.scale,lr.Simple))._e(this.xe).Ae(this.ve)}getBoundaries(){return this.Ia}setDimensions(t){return this.Hw=t,this.CM.sl(this.Hw),this.Ia=Ji(this.Hw),this.WA(),this.ks.vs(),this}getDimensions(){return this.Hw}setFillStyle(t){return this.ve="function"==typeof t?t(this.ve):t,this.CM.Ae(this.ve),this.ks.vs(),this}getFillStyle(){return this.ve}setStrokeStyle(t){return this.xe="function"==typeof t?t(this.xe):t,this.CM._e(this.xe),this.ks.vs(),this}getStrokeStyle(){return this.xe}getDominantStyle(){return this.CM.Ih()}}class fd extends Rc{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.Ms="Polygon Series",this.zb=(t,i,s)=>t.addRow(i.getName()),this.jA=t=>{const i=t.getBoundaries(),s=n((i.min.x+i.max.x)/2,(i.min.y+i.max.y)/2);return ut(s,this.scale,this.ks.cs.ut)},this.Ww=c,this.UA=new dd(this.ks,this.scale,Bt,Bt,this.ts,this.Ww).dispose()}qx(t){if(!(t instanceof Ns))throw new Error("PolygonSeries can only be attached to a pair of Linear Axes.")}add(t){const i=new dd(this.ks,this.scale,this.RA,this.WA,this.ts,this.Ww).setDimensions(t);return this.VA(i),i}}class gd extends Lc{constructor(t,i,s,e,h,r){super(t,i,s,h),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.Ia=c(n(0,0),n(0,0)),this.De=this.LA(this.ks.Oe(this.scale)),this.ts=h,this.ks=t,this.scale=i,this.WA=e,this.ve=Mi(h.segmentSeriesStrokeStyle,r),this.De.Be(this.ve)}getBoundaries(){return this.Ia}setDimensions(t){return this.dimensions=t,this.De.Re(n(t.startX,t.startY)).Le(n(t.endX,t.endY)),this.Ia=c(n(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),n(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.WA(),this.ks.vs(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.ve="function"==typeof t?t(this.ve):t,this.De.Be(this.ve),this.ks.vs(),this}getStrokeStyle(){return this.ve}getDominantStyle(){const t=this.De.Zl();return t!==rt?t.getFillStyle():R}}class md extends Rc{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.Ms="Segment Series",this.zb=(t,i,s)=>t.addRow(i.Ms).addRow("Start",i.axisX.formatValue(s.getDimensions().startX),",",i.axisY.formatValue(s.getDimensions().startY)).addRow("End",i.axisX.formatValue(s.getDimensions().endX),",",i.axisY.formatValue(s.getDimensions().endY)),this.jA=t=>{const i=t.getDimensions(),s=n((i.startX+i.endX)/2,(i.startY+i.endY)/2);return ut(s,this.scale,this.ks.cs.ut)},this.Ww=c,this.UA=new gd(this.ks,this.scale,Bt,Bt,this.ts,this.Ww).dispose()}qx(t){}add(t){const i=new gd(this.ks,this.scale,this.RA,this.WA,this.ts,this.Ww).setDimensions(t);return this.VA(i),i}}class yd extends Lc{constructor(t,i,s,e,h,r){super(t,i,s,h),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.Ia=c(n(0,0),n(0,0)),this.Uw=this.LA(this.ks.Oc(this.scale)).Yl(50),this.ks=t,this.scale=i,this.WA=e,this.ve=Mi(h.ellipseSeriesFillStyle,r),this.xe=Mi(h.ellipseSeriesStrokeStyle,r),this.Uw.Ae(this.ve)._e(this.xe)}getBoundaries(){return this.Ia}setDimensions(t){return this.dimensions=t,this.Uw.Ce(n(t.x,t.y)).Ul(t.radiusX).$l(t.radiusY),this.Ia=c(n(t.x-t.radiusX,t.y-t.radiusY),n(t.x+t.radiusX,t.y+t.radiusY)),this.WA(),this.ks.vs(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.ve="function"==typeof t?t(this.ve):t,this.Uw.Ae(this.ve),this.ks.vs(),this}getFillStyle(){return this.ve}setStrokeStyle(t){return this.xe="function"==typeof t?t(this.xe):t,this.Uw._e(this.xe),this.ks.vs(),this}getStrokeStyle(){return this.xe}getDominantStyle(){return this.Uw.Ih()}}class pd extends Rc{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.Ms="Ellipse Series",this.zb=(t,i,s)=>t.addRow(i.Ms).addRow("X","",i.axisX.formatValue(s.getDimensions().x)).addRow("Y","",i.axisY.formatValue(s.getDimensions().y)).addRow("Radius X","",i.axisX.formatValue(s.getDimensions().radiusX)).addRow("Radius Y","",i.axisY.formatValue(s.getDimensions().radiusY)),this.jA=t=>{const i=t.getDimensions(),s=n(i.x,i.y);return ut(s,this.scale,this.ks.cs.ut)},this.Ww=c,this.UA=new yd(this.ks,this.scale,Bt,Bt,this.ts,this.Ww).dispose()}qx(t){if(!(t instanceof Ns||t instanceof Gs))throw new Error("EllipseSeries only supports Linear Axes")}add(t){const i=new yd(this.ks,this.scale,this.RA,this.WA,this.ts,this.Ww).setDimensions(t);return this.VA(i),i}}function Sd(t,i){return t===i?0:t<i?-1:1}function bd(t,i){return t===i}class vd{constructor(t){this.left=null,this.right=null,this.length=1,this.value=t}$w(t,i,s,e,h){if(this.left){const{length:r}=this.left;i=this.left.$w(t,i,s,e,h),s+=r}return i=t.call(e,i,this.value,s,h),s+=1,this.right&&(i=this.right.$w(t,i,s,e,h)),i}jw(t,i,s,e,h){return this.right&&(i=this.right.jw(t,i,s,e,h),s-=this.right.length),i=t.call(e,i,this.value,s,h),s-=1,this.left&&(i=this.left.jw(t,i,s,e,h)),i}Yw(){this.length=1+(this.left?this.left.length:0)+(this.right?this.right.length:0)}Xw(){let t=this;if(t.right){for(t=t.right;t.left;)t=t.left;return t}}Zw(){let t=this;if(t.left){for(t=t.left;t.right;)t=t.right;return t}}}class xd{constructor(t,i=bd,s=Sd){this.root=null,this.length=0,this.contentEquals=i,this.contentCompare=s,t&&(t instanceof Array?t.forEach((t=>this.Ua(t))):this.Ua(t))}Kw(t){return!!this.root&&(this.qw(t),this.contentEquals(t,this.root.value))}Jw(t,i){return this.$w(((s,e)=>s&&t.call(i,e)),!0)}Qw(t,i){return this.$w(((s,e)=>{t.call(i,e)}),void 0)}S(t){if(this.root&&(this.qw(t),this.contentEquals(t,this.root.value)))return this.root}Ua(t){const i=new vd(t);if(!this.root)return this.root=i,this.length+=1,i;if(this.qw(t),!this.contentEquals(t,this.root.value)){const s=this.contentCompare(t,this.root.value);if(0===s)throw new Error(`SortedSet cannot contain incomparable but inequal values: ${t} and ${this.root.value}`);return s<0?(i.right=this.root,i.left=this.root.left,this.root.left=null,this.root.Yw()):(i.left=this.root,i.right=this.root.right,this.root.right=null,this.root.Yw()),i.Yw(),this.root=i,this.length+=1,i}}tk(t){if(this.root&&(this.qw(t),this.contentEquals(t,this.root.value))){if(this.root.left){const{right:i}=this.root;this.root=this.root.left,this.qw(t),this.root.right=i}else this.root=this.root.right;return this.length-=1,this.root&&this.root.Yw(),!0}return!1}ik(){if(this.root){let t=this.root;for(;t.right;)t=t.right;return t}}sk(){if(this.root){let t=this.root;for(;t.left;)t=t.left;return t}}ek(t){if(this.root)return this.qw(t),this.contentCompare(this.root.value,t)>0?this.root.Zw():this.root}hk(t){if(this.root)return this.qw(t),this.contentCompare(this.root.value,t)>=0?this.root.Zw():this.root}rk(t){if(this.root)return this.qw(t),this.contentCompare(this.root.value,t)>=0?this.root:this.root.Xw()}nk(t){if(this.root)return this.qw(t),this.contentCompare(this.root.value,t)<=0?this.root.Xw():this.root}ak(t){t instanceof Array?t.forEach((t=>this.Ua(t))):this.Ua(t)}qw(t){let i,s,e,h,r,n;if(this.root){for(i=new vd,s=i,e=i,n=new vd,r=this.root;;){const i=this.contentCompare(t,r.value);if(i<0){if(!r.left)break;if(this.contentCompare(t,r.left.value)<0&&(h=r.left,r.left=h.right,r.Yw(),h.right=r,h.Yw(),r=h,!r.left))break;h=new vd,h.right=r,h.left=n.left,n.left=h,e.left=r,e.Yw(),e=r,r=r.left}else{if(!(i>0))break;if(!r.right)break;if(this.contentCompare(t,r.right.value)>0&&(h=r.right,r.right=h.left,r.Yw(),h.left=r,h.Yw(),r=h,!r.right))break;h=new vd,h.left=r,h.right=n.right,n.right=h,s.right=r,s.Yw(),s=r,r=r.right}}for(s.right=r.left,s.Yw(),e.left=r.right,e.Yw(),r.left=i.right,r.right=i.left;n.left;)n.left.right.Yw(),n.left=n.left.left;for(;n.right;)n.right.left.Yw(),n.right=n.right.right;r.Yw(),this.root=r}}$w(t,i,s){return this.root&&(i=this.root.$w(t,i,0,s,this)),i}jw(t,i,s){return this.root&&(i=this.root.jw(t,i,this.length-1,s,this)),i}$a(){this.root=null,this.length=0}lk(t,i){let s,e=this.sk();for(;e;){const h=this.nk(e.value);t.call(i,s?s.value:void 0,e.value,h?h.value:void 0),s=e,e=h}}uk(t,i,s){let e,h=this.sk(),r=0;for(;h;){const n=this.nk(h.value);i=t.call(s,i,e?e.value:void 0,h.value,n?n.value:void 0,r++,this),e=h,h=n}return i}}class Md{constructor(t,i){this.key=t,this.value=i}equals(t){return bd(this.key,t.key)&&bd(this.value,t.value)}compare(t){return Sd(this.key,t.key)}}class _d{constructor(t,i=bd,s=Sd){this.length=0,this.contentEquals=i,this.contentCompare=s,this.store=new xd(void 0,((t,s)=>i(t.key,s.key)),((t,i)=>s(t.key,i.key))),t&&(Array.isArray(t)?t.forEach((t=>this.Ua(t.key,t.value))):this.Ua(t.key,t.value))}S(t){const i=this.store.S(new Md(t,void 0));return i?i.value.value:void 0}u(t,i){const s=new Md(t,i),e=this.store.S(s);if(e)return e.value.value=i,e;const h=this.store.Ua(s);return this.length+=1,h}Ua(t,i){return this.u(t,i)}Kw(t){return this.store.Kw(new Md(t,void 0))}$a(){this.store.$a(),this.length=0}$w(t,i,s){return this.store.$w(((i,e)=>t.call(s,i,e.value,e.key,this)),i,this.store)}jw(t,i,s){return this.store.jw(((i,e)=>t.call(s,i,e.value,e.key,this)),i,this.store)}tk(t){const i=new Md(t,void 0);return!!this.store.Kw(i)&&(this.store.tk(i),this.length--,!0)}Qw(t,i){return this.$w(((s,e,h)=>{t.call(i,e,h)}),void 0)}ck(t){return this.store.S(new Md(t,void 0))||void 0}lk(t,i){let s,e=this.store.sk();for(;e;){const h=this.store.nk(e.value);t.call(i,s?s.value.value:void 0,e.value.value,h?h.value.value:void 0),s=e,e=h}}uk(t,i,s){let e,h=this.store.sk(),r=0;for(;h;){const n=this.store.nk(h.value);i=t.call(s,i,e?e.value.value:void 0,h.value.value,n?n.value.value:void 0,r++,this),e=h,h=n}return i}ik(){return this.store.ik()}sk(){return this.store.sk()}ek(t){return this.store.ek(new Md(t,void 0))}hk(t){return this.store.hk(new Md(t,void 0))}rk(t){return this.store.rk(new Md(t,void 0))}nk(t){return this.store.nk(new Md(t,void 0))}}const Ad={minGapNew:1.75,minGapSplit:2,maxGapFuse:1.5},wd=(t,i)=>Math.min(t,i[3]),kd=(t,i)=>Math.max(t,i[2]),Cd=(t,i)=>{const s=t.length;if(!(s<2))return[i,t[0].y,t.reduce(It,Ei),t.reduce(Ft,Ri),t[s-1].y]},Td=(t,i)=>{let s=[];const e=t.getDataIndices(),h=i.getDataIndices();return Array.isArray(e)?s=s.concat(e):s.push(e),Array.isArray(h)?s=s.concat(h):s.push(h),s},Fd=(t,i)=>{if(t.length>0)return i>0?t[t.length-1]:t[0]},Id=(t,i,s)=>t.addRow(i.getName()).addRow("X","",i.axisX.formatValue(s.getPosition())).addRow("Open","",s.getOpen().toFixed(2)).addRow("High","",s.getHigh().toFixed(2)).addRow("Low","",s.getLow().toFixed(2)).addRow("Close","",s.getClose().toFixed(2));class Pd extends Oc{constructor(t,i,s,e,h,r,n,a,l,u,d,f,g){super(t,i,s,e,h,r,n,a,d,f),this.Ms="OHLC Series",this.dk=new _d,this.GA=c(o(Ri,Ri),o(Ei,Ei)),this.fk=0,this.gk=5,this.mk=Ad,this.iu=void 0,this.yk=void 0,this.pk=void 0,this.Sk=!0,this.Fi=Ys.onHover,this.zb=Id,this.bk=l,this.vk=u,this.xk=new this.bk(this.ks,this.scale,Bt,!0,this.ts).dispose(),this.Mk=new this.vk(this.ks,this.scale,Bt,!1,this.ts).dispose()}qx(t){if(!(t.x instanceof Es))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this._k=t.x}setStyle(t){return this.Ak=t,this.wk(),this.ks.vs(),this}setPositiveStyle(t){return this.kk=t,this.wk(),this.ks.vs(),this}setNegativeStyle(t){return this.Ck=t,this.wk(),this.ks.vs(),this}setFigureWidth(t){return this.gk=t,this.ks.vs(),this}getFigureWidth(){return this.gk}setFigureAutoFitting(t){return this.mk=t?Ad:void 0,this.ks.vs(),this}getFigureAutoFitting(){return void 0!==this.mk}Tk(t,i){return t-i/2<=this.scale.x.getInnerEnd()+.1*this.scale.x.getInnerInterval()&&this.scale.x.getInnerStart()-.1*this.scale.x.getInnerInterval()<=t+i/2}Fk(t,i,s,e){const h=(t=>t[4]>=t[1])(t),r=new(h?this.bk:this.vk)(this.ks,this.scale,this.RA,h,this.ts);return this.VA(r,e),this.Ik(r),this.Te(r,this.getHighlight()),r.cw(t[0],t[1],t[2],t[3],t[4],i).Ja(s),r}Pk(t){const i=this.fk;return this.fk+=1,this.dk.u(i,t),this.Sk=!0,this.I.emit("dataAdd",this,[t],void 0),i}wk(){this.zA.forEach((t=>{this.Ak&&this.Ak(t),t.positive&&this.kk?this.kk(t):!t.positive&&this.Ck&&this.Ck(t)}))}Ik(t){this.Ak&&this.Ak(t),t.positive&&this.kk?this.kk(t):!t.positive&&this.Ck&&this.Ck(t)}Dk(t){return t*this._k.getPixelSize()}Bk(t){return t/this._k.getPixelSize()}Ok(t){if(!Array.isArray(t))return this.dk.S(t);if(this.dk.S(t[0])&&this.dk.S(t[t.length-1])){let i=0;const s=this.dk.S(t[0])[1];let e=Ei,h=Ri;const r=this.dk.S(t[t.length-1])[4];for(let s=0;s<t.length;s+=1){const r=this.dk.S(t[s]);i+=r[0]/t.length,e=Math.max(e,r[2]),h=Math.min(h,r[3])}return[i,s,e,h,r]}}Lk(t,i,s){if(0===this.zA.length)return;if(this.zA.length>1){const i=t>0?this.zA.length-1:0;this.zA[i].dispose()}let e;do{e=!1;const h=Fd(this.zA,t);if(h){const r=h.getPosition(),n=h.getDataIndices();let o,a=("number"==typeof n?n:n[t>0?n.length-1:0])+t;const l=[],u=[];for(;;){const e=this.dk.S(a);if(!e)break;if(!this.Tk(e[0],i))break;if(o){if(Math.abs(r-e[0])>=1.5*s)break;t>0?o[4]=e[4]:o[1]=e[1],o[2]=Math.max(o[2],e[2]),o[3]=Math.min(o[3],e[3])}else o=e.slice();l.push(e[0]),t>0?u.push(a):u.splice(0,0,a),a+=t}if(o){const s=t>0?void 0:0;this.Fk(o,u,i,s),e=!0}}}while(e)}cM(t){var i;if(t&&"maxDataPointCount"in t){const i=t.maxDataPointCount;if(i&&this.dk.length>i){const t=this.fk-1,s=this.dk.store.sk();if(s){for(let e=t-i;e>=s.value.key;e-=1)this.dk.tk(e);let e=!0;this.GA.min.y=Ri,this.GA.max.y=Ei;for(let s=1+t-i;s<=t;s+=1){const t=this.dk.S(s);t&&(this.GA.min.y=Math.min(this.GA.min.y,t[3]),this.GA.max.y=Math.max(this.GA.max.y,t[2]),e&&(this.GA.min.x=t[0],e=!1))}}}}else if(t&&"minDataPointCount"in t&&t.minDataPointCount){const s=t.minDataPointCount,e=this.scale.x.getInnerStart(),h=this.fk-1;let r=this.dk.store.sk();if(r){const t=r.value.key;let n;for(let t=r.value.key;t<=h&&!((null===(i=this.dk.S(t))||void 0===i?void 0:i[0])>=e);t+=1)n=t;if(void 0!==n&&n-t>=1e3&&this.dk.length-(n-t)>=s){for(let i=n;i>=t;i-=1)this.dk.tk(i);r=this.dk.store.sk();let i=!0;if(this.GA.min.y=Ri,this.GA.max.y=Ei,r)for(let t=r.value.key;t<=h;t+=1){const s=this.dk.S(t);s&&(this.GA.min.y=Math.min(this.GA.min.y,s[3]),this.GA.max.y=Math.max(this.GA.max.y,s[2]),i&&(this.GA.min.x=s[0],i=!1))}}}}return this}setDataCleaning(t){return this.iu=t,this.ks.vs(),this}my(){super.my(),this.cM(this.iu);const t=this._k.getPixelSize(),i=this.yk,s=c(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd()),e=this.pk,h=this.Dk(this.gk),r=!e||s.max-s.min!=e.max-e.min,n=this.zA.length;if(!e||s.min>e.min)for(let t=0;t<this.zA.length;t+=1){const i=this.zA[t];if(this.Tk(i.getPosition(),h))break;i.dispose(),t-=1}if(!e||s.max<e.max)for(let t=this.zA.length-1;t>=0;t-=1){const i=this.zA[t];if(this.Tk(i.getPosition(),h))break;i.dispose()}if(0===this.zA.length&&this.dk.length>0)for(let t=0;t<this.fk;t+=1){const i=this.dk.S(t);if(i&&this.Tk(i[0],h)){this.Fk(i,t,h);break}}if(this.zA.length>0){const n=this.mk?h*this.mk.minGapNew:0;if((r||!e||s.min<e.min)&&(this.Lk(-1,h,n),this.Sk=!0),(r||!e||this.Sk||s.max>e.max)&&(this.Lk(1,h,n),this.Sk=!0),this.mk){const s=h*this.mk.maxGapFuse,e=h*this.mk.minGapSplit;if(void 0===i||t!==i||this.Sk){let t,i;do{t=!1;for(let i=0;i<this.zA.length;i+=1){const s=this.zA[i],r=s.getDataIndices();if("number"!=typeof r&&r.length>1){const n=s.getPosition(),o=i>0?this.zA[i-1]:void 0,a=i<this.zA.length-1?this.zA[i+1]:void 0;if((!o||n-o.getPosition()>=1.5*e)&&(!a||a.getPosition()-n>=1.5*e)){t=!0,s.dispose();const e=r.length,n=Math.round(e/2),o=r.splice(n,e-n),a=this.Ok(r),l=this.Ok(o);void 0!==a&&this.Fk(a,r,h,i),void 0!==l&&this.Fk(l,o,h,i+1),i+=1}}}}while(t);do{i=!1;for(let t=0;t<this.zA.length;t+=1){const e=this.zA[t],r=t<this.zA.length-1?this.zA[t+1]:void 0;if(void 0!==r&&r.getPosition()-e.getPosition()<=s){i=!0;const s=(e.getPosition()+r.getPosition())/2,n=e.getOpen(),o=Math.max(e.getHigh(),r.getHigh()),a=Math.min(e.getLow(),r.getLow()),l=r.getClose(),u=Td(e,r);e.dispose(),r.dispose(),this.Fk([s,n,o,a,l],u,h,t)}}}while(i)}}}if(t!==i){for(let t=0;t<this.zA.length;t+=1)this.zA[t].Ja(h);this.yk=t}n!==this.zA.length&&this.hM();for(let t=0;t<this.zA.length;t+=1)this.zA[t].Is();this.pk=s,this.Sk=!1}Pb(t,i){const s=this.zA.length;if(i){const t=this.zA.find((t=>t.getIsUnderMouse()));return t&&{location:n(t.getPosition(),t.getClose()),scale:this.scale,resultTableContent:this.zb(new ml,this,t)._c(),series:this,fillStyle:t.getDominantStyle(),ohlcSegment:t}}if(s>0){const i=((t,i,s)=>{if(t<s(0)||s(i)<t)return;let e=0;const h=i;for(;e!==i;){const h=Math.ceil((e+i)/2);t<s(h)?i=h-1:e=h}const r=Math.abs(t-s(e));return e<h&&Math.abs(t-s(e+1))<r?e+1:e})(ut(t,this.ks.cs.ut,this.scale).x,s-1,(t=>this.zA[t].getPosition()));if(void 0===i)return;const e=this.zA[i];return{location:n(e.getPosition(),e.getClose()),scale:this.scale,resultTableContent:this.zb(new ml,this,e)._c(),series:this,fillStyle:e.getDominantStyle(),ohlcSegment:e}}}solveNearestFromScreen(t){return this.Pb(ao(t,this.Ji.cs),!1)}setCursorResultTableFormatter(t){return this.zb=t,this.Ji.cs.vs(),this}getCursorResultTableFormatter(){return this.zb}setCursorEnabled(t){return super.setCursorEnabled(t)}clear(){return this.dk.$a(),this.Sk=!0,this.GA.min.x=Ri,this.GA.min.y=Ri,this.GA.max.x=Ei,this.GA.max.y=Ei,this.I.emit("dataClear",this),super.clear()}getXMax(){return this.GA.max.x}getXMin(){return this.GA.min.x}getYMax(){return this.GA.max.y}getYMin(){return this.GA.min.y}dr(){return n(this.gk/2,0)}gM(){const t=[];return this.dk.Qw((i=>{t.push(i)})),t}mM(t){return this.I.on("dataAdd",t)}yM(t){return this.I.off(t)}pM(t){return this.I.on("dataClear",t)}SM(t){return this.I.off(t)}attach(t,i){return super.attach(t,i),Si(t,this.ts,{fill:this.xk.getDominantStyle(),fill2:this.Mk.getDominantStyle(),behavior:{colorStep:!0}}),this}}class Dd extends Pd{add(t){if(t.length>0){if(Array.isArray(t[0])){const i=t;for(let t=0;t<i.length;t+=1)super.Pk(i[t]);this.GA.min.x=Math.min(this.GA.min.x,i[0][0]),this.GA.max.x=Math.max(this.GA.max.x,i[i.length-1][0]),this.GA.min.y=i.reduce(wd,this.GA.min.y),this.GA.max.y=i.reduce(kd,this.GA.max.y)}else{const i=t;super.Pk(i),this.GA.min.x=Math.min(this.GA.min.x,i[0]),this.GA.max.x=Math.max(this.GA.max.x,i[0]),this.GA.min.y=Math.min(this.GA.min.y,i[3]),this.GA.max.y=Math.max(this.GA.max.y,i[2])}this.ks.vs()}return this}Qy(){return this.ip&&this.dk.length>0&&this.getVisible()}}class Bd extends Pd{constructor(){super(...arguments),this.tu=[]}Qy(){return this.ip&&(this.dk.length>0||this.tu.length>0)&&this.getVisible()}add(t){Array.isArray(t)?this.addPoints(t):this.addPoint(t);const i=this.tu[this.tu.length-1];return this.lM=i?{x:i.x,y:i.y}:void 0,this}addPoint(t){return this.tu.push(t),this.ks.vs(),this.GA.min.x=Math.min(this.GA.min.x,t.x),this.GA.max.x=Math.max(this.GA.max.x,t.x),this.GA.min.y=Math.min(this.GA.min.y,t.y),this.GA.max.y=Math.max(this.GA.max.y,t.y),this}addPoints(t){return t.length>0&&(this.tu=this.tu.concat(t),this.ks.vs(),this.GA.min.x=Math.min(this.GA.min.x,t[0].x),this.GA.max.x=Math.max(this.GA.max.x,t[t.length-1].x),this.GA.min.y=t.reduce(Ft,this.GA.min.y),this.GA.max.y=t.reduce(It,this.GA.max.y)),this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.lM?this.lM.x+i:0),this.add(Iu(t,i,e)),this}my(){if(this.cM(this.iu),this.tu.length>0){let t;if(void 0!==this.Rk)t=this.Rk;else{const i=this.mk?this.mk.minGapNew:1;t=this.Dk(this.gk*i)}const i=void 0!==this.Ek?this.Ek:this.tu[0].x,s=((t,i,s)=>{const e=[],h=[];let r=!1;for(;t.length>0;){for(let n=0;n<t.length;n+=1){const o=t[n];if(h.push(o),r=o.x>=s+i,r){const r=Cd(h,s+i/2);void 0!==r&&(e.push(r),t.splice(0,h.length-1)),s+=i;break}}if(h.length=0,!r)break}return e})(this.tu,t,i);if(s.length>0){for(let t=0;t<s.length;t+=1)this.Pk(s[t]);this.Ek=s[s.length-1][0]+t/2}}super.my()}setPackingResolution(t){return this.Rk=t,this}getLastPoint(){return this.lM}}const Od={Normal:Dd,AutomaticPacking:Bd},Ld=(t,i,s)=>t.addRow(i.getName()).addRow("Lower extreme","",s.lowerExtreme.toFixed(2)).addRow("Lower quartile","",s.lowerQuartile.toFixed(2)).addRow("Median","",s.median.toFixed(2)).addRow("Upper quartile","",s.upperQuartile.toFixed(2)).addRow("Upper extreme","",s.upperExtreme.toFixed(2));class Rd extends Rc{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d){super(t,i,s,e,h,r,n,o,u,c),this.Ms="Box Series",this.zb=Ld,this.jA=t=>ut(this.Cs.toPoint((t.start+t.end)/2,t.median),this.scale,this.ks.cs.ut),this.zk=a,this.Cs=l,this.UA=new this.zk(this.ks,this.scale,this.RA,this.Cs,0,0,0,0,0,0,0,this.ts).dispose()}qx(t){if(!(t instanceof Ns||t instanceof Gs))throw new Error("BoxSeries only supports Linear Axes")}add(t){const i=new this.zk(this.ks,this.scale,this.RA,this.Cs,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.ts),s=i.boundaries;return this.GA=this.GA?ts(this.GA,s):s,this.ks.vs(),this.VA(i),i}}class Ed extends Cu{constructor(){super(...arguments),this.rM=[],this.tu=[],this.Vk=[],this.Nk=[],this.dM=1e3,this.nM=0,this.Fi=Ys.onHover,this.al={type:"disabled",packager:(t,i,s)=>t.slice()},this.Uv=!0,this.Gk=[],this.Wk=[],this.Hk=!1,this.dd=()=>bi(this.Uk)||bi(this.$k),this.jk=t=>{const i=t.length;if(this.rM.length>0){const s=this.rM.length-1,e=this.rM[s];if(i>0){const[i,s]=e.Va(),[h,r]=e.za();if((h?i.length+h.length:i.length)>=this.dM){const o=h&&h.length>0?h[h.length-1]:i[i.length-1],l=r&&r.length>0?r[r.length-1]:s[i.length-1],u=(o.x+t[0].position)/2,d=ps(u,o,n(t[0].position,t[0].high)).y,f=ps(u,l,n(t[0].position,t[0].low)).y,g=a(u,d,f);e.Ua(g,c(n(u,f),n(u,d))).Ml(!0),this.Yk([g].concat(t)).vl(!0)}else e.Ua(t)}}else i>0&&this.Yk(t)},this.Xk=t=>{const i=this.Gk,s=t.length;if(this.Gk.length>0){if(s>0){const s=i[i.length-1],e=s.Va(),h=s.za();if(e.length+h.length>=this.dM){const r=h.length>0?h[h.length-1]:e[e.length-1],o=(r.x+t[0].x)/2,a=ps(o,r,n(t[0].x,t[0].y)).y,l=n(o,a);s.Ua(l,c(n(o,a),n(o,a))).Ml(!0),i.push(this.Zk([l].concat(t),this.uM).vl(!0))}else s.Ua(t)}}else s>0&&i.push(this.Zk(t))},this.Kk=t=>{const i=this.Wk,s=t.length;if(this.Wk.length>0){if(s>0){const s=i[i.length-1],e=s.Va(),h=s.za();if(e.length+h.length>=this.dM){const r=h.length>0?h[h.length-1]:e[e.length-1],o=(r.x+t[0].x)/2,a=ps(o,r,n(t[0].x,t[0].y)).y,l=n(o,a);s.Ua(l,c(n(o,a),n(o,a))).Ml(!0),i.push(this.qk([l].concat(t)).vl(!0))}else s.Ua(t)}}else s>0&&i.push(this.qk(t))},this.Jk=(t,i)=>{const s=t.Qv(i);if(s)return[ut(s[0],this.scale,this.ks.cs.ut),ut(s[1],this.scale,this.ks.cs.ut)]},this.Qk=(t,i)=>{const s=t.Iw(i);if(s)return[ut(s[0],this.scale,this.ks.cs.ut),ut(s[1],this.scale,this.ks.cs.ut)]}}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.nM=void 0!==i&&i>0?i:0,this.ks.vs(),this}clear(){for(let t=0;t<this.rM.length;t+=1)this.rM[t].dispose();for(let t=0;t<this.Gk.length;t+=1)this.Gk[t].dispose();for(let t=0;t<this.Wk.length;t+=1)this.Wk[t].dispose();return this.tu.length=0,this.Vk.length=0,this.Nk.length=0,this.uM=void 0,this.rM.length=0,this.Gk.length=0,this.Wk.length=0,this.ks.vs(),this.I.emit("dataClear",this),this}getPointAmount(){return this.rM.reduce(((t,i)=>t+i.ja()+i.Ya()),this.tu.length)}setCursorInterpolationEnabled(t){return this.Uv=t,this.ks.cs.vs(),this}getCursorInterpolationEnabled(){return this.Uv}setCursorResultTableFormatter(t){return this.zb=t,this.Ji.cs.vs(),this}setCursorEnabled(t){return super.setCursorEnabled(t)}getCursorResultTableFormatter(){return this.zb}getXMax(){return Kt(this.rM,Ht,Math.max,Yt,this.uM)}getXMin(){return Kt(this.rM,Wt,Math.min,jt,this.uM)}getYMax(){return Kt(this.rM,$t,Math.max,Zt,this.uM)}getYMin(){return Kt(this.rM,Ut,Math.min,Xt,this.uM)}dr(){const t=n(0,0);for(const i of this.rM)t.x=Math.max(t.x,i.hl()),t.y=Math.max(t.y,i.rl());return t}Qy(){return this.ip&&this.getPointAmount()>0&&this.getVisible()}qx(t){}aM(t,i,s){this.tu=gi(this.tu,t,{canReturnB:!1}),this.Vk=gi(this.Vk,i,{canReturnB:!1}),this.Nk=gi(this.Nk,s,{canReturnB:!1}),this.ks.vs()}tC(t,i,s,e){this.iC(i,s,e),this.aM(Array.isArray(t)?t:[t],i,s)}iC(t,i,s){const e=ts(Ji(t),Ji(i));this.uM?this.uM=ts(this.uM,e):this.uM=e,s&&(this.uM=ts(this.uM,s))}Lw(){const t=this.rM.length,i=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let s=0;if(t>1)for(let e=0;e<t-1;e+=1)this.scale.x.ti(this.rM[e].wt(),this.rM[e].hl())<i&&(s+=1);return s}cM(t,i,s,e){if(s>0){const h=Math.ceil(s/i),r=t.length-h;if(r>0&&e>0){const i=r-e>0?e:r;if(i>0){for(let s=0;s<i;s+=1)t[s].dispose();t.splice(0,i)}}}}sC(t){const i=this.rM.length>0?this.rM[this.rM.length-1]:void 0,s=i?i.Va()[0].length+(i.za()[0]?i.za()[0].length:0):void 0;Tu(t,s,this.dM,this.jk)}eC(t){const i=this.Gk.length>0?this.Gk[this.Gk.length-1].Va().length+this.Gk[this.Gk.length-1].za().length:void 0;Tu(t,i,this.dM,this.Xk)}hC(t,i){const s=this.Gk.length>0?this.Gk[this.Gk.length-1].Va().length+this.Gk[this.Gk.length-1].za().length:void 0;Tu(t,s,this.dM,this.Xk),Tu(i,s,this.dM,this.Kk)}Yk(t,i){const s=this.ks.rC(this.scale).Ua(t,i).Ae(this.Uk).Sl(this.$k).yl(this.al).ds(this.getHighlight());return this.rM.push(s),this.fs(s),s}nC(t,i,s){const e=this.ks.hy(this.scale,void 0,[ba.UserSeries]).Ua(t,s).setMouseInteractions(!1).Be(i).ds(this.getHighlight());return this.fs(e),e}Zk(t,i){return this.nC(t,this.oC,i)}qk(t,i){return this.nC(t,this.aC,i)}lC(t){this.Uk="function"==typeof t?t(this.Uk):t;const i=this.Uk;for(let t=0;t<this.rM.length;t+=1)this.rM[t].Ae(i);this.ks.vs()}uC(t){this.$k="function"==typeof t?t(this.$k):t;const i=this.$k;for(let t=0;t<this.rM.length;t+=1)this.rM[t].Sl(i);this.ks.vs()}cC(){return this.Uk}bl(){return this.$k}dC(t){this.oC="function"==typeof t?t(this.oC):t;const i=this.oC;for(let t=0;t<this.Gk.length;t+=1)this.Gk[t].Be(i);this.ks.vs()}fC(t){this.aC="function"==typeof t?t(this.aC):t;const i=this.aC;for(let t=0;t<this.Wk.length;t+=1)this.Wk[t].Be(i);this.ks.vs()}gC(){return this.oC}mC(){return this.aC}Te(t,i){t.ds(i),this.yC(i),this.ks.vs()}yC(t){for(let i=0;i<this.Gk.length;i+=1)this.Gk[i].ds(t);for(let i=0;i<this.Wk.length;i+=1)this.Wk[i].ds(t)}ap(){if(super.ap(),this.Hk=!1,this.nM>0){const t=this.rM.length,i=this.Lw();this.cM(this.rM,this.dM,this.nM,i);const s=this.rM.length;this.Gk.length>0&&this.cM(this.Gk,this.dM,this.nM,i),this.Wk.length>0&&this.cM(this.Wk,this.dM,this.nM,i),t!==s&&this.hM(),this.Hk=!0}}ke(){if(super.ke(),this.tu.length>0&&(this.sC(this.tu),this.pC(this.Vk,this.Nk),this.Hk=!0),this.Hk){const t=this.getBoundaries();for(const i of this.rM)i.To(t);for(const i of this.Gk)i.To(t);for(const i of this.Wk)i.To(t)}}my(){this.uM=void 0,this.tu.length=0,this.Vk.length=0,this.Nk.length=0}Pb(t,i,s=this.Uv){const e=((t,i,s)=>{let e,h,r=Number.MAX_VALUE;for(let n=0;n<i.length;n+=1){const o=i[n],a=s(o,t);if(a){const i=Yi(t,a[0]),s=Yi(t,a[1]);(void 0===e||i<r||s<r)&&(e=a,h=o,i<r?r=i:s<r&&(r=s))}}return e&&h?[e,h]:void 0})(t,i?this.rM.filter((t=>t.getIsUnderMouse())):this.rM,s?this.Qk:this.Jk);if(void 0!==e&&void 0!==e[0]){const t=ut(e[0][0],this.ks.cs.ut,this.scale),i=ut(e[0][1],this.ks.cs.ut,this.scale);return Il(t,this.scale,this.zb(new ml,this,t.x,t.y,i.y)._c(),this,e[1].Ih())}}solveNearestFromScreen(t,i=this.Uv){return this.Pb(ao(t,this.Ji.cs),!1,i)}}const zd=(t,i,s,e,h)=>t.addRow(i.getName()).addRow("Position","",i.axisX.formatValue(s)).addRow("Value","",i.axisY.formatValue(e)).addRow("Base","",i.axisY.formatValue(h));class Vd extends Ed{constructor(t,i,s,e,h,r,n,o,a=0,l,u){super(t,i,s,e,h,r,n,o,l,u),this.Ms="Area Series",this.zb=zd,this.SC=a}add(t){const i=Array.isArray(t)?t:[t];if(i.length>0){const t=this.bC(i),[s,e]=this.vC(t);this.tC(t,s,e,c(n(Ri,this.SC),n(Ei,this.SC)));const h=this.tu[this.tu.length-1];this.lM=h?{position:h.position,high:h.high,low:h.low}:void 0,this.I.emit("dataAdd",this,i,this.uM)}return this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.lM?this.lM.position+i:0),this.add(Iu(t,i,e)),this}mM(t){return this.I.on("dataAdd",t)}yM(t){return this.I.off(t)}pM(t){return this.I.on("dataClear",t)}SM(t){return this.I.off(t)}}class Nd extends Vd{constructor(){super(...arguments),this.aC=rt}pC(t){return this.eC(t)}vC(t){const i=t.length,s=Array(i);for(let e=0;e<i;e+=1){const i=t[e];s[e]=n(i.position,i.high)}return[s,[]]}setStrokeStyle(t){return this.dC(t),this}getStrokeStyle(){return this.gC()}}class Gd extends Nd{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u);const d=c;this.Uk=Mi(this.ts.areaSeriesPositiveFillStyle,d),this.$k=R,this.oC=Mi(this.ts.areaSeriesPositiveStrokeStyle,d)}bC(t){return this.xC(t)}xC(t){const i=[];return 1===t.length?this.MC(t[0],i):this._C(t,i),i}MC(t,i,s=0){const e=this.SC;return i[s]=t.y<e?a(t.x,e,e):a(t.x,t.y,e),s+1}_C(t,i,s=0){let e=0;const h=t.length-1,r=this.SC;for(;e<h;){const h=t[e],o=t[e+=1];if(h.y>=r){const t=a(h.x,h.y,r);if(0!==s&&qt(i[s-1],t)||(i[s]=t,s+=1),o.y<r){const t=As(n(Ei,r),n(Ri,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,r,r),s+=1}else i[s]=a(o.x,o.y,r),s+=1}else{const t=a(h.x,r,r);if(0!==s&&qt(i[s-1],t)||(i[s]=t,s+=1),o.y>=r){const t=As(n(Ei,r),n(Ri,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,o.y,r),s+=1}else i[s]=a(o.x,r,r),s+=1}}return s}gM(){return Fu(this.rM,(t=>t[0]||[]))}setFillStyle(t){return this.lC(t),this}getFillStyle(){return this.cC()}attach(t,i=!0){return Si(t,this.ts,{fill:this.Uk,stroke:this.oC}),super.attach(t,i)}}class Wd extends Nd{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l,u);const c=t.getSeries().length;this.Uk=R,this.$k=Mi(this.ts.areaSeriesNegativeFillStyle,c),this.oC=Mi(this.ts.areaSeriesNegativeStrokeStyle,c)}bC(t){return this.AC(t)}AC(t){const i=[];return 1===t.length?this.MC(t[0],i):this._C(t,i),i}MC(t,i,s=0){const e=this.SC;return i[s]=t.y>e?a(t.x,e,e):a(t.x,t.y,e),s+1}_C(t,i,s=0){let e=0;const h=t.length-1,r=this.SC;for(;e<h;){const h=t[e],o=t[e+=1];if(h.y<=r){const t=a(h.x,h.y,r);if(0!==s&&qt(i[s-1],t)||(i[s]=t,s+=1),o.y>r){const t=As(n(Ei,r),n(Ri,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,r,r),s+=1}else i[s]=a(o.x,o.y,r),s+=1}else{const t=a(h.x,r,r);if(0!==s&&qt(i[s-1],t)||(i[s]=t,s+=1),o.y<=r){const t=As(n(Ei,r),n(Ri,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,o.y,r),s+=1}else i[s]=a(o.x,r,r),s+=1}}return s}gM(){return Fu(this.rM,(t=>t[1]))}setFillStyle(t){return this.uC(t),this}getFillStyle(){return this.bl()}attach(t,i=!0){return Si(t,this.ts,{fill:this.$k,stroke:this.oC}),super.attach(t,i)}}class Hd extends Vd{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l,u);const c=t.getSeries().length;this.Uk=Mi(this.ts.areaSeriesBipolarHighFillStyle,c),this.oC=Mi(this.ts.areaSeriesBipolarHighStrokeStyle,c),this.$k=Mi(this.ts.areaSeriesBipolarLowFillStyle,c),this.aC=Mi(this.ts.areaSeriesBipolarLowStrokeStyle,c)}bC(t){return this.wC(t)}pC(t,i){return this.hC(t,i)}wC(t){let i=0;const s=[],e=t.length,h=this.SC;return e>0&&(this.kC&&(this.kC.y<=h&&h<=t[0].y||this.kC.y>=h&&h>=t[0].y)&&(s[i]=a(.5*(this.kC.x+t[0].x),h,h),i+=1),this.kC=t[e-1],1===e?this.MC(t[0],s,i):this._C(t,s)),s}MC(t,i,s=0){return i[s]=a(t.x,t.y,this.SC),s+1}_C(t,i){let s=0,e=0;const h=t.length-1,r=this.SC;for(;e<h;){const h=t[e],n=t[e+=1],o=a(h.x,h.y,r);if(0!==s&&qt(i[s-1],o)||(i[s]=o,s+=1),h.y<=r&&r<=n.y||h.y>=r&&r>=n.y){const t=h.y,e=n.y,o=r,l=t===e?n.x:On(h.x,n.x,(o-t)/(e-t));i[s]=a(l,r,r),s+=1}i[s]=a(n.x,n.y,r),s+=1}return s}vC(t){const i=t.length,s=Array(i),e=Array(i),h=this.SC;for(let r=0;r<i;r+=1){const i=t[r];i.high>h?(s[r]=n(i.position,i.high),e[r]=n(i.position,h)):i.high<h?(s[r]=n(i.position,h),e[r]=n(i.position,i.high)):(s[r]=n(i.position,i.high),e[r]=n(i.position,i.high))}return[s,e]}gM(){return Fu(this.rM,(t=>t[0]))}setPositiveFillStyle(t){return this.lC(t),this}setNegativeFillStyle(t){return this.uC(t),this}setPositiveStrokeStyle(t){return this.dC(t),this}setNegativeStrokeStyle(t){return this.fC(t),this}getPositiveFillStyle(){return this.cC()}getNegativeFillStyle(){return this.bl()}getPositiveStrokeStyle(){return this.gC()}getNegativeStrokeStyle(){return this.mC()}attach(t,i=!0){return Si(t,this.ts,{fill:this.Uk,fill2:this.$k,behavior:{colorStep:!0}}),super.attach(t,i)}}const Ud={Positive:Gd,Negative:Wd,Bipolar:Hd},$d=(t,i,s,e,h)=>t.addRow(i.getName()).addRow("Position","",i.axisX.formatValue(s)).addRow("High","",i.axisY.formatValue(e)).addRow("Low","",i.axisY.formatValue(h));class jd extends Ed{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l),this.Ms="Area Range Series",this.zb=$d;const c=u;this.Uk=Mi(this.ts.areaRangeSeriesFillStyle,c),this.oC=Mi(this.ts.areaRangeSeriesStrokeStyle,c),this.$k=Mi(this.ts.areaRangeSeriesFillStyleInverted,c),this.aC=Mi(this.ts.areaRangeSeriesStrokeStyleInverted,c)}add(t){const i=Array.isArray(t)?t:[t],[s,e]=u(i);this.tC(t,s,e);const h=this.tu[this.tu.length-1];return this.lM=h?{position:h.position,high:h.high,low:h.low}:void 0,this.I.emit("dataAdd",this,i,this.uM),this}addArraysHighLow(t,i,s=1,e=0){if(t.length!==i.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let h=e;h||(h=this.lM?this.lM.position+s:0),this.add(((t,i,s=1,e)=>{const h=void 0!==e?e:0,r=new Array(t.length);for(let e=0;e<t.length;e+=1)r[e]={position:h+s*e,high:t[e],low:i[e]};return r})(t,i,s,h))}return this}pC(t,i){this.hC(t,i)}setHighFillStyle(t){return this.lC(t),this}setLowFillStyle(t){return this.uC(t),this}setHighStrokeStyle(t){return this.dC(t),this}setLowStrokeStyle(t){return this.fC(t),this}getHighFillStyle(){return this.cC()}getLowFillStyle(){return this.bl()}getHighStrokeStyle(){return this.gC()}getLowStrokeStyle(){return this.mC()}gM(){return Fu(this.rM,(t=>{const i=t[0],s=t[1];if(!i||!s)return[];const e=[],h=i.length;for(let t=0;t<h;t+=1)e[t]={position:i[t].x,high:i[t].y,low:s[t].y};return e}))}mM(t){return this.I.on("dataAdd",t)}yM(t){return this.I.off(t)}pM(t){return this.I.on("dataClear",t)}SM(t){return this.I.off(t)}attach(t,i=!0){return Si(t,this.ts,{fill:this.Uk,fill2:this.$k,behavior:{colorStep:!0}}),super.attach(t,i)}}class Yd extends Du{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,new qc,l,u),this.rM=[],this.Ms="Point series",this.ix=5,this.Jo=0,this.Ca=!1,this.Ta=!1,this.Fa=!1,this.dM=void 0,this.Tw=(t,i)=>{const s=t.Pb(i);if(s)return ut(s,this.scale,this.ks.cs.ut)},this.sx=a,this.ve=Mi(l.pointSeriesFillStyle,c)}add(t){return super.add(t),this}dd(){return bi(this.ve)}qx(t){}attach(t,i=!0){return Si(t,this.ts,{fill:this.ve}),super.attach(t,i)}Te(t,i){t.ds(i),this.ks.vs()}setPointFillStyle(t){this.ve="function"==typeof t?t(this.ve):t;const i=this.ve;for(let t=0;t<this.rM.length;t+=1)this.rM[t].Ae(i);return this.ks.vs(),this}getPointFillStyle(){return this.ve}setPointSize(t){this.ix=t;for(let i=0;i<this.rM.length;i+=1)this.rM[i].K(t);return this.ks.vs(),this}getPointSize(){return this.ix}getPointShape(){return this.sx}setPointRotation(t){this.Jo=t;for(let i=0;i<this.rM.length;i+=1)this.rM[i].Bh(t);return this.ks.vs(),this}getPointRotation(){return this.Jo}setIndividualPointSizeEnabled(t){this.Ca=t;for(let i=0;i<this.rM.length;i+=1)this.rM[i].Ga(t);return this.ks.vs(),this}getIndividualPointSizeEnabled(){return this.Ca}setIndividualPointRotationEnabled(t){this.Ta=t;for(let i=0;i<this.rM.length;i+=1)this.rM[i].Wa(t);return this.ks.vs(),this}getIndividualPointRotationEnabled(){return this.Ta}setIndividualPointValueEnabled(t){this.Fa=t;for(let i=0;i<this.rM.length;i+=1)this.rM[i].Ha(t);return this.ks.vs(),this}getIndividualPointValueEnabled(){return this.Fa}fM(t){let i=this.rM[0];i||(i=this.ww()),i.Ua(t)}ww(){const t=this.ks.xp(this.scale).Na(this.sx).K(this.ix).Bh(this.Jo).Ga(this.Ca).Wa(this.Ta).Ha(this.Fa).Ae(this.ve).ds(this.getHighlight());return this.rM.push(t),this.fs(t),t}Pb(t,i){const s=Bu(t,i?this.rM.filter((t=>t.getIsUnderMouse())):this.rM,this.Tw,Yi);if(void 0!==s){const t=ut(s[0],this.ks.cs.ut,this.scale),i=s[1].Ih(),e=H(i)?s[0].color?new N({color:s[0].color}):new N({color:i.getFallbackColor()}):i;return Il(t,this.scale,this.zb(new ml,this,t.x,t.y,t)._c(),this,e)}}solveNearestFromScreen(t){return this.Pb(ao(t,this.Ji.cs),!1)}setCursorResultTableFormatter(t){return super.setCursorResultTableFormatter(t)}}class Xd{constructor(t,i,e,h){this.CC=!1,this.I=new s,this.chart=e,this.TC=h,this.$s=t.$s,this.Js=h||ze,this.FC=kt.document.createElement("div"),this.FC.style.position="absolute",this.FC.style.pointerEvents="none",kt.document.body.append(this.FC);const r=()=>{const t=e.engine.container.getBoundingClientRect();this.FC.style.left=`${t.left}px`,this.FC.style.top=`${t.top}px`,this.FC.style.width=`${t.width}px`,this.FC.style.height=`${t.height}px`};r(),e.onResize(r),this.IC(this.FC),this.PC(),this.DC(),this.BC(),this.OC(i),this.chart.LC().push(this)}IC(t){this.RC=kt.document.createElement("div"),this.RC.style.pointerEvents="all",t.append(this.RC),this.EC=kt.document.createElement("div"),this.zC=new Fe(this.$s,this.Js,this.chart,this.EC),this.VC=kt.document.createElement("table"),this.VC.style.borderSpacing="0",this.RC.appendChild(this.zC.ne()),this.RC.appendChild(this.EC),this.EC.appendChild(this.VC)}DC(){let t=0,i=0,s=0,e=0,h=!1;this.CC=!1,this.RC.onmousedown=r=>{r=r||kt.event,s=r.clientX,e=r.clientY,h=!0,kt.document.onmouseup=t=>{this.CC?this.RC.addEventListener("click",ri,!0):this.RC.removeEventListener("click",ri,!0),h=!1,this.CC=!1,kt.document.onmouseup=null,kt.document.onmousemove=null},kt.document.onmousemove=r=>{r=r||kt.event,h&&(t=s-r.clientX,i=e-r.clientY,s=r.clientX,e=r.clientY,this.CC=!0,this.RC.style.top=this.RC.offsetTop-i+"px",this.RC.style.left=this.RC.offsetLeft-t+"px",this.RC.style.removeProperty("right"),this.RC.style.removeProperty("bottom"))}}}BC(){let t=0,i=0,s=0,e=0,h=!1;this.RC.ontouchstart=r=>{r=r||kt.event,s=r.touches[0].clientX,e=r.touches[0].clientY,h=!0,this.RC.ontouchend=()=>{h=!1,kt.document.ontouchend=null,kt.document.ontouchmove=null},this.RC.ontouchmove=r=>{h&&(ri(r),r=r||kt.event,t=s-r.touches[0].clientX,i=e-r.touches[0].clientY,s=r.touches[0].clientX,e=r.touches[0].clientY,this.RC.style.top=this.RC.offsetTop-i+"px",this.RC.style.left=this.RC.offsetLeft-t+"px",this.RC.style.removeProperty("right"),this.RC.style.removeProperty("bottom"))}}}PC(){this.RC.style.setProperty("top","10px"),this.RC.style.setProperty("left","10px"),this.RC.style.position="absolute",this.RC.style.display="flex",this.RC.style.alignItems="flex-start",this.EC.style.setProperty("display","none")}removePositionProperty(){this.RC.style.removeProperty("top"),this.RC.style.removeProperty("left"),this.RC.style.removeProperty("bottom"),this.RC.style.removeProperty("right")}setPositionProperty(t){switch(this.removePositionProperty(),t){case Ne.BottomLeft:this.RC.style.setProperty("bottom","10px"),this.RC.style.setProperty("left","10px");break;case Ne.TopLeft:this.RC.style.setProperty("top","10px"),this.RC.style.setProperty("left","10px");break;case Ne.BottomRight:this.RC.style.setProperty("bottom","10px"),this.RC.style.setProperty("right","10px");break;case Ne.TopRight:default:this.RC.style.setProperty("top","10px"),this.RC.style.setProperty("right","10px")}}OC(t){for(let i=0;i<t.length;i+=1){const s=this.VC.insertRow();for(let e=0;e<t[i].length;e+=1){const h=s.insertCell(),r=t[i][e];"object"!=typeof r?this.NC(r,h):this.addCustomButton(r,h)}}}NC(t,i){switch(t){case re.ZoomIn:this.GC(new ve(this.$s,this.chart,this.Js),i);break;case re.ZoomInX:this.GC(new xe(this.$s,this.chart,this.Js),i);break;case re.ZoomInY:this.GC(new Me(this.$s,this.chart,this.Js),i);break;case re.ZoomOut:this.GC(new _e(this.$s,this.chart,this.Js),i);break;case re.ZoomOutX:this.GC(new Ae(this.$s,this.chart,this.Js),i);break;case re.ZoomOutY:this.GC(new we(this.$s,this.chart,this.Js),i);break;case re.ZoomToFit:this.GC(new Ce(this.$s,this.chart,this.Js),i);break;case re.ToggleAnimations:this.GC(new ke(this.$s,this.chart,this.Js),i);break;default:console.error(`No predefined button like "${re[t]}" exists.`)}}GC(t,i){i.rowSpan=t.js.rows,i.colSpan=t.js.columns,t.re(i)}addCustomButton(t,i){const s=new Te(this.$s,t,this.chart);return this.GC(s,i),this}dispose(){this.FC.remove(),this.I.emit("dispose",this)}onDispose(t){return this.I.on("dispose",t)}offDispose(t){return this.I.off(t,"dispose")}}const Zd=(t,i,s)=>t.addRow(i.getName()).addRow("X:","",i.axisX.formatValue(s.x)).addRow("Y:","",i.axisY.formatValue(s.y)).addRow("Intensity:","",s.intensity.toFixed(1));class Kd extends Cu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.Ms="Heatmap Grid Series",this.zb=Zd,this.Uv=!1,this.WC=a,this.ts=l;const d=c;this.ve=Mi(l.heatmapGridSeriesFillStyle,d),this.cu=Mi(this.ts.heatmapGridSeriesWireframeStyle,d);const f=a.start||{x:0,y:0},g=a.end?{x:(a.end.x-f.x)/a.columns,y:(a.end.y-f.y)/a.rows}:a.step||{x:1,y:1},m={heatmapDataType:"intensity",dataOrder:a.dataOrder||"columns",columns:a.columns,rows:a.rows,start:f,step:g};this.wn=m,this.HC=this.ks.UC(this.scale,[],m).Ae(this.ve).du(this.cu).ds(this.getHighlight()),this.fs(this.HC),this.setHighlightOnHover(!1)}clear(){return this.HC.$a(),this.ks.vs(),this.I.emit("dataClear",this),this}setWireframeStyle(t){return this.cu="function"==typeof t?t(this.cu):t,this.HC.du(this.cu),this.ks.vs(),this.I.emit("styleChange",this),this}getWireframeStyle(){return this.cu}setCursorInterpolationEnabled(t){return this.Uv=t,this.ks.cs.vs(),this}getCursorInterpolationEnabled(){return this.Uv}setCursorEnabled(t){return super.setCursorEnabled(t)}setIntensityInterpolation(t){return t=t||"disabled",this.HC.cS(t),this.ks.vs(),this.I.emit("styleChange",this),this}getIntensityInterpolation(){return this.HC.dS()}Qy(){return this.ip&&this.getVisible()}dd(){return bi(this.ve)}attach(t,i){return super.attach(t,i),Si(t,this.ts,{fill:this.ve}),this}$C(t){this.HC.$C().forEach((i=>{t.HC.fS(i)}))}SM(t){return this.I.off(t)}pM(t){return this.I.on("dataClear",t)}jC(t){return this.I.on("styleChange",t)}YC(t){return this.I.off(t)}Pb(t,i,s=this.Uv){const e=ut(t,this.ks.cs.ut,this.scale),h=i?this.HC.getIsUnderMouse()?this.HC:void 0:this.HC;if(!h)return;const r=s?h.Yv(e):h.Pb(e);return r?Il(r,this.scale,this.zb(new ml,this,{x:r.x,y:r.y,column:r.column,row:r.column,intensity:r.cellValue})._c(),this):void 0}solveNearestFromScreen(t,i=this.Uv){return this.Pb(ao(t,this.Ji.cs),!1,i)}getXMax(){const t=this.HC;return t?t.wt():void 0}getXMin(){const t=this.HC;return t?t.At():void 0}getYMax(){const t=this.HC;return t?t.Ct():void 0}getYMin(){const t=this.HC;return t?t.kt():void 0}dr(){const t=n(0,0);return t.x=Math.max(t.x,this.HC.hl()),t.y=Math.max(t.y,this.HC.rl()),t}qx(t){if(!(t instanceof Ns))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Ns&&t.ai())throw new Error("HeatmapGridSeries can not be attached to a high precision Axis.")}Te(t,i){t.ds(i),this.ks.vs()}ke(){return super.ke(),this.HC.To(this.getBoundaries()),this}}class qd extends Kd{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c),this.zb=Zd}invalidateIntensityValues(t){if(Array.isArray(t)){if(0===t.length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.wn.dataOrder?t.length:t[0].length,rows:"rows"===this.wn.dataOrder?t.length:t[0].length},s="columns"===this.wn.dataOrder?this.wn.columns:this.wn.rows,e="columns"===this.wn.dataOrder?this.wn.rows:this.wn.columns;if(i.x>s||i.y>e){if(!0===this.chart.mf.Bn){const t=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.wn.columns}x${this.wn.rows}, input ${i.columns}x${i.rows}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;kt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.HC.fS({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.wn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.wn.dataOrder?t.values.length:t.values[0].length},s="columns"===this.wn.dataOrder?t.iColumn:t.iRow,e=s+i.primary-1,h="columns"===this.wn.dataOrder?t.iRow:t.iColumn,r=h+i.secondary-1,n=("columns"===this.wn.dataOrder?this.wn.columns:this.wn.rows)-1,o=("columns"===this.wn.dataOrder?this.wn.rows:this.wn.columns)-1;if(s<0||h<0){if(!0===this.chart.mf.Bn){const i=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;kt.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.mf.Bn){const s=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.wn.columns}x${this.wn.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;kt.console.warn(s)}const s=Math.max(e-n,0),h=i.primary-s,a=Math.max(r-o,0),l=[];for(let i=0;i<h;i+=1)l[i]=t.values[i].slice(0,a>0?-a:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:l}}this.HC.fS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.I.emit("invalidateIntensity",this,t),this.ks.vs(),this}setFillStyle(t){return this.ve="function"==typeof t?t(this.ve):t,this.HC.Ae(this.ve),this.I.emit("styleChange",this),this.ks.vs(),this}getFillStyle(){return this.ve}setCursorResultTableFormatter(t){return this.zb=t,this.Ji.cs.vs(),this}getCursorResultTableFormatter(){return this.zb}XC(t){return this.I.on("invalidateIntensity",t)}ZC(t){return this.I.off(t)}}class Jd extends Cu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.Ms="Scrolling Heatmap Grid Series",this.zb=Zd,this.Uv=!1;const d=c;this.ve=Mi(l.heatmapScrollingGridSeriesFillStyle,d),this.cu=Mi(this.ts.heatmapScrollingGridSeriesWireframeStyle,d);const f={scrollDimension:"columns",heatmapDataType:"intensity",start:{x:0,y:0},step:{x:1,y:1},...a};this.wn=f;const g=[{type:"DataPattern",args:{pattern:"columns"===f.scrollDimension?f.step.x>0?"ProgressiveX":"RegressiveX":f.step.y>0?"ProgressiveY":"RegressiveY",regularProgressiveStep:!0}}];this.KC=this.ks.qC(this.scale,g,f).Ae(this.ve).du(this.cu).ds(this.getHighlight()),this.fs(this.KC),this.setHighlightOnHover(!1)}clear(){return this.KC.$a(),this.ks.vs(),this}setWireframeStyle(t){return this.cu="function"==typeof t?t(this.cu):t,this.KC.du(this.cu),this.ks.vs(),this}getWireframeStyle(){return this.cu}setPixelInterpolationMode(t){return t=t||"disabled",this.KC.cS(t),this.ks.vs(),this}getPixelInterpolationMode(){return this.KC.dS()}setCursorInterpolationEnabled(t){return this.Uv=t,this.ks.cs.vs(),this}getCursorInterpolationEnabled(){return this.Uv}setCursorEnabled(t){return super.setCursorEnabled(t)}setDataCleaning(t){return this.KC.su(t),this.ks.vs(),this}Qy(){return this.ip&&this.getVisible()}dd(){return bi(this.ve)}attach(t,i){return super.attach(t,i),Si(t,this.ts,{fill:this.ve}),this}Ae(t){return this.ve="function"==typeof t?t(this.ve):t,this.KC.Ae(this.ve),this.ks.vs(),this}Pb(t,i,s=this.Uv){const e=ut(t,this.ks.cs.ut,this.scale),h=i?this.KC.getIsUnderMouse()?this.KC:void 0:this.KC;if(!h)return;const r=s?h.Yv(e):h.Pb(e);return r?Il(r,this.scale,this.zb(new ml,this,{x:r.x,y:r.y,column:r.column,row:r.column,intensity:r.cellValue})._c(),this):void 0}solveNearestFromScreen(t,i=this.Uv){return this.Pb(ao(t,this.Ji.cs),!1,i)}qx(t){if(!(t instanceof Ns))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Ns&&t.ai())throw new Error("HeatmapScrollingGridSeries can not be attached to a high precision Axis.")}getXMax(){return this.KC.wt()||0}getXMin(){return this.KC.At()||0}getYMax(){return this.KC.Ct()||0}getYMin(){return this.KC.kt()||0}dr(){const t=n(0,0);return t.x=Math.max(t.x,this.KC.hl()),t.y=Math.max(t.y,this.KC.rl()),t}Te(t,i){t.ds(i),this.ks.vs()}}class Qd extends Jd{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c),this.zb=Zd}addIntensityValues(t){if(0===t.length||0===t[0].length)return this;const i=t.length,s=t[0].length,e=("columns"===this.wn.scrollDimension?t.length:t[0].length,"rows"===this.wn.scrollDimension?t.length:t[0].length,0+s-1),h=this.wn.resolution-1;if(e>h){if(!0===this.chart.mf.Bn){const t=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.\nGrid resolution: ${this.wn.resolution}, input ${i}x${s}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;kt.console.warn(t)}const e=[];for(let s=0;s<i;s+=1)e[s]=t[s].slice(0,h+1);t=e}return this.KC.SS(t),this.ks.vs(),this}setFillStyle(t){return this.Ae(t),this}getFillStyle(){return this.ve}setCursorResultTableFormatter(t){return this.zb=t,this.Ji.cs.vs(),this}getCursorResultTableFormatter(){return this.zb}}const tf=(...t)=>(i,s)=>t.forEach((t=>t.forEach((t=>{t.ut.K(i),t.lg.K(s)})))),sf=(t,i)=>{const s=t.indexOf(i);-1!==s&&t.splice(s,1)},ef=n(10,10);var hf;!function(t){t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.Left=2]="Left",t[t.Right=3]="Right"}(hf||(hf={}));const rf=new Set([hf.Top,hf.Bottom,hf.Left,hf.Right]),nf=t=>t.gr(),of=t=>t.setStopped(!0),af=t=>t.getChartInteractionFitByDrag()?t.fit(!0).setStopped(!1):void 0,lf=(t,i)=>{const s="linear-highPrecision"===t.Mh.type||"linear-highPrecision"===i.Mh.type,e="logarithmic"===t.Mh.type||"logarithmic"===i.Mh.type;if(s&&e){const s=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${t.Mh.type}, y: ${i.Mh.type})`;throw new Error(s)}};var uf,cf,df;!function(t){t[t.seriesBackground=0]="seriesBackground",t[t.gridLine0=1]="gridLine0",t[t.gridLine1=2]="gridLine1",t[t.gridLine2=3]="gridLine2",t[t.highlightersBelow=4]="highlightersBelow"}(uf||(uf={})),function(t){t[t.plotting=0]="plotting",t[t.highlightersAbove=1]="highlightersAbove",t[t.fg=2]="fg"}(cf||(cf={}));class ff extends Vl{constructor(t,i,s,e,h,r,o){super(t,i,s,i.om("chartXY bg",0),e,i.cs.ts.chartXYBackgroundFillStyle,i.cs.ts.chartXYBackgroundStrokeStyle,i.cs.ts.chartXYTitleFont,i.cs.ts.chartXYTitleFillStyle,o),this.JC=this.jg.d2({scaleXYConstructor:Ns}),this.QC=[],this.tT=[],this.iT=[],this.sT=[],this.eT=new Map,this.hT=!0,this.rT=!0,this.nT=!0,this.Nd=2,this.oT=!0,this.aT=!0,this.lT=[],this.uT=this.lm.we(this.JC).Ae(R)._e(rt).setMouseInteractions(!1),this.cT=this.lm.Oe(this.JC).Be(rt).setMouseInteractions(!1),this.dT=this.lm.Oe(this.JC).Be(rt).setMouseInteractions(!1),this.fT=this.ts.chartXYZoomingRectangleFillStyle,this.gT=this.ts.chartXYZoomingRectangleStrokeStyle,this.mT=this.ts.chartXYFittingRectangleFillStyle,this.yT=this.ts.chartXYFittingRectangleStrokeStyle,this.pT=Ie.Default,this.ST=Ie.Move,this.bT=Ie.ZoomIn,this.vT=Ie.Default,this.xT=void 0,this.MT=gf,this.Kx=0,this._T=tf(this.tT,this.QC),this.AT=tf(this.iT,this.sT),this.wT=(t,i,s,e,h)=>{this._T(e,h),this.AT(h,e),this.JC.K(e,h);const r=this.tT.map((t=>t.Og())),o=this.QC.map((t=>t.Og())),a=this.iT.map((t=>t.Og())),l=this.sT.map((t=>t.Og())),u=r.reduce(Ui,0),c=o.reduce(Ui,0),d=a.reduce(Ui,0),f=l.reduce(Ui,0),g=this.kT(d,f,c,u),m=this.JC.x.getCellSize()-(g.left+g.right),y=this.JC.y.getCellSize()-(g.bottom+g.top),p=[g.left,g.right],S=[g.bottom,g.top];this.JC.x.X(0,m),this.JC.y.X(0,y),this.JC.vi(p),this.JC.xi(S),this.Fp.K(n(m,y));for(let t=0;t<this.tT.length;t+=1)this.tT[t].ut.Nt(p);for(let t=0;t<this.QC.length;t+=1)this.QC[t].ut.Nt(p);for(let t=0;t<this.iT.length;t+=1)this.iT[t].ut.Nt(S);for(let t=0;t<this.sT.length;t+=1)this.sT[t].ut.Nt(S);this.cs.vs()},this.CT=(t,i)=>{this.eT.set(t,i)},this.eg=t=>{this.tT.includes(t)?sf(this.tT,t):this.QC.includes(t)?sf(this.QC,t):this.iT.includes(t)?sf(this.iT,t):this.sT.includes(t)&&sf(this.sT,t),this.eT.delete(t),this.cs.vs()},this.TT=(t=!1)=>{const i=t=>(i,s,e,h)=>(s.ke(i,e,h.length),i+s.Og()*t),s=this.tT.reduce(i(-1),0),e=this.QC.reduce(i(1),0),h=this.iT.reduce(i(-1),0),r=this.sT.reduce(i(1),0),o=this.kT(h,r,e,s),a=this.JC.x.getCellSize()-(o.left+o.right),l=this.JC.y.getCellSize()-(o.bottom+o.top),u=[o.left,o.right],c=[o.bottom,o.top];this.JC.x.X(0,a),this.JC.y.X(0,l),this.JC.x.Nt(u),this.JC.y.Nt(c);for(const t of this.tT)t.ut.Nt(u);for(const t of this.QC)t.ut.Nt(u);for(const t of this.iT)t.ut.Nt(c);for(const t of this.sT)t.ut.Nt(c);if((!this.XM||Math.abs(this.XM.bottom-s)>=4||Math.abs(this.XM.left-h)>=4||Math.abs(this.XM.right-r)>=4||Math.abs(this.XM.top-e)>=4)&&!t)return void this.TT(!0);this.XM={bottom:s,left:h,top:e,right:r},this.Fp.Ce(n(0,0)).K(n(a,l)),this.Ip.Ce(n(0,0)).K(n(a,l));const f=this.getDefaultAxisX(),g=this.getDefaultAxisY();if(!f||!g)return;const m=d(f.ut.Gt(),g.ut.Gt(),f.ut.Ht(),g.ut.Ht());this.qb.CS(m),this.ig.CS(m),this.sg.CS(m),this.Ng&&this.Ng();const y=t=>(i,s,e,h)=>(s.Bg(i),i+s.Og()*t);return this.tT.reduce(y(-1),0),this.QC.reduce(y(1),0),this.iT.reduce(y(-1),0),this.sT.reduce(y(1),0),m},this.addAreaSeries=t=>{const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();lf(i,s);const e=t&&t.baseline?t.baseline:0,h=new(t&&t.type?t.type:Ud.Positive)(this,this.Ap,this.qb,i,s,this.FT(i),this.FT(s),this.Zg,e,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length);return this.Pp(h),h},this.addAreaRangeSeries=t=>{const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();lf(i,s);const e=new jd(this,this.Ap,this.qb,i,s,this.FT(i),this.FT(s),this.Zg,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length);return this.Pp(e),e},this.IT=!1,this.PT=!1,this.Jx=()=>{(this.hT||this.rT)&&(this.xT=this.engine.setMouseStyle(this.pT))},this.Qx=()=>{this.IT=!1,this.engine.restoreMouseStyle(this.xT)},this.tM=(t,i,s)=>{var e,h;const r=Gt(null===(e=this.mf.Dn)||void 0===e?void 0:e.chartXYRectangleZoomFitMouseButton,0),n=Gt(null===(h=this.mf.Dn)||void 0===h?void 0:h.chartXYPanMouseButton,2);this.engine.restoreMouseStyle(this.xT);const o=this.lm.cs.Fe(i.clientX,i.clientY);s===r&&(this.hT||this.rT)?(this.DT(t,o),ri(i)):s===n&&this.oT&&(this.xT=this.engine.setMouseStyle(this.ST),this.PT=!0,ri(i))},this.hp=(t,i,s,e,h)=>{var r,o;const a=n(i.clientX,i.clientY),l=Gt(null===(r=this.mf.Dn)||void 0===r?void 0:r.chartXYRectangleZoomFitMouseButton,0),u=Gt(null===(o=this.mf.Dn)||void 0===o?void 0:o.chartXYPanMouseButton,2);s===l&&(this.hT||this.rT)?(this.BT(t,e,a),ri(i)):s===u&&this.oT&&(this.OT(us(h,-1)),ri(i)),this.cs.vs()},this.iM=(t,i,s,e)=>{var h,r;const o=Gt(null===(h=this.mf.Dn)||void 0===h?void 0:h.chartXYRectangleZoomFitMouseButton,0),a=Gt(null===(r=this.mf.Dn)||void 0===r?void 0:r.chartXYPanMouseButton,2);if(s===o&&(this.hT||this.rT)){const s=n(i.clientX,i.clientY);this.LT(t,e,s),ri(i)}else s===a&&this.oT&&ri(i);this.engine.restoreMouseStyle(this.xT),this.Fp.getIsUnderMouse()&&(this.xT=this.engine.setMouseStyle(this.pT)),this.IT=!1,this.PT=!1},this.ep=(t,i)=>{if(this.nT){const t=this.lm.cs.Fe(i.clientX,i.clientY);this.RT(t,n(_i(i),_i(i))),ri(i)}},this.ET=(t,i,s,e)=>{},this.zT=(t,i,s,e,h,r)=>{if(this.oT){const t=n(-(e.x+h.x)/2,-(e.y+h.y)/2);this.OT(t),ri(r),this.PT=!0}if(this.nT){const t=this.engine.clientLocation2Engine(i.x,i.y),o=this.engine.clientLocation2Engine(s.x,s.y),a=ds(n(Math.abs(t.x-e.x-(o.x-h.x)),Math.abs(t.y-e.y-(o.y-h.y))),n(Math.abs(t.x-o.x),Math.abs(t.y-o.y)));this.forEachAxisX((t=>{t.getChartInteractionZoomByWheel()&&t.yt(t.ut.ti(t.getInterval().start,-a.x),t.ut.ti(t.getInterval().end,a.x),!1,!0,"interactionZoom")})),this.forEachAxisY((t=>{t.getChartInteractionZoomByWheel()&&t.yt(t.ut.ti(t.getInterval().start,-a.y),t.ut.ti(t.getInterval().end,a.y),!1,!0,"interactionZoom")})),ri(r),this.IT=!0}},this.VT=(t,i,s,e)=>{this.PT=!1,this.IT=!1},this.NT=(t,i,s)=>{(this.rT||this.hT)&&(this.DT(t,i),ri(s))},this.GT=(t,i,s,e,h)=>{(this.rT||this.hT)&&(this.BT(t,i,s),ri(h))},this.WT=(t,i,s,e)=>{(this.rT||this.hT)&&(this.LT(t,i,s),ri(e))},this.mf.Cn||this.mf.kn||this.cs.An(0),this.setPadding({right:24}),this.GM=i.LS("chartXY series bg",uf.seriesBackground),this.HT=[uf.gridLine0,uf.gridLine1,uf.gridLine2].map((t=>i.LS(`chartXY gridline #${t}`,t))),this.ig=i.LS("chartXY highlighters below",uf.highlightersBelow),this.qb=i.Xm("chartXY plotting",cf.plotting),this.sg=i.Xm("chartXY highlighters above",cf.highlightersAbove),this.wf=i.Xm("chartXY fg",cf.fg),this.JC.x.X(0,this.uiScale.x.getCellSize()-(this.Pt.left+this.Pt.right+this.ia.left+this.ia.right)),this.JC.y.X(0,this.uiScale.y.getCellSize()-(this.Pt.bottom+this.Pt.top+this.ia.bottom+this.ia.top)),this.JC.K(this.uiScale.$t().x,this.uiScale.$t().y),this.Fp=this.GM.we(this.JC).Ae(this.ts.chartXYSeriesBackgroundFillStyle)._e(rt),this.Ip=this.sg.we(this.JC).Ae(R)._e(this.ts.chartXYSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.Tp(this.Fp,this.Ip),this.setSeriesBackgroundEffect(!1);const a=Gt(r?r.autoCursorBuilder:void 0,Su);this.Ib=a.xb(this.wb,this.JC,this.JC,this.ts),this.addAxisX(r&&r.defaultAxisX),this.addAxisY(r&&r.defaultAxisY),this.onResize(this.wT),this.dm.Fh("ChartXY"),this.rp=qs(new Qs(this.NT,this.GT,this.WT,1),new te(this.ET,this.zT,this.VT)),this.onSeriesBackgroundMouseEnter(this.Jx),this.onSeriesBackgroundMouseLeave(this.Qx),this.onSeriesBackgroundMouseWheel(this.ep),this.onSeriesBackgroundMouseDragStart(this.tM),this.onSeriesBackgroundMouseDrag(this.hp),this.onSeriesBackgroundMouseDragStop(this.iM),this.onSeriesBackgroundTouchStart(this.rp.onTouchStart),this.onSeriesBackgroundTouchMove(this.rp.onTouchMove),this.onSeriesBackgroundTouchEnd(this.rp.onTouchEnd),r&&!0===r.disableAnimations&&this.setAnimationsEnabled(!1),this.nm(h,this.JC)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this.Mp}getMinimumSize(){const t={x:0,y:0};t.x+=this.Pt.left+this.Pt.right+this.ia.left+this.ia.right,t.y+=this.Pt.top+this.Pt.bottom+this.ia.top+this.ia.bottom;const i=this.dm.Is().Dc(),s=y(mf(this.MT||gf),this.am);t.x+=i.x+s.left+s.right,t.y+=i.y+s.top+s.bottom;const e={x:0,y:0};return this.forEachAxisX((t=>{e.x=Math.max(e.x,t.Og())})),this.forEachAxisY((t=>{e.y=Math.max(e.y,t.Og())})),t.x+=e.x,t.y+=e.y,t.x+=ef.x,t.y+=ef.y,t}addChartMarkerXY(t=bu,i,s){const e=this.Zg(),h=new wu(e,this.uiScale,i||this.getDefaultAxisX(),s||this.getDefaultAxisY(),t,this.Ug(e),this.ts);return this.sm(h),h}addAxisX(t){const{opposite:i,type:s}=lo(t);let e;e="linear"===s.type?this.jg.d1({dimension:"x",scale1DConstructor:Es}):"linear-highPrecision"===s.type?this.jg.d1({dimension:"x",scale1DConstructor:Es}).oi():this.jg.d1({dimension:"x",scale1DConstructor:Ts}).Jt(s.base),e.K(this.JC.x.$t());const h=i?this.QC:this.tT,r=new go(this.ig,this.HT,this.wf,this.lm,this.ig,this.sg,this.cs.hs,e,this.JC.y,(n=()=>r.kg(),{...mo,...Pc(n)}),this,i?100:0,this.eg,this.CT,this.ts,!this.qe,s);var n;return h.push(r),this.cs.vs(),r}addAxisY(t){const{opposite:i,type:s}=lo(t);let e;e="linear"===s.type?this.jg.d1({dimension:"y",scale1DConstructor:Es}):"linear-highPrecision"===s.type?this.jg.d1({dimension:"y",scale1DConstructor:Es}).oi():this.jg.d1({dimension:"y",scale1DConstructor:Ts}).Jt(s.base),e.K(this.JC.y.$t());const h=i?this.sT:this.iT,r=new go(this.ig,this.HT,this.wf,this.lm,this.ig,this.sg,this.cs.hs,e,this.JC.x,(n=()=>r.kg(),{...yo,...Dc(n)}),this,i?100:0,this.eg,this.CT,this.ts,!this.qe,s);var n;return h.push(r),this.cs.vs(),r}dispose(){return this.GM.N(),this.qb.N(),this.wf.N(),this.HT.forEach((t=>t.N())),this.sg.N(),this.ig.N(),this.LC().forEach((t=>t.dispose())),ea(this.JC),this.forEachAxis((t=>{t.dispose()})),this.Mp.slice().forEach((t=>{t.dispose()})),super.dispose()}getDefaultAxisX(){return this.tT[0]?this.tT[0]:this.QC[0]}getDefaultAxisY(){return this.iT[0]?this.iT[0]:this.sT[0]}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...t){const i=t&&t.length>0?new Set(t):rf;return Rt(Array.from(i).map((t=>{switch(t){default:case hf.Top:return this.QC;case hf.Bottom:return this.tT;case hf.Left:return this.iT;case hf.Right:return this.sT}})))}UT(t){let i;return this.forEachAxisX((s=>{i=t===s?"x":i})),this.forEachAxisY((s=>{i=t===s?"y":i})),i}forEachAxisX(t){this.tT.slice().forEach(t),this.QC.slice().forEach(t)}forEachAxisY(t){this.iT.slice().forEach(t),this.sT.slice().forEach(t)}setTitlePosition(t){return this.MT=t,this.cs.vs(),this}getTitlePosition(){return this.MT}kT(t,i,s,e){const h=this.MT||gf;let r,n=y(mf(h),this.am);this.getTitleFillStyle()===R||0===this.getTitle().length?(r={x:0,y:0},n={left:0,top:0,right:0,bottom:0}):r=this.dm.Is().Dc();const o=Math.abs(e)+this.ia.bottom+this.Pt.bottom,a=Math.abs(s)+this.ia.top+this.Pt.top,l={left:Math.abs(t)+this.ia.left+this.Pt.left,right:Math.abs(i)+this.ia.right+this.Pt.right,top:a,bottom:o},u=this.uiScale.ki(),{horizontalAlignment:c,verticalAlignment:d,position:f,marginsWithTitle:g}=yf(h,u,l,r,n,this.ia);return this.dm.Ce(f).ya(c).Sa(d),g}ke(t){super.ke(t);for(const t of this.Mp)t.ap();for(const t of this.Mp)t.ke();this.forEachAxis(nf);let i=!1;this.forEachAxis((t=>{(t.Sr()||t.br())&&(i=!0)}));const s=this.IT||this.PT||!this.aT&&i;this.Db(s),this.TT(),super.rm();for(const t of this.Mp)t.my()}j(){for(let t=0;t<this.tT.length;t+=1)this.tT[t].j();for(let t=0;t<this.QC.length;t+=1)this.QC[t].j();for(let t=0;t<this.iT.length;t+=1)this.iT[t].j();for(let t=0;t<this.sT.length;t+=1)this.sT[t].j();return super.j()}FT(t){if(this.eT.has(t))return this.eT.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addLineSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();lf(i,s);let e=od.freeform;t&&t.dataPattern&&(e="ProgressiveX"===t.dataPattern.pattern?od.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?od.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?od.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?od.verticalRegressive:od.freeform);const h=new ld(this,this.Ap,this.qb,i,s,this.FT(i),this.FT(s),this.Zg,e,this.ts,this.cs.hs,va(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length,t);return this.Pp(h),h}addPointSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();lf(i,s);const e=t&&t.pointShape&&Object.values(Oh).includes(t.pointShape)?"string"==typeof t.pointShape?Oh[t.pointShape]:t.pointShape:Oh.Square,h=new Yd(this,this.Ap,this.qb,i,s,this.FT(i),this.FT(s),this.Zg,e,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length);return this.Pp(h),h}addPointLineSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();lf(i,s);const e=t&&t.pointShape&&Object.values(Oh).includes(t.pointShape)?"string"==typeof t.pointShape?Oh[t.pointShape]:t.pointShape:Oh.Square;let h=od.freeform;t&&t.dataPattern&&(h="ProgressiveX"===t.dataPattern.pattern?od.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?od.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?od.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?od.verticalRegressive:od.freeform);const r=new Yc(this,this.Ap,this.qb,i,s,this.FT(i),this.FT(s),this.Zg,h,e,this.ts,this.cs.hs,va(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length);return this.Pp(r),r}addStepSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();lf(i,s);const e=t&&t.pointShape?t.pointShape:Oh.Square,h=t&&t.mode?t.mode:Hc.before,r=new ad(this,this.Ap,this.qb,i,s,this.FT(i),this.FT(s),this.Zg,e,h,this.ts,this.cs.hs,va(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length);return this.Pp(r),r}addSplineSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();lf(i,s);const e=t&&t.pointShape?t.pointShape:Oh.Square;let h=od.freeform;t&&t.dataPattern&&(h="ProgressiveX"===t.dataPattern.pattern?od.horizontalProgressive:"RegressiveX"===t.dataPattern.pattern?od.horizontalRegressive:od.freeform);const r=new Kc(this,this.Ap,this.qb,i,s,this.FT(i),this.FT(s),this.Zg,h,e,this.ts,this.cs.hs,va(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length);return this.Pp(r),r}addRectangleSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();lf(i,s);const e=new cd(this,this.Ap,this.qb,i,s,this.FT(i),this.FT(s),this.Zg,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length);return this.Pp(e),e}addPolygonSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY(),e=new fd(this,this.Ap,this.qb,i,s,this.FT(i),this.FT(s),this.Zg,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length);return this.Pp(e),e}addSegmentSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();lf(i,s);const e=new md(this,this.Ap,this.qb,i,s,this.FT(i),this.FT(s),this.Zg,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length);return this.Pp(e),e}addEllipseSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();lf(i,s);const e=new pd(this,this.Ap,this.qb,i,s,this.FT(i),this.FT(s),this.Zg,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length);return this.Pp(e),e}addOHLCSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();lf(i,s);const e=t&&t.positiveFigure?t.positiveFigure:Wc.Candlestick,h=t&&t.negativeFigure?t.negativeFigure:e,r=new(t&&t.seriesConstructor?t.seriesConstructor:Od.Normal)(this,this.Ap,this.qb,i,s,this.FT(i),this.FT(s),this.Zg,e,h,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length);return this.Pp(r),r}addBoxSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();lf(i,s);const e=t&&t.figure?t.figure:zc,h=t&&t.dimensionStrategy?t.dimensionStrategy:mo,r=new Rd(this,this.Ap,this.qb,i,s,this.FT(i),this.FT(s),this.Zg,e,h,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length);return this.Pp(r),r}addHeatmapGridSeries(t){const i=t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t.yAxis?t.yAxis:this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new qd(this,this.Ap,this.qb,i,s,this.FT(i),this.FT(s),this.Zg,t,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length),this.Pp(e),e}addHeatmapScrollingGridSeries(t){const i=t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t.yAxis?t.yAxis:this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new Qd(this,this.Ap,this.qb,i,s,this.FT(i),this.FT(s),this.Zg,t,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Mp.length),this.Pp(e),e}addOnScreenMenu(t,i){return new Xd(this.mf,t,this,i)}setMouseBackgroundStyle(t=Ie.Default){return this.pT=t,this}setMouseZoomStyle(t=Ie.ZoomIn){return this.bT=t,this}setMouseFitStyle(t=Ie.Default){return this.vT=t,this}setMousePanStyle(t=Ie.Move){return this.ST=t,this}setMouseInteractions(t){return this.setMouseInteractionRectangleZoom(t).setMouseInteractionRectangleFit(t).setMouseInteractionWheelZoom(t).setMouseInteractionPan(t)}setMouseInteractionRectangleZoom(t){return this.hT=t,this}getMouseInteractionRectangleZoom(){return this.hT}setMouseInteractionRectangleFit(t){return this.rT=t,this}getMouseInteractionRectangleFit(){return this.rT}setMouseInteractionPan(t){return this.oT=t,this}getMouseInteractionPan(){return this.oT}setMouseInteractionWheelZoom(t){return this.nT=t,this}getMouseInteractionWheelZoom(){return this.nT}setZoomingRectangleFillStyle(t){return this.fT="function"==typeof t?t(this.fT):t,this.cs.vs(),this}getZoomingRectangleFillStyle(){return this.fT}setZoomingRectangleStrokeStyle(t){return this.gT="function"==typeof t?t(this.gT):t,this.cs.vs(),this}getZoomingRectangleStrokeStyle(){return this.gT}setFittingRectangleFillStyle(t){return this.mT="function"==typeof t?t(this.mT):t,this.cs.vs(),this}getFittingRectangleFillStyle(){return this.mT}setFittingRectangleStrokeStyle(t){return this.yT="function"==typeof t?t(this.yT):t,this.cs.vs(),this}getFittingRectangleStrokeStyle(){return this.yT}addLegendBox(t,i){const s=super.addLegendBox(t,i);if(void 0===i||i===this.uiScale)if(void 0===t||"vertical"===t.getAlignment())s.setOrigin(Pe.RightCenter).setPosition({x:this.uiScale.x.nt(this.uiScale.x.Wt()-this.ia.right),y:lt(this.JC.y.nt(this.JC.y.Gt()+this.JC.y.Ht()/2),this.JC.y,this.uiScale.y)});else{const t=this.MT||gf,i=yf(t,this.uiScale.ki(),this.ia,this.getTitleFillStyle()===R||0===this.getTitle().length?{x:0,y:0}:this.dm.Is().Dc(),y(mf(t),this.am),this.ia).marginsWithTitle.top;s.setOrigin(Pe.RightTop).setPosition(ut({x:this.pixelScale.x.getInnerEnd()-this.ia.right,y:this.pixelScale.y.getInnerEnd()-i},this.pixelScale,this.uiScale))}return s}DT(t,i){this.forEachAxis(of);const s=ut(this.engine.clientLocation2Engine(i.x,i.y),this.lm.cs.ut,this.JC);this.uT.Ce(s).K(n(0,0))}BT(t,i,s){const e=ut(this.engine.clientLocation2Engine(i.x,i.y),this.lm.cs.ut,this.JC),h=ut(this.engine.clientLocation2Engine(s.x,s.y),this.lm.cs.ut,this.JC),r=ji(h.x,this.JC.x.getInnerStart(),this.JC.x.getInnerEnd())&&ji(h.y,this.JC.y.getInnerStart(),this.JC.y.getInnerEnd()),o=n(Math.min(e.x,h.x),Math.min(e.y,h.y)),a=n(Math.max(e.x,h.x),Math.max(e.y,h.y));this.uT.Ce(o).K(ds(a,o));const l=Math.min(a.x-o.x,a.y-o.y)>=10;r&&l&&o.x===e.x&&this.hT?(this.IT=!0,this.uT.Ae(this.fT)._e(this.gT),this.cT.Be(rt),this.dT.Be(rt),this.xT=this.engine.setMouseStyle(this.bT,this.xT)):r&&l&&a.x===e.x&&this.rT?(this.IT=!0,this.uT.Ae(this.mT)._e(this.yT),this.cT.Be(this.yT).Re(e).Le(h),this.dT.Be(this.yT).Re(n(e.x,h.y)).Le(n(h.x,e.y)),this.xT=this.engine.setMouseStyle(this.vT,this.xT)):(this.IT=!1,this.uT._e(rt).Ae(R),this.cT.Be(rt),this.dT.Be(rt),this.engine.restoreMouseStyle(this.xT)),this.cs.vs()}LT(t,i,s){if(this.IT){const t=ut(this.engine.clientLocation2Engine(s.x,s.y),this.lm.cs.ut,this.JC),e=ji(t.x,this.JC.x.getInnerStart(),this.JC.x.getInnerEnd())&&ji(t.y,this.JC.y.getInnerStart(),this.JC.y.getInnerEnd()),h=s.x>=i.x?"zoom":"fit",r=this.uT.fa(),n=cs(r,this.uT.$t()),o=Math.min(this.uT.$t().x,this.uT.$t().y)>=10;e&&o&&"zoom"===h&&this.hT?(this.forEachAxisX((t=>{if(t.getChartInteractionZoomByDrag()){const i=ut(r,this.JC,t.ug).x,s=ut(n,this.JC,t.ug).x;t.yt(i,s,!0,!0,"interactionSetInterval")}})),this.forEachAxisY((t=>{if(t.getChartInteractionZoomByDrag()){const i=ut(r,this.JC,t.ug).y,s=ut(n,this.JC,t.ug).y;t.yt(i,s,!0,!0,"interactionSetInterval")}}))):e&&o&&"fit"===h&&this.rT&&this.forEachAxis(af)}this.uT._e(rt).Ae(R),this.cT.Be(rt),this.dT.Be(rt),this.cs.vs()}pan(t){this.forEachAxisX((i=>{i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.setStopped(!0).pan(t.y)}))}OT(t){this.forEachAxisX((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.y)}))}zoom(t,i){this.forEachAxis(of),this.forEachAxisX((s=>{s.zoom(s.ut.nt(t.x),i.x)})),this.forEachAxisY((s=>{s.zoom(s.ut.nt(t.y),i.y)}))}RT(t,i){this.forEachAxis(of),this.forEachAxisX((s=>{s.getChartInteractionZoomByWheel()&&s.zoom(s.ut.nt(t.x),i.x)})),this.forEachAxisY((s=>{s.getChartInteractionZoomByWheel()&&s.zoom(s.ut.nt(t.y),i.y)}))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}vd(){const t=[];return this.forEachAxis((i=>i.Mg((i=>t.push(i))))),super.vd().concat(t)}LC(){return this.lT}me(){return this.gm(this.qb)}setAutoCursorEnabledDuringAxisAnimation(t){return this.aT=t,this}getAutoCursorEnabledDuringAxisAnimation(){return this.aT}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,i,s){if(s){const e=t,h=i,r=po(h)?h:$s(h)?this.pixelScale:void 0;if(r&&Hs(s)){const t=ut(e,r,this.engine.scale);return this.cs.yo({engineX:t.x,engineY:t.y})}if(r&&$s(s))return ut(e,r,this.pixelScale);if(r&&po(s))return ut(e,r,s)}else{const s=t;if($s(i)){const t=this.cs.mo(s);return ut({x:t.engineX,y:t.engineY},this.engine.scale,this.pixelScale)}if(po(i)){const t=i,e=this.cs.mo(s);return ut({x:e.engineX,y:e.engineY},this.engine.scale,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}}!function(t){t.CenterTop="center-top",t.RightTop="right-top",t.LeftTop="left-top",t.CenterBottom="center-bottom",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.SeriesCenterTop="series-center-top",t.SeriesRightTop="series-right-top",t.SeriesLeftTop="series-left-top",t.SeriesCenterBottom="series-center-bottom",t.SeriesRightBottom="series-right-bottom",t.SeriesLeftBottom="series-left-bottom"}(df||(df={}));const gf=df.CenterTop,mf=t=>{switch(t){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:5};case"left-top":return{left:20,right:0,top:0,bottom:5};case"right-top":return{left:0,right:20,top:0,bottom:5};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:5,bottom:0};case"series-left-top":return{left:5,right:0,top:5,bottom:0};case"series-right-top":return{left:0,right:5,top:5,bottom:0};case"series-left-bottom":return{left:5,right:0,top:0,bottom:5};case"series-right-bottom":return{left:0,right:5,top:0,bottom:5}}return Fi(0,`Unexpected ChartXY title position selection ${t}`)},yf=(t,i,s,e,h,r)=>{e.x,h.left,h.right;const n=e.y+h.bottom+h.top,o=(h.left-h.right)*i.x,a=(h.bottom-h.top)*i.y;switch(t){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-(r.top+h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:s.left*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-s.right*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:s.left*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-s.right*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s}}return Fi(0,`Unexpected ChartXY title position selection ${t}`)},pf=t=>t instanceof Du||t instanceof Vd||t instanceof jd||t instanceof qd||t instanceof Pd||t instanceof ad;class Sf{constructor(t,i,e,h,r,n,o,a,l){this.coordsRelative="relative",this.coordsClient="client",this.I=new s,this.$T=new Map,this.Mp=new Map,this.jT=({series:t},i)=>{this.YT&&(i instanceof jd||i instanceof ad||i instanceof qd||i instanceof Du||i instanceof Vd||i instanceof Pd)&&this.YT(t,i)},this.XT=t=>{const i=t.map((t=>t.Mh.type));if(1!==[...new Set(i)].length)throw new Error("All ZoomBandChart axes must be of the same type")},this.ZT=(t,i,s)=>{0!==this.Mp.size&&void 0!==[...this.Mp.values()].find((({series:t})=>!0===t.getVisible()))||this.KT.yt(i,s,!1,!1,"zoomBandChart")},this.mf=t,this.qT=h,this.attachedAxes=Array.isArray(r)?r:[r],this.XT(this.attachedAxes);const u=this.attachedAxes[0].chart.UT(this.attachedAxes[0])||"x";this.JT=u,this.mc="x"===u?mo:yo;const c=this.attachedAxes[0].onIntervalChange(this.ZT);this.QT=()=>this.attachedAxes[0].offIntervalChange(c);const d=this.mc.toVec2("linear"===(f=this.attachedAxes[0].Mh).type||"linear-highPrecision"===f.type?f:{type:"logarithmic",base:"number"==typeof f.base?f.base:"e"===f.base?"e":(()=>{throw new Error(`Unhandled logarithmic base: ${f.base}`)})()},void 0);var f;const g=d.x,m=d.y;this.tF=new ff(t,i,e,Bt,o,{...a,defaultAxisX:g,defaultAxisY:m},l).setTitle("Zoom Band Chart").setMouseInteractions(!1).setAutoCursorMode(zl.disabled),this.engine=this.tF.engine;const y=this.tF.getDefaultAxisX().setMouseInteractions(!1),p=this.tF.getDefaultAxisY().setMouseInteractions(!1);this.KT=this.mc.getWidth({x:y,y:p}).setScrollStrategy(He.fitting).setAnimationScroll(!1),this.iF(this.mc.getHeight({x:y,y:p})),this.KT.Vh(this.attachedAxes[0].zh()),this.band=this.KT.addBand(n),this.sF(this.band,this.attachedAxes);for(let t=0;t<this.attachedAxes.length;t+=1)for(const i of this.attachedAxes[t].kg())pf(i)&&this.hf(i);this.attachedAxes.forEach((t=>{t.chart.Cb(((t,i)=>{("x"===u?i.axisX:i.axisY)===this.attachedAxes[0]&&pf(i)&&this.hf(i)})),t.chart.Tb(((t,i)=>{var s;if(this.Mp.has(i)){const t=null===(s=this.Mp.get(i))||void 0===s?void 0:s.series;t&&t.dispose()}}))}))}disposeSeries(t){const i=this.Mp.get(t);if(i){const{clearReferences:s}=i;s(),this.Mp.delete(t),i.series.dispose();const e=this.mc.getHeight({x:t.axisX,y:t.axisY}),h=this.$T.get(e);h&&0===h.kg().length&&h!==this.mc.getHeight({x:this.tF.getDefaultAxisX(),y:this.tF.getDefaultAxisY()})&&(this.$T.delete(e),h.dispose())}return this}setSeriesStyle(t){return this.YT=t,this.Mp.forEach(this.jT),this}getDefaultAxisX(){return this.tF.getDefaultAxisX()}getDefaultAxisY(){return this.tF.getDefaultAxisY()}iF(t){t.setTickStrategy(Ue.Empty).setMouseInteractions(!1).setNibStyle(rt).setStrokeStyle(rt)}sF(t,i){t.setValueStart(i[0].getInterval().start).setValueEnd(i[0].getInterval().end);let s,e,h=!1,r=!1;i.length>1&&mt(...i),i[0].onIntervalChange(((i,s,n)=>{if(h)return;r=!0;const o=kt.performance.now();e=o,t.setValueStart(s).setValueEnd(n),requestAnimationFrame((()=>requestAnimationFrame((()=>{e!==o||(r=!1)}))))})),t.onValueChange(((t,e,n)=>{if(r)return;h=!0;const o=kt.performance.now();s=o,i[0].yt(e,n,!1,!0,"zoomBandChart"),requestAnimationFrame((()=>requestAnimationFrame((()=>{s!==o||(h=!1)}))))}))}hf(t){var i;const s=this.mc.getHeight({x:t.axisX,y:t.axisY});let e=this.$T.get(s);e||(0===this.$T.size?e=this.mc.getHeight({x:this.tF.getDefaultAxisX(),y:this.tF.getDefaultAxisY()}):(e=this.mc.getHeight({x:this.tF.addAxisX.bind(this.tF),y:this.tF.addAxisY.bind(this.tF)})(),this.iF(e))),this.$T.set(s,e);const h=this.mc.getWidth({x:this.KT,y:e}),r=this.mc.getHeight({x:this.KT,y:e});let n,o;if(t instanceof jd){n=this.tF.addAreaRangeSeries({xAxis:h,yAxis:r});const i=n;i.add(t.gM());const s=t.mM(((t,s,e)=>i.add(s))),e=t.onVisibleStateChanged(((t,i)=>{n.setVisible(i)}));o=()=>{t.yM(s),t.offVisibleStateChanged(e)}}else if(t instanceof ad){const i=t.Ew;n=this.tF.addStepSeries({mode:i,xAxis:h,yAxis:r});const s=n;s.add(t.gM());const e=t.mM(((t,i,e)=>s.add(i))),a=t.onVisibleStateChanged(((t,i)=>{n.setVisible(i)}));o=()=>{t.yM(e),t.offVisibleStateChanged(a)}}else if(t instanceof qd){const i={...t.WC,xAxis:void 0,yAxis:void 0},s=this.tF.addHeatmapGridSeries(i);n=s;const e=()=>{s.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle())};e();const h=t.jC(e);t.$C(s);const r=t.XC(((t,i)=>{s.invalidateIntensityValues(i)})),a=t.onVisibleStateChanged(((t,i)=>{s.setVisible(i)}));o=()=>{t.YC(h),t.ZC(r),t.offVisibleStateChanged(a)}}else{const s={};t instanceof ld&&(s.dataPattern=null===(i=t.wn)||void 0===i?void 0:i.dataPattern);const h=this.tF.addLineSeries({...s,xAxis:this.mc.getWidth({x:this.KT,y:e}),yAxis:this.mc.getHeight({x:this.KT,y:e})});if(n=h,t instanceof Pd){const i=t=>{const i=[],s=t.length;for(let e=0;e<s;e+=1){const s=t[e];i.push({x:s[0],y:s[4]})}return i};h.add(i(t.gM()));const s=t.mM(((t,s)=>{h.add(i(s))})),e=t.onVisibleStateChanged(((t,i)=>{n.setVisible(i)}));o=()=>{t.yM(s),t.offVisibleStateChanged(e)}}else{h.add(t.gM());const i=t.mM(((t,i)=>h.add(i))),s=t.onVisibleStateChanged(((t,i)=>{n.setVisible(i)}));o=()=>{t.yM(i),t.offVisibleStateChanged(s)}}}t.onHighlight(((t=!0)=>{n.setHighlight(t)})),n.setMouseInteractions(!1),this.jT({series:n},t);const a=t.pM((()=>{n.clear()})),l=o;o=()=>{t.SM(a),l()},this.Mp.set(t,{series:n,clearReferences:o})}getSizePixels(){return this.tF.getSizePixels()}onResize(t){return this.tF.onResize(((i,s,e,h,r)=>t(this,s,e,h,r)))}offResize(t){return this.tF.offResize(t)}xa(t){this.tF.xa(t)}getMinimumSize(){return this.tF.getMinimumSize()}j(){return this.tF.j()}Y(){return this.tF.Y()}ke(t){const i=Array.from(new Set(this.attachedAxes.map((t=>t.chart))).values());if("x"===this.JT){const t=i.reduce(((t,i)=>{let s=0;return i.forEachAxisY((t=>{s+=0===t.ng?t.Og():0})),Math.max(t,s)}),0),s=i.reduce(((t,i)=>{let s=0;return i.forEachAxisY((t=>{s+=100===t.ng?t.Og():0})),Math.max(t,s)}),0),e=i.reduce(((t,i)=>Math.max(t,i.getPadding().left)),0),h=i.reduce(((t,i)=>Math.max(t,i.getPadding().right)),0);this.getDefaultAxisY().setThickness(t),this.tF.setPadding({left:e,right:h+s})}else{const t=i.reduce(((t,i)=>{let s=0;return i.forEachAxisX((t=>{s+=0===t.ng?t.Og():0})),Math.max(t,s)}),0),s=i.reduce(((t,i)=>{let s=0;return i.forEachAxisX((t=>{s+=100===t.ng?t.Og():0})),Math.max(t,s)}),0),e=i.reduce(((t,i)=>Math.max(t,i.getPadding().bottom)),0),h=i.reduce(((t,i)=>Math.max(t,i.getPadding().top)),0);this.getDefaultAxisX().setThickness(t),this.tF.setPadding({bottom:e,top:h+s})}return this.tF.ke(t)}getTheme(){return this.tF.getTheme()}setTitle(t){return this.tF.setTitle(t),this}getTitle(){return this.tF.getTitle()}setTitleFillStyle(t){return this.tF.setTitleFillStyle(t),this}getTitleFillStyle(){return this.tF.getTitleFillStyle()}setTitleFont(t){return this.tF.setTitleFont(t),this}getTitleFont(){return this.tF.getTitleFont()}setTitleMargin(t){return this.tF.setTitleMargin(t),this}getTitleMargin(){return this.tF.getTitleMargin()}setPadding(t){return this.tF.setPadding(t),this}getPadding(){return this.tF.getPadding()}setBackgroundFillStyle(t){return this.tF.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.tF.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.tF.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.tF.getBackgroundStrokeStyle()}translateCoordinate(t,i,s){return ia(t,i,s,this.tF.pixelScale,this.tF.cs)}addUIElement(t,i){return this.tF.addUIElement(t,i)}addLegendBox(t,i){return this.tF.addLegendBox(t,i)}saveToFile(t,i,s){return this.tF.saveToFile(t,i,s),this}dispose(){return this.tF.dispose(),this.band.dispose(),this.$T.clear(),this.Mp.clear(),this.qT(this),this}onDispose(t){return this.tF.onDispose((()=>t(this)))}offDispose(t){return this.tF.offDispose(t)}}const bf=(t,i)=>{const s=Math.floor(99999/i),e=Math.floor(99999/i),h=Math.floor(99998/i),r=Math.floor(99999/(i+1)),n=Math.floor(89999/(i+1)),o=410001+i*n;let a=0;return{eF:()=>{const i=t.hF("dashboard ui",o+a);return a+=1,i},rF:()=>t.hF("dashboard legend",41e4),nF:i=>{const o=1+i*s,a=100001+i*e,l=200002+i*h,u=300001+i*r,c=410001+i*n;let d=0;return{cs:t,om:(i,s)=>{const e=o+s;return t.hF(i,e)},LS:(i,s)=>{const e=a+s;return t.hF(i,e)},Xm:(i,s)=>{const e=l+s;return t.hF(i,e)},OS:(i,s,e)=>{const h=l+s;return t.oF(i,h,e)},um:(i,s)=>{const e=u+s;return t.hF(i,e)},Kg:i=>{const s=c+d,e=t.hF(i,s);return d+=1,e},Jg:()=>t.hF("panel legend",400002+i),kb:()=>t.hF("panel cursor",500001+i)}}}};class vf{constructor(t){this.I=new s,this.l=t}u(t){return this.l=t,this.I.emit("set",t),this}S(){return this.l}L(t){return this.I.on("set",t)}V(t){return this.I.off(t,"set")}}const xf={Je:!1,Qe:0,th:!1,sh:0,ih:!1,eh:0,hh:0,Xe:He.fitting},Mf=t=>{if(!t||"object"!=typeof t||null===t)return!1;const i=t.type;return!(!i||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(i))},_f=(t,i,s,e,h,r,n,o)=>{const{type:a,data:l}=t;if(0===l.length)return;const u=[e,h];"spark-line"===a&&Df(t,i,u,r,n,o),"spark-bar"===a&&Bf({...t,winLoss:!1},i,u,r,n,o),"spark-win-loss"===a&&Bf({...t,winLoss:!0},i,u,r,n,o),"spark-area"===a&&Of(t,i,u,r,n,o),"spark-pie"===a&&Lf(t,i,u,r,n,o)},Af=(t,i,s,e)=>({x:kf(t.x,i.x,s.x,e),y:Cf(t.y,i.y,s.y,e)}),wf=(t,i,s,e)=>({position:kf(t.position,i.x,s.x,e),high:Cf(t.high,i.y,s.y,e),low:Cf(t.low,i.y,s.y,e)}),kf=(t,i,s,e)=>{const h=Lt(t,i,i+s);return e[0].x+e[1].x*(h-i)/s},Cf=(t,i,s,e)=>{const h=Lt(t,i,i+s);return e[0].y+e[1].y*(h-i)/s},Tf=(t,i,s,e,h,r,n,o)=>{for(const a of t)"point"===a.type&&Ff(a,i,s,h,r,n,o),"axis-band"===a.type&&If(a,s,h,r,n,o),"constant-line"===a.type&&Pf(a,s,e,h,r,n,o)},Ff=(t,i,s,e,h,r,n)=>{const{value:o,fillStyle:a,shape:l,size:u,rotation:c}=t;let d={x:NaN,y:NaN};if("start"===o&&(d=i[0]),"end"===o&&(d=i[i.length-1]),"min"===o){d=i[0];for(const t of i)d=d.y<t.y?d:t}if("max"===o){d=i[0];for(const t of i)d=d.y>t.y?d:t}("object"!=typeof o||(d=Af(o,s,e,h),((t,i)=>{const s=i[0],e=i[1],h=t.x,r=t.y;return s.x<=h&&h<=s.x+e.x&&s.y<=r&&r<=s.y+e.y})(d,h)))&&r.pointSet.add().$a().Na(void 0!==l?l:Oh.Circle).Bh(c||0).K(u||5).Ae(a||n.sparkPointChartFillStyle).Ua(d)},If=(t,i,s,e,h,r)=>{const{axis:o,start:a,end:l,fillStyle:u,strokeStyle:c}=t;let d=n(Ei,Ri),f=n(Ei,Ri);"x"===o&&(d=Af({x:a,y:Ei},i,s,e),f=Af({x:l,y:Ri},i,s,e)),"y"===o&&(d=Af({x:Ei,y:a},i,s,e),f=Af({x:Ri,y:l},i,s,e));const g=e[0],m=e[1],y=Lt(d.x,g.x,g.x+m.x),p=Lt(d.y,g.y,g.y+m.y),S=Lt(f.x,g.x,g.x+m.x),b=Lt(f.y,g.y,g.y+m.y);h.rect.add().Ka(y).qa(p).K(n(S-y,b-p)).Ae(u||r.sparkChartBandFillStyle)._e(c||r.sparkChartBandStrokeStyle)._e(rt)},Pf=(t,i,s,e,h,r,o)=>{const{axis:a,value:l,strokeStyle:u}=t,c=l||0,d=i.y,f=s.y,g=i.x,m=s.x,y=[];if("y"===a&&d<=c&&c<=f){const t=Af(n(g,c),{x:g,y:d},e,h),i=Af(n(m,c),{x:g,y:d},e,h);y.push([t,i])}if("x"===a&&g<=c&&c<=m){const t=Af(n(c,d),{x:g,y:d},e,h),i=Af(n(c,f),{x:g,y:d},e,h);y.push([t,i])}y.length>0&&r.line.add().Be(u||o.sparkChartConstantLineStrokeStyle).Re(y[0][0]).Le(y[0][1])},Df=(t,i,s,e,h,r)=>{const{strokeStyle:n,data:o,markers:a}=t,l=o.length;l>1e4&&h.Bn&&kt.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let u=Ri,c=Ei,d=Ri,f=Ei;for(let t=0;t<l;t+=1){const i=o[t];u=Math.min(u,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),f=Math.max(f,i.y)}const g={x:c-u,y:f-d},m=o.map((t=>Af(t,{x:u,y:d},g,s)));i.lineSet.add().ds(r).Be(n||e.sparkLineChartStrokeStyle).$a().Ua(m),a&&Tf(a,m,{x:u,y:d},{x:c,y:f},g,s,i,e)},Bf=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:a,threshold:l,winFillStyle:u,lossFillStyle:c}=t,d=t.barSize||1,f=t.gap||1,g=t.winLoss,m=l||0,y=f/d*1;let p=Ri,S=Ei;if(g)p=-1,S=1;else for(const t of n)p=Math.min(p,t),S=Math.max(S,t);const b={x:0,y:g?-1:Math.min(0,p)},v={x:1*n.length+(n.length-1)*y,y:g?2:Math.max(S,1e-5)};n.map(((t,i)=>{const e={x:1*(i+1)+i*y,y:g?t>=m?1:0:t},h=Af({x:1*i+i*y,y:g?t>=m?0:-1:0},b,v,s),r=Af(e,b,v,s);return{value:t,position:h,width:r.x-h.x,height:r.y-h.y}})).forEach((t=>{var s;i.rect.add().ds(r).Ce(t.position).Qa(t.height).Ja(t.width).Ae((s=t.value,g?(s>=m?u:c)||e.sparkBarChartFillStyle:o||e.sparkBarChartFillStyle))._e(a||e.sparkBarChartStrokeStyle)}))},Of=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:l,markers:u}=t,c=n.length;c>1e4&&h.Bn&&kt.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let d=Ri,f=Ei,g=Ri,m=Ei;for(let t=0;t<c;t+=1){const i=n[t];d=Math.min(d,i.x),f=Math.max(f,i.x),g=Math.min(g,i.y),m=Math.max(m,i.y)}const y={x:f-d,y:m-g},p=[],S=[];for(const t of n){const i=a(t.x,t.y,g);p.push(wf(i,{x:d,y:g},y,s)),S.push(Af(t,{x:d,y:g},y,s))}i.junction.add().ds(r).$a().Ua(p).Ae(o||e.sparkAreaChartFillStyle),i.lineSet.add().ds(r).$a().Ua(S).Be(l||e.sparkAreaChartStrokeStyle),u&&Tf(u,S,{x:d,y:g},{x:f,y:m},y,s,i,e)},Lf=(t,i,s,e,h,r)=>{const{data:o,strokeStyle:a}=t,l=o.map((t=>"number"==typeof t?t:t.value)),u=o.map((t=>"object"==typeof t?t.fillStyle:void 0)),c=l.reduce(((t,i)=>t+i),0),d=Af(n(50,50),{x:0,y:0},{x:100,y:100},s),f=s[1],g=f.x<=f.y?f.x/2:f.y/2;let m=90;l.forEach(((t,s)=>{const h=t/c*360;i.arc.add().ds(r).Ce(d).Hl(g).jl(0).Wl(m).Le(m+h).Ae(u[s]||Mi(e.sparkPieChartFillStyle,s))._e(a||e.sparkPieChartStrokeStyle),m+=h}))};var Rf,Ef,zf;!function(t){t[t.UpToDown=0]="UpToDown",t[t.LeftToRight=1]="LeftToRight"}(Rf||(Rf={})),function(t){t[t.Vertical=0]="Vertical",t[t.Horizontal=1]="Horizontal",t[t.Both=2]="Both"}(Ef||(Ef={})),function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(zf||(zf={}));class Vf extends Mr{constructor(t,i,s,e,h){super(),this.Ps=!1,this.Nw={x:0,y:0,height:20,width:20},this.aF={x:10,y:10},this.ks=t,this.lF=h,this.uF=new jr(t,i,s,Bt,e).setMouseInteractions(!0),this.cF=t.Fc(i,lr.Simple).Ae(e.dataGridScrollBarButtonArrowFillStyle)._e(e.dataGridScrollBarButtonArrowStrokeStyle).setMouseInteractions(!1),this.Xu(this),this.uF.onMouseEnter((t=>t.setHighlight(1))),this.uF.onMouseLeave((t=>t.setHighlight(0)))}dF(){switch(this.lF){case zf.Up:this.cF.sl([{x:this.Nw.x,y:this.Nw.y+this.aF.y/2},{x:this.Nw.x+this.aF.x/2,y:this.Nw.y-this.aF.y/2},{x:this.Nw.x-this.aF.x/2,y:this.Nw.y-this.aF.y/2}]);break;case zf.Down:this.cF.sl([{x:this.Nw.x-this.aF.x/2,y:this.Nw.y+this.aF.y/2},{x:this.Nw.x+this.aF.x/2,y:this.Nw.y+this.aF.y/2},{x:this.Nw.x,y:this.Nw.y-this.aF.y/2}]);break;case zf.Left:this.cF.sl([{x:this.Nw.x-this.aF.x/2,y:this.Nw.y},{x:this.Nw.x+this.aF.x/2,y:this.Nw.y+this.aF.y/2},{x:this.Nw.x+this.aF.x/2,y:this.Nw.y-this.aF.y/2}]);break;case zf.Right:this.cF.sl([{x:this.Nw.x-this.aF.x/2,y:this.Nw.y+this.aF.y/2},{x:this.Nw.x+this.aF.x/2,y:this.Nw.y},{x:this.Nw.x-this.aF.x/2,y:this.Nw.y-this.aF.y/2}])}}Ce(t){return this.Nw.x=t.x,this.Nw.y=t.y,this}fa(){return n(this.Nw.x,this.Nw.y)}K(t){return this.Nw.height=t.x,this.Nw.width=t.y,this}$t(){return{x:this.Nw.height,y:this.Nw.width}}onMouseDown(t){return this.uF.onMouseDown(t)}onMouseUp(t){return this.uF.onMouseUp(t)}setFillStyle(t){return this.uF.setFillStyle(t),this}getFillStyle(){return this.uF.getFillStyle()}setStrokeStyle(t){return this.uF.setStrokeStyle(t),this}getStrokeStyle(){return this.uF.getStrokeStyle()}ke(){return this.uF.ke(),this.dF(),this}Is(){return this.uF.setSize(n(this.Nw.height,this.Nw.width)).setPosition(n(this.Nw.x,this.Nw.y)),this}setVisible(t){return this.uF.setVisible(t),this.cF.setVisible(t),this}dispose(){return this.uF.dispose(),this.cF.dispose(),this}setMouseInteractions(t){return this.uF.setMouseInteractions(t),this}getMouseInteractions(){return this.uF.getMouseInteractions()}onHighlight(t){return this.I.on("highlight",t)}offHighlight(t){return this.I.off(t)}getHighlight(){return this.uF.getHighlight()}setHighlight(t){return this.uF.setHighlight(Ti(t)),this.I.emit("highlight",Boolean(t)),this.ks.vs(),this}}const Nf=(t,i)=>Math.min(Math.max(t,i.getInnerStart()),i.getInnerEnd());class Gf{constructor(t,i,e,h,r,o,a){this.Lc={x:0,y:0},this.Nw={x:0,y:0,height:0,width:0},this.I=new s,this.fF={min:n(0,0),max:n(0,0)},this.Ox=!1,this.Lx=!1,this.gF={x:0,y:0},this.Ku=void 0,this.mF=n(0,0),this.yF={x:0,y:0},this.pF=0,this.SF=15,this.Rx=(t,i)=>{this.Ox=!0,this.wf.vs();const s=this.bF.getDraggingMode();this.Ku=this.wf.cs.Ir(s===At.notDraggable?Ie.Restricted:s===At.draggable?Ie.Move:s===At.onlyHorizontal?Ie.Horizontal:Ie.Vertical),this.vF&&clearInterval(this.vF)},this.Ex=()=>{this.Ox=!1,this.wf.vs(),this.wf.cs.Pr(this.Ku)},this.zx=t=>(this.Lx=!0,this.gF=ut(this.wf.cs.Fe(t.x,t.y),this.wf.cs.ut,this.scale),!0),this.xF=(t,i)=>(this.MF(i),this.vF=setInterval((()=>this.MF(i)),300),!0),this._F=()=>(clearInterval(this.vF),!0),this.Vx=(t,i)=>{const s=this.bF.getDraggingMode();if(s!==At.notDraggable){const e=i||s,h=ut(this.wf.cs.Fe(t.x,t.y),this.wf.cs.ut,this.scale),r=n(e!==At.onlyVertical?Nf(h.x,this.scale.x):this.Nw.x,e!==At.onlyHorizontal?Nf(h.y,this.scale.y):this.Nw.y),o=n(r.x-this.gF.x,r.y-this.gF.y),a=n(this.bF.getPosition().x+o.x,this.bF.getPosition().y+o.y),l=this.AF(a),u={x:Math.abs(this.mF.x-l.x),y:Math.abs(this.mF.y-l.y)};return this.wF(u),this.yF.y>o.y&&(this.gF=h),this.ke(),!0}return!1},this.Nx=(t,i)=>{this.Lx=!1,ri(i),this.wf.vs()},this.wf=t,this.Hg=i,this.scale=h,this.contentScale=r,this.kF=a,this.CF=new Vf(t,e,h,o,a===Rf.UpToDown?zf.Up:zf.Left).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.TF=new Vf(t,e,h,o,a===Rf.UpToDown?zf.Down:zf.Right).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.bF=new jr(t,e,h,Bt,o).setFillStyle(o.dataGridScrollBarFillStyle).setStrokeStyle(o.dataGridScrollBarStrokeStyle).setMouseInteractions(!0).setDraggingMode(a===Rf.UpToDown?At.onlyVertical:a===Rf.LeftToRight?At.onlyHorizontal:At.notDraggable),this.FF=new jr(i,e,h,Bt,o).setFillStyle(o.dataGridScrollBarBackgroundFillStyle).setStrokeStyle(o.dataGridScrollBarBackgroundStrokeStyle).setMouseInteractions(!0),this.bF.onMouseEnter(this.Rx),this.bF.onMouseLeave(this.Ex),this.bF.onMouseDragStart(((t,i)=>this.zx(n(i.clientX,i.clientY))&&ri(i))),this.bF.onMouseDrag(((t,i)=>this.Vx(n(i.clientX,i.clientY))&&ri(i))),this.bF.onMouseDragStop(this.Nx),this.bF.onTouchStart(((t,i)=>this.zx(n(i.clientX,i.clientY))&&ri(i))),this.bF.onTouchMove(((t,i)=>this.Vx(n(i.clientX,i.clientY))&&ri(i))),this.bF.onTouchEnd(this.Nx),this.CF.onMouseDown(((t,i)=>this.xF(t,i)&&ri(i))),this.TF.onMouseDown(((t,i)=>this.xF(t,i)&&ri(i))),this.CF.onMouseUp(((t,i)=>this._F()&&ri(i))),this.TF.onMouseUp(((t,i)=>this._F()&&ri(i))),this.FF.onMouseWheel(((t,i)=>this.IF(i))),this.bF.onMouseWheel(((t,i)=>this.IF(i))),this.FF.onMouseDown(((t,i)=>this.xF(t,i)&&ri(i))),this.FF.onMouseUp(((t,i)=>this._F()&&ri(i)))}PF(t){return this.Nw=t,this}Ja(t){return this.Nw.width=t,this}fw(){return this.Nw.width}DF(t){return this.mF=t,this}BF(t){return this.Lc=t,this}OF(){return this.Lc}LF(t){return this.SF=t,this}RF(){return this.kF}EF(t){let i;switch(this.kF){case Rf.UpToDown:return i=t>0?Math.min(this.mF.y-this.fF.max.y,this.yF.y+t):Math.max(0,this.yF.y+t),i!==this.yF.y&&(this.wF({x:0,y:i}),this.ke(),!0);case Rf.LeftToRight:return i=Math.min(this.fF.max.x-this.mF.x,this.yF.x+t),i!==this.yF.x&&(this.wF({y:0,x:i}),this.ke(),!0);default:return!1}}zF(t){let i;switch(this.kF){case Rf.UpToDown:return i=Math.max(0,this.yF.y-t),i!==this.yF.y&&(this.wF({x:0,y:i}),this.ke(),!0);case Rf.LeftToRight:return i=t>0?Math.max(0,this.yF.x-t):Math.min(this.fF.max.x-this.mF.x,this.yF.x-t),i!==this.yF.x&&(this.wF({x:i,y:0}),this.ke(),!0);default:return!0}}VF(t){switch(this.kF){case Rf.UpToDown:return this.I.on("scrollY",t);case Rf.LeftToRight:return this.I.on("scrollX",t)}return this.I.on("scrollY",t)}AF(t){switch(this.kF){case Rf.UpToDown:if(t.y>this.fF.min.y)return n(t.x,this.fF.min.y);if(t.y<this.fF.max.y)return n(t.x,this.fF.max.y);break;case Rf.LeftToRight:if(t.x<this.fF.min.x)return n(this.fF.min.x,t.y);if(t.x>this.fF.max.x)return n(this.fF.max.x,t.y)}return t}IF(t){t.deltaY>0&&this.NF()&&ri(t),t.deltaY<0&&this.GF()&&ri(t)}MF(t){const i=ut(this.wf.cs.Fe(t.clientX,t.clientY),this.wf.cs.ut,this.scale);let s;const e=this.bF.getPosition(),h=this.bF.getSize();this.WF(i,e,h)?clearInterval(this.vF):(s=this.kF===Rf.UpToDown?n(0,i.y-e.y>0?this.SF:-this.SF):n(e.x-i.x>0?this.SF:-this.SF,0),(s.x>0||s.y>0)&&this.HF(0!==s.x?Math.abs(s.x):Math.abs(s.y)),(s.x<0||s.y<0)&&this.UF(0!==s.x?Math.abs(s.x):Math.abs(s.y)))}WF(t,i,s){return this.kF===Rf.UpToDown?t.y<i.y+s.y/2&&t.y>i.y-s.y/2:t.x>i.x-s.x/2&&t.x<i.x+s.x/2}$F(t){this.fF=t}HF(t){switch(this.kF){case Rf.UpToDown:{const i=Math.max(0,this.yF.y-t);return i!==this.yF.y&&(this.wF({x:0,y:i}),this.ke(),!0)}case Rf.LeftToRight:{const i=Math.max(0,this.yF.x-t);return i!==this.yF.x&&(this.wF({x:i,y:0}),this.ke(),!0)}default:return!1}}UF(t){switch(this.kF){case Rf.UpToDown:{let i;return i=this.Lc.x>this.Nw.height?Math.min(this.mF.y-this.fF.max.y,this.yF.y+t):0,i!==this.yF.y&&(this.wF({x:0,y:i}),this.ke(),!0)}case Rf.LeftToRight:{const i=Math.min(this.fF.max.x-this.mF.x,this.yF.x+t);return i!==this.yF.x&&(this.wF({y:0,x:i}),this.ke(),!0)}default:return!1}}GF(){return this.HF(this.SF)}NF(){return this.UF(this.SF)}wF(t){if(t.x===this.yF.x&&t.y===this.yF.y)return;let i;switch(this.yF=t,this.kF){case Rf.UpToDown:i=this.yF.y*this.pF*this.contentScale.ki().y,this.I.emit("scrollY",Ef.Vertical,i),this.wf.cs.vs();break;case Rf.LeftToRight:i=this.yF.x*this.pF*this.contentScale.ki().x,this.I.emit("scrollX",Ef.Horizontal,i)}}setVisible(t){return this.CF.setVisible(t),this.TF.setVisible(t),this.FF.setVisible(t),this.bF.setVisible(t),this}dispose(){return this.CF.dispose(),this.TF.dispose(),this.FF.dispose(),this.bF.dispose(),this.vF&&clearInterval(this.vF),this}Is(){switch(this.jF(),this.YF(),this.kF){case Rf.UpToDown:this.CF.Ce({x:this.Nw.x,y:this.Nw.y+this.Nw.height-this.CF.$t().x/2}).K(n(this.Nw.width,this.Nw.width)).Is(),this.TF.Ce({x:this.Nw.x,y:this.Nw.y+10}).K(n(this.Nw.width,this.Nw.width)).Is(),this.FF.setSize({x:this.Nw.width,y:this.Nw.height-2*this.CF.$t().x}).setPosition({x:this.Nw.x,y:this.Nw.y+this.TF.$t().y+this.FF.getSize().y/2}),this.bF.setSize(n(this.Nw.width,this.XF())),this.mF={x:this.Nw.x,y:this.CF.fa().y-this.CF.$t().y/2-this.bF.getSize().y/2},this.$F({min:{x:this.Nw.x,y:this.CF.fa().y-this.CF.$t().y/2-this.bF.getSize().y/2},max:{x:this.Nw.x,y:this.TF.fa().y+this.TF.$t().x/2+this.bF.getSize().y/2}});break;case Rf.LeftToRight:this.CF.Ce({x:this.Nw.x,y:this.Nw.y}).K(n(this.Nw.height,this.Nw.height)).Is(),this.TF.Ce({x:this.Nw.x+this.Nw.width-this.TF.$t().x,y:this.Nw.y}).K(n(this.Nw.height,this.Nw.height)).Is(),this.FF.setSize({y:this.Nw.height,x:this.Nw.width-2*this.CF.$t().y}).setPosition({x:this.Nw.x+this.CF.$t().x/2+this.FF.getSize().x/2,y:this.Nw.y}),this.bF.setSize(n(this.XF(),this.Nw.height)),this.mF={x:this.CF.fa().x+this.CF.$t().x/2+this.bF.getSize().x/2,y:this.Nw.y},this.$F({min:{x:this.CF.fa().x+this.CF.$t().x/2+this.bF.getSize().x/2,y:this.Nw.y},max:{x:this.TF.fa().x-this.TF.$t().x/2-this.bF.getSize().x/2,y:this.Nw.y}})}return this.ZF(),this}jF(){switch(this.kF){case Rf.UpToDown:this.KF()||this.setVisible(!1),this.KF()&&this.setVisible(!0);break;case Rf.LeftToRight:this.qF()||this.setVisible(!1),this.qF()&&this.setVisible(!0)}}YF(){switch(this.kF){case Rf.UpToDown:this.KF()||this.wF({x:0,y:0});break;case Rf.LeftToRight:this.qF()||this.wF({x:0,y:0})}}KF(){return this.Lc.x>this.Nw.height}qF(){return this.Lc.y>this.Nw.width}XF(){switch(this.kF){case Rf.UpToDown:return this.Nw.height*(this.Nw.height-2*this.CF.$t().x)/this.Lc.x;case Rf.LeftToRight:return this.Nw.width*(this.Nw.width-2*this.CF.$t().y)/this.Lc.y;default:return 0}}ZF(){switch(this.kF){case Rf.UpToDown:this.pF=(this.Lc.x-this.Nw.height)/(this.fF.min.y-this.fF.max.y);break;case Rf.LeftToRight:this.pF=(this.Lc.y-this.Nw.width)/(this.fF.max.x-this.fF.min.x)}}ke(){switch(this.CF.ke(),this.TF.ke(),this.FF.ke(),this.kF){case Rf.UpToDown:this.bF.setPosition({x:this.Nw.x,y:this.CF.fa().y-this.CF.$t().y/2-this.bF.getSize().y/2-this.yF.y}).ke();break;case Rf.LeftToRight:this.bF.setPosition({y:this.Nw.y,x:this.CF.fa().x+this.CF.$t().x/2+this.bF.getSize().x/2+this.yF.x}).ke()}return this}}class Wf{constructor(t,i,s,e,h,r,n){switch(this.wf=t,this.Hg=i,this.scale=e,this.contentScale=h,n){case Ef.Vertical:this.JF=this.QF(s,r,Rf.UpToDown);break;case Ef.Horizontal:this.tI=this.QF(s,r,Rf.LeftToRight);break;case Ef.Both:this.JF=this.QF(s,r,Rf.UpToDown),this.tI=this.QF(s,r,Rf.LeftToRight)}this.iI=qs(new Qs(void 0,((t,i,s,e,h)=>{var r,n;0!==e.x&&(null===(r=this.tI)||void 0===r?void 0:r.zF(e.x))&&ri(h),0!==e.y&&(null===(n=this.JF)||void 0===n?void 0:n.EF(e.y))&&ri(h)})))}QF(t,i,s){return new Gf(this.wf,this.Hg,t,this.scale,this.contentScale,i,s)}fw(){return 20}BF(t){var i,s;return null===(i=this.JF)||void 0===i||i.BF(t),null===(s=this.tI)||void 0===s||s.BF(t),this}sI(t){var i;return null===(i=this.tI)||void 0===i||i.LF(t),this}eI(t){var i;return null===(i=this.JF)||void 0===i||i.LF(t),this}hI(t){const i=this.JF;return i&&i.IF(t),this}rI(t){return this.iI.onTouchStart(this,t),this}nI(t){return this.iI.onTouchMove(this,t),this}oI(t){return this.iI.onTouchEnd(this,t),this}onScroll(t){var i,s;return null===(i=this.tI)||void 0===i||i.VF(t),null===(s=this.JF)||void 0===s||s.VF(t),this}dispose(){var t,i;return null===(t=this.JF)||void 0===t||t.dispose(),null===(i=this.tI)||void 0===i||i.dispose(),this}ke(){var t,i;return null===(t=this.JF)||void 0===t||t.ke(),null===(i=this.tI)||void 0===i||i.ke(),this}Is(){var t,i,s,e;const h=this.scale.x,r=this.scale.y;return null===(t=this.JF)||void 0===t||t.PF({x:h.getInnerEnd()-10,y:r.getInnerStart()+20,height:r.getInnerEnd()-20,width:20}),null===(i=this.tI)||void 0===i||i.PF({x:h.getInnerStart()+10,y:r.getInnerStart()+10,height:20,width:h.getInnerEnd()-20}),null===(s=this.JF)||void 0===s||s.Is(),null===(e=this.tI)||void 0===e||e.Is(),this}}class Hf extends na{constructor(t,i,s,e,h,r){super(t,i,s,i.om("dataGrid bg",0),e,i.cs.ts.dataGridBackgroundFillStyle,i.cs.ts.dataGridBackgroundStrokeStyle,i.cs.ts.dataGridTitleFont,i.cs.ts.dataGridTitleFillStyle,r),this.aI=[],this.lI=[],this.uI=[],this.cI=new Map,this.dI=!0,this.fI=!0,this.gI=!0,this.mI=!0,this.yI=!0,this.pI=!0,this.SI=!0,this.bI=!0,this.vI=!0,this.xI=!0,this.MI=!0,this._I=!0,this.AI=!0,this.wI=!0,this.kI=!0,this.CI=!0,this.TI=new Set,this.FI=new Set,this.II=!0,this.DI=!0,this.BI=(t,i)=>{t.borders=void 0===i?Xf:{...t.borders,...i},this.OI(t),this._I=!0,this.cs.vs()},this.OI=t=>{t.borders&&(!1===t.borders.top&&this.LI(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!1}:{...this.RI,bottom:!1}})),!1===t.borders.bottom&&this.LI(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!1}:{...this.RI,top:!1}})),!1===t.borders.left&&this.LI(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!1}:{...this.RI,right:!1}})),!1===t.borders.right&&this.LI(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!1}:{...this.RI,left:!1}})),!0===t.borders.top&&this.LI(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!0}:{...this.RI,bottom:!0}})),!0===t.borders.bottom&&this.LI(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!0}:{...this.RI,top:!0}})),!0===t.borders.left&&this.LI(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!0}:{...this.RI,right:!0}})),!0===t.borders.right&&this.LI(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!0}:{...this.RI,left:!0}})))},this.EI=(t,i)=>{const s=this.cI.get(t);s&&this.I.emit(Uf.cellMouseEnter,s,i)},this.zI=(t,i)=>{const s=this.cI.get(t);s&&this.I.emit(Uf.cellMouseLeave,s,i)},this.VI=(t,i)=>{const s=this.cI.get(t);s&&this.I.emit(Uf.cellMouseClick,s,i)},this.NI=(t,i)=>{const s=this.cI.get(t);s&&this.I.emit(Uf.cellMouseDoubleClick,s,i)},this.GI=(t,i)=>{const s=this.cI.get(t);s&&this.I.emit(Uf.cellMouseDown,s,i)},this.WI=(t,i)=>{const s=this.cI.get(t);s&&this.I.emit(Uf.cellMouseUp,s,i)},this.HI=(t,i)=>{const s=this.cI.get(t);s&&this.I.emit(Uf.cellMouseMove,s,i)},this.UI=(t,i)=>{const s=this.cI.get(t);s&&this.I.emit(Uf.cellMouseDrag,s,i)},this.$I=(t,i)=>{const s=this.cI.get(t);s&&this.I.emit(Uf.cellMouseDragStart,s,i)},this.jI=(t,i)=>{const s=this.cI.get(t);s&&this.I.emit(Uf.cellMouseDragStop,s,i)},this.YI=(t,i)=>{const s=this.cI.get(t);s&&(this.I.emit(Uf.cellMouseWheel,s,i),!i.defaultPrevented&&this.II&&this.XI.hI(i))},this.ZI=(t,i)=>{const s=this.cI.get(t);s&&(this.I.emit(Uf.cellTouchStart,s,i),!i.defaultPrevented&&this.DI&&this.XI.rI(i))},this.KI=(t,i)=>{const s=this.cI.get(t);s&&(this.I.emit(Uf.cellTouchMove,s,i),!i.defaultPrevented&&this.DI&&this.XI.nI(i))},this.qI=(t,i)=>{const s=this.cI.get(t);s&&(this.I.emit(Uf.cellTouchEnd,s,i),!i.defaultPrevented&&this.DI&&this.XI.oI(i))},this.mf.kn||this.mf.Tn||this.cs.An(2),this.dm.Fh("Data Grid"),this.JI=s.d2({scaleXYConstructor:Ns}),this.JI.x.rg=xf,this.QI=s.d2({scaleXYConstructor:Ns}),this.tP={x:0,y:0},this.iP=this.ts.dataGridTextFont,this.sP=this.ts.dataGridTextFillStyle,this.RI={top:!0,bottom:!0,left:!0,right:!0},this.eP=this.ts.dataGridCellBackgroundFillStyle,this.hP=this.ts.dataGridBorderStrokeStyle,this.rP="left-center",this.nP={left:5,right:5,bottom:5,top:5},this.oP=i.LS("dataGrid grid bg",0),this.aP=i.LS("dataGrid cell bg",1),this.lP=i.Xm("dataGrid cell content",0),this.uP=i.Xm("dataGrid scrollbar bg",1),this.cP=i.Xm("dataGrid scrollbar fg",2),this.XI=this.dP(),this.onBackgroundMouseWheel(((t,i)=>{this.II&&this.XI.hI(i)})),this.onBackgroundTouchStart(((t,i)=>{this.DI&&this.XI.rI(i)})),this.onBackgroundTouchMove(((t,i)=>{this.DI&&this.XI.nI(i)})),this.onBackgroundTouchEnd(((t,i)=>{this.DI&&this.XI.oI(i)})),this.fP=this.oP.we(this.JI).Ae(this.ts.dataGridBackgroundFillStyle)._e(rt).setMouseInteractions(!1),this.gP=this.lP.Ig(this.JI).setMouseInteractions(!1),this.mP=new Oa((()=>this.aP.we(this.JI).setMouseInteractions(!0).setMouseEnterEventHandler(this.EI).setMouseLeaveEventHandler(this.zI).setMouseClickEventHandler(this.VI).setMouseDoubleClickEventHandler(this.NI).setMouseDownEventHandler(this.GI).setMouseUpEventHandler(this.WI).setMouseMoveEventHandler(this.HI).setMouseDragEventHandler(this.UI).setMouseDragStartEventHandler(this.$I).setMouseDragStopEventHandler(this.jI).setMouseWheelEventHandler(this.YI).setTouchStartEventHandler(this.ZI).setTouchMoveEventHandler(this.KI).setTouchEndEventHandler(this.qI))),this.yP=new Oa((()=>this.lP.we(this.JI).setMouseInteractions(!1))),this.pP=new Oa((()=>this.lP.vr(this.JI).setMouseInteractions(!1))),this.SP=new Oa((()=>this.lP.hy(this.JI,{},[ba.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setMouseInteractions(!1))),this.bP=new Oa((()=>this.lP.Oe(this.JI).setMouseInteractions(!1))),this.vP=new Oa((()=>this.lP.xp(this.JI).setMouseInteractions(!1))),this.xP=new Oa((()=>this.lP.we(this.JI).setMouseInteractions(!1))),this.MP=new Oa((()=>this.lP.rC(this.JI).setMouseInteractions(!1))),this._P=new Oa((()=>this.lP.Oc(this.JI).setMouseInteractions(!1))),this.nm(h,this.uiScale),this.onResize((()=>{this.dI=!0,this.cs.vs(),this.JI.K(this.pixelScale.$t()),this.QI.K(this.pixelScale.$t())})),this.AP=this.hs.xg([this.fP])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}vd(){return[]}dispose(){return super.dispose(),this.oP.N(),this.aP.N(),this.lP.N(),this.uP.N(),this.cP.N(),ea(this.JI),ea(this.QI),this.XI.dispose(),this.pP.py(),this.mP.py(),this.yP.py(),this.SP.py(),this.bP.py(),this.vP.py(),this.xP.py(),this.MP.py(),this._P.py(),this}j(){return super.j(),this.JI.j(),this.QI.j(),this}Y(){return super.Y(),this.JI.Y(),this.QI.Y(),this}setBackgroundEffect(t){return this.AP.bs(t),this.cs.vs(),this}getBackgroundEffect(){return this.AP.xs()}setInteractionScrollOnWheel(t){return this.II=t,this}getInteractionScrollOnWheel(){return this.II}setInteractionPanOnTouch(t){return this.DI=t,this}getInteractionPanOnTouch(){return this.DI}onCellMouseEnter(t){return this.I.on(Uf.cellMouseEnter,t)}offCellMouseEnter(t){return this.I.off(t)}onCellMouseLeave(t){return this.I.on(Uf.cellMouseLeave,t)}offCellMouseLeave(t){return this.I.off(t)}onCellMouseClick(t){return this.I.on(Uf.cellMouseClick,t)}offCellMouseClick(t){return this.I.off(t)}onCellMouseDoubleClick(t){return this.I.on(Uf.cellMouseDoubleClick,t)}offCellMouseDoubleClick(t){return this.I.off(t)}onCellMouseDown(t){return this.I.on(Uf.cellMouseDown,t)}offCellMouseDown(t){return this.I.off(t)}onCellMouseUp(t){return this.I.on(Uf.cellMouseUp,t)}offCellMouseUp(t){return this.I.off(t)}onCellMouseMove(t){return this.I.on(Uf.cellMouseMove,t)}offCellMouseMove(t){return this.I.off(t)}onCellMouseDrag(t){return this.I.on(Uf.cellMouseDrag,t)}offCellMouseDrag(t){return this.I.off(t)}onCellMouseDragStart(t){return this.I.on(Uf.cellMouseDragStart,t)}offCellMouseDragStart(t){return this.I.off(t)}onCellMouseDragStop(t){return this.I.on(Uf.cellMouseDragStop,t)}offCellMouseDragStop(t){return this.I.off(t)}onCellMouseWheel(t){return this.I.on(Uf.cellMouseWheel,t)}offCellMouseWheel(t){return this.I.off(t)}onCellTouchStart(t){return this.I.on(Uf.cellTouchStart,t)}offCellTouchStart(t){return this.I.off(t)}onCellTouchMove(t){return this.I.on(Uf.cellTouchMove,t)}offCellTouchMove(t){return this.I.off(t)}onCellTouchEnd(t){return this.I.on(Uf.cellTouchEnd,t)}offCellTouchEnd(t){return this.I.off(t)}setGridBackgroundFillStyle(t){return this.fP.Ae(t),this.cs.vs(),this}getGridBackgroundFillStyle(){return this.fP.Ih()}setCellContent(t,i,s,e,h){if("number"==typeof s&&void 0!==e&&void 0!==h){const r=s,n=e,o=h;let a=[];for(let s=t;s<t+r;s+=1)for(let t=i;t<i+n;t+=1){const i=this.LI(s,t);i&&a.push(i)}a=Ci(a);let l={highlight:0};for(const t of a){const i=this.aI.indexOf(t);i<0||(l={...l,highlight:t.highlight,textFont:t.textFont,textFillStyle:t.textFillStyle,contentAlignment:t.contentAlignment,borders:t.borders,padding:t.padding,backgroundFillStyle:t.backgroundFillStyle},this.aI.splice(i,1))}const u={...l,column:t,row:i,columnSpan:r,rowSpan:n,content:o};this.aI.push(u),this.mI=!0,"string"==typeof u.content||"number"==typeof u.content?this.fI=!0:this.gI=!0,this.cs.vs()}else this.wP(t,i,s);return this}setColumnContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.wP(t,e,s)}return this}setRowContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.wP(e,t,s)}return this}setTableContent(t){const i=t.length;if(0===i)return this;const s=t[0].length;if(0===s)return this;for(let e=0;e<s;e+=1)for(let s=0;s<i;s+=1){const i=t[s][e];this.wP(e,s,i)}return this}setColumnWidth(t,i){let s=this.lI.find((i=>i.column===t));return s||(s={column:t,min:void 0,max:void 0},this.lI.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.lI.splice(this.lI.indexOf(s),1):(s.min=i,s.max=i),this.pI=!0,this.cs.vs(),this}setRowHeight(t,i){let s=this.uI.find((i=>i.row===t));return s||(s={row:t,min:void 0,max:void 0},this.uI.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.uI.splice(this.uI.indexOf(s),1):(s.min=i,s.max=i),this.pI=!0,this.cs.vs(),this}setColumnPaddings(t,i){return"number"==typeof i&&(i=m(i,i,i,i)),this.kP(t,(t=>this.CP(t,i))),this}setRowPaddings(t,i){return"number"==typeof i&&(i=m(i,i,i,i)),this.TP(t,(t=>this.CP(t,i))),this}setCellPadding(t,i,s){return"number"==typeof s&&(s=m(s,s,s,s)),this.LI(t,i,(t=>this.CP(t,s))),this}setCellsPaddings(t){return"number"==typeof t&&(t=m(t,t,t,t)),this.nP={...this.nP,...t},this.FP((t=>this.CP(t,this.nP))),this}setCellBorders(t,i,s){return this.LI(t,i,(t=>this.BI(t,s))),this}setRowBorders(t,i){return this.TP(t,(t=>this.BI(t,i))),this}setColumnBorders(t,i){return this.kP(t,(t=>this.BI(t,i))),this}setCellsBorders(t){return this.RI=void 0===t?Xf:t,this.FP((t=>this.BI(t,this.RI))),this}setCellsBorderStrokeStyle(t){return this.hP="function"==typeof t?t(this.hP):t,this.wI=!0,this.cs.vs(),this}setColumnTextFillStyle(t,i){return this.kP(t,(t=>this.IP(t,i))),this}setRowTextFillStyle(t,i){return this.TP(t,(t=>this.IP(t,i))),this}setCellTextFillStyle(t,i,s){return this.LI(t,i,(t=>this.IP(t,s))),this}setCellsTextFillStyle(t){return this.sP="function"==typeof t?t(this.sP):t,this.FP((t=>this.IP(t,this.sP))),this}setColumnTextFont(t,i){return this.kP(t,(t=>this.PP(t,i))),this}setRowTextFont(t,i){return this.TP(t,(t=>this.PP(t,i))),this}setCellTextFont(t,i,s){return this.LI(t,i,(t=>this.PP(t,s))),this}setCellsTextFont(t){return this.iP="function"==typeof t?t(this.iP):t,this.FP((t=>this.PP(t,this.iP))),this}setColumnContentAlignment(t,i){return this.kP(t,(t=>this.DP(t,i))),this}setRowContentAlignment(t,i){return this.TP(t,(t=>this.DP(t,i))),this}setCellContentAlignment(t,i,s){return this.LI(t,i,(t=>this.DP(t,s))),this}setCellsContentAlignment(t){return this.rP=t,this.FP((t=>this.DP(t,this.rP))),this}setCellBackgroundFillStyle(t,i,s){return this.LI(t,i,(t=>this.BP(t,s))),this}setColumnBackgroundFillStyle(t,i){return this.kP(t,(t=>this.BP(t,i))),this}setRowBackgroundFillStyle(t,i){return this.TP(t,(t=>this.BP(t,i))),this}setCellsBackgroundFillStyle(t){return this.eP="function"==typeof t?t(this.eP):t,this.FP((t=>this.BP(t,this.eP))),this}setCellHighlight(t,i,s){return this.LI(t,i,(t=>{t.highlight=Ti(s)})),this.AI=!0,this.cs.vs(),this}setColumnHighlight(t,i){const s=Ti(i);return this.kP(t,(t=>{t.highlight=s})),this.AI=!0,this.cs.vs(),this}setRowHighlight(t,i){const s=Ti(i);return this.TP(t,(t=>{t.highlight=s})),this.AI=!0,this.cs.vs(),this}removeCell(t,i){return this.LI(t,i,(t=>this.aI.splice(this.aI.indexOf(t),1))),this.yI=!0,this.cs.vs(),this}removeRow(t){return this.TP(t,(t=>this.aI.splice(this.aI.indexOf(t),1))),this.aI.filter((i=>i.row>t)).forEach((t=>{t.row-=1})),this.yI=!0,this.cs.vs(),this}removeColumn(t){return this.kP(t,(t=>this.aI.splice(this.aI.indexOf(t),1))),this.aI.filter((i=>i.column>t)).forEach((t=>{t.column-=1})),this.yI=!0,this.cs.vs(),this}removeCells(){return this.aI.splice(0),this.yI=!0,this.cs.vs(),this}getColumnMax(){return 0===this.aI.length?0:this.aI.reduce(((t,i)=>Math.max(t,i.column+i.columnSpan-1)),0)}getRowMax(){return 0===this.aI.length?0:this.aI.reduce(((t,i)=>Math.max(t,i.row+i.rowSpan-1)),0)}ke(t){super.ke(t),oa.Sm(this.dm,this.am);const i=Math.round(this.hP.O()),s=i/2;let e=this.fI||this.gI||this.mI||this.yI||this.pI||this.SI||this.MI||this._I||this.wI||this.CI;if(e){this.aI.forEach((t=>{this.FI.add(t.column)})),this.aI.forEach((t=>{this.TI.add(t.row)}));const t=this.pP.yy(),h=this.OP(s,t);t.finishPlot();const r=this.LP(this.FI.size,h),n=this.RP(this.TI.size,h),o=r.reduce(Ui,0)+i,a=n.reduce(Ui,0)+i,l=new Array(r.length+1).fill(0).map(((t,i)=>r.reduce(((t,s,e)=>t+(e<i?s:0)),0))),u=new Array(n.length+1).fill(0).map(((t,i)=>n.reduce(((t,s,e)=>t+(e<i?s:0)),0)));if(this.EP){const t=this.EP.columnWidths.every(((t,i)=>t===r[i])),i=this.EP.rowHeights.every(((t,i)=>t===n[i]));t&&i&&(e=!1)}this.EP={columnWidths:r,rowHeights:n,dataGridWidth:o,dataGridHeight:a,columnWidthsCumulative:l,rowHeightsCumulative:u,cellsContentSizes:h}}const h=e||this.gI||this.mI||this.yI||this.bI||this.vI||this.xI||this._I||this.AI||this.wI||this.dI||this.CI;if((h||this.kI)&&this.EP){const t=this.pixelScale.getInnerIntervalPixels(),e=oa.pm(this.dm,this.am),r=[this.ia.left+s,this.ia.right+s],n=[this.ia.bottom+s,this.ia.top+e+s],o={x:t.x-r[0]-r[1],y:t.y-n[0]-n[1]},a=[this.ia.left,this.ia.right],l=[this.ia.bottom,this.ia.top+e],u={x:Math.round(t.x-a[0]-a[1]),y:Math.round(t.y-l[0]-l[1])},c={x:Math.ceil(s),y:Math.floor(u.y-s)};this.QI.vi(r).xi(n).Mi(0,o.x)._i(0,o.y),this.XI.BF({x:this.EP.dataGridHeight,y:this.EP.dataGridWidth}).Is().ke();const d={x:Math.round(this.tP.x),y:Math.round(Math.min(0,this.tP.y))};this.JI.vi(a).xi(l).Mi(d.x,u.x+d.x)._i(d.y,u.y+d.y),this.fP.Ce({x:c.x,y:c.y});const f={x:this.JI.x.Gt(),y:this.JI.y.Gt()+this.XI.fw(),width:this.JI.x.Ht()+i-this.XI.fw(),height:this.JI.y.Ht()+i};this.lP.CS(f),this.aP.CS(f),this.oP.CS(f),h&&this.zP(c,this.EP,i)}this.dI=!1,this.fI=!1,this.gI=!1,this.mI=!1,this.yI=!1,this.pI=!1,this.SI=!1,this.bI=!1,this.vI=!1,this.xI=!1,this.MI=!1,this._I=!1,this.AI=!1,this.wI=!1,this.kI=!1,this.CI=!1}OP(t,i){const s=[],e={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const t of this.aI){const{content:h}=t,r={...this.nP,...t.padding};let n,o,a,l={x:0,y:0};if("string"==typeof h||"number"==typeof h){const s=String(h);n=i.add(),l=n.Fh(s).Dh(t.textFont||this.iP).Is().Dc()}if(Mf(h)&&(o=h,l={x:200,y:50}),ho(h)){const t=this.cs.VP(h);t.NP()?(a=h,l=a.$t()):t.GP((()=>{this.CI=!0,this.cs.vs()}))}if(n||o||a){r.top=Math.round(r.top),r.left=Math.round(r.left),r.right=Math.round(r.right),r.bottom=Math.round(r.bottom);const i={x:Math.round(l.x+r.left+r.right+e.left+e.right),y:Math.round(l.y+r.top+r.bottom+e.top+e.bottom)};s.push({cell:t,contentSize:i,text:n,sparkChart:o,icon:a,cellPadding:r,cellMargin:e})}}return s}zP(t,i,s){const{dataGridWidth:e,dataGridHeight:h,cellsContentSizes:r,columnWidths:n,columnWidthsCumulative:o,rowHeights:a,rowHeightsCumulative:l}=i,u={x:e-s,y:-h+s};this.fP.K(u),this.gP.Be(this.hP),this.cI.clear();const c={cellBackground:this.mP.yy(),cellIconRect:this.yP.yy(),lineSet:this.SP.yy(),line:this.bP.yy(),pointSet:this.vP.yy(),rect:this.xP.yy(),junction:this.MP.yy(),arc:this._P.yy()},d=[];for(const i of r){const{cell:e,text:h,sparkChart:r,icon:u,cellPadding:f,cellMargin:g}=i,m={column:e.column,row:e.row},y={x:t.x+o[e.column],y:t.y-l[e.row+e.rowSpan]},p={x:y.x+g.left,y:y.y+g.bottom},S={x:p.x+f.left,y:p.y+f.bottom},b={x:new Array(e.columnSpan).fill(0).reduce(((t,i,s)=>t+n[e.column+s]),0),y:new Array(e.rowSpan).fill(0).reduce(((t,i,s)=>t+a[e.row+s]),0)},v={x:b.x-g.left-g.right,y:b.y-g.top-g.bottom},x={x:v.x-f.left-f.right,y:v.y-f.top-f.bottom};if(h){const t=Yf(S,x,e.contentAlignment||this.rP);h.Ce(t[0]).va({x:t[1],y:t[2]}).Ae(this.WP(e.textFillStyle||this.sP,e.content,this.sP)).ds(e.highlight)}const M=this.WP(e.backgroundFillStyle||this.eP,e.content);if(M!==R){const t=c.cellBackground.add();t.Ce(y).K(b).Ae(M)._e(rt).ds(e.highlight),this.cI.set(t,m)}const _=e.borders||this.RI;if(_&&jf(y,b,_,s,d),r){const t=S,i=x;_f(r,c,this.JI,t,i,this.ts,this.mf,e.highlight)}if(u){const t=u.$t(),i=Yf(S,x,e.contentAlignment||this.rP);c.cellIconRect.add().Ce({x:i[0].x+t.x*(-.5-i[1]/2),y:i[0].y+t.y*(-.5-i[2]/2)}).K(t).Ae(new Kn({source:u.Ad,fitMode:Xn.Stretch}))._e(rt).ds(e.highlight)}}this.gP.$a();for(const t of d)this.gP.Tr().Dg(t[0],t[1]);c.cellBackground.finishPlot(),c.cellIconRect.finishPlot(),c.lineSet.finishPlot(),c.line.finishPlot(),c.pointSet.finishPlot(),c.rect.finishPlot(),c.junction.finishPlot(),c.arc.finishPlot()}LP(t,i){const s=new Array(t).fill(0);for(const t of this.FI.values()){const e=i.filter((i=>t>=i.cell.column&&t+1<=i.cell.column+i.cell.columnSpan)).reduce(((t,i)=>{const s=i.contentSize.x/i.cell.columnSpan;return Math.max(t,s)}),0),h=this.lI.find((i=>i.column===t)),r=h?Lt(e,void 0!==h.min?h.min:Ei,void 0!==h.max?h.max:Ri):e;s[t]=r}return s}RP(t,i){const s=new Array(t).fill(0);for(const t of this.TI.values()){const e=i.filter((i=>t>=i.cell.row&&t+1<=i.cell.row+i.cell.rowSpan)).reduce(((t,i)=>{const s=i.contentSize.y/i.cell.rowSpan;return Math.max(t,s)}),0),h=this.uI.find((i=>i.row===t)),r=h?Lt(e,void 0!==h.min?h.min:Ei,void 0!==h.max?h.max:Ri):e;s[t]=r}return s}WP(t,i,s){if(j(t)){try{const s=Number(i);return new N({color:t.getPalette().getColors(s)})}catch(t){}return s||R}return t}IP(t,i){t.textFillStyle="function"==typeof i?i(t.textFillStyle||this.sP):i,this.xI=!0,this.cs.vs()}PP(t,i){t.textFont="function"==typeof i?i(t.textFont||this.iP):i,this.MI=!0,this.cs.vs()}BP(t,i){t.backgroundFillStyle="function"==typeof i?i(t.backgroundFillStyle||this.eP):i,this.vI=!0,this.cs.vs()}DP(t,i){t.contentAlignment=i,this.bI=!0,this.cs.vs()}CP(t,i){t.padding={...t.padding,...i},this.SI=!0,this.cs.vs()}wP(t,i,s){let e=this.LI(t,i);e?e.content=s:(e={column:t,row:i,columnSpan:1,rowSpan:1,content:s,highlight:0},this.aI.push(e),this.mI=!0),"string"==typeof e.content||"number"==typeof e.content?this.fI=!0:this.gI=!0,this.cs.vs()}FP(t){this.aI.forEach((i=>t(i)))}LI(t,i,s){const e=this.aI.find((s=>t>=s.column&&t+1<=s.column+s.columnSpan&&i>=s.row&&i+1<=s.row+s.rowSpan));return e&&s&&s(e),e}kP(t,i){const s=this.aI.filter((i=>t>=i.column&&t+1<=i.column+i.columnSpan));for(const t of s)t&&i(t)}TP(t,i){const s=this.aI.filter((i=>t>=i.row&&t+1<=i.row+i.rowSpan));for(const t of s)t&&i(t)}dP(){return new Wf(this.cP,this.uP,this.QI,this.QI,this.JI,this.ts,Ef.Both).onScroll(((t,i)=>{this.EP&&(t===Ef.Vertical&&(this.tP.y=-i),t===Ef.Horizontal&&(this.tP.x=i),this.kI=!0,this.cs.vs())})).sI(50).eI(12)}}const Uf={cellMouseEnter:"cellMouseEnter",cellMouseLeave:"cellMouseLeave",cellMouseClick:"cellMouseClick",cellMouseDoubleClick:"cellMouseDoubleClick",cellMouseDown:"cellMouseDown",cellMouseUp:"cellMouseUp",cellMouseMove:"cellMouseMove",cellMouseDrag:"cellMouseDrag",cellMouseDragStart:"cellMouseDragStart",cellMouseDragStop:"cellMouseDragStop",cellMouseWheel:"cellMouseWheel",cellTouchStart:"cellTouchStart",cellTouchMove:"cellTouchMove",cellTouchEnd:"cellTouchEnd"};var $f;!function(t){t.Center="center",t.RightCenter="right-center",t.LeftCenter="left-center",t.RightTop="right-top",t.LeftTop="left-top",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.CenterTop="center-top",t.CenterBottom="center-bottom"}($f||($f={}));const jf=(t,i,s,e,h)=>{const r={x:t.x,y:t.y},n={x:t.x,y:t.y+i.y},o={x:t.x+i.x,y:t.y},a={x:t.x+i.x,y:t.y+i.y};s.top&&h.push([n,a]),s.bottom&&h.push([r,o]),s.left&&h.push([r,n]),s.right&&h.push([o,a])},Yf=(t,i,s)=>{const e=t.x,h=t.x+i.x,r=t.x+i.x/2,o=t.y+i.y,a=t.y,l=t.y+i.y/2;switch(s){case"left-center":return[n(e,l),-1,0];case"right-center":return[n(h,l),1,0];case"center":return[n(r,l),0,0];case"left-bottom":return[n(e,a),-1,-1];case"right-bottom":return[n(h,a),1,-1];case"center-bottom":return[n(r,a),0,-1];case"left-top":return[n(e,o),-1,1];case"right-top":return[n(h,o),1,1];case"center-top":return[n(r,o),0,1]}return Fi(0,`Unidentified DataGrid cell content alignment option: ${s}`)},Xf={top:!1,bottom:!1,left:!1,right:!1};class Zf extends sh{constructor(t,i,s,e,h,r){super(t,{ur(){},lr(){},dr(){}},e,i,s,{numeric:i.xAxisNumericTicks,datetime:i.xAxisDateTimeTicks,time:i.xAxisTimeTicks},{type:"linear"}),this.chart=t,this.hs=r,this.ks=h,this.Th=h.vr(t.HP).Dh(this.ts.barChartCategoryAxisTitleFont||this.ts.xAxisTitleFont).Ae(this.ts.barChartCategoryAxisTitleFillStyle||this.ts.xAxisTitleFillStyle),this.setTitleRotation(this.chart.Cs.getWidth({x:0,y:-90})),this.Lh=this.hs.xg([this.Th]).bs(i.effectsText),this.UP=h.Oe(t.HP).Be(i.barChartCategoryAxisStrokeStyle||i.xAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.Ag=t,this.wg=t):"object"==typeof t&&(this.Ag=t.min,this.wg=t.max),this.chart.cs.vs(),this}getThickness(){return{min:this.Ag,max:this.wg}}setStrokeStyle(t){return this.UP.Be(t),this.chart.cs.vs(),this}getStrokeStyle(){return this.UP.Zl()}Is(){if(!this.Pi)return{$P:0,jP:0,ad:Lt(0,void 0!==this.Ag?this.Ag:0,void 0!==this.wg?this.wg:Ri)};const t=this.UP.Zl().O()/2,i=this.chart.Cs.getHeight(this.Th.Is().Dc());return{$P:t,jP:i,ad:t+i}}ke(t,i,s,e){const h=this.getInterval(),r=this.chart.valueAxis.getInterval();this.UP.Re(this.chart.Cs.toPoint(h.start,r.start)).Le(this.chart.Cs.toPoint(h.end,r.start)).setVisible(this.Pi),this.Th.Ce(this.chart.Cs.toPoint(.5*(h.start+h.end),this.chart.valueAxis.ut.ti(0,-(t.$P+e.labelMarginBeforeCategoryAxisPixels)))).va(this.chart.Cs.toPoint(0,1)).setVisible(this.Pi)}setMouseInteractions(t){return this}ir(t,i){return new eh(i,t,this.ks,this.chart.HP)}sr(t,i){return{}}mr(t,i){return i}pr(t,i,s){return{min:t,max:i}}}class Kf extends sh{constructor(t,i,s,e,h,r,n){super(t,{ur:()=>{var i;if(t.YP){if("positive"===t.XP||"bipolar"===t.XP){if("after-bar"===(null===(i=t.ZP)||void 0===i?void 0:i.position)){const i=this.ut.Ht();return this.ut.ti(t.YP.max,Math.min(this.chart.Cs.getHeight(this.chart.KP())+t.ZP.labelMargin,.3*i))}return t.YP.max}return t.qP?Lt(-1,-1e-6,t.YP.max):0}},lr:()=>{var i;if(t.YP){if("negative"===t.XP||"bipolar"===t.XP){if("after-bar"===(null===(i=t.ZP)||void 0===i?void 0:i.position)){const i=this.ut.Ht();return console.log("asd",t.YP.min,this.ut.ti(t.YP.min,-10),this.getInterval()),this.ut.ti(t.YP.min,-Math.min(this.chart.Cs.getHeight(this.chart.KP())+t.ZP.labelMargin,.3*i))}return t.YP.min}return t.qP?Lt(1,1e-6,t.YP.min):0}},dr:()=>{}},e,i,s,{numeric:i.barChartValueAxisTicks||i.yAxisNumericTicks,datetime:i.yAxisDateTimeTicks,time:i.yAxisTimeTicks},n),this.chart=t,this.hs=r,this.ks=h,this.Th=h.vr(t.HP).Dh(this.ts.barChartValueAxisTitleFont||this.ts.yAxisTitleFont).Ae(this.ts.barChartValueAxisTitleFillStyle||this.ts.yAxisTitleFillStyle),this.setTitleRotation(this.chart.Cs.getHeight({x:0,y:-90})),this.Lh=this.hs.xg([this.Th]).bs(i.effectsText),this.UP=h.Oe(t.HP).Be(i.barChartValueAxisStrokeStyle||this.ts.yAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.Ag=t,this.wg=t):"object"==typeof t&&(this.Ag=t.min,this.wg=t.max),this.chart.cs.vs(),this}getThickness(){return{min:this.Ag,max:this.wg}}setStrokeStyle(t){return this.UP.Be(t),this.chart.cs.vs(),this}getStrokeStyle(){return this.UP.Zl()}setTickStrategy(t,i){return super.Ah(t,i)}Is(t){if(!this.Pi)return this.Rh(),{$P:0,jP:0,ad:Lt(0,void 0!==this.Ag?this.Ag:0,void 0!==this.wg?this.wg:Ri)};const i=this.chart.Cs.getWidth(this.chart.HP).Ht(),s=this.ut.Ht();this.$h({physicalAxisSize:s,oppositeAxisSize:i,plotLines:t});let e=0;for(const t of this.je.values())for(const i of t.values()){const t=i.gh.tr,s=this.chart.Cs.getWidth(i.Ge.Dc()),h=t.getTickLength()+t.getTickPadding()+s+t.getLabelPadding();e=Math.max(e,h)}const h=e+this.UP.Zl().O()/2,r=this.chart.Cs.getWidth(this.Th.Is().Dc());return{$P:h,jP:r,ad:Lt(h+r,void 0!==this.Ag?this.Ag:0,void 0!==this.wg?this.wg:Ri)}}ke(t){const i=this.getInterval();this.UP.Re(this.chart.Cs.toPoint(-.5,this.wh)).Le(this.chart.Cs.toPoint(-.5,this.kh)).setVisible(this.Pi),this.Th.Ce(this.chart.Cs.toPoint(this.chart.categoryAxis.ut.ti(-.5,t.$P*this.chart.Cs.JP),.5*(i.start+i.end))).va(this.chart.Cs.toPoint(this.chart.Cs.QP,0)).setVisible(this.Pi)}setMouseInteractions(t){return this}ir(t,i){return new eh(i,t,this.ks,this.chart.HP)}sr(t,i){const s=t.gh.tr,e=this.chart.Cs.toPoint(-.5,t.l),h=this.chart.HP.ti(e,this.chart.Cs.toPoint(s.getTickLength()*this.chart.Cs.JP,0)),r=this.chart.HP.ti(e,this.chart.Cs.toPoint(s.gridStrokeLength*i.oppositeAxisSize,0)),n=this.chart.HP.ti(h,this.chart.Cs.toPoint(s.getTickPadding()*this.chart.Cs.JP,0));t.Ge.Ce(n).va(this.chart.Cs.toPoint(this.chart.Cs.QP,s.getLabelAlignment())).Bh(s.getLabelRotation()),s.tickStyle!==rt&&0!==s.tickLength&&i.plotLines.add({positions:[e,h]},{lineStyle:s.tickStyle}),s.gridStrokeStyle!==rt&&s.gridStrokeLength>0&&i.plotLines.add({positions:[e,r]},{lineStyle:s.gridStrokeStyle})}mr(t,i){return"linear"===this.Mh.type?uo(t,i,this.ut):co(t,i,this.ut)}pr(t,i,s){return{min:t,max:i}}}class qf extends Ql{constructor(t,i,s,e,h,r){super(t,i,s,e),this.l=0,this.chart=t,this.Ji=t,this.category=h,this.Ms=h,this.ve=Mi(s.barChartBarFillStyle||s.rectangleSeriesFillStyle,r),this.xe=Mi(s.barChartBarStrokeStyle||s.rectangleSeriesStrokeStyle,r),this.onVisibleStateChanged((()=>{this.Ji.tD()})),this.onDispose((()=>{this.Ji.tD(),this.Ji.iD.delete(this),this.Ji.sD.delete(this)}))}setValue(t){return this.l=t,this.Ji.tD(),this.Ji.cs.vs(),this.Ji.iD.delete(this),this.Ji.sD.delete(this),this}getValue(){return this.l}get value(){return this.l}setFillStyle(t){return this.ve="function"==typeof t?t(this.ve):t,this.Ji.tD(),this}getFillStyle(){return this.ve}setStrokeStyle(t){return this.xe="function"==typeof t?t(this.xe):t,this.Ji.tD(),this}getStrokeStyle(){return this.xe}Qy(){return this.ip}Pb(t,i){return Il(t,this.Ji.engine.scale,this.Ji.zb(new ml,this.category,this.l,this)._c(),this,void 0)}solveNearestFromScreen(t){}setEffect(t){return this.Ji.setBarsEffect(t),this}}const Jf=t=>!!(t&&"object"==typeof t&&"iCategory"in t&&"number"==typeof t.iCategory&&"value"in t&&"number"==typeof t.value),Qf=(t,i,s)=>{const e=t.Kc.filter((t=>void 0!==t)),h=e.map((t=>s(t.sizePixels))).reduce(((t,i)=>Math.max(t,i)),1),r=Math.ceil(h/(i/e.length));return r<=1?e:e.filter(((t,i)=>i%r==0))};class tg extends Vl{constructor(t,i,s,e,h,r,n){var o;let a;super(t,i,s,i.om("barChart bg",0),e,i.cs.ts.barChartBackgroundFillStyle||i.cs.ts.chartXYBackgroundFillStyle,i.cs.ts.barChartBackgroundStrokeStyle||i.cs.ts.chartXYBackgroundStrokeStyle,i.cs.ts.barChartTitleFont||i.cs.ts.chartXYTitleFont,i.cs.ts.barChartTitleFillStyle||i.cs.ts.chartXYTitleFillStyle,r),this.coordsBars="barChart",this.eD=sg.Descending,this.hD=this.ts.barChartCategoryLabels,this.ZP=this.ts.barChartValueLabelsAfterBars,this.zb=(t,i,s,e)=>(this.categoryAxis.getTitle().length>0&&t.addRow(this.categoryAxis.getTitle()),t.addRow(i),this.valueAxis.getTitle().length>0&&t.addRow(this.valueAxis.getTitle()),t.addRow(this.valueAxis.formatValue(s)),t),this.rD=!1,this.nD=(()=>{const t=new Map;return{oD:i=>(i.setMouseEnterEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.zi(i,s,e)})),i.setMouseLeaveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Vi(i,s,e)})),i.setMouseClickEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Gi(i,s,e)})),i.setMouseDoubleClickEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Wi(i,s,e)})),i.setMouseDownEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Hi(i,s,e)})),i.setMouseUpEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Ui(i,s,e)})),i.setMouseMoveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Ni(i,s,e)})),i.setMouseDragEventHandler(((i,s,e,h,r,n)=>{const o=n&&t.get(n);o&&o.ji(i,s,e,h,r,n)})),i.setMouseDragStartEventHandler(((i,s,e,h)=>{const r=h&&t.get(h);r&&r.$i(i,s,e,h)})),i.setMouseDragStopEventHandler(((i,s,e,h,r)=>{const n=r&&t.get(r);n&&n.Yi(i,s,e,h,r)})),i.setMouseWheelEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Xi(i,s,e)})),i.setTouchStartEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Zi(i,s,e)})),i.setTouchMoveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Ki(i,s,e)})),i.setTouchEndEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.qi(i,s,e)})),i),aD:(i,s)=>{t.set(i,s)},$a:()=>{t.clear()}}})(),this.iD=new Map,this.sD=new Map,this.XP="positive",this.lD=!0,this.uD=new Map,this.cD={speed:1},this.Tm={speed:1},this.dD=.08,this.Zr=(t,i,s,e,h)=>{this.HP.K(e,h)},this.Cs="horizontal"===(null==n?void 0:n.type)?hg:eg,this.dm.Fh("Bar Chart"),this.fD=i.Xm("barChart plotting 1",0),this.gD=i.Xm("barChart plotting 2",1),this.qP="logarithmic"===(null===(o=null==n?void 0:n.valueAxis)||void 0===o?void 0:o.type),this.qP?"horizontal"===this.Cs.mD?(a=s.d1({scale1DConstructor:Es,dimension:"y"}),this.HP=(new Gs).bi(s.d1({scale1DConstructor:Ts,dimension:"x"}),a)):(a=s.d1({scale1DConstructor:Es,dimension:"x"}),this.HP=(new Gs).bi(a,s.d1({scale1DConstructor:Ts,dimension:"y"}))):(this.HP=s.d2({scaleXYConstructor:Ns}),a=this.Cs.getWidth(this.HP)),this.yD=this.hs.xg(),this.pD=new Ba((()=>this.nD.oD(this.fD.sv(this.HP).Lo(0))),((t,i,s)=>{t.Ae(s.fillStyle)._e(s.strokeStyle),i.forEach((i=>{const s=t.Tr().sl(i.vertices);this.nD.aD(s,i.bar),i.bar.ps([s])}))}),(()=>{this.nD.$a()}),(t=>{this.yD.gs(t)})),this.Fp=this.Hg.we(this.HP).Ae(this.ts.barChartSeriesBackgroundFillStyle||R)._e(rt),this.Ip=this.Hg.we(this.HP).Ae(R)._e(this.ts.barChartSeriesBackgroundStrokeStyle||rt).setMouseInteractions(!1),super.Tp(this.Fp,this.Ip),this.categoryAxis=new Zf(this,this.ts,!(!n||void 0===n.disableAnimations)&&n.disableAnimations,a,this.gD,this.hs);const l=lo(null==n?void 0:n.valueAxis);this.valueAxis=new Kf(this,this.ts,!(!n||void 0===n.disableAnimations)&&n.disableAnimations,this.Cs.getHeight(this.HP),this.gD,this.hs,l.type),this.SD=new Oa((()=>this.gD.vr(this.HP)._a(Oi).xa(Oi).Lo(1))),this.bD=new Ba((()=>this.Hg.Ig(this.HP).setMouseInteractions(!1)),((t,i,s)=>{t.$a().Be(s.lineStyle),i.forEach((({positions:i})=>t.Tr().Dg(i[0],i[1])))}));const u=Gt(n?n.autoCursorBuilder:void 0,Cl);this.Ib=u.xb(this.wb,this.uiScale,this.uiScale,this.ts),this.onResize(this.Zr),this.nm(h,this.HP),this.setAutoCursorMode(zl.onHover),(null==n?void 0:n.disableAnimations)&&this.setAnimationsEnabled(!1)}getSeries(){return this.Mp}setBarsMargin(t){return this.dD=Lt(t,0,.49),this.rD=!0,this.cs.vs(),this}getBarsMargin(){return this.dD}setBarsEffect(t){return this.yD.bs(t),this.cs.vs(),this}getBarsEffect(){return this.yD.xs()}setData(t){let i;if(Array.isArray(t))i=[],t.forEach(((t,s)=>{"string"==typeof t?i.push({category:t}):"number"==typeof t?i.push({category:`Category ${s+1}`,value:t}):"object"==typeof t&&i.push(t)}));else{i=[];const s=Object.keys(t);for(const e of s){const s=t[e];i.push({category:e,value:"number"==typeof s?s:void 0})}}if(this.eD&&i.sort(this.eD),i.forEach(((t,i)=>{let s=this.Mp.find((i=>i.category===t.category));s||(s=new qf(this,this.Ap,this.ts,this.cs.hs,t.category,i),this.Pp(s),this.uD.set(s,{category:i,value:void 0!==t.value?t.value:0})),void 0!==t.value&&s.setValue(t.value)})),this.Mp.slice().forEach((t=>{void 0===i.find((i=>i.category===t.category))&&(t.dispose(),this.uD.delete(t))})),this.categoryAxis.setInterval(this.Cs.getWidth({x:{start:-.5,end:this.Mp.length-.5},y:{start:this.Mp.length-.5,end:-.5}})),this.YP=0===this.Mp.length?void 0:this.Mp.reduce(((t,i)=>({min:Math.min(t.min,i.getValue()),max:Math.max(t.max,i.getValue())})),{min:Ri,max:Ei}),this.YP&&(this.XP=this.YP.min>=0?"positive":this.YP.max<=0?"negative":"bipolar",("bipolar"===this.XP||"negative"===this.XP)&&this.qP))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");return this.eD&&this.Mp.sort(this.eD),this.iD.clear(),this.sD.clear(),this.rD=!0,this.cs.vs(),this}setCategoryLabels(t){const i="function"==typeof t?this.hD?t(this.hD):this.hD:t;return this.hD=i?{...this.ts.barChartCategoryLabels,...i}:void 0,this.iD.clear(),this.cs.vs(),this}getCategoryLabels(){return this.hD}setValueLabels(t){var i;const s="function"==typeof t?this.ZP?t(this.ZP):this.ZP:t,e=(null==s?void 0:s.position)||(null===(i=this.ZP)||void 0===i?void 0:i.position);return s&&e?"after-bar"===e?this.ZP={...this.ts.barChartValueLabelsAfterBars,...s}:"inside-bar"!==e&&"inside-bar-start"!==e&&"inside-bar-centered"!==e&&"inside-bar-end"!==e||(this.ZP={...this.ts.barChartValueLabelsInsideBars,...s}):this.ZP=void 0,this.sD.clear(),this.cs.vs(),this}getValueLabels(){return this.ZP}setLabelFittingEnabled(t){return this.lD=t,this.cs.vs(),this}getLabelFittingEnabled(){return this.lD}getBar(t){const i=this.Mp.find((i=>i.category===t));if(!i)throw new Error(`BarChart.getBar() no such bar: "${t}"`);return i}getBars(){return this.Mp}setSorting(t){return this.eD=t,t&&this.Mp.sort(t),this.cs.vs(),this}getSorting(){return this.eD}setCursorResultTableFormatter(t){return this.zb=t,this.cs.vs(),this}setAnimationCategoryPosition(t,i=1){return this.cD=t?{speed:i}:void 0,this.cs.vs(),this}setAnimationValues(t,i=1){return this.Tm=t?{speed:i}:void 0,this.cs.vs(),this}translateCoordinate(t,i,s){if(s&&js(t)&&$s(i))return super.translateCoordinate(t,i,s);const e=i;let h;if(Us(t))h=this.cs.mo(t);else if(js(t)){const i=ut(t,this.pixelScale,this.cs.ut);h={engineX:i.x,engineY:i.y}}else{if(!Jf(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const i=ut(this.Cs.toPoint(t.iCategory,t.value),this.HP,this.cs.ut);h={engineX:i.x,engineY:i.y}}}if(Hs(e))return this.cs.yo(h);if("barChart"===e){const t=ut({x:h.engineX,y:h.engineY},this.cs.ut,this.HP);return{iCategory:this.Cs.getWidth(t),value:this.Cs.getHeight(t)}}if($s(e))return ut({x:h.engineX,y:h.engineY},this.cs.ut,this.pixelScale);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}ke(t){var i,s;super.ke(t);const e=this.SD.yy(),h=this.bD.yy(),r=this.Mp.filter((t=>t.getVisible())),n=5e-4*t*((null===(i=this.cD)||void 0===i?void 0:i.speed)||0),o=.003*t*((null===(s=this.cD)||void 0===s?void 0:s.speed)||0),a=this.valueAxis.ut,l=a instanceof Es?(t,i)=>{var s;return uo(t,i,a,(null===(s=this.Tm)||void 0===s?void 0:s.speed)||0)}:(t,i)=>{var s;return co(t,i,a,(null===(s=this.Tm)||void 0===s?void 0:s.speed)||0)};r.forEach(((t,i)=>{const s={category:i,value:t.value};let e,h,r=this.uD.get(t);if(void 0===r&&(r=s),this.cD&&r.category!==s.category){const t=Math.sign(s.category-r.category);e=r.category+n*t+o*(s.category-r.category),t!==Math.sign(s.category-e)&&(e=s.category)}else e=s.category;if(this.Tm&&r.value!==s.value){const t=Math.sign(s.value-r.value);h=l(r.value,s.value),t!==Math.sign(s.value-h)&&(h=s.value)}else h=s.value;this.uD.set(t,{category:e,value:h}),e===s.category&&h===s.value||this.cs.vs(!0),e===r.category&&h===r.value||(this.rD=!0)})),oa.Sm(this.dm,this.am),this.categoryAxis.gr(),this.valueAxis.gr();const u=this.categoryAxis.Is(),c=this.valueAxis.Is(h),{labelMarginBeforeCategoryAxisPixels:d}=this.vD(r,e,h);this.categoryAxis.ke(u,e,h,{labelMarginBeforeCategoryAxisPixels:d}),this.valueAxis.ke(c);const f=this.categoryAxis.getThickness(),g=Lt(u.ad+d,void 0!==f.min?f.min:0,void 0!==f.max?f.max:Ri),m={x:Math.min(this.HP.x.getInnerStart(),this.HP.x.getInnerEnd()),y:Math.min(this.HP.y.getInnerStart(),this.HP.y.getInnerEnd())},y=Math.max(this.HP.x.getInnerStart(),this.HP.x.getInnerEnd()),p=Math.max(this.HP.y.getInnerStart(),this.HP.y.getInnerEnd()),S={x:y-m.x,y:p-m.y};this.Fp.Ce(m),this.Fp.K(S),this.Ip.Ce(m),this.Ip.K(S),super.rm(),this.Db(!1);const b=oa.pm(this.dm,this.am);if(this.HP.xi([this.Pt.bottom+this.ia.bottom+("vertical"===this.Cs.mD?g:0),this.Pt.top+this.ia.top+b+("horizontal"===this.Cs.mD?c.ad:0)]),this.HP.vi([this.Pt.left+this.ia.left+this.Cs.getHeight({x:g,y:c.ad}),this.Pt.right+this.ia.right]),this.fD.CS({x:this.HP.x.Gt(),y:this.HP.y.Gt(),width:this.HP.x.Ht(),height:this.HP.y.Ht()}),this.Ng&&this.Ng(),this.rD){const t=this.pD.yy(),i=1-2*this.dD;r.forEach(((s,e)=>{const h=this.uD.get(s);if(void 0===h)return;const r=h.category-.5*i,n=h.category+.5*i,o=this.qP?1e-6:0,a=[this.Cs.toPoint(r,o),this.Cs.toPoint(r,h.value),this.Cs.toPoint(n,h.value),this.Cs.toPoint(n,o)];t.add({vertices:a,bar:s},{fillStyle:s.ve,strokeStyle:s.xe})})),t.finishPlot()}e.finishPlot(),h.finishPlot(),this.rD=!1}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(!1),this.setAnimationValues(!1),this.valueAxis.setAnimationsEnabled(!1),this.categoryAxis.setAnimationsEnabled(!1),this}solveNearest(t){}dispose(){return this.gD.N(),this.fD.N(),super.dispose()}vD(t,i,s){let e=0;const h=this.hD,r=this.ZP,n=this.valueAxis.getInterval(),o=this.Cs.getWidth({x:this.HP.x.Ht(),y:this.HP.y.Ht()});if(h&&h.labelFillStyle!==R){const r=h.tickLength+h.labelMargin,a=this.Cs.toPoint(0,1),l={Kc:t.map(((t,i)=>{const s=h.formatter(t,t.category,t.value);if(!s)return;const e=this.uD.get(t);return void 0!==e?{text:s,position:this.Cs.toPoint(e.category,this.valueAxis.ut.ti(n.start,-r)),alignment:a,rotation:h.labelRotation,sizePixels:this.xD(t)}:void 0})),fc:h.labelFont,ut:this.HP},u=l?this.lD?Qf(l,o,this.Cs.getWidth):l.Kc:[];u.forEach((t=>{t&&i.add().Fh(t.text).Ce(t.position).va(t.alignment).Bh(t.rotation).Ae(h.labelFillStyle).Dh(h.labelFont)})),h.tickStyle!==rt&&0!==h.tickLength&&u.forEach((t=>{if(!t)return;const i=this.Cs.getWidth(t.position);s.add({positions:[this.Cs.toPoint(i,this.valueAxis.ut.getInnerStart()),this.Cs.toPoint(i,this.valueAxis.ut.ti(n.start,-h.tickLength))]},{lineStyle:h.tickStyle})})),e=u.reduce(((t,i)=>i?Math.max(t,this.Cs.getHeight(i.sizePixels)):t),0)+h.tickLength+h.labelMargin}if(r&&r.labelFillStyle!==R){let s;"after-bar"===r.position?s={Kc:t.map(((t,i)=>{const s=r.formatter(t,t.category,t.value);if(!s)return;const e=this.uD.get(t);return void 0!==e?{text:s,position:this.Cs.toPoint(e.category,this.valueAxis.ut.ti(e.value,r.labelMargin*Math.sign(e.value))),alignment:this.Cs.toPoint(0,-1*Math.sign(e.value)),rotation:r.labelRotation,sizePixels:this.MD(t)}:void 0})),fc:r.labelFont,ut:this.HP}:"inside-bar"!==r.position&&"inside-bar-start"!==r.position&&"inside-bar-centered"!==r.position&&"inside-bar-end"!==r.position||(s={Kc:t.map(((t,i)=>{const s=r.formatter(t,t.category,t.value);if(!s)return;const e=this.uD.get(t);if(void 0===e)return;const h=this.qP?1e-6:0,n="bipolar"===this.XP?Math.sign(e.value):"negative"===this.XP?-1:1,o=this.Cs.toPoint(0,"inside-bar"===r.position||"inside-bar-end"===r.position?1*n:"inside-bar-centered"===r.position?0:-1*n);return{text:s,position:this.Cs.toPoint(e.category,"inside-bar"===r.position||"inside-bar-end"===r.position?this.valueAxis.ut.ti(e.value,-r.labelMargin*n):"inside-bar-centered"===r.position?(h+e.value)/2:this.valueAxis.ut.ti(h,r.labelMargin*n)),alignment:o,rotation:r.labelRotation,sizePixels:this.MD(t)}})),fc:r.labelFont,ut:this.HP}),s&&(s?this.lD?Qf(s,o,this.Cs.getWidth):s.Kc:[]).forEach((t=>{t&&i.add().Fh(t.text).Ce(t.position).va(t.alignment).Bh(t.rotation).Ae(r.labelFillStyle).Dh(r.labelFont)}))}return{labelMarginBeforeCategoryAxisPixels:e}}xD(t){if(!this.hD||this.hD.labelFillStyle===R)return{x:0,y:0};const i=this.iD.get(t);if(i)return i;const s=this.hD.formatter(t,t.category,t.value),e=this.cs.AD._D(s,this.hD.labelFont,this.hD.labelRotation);return e.isEstimate?this.cs.vs(!0):this.iD.set(t,e),e}MD(t){if(!this.ZP||this.ZP.labelFillStyle===R)return{x:0,y:0};const i=this.sD.get(t);if(i)return i;const s=this.cs.AD._D(this.ZP.formatter(t,t.category,t.value),this.ZP.labelFont,this.ZP.labelRotation);return s.isEstimate?this.cs.vs(!0):this.sD.set(t,s),s}KP(){return this.Mp.reduce(((t,i)=>{const s=this.MD(i);return{x:Math.max(t.x,s.x),y:Math.max(t.y,s.y)}}),{x:0,y:0})}tD(){this.rD=!0,this.cs.vs()}getMinimumSize(){return{x:200,y:200}}}const ig={Horizontal:"horizontal",Vertical:"vertical"},sg={Disabled:void 0,None:void 0,Ascending:(t,i)=>t.value-i.value,Descending:(t,i)=>i.value-t.value,Alphabetical:(t,i)=>t.category.localeCompare(i.category)},eg={...mo,mD:"vertical",JP:-1,QP:1},hg={...yo,mD:"horizontal",JP:1,QP:-1},rg=(t,i)=>i?t.x:t.y,ng=(t,i,s,e)=>1===i&&e===(s?t.columnIndex:t.rowIndex)||-1===i&&e===(s?t.columnIndex+t.columnSpan:t.rowIndex+t.rowSpan),og=(t,i,s,e,h,r)=>{const n=i.length,o=Math.sign(e),a=[],l=i.reduce(((t,i)=>t+i));for(let t=1;t<=n-1;t+=1)a.push(rg(h,r)*i.slice(0,t).reduce(((t,i)=>t+i),0)/l);const u=a.map((t=>0));let c=a[s-1]+e;for(let i=s;i>0&&i<n;i+=o){const e=t.filter((t=>ng(t,o,r,i))).reduce(((t,i)=>Math.max(t,rg(i.panel.getMinimumSize()||{x:0,y:0},r))),20),n=a[i-1];if(1===o&&c>rg(h,r)-e||-1===o&&c<0+e){u.fill(0);break}if(i!==s&&(1===o?n>c:n<c))break;u[i-1]=c-n,c+=e*o}const d=u.map(((t,i)=>a[i]+t)),f=d.map(((t,i)=>(t-(i>0?d[i-1]:0))/rg(h,r)));return f.push(1-f.reduce(((t,i)=>t+i),0)),f};class ag{constructor(t,i,e,h,r){this.coordsRelative="relative",this.coordsClient="client",this.Ii=!1,this.aI=new Array,this.I=new s,this.wD=[],this.Eg=[],this.kD=void 0,this.CD=!0,this.TD=!0,this.FD=!0,this.ID=!0,this.PD=()=>{this.ID=!0,this.cs.vs()},this.DD=[],this.BD=t=>{for(let i=0;i<this.aI.length;i+=1)if(this.aI[i].panel===t){this.aI.splice(i,1),this.CD=!0,this.cs.vs();break}},this.OD=t=>{const i=this.wD.indexOf(t);i>=0&&this.wD.splice(i,1)},this.$g=t=>{const i=this.Eg.indexOf(t);i>=0&&this.Eg.splice(i,1)},this.LD=(t,i,s,e,h)=>{if(this.RD(i,s,e,h)){const r={panel:t,columnIndex:i,rowIndex:s,columnSpan:e,rowSpan:h};return this.aI.push(r),this.ED(r),this.CD=!0,t}throw new bt("Out of dashboard range.")},this.zD=i.numberOfRows,this.VD=i.numberOfColumns,this.mf=t,this.ND=i,this.GD=h;const n=this.VD*this.zD;this.WD={x:new vf(new Array(this.VD).fill(1)),y:new vf(new Array(this.zD).fill(1))},this.ts=e.ts,this.HD=this.ts.dashboardSplitterStyle,this.qe=void 0===i.disableAnimations||!i.disableAnimations,this.UD=bf(e,n),this.$D=e.hF("dashboard splitters",400001),this.Xx=()=>this.UD.eF(),this.qg=this.UD.rF(),this.hs=e.hs.rs(this,{jD:{}}),this.hs.jD.bs(this.ts.effectsDashboardSplitters);const o=e.$t();this.uiScale=at.d2({scaleXYConstructor:Ns}).Mi(0,100)._i(0,100).K(o),this.pixelScale=at.d2({scaleXYConstructor:Ns}).Mi(0,this.uiScale.x.getCellSize())._i(0,this.uiScale.y.getCellSize()).K(o),this.YD=e.XD.bind(e),this.ZD=e.KD.bind(e),this.qD=e.JD.bind(e),this.QD=e.tB.bind(e),this.Gn=e.Gn.bind(e),this.Hn=e.Hn.bind(e),this.engine=e.Yg,this.cs=e.Xg,e.co((()=>this.PD())),e.vs(),this.iB(),this.setAnimationsEnabled(this.qe);const a=("resize",{on:(l=this.I).on.bind(l,"resize"),off:l.off.bind(l)});var l;this.createChartXY=t=>{const i=lg(t,this.ND,this.qe);return this.LD(new ff(this.mf,this.UD.nF(this.sB(t.columnIndex,t.rowIndex)),this.eB(i,this.WD),this.BD,r,i,a),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createSpiderChart=t=>{const i=lg(t,this.ND,this.qe);return this.LD(new Ic(this.mf,this.UD.nF(this.sB(t.columnIndex,t.rowIndex)),this.eB(i,this.WD),this.BD,r,i,a),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPolarChart=t=>{const i=lg(t,this.ND,this.qe);return this.LD(new zu(this.mf,this.UD.nF(this.sB(t.columnIndex,t.rowIndex)),this.eB(i,this.WD),this.BD,r,i,a),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPieChart=t=>{const i=lg(t,this.ND,this.qe),s=i&&i.type?i.type:Fa;return this.LD(new s(this.mf,this.UD.nF(this.sB(t.columnIndex,t.rowIndex)),this.eB(i,this.WD),this.BD,r,a,i.disableAnimations),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createGaugeChart=t=>{const i=lg(t,this.ND,this.qe),s=i&&i.type?i.type:rc;return this.LD(new s(this.mf,this.UD.nF(this.sB(t.columnIndex,t.rowIndex)),this.eB(i,this.WD),this.BD,r,a,i.disableAnimations),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createFunnelChart=t=>{const i=lg(t,this.ND,this.qe),s=i&&i.type?i.type:Xu;return this.LD(new s(this.mf,this.UD.nF(this.sB(t.columnIndex,t.rowIndex)),this.eB(i,this.WD),this.BD,r,a,i.disableAnimations),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPyramidChart=t=>{const i=lg(t,this.ND,this.qe),s=t&&t.type?t.type:fc;return this.LD(new s(this.mf,this.UD.nF(this.sB(t.columnIndex,t.rowIndex)),this.eB(i,this.WD),this.BD,r,a,i.disableAnimations),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createUIPanel=t=>{const i=lg(t,this.ND,this.qe);return this.LD(new ha(this.mf,this.UD.nF(this.sB(t.columnIndex,t.rowIndex)),this.eB(i,this.WD),this.BD,r,a),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createLegendBoxPanel=t=>{const i=lg(t,this.ND,this.qe);return this.LD(new al(this.mf,this.UD.nF(this.sB(t.columnIndex,t.rowIndex)),this.eB(i,this.WD),this.BD,r,a),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createZoomBandChart=t=>{const i=lg(t,this.ND,this.qe),s=void 0===i.bandAboveSeries||i.bandAboveSeries;return this.LD(new Sf(this.mf,this.UD.nF(this.sB(t.columnIndex,t.rowIndex)),this.eB(i,this.WD),this.BD,i.axis,s,r,i,a),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createMapChart=t=>{const i=lg(t,this.ND,this.qe);return this.LD(new Nl(this.mf,this.UD.nF(this.sB(t.columnIndex,t.rowIndex)),this.eB(i,this.WD),this.BD,r,i,a),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createChart3D=t=>{const i=lg(t,this.ND,this.qe),s=new nl(this.mf,this.UD.nF(this.sB(t.columnIndex,t.rowIndex)),this.eB(i,this.WD),this.BD,r,a,i);return this.LD(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createDataGrid=t=>{const i=lg(t,this.ND,this.qe),s=new Hf(this.mf,this.UD.nF(this.sB(t.columnIndex,t.rowIndex)),this.eB(i,this.WD),this.BD,r,a);return this.LD(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createBarChart=t=>{const i=lg(t,this.ND,this.qe),s=new tg(this.mf,this.UD.nF(this.sB(t.columnIndex,t.rowIndex)),this.eB(i,this.WD),this.BD,r,a,i);return this.LD(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)}}sB(t,i){return t+i*this.VD}eB(t,i){return{d1:s=>new s.scale1DConstructor("x"===s.dimension?t.columnIndex:t.rowIndex,"x"===s.dimension?t.columnSpan:t.rowSpan,"x"===s.dimension?this.VD:this.zD,"x"===s.dimension?i.x:i.y),d2:s=>(new s.scaleXYConstructor).rt({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.VD,y:this.zD},i),d3:()=>new nt({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.VD,y:this.zD},i)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.YD(t[0]),this.ZD(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.qD(t[0]),this.QD(t[1]),this}getWidth(){return this.Gn()}getHeight(){return this.Hn()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.$D.vs(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.$D.vs(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.ts}setSplitterStyle(t){const i=this.HD;return this.HD="function"==typeof t?t(this.HD):t,this.hB(i),this}getSplitterStyle(){return this.HD}setSplitterEffect(t){return this.hs.jD.bs(t),this.cs.vs(),this}getSplitterEffect(){return this.hs.jD.xs()}setAnimationHighlight(t){return this.FD=t,this.DD.forEach((i=>this.cs.us.As(i.line,t))),this}getAnimationHighlight(){return this.FD}hB(t){for(const t of this.DD)t.line.Be(this.HD);this.iB()}setColumnWidth(t,i){const s=this.WD.x.S();return t>=0&&t<s.length&&(s[t]=i,this.WD.x.u(s)),this.PD(),this}getColumnWidth(t){const i=this.WD.x.S();if(t>=i.length)throw new bt("Column index is out of dashboard range.");return i[t]}setRowHeight(t,i){const s=this.WD.y.S();return t>=0&&t<s.length&&(s[Math.abs(s.length-1-t)]=i,this.WD.y.u(s)),this.PD(),this}getRowHeight(t){const i=this.WD.y.S();if(t>=i.length)throw new bt("Row index is out of dashboard range.");return i[Math.abs(i.length-1-t)]}getSizePixels(){return this.pixelScale.getInnerIntervalPixels()}onResize(t){return this.I.on("resize",t)}offResize(t){return this.I.off(t,"resize")}rB(t,i,s){if(s&&Math.abs(t.x)>0)this.nB(i,t.x);else{if(s||!(Math.abs(t.y)>0))return;this.oB(i,t.y)}for(const t of this.aI)t.panel.Y();this.PD()}oB(t,i){const s=og(this.aI,this.WD.y.S(),t,i,this.pixelScale.$t(),!1);this.WD.y.u(s),this.PD()}nB(t,i){const s=og(this.aI,this.WD.x.S(),t,i,this.pixelScale.$t(),!0);this.WD.x.u(s),this.PD()}aB(){this.DD.forEach((t=>t.line.dispose())),this.DD.length=0;for(let t=1;t<=this.VD-1;t+=1)for(let i=0;i<=this.zD-1;i+=1)if(void 0!==this.aI.find((s=>ji(i,s.rowIndex,s.rowIndex+s.rowSpan-1)&&(t===s.columnIndex||t===s.columnIndex+s.columnSpan)))){const s=qs(new Qs((()=>{this.lB(t)}),((i,s,e,h,r)=>{this.rB(h,t,!0),ri(r)}),(()=>{this.uB(t)}))),e=this.$D.Oe(this.pixelScale).Be(this.HD).setMouseEnterEventHandler((()=>{this.lB(t)})).setMouseLeaveEventHandler((()=>{this.uB(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this.rB(r,t,!0),ri(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.cs.us.ls(e,(t=>e.ds(t)),{animationEnabled:this.FD}),this.DD.push({row:i,column:t,line:e,alignment:"vertical"})}for(let t=1;t<=this.zD-1;t+=1)for(let i=0;i<=this.VD-1;i+=1)if(void 0!==this.aI.find((s=>ji(i,s.columnIndex,s.columnIndex+s.columnSpan-1)&&(t===s.rowIndex||t===s.rowIndex+s.rowSpan)))){const s=qs(new Qs((()=>{this.cB(t)}),((i,s,e,h,r)=>{this.rB(h,t,!1),ri(r)}),(()=>{this.dB(t)}))),e=this.$D.Oe(this.pixelScale).Be(this.HD).setMouseEnterEventHandler((()=>{this.cB(t)})).setMouseLeaveEventHandler((()=>{this.dB(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this.rB(r,t,!1),ri(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.cs.us.ls(e,(t=>e.ds(t)),{animationEnabled:this.FD}),this.DD.push({row:t,column:i,line:e,alignment:"horizontal"})}this.hs.jD.gs(this.DD.map((t=>t.line)))}fB(){const t=this.pixelScale.$t(),i=this.WD.x.S(),s=i.reduce(((t,i)=>t+i)),e=this.WD.y.S(),h=e.reduce(((t,i)=>t+i));this.DD.forEach((r=>{if("vertical"===r.alignment){const o=n(t.x*i.slice(0,r.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,r.row).reduce(((t,i)=>t+i),0)/h),a=n(o.x,t.y*e.slice(0,r.row+1).reduce(((t,i)=>t+i),0)/h);r.line.Re(o).Le(a)}else{const o=n(t.x*i.slice(0,r.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,r.row).reduce(((t,i)=>t+i),0)/h),a=n(t.x*i.slice(0,r.column+1).reduce(((t,i)=>t+i),0)/s,o.y);r.line.Re(o).Le(a)}}))}lB(t){this.DD.forEach((i=>{"vertical"===i.alignment&&i.column===t&&(this.cs.us._s(i.line,1),this.$D.gB(i.line))})),this.kD=this.engine.setMouseStyle(Ie.ResizeColumn),this.cs.vs()}cB(t){this.DD.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&(this.cs.us._s(i.line,1),this.$D.gB(i.line))})),this.kD=this.engine.setMouseStyle(Ie.ResizeRow),this.cs.vs()}uB(t){this.DD.forEach((i=>{"vertical"===i.alignment&&i.column===t&&this.cs.us._s(i.line,0)})),this.engine.restoreMouseStyle(this.kD),this.cs.vs()}dB(t){this.DD.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&this.cs.us._s(i.line,0)})),this.engine.restoreMouseStyle(this.kD),this.cs.vs()}setAnimationsEnabled(t){return this.qe=t,this.getCells().filter((t=>t.panel instanceof na)).forEach((i=>i.panel.setAnimationsEnabled(t))),this.setAnimationHighlight(this.qe),this}getAnimationsEnabled(){return this.qe}getCells(){return this.aI.slice()}dispose(){return this.Ii||(this.aI.slice().forEach((t=>t.panel.dispose())),this.wD.slice().forEach((t=>t.dispose())),this.Eg.slice().forEach((t=>t.dispose())),this.Ii=!0,this.GD(),this.I.emit("dispose",this)),this}onDispose(t){return this.I.on("dispose",t)}offDispose(t){return this.I.off(t,"dispose")}saveToFile(t,i,s){return Jo(this.engine,t,i,s),this}mB(t){if(this.ID){const t=this.cs.ut.$t(),i=t.x,s=t.y;this.uiScale.K(i,s),this.pixelScale.K(i,s);const e=this.uiScale.getInnerIntervalPixels();this.pixelScale.Mi(0,e.x)._i(0,e.y),this.I.emit("resize",this,e.x,e.y,i,s),this.TD=!0}this.CD&&(this.aB(),this.CD=!1,this.TD=!0),this.TD&&(this.fB(),this.TD=!1);for(const i of this.aI)i.panel.ke(t);return this.wD.forEach((t=>t.Is())),this.wD.forEach((t=>t.ke())),this.Eg.forEach((t=>t.Is())),this.Eg.forEach((t=>t.ke())),this.ID=!1,this}j(){for(const t of this.aI)t.panel.j();return this.pixelScale.x.j(),this.pixelScale.y.j(),this.uiScale.x.j(),this.uiScale.y.j(),this}Y(){for(const t of this.aI)t.panel.Y();return this.pixelScale.x.Y(),this.pixelScale.y.Y(),this.uiScale.x.Y(),this.uiScale.y.Y(),this}translateCoordinate(t,i,s){return ia(t,i,s,this.pixelScale,this.cs)}addUIElement(t=dn,i=this.uiScale){i=ta(i,this.pixelScale);const s=Qo(t,this.Xx(),this.uiScale,i,this.OD,this.ts);return this.wD.push(s),s}addLegendBox(t=An,i=this.uiScale){i=ta(i,this.pixelScale);const s=Qo(t,this.qg,this.uiScale,i,this.$g,this.ts);return s.setDraggingMode(At.notDraggable),this.Eg.push(s),s}RD(t,i,s,e){return i>=0&&t>=0&&i+e<=this.zD&&t+s<=this.VD}ED(t){const i=this.HD,s=i===rt?0:i.getThickness()/2,e={left:t.columnIndex>0?s:0,top:t.rowIndex<this.zD-1?s:0,right:t.columnIndex<this.VD-1?s:0,bottom:t.rowIndex>0?s:0};t.panel.xa(e)}iB(){this.uiScale.x.Nt([0,0]),this.uiScale.y.Nt([0,0]),this.pixelScale.x.Nt([0,0]),this.pixelScale.y.Nt([0,0]);for(const t of this.aI)this.ED(t);this.cs.vs()}}const lg=(t,i,s)=>{const e={...t,columnSpan:t.columnSpan||1,rowSpan:t.rowSpan||1,disableAnimations:void 0!==t.disableAnimations?t.disableAnimations:!s};var h,r;return e.rowIndex=(h=e.rowIndex,r=e.rowSpan,i.numberOfRows-(h+r)),e},ug="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAACXBIWXMAACxLAAAsSwGlPZapAAAE7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNy4yLWMwMDAgNzkuMWI2NWE3OSwgMjAyMi8wNi8xMy0xNzo0NjoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIzLjUgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMi0wNy0yMFQxMjowODo1OCswMzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjItMDktMDdUMTU6MDc6MjErMDM6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjItMDktMDdUMTU6MDc6MjErMDM6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjIwMGQwMzM2LWEyOTktZjU0YS05MmYzLTg0NzlmNWM5MzEyMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyMDBkMDMzNi1hMjk5LWY1NGEtOTJmMy04NDc5ZjVjOTMxMjIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyMDBkMDMzNi1hMjk5LWY1NGEtOTJmMy04NDc5ZjVjOTMxMjIiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjIwMGQwMzM2LWEyOTktZjU0YS05MmYzLTg0NzlmNWM5MzEyMiIgc3RFdnQ6d2hlbj0iMjAyMi0wNy0yMFQxMjowODo1OCswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIzLjUgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ptd9sFgAABOuSURBVHic7Zx7dFXVncc/55x77r1JIBBCSIhAkiYoQkArUhCrtrRVBHWm1WpptdbxMV1o26mOnXb6sEttq7aOVjtabWdq2/FZ2ooMY2tFK1YlgLwfCYQYkEdISEJCEu6957Hnj98+9557c8NjtY6sWfzWOuuce84++/nd399v/377XEMpBcAll1zCEFIEXGkYxidM0ywxDAPDMLISBHn4vo9SCqVU+tr3/fSR+9v3fTzPw/f9d5VSi5VSS3v6DL70qX185fN7YWCoKg0hBvx59zfZ0z+DiJk4zpffcxkNXIf0pwJeBt54X2sE44D/BD4PtOl7FcAvgWuA9uPJ7KqrrkpfR46S9gzTNH9pmuYZpmlimuYgUAFpMJmmmQaMYRj4vg9AAMbgdz7xff9GpdQS4Dql6Aw9GgZYQM9RW2aAr47WpPdN5gB3AY8DhcAS4Ebgt8g4VCGD2w+MAlJAn363DDiAALIUSOh01frcodOV6PdGAHv1vQ8AXcDBUF3G6XSTgTqddyD1+l4MOAXYg0yGglC6QmBkqIxBkh4Fy7Jyn401DGOJZVnjLctKgyofW4WPgIWUUscEqCAPANfj0oGk9RQwF+noawEDeCTvi2bo2oDGzktpP1xPxEwesbz3SWYBvwO+rH+PBc4DmhHWiABR4B912krgnxCWuxeoBTzgBeDbwBeA04A48BDwH8Bv9HsbgO8C9yOgjOp3lgI/A2YDvQh4VgBuqJ6nA+XAkwgAnwD+AvwQOBsB9+/08fhQjU0DyzTNrAeGYXwjANVQwMoFVC6YgrRyMvSRLb6ClGuQchSjhif46FkHLvzkBZ1vkWIa8LTu3EPZlRNmaj14Pnv7P4hpeHgqyu6+GRiG0m0/4eQMoFGfJwEfQgD1K0T1PA7cgoDhXgR0ceCrCGOMBq5CQHOJzuNfgGnA3cBLwFTgDgQMv0c64nbgIgRodcC5CHv6Oq/ncuo5C/gTcD0wAXgFAd9IhC0vBoYjQB5S0sCKRLJUSJFpmpdZlkUkEiGsBvMBK2wzBWnC6XzfwPMVGCoLwEqBaSjOPrWXOdPb+ci0TsrHpcBjJoovE+XhrLmEdFVP/ym82XYbnYm69E0DpZnqhARVFBmksQiguoCbgK0Iw/ybTtcC2MAmxAT4HjKwqxDmmgt8CgHNIeAfEBb7bwRohxBG8hHArQFu0GleAeYjTBSosH26rEAMBPi36zom9bs7EWa9BrgaAZ13pAan0WTbdvj+KNM0RwXAsixrEGDysVQ+UBmGQV8iwsVnrqeo0OapV2spiCZRymAgGeHSD7XwrRt2ilqzoKstwt2/ql5dEPUerq/rZ2pVP7atQIGvfOx4BVsPf4Oe5Fhs83it+/dNJiFGcT1iswTTZRRiI92PgOzbiB3WBExEwFGDgOpB/Xw3wnxjgOd1useAzyJg8BCAbEXUXZDmfuA24IvAu8A5Ov+1oXqW67p+Ved/DcJWTcBbyAT4JrDuaA0eCljKNE0ViUQGMRYMVoFiV/kYhpcFLMMwSLkRRtjbuGH+dgwjxrJ14+g+ZGFaJl7qAJfN2i3d4MO2HUX86+N1bGwpwDIVv10OhTEfwwCFwnUcPn3lAiZPHott9pNPtZ6gEgd+gcz8sHQBlwJfQwzxWxFjHoRZtiPgeAP4L8SWAlGZX0NWc1v1vX5EtYLQ9jXA13WaVQhr/ghZCH1S5/1DhLUCGQE8gADvcgRUd+ln3Qij3n8sDTYCw/n6668P3x9nmuZm27aLw4wVSLZdBYeTYKgU4OF5XuBCwFcGTduaue/6Vcw5zwUFz71UxyNL60kM9FI9aiPPfK8DTNi6Yzi3/HgKnT0mMdtZrRQzpCwpM5VyqKmp5uqrr8b3vbTBf1Lec/k7hOWqERX45lAJw+6GtMFj2/YxHQGL2bZNxC6gqyfF+RP/zDmnbcfxY5imiWVZ2LbNxs3vMO+DG5hzvguHgRRcOruV2opuWlr38pk5PTKPDFj02il09MQpjPtARqWaZnDArFkzsSzzJKj+b2UjYuBfwRFAlStDGe9pcORjLNM02d/Rx+6d6/n8R1dy1fwetu6YwBtNkzENWUW+va6REnszX79uQExAAB8KRrjMnriBFauiXDTbARcOdtmsbBzFsLiHYZh6ZZcRx3Goqamhrq4Ox3GOu2dOyl8lLfo4LhnSjxUAy7bt9DPLskgkkqxe24zT08CdN7RwzgwgCTVlbZSPPER3/wgaGzfzbutWXnygj8JiJWwVSALmn9NDaXGMgiIFJry1ZTT7DxYQt1N4nthmYVYyDIOZM2diWRaed8TFyEk5QeSIwApUXjQaxfM8du3aw8o1Wzmrags/uHU/ZeWkwy7xohT143fz0+c7Wb1qI9//4gBnTXcyvmMDMSk9qCjz+fuPHRbfbwSWravANBlk+AO4rsuECROora0Ns1UR8A1Ekf4AMSzD8jnEH/ME8PZR+qAcMYTfAX4yRJpPI36lx8leng8lBvDPiOf6Po7goT5O+SCymhuNuBQMJCLxKGL/1AHfRxYFf0tZCJwK3EMm9APSvuHIqjFLzQzpIA3bSr29PWxpfIe9e3Zzw9xmFl6+X5oUZiITqkaspqFhGBfNcrnlswOZWJ+BrEU8XbyvDxve3VPEhndKiNl+umphxvJ9n8LCwly2qkOWvYcQ52Cu3I74Y54/Soeh090KLGJoYH0FcSz+8hjyA3Ek3ou0/N5jfOdIUgD8O+J2yJXNiJP1AaSHv/03KC8sFnAn0qa7QveDCMF+neYeyITihgysGYaB4zh0dHTQ+m4ncfMA9y9s4sNnd4jNlBulcWByVQ+zptjcs7CPSFRJRAsgBo8+PYyPn51gYo2b8eJY8Nqmcg4NRCmIJhlKy0UikVyDfbI+v40sx8NiIt7nOLJcDqQAiXEpMvzZhYQwQIzUEn0dMGAE8efUIMv5XmRJ3od4ooNKGfpZQKkOstzvRmb4MOmFdNkpcqMJIiN0mUE6R+f7IAKq3QhTbyMTyjiAMEccMa7jup0HyTgxLZ13IAYy7cPUMFKnAxndbkQj1Ot+CZh6GBJemqnTDUPY/grEnwaEVoVB6EYfllLK6unppaPLYVp1Fw/d3MCHp3dIVfKF/jwYORx+dcdBJtemMqCKw7pNcW5/uJglbxRI9+qS3cMGyzdUYEcGZxhWi5WVlbmMeqY+b85Tk8AZeC0ChmJEVbQgzsmdupP+gHRwAKzvIAPXBLxIJoTShHjHi5AQyCPAdJ1Hi36nFViPOClBQiZ3AucjIPk94tTcjfiIGoGf6zzR+b2k67YH8XJvRlR0DeI9d4HPIP6slUADMnGayUy02bqMFsTrPlff/5i+Hxy7dP1v088rgNUIYIP+uRsJA72O4KRe1/123TcNul9ORQLqY8KDkB4t04qnD9u2I4qInXKjXDy9ke9e8yqnlPdlwDKEGEDVeDczT0xwEhZPvX4ew4tH8tzLNskeU0qNwNbWkTTvK84LrKPINH3OZ+9MQWaUq6u0CPHD7Edm1ItIR6aQQZ9KJrD6W/3eXIRxNur3QTr+h8CvgbN0Hi3AU8hAn46wCcAMZFfBQWQqzUZY5DfAYgTs1yNquAoB1ScQxnkMAWo5MsiXIj22mqG32UzR59eAZxCn6TQyarENAcp39PGkrt99iPe/WvdZC+JErUScqOsRAIFMxB/p/msELgD+iMRzb0FYKy1pYJUUdlNS1M3weC9Jx3Ys0+Wa85dx3YWvE4u4GZIPS4zsHQaQnc6G59+oZ3vbOD50Vh3Ne4t4eaUtZG3AK+srSTkmxlHiezkLizgSdgDYkid50MmvAxciA/YKMthfIRM8Xa1rPwkxrq9EvNQ/DYpFGCro2KeRQfkDEuUH+BbCJjfq34FqCRhkFTJghcCrCIsu0PUBMSq+iQzubcA8XccgzNKIqBw48t6tYKLdjgD2i6H80e14EgnLrACeRbbaBBH7oD+fRmy1TsTMeJbM5P2xbv8KhFWfQQBZp39nBbPTNtZXL3wUDEi5Ud7trBwbtxNWdeVuAUq+cS+EJS8VUjvOYfJEZzDwbGjeOZrnG+qxrQSWXUht7USe/OMh5s9J0t9rs6JxDNGI0Fuu0zPw7kejUSoqKsKG+wRgPGIjbMtTs3p93gxcpq+fIFPD2fq8FrFNRgHLQu+fps8b9XmWPjeG0gTAadXniaEyg+cKAf55+l4wCUydPthTdTECyPDCYDpicOxEGA1EDeUTE2FLBxlgyABlPWIn/R4Bba5sR2ypM/XvnYj9OFnXDWRChtsayAsI0xaSZxWa8bxHXGzLpSg+cNGk8c2Lqst3W2llkSsFsPiPMRbcMZJX345J1XNydVIWv1g2k0TKwjR8XNdlXGUpze21tO6ATe+UsvdAIZbpp0GVe8691jKJjJE5Ok/tApupiRy9ryVgtA2h62BWGvqe0u+DqErIAGM4Yld0ILZKOM1aRM1VI6q3DXERhMuoQNRQM5nFgE9mLAoQltuDMGl4gHP1A4jKrEFU0X59L2CwBkSlzUPU1hRk4gQM26zPZ+jzdsSQadflluj0XeSfxAmGcG1kVoUyfhaKB/EZly8xADFYv30Sd/66iFRyF29sjHGz05edxobFf5nK1l1jiNmH8X0dtPY9ho0Yz5KGNvrdMag0Ew8GVcBYsViMWCwWBlighgL18hpiL3nIkvwDyIDtQtTdFUhUfhZC8R/WHdJMZhYH7DQa6ch9yMCaZMB7D2KHbUaW3m+R8dKdqc/r9Ps2MkgKsccgw3jB7swWXU6TbtP/ICpyOLLSegux9xYhKv1zCGB2IRPARFTXRp1fIxnrNgDzZv0eCDN/UqeZHmq3gUyMPjITJZARZFbKDyL21Yscg+S6G8oQwy2/xGBN00SeeO0ipk4boKPjAKu3DNCx36KszJNuiMIOrQKjdnLQ/veiuOKVTfW4niJuu2nQwWB28jyP4cOHM2LEiPAu1BJkJispjQt15+xDBsFH7AMH2Q1wGmJn3Rh6Zxuy3A9AGLDJOKQVq8iozp8g20jmI53fqc+B7QWiUrsRVpurnweujgqEuYKwSOC6WKXrc6Ou5xn6CNg4YMifI+C+FlGhAaMaCLDG6fxW6vQ2Mo7tyArwGWRj4DSE9ZRuY69+ZxRiizWQvX0ZRP0+ijiIv4So7GMCVnp3A28bIF7d/IHGGLzdWMvPXr4QX5nEYyatra38eXkDT9/Vy/yPJSAJjmfx3Sfn0rinlKiZxMv+aALf93BchfJ9lArthMhK469WSs0I9notWLCACRMmBJ73AsSAz9WRDgKqUt3R3Tpt4IsqQlZYd+vOXoAMWBRRIZ7OdzQCjHAnlyAD2Y8MfCmiAgI1VUEG3MXITA+eVyIDGXyYEDzvROxEU5c7Rj+7D9nxeSWyigwkioDA1G03dZ4xXb8DyMCbOi+lnyudplTnE4ASRJ37utwkQ3++Uqbz6DpCmiN+THFq3jdisGpLDY+9NAdf+UQsh0TCoLKyknHja3h55Sbmf1ya/vyyejbvKqMgmsDzsr/IkUNh4ON6Dq7r4nkeiYT4MaLRaNZeL4BkMklDQwMTJkwIanOYbMderuzWZwPxr1xAxrVQhHT293WaAznvJkLvhyU3ZJTbueEwRy/ZTtvccE74eS2yeo0iE6MIUYV/QnaFhiWVU04gDhmVDAKU3HTJPPUIS277cqXjKM8HSS6w6geliEHDpmoe+cMFKOUTsVzc0HbhqVNOZfOudvz+d9jZMZrfrZhCNJIcBKgwYFzXpby8PB3knjRpEu3t7SxfvjwrLch2nm3btrFz506qqqqOZ3eDiQzQBjIzfA9iJx13tP49Eg9Zpgfsq5D6PsuRJ88JL7nAOj3rVxzWbqnkxy/Mxscnarm4KnvDXzwWIVY8mTVN7SxddxaHEwbRiJNWgfmOZDJJTU0NY8eOpbS0lPXr1zNv3jzWrVtHZ2dnVqwwCC2tWLGCqqoqjkM8/jZxuvdSWpGPRf7fSSTnui79Kw5rtpRz36JzSHk+MTuJ68lqN7xF2fM8ioYV87NlF9DVNwzbSuJ5+T9OzWWtRCLB4cOHaWtr44UXXsDVVBhmLKXUX8NaJ+V9krBfpBK0m8GG1RvHcNeTM+gbUBgqheO4OI7YRcE5ODzXof1gEb7nprcmZ21Rzvny2XGc9AeuixYt4tprr2XNmjV0d3cHn46Zud8rplIp3nzzzbwfzJ6UE0/CwKoGirDgQFfs9e89Pe1A34CBaaSygOR53iBweZ4HyskLptxVn2VZlJSU4Ps+lmXR3t7O0qVLWbhwIUDwsWsiF1i2bdPY2MiOHTuIRnM9siflRJMwsCQMYLP0zU1l89o67bWWmcJ1sxnIcZxBrDTUkctWjuNQVlbG5ZdfTl9fH0opbrrpJlauXIlSitLS0gBYr+dTo77vs3jxYnp7ewftHzspJ5aER+c8YDmKK9c2j+xTvvtwWN3lMlYYQOHfYXbKBZdSip6eHqqrq7nsssvYt28fruty8803U1xcTH9/P0qpXqXUY/kqG4lE2L9/P2vXrj3JWie4hI33Ncj/CgwoFAq1xPO8O5VS3wlWafm2DgeSG4oZ6vP7zs5OHnroIYqKimhpaSEajVJZWUlnZyf9/f0JwzC+QM4WjKwKRyI0NTVx7rnnDtobf1JOHAkD64HgIoCMUuoO13W3GIZxq2maUw3DKMj3xyBhyQesXHC1tbXheR6madLf38+WLVt6gb+YpnkX2bs+B4lhGCSTyaz/hjgpJ578LzXVOI5QBFhrAAAAAElFTkSuQmCC",cg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5goDBwssgK9G3QAAEq5JREFUeNrtnHtsFNe9xz8zsw9717s2Zv0Ib0LBJEAOIQkl0Eua3Ju2N6LcNmracG9VqWpVqWrzb1QpUh9qm6pKpVaR2ihR1fSPKgVKm5oktzeBAMmlkIILHGxMCGAMfuHX4rV3vd7HzNw//Ju9441NTJq2AXGk0T7mzJkz5/c939/vfH9n12AW5aGHHlpqmuYi0zQjxmRxAQzDwHVdAFzXnXI4jvOu1xkOw3Ec13GctOM4nceOHeviBi1a6zrgDsABTKBVKTXwT+7TfGAt8CellCPffQRYqpTa837bDbxXhS1bttxrWdYK0zQLlmXlAFfAVQKU9+oHkWmaOI5TAp9hGFMOrwhIDaAWWLpmzZq21tbWY975tra2EFANJFevXm1f59haA8wF2uWZPqG1blZKjWmt5wEx4LxSqqi1rgXGlFIFrXUIqFBKjYrh5yqlhrXWVcBCoMd3LgpEAVMpdVlrXQPcAnQppdI+QDUBw0ACwAOVlFogqLVeDEwopfrlXqbvPjEgrJQaumZgbd26VVmWtdKyrGHLshzTNEuAmomtbNt+F5gcx5m2fcMwsG0by7IAcplMxrp8+bJatmzZ2PPPP9+1cOHCNZlMJgK8Dbg3AGnFgf1KqUExzmKgRmu9FFgGZIEmrfVeQAFdwDngE8Jwu+WalVrrd4BbgXFgqdb6mFLqMvAQEASOa60rgI8AGanzFjAKfBrIAY3AAuB4WT8rgBpgKdCgtT4MhICVwMtaawv4d+AIcG3A+sxnPlNlWdaKQCAwYlmWa5qmYZpmCSzloPLYygOSx1Z+EE1MTGBZFpZl4boupmlimiYDAwOk02mjsbHR/uxnP5vcunXrbbfeeus9uVwuHQwG32hqakrdAG6wQsZ7kdZ6DrAE6BF2aQKalVJ5rfWnxIBJwNBaVwN1QKfW2pS6F6VOVsDXKGBLC6heEhb8L6BT6iwAbgcmgLTn5rTW/wn4mcwUUB1VSp3VWi8A7gIOiWcBuAcYUkp1XrMrDAQCtwQCgVAgEJgIBAL4QeUv5THUdO4uEAiQTqeprKwsMZppmgCMjIywfPlyHnzwQdatW2c0NTXZhmHE2tvbL23atOngDRRi1Yhh4uJqssCfgbuBlFIqL/WCwkJXgNXAYuB1YI4w1xDQIXFRh9Q/JyBdCgwKqBrlfpelTrtcuxFoERCF5F7+iVsNVCqlzsrnSmHLJJDSWn9M6rz2vmKsUCgUDAQCBAIBLMsqsYtXPKbyx1KmaZaA4xXTNEmnJyfEt771LV544QWOHTvGnDlzyOfz2LbN448/zqpVq5iYmCCXyxlPP/201dzcfOEGi92XAwWl1P4yJusClmmt7xX2soB3gLC4w6NKqUsSUN8OPCPMNgrUAyMSIyWlDQ8kKTlXJyAuSqx0CdgkrnQ54Cil/MCqF/f8McCWOgeVUrbW+oqAe7tSqnC1hzVnOhEMBp1gMOgGg0FCoRChUIhgMDjl8IAXDAZL7s4DogfGSCRCR0cHn/zkJ1m/fj33338/tm0TDAbp7e1l5cqVLFmyhKGhIVKpFN/5znf49a9/7RSLxegNBqxLwNHyL5VSfcAeiWFGgZclkC4A/+OxC3AGeFEplZXPeyVOmiPXIax0StrNSrseC43J938FTgpw24D/LetSCnhZmK4C2KuU6pBzc2Ul2/NeD2vMdOIrX/nKymAwuC4QCIz5XaF/Beg4DuFwmOHhYYrFYsnV2bZNsVikurqa/fv3s2zZMp599lnGxsYIh8P8+Mc/5vjx45w9e5annnqKLVu2MD4+zo9+9CNefPFFFi1aFDMM4+iRI0fOcrN8GOLDlSKTjAL7fG77fTFWiY3KGcqyLKqqqqitraW9vZ3Kykq+/OUvE4/HyeVyGIZBIpHg5MmTDA4O8t3vfpdisUg2m8WyLD7/+c9z+vRp5s+fz/33308ul6Ojo4NDhw6xYMECAoFAaXFws3woSo8w557ZgOq9gnc8NxgIBEorQcuyqKmp4cKFC+zbt4+NGzfy2GOPUV9fT0tLC52dnTQ0NHD+/HkOHjzIs88+y5IlS+ju7sayLEZHR1mxYgX19fVs2rSpBMa//OUvZDIZbrnllnfFaTfLP7copcY8V/o3C6SWZZXA5b2PRqMUi0VeffVVWltb+epXv8rXv/51stlsaXXX0dFBX18fzc3NbNu2jc997nP09vaWAn/btslmszz99NNUVFQwMjJCoVCgpaWFaDQ6RZ64Wa7fclVgeYCqrq7Gsiw6Ozt55ZVXcF2XZ555hs2bN3P58mUKhQKhUIimpiZ2797Njh07WLRoEU8++SQjIyPYtl1yofl8nnQ6TVNTE4VCAcuyOHnyJOfPn6e6unrWoNJaN8hS/ZxS6kzZuSCwCSgCh8pU5enamgesA/4qwfR0dT4q43X4vdqT+lXAx2T5/9cPKNYJiuCZEAnBASLAWdGcNotaf/wDjrEMYIN8fEsp5frOzZeVbK9SqviewDIMA8uyqKioIJ1O09rayltvvcWGDRv4wQ9+QHV1NV1dXSWZoVgsUl9fT19fH47j8POf/5xoNEpvb28JqJ4rdV2XTCYDQDQa5ciRI+RyOaqrq7Fte7bgmidaznRAqJRUR/9sQCBa0UrRlaYbWFOAd3GW7SHSwaJrdSFXMW4t8ICIocMidHq62GkRYO8G3vo7EdBdAmBX+lMJrBJQ5WTFeHw2KR3XdV0GBwdpa2tjcHCQxx57jC9+8Yvkcjn6+/un6FqeWHrPPfdQV1fHhg0b6OubtHltbS0HDhxg586d/PSnPy1pYKFQiKGhIU6cOEEsFrvWh40Cg0D/NOfs8nSDgKNWFiyODEhWcl+VQC8Q0VoHRPO5ItfFBKRZEQgbRR+ypT1bDGwAw0opL5+ZA94Eun3AsHyr8azELuXqvDcQjtgnKcy7WTSpN4G3RcsyAEMp5Witb5XUTVZrnZDnLPVHax0Wkdbf3zFPvpA0zRy5zgRySqkrWuuIpI4ywKjv+efI8xTkc2hWrjAcDgdyuZxx7tw54vE43/jGN1i/fj2pVIpcLvcuUAEMDw/zyCOPEA6HGRwcxHGckv71y1/+kjfffJNvfvObrFq1iuHhYaqqqjh8+DDd3d0kEokZc4ozUHO1pCLSMzDQfaLjDEtaYqPM7qIYPSKz+5QMigv8q4xJUWv9tuhOd4pIOADMZzKR/KJc/28ysF4Z0VoflMTscmHUnQLqB0UXMrxZrrVuVUppeabbhRVCYvys3OMPMokWAO1KqZO+oNrl/3OocVHRbxdhtbw/q4B/ERAYAp6s1vqIUuq8uNdPyfi4gKm1PiKT5zaZpIuk7d9L/7IyEUJl6v3MwHIcx0wmkzQ1NfGFL3yBhoYGhoaGSmq7Pxbz3Jdt24RCIRzHIZ/PYxgGsViMffv2kcvlANi+fTs/+clPME2zFLS/j2C9SgZyptVKjbz2yYx7SDSYN2TwF4rRBwSkCXGpZ0Q4XC0GOgNoGehlwGExzKAANS/gHBfQ3c3kToIhmdF5ue8cmQjtwAUByjpxv1prvUhAeo7JhPuEANiS9yuFwS5eZUziUueITByvP4ulP6fl3h6jeq51NXBeQFwF/EkmyzZR4dsEOEuZzBeOSXtV8qxvSz9X+b3HjDrWxMREbt26debXvvY1amtrSSaTUwBg2zbRaJSKioop6Z1isUixOBnDVVVV0dPTw44dO1i6dCl33nknL730EhcuXKCuro6uri7a2tqoqakptTHLUi0Plpoh5omLC5kQYc8EXldKnRXVuCAzMylt1TC59aRbZu+YGCAn6Q6PGc4ppby4rV7uf0Yp1cVkohcf0OPAFWGVWjFOh1KqRyn1jhg/JQH5XWKUV5VSHUqpXpn0KR8IRr30zQwxYC2TyeWzSqlLPhBmfUp8WPpdJ+yZFRfnjaktz9Erk+q8UspjOEfavqyUcsWNt8gkqQRaZ8VYDz/8cH1DQ0Petm3Gx8ensJRt2zQ0NHD06FG2b9/OE088UYqxPGU+GAximia/+93vSgnoO+64g87OTv74xz/yxBNP0NLSwvDwMA0NDSXWm2WJy8AkpxnkChmkYVk5LQAueVtVfPmwlOS/5spMz/hWXrVAUik1IfUbgQFfvBITYF8sa7MADEqcFhcG8oCRFaAje6SqmUwiR+XaFl/7UbnmrLRZKUYfv0q8GZ+hPz0yJv8h7aTleQ0ZnyFfH8eAoFJqHGj2jUeDhALl+tawjPN7K+9tbW2h06dP39fY2LjQtu1MPp+fAirHcairq6Ojo4MvfelLbN++nZGRESKRyFTLx+O88cYbnDhxgkQiUVLeV61axfHjxxkYGODUqVOEw+EpbFX+ehVgTQB1EpSWn6uS2Z0Tmq6UVYw3u+cwuXvAy39N+Jgm5rGN1J8j342X3SNSFlfMATJKqYy0WeG7h2e0tO8eETmf933nB0qVMJAj7FoJ3CqgRWttyLN49SNljFYj16fErTcwuRdsl1LqD+Li475r5gAjAirKnivmY7b3rWM12ra9zLbtwUnPZ0wBVSwWI5VK8atf/YrR0VEcx6GlpYVt27YxNjaG67rEYjF6enpobm4uiZ6u65LL5UgkEmSzWZ5//nkGBgaIx+PXBCoZzHkyg5cA9VrrjBhCC5gSTO4kcGX3wF3Ap7XWw+LSLN9MXSzGTfuAVudL/noDsEhrvQU4KEb2YjxvVi/wgc/bDeox6kLgsi8dUi/ni0qpca11L3Cb1jou/Qj4gmMvAd0A3MvkvitbSKFCa/2iAMtbzCDgW+i7PiostUI0O0fas2VxE5SY7OR06oA3TtK/E+KqrzlXGBXjvEtKiMVijI+P84tf/IJQKMTDDz8MwOHDh0tbZ0KhEIZhsGvXLsbGxohEIti2PWWHqWVZHDhwgPHx8ZKu5e3r8h8zpTF9gfZpeT8urJOX4x0JsFFKHZLVYZ+4hgqJNTyGugKc8Yl7jrigfrk+KfpWv1xryj3e9rmBkAD1HflclEDdM1q/BMheyctq1GOB/5ZFQMrHTrYHFBGA90j7Y3JdRoBbkD6f9k2WsLz37nlSJp0nKSRkvNokVopIbHVpGnc3KJNpUOrNapVlTOMK18sKKF0Oqmw2y3PPPUdvby+JRIJ4PM6uXbsYHx9nz549BAIBYrEYe/bs4Te/+Q1z584t7YKwbXvKa6FQKLXt/16OmG3bR48ePfo3724QF1gQQAaBj8oKZ5eA5u+9M8DwK9XTnLcEmEXpX4VIEy7wB7+a/c/q4weV0on6lqQ4jkM8Hi8xVU9PD4lEglwux9jYGA888AC//e1vOXToENu2baO9vZ3m5uZSzFX+qxyPjQKBAMlkEsdxyGazJcabO3duSZr4gNTqrWKkvBjOAt74R4DKpzVdrSwTqSElzFMhHmP/PwJUs+zj3wYs+UVMVGYPjuNQU1NDJpPhZz/7GT09PTQ0NJTYJp1OE4/HWb58Oe3t7ViWxY4dO0ilUtTV1VEsFt8FKM/tZbNZNm/eTDKZZN26ddTX17N//35ef/11qqurP6htM1nggG+iGBKgjn6I8rX9TG7oy/sU8X6lVI7ruASmER4rgIIHqnQ6zVNPPUV3dzeNjY3k81O34ySTSRYvXgzACy+8QGtrK7W1tVNANd2RyWRYu3YtiUSC7u5uent7efTRR9m1axexWOwDAZZoN50fZgPIqu26/7HIbIAVdBwnV1NTY2QyGfeHP/whly5dYv78+SU1vXylWFlZSX9/P+fOnSMajZaCdD9blQPLMIyS8r5y5Up2797N3r17mTdvnlf/5r6Z67iUrwpjrusSiUTCyWQy/L3vfc85e/YsdXV15PP5kqpeKBRK723bplAokM1mS9uXve+nYyrLsrhy5Qqjo6MkEgn27t3LwYMHefzxxzl8+LC3e9Rwb24hvaGAFQVikUhkYOfOnWeOHz9eWV9fPwVIHmjK33s48INqOnClUinWrFnD4sWL6evrY+PGjezevZuLFy/y/e9/n66uLi8Wm7hpnhvHFd4SDodHe3t7//zkk0/aGzZsuK1YLAYMwyjO9BP5KUpamQ413f84dHd38+1vf5tTp07R19fHxz/+cerq6njttdd49NFHXdu2KxzHGXddd+CmeW4cxgqGw+E/3X333TZAMBh8u1Ao1Ni2bRSLRdf/Cxzv/XSHn6HKP0ciEfbv38/atWuZN28ezz33HLW1tTzyyCPuwYMHrUAgEHNdt/3kyZO5m+a5fotRJjckVq9ePeW3+Pfdd9+9pmmuME2zYJpmzvsTj+lYqzznNx1rGYbBlStXqK+vZ2Jigu7ubrexsdGorKys6O7utiKRSJvW+thN09xAwJqpbN68ealhGItM04yKKywF1v7/cbgauDxgeXHYxMRkCBUKhYxsNusWCoV0MBjsbGtr67ppluu//B9N0zw2U/fnYwAAAABJRU5ErkJggg==",dg={translation:(t,i,s)=>[1,0,0,0,0,1,0,0,0,0,1,0,t,i,s,1],xRotation(t){const i=Math.cos(t),s=Math.sin(t);return[1,0,0,0,0,i,s,0,0,-s,i,0,0,0,0,1]},yRotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,0,-s,0,0,1,0,0,s,0,i,0,0,0,0,1]},zRotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,s,0,0,-s,i,0,0,0,0,1,0,0,0,0,1]},scaling:(t,i,s)=>[t,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1],translate:(t,i,s,e)=>dg.multiply(t,dg.translation(i,s,e)),xRotate:(t,i)=>dg.multiply(t,dg.xRotation(i)),yRotate:(t,i)=>dg.multiply(t,dg.yRotation(i)),zRotate:(t,i)=>dg.multiply(t,dg.zRotation(i)),scale:(t,i,s,e)=>dg.multiply(t,dg.scaling(i,s,e)),multiply(t,i){const s=i[0],e=i[1],h=i[2],r=i[3],n=i[4],o=i[5],a=i[6],l=i[7],u=i[8],c=i[9],d=i[10],f=i[11],g=i[12],m=i[13],y=i[14],p=i[15],S=t[0],b=t[1],v=t[2],x=t[3],M=t[4],_=t[5],A=t[6],w=t[7],k=t[8],C=t[9],T=t[10],F=t[11],I=t[12],P=t[13],D=t[14],B=t[15],O=[];return O[0]=s*S+e*M+h*k+r*I,O[1]=s*b+e*_+h*C+r*P,O[2]=s*v+e*A+h*T+r*D,O[3]=s*x+e*w+h*F+r*B,O[4]=n*S+o*M+a*k+l*I,O[5]=n*b+o*_+a*C+l*P,O[6]=n*v+o*A+a*T+l*D,O[7]=n*x+o*w+a*F+l*B,O[8]=u*S+c*M+d*k+f*I,O[9]=u*b+c*_+d*C+f*P,O[10]=u*v+c*A+d*T+f*D,O[11]=u*x+c*w+d*F+f*B,O[12]=g*S+m*M+y*k+p*I,O[13]=g*b+m*_+y*C+p*P,O[14]=g*v+m*A+y*T+p*D,O[15]=g*x+m*w+y*F+p*B,O},inverse(t){const i=[],s=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11],g=t[12],m=t[13],y=t[14],p=t[15],S=d*p,b=y*f,v=a*p,x=y*l,M=a*f,_=d*l,A=h*p,w=y*r,k=h*f,C=d*r,T=h*l,F=a*r,I=u*m,P=g*c,D=n*m,B=g*o,O=n*c,L=u*o,R=s*m,E=g*e,z=s*c,V=u*e,N=s*o,G=n*e,W=S*o+x*c+M*m-(b*o+v*c+_*m),H=b*e+A*c+C*m-(S*e+w*c+k*m),U=v*e+w*o+T*m-(x*e+A*o+F*m),$=_*e+k*o+F*c-(M*e+C*o+T*c),j=1/(s*W+n*H+u*U+g*$);return i[0]=j*W,i[1]=j*H,i[2]=j*U,i[3]=j*$,i[4]=j*(b*n+v*u+_*g-(S*n+x*u+M*g)),i[5]=j*(S*s+w*u+k*g-(b*s+A*u+C*g)),i[6]=j*(x*s+A*n+F*g-(v*s+w*n+T*g)),i[7]=j*(M*s+C*n+T*u-(_*s+k*n+F*u)),i[8]=j*(I*l+B*f+O*p-(P*l+D*f+L*p)),i[9]=j*(P*r+R*f+V*p-(I*r+E*f+z*p)),i[10]=j*(D*r+E*l+N*p-(B*r+R*l+G*p)),i[11]=j*(L*r+z*l+G*f-(O*r+V*l+N*f)),i[12]=j*(D*d+L*y+P*a-(O*y+I*a+B*d)),i[13]=j*(z*y+I*h+E*d-(R*d+V*y+P*h)),i[14]=j*(R*a+G*y+B*h-(N*y+D*h+E*a)),i[15]=j*(N*d+O*h+V*a-(z*a+G*d+L*h)),i},projectionPerspective(t,i,s,e){const h=1/Math.tan(t*Math.PI/180/2),r=1/(s-e);return[h/i,0,0,0,0,h,0,0,0,0,(s+e)*r,-1,0,0,s*e*r*2,0]},projectionOrthographic:(t,i,s,e,h,r)=>[2/(i-t),0,0,-(i+t)/(i-t),0,2/(e-s),0,-(e+s)/(e-s),0,0,-2/(r-h),-(r+h)/(r-h),0,0,0,1]};class fg{constructor(t){this.yB=t}}class gg{constructor(){this.pB=new Array,this.SB=t=>(this.pB.push(t),t),this.bB=this.SB(new Map),this.vB=this.SB(new Map),this.xB=this.SB(new Map),this.MB=this.SB(new Map),this._B=this.SB(new Map)}AB(){this.pB.forEach((t=>{t.forEach((t=>t.AB())),t.clear()}))}}class mg{constructor(t,i){this.ta=t,this.$=i,this.wB=!0,this.kB=null,this.CB=null}}class yg{constructor(t){this.TB=!1,this.FB=1,this.IB=t,this.PB={ta:n(0,0),$:n(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),wB:!0,kB:null,CB:null},this.DB=n(64,64),this.BB=new Uint8ClampedArray(this.DB.x*this.DB.y*this.FB)}OB(t,i){if(!t.wB)return null;if(t.kB&&t.CB){const s=this.OB(t.kB,i);return null!==s?s:this.OB(t.CB,i)}const s=o(t.$.x,t.$.y);if(t.ta.x+t.$.x>=Number.MAX_SAFE_INTEGER&&(s.x=this.DB.x-t.ta.x-1),t.ta.y+t.$.y>=Number.MAX_SAFE_INTEGER&&(s.y=this.DB.y-t.ta.y-1),t.$.x===i.x&&t.$.y===i.y)return t.wB=!1,t;if(s.x<i.x||s.y<i.y)return null;let e,h;const r=s.x-i.x,a=s.y-i.y;let l=r<a;return 0===r&&0===a&&(l=!(t.$.x>t.$.y)),l?(e=new mg(cs(t.ta,{x:0,y:1}),n(t.$.x,i.y)),h=new mg(cs(t.ta,{x:0,y:i.y+1}),n(t.$.x,t.$.y-1-i.y))):(e=new mg(cs(t.ta,{x:1,y:0}),n(i.x,t.$.y)),h=new mg(cs(t.ta,{x:i.x+1,y:0}),n(t.$.x-1-i.x,t.$.y))),t.kB=e,t.CB=h,this.OB(t.kB,i)}LB(t,i){const s={RB:!1,ta:null};let e=this.OB(this.PB,i);if(null===e)for(;null===e&&this.DB.x<this.IB&&this.DB.y<this.IB;){if(!this.EB(n(2*this.DB.x,2*this.DB.y)))return this.TB=!0,null;s.RB=!0,e=this.OB(this.PB,i)}if(null===e)return this.TB=!0,null;for(let s=0;s<i.y;s+=1)for(let h=0;h<i.x;h+=1){const r=e.ta.y+s,n=e.ta.x+h;this.BB[r*this.FB*this.DB.x+n*this.FB+0]=t[s*this.FB*i.x+h*this.FB+0]}return s.ta=e.ta,s}EB(t){if(t.x>this.IB||t.y>this.IB)return!1;const i=new Uint8ClampedArray(t.x*t.y*this.FB);for(let s=0;s<this.DB.y;s+=1)for(let e=0;e<this.DB.x;e+=1)i[s*t.x*this.FB+e*this.FB+0]=this.BB[s*this.DB.x*this.FB+e*this.FB+0];return this.DB=t,this.BB=i,!0}}class pg{constructor(t){this.zB=new Map,this.IB=t,this.zB.set(this.zB.size,new yg(this.IB))}VB(t){return this.zB.get(t)}LB(t,i){let s=-1;const e=Array.from(this.zB.values());for(let t=0;t<e.length;t+=1){const i=e[t];if(!i)break;if(!i.TB){s=t;break}}-1===s&&(s=this.zB.size,this.zB.set(this.zB.size,new yg(this.IB)));const h=this.zB.get(s);if(!h)return null;let r=h.LB(t,i);if(!r&&h.TB){const e=this.zB.size,h=new yg(this.IB);this.zB.set(e,h),s=e,r=h.LB(t,i)}return r?{NB:s,...r}:null}}var Sg;!function(t){t[t.Fail=0]="Fail",t[t.Success=1]="Success",t[t.Resize=2]="Resize"}(Sg||(Sg={}));const bg=vi("font-texture");class vg{constructor(t){this.GB=new Map,this.WB=new Map,this.Ao=bg(),this.yB=t,this.HB=new pg(this.yB.UB||4096)}$B(){return this.WB.forEach((t=>{this.yB.jB(t)})),this.WB.clear(),this}YB(t,i){const s=this.GB.get(i);if(s)return s.get(t)}XB(t,i,s){let e=this.GB.get(i);if(e||(e=new Map,this.GB.set(i,e)),e.has(t.glyph))return Sg.Success;const h=this.HB.LB(s,t.size);if(!h||!h.ta)return Sg.Fail;h.RB&&this.ZB();const r=this.HB.VB(h.NB);if(!r)return Sg.Fail;let n=this.WB.get(h.NB);if(!n){const t=this.yB.gl.createTexture();if(!t)throw new vt("Failed to create texture for font!");n=t,this.WB.set(h.NB,t)}const o=h.ta,a=r.DB.x,l=r.DB.y,u=-t.offsetX,c=t.baseline-t.size.y,d=-t.offsetX+t.size.x,f=t.baseline,g=o.x/a,m=(o.y+t.size.y)/l,y=(o.x+t.size.x)/a,p=o.y/l,S=[g,m,y,m,g,p,g,p,y,m,y,p],b=[u,c,d,c,u,f,u,f,d,c,d,f],v={origin:o,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:b,texCoords:S,packerId:h.NB,texture:n};e.set(t.glyph,v);const x=this.yB.gl;return x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),x.bindTexture(x.TEXTURE_2D,n),x.texImage2D(x.TEXTURE_2D,0,x.LUMINANCE,r.DB.x,r.DB.y,0,x.LUMINANCE,x.UNSIGNED_BYTE,this.yB.KB?r.BB:new Uint8Array(r.BB)),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.bindTexture(x.TEXTURE_2D,null),h.RB?Sg.Resize:Sg.Success}ZB(){this.GB.forEach((t=>{t.forEach(((i,s)=>{const e=this.HB.VB(i.packerId);if(!e)return;const h=i.origin,r=e.DB.x,n=e.DB.y,o=h.x/r,a=(h.y+i.size.y)/n,l=(h.x+i.size.x)/r,u=h.y/n,c=[o,a,l,a,o,u,o,u,l,a,l,u];i.texCoords=c,t.set(s,i)}))}))}}const xg=t=>{if(t instanceof Ns||t instanceof Eu)return t.ai()?"linear-highPrecision":"linear";if(t instanceof Gs){const i={};return t.x instanceof Ts&&(i.x={base:t.x.Qt()}),t.y instanceof Ts&&(i.y={base:t.y.Qt()}),["logarithmic",i]}return"linear"},Mg=t=>(i,s)=>s%2?i:i+t;class _g{constructor(t){this.qB=new Map,this.JB=vi("font"),this.QB=new Map,this.tO=new Set,this.yB=t}$B(){return this.qB.forEach((t=>t.$B())),this.tO.clear(),this}iO(t){this.tO.add(t)}sO(t){this.tO.delete(t)}eO(t,i,s){const e=`${i.family} - ${i.weight} - ${i.style} - ${i.variant}`;let h=this.QB.get(e);h||(h=this.JB(),this.qB.set(h,new vg(this.yB)),this.QB.set(e,h));const r=this.qB.get(h);if(!r)throw new vt("Failed to get font texture!");let n=0,o=0,a=0;const l=t.split(""),u=i.size,c=.7*i.size,d=Math.round(1*i.size);let f=!1;for(let t=0;t<l.length;t+=1){const i=l[t],s=r.YB(i,u);if(s)""!==i.trim()&&(o=Math.max(o,s.baseline),n=Math.min(n,s.baseline-(s.size.y-1))),a+=s.advanceX;else{if(""!==i.trim()){const t=0;o=Math.max(o,t),n=Math.min(n,t-(d-1))}a+=c,f=!0}}const g=((t,i,s)=>{if(0===s||360===s||180===s||s%180==0)return{x:t,y:i};if(90===s||-90===s||(s+90)%180==0)return{x:i,y:t};const e=s*Math.PI/180,h=Math.cos(e),r=Math.sin(e);return{x:Math.abs(t*h)+Math.abs(i*r),y:Math.abs(t*r)+Math.abs(i*h)}})(a,o-n+1,s);return{x:g.x,y:g.y,isEstimate:f}}hO(t,i){const s=`${i.family} - ${i.weight} - ${i.style} - ${i.variant}`;let e=this.QB.get(s);e||(e=this.JB(),this.qB.set(e,new vg(this.yB)),this.QB.set(s,e));const h=this.qB.get(e);if(!h)throw new vt("Failed to get font texture!");let r=0,o=0,a=0;const l=t.split(""),u=new Map;let d=0;const f=i.size;for(let t=0;t<l.length;t+=1){const s=l[t],e=Math.ceil(d);let n=h.YB(s,f);if(!n){const e=this.yB.rO(s,i,this.yB.nO());if(!e)continue;const a=h.XB(e[1],f,e[0]);if(a===Sg.Resize){this.tO.forEach((t=>{t.Yo.i=!0})),t=-1,d=0,o=0,r=0,u.clear();continue}if(a===Sg.Fail)throw new vt("Failed to create glyph");if(n=h.YB(s,f),!n)throw new vt("Failed to get glyph after creation")}if(""!==s.trim()){let t=u.get(n.texture);t||(t={vertices:[],texCoords:[]},u.set(n.texture,t)),t.vertices.push(...n.vertices.map(Mg(e))),t.texCoords.push(...n.texCoords),o=Math.max(o,n.baseline),r=Math.min(r,n.baseline-(n.size.y-1))}d+=n.advanceX}a=d;const g=c(n(0,r),n(a,o)),m=[];return u.forEach(((t,i)=>{m.push({texCoords:new Float32Array(t.texCoords),vertices:new Float32Array(t.vertices),texture:i})})),[m,g]}}class Ag extends Error{constructor(t,i,s){super(`Dynamic shader generation error\n(id: ${i})\n ${s?`when applying feature: ${s.idVertex?`vert: ${s.idVertex}`:""} ${s.idFragment?`frag: ${s.idFragment}`:""}`:""} | ${t}`)}}const wg=(...t)=>{let i="";for(const s of t){if("object"!=typeof s){i+=`${String(s)},`;continue}const t=[{prefix:"",obj:s}];for(;t.length>0;){const{prefix:s,obj:e}=t.shift();i+=`${s}:`;const h=Object.keys(e).sort();for(const s of h){const h=e[s];"object"==typeof h&&h.__proto__===Object.prototype||Array.isArray(h)?t.push({prefix:s,obj:h}):i+=`${s}=${String(h)},`}}}return i},kg={roundUnsigned:{oO:"roundUnsigned",aO:"float roundUnsigned(float number) {\n  return floor(number + 0.5);\n}"},linearStep:{oO:"linearStep",aO:"float linearStep(float step0, float step1, float step) {\n  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);\n}"},decodeUbyteRGBAEncodedFloat:{oO:"decodeUbyteRGBAEncodedFloat",aO:"\n      // Denormalize 8-bit color channels to integers in the range 0 to 255.\n      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n        ivec4 bytes = ivec4(inputFloats * 255.0);\n        return (\n          littleEndian\n          ? bytes.abgr\n          : bytes\n        );\n      }\n      \n      // Break the four bytes down into an array of 32 bits.\n      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n          float acc = float(bytes[channelIndex]);\n          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n            float powerOfTwo = exp2(float(indexInByte));\n            bool bit = acc >= powerOfTwo;\n            bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n            acc = mod(acc, powerOfTwo);\n          }\n        }\n      }\n      \n      // Compute the exponent of the 32-bit float.\n      float getExponent(bool bits[32]) {\n        const int startIndex = 1;\n        const int bitStringLength = 8;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        float acc = 0.0;\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Compute the mantissa of the 32-bit float.\n      float getMantissa(bool bits[32], bool subnormal) {\n        const int startIndex = 9;\n        const int bitStringLength = 23;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        // Leading/implicit/hidden bit convention:\n        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n        float acc = float(!subnormal) * exp2(float(bitStringLength));\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Parse the float from its 32 bits.\n      float bitsToFloat(bool bits[32]) {\n        float signBit = float(bits[0]) * -2.0 + 1.0;\n        float exponent = getExponent(bits);\n        bool subnormal = abs(exponent - 0.0) < 0.01;\n        float mantissa = getMantissa(bits, subnormal);\n        float exponentBias = 127.0;\n        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n      }\n      \n      // Decode a 32-bit float from the RGBA color channels of a texel.\n      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {\n        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);\n        bool bits[32];\n        bytesToBits(rgbaBytes, bits);\n        return bitsToFloat(bits);\n      }\n      "},texelFetchWithFallback:{webgl2:{oO:"texelFetchWithFallback",aO:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{oO:"texelFetchWithFallback",aO:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},texelFetchUnsignedWithFallback:{webgl2:{oO:"texelFetchUnsignedWithFallback",aO:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{oO:"texelFetchUnsignedWithFallback",aO:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},modulus:{oO:"modulus",aO:"int modulus(int a, int b) {\n  return (a)-((a)/(b))*(b);\n}"},computeScreenSpaceWireframe:{oO:"computeScreenSpaceWireframe",aO:"#extension GL_OES_standard_derivatives : enable\nfloat computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n  vec3 dist = fwidth(barycentric);\n  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);\n  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n}"}},Cg={"2D":"\nvoid main(void) {\n    gl_Position = vec4(posWorld, 0.0, 1.0 );\n}\n","3D":"\nuniform mat4 uViewProjectionMatrix;\nvoid main(void) {\n    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);\n}\n"},Tg={FragmentShader:"\nuniform float uIsHighlighted;\nuniform vec4 uHighlightColorOffset;\nuniform float uRenderEffectMask;\nvoid main(void) {\n    float antiAliasFactor = 1.0;\n    vec4 fragColorEnd = colorFragment;\n    if (fragColorEnd.a <= 0.0) { discard; }\n    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));\n    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);\n    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor);\n}\n",Empty:"\nvoid main(void) {\n}\n"};class Fg{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const i=this.modifiers.filter((t=>Ig(t)));for(const s of i)t=s(t);return`${Ci(this.modifiers.filter((t=>Pg(t)))).map((t=>t.aO)).join("\n")}\n${t}`}}const Ig=t=>"function"==typeof t,Pg=t=>t&&"object"==typeof t&&"oO"in t,Dg=(...t)=>i=>{t=t.reverse();for(let s of t)"string"==typeof s&&(s=s.includes("{")||s.endsWith(";")?s:`${s};`,s=s.trim(),i=i.replace("void main(void)",`${s}\nvoid main(void)`));return i},Bg=t=>i=>(t=t.endsWith(";")?t:`${t};`,i.replace(t,"")),Og=(...t)=>i=>{const s=t.filter((t=>!1!==t));for(let t=0;t<s.length;t+=1)s[t]=s[t].endsWith(";")?s[t]:`${s[t]};`,s[t]=s[t].startsWith("\t")?s[t]:`\t${s[t]}`;const e=s.join("\n");return i.replace("void main(void) {\n",`void main(void) {\n${e}\n`)},Lg=(t,...i)=>s=>{for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:`${i[t]};`,i[t]=i[t].startsWith("\t")?i[t]:`\t${i[t]}`;const e=i.join("\n"),h=new RegExp(`(.*${t}.*)`),r=s.replace(h,`${e}\n$1`);return i.forEach((i=>{if(!r.includes(i))throw new Error(`ShaderBefore misusage (not found: \n${i}\nmatch: \n${t}\nresult: \n${r}\n)`)})),r},Rg=(t,...i)=>s=>{const e=i.filter((t=>!1!==t));for(let t=0;t<e.length;t+=1)e[t]=e[t].endsWith(";")?e[t]:`${e[t]};`,e[t]=e[t].startsWith("\t")?e[t]:`\t${e[t]}`;const h=e.join("\n"),r=s.lastIndexOf(t),n=s.substring(r),o=n.indexOf("\n"),a=n.substring(o),l=`${s.substring(0,r+o)}\n${h}${a}`;return e.forEach((i=>{if(!l.includes(i))throw new Error(`ShaderAfter misusage (not found: "${i}", match: "${t}", result: "${l}")`)})),l},Eg=(...t)=>i=>{for(let s of t)if("string"==typeof s){s=s.endsWith(";")?s:`${s};`,s=s.trim(),s=s.startsWith("\t")?s:`\t${s}`;const t=i.lastIndexOf("}");i=`${i.substring(0,t-1)}\n${s}\n}`}return i},zg=(t,i)=>s=>{let e,h;if(t.includes("uniform")||t.includes("attribute")){const i=t.endsWith(";")?t:`${t};`;s=Dg(i)(s),e=t.split(" ")[2].replace(";","")}else e=t;if(i.includes(" ")){const t=i.endsWith(";")?i:`${i};`;s=Dg(t)(s),h=i.split(" ")[2].replace(";","")}else h=i;return Eg(`\t${h} = ${e};`)(s)},Vg=(...t)=>i=>{t=t.reverse();for(const s of t)i=s+i;return i};class Ng{constructor(t,i,s,e,h){if(this.id=t,this.shader=s,this.gl=e,this.info=h,!i||!s)throw new xt(`Could not find ${this.lO()} ${this.uO()} shader source code.`);this.gl.shaderSource(s,i),this.gl.compileShader(s)}get src(){return""}lO(){return this.id.toString()}uO(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class Gg extends Ng{constructor(t,i,s,e){super(t,i,s.createShader(s.VERTEX_SHADER),s,e)}}class Wg extends Ng{constructor(t,i,s,e){super(t,i,s.createShader(s.FRAGMENT_SHADER),s,e)}}class Hg{constructor(t,i,s,e){this.cO=new Map,this.dO=new Map,this.St=s,this.fO=s.createProgram(),this.gO=`${t.lO()} vertex`,this.mO=`${i.lO()} fragment`,s.attachShader(this.fO,t.shader),s.attachShader(this.fO,i.shader),s.bindAttribLocation(this.fO,0,"aPos"),s.linkProgram(this.fO),s.deleteShader(t.shader),s.deleteShader(i.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(i.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=i.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}yO(t){return Ai(0,(()=>wi()))}pO(t){const i=this.SO(t);if(void 0===i)throw this.yO(`Could not get ${t} uniform from ${this.gO} and ${this.mO} shaders.`);return i}SO(t){const i=this.cO.get(t);if(i)return i;const s=this.St.getUniformLocation(this.fO,t);return s?(this.cO.set(t,s),s):void 0}bO(t){const i=this.vO(t);if(void 0===i)throw this.yO(`Could not get ${t} attribute from ${this.gO} and ${this.mO} shaders.`);return i}vO(t){const i=this.dO.get(t);if(i||0===i)return i;const s=this.St.getAttribLocation(this.fO,t);return s>=0?(this.dO.set(t,s),s):void 0}N(){this.St.deleteProgram(this.fO)}}const Ug=(t,i,s)=>()=>{t.xO=i,s&&s()};class $g{constructor(t,i){if(this.MO=0,this._O=0,this.AO=!1,this.xO=!1,this.wO=!1,this.kO=!1,this.CO=!1,this.TO=new Set,this.FO=new Set,this.Ad=i,this.St=t,this.IO=null,this.AO=i instanceof kt.HTMLVideoElement,this.Ad instanceof kt.HTMLImageElement)this.Ad.addEventListener("load",(()=>{this.kO=!0,this.PO()})),this.Ad.addEventListener("error",(()=>{this.CO=!0})),this.Ad.complete&&(this.kO=!0,this.PO());else if(this.Ad instanceof kt.HTMLVideoElement){const t=this;this.Ad.addEventListener("canplay",(function(){t._O=this.videoHeight,t.MO=this.videoWidth,t.kO=!0,t.PO()}),!0),this.Ad.addEventListener("play",Ug(this,!0,(()=>this.PO()))),this.Ad.addEventListener("playing",Ug(this,!0,(()=>this.PO()))),this.Ad.addEventListener("pause",Ug(this,!1)),this.Ad.addEventListener("ended",Ug(this,!1)),this.Ad.readyState>=1&&(this.MO=this.Ad.videoWidth,this._O=this.Ad.videoHeight,this.xO=!this.Ad.paused,this.kO=!0,this.PO())}else this.kO=!0,this.PO()}iO(t){0===this.FO.size&&this.kO&&this.PO(),this.FO.add(t)}sO(t){this.FO.delete(t),0===this.FO.size&&this.unbindResources()}DO(t){this.TO.add(t),this.wO&&(t(),this.BO(t))}BO(t){this.TO.delete(t)}PO(){if(this.CO||this.wO||!this.kO)return;const t=this.St.gl;if(!this.IO&&this.Ad&&t){this.IO=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.IO),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const i=0,s=t.RGBA,e=t.RGBA,h=t.UNSIGNED_BYTE,r=this.Ad,n=this.MO>0?this.MO:r.width,o=this._O>0?this._O:r.height;t.texImage2D(t.TEXTURE_2D,i,s,e,h,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.MO=n,this._O=o,t.bindTexture(t.TEXTURE_2D,null)}this.wO=!0,this.TO&&this.TO.forEach((t=>{t(),this.BO(t)}))}Is(){const t=this.St.gl;if(!this.CO&&this.wO&&this.IO){const i=0,s=t.RGBA,e=t.RGBA,h=t.UNSIGNED_BYTE,r=this.Ad;r&&(t.bindTexture(t.TEXTURE_2D,this.IO),t.texImage2D(t.TEXTURE_2D,i,s,e,h,r))}}OO(){return this.IO}unbindResources(){return this.wO&&(this.IO&&(this.St.jB(this.IO),this.IO=null),this.wO=!1),this}}class jg extends Uh{constructor(t,i,s){super(t.cs,i,s),this.sp=!0,this.Ky={},this.tp=f(Hn),this.ks=t,this.ut=t.ut}LO(){var t;return this.tp.i&&this.tp.S().type!==(null===(t=this.RO)||void 0===t?void 0:t.type)}op(t){return this.sp=t,this}EO(t){return this.Ky=t,this}}const Yg=(t,i)=>[Dg("uniform float uLookupMin","uniform float uLookupMax","uniform sampler2D uLookupTexture","uniform float uLookupTextureHeightPx","uniform vec4 uFallbackColor"),kg.texelFetchWithFallback[i],Lg("colorFragment","vec4 colorFragment = vec4(0.0)",`if (${t} <= -340282346638528859811704183484516925440.0) {\n                colorFragment = uFallbackColor;\n            } else {\n                int texCoordY = int(clamp((${t} - uLookupMin) / (uLookupMax - uLookupMin), 0.0, 1.0) * (uLookupTextureHeightPx - 1.0));\n                colorFragment = texelFetchWithFallback(uLookupTexture, ivec2(0, texCoordY), vec2(1.0, uLookupTextureHeightPx));\n            }`)],Xg=[Dg("uniform sampler2D uMaskTexture"),Dg("varying vec2 vMaskTextureCoord"),Rg("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.r")],Zg=[Dg("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),Rg("colorFragment =","float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb","vec3 diffuseColor = colorFragment.rgb","vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)","colorFragment = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, colorFragment.a)")],Kg=t=>void 0!==t.find((t=>{var i;return null===(i=t.zO)||void 0===i?void 0:i.VO})),qg=t=>void 0!==t.find((t=>{var i;return null===(i=t.zO)||void 0===i?void 0:i.NO})),Jg=t=>void 0!==t.find((t=>{var i;return null===(i=t.zO)||void 0===i?void 0:i.GO})),Qg=(t,i,...s)=>{const e=[],h=i?"vec3":"vec2",{axisWorldTranslation:r,scaling:n,translation:o,offset:a,flipXY:l,flipXZ:u,splitPosAttribute:c,normalSource:d}=t,f=[];if("attribute"===d&&e.push(Dg("attribute vec3 aNormal"),Og("vec3 normal = aNormal")),"linear-highPrecision"!==r)s.forEach((t=>{void 0!==t.attributeNameAxisCoord&&(!0!==c?e.push(Og(`${h} ${t.variableNameAxisCoord} = ${t.attributeNameAxisCoord}`)):e.push(Og(`${h} ${t.variableNameAxisCoord} = ${i?`vec3(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y, ${t.attributeNameAxisCoord}Z)`:`vec2(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y)`}`)))}));else{if(!0===c)throw new Error("splitPosAttribute: true not supported with axisWorldTranslation: linear-highPrecision");s.forEach((t=>{e.push(Og(`${h} ${t.variableNameAxisCoord}_highpart = ${t.attributeNameAxisCoord}_highpart`),Og(`${h} ${t.variableNameAxisCoord}_lowpart = ${t.attributeNameAxisCoord}_lowpart`))}))}if(a&&a.rotation){const t=a.rotation.dataType,i=("uniform"===t?"u":"a")+"Rot";e.push(Dg(`${t} vec2 ${i}`));const s="aInstanceGeo";e.push(Og(`vec2 rotatedGeo = vec2(${s}.x * ${i}.y + ${s}.y * ${i}.x, ${s}.y * ${i}.y - ${s}.x * ${i}.x)`))}if(a&&e.push(Dg(`attribute ${h} aInstanceGeo`)),!0===l){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${i?`vec3(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x, ${t.variableNameAxisCoord}.z)`:`vec2(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`}`)}))}if(!0===u){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = vec3(${t.variableNameAxisCoord}.z, ${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`)}))}if(n){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const t=("attribute"===n.dataType?"a":"u")+"Scaling",h=i?"vec3":"vec2";e.push(Dg(`${n.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} * ${t}`)}))}if(o&&"axis"===o.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const t=("attribute"===o.dataType?"a":"u")+"TranslationAxis",h=i?"vec3":"vec2";e.push(Dg(`${o.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} + ${t}`)}))}if(a&&"axis"===a.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const t=("attribute"===a.dataType?"a":"u")+"OffsetAxis",n=!0===a.symmetric?"float":h;e.push(Dg(`${a.dataType} ${n} ${t}`));const o=a.halved?" * 0.5":"",l=a.rotation?"rotatedGeo":"aInstanceGeo",u="offsetGeometry";f.push(`${h} ${u} = ${t} * ${l}${o} * sign(uScale)`),i&&"gpu-calculate"===d&&f.push(`${h} normal = ${l}`),s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${t.variableNameAxisCoord} + ${u}`)}))}if(void 0===r||"linear"===r)e.push(Dg(`uniform ${h} uDisp`,`uniform ${h} uScale`)),s.forEach((t=>{f.push(`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord} - uDisp) / uScale`)}));else if("linear-highPrecision"===r)e.push(Dg(`uniform ${h} uDisp`,`uniform ${h} uScale`,`uniform ${h} uScaleStart_highpart`,`uniform ${h} uScaleStart_lowpart`)),s.forEach((t=>{f.push(`${h} ${t.variableNameAxisCoord}_hprecision = (${t.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${t.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${h} ${t.variableNameAxisCoord} = ${t.variableNameAxisCoord}_highpart + ${t.variableNameAxisCoord}_lowpart`)}));else if("matrix"===r)e.push(Dg("uniform mat3 uMatrix")),s.forEach((t=>{f.push(`vec2 ${t.variableNameWorldCoord} = (uMatrix * vec3(${t.variableNameAxisCoord}, 1.0)).xy`)}));else if("logarithmic"===r[0]){e.push(Dg(`uniform ${h} uScaleStart`,`uniform ${h} uScaleStartLog`,`uniform ${h} uScaleInterval`,`uniform ${h} uScaleIntervalLog`,`uniform ${h} uViewportStart`,`uniform ${h} uViewportSize`));const t=i?["x","y","z"]:["x","y"],n=[];t.forEach((t=>{const i=r[1][t];if(void 0!==i){const t=i.base;if("e"===t)return;const s=`float cLog${t} = 1.0 / log(${Is(t).toFixed(1)})`;n.includes(s)||n.push(s)}})),e.push(Dg(...n)),s.forEach(((i,s)=>{const e=`${s}`,n=[];t.forEach((t=>{const s=t.toUpperCase(),h=r[1][t];if(void 0===h)f.push(`float posPercent${s}${e} = (${i.variableNameAxisCoord}.${t} - uScaleStart.${t}) / uScaleInterval.${t}`);else{const r=h.base,n="e"===r;f.push(`float posLog${s}${e} = log(${i.variableNameAxisCoord}.${t})${n?"":` * cLog${r}`}`,`float posPercent${s}${e} = (posLog${s}${e} - uScaleStartLog.${t}) / uScaleIntervalLog.${t}`)}n.push(`posPercent${s}${e}`)})),f.push(`${h} ${i.variableNameWorldCoord} = uViewportStart + ${h}(${n.join(", ")}) * uViewportSize`)}))}if(a&&"px"===a.sizeUnit){e.push(Dg("uniform vec2 uRatioPxClip"));const t=("attribute"===a.dataType?"a":"u")+"OffsetPixels",i=!0===a.symmetric?"float":h;e.push(Dg(`${a.dataType} ${i} ${t}`));const r=a.halved?" * 0.5":"",n=`${t} * ${a.rotation?"rotatedGeo":"aInstanceGeo"}${r}`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${n} * uRatioPxClip`)}))}if(a&&"wu"===a.sizeUnit){const t=("attribute"===a.dataType?"a":"u")+"OffsetWU",r=!0===a.symmetric?"float":h;e.push(Dg(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?"rotatedGeo":"aInstanceGeo",l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} normal = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l}`)}))}if(a&&"nwu"===a.sizeUnit){e.push(Dg("uniform float uRatioNwuWu"));const t=("attribute"===a.dataType?"a":"u")+"OffsetNWU",r=!0===a.symmetric?"float":h;e.push(Dg(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?"rotatedGeo":"aInstanceGeo",l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} normal = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l} * uRatioNwuWu`)}))}return t.snapToNearestPixel&&(e.push(Dg("uniform vec2 uViewportSizePx")),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = 2.0 * floor(((${t.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)}))),e.push(Lg("gl_Position =",...f)),e},tm=(t,i,s,e)=>{const h=[],r=t.axisWorldTranslation,n=i?"vec3":"vec2";if("linear"===r)h.push(Rg(s,`${n} ${e} = ${s} * uScale + uDisp`));else if("linear-highPrecision"===r)h.push(Rg(s,`${n} ${e} = ${s} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if("matrix"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("logarithmic"!==r[0])throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const t=[`${n} ${s}_percent = (${s} - uViewportStart) / uViewportSize`];(i?["x","y","z"]:["x","y"]).forEach((i=>{const e=i.toUpperCase(),h=r[1][i];if(void 0===h)t.push(`float pos${e}Back = ${s}_percent.${i} * uScaleInterval.${i} + uScaleStart.${i}`);else{const r=h.base,n="e"===r?"1.0":`cLog${r}`;t.push(`float pos${e}Back = pow(2.71828, (${s}_percent.${i} * uScaleIntervalLog.${i} + uScaleStartLog.${i}) / ${n})`)}})),t.push(`${n} ${e} = ${n}(posXBack, posYBack${i?", posZBack":""})`),h.push(Rg(s,...t))}}return h},im={"2D":{idFeature:"2D",apply:t=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"3D":{idFeature:"3D",zO:{VO:!0},apply:t=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:t=>({idFeature:"PointSize",apply:i=>{const s="uniform"===t?"u":"a";return{idVertex:`SizePrimitive:${wg(t)}`,idFragment:void 0,vertexShaderModifiers:[Dg(`${t} float ${s}PointSize`,"uniform float uDevicePixelRatio"),Eg(`gl_PointSize = ${s}PointSize * uDevicePixelRatio`)]}}}),Color:t=>{const i=t&&t.dataType,s=t&&t.maskTexture;return{idFeature:"Color",zO:{NO:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,GO:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0},apply:(e,h)=>{let r,n=`Color:${wg(t)}`;const o=[],a=[];if("uniform"===i)a.push(Dg("uniform vec4 uColor"),Og("vec4 colorFragment = uColor"),...s?Xg:[]);else if("attribute"===i)r="colorAttribute",o.push(zg("attribute vec4 aColor","varying vec4 vColor")),a.push(Dg("varying vec4 vColor"),Og("vec4 colorFragment = vColor"));else if("texture"===i)r="colorTexCoord",o.push(zg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),a.push(Dg("varying vec2 vTextureCoord"),Dg("uniform sampler2D uColorTexture"),Dg("uniform vec4 uColor"),Og("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {\n                        colorFragment = uColor;\n                    }"));else if(Array.isArray(i)&&"image"===i[0])r="colorTexCoord",o.push(zg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),i[1]===Xn.Tile?a.push(Dg("uniform sampler2D uColorTexture"),Dg("varying vec2 vTextureCoord"),Og("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord);")):a.push(Dg("uniform sampler2D uColorTexture"),Dg("varying vec2 vTextureCoord"),Dg("uniform vec4 uColor"),Og("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord);","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){\n                            colorFragment = uColor;\n                        }"));else if(Array.isArray(i)&&"lookup"===i[0]){const t=i[1];if("value"===t)r="lookup:value",o.push(zg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;r=`lookup:${t}`,o.push(zg(i,"varying float vLookupValue"))}a.push(Dg("varying float vLookupValue"),...Yg("vLookupValue",h))}else if(Array.isArray(i)&&"gradient"===i[0]){n=`Color:${wg(t)}`;const e=i[1],h=e.getColorStops();tt(e)?a.push(Dg("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),Dg(...Rt(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),kg.linearStep,Og("vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, mixVal));`)),"vec4 colorFragment = color"),...s?Xg:[]):et(e)&&a.push(Dg("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),Dg(...Rt(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),kg.linearStep,Og("vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, magnitude))`)),"vec4 colorFragment = color"),...s?Xg:[])}if(!0===s){const t="maskTexture";r=r?`${r} ${t}`:`Color:${t}`,o.push(zg("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return{vertexShaderModifiers:o,fragmentShader:"FragmentShader",fragmentShaderModifiers:a,idVertex:r,idFragment:n}}}},ColorShaded3D:t=>{const{dataType:i,shadingStyle:s,wireframe:e}=t;let h;const r=`ColorShaded3D:${wg(t)}`;return{idFeature:"ColorShaded3D",zO:{NO:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,GO:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0},apply:(t,n)=>{const o=[],a=[];if(o.push("phong"===s&&zg("normal","varying vec3 vNormal"),zg("posWorld","varying vec3 vPosWorld")),"uniform"===i)a.push(Dg("uniform vec4 uColorDiffuse"),Og("vec4 colorFragment = uColorDiffuse"));else if("attribute"===i)h="per-vertex-color",o.push(zg("attribute vec4 aColor","varying vec4 vColor")),a.push(Dg("varying vec4 vColor"),Og("vec4 colorFragment = vColor"));else if(Array.isArray(i)){const t=i[1];if("value"===t)h="lookup:value",o.push(zg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;h=`lookup:${t}`,o.push(zg(i,"varying float vLookupValue"))}a.push(Dg("varying float vLookupValue"),...Yg("vLookupValue",n))}if(e){const t="wireframe";h=h?`${h},${t}`:t,o.push(zg("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),a.push(Dg("varying vec3 vTriangleBary"),Dg("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),kg.computeScreenSpaceWireframe,Rg("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)","colorFragment = mix(colorFragment, uWireframeColor, edge)"))}return"phong"===s&&a.push(...Zg),{idVertex:h,idFragment:r,vertexShaderModifiers:o,fragmentShader:"FragmentShader",fragmentShaderModifiers:a}}}},VertexLocation:t=>({idFeature:"VertexLocation",apply:i=>{const s=[],e=Kg(i),h=e?"vec3":"vec2";if("linear-highPrecision"!==t.axisWorldTranslation)!0!==t.splitPosAttribute?s.push(Dg(`attribute ${h} aPos`)):s.push(Dg("attribute float aPosX"),Dg("attribute float aPosY"),e&&Dg("attribute float aPosZ"));else{if(!0===t.splitPosAttribute)throw new Error("splitPosAttribute: true not supported with axisWorldTranslation: linear-highPrecision");s.push(Dg(`attribute ${h} aPos_highpart`),Dg(`attribute ${h} aPos_lowpart`))}return s.push(...Qg(t,e,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"})),{idVertex:`VertexLocation:${wg(t)}`,idFragment:void 0,vertexShaderModifiers:s}}}),LineInstanced2D:t=>({idFeature:"LineInstanced2D",apply:i=>({idVertex:`LineInstanced2D:${wg(t)}`,idFragment:void 0,vertexShaderModifiers:[Dg("uniform float uThicknessPixels"),Dg("uniform vec2 uRatioPxClip"),"linear-highPrecision"!==t.axisWorldTranslation&&Dg("attribute vec2 aLocationA"),"linear-highPrecision"!==t.axisWorldTranslation&&Dg("attribute vec2 aLocationB"),"linear-highPrecision"===t.axisWorldTranslation&&Dg("attribute vec2 aLocationA_highpart"),"linear-highPrecision"===t.axisWorldTranslation&&Dg("attribute vec2 aLocationB_highpart"),"linear-highPrecision"===t.axisWorldTranslation&&Dg("attribute vec2 aLocationA_lowpart"),"linear-highPrecision"===t.axisWorldTranslation&&Dg("attribute vec2 aLocationB_lowpart"),Dg("attribute vec2 aSegmentPosition"),Dg("attribute float aSegmentSide"),...Qg(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),Rg("worldB = ","vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm ","vec2 posWorld = offset + thicknessDirection * uThicknessPixels * uRatioPxClip"),...Jg(i)?[Bg("attribute float aLookupValue"),Bg("vLookupValue = aLookupValue"),Dg("attribute float aLookupValueA"),Dg("attribute float aLookupValueB"),Eg("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],...qg(i)?tm(t,!1,"posWorld","posAxis"):[]]})}),LineInstanced3D:t=>({idFeature:"LineInstanced3D",apply:i=>({idVertex:`LineInstanced3D:${wg(t)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[Dg("uniform float uOffsetWU"),Dg("attribute vec3 aLocationA"),Dg("attribute vec3 aLocationB"),Dg("attribute float aSegmentPosition"),Dg("attribute float aPerpendHorizontal"),Dg("attribute float aPerpendVertical"),...Qg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},Kg(i),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),Rg("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )","vec3 normal = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis","vec3 posWorld = worldA + aSegmentPosition * directionBasis + normal * uOffsetWU * 0.5"),...qg(i)?tm({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,"posWorld","posAxis"):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:t=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[Dg("attribute vec3 aEdge"),Dg("uniform float uEdgeRoundness"),Rg("posWorld =","vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )","posWorld = posWorld + aEdge * edgeRoundAmount")]})},ColorGrid2D:t=>{const i=t.flipXY,s=t.intensityTextureType,e=t.littleEndian;return{idFeature:"ColorGrid2D",apply:(h,r)=>({idVertex:void 0,idFragment:`ColorGrid2D:${wg(t)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[Dg("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues"),"ubyte"===s&&kg.decodeUbyteRGBAEncodedFloat,"bilinear"===t.interpolation?Og("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${i?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${i?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${i?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${i?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===s?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${e})`),"float intensity01 = "+("float"===s?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${e})`),"float intensity10 = "+("float"===s?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${e})`),"float intensity11 = "+("float"===s?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${e})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${i?"lerpFactors.y":"lerpFactors.x"})`):Og("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",`vec4 sample0 = texture2D(uTileIntensityValues, ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+("float"===s?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${e})`)),...Yg("intensityP",r)]})}},DrawToNormalTexture:t=>{const i=t.flipXZ,s=t.vertexIdSource,e=t.normalTextureType,h=t.heightmapTextureType,r=t.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(n,o)=>{const a=[],l=[];return a.push(Dg("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB","attribute"===s&&"attribute float aVertexID"),void 0!==s&&kg.roundUnsigned,kg.modulus,kg.texelFetchWithFallback[o],"ubyte"===h&&kg.decodeUbyteRGBAEncodedFloat,Og(void 0===s?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`} ,\n                            uTileStartLocationAxisXZ.y + iCell.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell1.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell1.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell2.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell2.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell3.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell3.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))","uint"===e?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),l.push(Dg("uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),Og("uint"===e?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${wg(t)}`,idFragment:`DrawToNormalTexture:${wg(t)}`,vertexShaderModifiers:a,fragmentShaderModifiers:l,fragmentShader:"Empty",hints:["uint"===e&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:t=>{const i=t.fillColor,s=t.interpolation,e=t.flipXZ,h=t.shadingStyle,r=t.wireframe,n=t.instanceIdSource,o=t.normalTextureType,a=t.heightmapTextureType,l=t.intensityTextureType,u=t.littleEndian;return{idFeature:"SurfaceGrid",apply:(c,d)=>{const f=[],g=[];return f.push(Dg("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===n&&"attribute float aInstanceID"),void 0!==n&&kg.roundUnsigned,kg.modulus,kg.texelFetchWithFallback[d],"ubyte"===a&&kg.decodeUbyteRGBAEncodedFloat,Og(void 0===n?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+("float"===a?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${u})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(e?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),f.push(...Qg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"})),"phong"===h&&f.push(zg("posWorld","varying vec3 vPosWorld"),..."uint"===o?[kg.texelFetchUnsignedWithFallback[d],Eg("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[Eg("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],Eg("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),Dg("varying vec3 vNormal",..."uint"===o?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),g.push(Dg("varying vec3 vTriangleBary")),"uniform"===i?g.push(Dg("uniform vec4 uColorDiffuse"),Og("vec4 colorFragment = uColorDiffuse")):Array.isArray(i)&&"lookup"===i[0]?"value"===i[1]?(f.push(zg("posAxis.xz","varying vec2 vVertexLocationAxisXZ")),g.push(Dg("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),"ubyte"===l&&kg.decodeUbyteRGBAEncodedFloat,"bilinear"===s?Og("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${e?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${e?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${e?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${e?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===l?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${u})`),"float intensity01 = "+("float"===l?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${u})`),"float intensity10 = "+("float"===l?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${u})`),"float intensity11 = "+("float"===l?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${u})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${e?"lerpFactors.y":"lerpFactors.x"})`):Og("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${e?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...Yg("intensityP",d))):(f.push(zg(`posAxis.${i[1]}`,"varying float vLookupValue")),g.push(Dg("varying float vLookupValue"),...Yg("vLookupValue",d))):void 0===i&&g.push(Og("vec4 colorFragment = vec4(0.0, 0.0, 0.0, 0.0)")),"phong"===h&&g.push(...Zg),r&&(f.push(Dg("attribute vec3 aTriangleBary"),zg("aTriangleBary","varying vec3 vTriangleBary")),g.push(Dg("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),kg.computeScreenSpaceWireframe,Rg("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",i?"if (edge > 0.0) {\n                                    colorFragment = vec4(mix(colorFragment.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(colorFragment.a, uWireframeColor.a));\n                                }":"if (edge > 0.0) {\n                                    colorFragment = uWireframeColor;\n                                  } else {\n                                      discard;\n                                  }"))),{idVertex:`SurfaceGrid:${wg(t)}`,idFragment:`SurfaceGrid:${wg(t)}`,vertexShaderModifiers:f,fragmentShader:"FragmentShader",fragmentShaderModifiers:g}}}},DebugSurfaceGridNormals:t=>({idFeature:"DebugSurfaceGridNormals",apply:(i,s)=>({idVertex:`DebugSurfaceGridNormals:${wg(t)}`,idFragment:`DebugSurfaceGridNormals:${wg(t)}`,vertexShaderModifiers:[Dg("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===t.instanceIdSource&&"attribute float aInstanceID",..."uint"===t.normalTextureType?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),kg.roundUnsigned,kg.modulus,kg.texelFetchWithFallback[s],"ubyte"===t.heightmapTextureType&&kg.decodeUbyteRGBAEncodedFloat,Og(void 0===t.instanceIdSource?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y01 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y10 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y11 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${t.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",..."uint"===t.normalTextureType?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),..."uint"===t.normalTextureType?[kg.texelFetchUnsignedWithFallback[s]]:[],...Qg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"}),Rg("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025","if (aNormalArrow == 0.0) {\n                        posWorld = posArrowStart;\n                    } else if (aNormalArrow == 1.0) {\n                        posWorld = posArrowEnd;\n                    } else if (aNormalArrow == 2.0) {\n                        posWorld = posArrowLeft;\n                    } else if (aNormalArrow == 3.0) {\n                        posWorld = posArrowRight;\n                    }")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[Eg("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:t=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[Dg("uniform vec3 uCameraLoc"),Rg("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:t=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[Dg("attribute float aSegmentInside"),Dg("varying float vSegmentInside"),Dg("varying float vSegmentSide"),Rg("gl_Position = ","\n                vSegmentInside = aSegmentInside;\n                vSegmentSide = aSegmentSide;\n                ")],fragmentShaderModifiers:[Vg("#extension GL_OES_standard_derivatives : enable"),Dg("uniform float uAALimit"),Dg("varying float vSegmentInside"),Dg("varying float vSegmentSide"),Rg("antiAliasFactor = ","\n                float dist = (uAALimit - vSegmentInside);\n                vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n                float pixelDist = dist / length(ddist);\n                // additional blurring\n                pixelDist *= 0.5;\n\n                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);\n                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){\n                    aa *= 0.5;\n                }\n                antiAliasFactor = aa;\n                ")]})},Glow1D:t=>({idFeature:"Glow1D",apply:()=>{const i=Math.round(t.spreadPx),s=Math.round(t.blurPx),e=i+s,h=t.firstPass,r=[];for(let t=-e;t<=e;t+=1){const i=Math.abs(t);r.push(h?{x:t.toFixed(1),y:"0.0",distPx:i.toFixed(1)}:{x:"0.0",y:t.toFixed(1),distPx:i.toFixed(1)})}return{idVertex:`Glow1D:${wg(t)}`,idFragment:`Glow1D:${wg(t)}`,vertexShaderModifiers:[zg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[Dg("uniform sampler2D uTexture"),Dg("varying vec2 vTextureCoord"),Dg("uniform vec2 uTextureSize"),h&&Dg("uniform vec2 uOffsetPx"),!h&&Dg("uniform sampler2D uTextureFirstGlowPass"),!h&&Dg("uniform vec4 uGlowColor"),Rg("antiAliasFactor =","vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize",...h?[]:["float inverseIntensity =\n                        0.25 * texture2D(uTexture, vTextureCoord).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, -oneTexel.y)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, oneTexel.y)).a","antiAliasFactor *= 1.0 - (inverseIntensity * inverseIntensity)","if (antiAliasFactor <= 0.0) { discard; }"],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...h?["vec2 texCoordOffset = vTextureCoord - uOffsetPx * oneTexel",...r.map(((t,i)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${t.x}, ${t.y})`,`if (distancePx > ${t.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${t.distPx}; }`])).flat(),"vec4 colorFragment = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)"]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...r.map(((t,i)=>[`sample_tx = vTextureCoord + oneTexel * vec2(${t.x}, ${t.y})`,"if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {\n                                            sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);\n                                            horizontal_dist = sample_horizontal.r * 255.0;\n                                          }","if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${t.y} * ${t.y}, 0.5))`])).flat(),`if (distancePx > ${e.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${i.toFixed(1)}) {\n                                        float lerpAmount = (distancePx - ${i.toFixed(1)}) / ${(s+1).toFixed(1)};\n                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));\n                                    } else {\n                                        pixelGlowColor = uGlowColor;\n                                    }`,"vec4 colorFragment = pixelGlowColor"])]}}}),MousePicking:{idFeature:"MousePicking",apply:t=>({idVertex:void 0,idFragment:"MousePicking",fragmentShaderModifiers:[Dg("uniform vec4 uColor"),Og("vec4 colorFragment = uColor"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)","if (antiAliasFactor <= 0.0) { discard; }\ngl_FragColor = fragColorEnd")]})},MousePickingAttribute:{idFeature:"MousePickingAttribute",apply:t=>({idVertex:"MousePickingAttribute",idFragment:"MousePickingAttribute",vertexShaderModifiers:[zg("attribute vec4 aColor","varying vec4 vColor")],fragmentShaderModifiers:[Dg("varying vec4 vColor"),Og("vec4 colorFragment = vColor"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)","if (antiAliasFactor <= 0.0) { discard; }\ngl_FragColor = fragColorEnd")]})},AttributeHighlight:{idFeature:"AttributeHighlight",apply:t=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[zg("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(t,i)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[Dg("attribute vec2 aLengthSoFar"),Dg("varying float vLengthSoFar"),Dg("uniform vec2 uStippleCount"),Eg("\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[Dg("uniform sampler2D uStippleTexture"),Dg("uniform float uStippleScale"),Dg("varying float vLengthSoFar"),"webgl1"===i&&Dg("uniform float uStippleTextureWidthLimiter"),Rg("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(t,i)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[Dg("attribute vec2 aLengthSoFarA"),Dg("attribute vec2 aLengthSoFarB"),Dg("varying float vLengthSoFar"),Dg("uniform vec2 uStippleCount"),Eg("\n                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[Dg("uniform sampler2D uStippleTexture"),Dg("uniform float uStippleScale"),Dg("varying float vLengthSoFar"),"webgl1"===i&&Dg("uniform float uStippleTextureWidthLimiter"),Rg("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},PolarHeatmap:t=>({idFeature:"PolarHeatmap",apply:(i,s)=>{const e="dataType"in t,h="interpolation"in t?t:void 0,r="bilinear"===(null==h?void 0:h.interpolation),n=null==h?void 0:h.intensityTextureType,o=null==h?void 0:h.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${wg(t)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[Dg("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",h&&"uniform sampler2D uTileIntensityValues",e&&"uniform vec4 uColor"),kg.texelFetchWithFallback[s],"ubyte"===n&&kg.decodeUbyteRGBAEncodedFloat,Og("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep","if (iAnnulus < 0.0 || iAnnulus > uAnnuli) { discard; }"),e&&Og("vec4 colorFragment = uColor"),h&&Rg("if (iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",h.flipXY&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",h.flipXY&&"cellStart = ivec2(cellStart.y, cellStart.x)",h.flipXY&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)","vec2 tileDimensions = "+(h.flipXY?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),r&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",r&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",r&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",r&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",r&&"float intensity00 = "+("float"===n?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${o})`),r&&"float intensity01 = "+("float"===n?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${o})`),r&&"float intensity10 = "+("float"===n?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${o})`),r&&"float intensity11 = "+("float"===n?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${o})`),r&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",r&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",r&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",r&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!r&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!r&&"float intensityP = "+("float"===n?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${o})`)),...h?Yg("intensityP",s):[]]}}})},sm=(t,i,s,e)=>{const h=t.nO(),r=Math.round(Math.min(s.spread,10)*h),n=Math.round(Math.min(s.blur,10)*h),o={x:Math.round(s.offset.x*h),y:Math.round(s.offset.y*h)},a=t.WO(),l=t.HO(),u=t.UO(),c=t.$O(),d=t.jO();t.YO("disabled"),t.op(!1),t.XO(!1);const f=i.ZO();((t,i,s)=>{const e=t.gl,h=t.nO();e.bindFramebuffer(e.FRAMEBUFFER,s.frameBuffer),e.bindRenderbuffer(e.RENDERBUFFER,s.depthBuffer),e.bindTexture(e.TEXTURE_2D,s.texture),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.clear(e.DEPTH_BUFFER_BIT);const r=s.sizeDpr;t.KO(0,0,r.x,r.y),i.forEach((i=>{let s;i instanceof jh?s=i.ks.ym():i instanceof jg&&(s=i.ks.kS()),s?t.qO(s.x*h,s.y*h,s.width*h,s.height*h):t.XO(!1),i.mB(2)})),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),t.XO(!1)})(t,e,f);let g=f;const m=r+n+5,y=((t,i,s,e)=>{const h=(t=>{const i=[];for(let s=0;s<t.length;s+=1){let e,h=t[s];do{const t=i.findIndex((t=>Gi(h,t)));e=t>=0?i[t]:void 0,e&&(i.splice(t,1),h=ts(h,e))}while(e);i.push(h)}return i})(i.map((t=>{const i=t instanceof jh||t instanceof jg?t.ks.JO(t):zi;if(ki(i))return zi;const h={min:{x:Math.max(i.min.x-s.left,0),y:Math.max(i.min.y-s.bottom,0)},max:{x:Math.min(i.max.x+s.right,e.x),y:Math.min(i.max.y+s.top,e.y)}};return h.max.x<=h.min.x||h.max.y<=h.min.y?zi:h})).filter((t=>!ki(t)))),r=6*h.length,n=new Float32Array(4*r);let o=0;return h.forEach((t=>{const i=gs(t.min,e),s=gs(t.max,e),h=i,r=s;n[o+0]=i.x,n[o+1]=i.y,n[o+2]=h.x,n[o+3]=h.y,n[o+4]=s.x,n[o+5]=i.y,n[o+6]=r.x,n[o+7]=h.y,n[o+8]=s.x,n[o+9]=s.y,n[o+10]=r.x,n[o+11]=r.y,n[o+12]=s.x,n[o+13]=s.y,n[o+14]=r.x,n[o+15]=r.y,n[o+16]=i.x,n[o+17]=s.y,n[o+18]=h.x,n[o+19]=r.y,n[o+20]=i.x,n[o+21]=i.y,n[o+22]=h.x,n[o+23]=h.y,o+=24})),{vertexBuffer:t.QO(n),vertexCount:r}})(t,e,{left:m+(o.x<0?-o.x:0),top:m+(o.y>0?o.y:0),right:m+(o.x>0?o.x:0),bottom:m+(o.y<0?-o.y:0)},i.tL()),p=i.ZO(f,g),S=t.iL(im["2D"],im.Glow1D({spreadPx:r,blurPx:n,firstPass:!0}),im.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,i,s,e,h,r)=>{const n=t.gl;n.bindFramebuffer(n.FRAMEBUFFER,s.frameBuffer),n.bindRenderbuffer(n.RENDERBUFFER,s.depthBuffer),n.bindTexture(n.TEXTURE_2D,s.texture),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.clear(n.DEPTH_BUFFER_BIT),t.KO(0,0,s.sizeDpr.x,s.sizeDpr.y),t.sL(e,((o,a,l,u)=>(t.iO(e),r&&r(o),t.nL(o("uIsHighlighted"),0).oL(o("uHighlightColorOffset"),C).nL(o("uRenderEffectMask"),0).rL(o("uTexture"),i.texture,0).hL(u("uTextureSize"),[i.sizeDpr.x,i.sizeDpr.y]).hL(o("uScale"),s.uniforms.aL()).hL(o("uDisp"),s.uniforms.lL()).hL(o("uScaling"),[s.size.x,s.size.y]).hL(o("uTranslationAxis"),[0,0]).eL(h.vertexBuffer,void 0,{location:a("aPos"),size:2},{location:a("aTextureCoord"),size:2}).Jm(n.TRIANGLES,h.vertexCount,0),!0))),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindTexture(n.TEXTURE_2D,null)})(t,g,p,S,y,((i,s,e,h)=>(t.hL(i("uOffsetPx"),[o.x,o.y]),!0))),g=p,t.XO(l),t.uL(d);const b=t.iL(im["2D"],im.Glow1D({spreadPx:r,blurPx:n,firstPass:!1}),im.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,i,s,e,h)=>{const r=t.gl,n={x:t.cs.$t().x,y:t.cs.$t().y};t.KO(0,0,n.x*t.nO(),n.y*t.nO());const o=at.d2({scaleXYConstructor:Ns}).K(n).Mi(0,n.x)._i(0,n.y),a=new nm;a.cL(o),t.sL(s,((o,l,u,c)=>(t.iO(s),h&&h(o),t.nL(o("uIsHighlighted"),0).oL(o("uHighlightColorOffset"),C).nL(o("uRenderEffectMask"),0).rL(o("uTexture"),i.texture,0).hL(c("uTextureSize"),[i.sizeDpr.x,i.sizeDpr.y]).hL(o("uScale"),a.aL()).hL(o("uDisp"),a.lL()).hL(o("uScaling"),[n.x,n.y]).hL(o("uTranslationAxis"),[0,0]).eL(e.vertexBuffer,void 0,{location:l("aPos"),size:2},{location:l("aTextureCoord"),size:2}).Jm(r.TRIANGLES,e.vertexCount,0),!0)))})(t,f,b,y,((i,e,h,r)=>(t.rL(i("uTextureFirstGlowPass"),p.texture,1).oL(i("uGlowColor"),s.color),!0))),t.KO(a.x,a.y,a.width,a.height),t.YO(u),t.op(c),t.dL(y.vertexBuffer)};class em{constructor(t){this.fL=[],this.yB=t}gL(t,i){sm(this.yB,this,i,t)}tL(){const t=this.yB.cs.$t();return{x:Math.ceil(t.x),y:Math.ceil(t.y)}}ZO(...t){const i=this.fL,s=this.tL(),e={x:Math.ceil(s.x*this.yB.nO()),y:Math.ceil(s.y*this.yB.nO())},h=this.yB.gl,r=i.find((i=>!t.includes(i)));if(r)return r.sizeDpr.x===e.x&&r.sizeDpr.y===e.y||(r.size=s,r.sizeDpr=e,h.bindTexture(h.TEXTURE_2D,r.texture),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,e.x,e.y,0,h.RGBA,h.UNSIGNED_BYTE,null),h.bindRenderbuffer(h.RENDERBUFFER,r.depthBuffer),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,e.x,e.y),h.bindTexture(h.TEXTURE_2D,null),h.bindRenderbuffer(h.RENDERBUFFER,null),r.scale.K(s).Mi(0,s.x)._i(0,s.y),r.uniforms.cL(r.scale)),r;const n=h.createTexture(),o=this.yB.mL(),a=this.yB.yL();h.bindTexture(h.TEXTURE_2D,n),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,e.x,e.y,0,h.RGBA,h.UNSIGNED_BYTE,null),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),h.bindFramebuffer(h.FRAMEBUFFER,o),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0),h.bindRenderbuffer(h.RENDERBUFFER,a),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,e.x,e.y),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,a),h.bindTexture(h.TEXTURE_2D,null),h.bindFramebuffer(h.FRAMEBUFFER,null),h.bindRenderbuffer(h.RENDERBUFFER,null);const l=at.d2({scaleXYConstructor:Ns}).K(s).Mi(0,s.x)._i(0,s.y),u=new nm;u.cL(l);const c={size:s,sizeDpr:e,texture:n,frameBuffer:o,depthBuffer:a,scale:l,uniforms:u};return i.push(c),c}N(){[this.fL].forEach((t=>{t.forEach((t=>{this.yB.pL(t.depthBuffer),this.yB.SL(t.frameBuffer),this.yB.jB(t.texture)})),t.length=0}))}}class hm{constructor(t,i,s,e,h=!0){this.bL=new gg,this.vL=new Map,this.xL=new Map,this.ML=new Map,this._L=[],this.AL=1,this.IS_MACHINE_LITTLE_ENDIAN=(()=>{const t=new Uint32Array([287454020]),i=new Uint8Array(t.buffer);return 68===i[0]||17!==i[0]&&(kt.console.error("Unidentified machine endianness. Some features might behave unexpectedly."),!0)})(),this.sp=!1,this.hL=(t,[i,s])=>(void 0===t||this.gl.uniform2f(t,i,s),this),this.wL=(t,[i,s])=>(void 0===t||this.gl.uniform2i(t,i,s),this),this.kL=(t,[i,s,e,h])=>(void 0===t||this.gl.uniform4f(t,i,s,e,h),this),this.CL=(t,[i,s,e])=>(void 0===t||this.gl.uniform3f(t,i,s,e),this),this.TL=(t,i)=>(void 0===t||this.gl.uniformMatrix3fv(t,!1,i),this),this.FL=(t,i)=>(void 0===t||this.gl.uniformMatrix4fv(t,!1,i),this),this.oL=(t,i)=>(void 0===t||this.gl.uniform4f(t,i.r,i.g,i.b,i.a),this),this.nL=(t,i)=>(void 0===t||this.gl.uniform1f(t,i),this),this.IL=(t,i)=>(this.gl.uniform1i(t,i),this),this.rL=(t,i,s)=>{if(void 0===t)return this;if(i){const e=this.gl.TEXTURE0+s;return this.gl.activeTexture(e),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(t,s),this}throw new vt("Could not bind a texture.")},this.PL=t=>(((t,i)=>{i===Xn.Tile?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE))})(this.gl,t),this),this.QO=(t,i=!1,s)=>{const e=t.length,h=this.DL(e,s);if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,h),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof Float32Array?t:new Float32Array(t),i?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),h)return h;throw new vt("Could not create vertex buffer")},this.BL=(t,i,s)=>{const e=s||this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t),this.gl.STATIC_DRAW),i&&this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,i instanceof Float32Array?i:new Float32Array(i)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e)return e;throw new vt("Could not create vertex buffer")},this.OL=(t,i,s)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,i*Float32Array.BYTES_PER_ELEMENT,s instanceof Float32Array?s:new Float32Array(s)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.LL=(t,i,s=!1)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,s?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.RL=(t,i)=>{const s=t.length,e=this.DL(s,i);if(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e)return e;throw new vt("Could not create index buffer")},this.EL=t=>{const i=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof Float32Array?t:new Float32Array(t),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),i)return i;throw new vt("Could not create float buffer")},this.zL=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0)),this),this.VL=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(t,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t)),this),this.eL=(t,i,...s)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t);const e=s.length;let h=0;for(let t=0;t<e;t+=1)h+=s[t].size;for(let t=0;t<e;t+=1){const i=s[t].location;void 0!==i&&i>-1&&this.gl.enableVertexAttribArray(i)}let r=0;for(let t=0;t<e;t+=1){const i=s[t];void 0!==i.location&&i.location>-1&&this.gl.vertexAttribPointer(i.location,i.size,this.gl.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),r+=i.size}if(void 0!==i)for(let t=0;t<e;t+=1){const e=s[t].location;void 0!==e&&e>-1&&this.NL(e,i)}return this},this.GL=(...t)=>{const i=t.length;for(let s=0;s<i;s+=1){const i=t[s];0!==i&&i>-1&&this.gl.disableVertexAttribArray(i)}return this},this.WL=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,4,this.gl.FLOAT,!1,0,0)),this),this.HL=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t)),this),this.UL=t=>(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this),this.Jm=(t,i,s=0)=>(i>0&&this.gl.drawArrays(t,s,i),this),this.$L=(t,i=this.gl.TRIANGLES,s=0,e=this.gl.UNSIGNED_SHORT)=>(t>0&&this.gl.drawElements(i,t,e,s),this),this.jL=(t,i,s,e)=>{if(e>0&&(this.gl2&&this.gl2.ctx.drawArraysInstanced(t,i,s,e),this.gl1)){if(!this.gl1.YL.ANGLE_instanced_arrays)return kt.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.YL.ANGLE_instanced_arrays.drawArraysInstancedANGLE(t,i,s,e)}return this},this.XL=(t,i,s,e,h=this.gl.UNSIGNED_SHORT)=>{if(e>0&&(this.gl2&&this.gl2.ctx.drawElementsInstanced(t,i,h,s,e),this.gl1)){if(!this.gl1.YL.ANGLE_instanced_arrays)return kt.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.YL.ANGLE_instanced_arrays.drawElementsInstancedANGLE(t,i,h,s,e)}return this},this.NL=(t,i)=>{if(t>-1&&(this.gl2&&this.gl2.ctx.vertexAttribDivisor(t,i),this.gl1)){if(!this.gl1.YL.ANGLE_instanced_arrays)return kt.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.YL.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(t,i)}return this},this.ZL=(t,i,s,e=0)=>{const h=this.gl.TEXTURE0+e;this.gl.activeTexture(h),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,i),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,s,0);const r=this.HO();r&&this.XO(!1),t(),r&&this.XO(!0),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)},this.KL=(t,i,s)=>{const e=kt.document.createElement("canvas").getContext("2d").createImageData(s.x,s.y),h=e.data;return this.gl.readPixels(t,i,s.x,s.y,this.gl.RGBA,this.gl.UNSIGNED_BYTE,h),e},this.$a=()=>(this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.clear(this.gl.DEPTH_BUFFER_BIT),this),this.qL=t=>(this.gl.clearColor(t.r,t.g,t.b,t.a),this),this.iO=t=>(this.gl.useProgram(t.fO),this),this.JL=!1,this.QL=[],this.cs=t,this.mf=i,this.cs=t,this.gl=s.ctx,this.tR=s.antialias,this.iR=s.lineAntialias,this.sR=new Map,h&&(this.uL(!0),this.eR());const r=[];if(this.YL={WEBGL_lose_context:this.gl.getExtension("WEBGL_lose_context")},Object.keys(this.YL).forEach((t=>{null===this.YL[t]&&r.push(t)})),"webgl2"===s.type)this.gl2={ctx:s.ctx},this.hR=!0;else{const t={ANGLE_instanced_arrays:this.gl.getExtension("ANGLE_instanced_arrays"),EXT_blend_minmax:this.gl.getExtension("EXT_blend_minmax"),OES_element_index_uint:this.gl.getExtension("OES_element_index_uint"),OES_standard_derivatives:this.gl.getExtension("OES_standard_derivatives"),OES_vertex_array_object:this.gl.getExtension("OES_vertex_array_object")};t.OES_standard_derivatives||(this.iR=!1),Object.keys(t).forEach((i=>{null===t[i]&&r.push(i)}));const i={OES_texture_float:this.gl.getExtension("OES_texture_float")};this.hR=!!i.OES_texture_float,this.gl1={ctx:s.ctx,YL:t,optional:i}}this._L=r,this.UB=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.KB=this.rR(),this.iL=(t=>{const i=t.gl,s=new Map,e=new Map,h=new Map,r={totalMs:0,vertexShaders:0,fragmentShaders:0,programs:0},n=(i,s,e=[])=>{const h=[],r=[],n={allAttributeNames:Array.from(i.matchAll(/attribute\s[^\s]*\s(.*);/g)).map((t=>t[1])),allUniformNames:Array.from(i.matchAll(/uniform\s[^\s]*\s(.*);/g)).map((t=>t[1])),allVaryingNames:Array.from(i.matchAll(/varying\s[^\s]*\s(.*);/g)).map((t=>t[1])),removedVariableNames:[]};if(t.gl1){const t=i.match(/#extension.*/g);t&&r.push(...t),i=i.replace(/#extension.*/g,"")}else if(h.push("#version 300 es"),(i=(i=(i=i.replace(/#extension.*/g,"")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).includes("usampler2D")&&h.push("precision highp usampler2D;"),"vertex"===s)i=i.replace(/varying/g,"out");else{i=i.replace(/varying/g,"in");const t=e.find((t=>"fragOutput"===t.type));i=(i=t?`out ${t.fragOutput} fragOutput;\n${i}`:`out vec4 fragOutput;\n${i}`).replace(/gl_FragColor/g,"fragOutput")}return r&&h.push(...r),h.push("precision highp float;"),h.push("precision highp int;"),{source:i=`${h.join("\n")}\n${i}`,info:n}};return(...o)=>{const a=t.gl2?"webgl2":"webgl1";let l,u,c,d,f,g,m,y,p;try{const t=kt.performance.now();l=o.filter((t=>!1!==t&&void 0!==t)),u=((t,i)=>{const s=t.map((s=>s.apply(t,i))),e=s.map((t=>t.idVertex)).filter((t=>void 0!==t)).sort().join(" "),h=s.map((t=>t.idFragment)).filter((t=>void 0!==t)).sort().join(" "),r=`vert: ${e} frag: ${h}`;let n,o=!1,a=!1;const l=[];let u;const c=[],d=[];if(s.forEach((t=>{if(t.defaultVertexShader&&(o||(n=t.defaultVertexShader)),t.vertexShader){if(n&&o&&n!==t.vertexShader)throw new Ag(`Conflicting vertex shader templates ${n} vs ${t.vertexShader}`,r,t);n=t.vertexShader,o=!0}if(t.vertexShaderModifiers)for(const i of t.vertexShaderModifiers)void 0!==i&&!1!==i&&l.push(i);if(t.defaultFragmentShader&&(a||(u=t.defaultFragmentShader)),t.fragmentShader){if(u&&a&&u!==t.fragmentShader)throw new Ag(`Conflicting fragment shader templates ${u} vs ${t.fragmentShader}`,r,t);u=t.fragmentShader,a=!0}if(t.fragmentShaderModifiers)for(const i of t.fragmentShaderModifiers)void 0!==i&&!1!==i&&c.push(i);t.hints&&t.hints.forEach((t=>{t&&d.push(t)}))})),!n)throw new Ag("No vertex shader template defined",r);if(!u)throw new Ag("Fragment shader not defined",r);return{id:r,vertexShader:{id:e,template:n,modifiers:l},fragmentShader:{id:h,template:u,modifiers:c},hints:d}})(l,a);const S=h.get(u.id);if(c="new",S)return c="existing",g=S.vertexShaderSrc,m=S.fragmentShaderSrc,S;const b=u.vertexShader.id;let v=s.get(b);if(v)g=v.src,d="existing";else{d="new";const t=new Fg(u.vertexShader.modifiers).build(Cg[u.vertexShader.template]),{source:e,info:h}=n(t,"vertex");g=e,y=h,v=new Gg(b,e,i,h),s.set(b,v),r.vertexShaders+=1}const x=u.fragmentShader;let M;const _=x.id;if(M=e.get(_),M)m=M.src,f="existing";else{f="new";const t=Tg[x.template],s=new Fg([...x.modifiers]).build(t),{source:h,info:o}=n(s,"fragment",u.hints);m=h,p=o,M=new Wg(_,h,i,o),e.set(_,M),r.fragmentShaders+=1}const A=new Hg(v,M,i,u);return h.set(u.id,A),r.programs+=1,r.totalMs+=kt.performance.now()-t,A}catch(t){throw Ai(0,(()=>{const t="Unexpected LightningChart JS rendering error.\nThis can mean a bug in the library, or that it is simply used in unsupported manner (passing wrong type to method, using disposed component, etc).";return kt.alert(t),new Error(t)}))}}})(this),this.nR=St(this.gl),this.oR=new am(this),this.rO=(t=>{const i=kt.document.createElement("canvas"),s=i.getContext("2d",{willReadFrequently:!0});if(!s)throw new vt("Failed to get Text canvas rendering context");return s.fillStyle="#fff",(e,h,r)=>{const o=`${h.style} ${h.weight} ${h.size*r}px ${h.family}`;s.font=o,s.textBaseline="alphabetic",s.textAlign="left";const a=s.measureText(e);if(0===a.width)return;const l=void 0!==a.actualBoundingBoxLeft&&void 0!==a.actualBoundingBoxRight?Math.ceil(a.actualBoundingBoxLeft+a.actualBoundingBoxRight):Math.ceil(a.width),u=a.width,c=Math.round(h.size*r),d=void 0!==a.actualBoundingBoxLeft?a.actualBoundingBoxLeft:0;i.width=l>0?l:u,i.height=2*c,s.font=o,s.textBaseline="alphabetic",s.textAlign="left",t?(s.clearRect(0,0,i.width,i.height),s.fillStyle="#fff"):(s.fillStyle="rgba(255,255,255,0)",s.fillRect(0,0,i.width,i.height),s.fillStyle="#000"),s.fillText(e,d,c);const f=s.getImageData(0,0,i.width,i.height);let g=0,m=0;const y=f.width;for(let t=0;t<f.height;t+=1){for(let i=0;i<y;i+=1)if(0!==f.data[t*y*4+4*i+3]){g=t;break}if(0!==g)break}for(let t=f.height-1;t>=0;t-=1){for(let i=0;i<y;i+=1)if(0!==f.data[t*y*4+4*i+3]){m=t;break}if(0!==m)break}const p=s.canvas.height/2-g,S=m-g+1,b=y,v=new Uint8ClampedArray(b*S*1);for(let t=0;t<S;t+=1)for(let i=0;i<b;i+=1)v[1*t*b+1*i+0]=f.data[(t+g)*b*4+4*i+3];return[v,{advance:u,offsetX:d,baseline:p,glyph:e,size:n(b,S)}]}})(e),this.aR=new em(this),this.lR=this.QO([0,0,1,0,1,1,0,1]),this.uR=this.QO([0,0,1,0,0,1,0,1,1,0,1,1]),this.cR=this.QO([])}YO(t){return t!==this.dR&&(this.dR=t,"disabled"===t?this.gl.disable(this.gl.CULL_FACE):"cull-back"===t?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK)):"cull-front"===t&&(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT))),this}UO(){return this.dR||"disabled"}op(t){return t!==this.sp&&(this.sp=t,t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST)),this}$O(){return this.sp}fR(t){return this.AL=t,this}nO(){return this.AL}DL(t,i){let s;if(i){const e=this.sR.get(i);e&&e.size>=t&&e.size-t<1e6?s=i:this.dL(i)}return s||(s=this.gl.createBuffer(),this.sR.set(s,{size:t})),s}gR(t,i=this.gl.RGBA,s=!1,e,h,r=!1,n=this.gl.UNSIGNED_BYTE,o=i){const a=this.gl.createTexture();if(!a)throw new vt("Couldn't reserve Texture.");return this.gl.bindTexture(this.gl.TEXTURE_2D,a),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),t&&null===h?this.gl.texImage2D(this.gl.TEXTURE_2D,0,o,i,n,t):h&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,o,h.x,h.y,0,i,n,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,e?this.gl.NEAREST:this.gl.LINEAR),s?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,e?this.gl.NEAREST:this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),a}jB(t){this.gl.deleteTexture(t)}mL(){const t=this.gl.createFramebuffer();if(!t)throw new vt("Couldn't reserve Framebuffer.");return t}SL(t){this.gl.deleteFramebuffer(t)}yL(){const t=this.gl.createRenderbuffer();if(!t)throw new vt("Couldn't reserve Render buffer.");return t}pL(t){this.gl.deleteRenderbuffer(t)}KO(t,i,s,e){return this.mR&&t===this.mR.x&&i===this.mR.y&&s===this.mR.width&&e===this.mR.height||(this.gl.viewport(t,i,s,e),this.mR={x:t,y:i,width:s,height:e}),this}WO(){return this.mR||{x:0,y:0,width:0,height:0}}qO(t,i,s,e){return this.XO(!0),this.gl.scissor(Math.max(t,0),Math.max(i,0),Math.max(s,0),Math.max(e,0)),this}XO(t){return t===this.yR||(t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this.yR=t),this}uL(t){return t!==this.JL&&(this.JL=t,t&&this.gl.enable(this.gl.BLEND),t||this.gl.disable(this.gl.BLEND)),this}jO(){return this.JL}eR(t,i,s,e){return t?(void 0!==t&&void 0!==i&&(void 0!==s&&void 0!==e?this.gl.blendFuncSeparate(t,i,s,e):this.gl.blendFunc(t,i)),this):(this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this)}HO(){return void 0!==this.yR&&this.yR}sL(t,i){const s=new lm(this,t),e=i(s.uniform,s.attribute,s,s.uniformOptional);s.finish(e)}dL(t){this.gl.deleteBuffer(t),this.sR.delete(t)}pR(t,i,s){this.hL(t.uniform("uCenter"),i.center).hL(t.uniform("uDistance"),i.distance).kL(t.uniform("uBounds"),i.bounds).nL(t.uniform("uAspect"),i.aspectRatio);const e=s.getColorStops();if(e.length<2)throw new Error("Minimum two color stops required");for(let i=0;i<e.length;i+=1)this.oL(t.uniform(`color_${i}`),e[i].color).nL(t.uniform(`stop_${i}`),e[i].offset);return this}SR(t,i,s){this.hL(t.uniform("uStartPoint"),i.startPoint).hL(t.uniform("uEndPoint"),i.endPoint).kL(t.uniform("uBounds"),i.bounds);const e=s.getColorStops();if(e.length<2)throw new Error("Minimum two color stops required");for(let i=0;i<e.length;i+=1)this.oL(t.uniform(`color_${i}`),e[i].color).nL(t.uniform(`stop_${i}`),e[i].offset);return this}Ph(t){const i=this.vL.get(t);if(!i){const i=new _g(this);return this.vL.set(t,i),i}return i}bR(t){const i=this.xL.get(t);if(!i){const i=new $g(this,t);return this.vR(t,i),i}return i}vR(t,i){this.xL.set(t,i)}rR(){const t=this.gl,i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,1,1,0,t.ALPHA,t.UNSIGNED_BYTE,new Uint8ClampedArray([0]));const s=0===t.getError();return s||!1!==this.mf.Bn&&kt.console.info("LightningChart JS - Uint8ClampedArray is not supported as texture data. The above WebGL error/warning is from the feature detection. There is nothing to worry about."),t.deleteTexture(i),s}xR(t,i,s,e){if(s)this.eL(i,e,{location:t.attribute("aPos_highpart"),size:2},{location:t.attribute("aPos_lowpart"),size:2});else{const s=t.attribute("aPos");this.zL(s,i),void 0!==e&&this.NL(s,e)}return this}MR(){this.YL.WEBGL_lose_context&&this.YL.WEBGL_lose_context.loseContext()}_R(t){if(this.AR&&this.AR.bufferIdsCount>=t)return this.AR.buffer;this.AR&&(this.dL(this.AR.buffer),this.AR=void 0);const i=t,s=new Float32Array(i);for(let t=0;t<i;t+=1)s[t]=t;const e=this.QO(s);return this.AR={buffer:e,bufferIdsCount:i},e}wR(){return this.gl2?void 0:"attribute"}kR(t,i){if("attribute"===this.wR()){const s=this._R(i);this.eL(s,void 0,{location:t.attribute("aVertexID"),size:1})}return this}CR(){return this.gl2?void 0:"attribute"}TR(t,i){if("attribute"===this.CR()){const s=this._R(i);this.eL(s,1,{location:t.attribute("aInstanceID"),size:1})}return this}FR(t,i,s,e,h,r,n,o,a){const l=t.createBuffer();return this.QL.push(l),t.bindFramebuffer(t.FRAMEBUFFER,i),t.bindBuffer(t.PIXEL_PACK_BUFFER,l),t.bufferData(t.PIXEL_PACK_BUFFER,a.byteLength,t.STREAM_READ),t.readPixels(s,e,h,r,n,o,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),rm(t,t.PIXEL_PACK_BUFFER,l,0,a).then((()=>a)).catch((t=>{throw t})).finally((()=>{t.deleteBuffer(l),this.QL.splice(this.QL.indexOf(l),1)}))}IR(t,i,s,e,h,r,n,o){const a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,t),a.readPixels(i,s,e,h,r,n,o),a.bindFramebuffer(a.FRAMEBUFFER,null)}PR(t){const i=this.ML.get(t);if(!i){const i=this.gl.createTexture();if(!i)throw new vt("Couldn't reserve Texture.");this.gl.bindTexture(this.gl.TEXTURE_2D,i);const e=[];let h=255;for(let i=0;i<t.length;i+=1){for(let s=0;s<t[i];s+=1)e.push(h);h=255===h?0:255}const r=e.length;if(!this.gl2&&0!=((s=e.length)&s-1)){const t=(t=>{t-=1;for(let i=1;i<32;i<<=1)t|=t>>1;return t+1})(e.length);for(let i=e.length;i<t;i+=1)e[i]=0}this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.pixelStorei(this.gl.PACK_ALIGNMENT,1),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,e.length,1,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,new Uint8Array(e)),this.gl.bindTexture(this.gl.TEXTURE_2D,null);const n={DR:i,BR:r,lw:e.length};return this.ML.set(t,n),n}var s;return i}OR(t,i,s,e){const{uniform:h}=t;return this.nL(h("uLookupMin"),i.min).nL(h("uLookupMax"),i.max).nL(h("uLookupTextureHeightPx"),s.textureHeight).rL(h("uLookupTexture"),s.texture,e).oL(h("uFallbackColor"),i.getFallbackColor()),this}}const rm=async(t,i,s,e,h,r,n)=>{const o=t.fenceSync(t.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),((t,i,s)=>{const e=void 0!==s.flags?s.flags:0,h=void 0!==s.retryTimeout?s.retryTimeout:10;return new Promise(((s,r)=>{const n=()=>{const o=t.clientWaitSync(i,e,0);return o===t.WAIT_FAILED?r(new Error(`WebGL Sync WAIT_FAILED ${t.getError()}`)):o!==t.TIMEOUT_EXPIRED?s(void 0):void kt.setTimeout(n,h)};kt.setTimeout(n,0)}))})(t,o,{retryTimeout:10}).then((()=>(t.deleteSync(o),t.bindBuffer(i,s),t.getBufferSubData(i,e,h,r,n),t.bindBuffer(i,null),h))).catch((t=>{throw t}))};class nm{cL(t){if(t instanceof Ns||t instanceof Eu){const i=t.si();this.LR=i.x.scaling,this.RR=-i.x.displacement,this.ER=i.y.scaling,this.zR=-i.y.displacement,this.VR=i.x.highPrecisionOffset,this.NR=i.x.highPrecisionOffset-Math.fround(i.x.highPrecisionOffset),this.GR=i.y.highPrecisionOffset,this.WR=i.y.highPrecisionOffset-Math.fround(i.y.highPrecisionOffset)}else t instanceof Gs&&(this.MixedScaleXY=t.si());return this}lL(){return[this.RR,this.zR]}aL(){return[this.LR,this.ER]}HR(){return[this.VR,this.GR]}UR(){return[this.NR,this.WR]}}class om{constructor(){this.LR=0,this.ER=0,this.$R=0,this.RR=0,this.zR=0,this.jR=0}YR(t){return this.LR=t.it(),this.RR=t.getInnerStart()+.5*this.LR*t.st(),this}XR(t){return this.ER=t.it(),this.zR=t.getInnerStart()+.5*this.ER*t.st(),this}ZR(t){return this.$R=t.it(),this.jR=t.getInnerStart()+.5*this.$R*t.st(),this}aL(){return[this.LR,this.ER,this.$R]}lL(){return[this.RR,this.zR,this.jR]}KR(t,i,s,e,h){const r=n(2*(t-s.x)/(s.width-s.x)-1,2*(i-s.y)/(s.height-s.y)-1),o=dg.multiply(e,[r.x,r.y,h,1]);return l(o[0],o[1],o[2])}}class am{constructor(t){this.yB=t}mB(t,i,s,e,h,r=0){const n=this.yB,o=void 0===e;if(!(e=e||n.mL()))throw new vt("Could not bind a framebuffer.");const a=n.WO(),l=n.jO();n.uL(!1),n.ZL((()=>{n.KO(0,0,s.x,s.y),t()}),e,i,r),o&&n.SL(e),this.yB.qL(h),this.yB.KO(a.x,a.y,a.width,a.height),n.uL(l)}}class lm{constructor(t,i){this.qR=[],this.JR=[],this.uniform=t=>{const i=this.shader.pO(t);return this.JR.push({name:t,optional:!1}),i},this.uniformOptional=t=>{const i=this.shader.SO(t);return this.JR.push({name:t,optional:!0}),i},this.attribute=t=>{const i=this.shader.bO(t);return this.qR.push({name:t,location:i}),i},this.glUtils=t,this.shader=i}finish(t){for(const t of this.qR)this.glUtils.GL(t.location),this.glUtils.NL(t.location,0)}}class um extends jh{constructor(t,i,s,e,h){super(t,i,s,e),this.QR=new Map,this.tE=t,this.iE=i,this.yB=t.sE(),this.eE=h,this.iE=i}hE(t){return!1}$B(){return this}mB(t){if(!this.eE||0!==t||0===this.QR.size)return this;const i=Array.from(this.QR.values()).map((t=>t.rE.filter((t=>t.nE)).map((t=>t.ss)).flat().filter((t=>void 0!==t)).filter((t=>t.getVisible())))).flat();if(0===i.length)return this;const s=this.eE;return this.yB.aR.gL(i,s),this}Is(){return this}wt(){return 0}At(){return 0}Ct(){return 0}kt(){return 0}hl(){return 0}rl(){return 0}rs(t,i){const s={rE:[]},e=(t,i)=>{const e={ss:t||[],nE:void 0===i||i};s.rE.push(e);const h={gs:t=>(e.ss=t,h),bs:t=>(e.nE=t,h),xs:()=>e.nE};return h},h={};Object.keys(i).forEach((t=>{const s=i[t],r=s.shapes||[],n=void 0===s.themeEffectEnabled||s.themeEffectEnabled,o=e(r,n);h[t]=o}));const r={xg:e,...h};this.QR.set(t,s);const n=t.onDispose((()=>{this.QR.delete(t),t.offDispose(n)}));return r}}function cm(t,i,s,e,h,r){let n=i.x.ot(t.max.x),o=i.x.ot(t.min.x),a=i.y.ot(t.max.y),l=i.y.ot(t.min.y),u=n-o,c=a-l;if(u<1){const t=(o+n)/2;o=t-.5,n=t+.5,u=1}if(c<1){const t=(l+a)/2;l=t-.5,a=t+.5,c=1}const d=u/c,f=u*s.x,g=c*s.y,m=u-f,y=c-g,p=f>m?[m,f]:[f,m],S=g>y?[y,g]:[g,y];let b,v,x=1,M=1;switch(e){default:case q.closestSide:if(b=p[0]/u,v=S[0]/c,h===K.circle){const t=Math.min(b*d,v);x=t,M=t}else x=b*d,M=v;break;case q.farthestSide:if(b=p[1]/u,v=S[1]/c,h===K.circle){const t=Math.max(b*d,v);x=t,M=t}else x=b*d,M=v;break;case q.closestCorner:if(v=S[0]/c,h===K.circle){b=p[0]/u*d;const t=Math.sqrt(b*b+v*v);x=t,M=t}else{b=p[0]/u;const t=Math.sqrt(b*b+v*v);x=t*d,M=t}break;case q.farthestCorner:if(v=S[1]/c,h===K.circle){b=p[1]/u*d;const t=Math.sqrt(b*b+v*v);x=t,M=t}else{b=p[1]/u;const t=Math.sqrt(b*b+v*v);x=t*d,M=t}}return{bounds:[o*r,l*r,u*r,c*r],center:[s.x*d,s.y],distance:[Math.max(x,1e-4),Math.max(M,1e-4)],aspectRatio:d}}function dm(t,i,s,e){const h=i.x.ot(t.max.x),r=i.x.ot(t.min.x),o=i.y.ot(t.max.y),a=i.y.ot(t.min.y),l=h-r,u=o-a,c=Math.abs(l*Math.sin(s))+Math.abs(u*Math.cos(s)),d=n(l/2-Math.sin(s)*(c/2),u/2-Math.cos(s)*(c/2)),f=n(l/2+Math.sin(s)*(c/2),u/2+Math.cos(s)*(c/2));return{bounds:[r*e,a*e,l*e,u*e],startPoint:[d.x*e,d.y*e],endPoint:[f.x*e,f.y*e]}}const fm=(t,i,s)=>((t,i,s,e)=>{const h=[];let r=0;const o=us(i,s/2);let a,l,u,c,d=t[t.length-1],f=0;for(let s=0;s<t.length;s+=1){a=t[s],l=s===t.length-1?t[0]:t[s+1],s>0&&(d=t[s-1]),Ct(a,d)&&(d=cs(a,os(us(ds(l,a),-1)))),Ct(a,l)&&(l=cs(a,os(us(ds(d,a),-1))));const e=gs(d,i),g=gs(a,i),m=gs(l,i),y=os(ds(g,e)),p=os(ds(m,g)),S=cs(y,p),b=n(-S.y,S.x),v=n(-y.y,y.x),x=1/ys(b,v),M=ls(b),_=os(ds(y,p)),A=Math.sign(ys(b,_))||1,w=fs(b,us(o,x)),k=fs(b,us(o,-x));if(M<1||x===1/0){let t={x:0,y:0},i={x:0,y:0},s={x:0,y:0},e={x:0,y:0};const u=n(-p.y,p.x),c=Math.sign(ys(y,b))||A,g=fs(v,us(o,c)),m=fs(u,us(o,c));1===A?(t=g,i=k,s=m,e=k):(t=w,i=g,s=w,e=m);const S=4*Yi(d,a),M=4*Yi(a,l);(x>S||x>M)&&(1===A?(t=g,i=m,s=m,e=g):(t=m,i=g,s=g,e=m));const _=cs(a,t),C=cs(a,i),T=cs(a,s),F=cs(a,e);h[r]=_,r+=1,h[r]=C,r+=1,h[r]=T,r+=1,h[r]=F,r+=1,f=4}else{const t=cs(a,w),i=cs(a,k);h[r]=t,r+=1,h[r]=i,r+=1,f=2}c=u,u=t[s]}return h[r]=h[0],r+=1,h[r]=h[1],r+=1,[h,f,[c,u]]})(t,i,s)[0];class gm extends ar{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.cO=new nm,this.oE=zi,this.aE=zi,this.tE=t,this.iE=i,this.lE=r,this.uE=n,this.yB=t.sE()}cE(t,i){let s=0,e=Array(0),h=0;if(void 0!==i){const h=t.length,r=Array(h+i.length);let n=0,o=0;for(;n<h;)r[o]=t[n],r[o+1]=i[n],o+=2,n+=1;e=r,s=this.yB.gl.TRIANGLE_STRIP}else e=t,s=this.yB.gl.TRIANGLE_FAN;const r=ni(e,this.ut.ai());return h=e.length,[e,this.yB.QO(r),h,s]}dE(t,i,s,e){let h=Array(0);if(void 0===i)h=t;else{let s=0,e=0;const r=t.length;for(s=0,e=r,h=Array(r+i.length-2),i.reverse();s<r;)h[s]=t[s],h[e]=i[s],e+=1,s+=1}if(1===s||-1===s)return[ni(h,this.ut.ai()),h.length];const r=fm(h,e,s);return[ni(r,this.ut.ai()),r.length]}Is(){const t=this.No(),i=this.po.S();if(this.Go()){const s=Math.abs(this.fi.S()-this.kl.S());this.cO.cL(this.ut);const e=this.ut.Ai()||t,h=this.ut.ki(),r=this.Cl.S(),o=this.Tl.S(),[a,l]=hc(this.Xo.S(),this.kl.S(),this.fi.S(),this.Cl.S(),this.Tl.S(),this.Il.S()),u=this.Fl.S(),d=u>0?hc(this.Xo.S(),this.kl.S(),this.fi.S(),this.Cl.S()*u/100,this.Tl.S()*u/100,l)[0]:[this.Xo.S()],f=a.length-1;if(2===f){const t=(a[f-1].x+a[1].x)/2,i=(a[f-1].y+a[1].y)/2;this.Pl=n(t,i)}else{const t=Math.floor(f/2);this.Pl=n(a[t].x,a[t].y)}this.Dl=a[1];const g=a.length-1;this.Bl=a[g],this.Fl.S()&&(a.shift(),d.shift());let m=!1;(this.Xo.i||this.kl.i||this.fi.i||this.Cl.i||this.Tl.i||this.Fl.i||this.Il.i||e)&&(this.aE=c(n(this.fa().x-r,this.fa().y-o),n(this.fa().x+r,this.fa().y+o)),m=!0,this.Xo.i=!1,this.kl.i=!1,this.fi.i=!1,this.Cl.i=!1,this.Tl.i=!1,this.Fl.i=!1,this.Il.i=!1);const y=this.zo();(m||y)&&this.ve!==R&&(this.Fl.S()?(this.fE&&this.yB.dL(this.fE),[this.gE,this.fE,this.mE,this.yE]=this.cE(a,d)):(this.fE&&this.yB.dL(this.fE),[this.gE,this.fE,this.mE,this.yE]=this.cE(a,void 0)),tt(this.ve)?this.pE=cm(this.aE,this.ut,this.ve.getPosition(),this.ve.getExtent(),this.ve.getShape(),this.yB.nO()):et(this.ve)?this.SE=dm(this.aE,this.ut,this.ve.getAngle(!0),this.yB.nO()):(this.pE=void 0,this.SE=void 0));const p=G(this.ve)&&this.ve,S=et(this.ve)&&this.ve,b=tt(this.ve)&&this.ve,v=p||S||b;y&&(this.bE=v?this.yB.iL(im["2D"],im.Color({dataType:tt(this.ve)||et(this.ve)?["gradient",this.ve]:"uniform"}),im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0})):void 0,this.Wo(this.ve));const x=this.xe;if(ee(x)&&(m||this.$o(x.getThickness())||e)){this.Fl.S()?360===s?(a.pop(),d.pop(),[this.vE,this.xE]=this.dE(a,void 0,x.getThickness(),h),this.ME&&this.vE?this.yB.LL(this.ME,this.vE,!0):!this.ME&&this.vE?this.ME=this.yB.QO(this.vE,!0):this.ME&&!this.vE&&(this.yB.dL(this.ME),this.ME=void 0),[this._E,this.AE]=this.dE(d,void 0,x.getThickness(),h),this.wE&&this._E?this.yB.LL(this.wE,this._E,!0):!this.wE&&this._E?this.wE=this.yB.QO(this._E,!0):this.wE&&!this._E&&(this.yB.dL(this.wE),this.wE=void 0)):([this.vE,this.xE]=this.dE(a,d,x.getThickness(),h),this.ME&&this.vE?this.yB.LL(this.ME,this.vE,!0):!this.ME&&this.vE?this.ME=this.yB.QO(this.vE,!0):this.ME&&!this.vE&&(this.yB.dL(this.ME),this.ME=void 0),this._E&&(this.wE&&this.yB.dL(this.wE),this.wE=void 0,this.AE=0)):(360===s&&(a.shift(),a.pop()),[this.vE,this.xE]=this.dE(a,void 0,x.getThickness(),h),this.ME&&this.vE?this.yB.LL(this.ME,this.vE,!0):!this.ME&&this.vE?this.ME=this.yB.QO(this.vE,!0):this.ME&&!this.vE&&(this.yB.dL(this.ME),this.ME=void 0));const t=x.getFillStyle();tt(t)?this.kE=cm(this.aE,this.ut,t.getPosition(),t.getExtent(),t.getShape(),this.yB.nO()):et(t)?this.CE=dm(this.aE,this.ut,t.getAngle(!0),this.yB.nO()):(this.kE=void 0,this.CE=void 0),this.TE=t===R?void 0:this.yB.iL(im["2D"],im.Color({dataType:tt(t)||et(t)?["gradient",t]:"uniform"}),im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0})),this.jo(x)}if(m){let t=1,i=1;ee(x)&&(t=x.getThickness()*h.x,i=x.getThickness()*h.y),this.oE=c(n(this.aE.min.x-t,this.aE.min.y-i),n(this.aE.max.x+t,this.aE.max.y+i))}this.FE=i&&v?this.FE||this.yB.iL(im["2D"],im.MousePicking,im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0})):void 0,this.IE=i&&this.xe!==rt?this.IE||this.yB.iL(im["2D"],im.MousePicking,im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0})):void 0}return this}mB(t){if(this.Go()){const i=1===t?this.FE:this.bE,s=this.ve,e=this.fE;i&&e&&this.yB.iO(i).sL(i,((i,h,r,n)=>{if(this.yB.hL(i("uScale"),this.cO.aL()).hL(i("uDisp"),this.cO.lL()).hL(n("uScaleStart_highpart"),this.cO.HR()).hL(n("uScaleStart_lowpart"),this.cO.UR()).xR(r,e,this.ut.ai(),void 0).nL(i("uIsHighlighted"),1===t||2===t?0:this.xo).oL(i("uHighlightColorOffset"),this.wo).nL(i("uRenderEffectMask"),2===t?1:0),1===t)this.yB.oL(i("uColor"),this.uE);else if(G(s))this.yB.oL(i("uColor"),s.getColor());else if(tt(s)){if(!this.pE)return!1;this.yB.pR(r,this.pE,s)}else if(et(s)){if(!this.SE)return!1;this.yB.SR(r,this.SE,s)}return this.yB.Jm(this.yE,this.mE),!0}));const h=this.xe;ee(h)&&(void 0!==this.ME&&this.PE(t,this.ME,this.xE,h),void 0!==this.wE&&this.PE(t,this.wE,this.AE,h))}return this}PE(t,i,s,e){const h=1===t?this.IE:this.TE,r=e.getFillStyle();h&&this.yB.iO(h).sL(h,((h,n,o,a)=>{if(this.yB.hL(h("uScale"),this.cO.aL()).hL(h("uDisp"),this.cO.lL()).xR(o,i,this.ut.ai(),void 0).nL(h("uIsHighlighted"),1===t||2===t?0:this.xo).oL(h("uHighlightColorOffset"),this.wo).nL(h("uRenderEffectMask"),2===t?1:0),1===t)this.yB.oL(h("uColor"),this.uE);else if(G(r))this.yB.oL(h("uColor"),r.getColor());else if(tt(r)){if(!this.kE)return!1;this.yB.pR(o,this.kE,r)}else if(et(r)){if(!this.CE)return!1;this.yB.SR(o,this.CE,r)}const l=e.getThickness(),u=-1===l||1===l;return this.yB.Jm(u?this.yB.gl.LINE_LOOP:this.yB.gl.TRIANGLE_STRIP,s),!0}))}hE(t){return this.lE===t&&{}}$B(){return this.DE&&(this.yB.dL(this.DE),this.DE=void 0),this.BE&&(this.yB.dL(this.BE),this.BE=void 0),this.fE&&(this.yB.dL(this.fE),this.fE=void 0),this.ME&&(this.yB.dL(this.ME),this.ME=void 0),this.wE&&(this.yB.dL(this.wE),this.wE=void 0),this.bE=void 0,this.TE=void 0,this.FE=void 0,this.IE=void 0,this}wt(){return this.aE.max.x}At(){return this.aE.min.x}Ct(){return this.aE.max.y}kt(){return this.aE.min.y}hl(){return Di(this.xe)}rl(){return Di(this.xe)}}class mm{constructor(){this.first=0,this.second=1,this.third=2,this.fourth=3,this.fifth=4,this.sixth=5}OE(t){return this.first=t,this.second=t+1,this.third=t+2,this.fourth=t+3,this.fifth=t+4,this.sixth=t+5,t+=6,this}LE(){return this.first=this.second,this.second=this.third,this.third=this.fourth,this.fourth=this.fifth,this.fifth=this.sixth,this.sixth+=1,this}RE(){return this.first=this.third,this.second=this.fourth,this.third=this.fifth,this.fourth=this.sixth,this.fifth=this.fourth+1,this.sixth=this.fifth+1,this}EE(t){const i=t.buffer;let{position:s}=t;return i[s]=this.first,i[s+1]=this.second,i[s+2]=this.third,s+=3,t.position=s,t.next&&this.LE(),this}zE(t){const i=t.buffer;let{position:s}=t;return i[s]=this.first,i[s+1]=this.third,i[s+2]=this.second,i[s+3]=this.third,i[s+4]=this.fourth,i[s+5]=this.second,s+=6,t.position=s,t.next&&this.RE(),this}VE(t,i){i.next=!0,6*t>=i.buffer.length&&(i.buffer=Array(6*t));for(let s=0;s<t;s+=1)this.zE(i);return this}NE(){return[this.first,this.second,this.third,this.fourth,this.fifth,this.sixth]}}const ym=((t=0)=>(new mm).OE(t))(),pm=(t,i,s,e,h,r,n,o,a,l)=>(void 0===o&&void 0===n||ym.LE(),r.push(t,i),h.push(ym.first,ym.second,ym.third),o=void 0,n=void 0,h.push(ym.third,ym.fourth,ym.second),a=ym.third,ym.RE(),l&&r.push(s,e),[n,o,a]),Sm=(t,i,s,e,h,r,n,o,a,l,u)=>{void 0===a&&void 0===o||ym.LE(),n.push(t,i),h.push(ym.first,ym.second,ym.third);const c=As(t,s,i,e);return a=void 0,void 0!==c&&(void 0===a&&(a=c),n.push(a),r.push(ym.third,ym.fourth,ym.fifth),l=ym.fourth),ym.RE(),u&&n.push(s,e),[o,a,l]},bm=(t,i,s,e,h,r,n,o,a,l)=>(void 0===n&&void 0===r||ym.LE(),h.push(t,i),e.push(ym.first,ym.second,ym.third),r=s,n=void 0,o=ym.third,l?h.push(s):a=!0,[r,n,o,a]),vm=(t,i,s,e,h,r,n,o,a,l,u)=>(0!==r.length?(void 0===o&&void 0===n||ym.LE(),ym.LE()):a>0&&(ym.LE(),u>0&&(u-=1)),r.push(t),h.push(ym.first,ym.second,ym.third),a=ym.second,n=t,o=void 0,l&&r.push(s,e),[n,o,a,u]),xm=(t,i=0)=>{ym.OE(i);const[s,e]=t,h=s.length,r=[],n=[],o=[];let a,l,u=i,c=0,d=s[c],f=e[c],g=s[c],m=e[c],y=!1,p=u>0?g.y!==m.y?2:1:0;if(h>1)for(;c<h-1;){g=d,m=f,c+=1,d=s[c],f=e[c];const t=c===h-1;g.y>m.y?d.y>f.y?[a,l,u]=pm(g,m,d,f,r,o,a,l,u,t):d.y<f.y?[a,l,u]=Sm(g,m,d,f,r,n,o,a,l,u,t):[a,l,u,y]=bm(g,m,d,r,o,a,l,u,y,t):g.y<m.y?d.y<f.y?[a,l,u]=pm(g,m,d,f,n,o,a,l,u,t):d.y>f.y?[a,l,u]=Sm(g,m,d,f,n,r,o,a,l,u,t):[a,l,u,y]=bm(g,m,d,n,o,a,l,u,y,t):d.y===f.y?(a=g,y&&(o.push(g),y=!1,ym.LE()),0===o.length&&u>0&&p>0&&(p-=1)):d.y>f.y?[a,l,u,p]=vm(g,0,d,f,r,o,a,l,u,t,p):[a,l,u,p]=vm(g,0,d,f,n,o,a,l,u,t,p)}return[o,new Uint16Array(r),new Uint16Array(n),u,p]};class Mm extends or{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.cO=new nm,this.GE=0,this.wa=Array(),this.WE=0,this.HE=new Uint16Array(0),this.UE=new Uint16Array(0),this.tE=t,this.iE=i,this.lE=r,this.uE=n,this.yB=t.sE()}Is(){const t=this.No(),i=this.po.S(),s=this.Ra;if(this.Go()){this.cO.cL(this.ut);const e=this.ut instanceof Gs==0,h=e?this.ut.ki():void 0,r=this.pl(),n=this.ut.Ai()||t,o=s||this.al.i||n&&"disabled"!==r.type;if(o){if(this.GE=0,this.HE=new Uint16Array(0),this.UE=new Uint16Array(0),this.wa.length=0,this.WE=0,this.ll>1){const[t,i,s,n]=xm([e?r.packager(this.nl,h,.5):this.nl,e?r.packager(this.ol,h,.5):this.ol]);this.GE=n,this.HE=i,this.UE=s,this.wa=t,this.WE=t.length}this.al.i=!1}if(this.cl&&this.Da[0].length>1){const[t,i]=this.Da,s=t.length,[n,o,a,l,u]=xm([e?r.packager(t,h,.5):t,e?r.packager(i,h,.5):i],this.GE);this.GE=l;const c=n.length;for(let t=u;t<c;t+=1)this.wa[this.WE]=n[t],this.WE+=1;this.HE=ws(this.HE,o),this.UE=ws(this.UE,a);for(let e=u>0||this.ll>0?1:u;e<s;e+=1)this.nl[this.ll]=t[e],this.ol[this.ll]=i[e],this.ll+=1;this.ul=!0,this.cl=!1,this.Da=[]}const a=this.ve,l=this.Vo!==a,u=G(a)&&a,c=tt(a)&&a,d=et(a)&&a,f=j(a)&&["x","y"].includes(a.getLookUpProperty())&&a,g=u||c||d||f,m=this.dl,y=this.Al!==m,p=G(m)&&m,S=tt(m)&&m,b=et(m)&&m,v=j(m)&&["x","y"].includes(m.getLookUpProperty())&&m,x=p||S||b||v;if((l||t)&&(this.$E=g?this.yB.iL(im["2D"],im.Color({dataType:d?["gradient",d]:c?["gradient",c]:f?["lookup",f.getLookUpProperty()]:"uniform"}),im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0})):void 0,f?this.jE=this.tE.YE(f.lut,this.jE):this.jE&&(this.tE.XE(this.jE),this.jE=void 0)),c?this.pE=cm(this.Fo(),this.ut,c.getPosition(),c.getExtent(),c.getShape(),this.yB.nO()):d?this.SE=dm(this.Fo(),this.ut,d.getAngle(!0),this.yB.nO()):(this.pE=void 0,this.SE=void 0),(y||t)&&(this.ZE=x?this.yB.iL(im["2D"],im.Color({dataType:b?["gradient",b]:S?["gradient",S]:v?["lookup",v.getLookUpProperty()]:"uniform"}),im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0})):void 0,v?this.KE=this.tE.YE(v.lut,this.KE):this.KE&&(this.tE.XE(this.KE),this.KE=void 0)),S?this.qE=cm(this.Fo(),this.ut,S.getPosition(),S.getExtent(),S.getShape(),this.yB.nO()):b?this.JE=dm(this.Fo(),this.ut,b.getAngle(!0),this.yB.nO()):(this.qE=void 0,this.JE=void 0),(t||this.ul||o)&&this.ul||o){const t=this.wa,i=ni(t,this.ut.ai());this.QE=this.yB.QO(i,!1,this.QE),g&&(this.tz=this.yB.RL(this.HE,this.tz),this.iz=this.HE.length),x&&(this.sz=this.yB.RL(this.UE,this.sz),this.ez=this.UE.length),this.ul=!1}this.FE=i&&(x||g)?this.FE||this.yB.iL(im["2D"],im.MousePicking,im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0})):void 0,this.Wo(this.ve),this.wl(this.dl),this.Ra=!1}return this}mB(t){const i=this.ve,s=this.dl,e=1===t?this.FE:this.ZE;if(e&&this.QE&&this.sz){const i=this.QE,h=this.sz;this.yB.iO(e).sL(e,((e,r,n,o)=>{if(this.yB.xR(n,i,this.ut.ai(),void 0).UL(h).nL(e("uIsHighlighted"),1===t||2===t?0:this.xo).oL(e("uHighlightColorOffset"),this.wo).nL(e("uRenderEffectMask"),2===t?1:0),this.ut instanceof Ns||this.ut instanceof Eu?this.yB.hL(e("uScale"),this.cO.aL()).hL(e("uDisp"),this.cO.lL()).hL(o("uScaleStart_highpart"),this.cO.HR()).hL(o("uScaleStart_lowpart"),this.cO.UR()):this.ut instanceof Gs&&this.yB.hL(o("uScaleStart"),this.cO.MixedScaleXY.uScaleStart).hL(o("uScaleStartLog"),this.cO.MixedScaleXY.uScaleStartLog).hL(o("uScaleInterval"),this.cO.MixedScaleXY.uScaleInterval).hL(o("uScaleIntervalLog"),this.cO.MixedScaleXY.uScaleIntervalLog).hL(e("uViewportStart"),this.cO.MixedScaleXY.uViewportStart).hL(e("uViewportSize"),this.cO.MixedScaleXY.uViewportSize),1===t)this.yB.oL(e("uColor"),this.uE);else if(G(s))this.yB.oL(e("uColor"),s.getColor());else if(tt(s)){if(!this.qE)return!1;this.yB.pR(n,this.qE,s)}else if(et(s)){if(!this.JE)return!1;this.yB.SR(n,this.JE,s)}else j(s)&&this.KE&&this.yB.OR(n,s.lut,this.KE,0);return this.yB.$L(this.ez),!0}))}const h=1===t?this.FE:this.$E;if(h&&this.QE&&this.tz){const s=this.QE,e=this.tz;this.yB.iO(h).sL(h,((h,r,n,o)=>{if(this.yB.xR(n,s,this.ut.ai(),void 0).UL(e).nL(h("uIsHighlighted"),1===t||2===t?0:this.xo).oL(h("uHighlightColorOffset"),this.wo).nL(h("uRenderEffectMask"),2===t?1:0),this.ut instanceof Ns||this.ut instanceof Eu?this.yB.hL(h("uScale"),this.cO.aL()).hL(h("uDisp"),this.cO.lL()).hL(o("uScaleStart_highpart"),this.cO.HR()).hL(o("uScaleStart_lowpart"),this.cO.UR()):this.ut instanceof Gs&&this.yB.hL(o("uScaleStart"),this.cO.MixedScaleXY.uScaleStart).hL(o("uScaleStartLog"),this.cO.MixedScaleXY.uScaleStartLog).hL(o("uScaleInterval"),this.cO.MixedScaleXY.uScaleInterval).hL(o("uScaleIntervalLog"),this.cO.MixedScaleXY.uScaleIntervalLog).hL(h("uViewportStart"),this.cO.MixedScaleXY.uViewportStart).hL(h("uViewportSize"),this.cO.MixedScaleXY.uViewportSize),1===t)this.yB.oL(h("uColor"),this.uE);else if(G(i))this.yB.oL(h("uColor"),i.getColor());else if(tt(i)){if(!this.pE)return!1;this.yB.pR(n,this.pE,i)}else if(et(i)){if(!this.SE)return!1;this.yB.SR(n,this.SE,i)}else j(i)&&this.jE&&this.yB.OR(n,i.lut,this.jE,0);return this.yB.$L(this.iz),!0}))}return this}hE(t){return this.lE===t&&{}}wt(){return this.Ia.max.x}At(){return this.Ia.min.x}Ct(){return this.Ia.max.y}kt(){return this.Ia.min.y}hl(){return 0}rl(){return 0}Qv(t){this.Ya()>0&&this.Is();const[i,s]=this.Va(),e=i.length>2&&i[1].x<i[0].x,h=Eh(i,t,Lh.NearestX,this.fl,this.ml,this.ut,this.cs.ut,this.Ia,"x",e);if(void 0===h)return;const r=[i[h],s[h]];return Number.isNaN(r[0].y)||Number.isNaN(r[1].y)?void 0:r}Iw(t){this.Ya()>0&&this.Is();const[i,s]=this.Va(),e=i.length;if(0===e)return;const h=this.fl?1:0,r=e-(this.ml?2:1),n=i.length>2&&i[1].x<i[0].x,o=Wh(i,ut(t,this.cs.ut,this.ut),"x",n,h,r);if(!o)return;const a=[Ki(i[o.a],i[o.b],o.lerpAmount),Ki(s[o.a],s[o.b],o.lerpAmount)];return Number.isNaN(a[0].y)||Number.isNaN(a[1].y)?void 0:a}dispose(){return super.dispose(),this.sz&&(this.yB.dL(this.sz),this.sz=void 0),this.tz&&(this.yB.dL(this.tz),this.tz=void 0),this.QE&&(this.yB.dL(this.QE),this.QE=void 0),this.jE&&(this.tE.XE(this.jE),this.jE=void 0),this.KE&&(this.tE.XE(this.KE),this.KE=void 0),this}$B(){return this.dispose(),this}}class _m extends fg{constructor(t,i){super(t),this.hz=i;const{vertices:s,indices:e,indicesCount:h,drawMode:r}=this.rz();this.nz=t.QO(s),this.oz=t.RL(e),this.az=h,this.lz=r}iO(t,i){return this.yB.eL(this.nz,0,{location:t.attribute("aSegmentPosition"),size:2},{location:t.attribute("aSegmentSide"),size:1},{location:i?t.attribute("aSegmentInside"):void 0,size:1}),this.yB.UL(this.oz),this}Jm(t,i,s){return this.yB.XL(void 0!==i?i:this.lz,this.az,s||0,t,this.yB.gl.UNSIGNED_BYTE),this}rz(){const t=[];[1,0].forEach((i=>{const s=1===i?.5*Math.PI:1.5*Math.PI;for(let e=0;e<=this.hz;e+=1){const h=s-e*Math.PI/this.hz;t.push(.5*Math.cos(h),.5*Math.sin(h),i,0)}})),t.push(0,0,1,1),t.push(0,0,0,1);const i=t.length/4,s=[];for(let t=0;t<this.hz;t+=1)s.push(t,t+1,i-2),s.push(t+i/2-1,t+i/2,i-1);return s.push(0,i-2,i-1),s.push(i-1,i-2,i/2-1),s.push(0,i-3,i-1),s.push(i/2-2,i-2,i/2-1),{vertices:new Float32Array(t),indices:new Uint8Array(s),indicesCount:s.length,verticesCount:i,drawMode:this.yB.gl.TRIANGLES}}AB(){this.yB.dL(this.nz),this.yB.dL(this.oz)}}const Am=(t,i)=>((t,i)=>{let s=t.bL.vB.get(i);return s||(s=new _m(t,i),t.bL.vB.set(i,s),s)})(t,i>=50?8:i>=20?6:i>=7?4:i>=4?3:1===i?1:2),wm={uz:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aLocationA_highpart"),s=n("aLocationA_lowpart"),e=n("aLocationB_highpart"),a=n("aLocationB_lowpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.NL(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),i.NL(s,1),o.enableVertexAttribArray(s),o.vertexAttribPointer(e,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.NL(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(a,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h+2)*Float32Array.BYTES_PER_ELEMENT),i.NL(a,1),o.enableVertexAttribArray(a)}else{const t=n("aLocationA"),s=n("aLocationB");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.NL(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.NL(s,1),o.enableVertexAttribArray(s)}},cz:(t,i,s,e,h,r,n)=>{const o=t.gl;o.bindBuffer(o.ARRAY_BUFFER,s),o.vertexAttribPointer(e,r,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.NL(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(h,r,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),t.NL(h,1),o.enableVertexAttribArray(h)},dz:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aLocationA_highpart"),s=n("aLocationA_lowpart"),e=n("aLocationB_highpart"),a=n("aLocationB_lowpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.NL(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),i.NL(s,1),o.enableVertexAttribArray(s),o.vertexAttribPointer(e,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.NL(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(a,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h+2)*Float32Array.BYTES_PER_ELEMENT),i.NL(a,1),o.enableVertexAttribArray(a)}else{const t=n("aLocationA"),s=n("aLocationB");o.vertexAttribPointer(t,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.NL(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.NL(s,1),o.enableVertexAttribArray(s)}},fz:(t,i,s,e,h,r,n)=>{const o=t.gl;o.bindBuffer(o.ARRAY_BUFFER,s),o.vertexAttribPointer(e,r,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.NL(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(h,r,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),t.NL(h,1),o.enableVertexAttribArray(h)},mB:(t,i,s,e,h,r,n)=>{const o=t.sE(),{uniform:a,uniformOptional:l}=s,u=1/t.wn.On,c=(h?Math.max(r,u):Math.max(r,0))+1;o.nL(a("uThicknessPixels"),c).nL(l("uAALimit"),1-(c-1)/c).hL(a("uRatioPxClip"),[2/t.$t().x,2/t.$t().y]),i.iO(s,e).Jm(n)}},km={uz:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aPos_highpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t);const i=n("aPos_lowpart");o.vertexAttribPointer(i,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(i)}else{const t=n("aPos");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t)}},cz:(t,i,s,e,h,r)=>{const n=t.gl;n.bindBuffer(n.ARRAY_BUFFER,s),n.vertexAttribPointer(e,h,n.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),n.enableVertexAttribArray(e)},dz:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),!t){const t=n("aPos");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t)}},gz:(t,i)=>{const s=t.sE();s.Jm(s.gl.LINE_STRIP,i,0)},mz:(t,i)=>{const s=t.sE();s.Jm(s.gl.LINES,2*i,0)}};class Cm extends yr{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.cO=new nm,this.Ia=zi,this.tE=t,this.iE=i,this.lE=r,this.uE=n,this.yB=t.sE(),this.yz=this.yB.iR}Is(){const t=this.Ho(),i=this.Xl,s=ee(i)&&i,e=io(i)&&i,h=s||e,r=h&&h.getFillStyle(),o=G(r)&&r,a=et(r)&&r,l=tt(r)&&r,u=j(r)&&r,d=o||a||l||u&&["x","y"].includes(u.getLookUpProperty())&&u,f=this.gi(),g=this.di(),m=this.po.S(),y=this.po.i,p=i.O();if(e&&this.ut instanceof Gs)return kt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;if(this.cO.cL(this.ut),this.Ql&&(this.pz=this.yB.QO(ni([f,g],this.ut.ai()),!1,this.pz),this.Ia=c(n(f.x,f.y),n(g.x,g.y))),t||y){const t=this.Go()&&h&&d&&p>0,i=a?["gradient",a]:l?["gradient",l]:u?["lookup",u.getLookUpProperty()]:"uniform";this.Sz=t?{type:"triangulated",shader:this.yB.iL(im["2D"],im.Color({dataType:i}),im.LineInstanced2D({axisWorldTranslation:xg(this.ut),normalSource:void 0}),this.yz?im.AliasedEdge:void 0,e&&im.StippleTextureInstanced),mousePickingShader:m?this.yB.iL(im["2D"],im.MousePicking,im.LineInstanced2D({axisWorldTranslation:xg(this.ut),normalSource:void 0}),e&&im.StippleTextureInstanced):void 0,geometry:Am(this.yB,p),thickness:p,lineStyleSolid:s,lineStyleDashed:e,fillStyleSolid:o,fillStyleLinearGradient:a,fillStyleRadialGradient:l,fillStylePaletted:u}:void 0,u?this.bz=this.tE.YE(u.lut,this.bz):this.bz&&(this.tE.XE(this.bz),this.bz=void 0)}if(tt(r)?this.kE=cm(Xh(this.Ia,{x:this.hl(),y:this.rl()},this.ut),this.ut,r.getPosition(),r.getExtent(),r.getShape(),this.yB.nO()):et(r)?this.CE=dm(Xh(this.Ia,{x:this.hl(),y:this.rl()},this.ut),this.ut,r.getAngle(!0),this.yB.nO()):(this.kE=void 0,this.CE=void 0),e){if(t||this.Ql){const t=[0,0,Math.abs(g.x-f.x),Math.abs(g.y-f.y)];this.vz=this.yB.QO(t,!1,this.vz)}this.xz=this.yB.PR(e.getPattern())}else this.vz&&(this.yB.dL(this.vz),this.vz=void 0),this.xz=void 0;return this.Jl(i),this.Ql=!1,this.po.i=!1,this}mB(t){var i,s;const e=this.pz;if(!e)return this;const h=this.Sz;if(!h)return this;const{fillStyleSolid:r,fillStyleLinearGradient:n,fillStyleRadialGradient:o,fillStylePaletted:a,lineStyleDashed:l,thickness:u}=h,c=1===t?null===(i=this.Sz)||void 0===i?void 0:i.mousePickingShader:null===(s=this.Sz)||void 0===s?void 0:s.shader;return c?(this.yB.iO(c).sL(c,((i,s,c,d)=>{if(this.yB.nL(i("uIsHighlighted"),1===t||2===t?0:this.xo).oL(i("uHighlightColorOffset"),this.wo).nL(i("uRenderEffectMask"),2===t?1:0),this.ut instanceof Ns||this.ut instanceof Eu?this.yB.hL(i("uScale"),this.cO.aL()).hL(i("uDisp"),this.cO.lL()).hL(d("uScaleStart_highpart"),this.cO.HR()).hL(d("uScaleStart_lowpart"),this.cO.UR()):this.ut instanceof Gs&&this.yB.hL(d("uScaleStart"),this.cO.MixedScaleXY.uScaleStart).hL(d("uScaleStartLog"),this.cO.MixedScaleXY.uScaleStartLog).hL(d("uScaleInterval"),this.cO.MixedScaleXY.uScaleInterval).hL(d("uScaleIntervalLog"),this.cO.MixedScaleXY.uScaleIntervalLog).hL(i("uViewportStart"),this.cO.MixedScaleXY.uViewportStart).hL(i("uViewportSize"),this.cO.MixedScaleXY.uViewportSize),1===t)this.yB.oL(i("uColor"),this.uE);else if(r)this.yB.oL(i("uColor"),r.getColor());else if(o){if(!this.kE)return!1;this.yB.pR(c,this.kE,o)}else if(n){if(!this.CE)return!1;this.yB.SR(c,this.CE,n)}else if(a){if(!this.bz)return!1;this.yB.OR(c,a.lut,this.bz,0)}if(l){if(!this.vz||!this.xz)return!1;wm.cz(this.yB,c,this.vz,s("aLengthSoFarA"),s("aLengthSoFarB"),2,0),this.yB.hL(i("uStippleCount"),[this.cs.$t().x/this.xz.lw,this.cs.$t().y/this.xz.lw]).nL(d("uStippleTextureWidthLimiter"),this.xz.BR/this.xz.lw).nL(i("uStippleScale"),l.getPatternScale()).rL(i("uStippleTexture"),this.xz.DR,1)}return wm.uz(this.ut.ai(),this.yB,e,c,this.ut.ai()?4:2,0),wm.mB(this.tE,h.geometry,c,this.yz&&1!==t,1===t,u,1),!0})),this):this}hE(t){return this.lE===t&&{}}dispose(){return super.dispose(),this.bz&&(this.tE.XE(this.bz),this.bz=void 0),this.Sz=void 0,this.pz&&(this.yB.dL(this.pz),this.pz=void 0),this.vz&&(this.yB.dL(this.vz),this.vz=void 0),this.xz=void 0,this}$B(){return this}wt(){return this.Ia.max.x}At(){return this.Ia.min.x}Ct(){return this.Ia.max.y}kt(){return this.Ia.min.y}hl(){return Di(this.Xl)}rl(){return Di(this.Xl)}}class Tm extends pr{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Mz=[],this._z=!1,this.Az=!1,this.wz=!1,this.kz=!1,this.cO=new nm,this.Ia=zi,this.tE=t,this.iE=i,this.Cz=r,this.yB=t.sE(),this.yz=this.yB.iR,this.Tz=t.wn.Rn}Tr(){const t=this.Cz(),i={Ss:t=>this.Fz(i,t),ds:t=>this.Iz(i,t),Dg:(t,s)=>this.Pz(i,t,s),oL:t=>this.Dz(i,t),mi:{x:0,y:0},fi:{x:0,y:0},xo:0,Bz:void 0,lE:t.id,uE:t.color};return this.Mz.push(i),i}$a(){var t;return this.Mz.length=0,this._z=!0,this.Di&&this.dn&&(null===(t=this.cs.un)||void 0===t?void 0:t.entity)===this&&this.dn(this,void 0,this.cs.un.collectionMember),this}Fz(t,i){if(i&&!this.Mz.includes(t))this.Mz.push(t);else if(!i){const i=this.Mz.indexOf(t);this.Mz.splice(i,1)}return this.wz=!0,t}Iz(t,i){return t.xo=i,this.Az=!0,t}Pz(t,i,s){return t.mi=i,t.fi=s,this._z=!0,t}Dz(t,i){return t.Bz=i,this.kz=!0,t}Is(){const t=this.po.S(),i=this.po.i,s=this.Ho(),e=this.Xl,h=this.Mz,r=this.Az,n=this._z,o=this.wz,a=this.kz,l=ee(e)&&e,u=io(e)&&e,c=l||u,d=c&&c.getFillStyle(),f=G(d)&&d,g=H(d)&&d,m=tt(d)&&d,y=et(d)&&d,p=f||g||y||m,S=e.O(),b=u?"triangulated":e.getThickness()<0?"primitive":"triangulated";if(u&&this.ut instanceof Gs)return kt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;this.cO.cL(this.ut);const v=n||o;if(v){const t=[];for(let i=0;i<h.length;i+=1){const s=h[i];t.push(s.mi),t.push(s.fi)}this.pz=this.yB.QO(ni(t,this.ut.ai()),!1,this.pz),this.Ia=Ji(t)}if(s||i){const i=f?"uniform":g?"attribute":y?["gradient",y]:m?["gradient",m]:void 0,s=h.length>0&&c&&p&&S>0&&i;this.Sz=s?"triangulated"===b?{type:"triangulated",shader:this.yB.iL(im["2D"],im.Color({dataType:i}),im.LineInstanced2D({axisWorldTranslation:xg(this.ut),normalSource:void 0,snapToNearestPixel:this.Tz}),this.yz?im.AliasedEdge:void 0,u&&im.StippleTextureInstanced,im.AttributeHighlight),mousePicking:t?{shader:this.yB.iL(im["2D"],im.MousePickingAttribute,im.LineInstanced2D({axisWorldTranslation:xg(this.ut),normalSource:void 0,snapToNearestPixel:this.Tz}),u&&im.StippleTextureInstanced,im.AttributeHighlight)}:void 0,geometry:Am(this.yB,S),thickness:S,lineStyleSolid:l,lineStyleDashed:u,fillStyleSolid:f,fillStyleIndividual:g,fillStyleLinearGradient:y,fillStyleRadialGradient:m}:{type:"primitive",shader:this.yB.iL(im["2D"],im.Color({dataType:i}),im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0,snapToNearestPixel:this.Tz}),im.AttributeHighlight),mousePicking:t?{shader:this.yB.iL(im["2D"],im.MousePickingAttribute,im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0,snapToNearestPixel:this.Tz}),im.AttributeHighlight)}:void 0,lineStyleSolid:l,lineStyleDashed:u,fillStyleSolid:f,fillStyleIndividual:g,fillStyleLinearGradient:y,fillStyleRadialGradient:m}:void 0}if(u){if(s||v){const t=new Float32Array(4*h.length);let i=0;for(let s=0;s<h.length;s+=1){const e=h[s].mi,r=h[s].fi;t[i]=0,t[i+1]=0,t[i+2]=Math.abs(r.x-e.x),t[i+3]=Math.abs(r.y-e.y),i+=4}this.vz=this.yB.QO(t,!1,this.vz)}this.xz=this.yB.PR(u.getPattern())}else this.vz&&(this.yB.dL(this.vz),this.vz=void 0),this.xz=void 0;if(v||r)if("triangulated"===b){const t=new Float32Array(h.length);let i=0;h.forEach((s=>{t[i]=s.xo,i+=1})),this.Oz=this.yB.QO(t,!0,this.Oz)}else{const t=new Float32Array(2*h.length);let i=0;h.forEach((s=>{for(let e=i;e<i+2;e+=2)t[e]=s.xo,t[e+1]=s.xo;i+=2})),this.Oz=this.yB.QO(t,!1,this.Oz)}if(g)if(a||v||s)if("triangulated"===b){const t=new Float32Array(4*h.length);let i=0;h.forEach((s=>{const e=s.Bz||g.color;t[i]=e.r,t[i+1]=e.g,t[i+2]=e.b,t[i+3]=e.a,i+=4})),this.Lz=this.yB.QO(t,!1,this.Lz)}else{const t=new Float32Array(8*h.length);let i=0;h.forEach((s=>{const e=s.Bz||g.color;for(let s=i;s<i+8;s+=4)t[s]=e.r,t[s+1]=e.g,t[s+2]=e.b,t[s+3]=e.a;i+=8})),this.Lz=this.yB.QO(t,!1,this.Lz)}else this.Lz&&(this.yB.dL(this.Lz),this.Lz=void 0);if(t){if(v)if("triangulated"===b){const t=new Float32Array(4*h.length);let i=0;h.forEach((s=>{t[i+0]=s.uE.r,t[i+1]=s.uE.g,t[i+2]=s.uE.b,t[i+3]=s.uE.a,i+=4})),this.Rz=this.yB.QO(t,!0,this.Rz)}else{const t=new Float32Array(8*h.length);let i=0;h.forEach((s=>{for(let e=i;e<i+4;e+=4)t[i+0]=s.uE.r,t[i+1]=s.uE.g,t[i+2]=s.uE.b,t[i+3]=s.uE.a;i+=8})),this.Rz=this.yB.QO(t,!1,this.Rz)}}else this.Rz&&(this.yB.dL(this.Rz),this.Rz=void 0);return m?this.pE=cm(this.vo||this.Ia,this.ut,d.getPosition(),d.getExtent(),d.getShape(),this.yB.nO()):y?this.SE=dm(this.vo||this.Ia,this.ut,d.getAngle(!0),this.yB.nO()):(this.pE=void 0,this.SE=void 0),this.Jl(e),this.Az=!1,this.wz=!1,this._z=!1,this.kz=!1,this.po.i=!1,this}mB(t){var i;const s=this.pz,e=this.Oz,h=this.Rz;if(!s||!e)return this;const r=this.Sz;if(!r)return this;const{type:n,fillStyleSolid:o,fillStyleIndividual:a,fillStyleLinearGradient:l,fillStyleRadialGradient:u,lineStyleDashed:c}=r,d=1===t?null===(i=r.mousePicking)||void 0===i?void 0:i.shader:r.shader;return d?(this.yB.iO(d).sL(d,((i,d,f,g)=>{if(this.ut instanceof Ns||this.ut instanceof Eu?this.yB.hL(i("uScale"),this.cO.aL()).hL(i("uDisp"),this.cO.lL()).hL(g("uScaleStart_highpart"),this.cO.HR()).hL(g("uScaleStart_lowpart"),this.cO.UR()):this.ut instanceof Gs&&this.yB.hL(g("uScaleStart"),this.cO.MixedScaleXY.uScaleStart).hL(g("uScaleStartLog"),this.cO.MixedScaleXY.uScaleStartLog).hL(g("uScaleInterval"),this.cO.MixedScaleXY.uScaleInterval).hL(g("uScaleIntervalLog"),this.cO.MixedScaleXY.uScaleIntervalLog).hL(i("uViewportStart"),this.cO.MixedScaleXY.uViewportStart).hL(i("uViewportSize"),this.cO.MixedScaleXY.uViewportSize),this.Tz&&this.yB.hL(g("uViewportSizePx"),[this.cs.$t().x*this.yB.nO(),this.cs.$t().y*this.yB.nO()]),this.yB.oL(i("uHighlightColorOffset"),this.wo).nL(i("uRenderEffectMask"),2===t?1:0),1===t){if(!h)return!1;"triangulated"===n?this.yB.eL(h,1,{location:d("aColor"),size:4}):this.yB.WL(d("aColor"),h)}else if(o)this.yB.oL(i("uColor"),o.getColor());else if(a){if(!this.Lz)return!1;this.yB.eL(this.Lz,"triangulated"===n?1:void 0,{location:d("aColor"),size:4})}else if(u){if(!this.pE)return!1;this.yB.pR(f,this.pE,u)}else if(l){if(!this.SE)return!1;this.yB.SR(f,this.SE,l)}if(c){if(!this.vz||!this.xz)return!1;wm.fz(this.yB,f,this.vz,d("aLengthSoFarA"),d("aLengthSoFarB"),2,0),this.yB.hL(i("uStippleCount"),[this.cs.$t().x/this.xz.lw,this.cs.$t().y/this.xz.lw]).nL(g("uStippleTextureWidthLimiter"),this.xz.BR/this.xz.lw).nL(i("uStippleScale"),c.getPatternScale()).rL(i("uStippleTexture"),this.xz.DR,0)}if("triangulated"===n){const{geometry:i,thickness:h}=r;wm.dz(this.ut.ai(),this.yB,s,f,this.ut.ai()?4:2,0),this.yB.eL(1===t||2===t?this.yB.cR:e,1,{location:d("aIsHighlighted"),size:1}),wm.mB(this.tE,i,f,this.yz&&1!==t,1===t,h,this.Mz.length)}else km.dz(this.ut.ai(),this.yB,s,f,this.ut.ai()?4:2,0),this.yB.HL(d("aIsHighlighted"),1===t||2===t?this.yB.cR:e),km.mz(this.tE,this.Mz.length);return!0})),this):this}hE(t){const i=this.Mz.find((i=>i.lE===t));return!!i&&{collectionMember:i}}dispose(){return super.dispose(),this.Sz=void 0,this.pz&&(this.yB.dL(this.pz),this.pz=void 0),this.vz&&(this.yB.dL(this.vz),this.vz=void 0),this.Oz&&(this.yB.dL(this.Oz),this.Oz=void 0),this.Rz&&(this.yB.dL(this.Rz),this.Rz=void 0),this.Lz&&(this.yB.dL(this.Lz),this.Lz=void 0),this.xz=void 0,this}$B(){return this}wt(){return this.Ia.max.x}At(){return this.Ia.min.x}Ct(){return this.Ia.max.y}kt(){return this.Ia.min.y}hl(){return Di(this.Xl)}rl(){return Di(this.Xl)}}class Fm{constructor(t,i){this.Ez=!1,this.zz=!1,this.Vz=!1,this.ut=t,this.Nz=i,this.Nz.Co("DataPattern",(t=>{"ProgressiveX"!==t.pattern&&"RegressiveX"!==t.pattern||(this.Ez="x"),"ProgressiveY"!==t.pattern&&"RegressiveY"!==t.pattern||(this.Ez="y"),"RegressiveX"!==t.pattern&&"RegressiveY"!==t.pattern||(this.zz=!0),!0===t.regularProgressiveStep&&(this.Vz=!0)}))}calculateUserDataPointsProgressiveRange(t){if(0===t.length)throw new Error("calculateUserDataPointsProgressiveRange called with 0 data points");return{start:"x"===this.Ez?t[0].x:t[0].y,end:"x"===this.Ez?t[t.length-1].x:t[t.length-1].y}}calculateUserDataPointsBoundaries(t){return this.Ez?"x"===this.Ez?function(t){const i=t.length;if(i>0){const s=Math.max(t[i-1].x,t[0].x),e=Math.min(t[i-1].x,t[0].x);let h=t[0].y,r=t[0].y;for(let s=0;s<i;s+=1){const i=t[s];i.y>h&&(h=i.y),i.y<r&&(r=i.y)}return c(n(e,r),n(s,h))}return zi}(t):function(t){const i=t.length;if(i>0){const s=Math.max(t[i-1].y,t[0].y),e=Math.min(t[i-1].y,t[0].y);let h=t[0].x,r=t[0].x;for(let s=0;s<i;s+=1){const i=t[s];i.x>h&&(h=i.x),i.x<r&&(r=i.x)}return c(n(r,e),n(h,s))}return zi}(t):Ji(t)}calculateAvgStepBetweenDataPoints(t,i,s){return Math.abs(t-i)/(s-1)}}const Im=Math.min(1,1.5);class Pm extends Fm{constructor(t,i,s){super(t,i),this.Gz=!1,this.Wz={enabled:!1,totalDataPointsAtTime:0},this.Uz=[],this.vs=s,this.$z=t instanceof Ns?{type:"linear",scale:t}:t instanceof Gs?{type:"mixed",scale:t}:{type:"unknown"},this.Nz.Co("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.Gz=!0)}))}jz(t,i=!1){if(this.Gz||!this.Ez||"linear"!==this.$z.type)return!1;!1===i&&this.Yz&&(clearTimeout(this.Yz),this.Yz=void 0);const s="x"===this.Ez?this.$z.scale.x.rg:this.$z.scale.y.rg;if(!s)throw new Error("CP helper has no information about Axis state.");const e=t.length;if(e<2)return!1;const h=t[0],r=t[e-1],n=this.calculateAvgStepBetweenDataPoints("x"===this.Ez?h.x:h.y,"x"===this.Ez?r.x:r.y,e),o=this.$z.scale,a=Math.abs("x"===this.Ez?o.ki().x:o.ki().y),l=a/n,u=Math.floor(l*Im),c=u*n,d=kt.performance.now(),f=!(d-s.hh<500)&&(s.Je?d-s.eh<1e3:d-s.Qe<2e3||s.ih),g=e>2*this.Wz.totalDataPointsAtTime;if(f&&!g)return this.Yz=setTimeout((()=>this.Xz(t)),1e3),!1;const m=u>=10,y=this.Wz.enabled?this.Wz.columnWidthAxis/a<1.5:void 0,p=this.Wz.enabled&&u>this.Wz.dataPointsPerColumn?u/this.Wz.dataPointsPerColumn>=2:void 0;let S;!0===this.Wz.enabled?y?p&&(S={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e}):S=m?{enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e}:{enabled:!1,totalDataPointsAtTime:e}:m&&(S={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e});const b=!1===i;return S?(b&&(this.Wz=S),!0):(b&&(this.Wz={...this.Wz,totalDataPointsAtTime:e}),!1)}ob(){this.Zz=void 0,this.Uz.length=0,this.Yz&&(clearTimeout(this.Yz),this.Yz=void 0)}Kz(t){if(0===t.length)return t;if(this.Gz||!this.Ez||"linear"!==this.$z.type||!this.Wz.enabled)return t;let i;i=this.Uz.length>0?gi(this.Uz,t,{canReturnB:!0}):t;const s=i.length,e=[];let h,r,n=void 0===this.Zz,o=-1,a=-1,l=0,u=0;if("x"!==this.Ez||this.zz)if("x"===this.Ez&&this.zz){const t=this.Wz.columnWidthAxis;let c=this.Zz?this.Zz.x:i[0].x,d=c-t;for(let f=0;f<s;f+=1){const s=i[f];s.x>=d?((!h||s.y>h.y)&&(h=s,o=f),(!r||s.y<r.y)&&(r=s,a=f),u=f):(h&&r&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.x,d=c-t,h=s,o=f,r=s,a=f,l=f,u=f)}}else if("y"!==this.Ez||this.zz){if("y"===this.Ez&&this.zz){const t=this.Wz.columnWidthAxis;let c=this.Zz?this.Zz.y:i[0].y,d=c-t;for(let f=0;f<s;f+=1){const s=i[f];s.y>=d?((!h||s.x>h.x)&&(h=s,o=f),(!r||s.x<r.x)&&(r=s,a=f),u=f):(r&&h&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.y,d=c-t,h=s,o=f,r=s,a=f,l=f,u=f)}}}else{const t=this.Wz.columnWidthAxis;let c=this.Zz?this.Zz.y:i[0].y,d=c+t;for(let f=0;f<s;f+=1){const s=i[f];s.y<=d?((!h||s.x>h.x)&&(h=s,o=f),(!r||s.x<r.x)&&(r=s,a=f),u=f):(r&&h&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.y,d=c+t,h=s,o=f,r=s,a=f,l=f,u=f)}}else{const t=this.Wz.columnWidthAxis;let c=this.Zz?this.Zz.x:i[0].x,d=c+t;for(let f=0;f<s;f+=1){const s=i[f];s.x<=d?((!h||s.y>h.y)&&(h=s,o=f),(!r||s.y<r.y)&&(r=s,a=f),u=f):(h&&r&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.x,d=c+t,h=s,o=f,r=s,a=f,l=f,u=f)}}if(h||r){const t=i.slice(l,u+1);this.Uz=t}else this.Uz.length=0;const c=e.length;return c>0&&(this.Zz=e[c-1]),e}qz(t){if(this.Ez&&"linear"===this.$z.type){const i="x"===this.Ez?this.$z.scale.x.rg:this.$z.scale.y.rg;if(!i)throw new Error("CP helper has no information about Axis state.");if(i.Xe===He.progressive||i.Xe===He.regressive){const i=Math.abs("x"===this.Ez?this.$z.scale.x.getInnerInterval():this.$z.scale.y.getInnerInterval());if(this.Wz.enabled)return 2*i/this.Wz.columnWidthAxis;const s=t.length,e=t[0],h=t[s-1];return i/this.calculateAvgStepBetweenDataPoints("x"===this.Ez?e.x:e.y,"x"===this.Ez?h.x:h.y,s)}}}Jz(t,i,s){if(!this.Ez)return i;const e=s.length;let h=Gh(s,t.min,this.Ez,this.zz,0,e-1);void 0===h&&(h=this.zz?e-1:0);let r=Gh(s,t.max,this.Ez,this.zz,0,e-1);return void 0===r&&(r=this.zz?0:e-1),1+Math.abs(r-h)}Qz(){this.Yz&&(clearTimeout(this.Yz),this.Yz=void 0)}Xz(t){this.jz(t,!0)&&this.vs()}}class Dm extends Fm{renderVisibleOnly(t,i){const s=this.ut.x.getInnerStart(),e=this.ut.x.getInnerEnd(),h=Math.min(s,e),r=Math.max(s,e),n=this.ut.y.getInnerStart(),o=this.ut.y.getInnerEnd(),a=Math.min(n,o),l=Math.max(n,o);t.forEach(((t,s)=>{t.existingCoordinatesCount<=1||t.boundaries.max.x<h||t.boundaries.min.x>r||t.boundaries.max.y<a||t.boundaries.min.y>l||i(t)}))}}class Bm{constructor(t,i,s){this.tV=i,this.iV=s,this.sV=t,this.eV=[]}hV(t,i,s,e){const h=t.length;if(0===h)return;let r=t,n=h,o=this.sV[this.sV.length-1];do{const t=this.sV.length;let h;o||(o=this.rV(i,n)),o&&0==o.allocatedCoordinatesCount-o.existingCoordinatesCount&&(o=void 0);let a=0;if(this.iV&&t>0&&(void 0===o||0===o.existingCoordinatesCount)){const i=this.sV[t-1].lastDataPoint;i?(r.splice(0,0,i),a=1,n+=1):console.error("SegmentationHelper _connectSegments = true, but segment has no lastDataPoint information!")}if(o)h=Math.min(n,o.allocatedCoordinatesCount-o.existingCoordinatesCount),e(o,r.slice(0,h),h,a);else{const t=Math.ceil(i)+a;h=Math.min(t,n);const e={...s(t,r.slice(0,h),h,a),isDropped:!1};this.sV.push(e)}h>0&&(n>h?(r=r.slice(h),n=r.length):(r=[],n=0))}while(n>0);this.nV()}oV(t){const i=t,s=this.sV.indexOf(i);s>=0&&this.sV.splice(s,1),i.droppedTimestamp=kt.performance.now(),this.eV.push(i)}aV(){this.sV.slice().forEach((t=>this.oV(t)))}lV(){this.sV.forEach((t=>this.tV(t))),this.eV.forEach((t=>this.tV(t))),this.sV.length=0,this.eV.length=0}rV(t,i){const s=2*t/3,e=4*t/3,h=this.eV.findIndex((t=>t.allocatedCoordinatesCount>=s&&t.allocatedCoordinatesCount<=e));if(h>=0){const t=this.eV[h];return this.eV.splice(h,1),this.sV.push(t),t}}nV(){if(this.eV.length>5){const t=kt.performance.now();for(let i=0;i<this.eV.length-5;i+=1){const s=this.eV[i];(void 0===s.droppedTimestamp||t-s.droppedTimestamp>=1e4)&&(this.tV(s),this.eV.splice(i,1),i-=1)}}}}class Om extends Fm{uV(t,i){if(!i||"object"!=typeof i)return 0;const s=this.ut.x.getInnerStart(),e=this.ut.x.getInnerEnd(),h=Math.min(s,e),r=Math.max(s,e),n=this.ut.y.getInnerStart(),o=this.ut.y.getInnerEnd(),a=Math.min(n,o),l=Math.max(n,o);if("maxDataPointCount"in i)return this.cV(t,i.maxDataPointCount,h,r,a,l);if("minDataPointCount"in i)return this.dV(t,i.minDataPointCount,h,r,a,l);if("progressiveDataCleaningThreshold"in i)return this.fV(t,i.progressiveDataCleaningThreshold,h,r,a,l);throw new Error(`Unimplemented data cleaning configuration: ${JSON.stringify(i)}`)}cV(t,i,s,e,h,r){if(void 0===i||i<=0)return 0;const n=t.reduce(((t,i)=>t+i.existingDataPointsCount),0);if(n<=i)return 0;let o=0,a=n;for(let s=0;s<t.length;s+=1){const e=t[s];a>i&&(o+=1,a-=e.existingDataPointsCount)}return o}fV(t,i,s,e,h,r){if(void 0===i||!this.Ez)return 0;let n=0;for(let o=0;o<t.length;o+=1){const a=t[o],l=this.zz?"x"===this.Ez?a.boundaries.min.x>e:a.boundaries.min.y>r:"x"===this.Ez?a.boundaries.max.x<s:a.boundaries.max.y<h;if(!((this.zz?"x"===this.Ez?a.boundaries.min.x>i:a.boundaries.min.y>i:"x"===this.Ez?a.boundaries.max.x<i:a.boundaries.max.y<i)&&l&&a.existingCoordinatesCount>2))break;n+=1}return n}dV(t,i,s,e,h,r){if(void 0===i||0===i)return 0;let n=0,o=0;for(let a=t.length-1;a>=0;a-=1){const l=t[a];if(o>i)if(this.Ez){if(this.zz?"x"===this.Ez?l.boundaries.min.x>e:l.boundaries.min.y>r:"x"===this.Ez?l.boundaries.max.x<s:l.boundaries.max.y<h){n=1+a;break}}else l.boundaries.max.x<s||l.boundaries.min.x>e||l.boundaries.max.y<h||l.boundaries.min.y>r?n+=1:n=0;o+=l.existingDataPointsCount}return n}gV(t,i){const s=t.reduce(((t,i)=>ts(t,i.boundaries)),zi);if(i&&"progressiveDataCleaningThreshold"in i&&i.progressiveDataCleaningThreshold){const t=i.progressiveDataCleaningThreshold;"x"!==this.Ez||this.zz?"x"===this.Ez&&this.zz?s.max.x=Math.min(s.max.x,t):"y"!==this.Ez||this.zz?"y"===this.Ez&&this.zz&&(s.max.y=Math.min(s.max.y,t)):s.min.y=Math.max(s.min.y,t):s.min.x=Math.max(s.min.x,t)}return s}}class Lm extends Sr{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h),this.cO=new nm,this.rM=[],this.mV=new Dm(this.ut,this),this.yV=new Pm(this.ut,this,(()=>this.cs.vs())),this.pV=new Bm(this.rM,(t=>{t.coordsBuffer&&this.yB.dL(t.coordsBuffer),t.vz&&this.yB.dL(t.vz)}),!0),this.SV=new Om(this.ut,this),this.bV=0,this.vV=0,this.xV=!1,this.iE=i,this.lE=r,this.uE=n,this.wn=o,this.Sz={type:"none"},this.yB=t.sE(),this.tE=t,this.yz=this.yB.iR;const a=this.ut.ai(),l=!0===(null==o?void 0:o.individualLookupValuesEnabled);let u,c,d,f=0;a||(u=f,f+=2),a&&(c=f,f+=4),l&&(d=f,f+=1);const g=((t,i)=>i?(i,s)=>((t,i)=>{if(!i){const i=t.length,s=new Float32Array(3*i);for(let e=0,h=0;e<i;e+=1){const i=t[e];s[h+0]=i.x,s[h+1]=i.y,s[h+2]=void 0!==i.value?i.value:0,h+=3}return s}const s=t.length,e=new Float32Array(5*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s.x),n=Math.fround(s.y);e[h+0]=r,e[h+1]=n,e[h+2]=s.x-r,e[h+3]=s.y-n,e[h+4]=void 0!==s.value?s.value:0,h+=5}return e})(i,t):(i,s)=>ni(i,t))(a,l);this.MV={individualLookupValuesEnabled:l,attributesPerVertex:f,attributeOffsetCoordinateLowPrecision:u,attributeOffsetCoordinateHighPrecision:c,attributeOffsetLookUpValue:d,prepareRenderData:(t,i)=>g(t,this.Xl.getFillStyle())}}_V(t,i,s){const e=new Float32Array(2*i);let h=0,r=s||t[0];for(let s=0;s<i;s+=1){const i=t[s];this.bV+=Math.abs(r.x-i.x),this.vV+=Math.abs(r.y-i.y),e[h]=this.bV,e[h+1]=this.vV,h+=2,r=i}return e}Is(){const t=this.Ra,i=this.Xl,s=this.Ho(),e=this.Da,h=e.length,r=h>0,n=this.po.S(),o=this.po.i,a=ee(i)&&i,l=io(i)&&i,u=a||l,c=u&&u.getThickness(),d=u&&u.getFillStyle(),f=G(d)&&d,g=et(d)&&d,m=tt(d)&&d,y=j(d)&&d,p=f||g||m||y,S=this.MV.individualLookupValuesEnabled;if(l&&this.ut instanceof Gs)return kt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;r&&(this.tu=gi(this.tu,e,{canReturnB:!0}),this.Pa+=h);let b=this.iu.i;const v=this.SV.uV(this.rM,this.iu.S());if(v>0){let t=0;for(let i=0;i<v;i+=1){const i=this.rM[0];t+=i.existingDataPointsCount,i.existingDataPointsCount=0,i.existingCoordinatesCount=0,i.jointPointsCount=0,i.boundaries=zi,i.lastDataPoint=void 0,this.pV.oV(i)}this.tu=this.tu.slice(t),this.Pa=this.tu.length,b=!0}let x=e,M=!1;(this.yV.jz(this.tu)||t)&&(M=!0),l&&!this.xV?(M=!0,this.xV=!0,this.pV.lV()):!l&&this.xV&&(this.rM.forEach((t=>{t.vz&&(this.yB.dL(t.vz),t.vz=void 0)})),this.xV=!1),M&&(this.yV.ob(),this.rM.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.jointPointsCount=0,t.boundaries=zi,t.lastDataPoint=void 0})),this.pV.aV(),x=this.tu,this.bV=0,this.vV=0);const _=this.yV.Kz(x),A=_.length;if(A>0){let t=this.yV.qz(this.tu)||(this.Co("ApplicationType",(t=>"InternalUI"===t.type))?this.Pa:1e5);A/t>10&&(t=A/10),this.pV.hV(_,t,((t,i,s,e)=>{const h=this.mV.calculateUserDataPointsBoundaries(i),r=this.yV.Jz(h,s,this.tu)-e;return this.AV=i[s-1],{allocatedCoordinatesCount:t,existingDataPointsCount:r,existingCoordinatesCount:s,jointPointsCount:e,boundaries:h,coordsBuffer:this.yB.BL(t*this.MV.attributesPerVertex,this.MV.prepareRenderData(i,s)),lastDataPoint:i[s-1],vz:this.xV?this.yB.BL(2*t,this._V(i,s,this.AV)):void 0}}),((t,i,s,e)=>{const h=ts(t.boundaries,this.mV.calculateUserDataPointsBoundaries(i)),r=this.yV.Jz(h,t.existingCoordinatesCount+s,this.tu)-(t.jointPointsCount+e);this.yB.OL(t.coordsBuffer,t.existingCoordinatesCount*this.MV.attributesPerVertex,this.MV.prepareRenderData(i,s)),this.xV&&t.vz&&this.yB.OL(t.vz,2*t.existingCoordinatesCount,this._V(i,s,this.AV)),this.AV=i[s-1],t.jointPointsCount+=e,t.lastDataPoint=i[s-1],t.existingDataPointsCount=r,t.existingCoordinatesCount+=s,t.boundaries=h}))}if(b&&(this.Ia=this.SV.gV(this.rM,this.iu.S())),this.cO.cL(this.ut),m?this.kE=cm(this.Fo(),this.ut,m.getPosition(),m.getExtent(),m.getShape(),this.yB.nO()):g?this.CE=dm(this.Fo(),this.ut,g.getAngle(!0),this.yB.nO()):(this.kE=void 0,this.CE=void 0),s||o){if(y&&"value"===y.getLookUpProperty()&&!S){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw kt.alert(t),new Error(t)}if(p&&u&&!1!==c){const t=-1===c?"primitive":"triangulated",i=g?["gradient",g]:m?["gradient",m]:y?["lookup",y.getLookUpProperty()]:"uniform";this.Sz="primitive"===t?{type:t,shader:this.yB.iL(im["2D"],im.Color({dataType:i}),im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0}),l&&im.StippleTexture),mousePickingShader:n?this.yB.iL(im["2D"],im.MousePicking,im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0}),l&&im.StippleTexture):void 0,lineStyleSolid:a,lineStyleDashed:l,fillStyleSolid:f,fillStyleLinearGradient:g,fillStyleRadialGradient:m,fillStylePaletted:y}:"triangulated"===t?{type:t,shader:this.yB.iL(im["2D"],im.Color({dataType:i}),im.LineInstanced2D({axisWorldTranslation:xg(this.ut),normalSource:void 0}),this.yz?im.AliasedEdge:void 0,l&&im.StippleTextureInstanced),mousePickingShader:n?this.yB.iL(im["2D"],im.MousePicking,im.LineInstanced2D({axisWorldTranslation:xg(this.ut),normalSource:void 0}),l&&im.StippleTextureInstanced):void 0,geometry:Am(this.yB,c),thickness:c,lineStyleSolid:a,lineStyleDashed:l,fillStyleSolid:f,fillStyleLinearGradient:g,fillStyleRadialGradient:m,fillStylePaletted:y}:{type:"none"}}else this.Sz={type:"none"};y?this.bz=this.tE.YE(y.lut,this.bz):this.bz&&(this.tE.XE(this.bz),this.bz=void 0)}return this.xz=l?this.yB.PR(l.getPattern()):void 0,this.Jl(i),this.Ra=!1,this.Da=[],this.po.i=!1,this.iu.i=!1,this}mB(t){const i=this.yB.gl,s=this.Sz;if(!s||"none"===s.type)return this;const e=1===t?s.mousePickingShader:s.shader;if(!e)return this;const{lineStyleDashed:h,fillStyleSolid:r,fillStyleLinearGradient:n,fillStyleRadialGradient:o,fillStylePaletted:a}=s;return this.yB.iO(e).sL(e,((e,l,u,c)=>{let d=!1;if(this.yB.nL(e("uIsHighlighted"),1===t||2===t?0:this.xo).oL(e("uHighlightColorOffset"),this.wo).nL(e("uRenderEffectMask"),2===t?1:0),this.ut instanceof Ns||this.ut instanceof Eu?this.yB.hL(e("uScale"),this.cO.aL()).hL(e("uDisp"),this.cO.lL()).hL(c("uScaleStart_highpart"),this.cO.HR()).hL(c("uScaleStart_lowpart"),this.cO.UR()):this.ut instanceof Gs&&this.yB.hL(c("uScaleStart"),this.cO.MixedScaleXY.uScaleStart).hL(c("uScaleStartLog"),this.cO.MixedScaleXY.uScaleStartLog).hL(c("uScaleInterval"),this.cO.MixedScaleXY.uScaleInterval).hL(c("uScaleIntervalLog"),this.cO.MixedScaleXY.uScaleIntervalLog).hL(e("uViewportStart"),this.cO.MixedScaleXY.uViewportStart).hL(e("uViewportSize"),this.cO.MixedScaleXY.uViewportSize),1===t)this.yB.oL(e("uColor"),this.uE);else if(r)this.yB.oL(e("uColor"),r.getColor());else if(o){if(!this.kE)return!1;this.yB.pR(u,this.kE,o)}else if(n){if(!this.CE)return!1;this.yB.SR(u,this.CE,n)}else if(a){if(!this.bz)return!1;this.yB.OR(u,a.lut,this.bz,0)}return this.mV.renderVisibleOnly(this.rM,(r=>{const{coordsBuffer:n}=r;if(!n)return;i.bindBuffer(i.ARRAY_BUFFER,n);const o="triangulated"===s.type?wm.uz:km.uz;if(this.ut.ai()||void 0===this.MV.attributeOffsetCoordinateLowPrecision?this.ut.ai()&&void 0!==this.MV.attributeOffsetCoordinateHighPrecision&&o(!0,this.yB,n,u,this.MV.attributesPerVertex,this.MV.attributeOffsetCoordinateHighPrecision):o(!1,this.yB,n,u,this.MV.attributesPerVertex,this.MV.attributeOffsetCoordinateLowPrecision),h){if(!r.vz||!this.xz)return;"triangulated"===s.type?wm.cz(this.yB,u,r.vz,l("aLengthSoFarA"),l("aLengthSoFarB"),2,0):km.cz(this.yB,u,r.vz,l("aLengthSoFar"),2,0),this.yB.hL(e("uStippleCount"),[this.cs.$t().x/this.xz.lw,this.cs.$t().y/this.xz.lw]).nL(c("uStippleTextureWidthLimiter"),this.xz.BR/this.xz.lw).nL(e("uStippleScale"),h.getPatternScale()).rL(e("uStippleTexture"),this.xz.DR,1)}if(a&&"value"===a.lookUpProperty&&void 0!==this.MV.attributeOffsetLookUpValue&&1!==t)if("triangulated"===s.type){const t=l("aLookupValueA");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.MV.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.MV.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.yB.NL(t,1),i.enableVertexAttribArray(t);const s=l("aLookupValueB");i.vertexAttribPointer(s,1,i.FLOAT,!1,this.MV.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.MV.attributeOffsetLookUpValue+this.MV.attributesPerVertex)*Float32Array.BYTES_PER_ELEMENT),this.yB.NL(s,1),i.enableVertexAttribArray(s)}else{const t=l("aLookupValue");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.MV.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.MV.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),i.enableVertexAttribArray(t)}if("triangulated"===s.type){const{thickness:i}=s;wm.mB(this.tE,s.geometry,u,this.yz&&1!==t,1===t,i,r.existingCoordinatesCount-1)}else km.gz(this.tE,r.existingCoordinatesCount);d=!0})),i.bindBuffer(i.ARRAY_BUFFER,null),d})),this}hE(t){return this.lE===t&&{}}Ua(t,i){return Array.isArray(t)||(t=[t]),this.Da=gi(this.Da,t,{canReturnB:!0}),this.Ia=ts(this.Ia,i||this.mV.calculateUserDataPointsBoundaries(t)),this}$a(){return super.$a(),this.bV=0,this.vV=0,this.AV=void 0,this}dispose(){return super.dispose(),this.pV.lV(),this.yV.Qz(),this.bz&&(this.tE.XE(this.bz),this.bz=void 0),this.Sz={type:"none"},this.xz=void 0,this}$B(){return this}Qv(t){this.Ya()>0&&this.Is();const i=this.Va(),s=Eh(i,t,this.La,this.fl,this.ml,this.ut,this.engine.ut,this.Ia,this.mV.Ez,this.mV.zz);return void 0!==s?i[s]:void 0}Iw(t){this.Ya()>0&&this.Is();const i=this.Va(),s=i.length;if(0===s)return;const e=this.fl?1:0,h=s-(this.ml?2:1);if(this.La===Lh.Nearest){let e,h,r=Ri;for(let n=0;n<s;n+=1){const s=ut(i[n],this.ut,this.cs.ut);if(void 0!==h){const i=$i(h,s,t),n=(i.x-t.x)**2+(i.y-t.y)**2;n<r&&(r=n,e=i)}h=s}return void 0!==e?ut(e,this.cs.ut,this.ut):void 0}if("x"===this.mV.Ez&&this.La===Lh.NearestX||"y"===this.mV.Ez&&this.La===Lh.NearestY){const s=Wh(i,ut(t,this.cs.ut,this.ut),this.mV.Ez,this.mV.zz,e,h);return s?Ki(i[s.a],i[s.b],s.lerpAmount):void 0}return this.Qv(t)}wt(){return this.Ia.max.x}At(){return this.Ia.min.x}Ct(){return this.Ia.max.y}kt(){return this.Ia.min.y}getPointsBounds(){return this.Ia}hl(){return Di(this.Xl)}rl(){return Di(this.Xl)}}class Rm extends fg{constructor(t,i){super(t),this.wV=i,this.kV=ni(i,!1),this.CV=i.length,this.BB=t.QO(this.kV);const s=Ji(this.wV);this.$=n(s.max.x-s.min.x,s.max.y-s.min.y)}AB(){this.yB.dL(this.BB)}}const Em=t=>{const i=function(){const t=[],i=2/1.73205080757;return t.push(n(-i/2,.3333333333333333)),t.push(n(0,-.6666666666666666)),t.push(n(i/2,.3333333333333333)),t}();return new Rm(t,i)},zm=t=>{const i=[n(-.5,-.5),n(-.5,.5),n(.5,-.5),n(.5,-.5),n(-.5,.5),n(.5,.5)];return new Rm(t,i)},Vm=(t,i,s)=>{let e=i.bL.bB.get(t);return e||(e=s(i),i.bL.bB.set(t,e)),e};class Nm extends er{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.cO=new nm,this.oE=c(o(Ei,Ei),o(Ri,Ri)),this.tE=t,this.iE=i,this.lE=r,this.uE=n,this.yB=t.sE()}Is(){const t=this.po.S(),i=this.po.i,s=this.Da,e=s.length,h=e>0,r=this.ka.S(),o=this.ve,a=this.size.S(),l=this.ut.Ai(),u=this.size.i||this.ka.i,c=this.Ra||s&&s.length>0,d=l||u;if(h&&(this.wa=gi(this.wa,s,{canReturnB:!0}),this.Pa+=e),h||this.Ra){this.Ia=this.Oa?ts(this.Ia,this.Oa):ts(this.Ia,Ji(this.wa));const t=ni(this.wa,this.ut.ai());this.TV=this.Pa,this.FV=this.yB.QO(t,!1,this.FV)}if(this.cO.cL(this.ut),u||this.zo()||i){const i=this.Ca.S()?"attribute":"uniform",s=a<=1&&im.PointSize(i),e=im.VertexLocation({offset:a>1?{dataType:i,sizeUnit:"px",symmetric:!0,rotation:(this.Ta.S()||this.Jo.S()%360!=0)&&{dataType:this.Ta.S()?"attribute":"uniform"}}:void 0,axisWorldTranslation:xg(this.ut),normalSource:void 0}),h=G(this.ve)&&this.ve,r=tt(this.ve)&&this.ve,n=et(this.ve)&&this.ve,o=j(this.ve)&&this.ve,l=H(this.ve)&&this.ve,u=h||r||n||o||l;this.fO=u?this.yB.iL(im["2D"],s,e,h?im.Color({dataType:"uniform"}):l?im.Color({dataType:"attribute"}):o?im.Color({dataType:["lookup",o.getLookUpProperty()]}):r?im.Color({dataType:["gradient",r]}):n?im.Color({dataType:["gradient",n]}):void 0):void 0,this.FE=t&&u?this.yB.iL(im["2D"],s,e,im.MousePicking):void 0}if(o!==R?d&&(this.IV&&(this.IV=void 0),a>1||H(o)?a<=1?this.lz=this.yB.gl.POINTS:r===Oh.Triangle?(this.IV=Vm(Oh.Triangle,this.yB,Em),this.lz=this.yB.gl.TRIANGLES):r===Oh.Circle?(this.IV=Vm(Oh.Circle,this.yB,(t=>((t,i)=>{const s=function(t=25){return hc(n(0,0),0,360,.5,.5,t)[0]}(i);return new Rm(t,s)})(t,24))),this.lz=this.yB.gl.TRIANGLE_FAN):r===Oh.Square?(this.IV=Vm(Oh.Square,this.yB,zm),this.lz=this.yB.gl.TRIANGLES):this.lz=this.yB.gl.POINTS:this.lz=this.yB.gl.POINTS):this.IV&&(this.IV=void 0),c||this.zo()){const t=this.wa.length;if(H(o)&&this.TV&&this.TV>0){const i=o.getFallbackColor(),s=new Float32Array(4*t);for(let e=0;e<t;e+=1){const t=this.wa[e];t.color?(s[4*e+0]=t.color.r,s[4*e+1]=t.color.g,s[4*e+2]=t.color.b,s[4*e+3]=t.color.a):(s[4*e+0]=i.r,s[4*e+1]=i.g,s[4*e+2]=i.b,s[4*e+3]=i.a)}this.PV=this.yB.QO(s,!0,this.PV)}else this.PV&&this.yB.dL(this.PV),this.PV=void 0;if(j(o)?this.bz=this.tE.YE(o.lut,this.bz):this.bz&&(this.tE.XE(this.bz),this.bz=void 0),this.Ca.S()&&this.TV&&this.TV>0&&a>1){const i=new Float32Array(t);for(let s=0;s<t;s+=1){const t=this.wa[s];t.size?i[s]=t.size:i[s]=a}this.DV=this.yB.QO(i,!0,this.DV)}else this.DV&&(this.yB.dL(this.DV),this.DV=void 0);if(this.Ta.S()&&this.TV&&this.TV>0&&a>1){const i=new Float32Array(2*t),s=bs(this.Jo.S()),e=Math.sin(s),h=Math.cos(s);for(let s=0;s<t;s+=1){const t=this.wa[s];if(t.rotation){const e=bs(t.rotation);i[2*s+0]=Math.sin(e),i[2*s+1]=Math.cos(e)}else i[2*s+0]=e,i[2*s+1]=h}this.BV=this.yB.QO(i,!0,this.BV)}else this.BV&&(this.yB.dL(this.BV),this.BV=void 0);if(this.Fa.S()&&this.TV&&this.TV>0){const i=new Float32Array(t);for(let s=0;s<t;s+=1){const t=this.wa[s];"value"in t&&void 0!==t.value&&null!==t.value?i[s]=t.value:i[s]=-34028234663852886e22}this.OV=this.yB.QO(i,!0,this.OV)}else this.OV&&(this.yB.dL(this.OV),this.OV=void 0);this.Wo(this.ve)}return tt(o)?this.pE=cm(this.Fo(),this.ut,o.getPosition(),o.getExtent(),o.getShape(),this.yB.nO()):et(o)?this.SE=dm(this.Fo(),this.ut,o.getAngle(!0),this.yB.nO()):(this.pE=void 0,this.SE=void 0),c&&(this.Ia&&c&&(this.oE=Xh(this.Ia,{x:a,y:a},this.ut)),this.Da=[],this.Ba=0,this.Oa=zi),this.Vo=o,this.ka.i=!1,this.size.i=!1,this.po.i=!1,this.Ra=!1,this}mB(t){const i=1===t?this.FE:this.fO,s=this.FV,e=this.TV;return i&&s&&e&&(this.yB.iO(i),this.yB.sL(i,((i,h,r,n)=>{if(this.ut instanceof Ns||this.ut instanceof Eu?this.yB.hL(i("uScale"),this.cO.aL()).hL(i("uDisp"),this.cO.lL()).hL(n("uScaleStart_highpart"),this.cO.HR()).hL(n("uScaleStart_lowpart"),this.cO.UR()):this.ut instanceof Gs&&this.yB.hL(n("uScaleStart"),this.cO.MixedScaleXY.uScaleStart).hL(n("uScaleStartLog"),this.cO.MixedScaleXY.uScaleStartLog).hL(n("uScaleInterval"),this.cO.MixedScaleXY.uScaleInterval).hL(n("uScaleIntervalLog"),this.cO.MixedScaleXY.uScaleIntervalLog).hL(i("uViewportStart"),this.cO.MixedScaleXY.uViewportStart).hL(i("uViewportSize"),this.cO.MixedScaleXY.uViewportSize),this.yB.xR(r,s,this.ut.ai(),this.IV?1:void 0).nL(i("uIsHighlighted"),1===t||2===t?0:this.xo).oL(i("uHighlightColorOffset"),this.wo).nL(i("uRenderEffectMask"),2===t?1:0).nL(n("uDevicePixelRatio"),this.yB.nO()),this.IV){const t=h("aInstanceGeo");this.yB.zL(t,this.IV.BB).NL(t,0)}if(1===t)this.yB.oL(i("uColor"),this.uE);else if(G(this.ve))this.yB.oL(i("uColor"),this.ve.getColor());else if(H(this.ve)&&this.PV){const t=h("aColor");this.yB.WL(t,this.PV),this.lz!==this.yB.gl.POINTS&&this.yB.NL(t,1)}else if(j(this.ve)&&this.bz){if("value"===this.ve.getLookUpProperty()&&this.OV){const t=h("aLookupValue");this.yB.HL(t,this.OV),this.lz!==this.yB.gl.POINTS&&this.yB.NL(t,1)}this.yB.OR(r,this.ve.lut,this.bz,0)}else if(tt(this.ve)){if(!this.pE)return!1;this.yB.pR(r,this.pE,this.ve)}else if(et(this.ve)){if(!this.SE)return!1;this.yB.SR(r,this.SE,this.ve)}if(this.DV&&this.lz!==this.yB.gl.POINTS){const t=h("aOffsetPixels");this.yB.HL(t,this.DV),this.lz!==this.yB.gl.POINTS&&this.yB.NL(t,1)}else if(this.lz!==this.yB.gl.POINTS){const t=i("uOffsetPixels");this.yB.nL(t,this.size.S())}if(this.BV&&this.lz!==this.yB.gl.POINTS){const t=h("aRot");this.yB.zL(t,this.BV),this.lz!==this.yB.gl.POINTS&&this.yB.NL(t,1)}else if(this.lz!==this.yB.gl.POINTS&&this.Jo.S()%360!=0){const t=bs(this.Jo.S()),s=Math.sin(t),e=Math.cos(t);this.yB.hL(i("uRot"),[s,e])}if(this.lz===this.yB.gl.POINTS)this.yB.nL(i("uPointSize"),this.size.S());else{const t={x:2/this.cs.$t().x,y:2/this.cs.$t().y};this.yB.hL(i("uRatioPxClip"),[t.x,t.y])}let o=!1;return this.lz===this.yB.gl.POINTS?(this.yB.Jm(this.lz,e),o=!0):this.IV&&(this.yB.jL(this.lz,0,this.IV.CV,e),o=!0),o}))),this}hE(t){return this.lE===t&&{}}Pb(t){this.Ya()>0&&this.Is();const i=this.Va(),s=Eh(i,t,this.La,!1,!1,this.ut,this.cs.ut,this.Ia,void 0,void 0);return void 0!==s?i[s]:void 0}Ae(t){return super.Ae(t)}wt(){return this.Ia.max.x}At(){return this.Ia.min.x}Ct(){return this.Ia.max.y}kt(){return this.Ia.min.y}hl(){return.5*this.size.S()}rl(){return.5*this.size.S()}$B(){return this.FV&&(this.yB.dL(this.FV),this.FV=void 0),this.IV&&(this.IV=void 0),this.PV&&(this.yB.dL(this.PV),this.PV=void 0),this.BV&&(this.yB.dL(this.BV),this.BV=void 0),this.OV&&(this.yB.dL(this.OV),this.OV=void 0),this.bz&&(this.tE.XE(this.bz),this.bz=void 0),this}}class Gm extends tr{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Sz={fill:void 0,border:void 0},this.cO=new nm,this.Ia=zi,this.LV=!1,this.RV=!1,this.EV=!1,this.zV=!1,this.Hc=[],this.tE=t,this.iE=i,this.Cz=r,this.yB=t.sE(),this.yz=this.yB.iR}Tr(){const t=this.Cz(),i={Ss:t=>this.Fz(i,t),ds:t=>this.Iz(i,t),sl:t=>this.VV(i,t),ov:t=>this.NV(i,t),wa:[],l:void 0,xo:0,GV:!0,lE:t.id,uE:t.color};return this.Hc.push(i),i}$a(){var t;return this.Hc.length=0,this.LV=!0,this.Di&&this.dn&&(null===(t=this.cs.un)||void 0===t?void 0:t.entity)===this&&this.dn(this,void 0,this.cs.un.collectionMember),this}Fz(t,i){var s;return t.GV=i,this.zV=!0,this.Di&&this.dn&&(null===(s=this.cs.un)||void 0===s?void 0:s.entity)===this&&this.cs.un.collectionMember===t&&this.dn(this,void 0,this.cs.un.collectionMember),t}Iz(t,i){return t.xo=i,this.EV=!0,t}VV(t,i){return t.wa=i,this.LV=!0,t}NV(t,i){return t.l=i,this.RV=!0,t}Is(){const t=this.po.S(),i=this.po.i,s=this.zo(),h=this.EV,r=this.LV,n=this.RV,o=this.zV,a=this.xe,l=this.Ho(),u=this.Hc.filter((t=>t.GV));if(this.cO.cL(this.ut),(r||o)&&(this.Ia=ts(...u.map((t=>Ji(t.wa))))),r||o){const t=ni(u.map((t=>[...t.wa,t.wa[0],{x:Number.NaN,y:Number.NaN}])).flat(),this.ut.ai()),i=this.ut.ai()?4:2;this.pz=this.yB.QO(t,!1,this.pz);let s=[];u.reduce(((h,r)=>{const n=h,o=(r.wa.length+1)*i,a=new Float32Array(t.buffer,n,o),l=e(a,void 0,i),u=h/(Float32Array.BYTES_PER_ELEMENT*i);for(let t=0;t<l.length;t+=1)l[t]+=u;return s=gi(s,l,{canReturnB:!0}),n+(o+1*i)*Float32Array.BYTES_PER_ELEMENT}),0);const h=new Uint16Array(s);this.WV=this.yB.RL(h,this.WV),this.HV=h.length,this.UV=t.length/i}const c=G(this.ve)&&this.ve,d=j(this.ve)&&this.ve,f=tt(this.ve)&&this.ve,g=et(this.ve)&&this.ve,m=c||d||g||f,y=ee(this.xe)&&this.xe,p=y&&y.getFillStyle(),S=G(p)&&p,b=S,v=y&&Math.max(y.getThickness(),0);if((s||l||i)&&(this.Sz.fill=m?{shader:this.yB.iL(im["2D"],c&&im.Color({dataType:"uniform"}),g&&im.Color({dataType:["gradient",g]}),f&&im.Color({dataType:["gradient",f]}),d&&im.Color({dataType:["lookup",d.getLookUpProperty()]}),im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0}),im.AttributeHighlight),mousePicking:t?{shader:this.yB.iL(im["2D"],im.MousePickingAttribute,im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0}),im.AttributeHighlight)}:void 0,fillStyleSolid:c,fillStyleLinearGradient:g,fillStyleRadialGradient:f,fillStylePaletted:d}:void 0,this.Sz.border=y&&b&&"number"==typeof v&&0!==v?{shader:this.yB.iL(im["2D"],im.Color({dataType:"uniform"}),im.LineInstanced2D({axisWorldTranslation:xg(this.ut),normalSource:void 0}),this.yz?im.AliasedEdge:void 0,im.AttributeHighlight),geometry:Am(this.yB,v),mousePicking:t?{shader:this.yB.iL(im["2D"],im.MousePickingAttribute,im.LineInstanced2D({axisWorldTranslation:xg(this.ut),normalSource:void 0}),im.AttributeHighlight)}:void 0,fillStyleSolid:S,thickness:v}:void 0,d?this.bz=this.tE.YE(d.lut,this.bz):this.bz&&(this.tE.XE(this.bz),this.bz=void 0)),h||r){const t=u.reduce(((t,i)=>t+i.wa.length+2),0),i=new Float32Array(t);let s=0;u.forEach((t=>{const e=t.wa.length+2;for(let h=s;h<s+e;h+=1)i[h]=t.xo;s+=e})),this.$V=this.yB.QO(i,!0,this.$V)}if(t){if(r){const t=u.reduce(((t,i)=>t+i.wa.length+2),0),i=new Float32Array(4*t);let s=0;u.forEach((t=>{const e=t.wa.length+2;for(let h=s;h<s+4*e;h+=4)i[h]=t.uE.r,i[h+1]=t.uE.g,i[h+2]=t.uE.b,i[h+3]=t.uE.a;s+=4*e})),this.jV=this.yB.QO(i,!1,this.jV)}}else this.jV&&(this.yB.dL(this.jV),this.jV=void 0);if(d&&"value"===d.getLookUpProperty()&&(n||r)){const t=u.reduce(((t,i)=>t+i.wa.length+2),0),i=new Float32Array(t);let s=0;u.forEach((t=>{const e=void 0!==t.l?t.l:-34028234663852886e22,h=t.wa.length+2;for(let t=s;t<s+h;t+=1)i[t]=e;s+=h})),this.YV=this.yB.QO(i,!1,this.YV)}return f?this.pE=cm(this.vo||this.Ia,this.ut,f.getPosition(),f.getExtent(),f.getShape(),this.yB.nO()):g?this.SE=dm(this.vo||this.Ia,this.ut,g.getAngle(!0),this.yB.nO()):(this.pE=void 0,this.SE=void 0),this.EV=!1,this.zV=!1,this.LV=!1,this.RV=!1,this.po.i=!1,this.Wo(this.ve),this.jo(a),this}mB(t){var i,s;const{fill:e,border:h}=this.Sz,r=this.pz,n=this.$V,o=this.jV;if(!r||!n)return this;if(e){const{fillStyleSolid:s,fillStyleLinearGradient:h,fillStyleRadialGradient:a,fillStylePaletted:l}=e,u=this.WV,c=this.HV,d=1===t?null===(i=e.mousePicking)||void 0===i?void 0:i.shader:e.shader;if(!d||!r||!u||void 0===c)return this;this.yB.iO(d).sL(d,((i,e,d,f)=>{if(this.ut instanceof Ns||this.ut instanceof Eu?this.yB.hL(i("uScale"),this.cO.aL()).hL(i("uDisp"),this.cO.lL()).hL(f("uScaleStart_highpart"),this.cO.HR()).hL(f("uScaleStart_lowpart"),this.cO.UR()):this.ut instanceof Gs&&this.yB.hL(f("uScaleStart"),this.cO.MixedScaleXY.uScaleStart).hL(f("uScaleStartLog"),this.cO.MixedScaleXY.uScaleStartLog).hL(f("uScaleInterval"),this.cO.MixedScaleXY.uScaleInterval).hL(f("uScaleIntervalLog"),this.cO.MixedScaleXY.uScaleIntervalLog).hL(i("uViewportStart"),this.cO.MixedScaleXY.uViewportStart).hL(i("uViewportSize"),this.cO.MixedScaleXY.uViewportSize),this.yB.xR(d,r,this.ut.ai(),void 0).UL(u).HL(e("aIsHighlighted"),1===t||2===t?this.yB.cR:n).oL(i("uHighlightColorOffset"),this.wo).nL(i("uRenderEffectMask"),2===t?1:0),1===t){if(!o)return!1;this.yB.WL(e("aColor"),o)}else if(s)this.yB.oL(i("uColor"),s.getColor());else if(a){if(!this.pE)return!1;this.yB.pR(d,this.pE,a)}else if(h){if(!this.SE)return!1;this.yB.SR(d,this.SE,h)}else if(l){if(!this.bz)return!1;if(this.yB.OR(d,l.lut,this.bz,0),"value"===l.getLookUpProperty()){if(!this.YV)return!1;this.yB.HL(e("aLookupValue"),this.YV)}}return this.yB.$L(c),!0}))}if(h){const{geometry:i,fillStyleSolid:e,thickness:a}=h,l=this.UV,u=1===t?null===(s=h.mousePicking)||void 0===s?void 0:s.shader:h.shader;if(!u||!r||!l)return this;this.yB.iO(u).sL(u,((s,h,u,c)=>{if(this.ut instanceof Ns||this.ut instanceof Eu?this.yB.hL(s("uScale"),this.cO.aL()).hL(s("uDisp"),this.cO.lL()).hL(c("uScaleStart_highpart"),this.cO.HR()).hL(c("uScaleStart_lowpart"),this.cO.UR()):this.ut instanceof Gs&&this.yB.hL(c("uScaleStart"),this.cO.MixedScaleXY.uScaleStart).hL(c("uScaleStartLog"),this.cO.MixedScaleXY.uScaleStartLog).hL(c("uScaleInterval"),this.cO.MixedScaleXY.uScaleInterval).hL(c("uScaleIntervalLog"),this.cO.MixedScaleXY.uScaleIntervalLog).hL(s("uViewportStart"),this.cO.MixedScaleXY.uViewportStart).hL(s("uViewportSize"),this.cO.MixedScaleXY.uViewportSize),this.yB.eL(1===t||2===t?this.yB.cR:n,1,{location:h("aIsHighlighted"),size:1}).oL(s("uHighlightColorOffset"),this.wo).nL(s("uRenderEffectMask"),2===t?1:0),1===t){if(!o)return!1;this.yB.eL(o,1,{location:h("aColor"),size:4})}else e&&this.yB.oL(s("uColor"),e.getColor());return wm.uz(this.ut.ai(),this.yB,r,u,this.ut.ai()?4:2,0),wm.mB(this.tE,i,u,this.yz&&1!==t,1===t,a,l),!0}))}return this}hE(t){const i=this.Hc.find((i=>i.lE===t));return!!i&&{collectionMember:i}}$B(){return this.WV&&(this.yB.dL(this.WV),this.WV=void 0),this.pz&&(this.yB.dL(this.pz),this.pz=void 0),this.$V&&(this.yB.dL(this.$V),this.$V=void 0),this.jV&&(this.yB.dL(this.jV),this.jV=void 0),this.YV&&(this.yB.dL(this.YV),this.YV=void 0),this.Sz={fill:void 0,border:void 0},this.bz&&(this.tE.XE(this.bz),this.bz=void 0),this}wt(){return this.Ia.max.x}At(){return this.Ia.min.x}Ct(){return this.Ia.max.y}kt(){return this.Ia.min.y}hl(){return Di(this.xe)}rl(){return Di(this.xe)}}class Wm extends hr{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.cO=new nm,this.XV=zi,this.tE=t,this.iE=i,this.lE=r,this.uE=n,this.yB=t.sE(),this.iE=i}Is(){super.Is();const t=this.po.S(),i=this.zo(),s=this.Xo.i||this.$.i||this.Jo.i||this.ta.i,e=this.xe,h=this.Ho(),r=e.getThickness(),o=this.$o(r),a=this.Jo.S();this.cO.cL(this.ut);const l=this.ut.Ai();if(s||l){const t=this.$.S();this.wa=function(t,i,s,e,h){const r=((t,i,s)=>[t,n(t.x+i,t.y),n(t.x+i,t.y+s),n(t.x,t.y+s)])(t,i,s);if(0!==e||e%360!=0){const t=e*Math.PI/180;r[0]=rs(r[0],h,t),r[1]=rs(r[1],h,t),r[2]=rs(r[2],h,t),r[3]=rs(r[3],h,t)}return r}(this.Xo.S(),t.x,t.y,a,this.ta.S());const i=ni(this.wa,this.ut.ai());this.fE=this.yB.QO(i,!1,this.fE),this.mE=this.wa.length}this.XV=Ji(this.wa);const u=G(this.ve)&&this.ve,c=tt(this.ve)&&this.ve,d=et(this.ve)&&this.ve,f=qn(this.ve)&&this.ve,g=u||c||d||f;if(i&&(this.bE=g?this.yB.iL(im["2D"],u&&im.Color({dataType:"uniform"}),d&&im.Color({dataType:["gradient",d]}),c&&im.Color({dataType:["gradient",c]}),f&&im.Color({dataType:["image",f.getFitMode()]}),im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0})):void 0),c?this.pE=cm(this.vo||this.XV,this.ut,c.getPosition(),c.getExtent(),c.getShape(),this.yB.nO()):d?this.SE=dm(this.vo||this.XV,this.ut,d.getAngle(!0),this.yB.nO()):(this.pE=void 0,this.SE=void 0),f){const t=f.getSource();if((!this.ZV||i)&&t){this.ZV&&(this.ZV.texture.sO(this),this.yB.dL(this.ZV.texCoordsBuffer));const i=this.yB.bR(t);i.iO(this),this.ZV={texture:i,texCoordsBuffer:this.yB.QO([]),sourceMissingTexture:this.yB.gR(new Uint8Array(Object.values(f.getSourceMissingColor().toJS()).map((t=>255*t))),this.yB.gl.RGBA,!1,!0,{x:1,y:1},!1),textureReadyCallback:()=>{this.ZV&&f&&(this.KV(),this.cs.vs())}},i.DO(this.ZV.textureReadyCallback),this.KV()}this.ZV&&this.ZV.texture.wO&&this.ZV.texture.AO&&this.ZV.texture.xO&&(this.ZV.texture.Is(),this.cs.vs()),(l||s)&&this.ZV&&this.ZV.texture.wO&&this.KV()}else this.ZV&&(this.ZV.texture.sO(this),this.yB.dL(this.ZV.texCoordsBuffer),this.ZV=void 0);if(s||o||l&&1!==r){if(1===r||-1===r)[this.vE,this.qV]=[this.wa,void 0];else{const t=this.ut;[this.vE,this.qV]=t instanceof Gs?((t,i,s)=>{const e=t[0],h=t[1],r=t[2],n=t[3],o=i/2;return[[s.Ci(e,h,o,-o),s.Ci(h,e,-o,-o),s.Ci(n,r,-o,-o),s.Ci(r,n,o,-o),s.Ci(e,h,-o,o),s.Ci(h,e,o,o),s.Ci(n,r,o,o),s.Ci(r,n,-o,o)],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.wa,r,t):((t,i,s)=>{const e=t[0],h=t[1],r=t[2],o=t[3],a=n(i.x*s*.5,i.y*s*.5),l=os(ns(h,e)),u=os(ns(o,e)),c=ms(l),d=ms(u);return[[cs(e,cs(us(c,a.x),us(d,a.y))),cs(h,cs(us(l,a.x),us(d,a.y))),cs(o,cs(us(c,a.x),us(u,a.y))),cs(r,cs(us(l,a.x),us(u,a.y))),cs(e,cs(us(l,a.x),us(u,a.y))),cs(h,cs(us(c,a.x),us(u,a.y))),cs(o,cs(us(l,a.x),us(d,a.y))),cs(r,cs(us(c,a.x),us(d,a.y)))],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.wa,t.ki(),r)}this.ME=this.yB.QO(ni(this.vE,this.ut.ai()),!1,this.ME),this.qV?(this.oz=this.yB.RL(new Uint16Array(this.qV),this.oz),this.xE=this.qV.length):(this.oz&&this.yB.dL(this.oz),this.oz=void 0,this.xE=this.vE.length)}const m=ee(e)&&e,y=m&&m.getFillStyle(),p=y&&G(y)&&y,S=y&&et(y)&&y,b=y&&tt(y)&&y,v=m,x=p||S||b;return h&&(this.TE=v&&x?this.yB.iL(im["2D"],im.Color({dataType:b?["gradient",b]:S?["gradient",S]:"uniform"}),im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0})):void 0),b?this.kE=cm(this.XV,this.ut,b.getPosition(),b.getExtent(),b.getShape(),this.yB.nO()):S?this.CE=dm(this.XV,this.ut,S.getAngle(!0),this.yB.nO()):(this.kE=void 0,this.CE=void 0),this.FE=t&&g?this.FE||this.yB.iL(im["2D"],im.Color({dataType:"uniform"}),im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0})):void 0,this.IE=t&&this.xe!==rt?this.IE||this.yB.iL(im["2D"],im.Color({dataType:"uniform"}),im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0})):void 0,this.Wo(this.ve),this.jo(e),this.Xo.i=!1,this.Jo.i=!1,this.$.i=!1,this.ta.i=!1,this}hE(t){return this.lE===t&&{}}KV(){if(this.ZV&&qn(this.ve)){const t=ut(this.fa(),this.ut,this.cs.ut),i=ds(ut(cs(this.fa(),this.$t()),this.ut,this.cs.ut),t);this.ZV.texCoordsBuffer=this.yB.QO(((t,i,s,e,h)=>{const r=Math.min(s/t,e/i),n=t*r,o=i*r,a=s/n,l=e/o,u=n/s,c=o/e;let d=0,f=1,g=0,m=1;switch(h){case Xn.Fill:l<a?(d=0,f=1,g=.5+-u/2,m=.5+u/2):(g=0,m=1,d=.5+-c/2,f=.5+c/2);break;case Xn.Fit:l<a?(g=0,m=1,d=.5+-a/2,f=.5+a/2):(d=0,f=1,g=.5+-l/2,m=.5+l/2);break;case Xn.Center:{const h=s/t,r=e/i;d=.5+-h/2,f=.5+h/2,g=.5+-r/2,m=.5+r/2}break;case Xn.Tile:d=0,f=s/t,g=0,m=e/i;break;case Xn.Stretch:default:d=0,f=1,g=0,m=1}return new Float32Array([d,m,f,m,f,g,d,g])})(this.ZV.texture.MO,this.ZV.texture._O,i.x,i.y,this.ve.getFitMode()),!1,this.ZV.texCoordsBuffer)}}mB(t){const i=1===t?this.FE:this.bE,s=this.fE,e=this.mE,h=this.ve;i&&s&&e&&h!==R&&(this.yB.iO(i),this.yB.sL(i,((i,r,n,o)=>{if(this.ut instanceof Ns||this.ut instanceof Eu?this.yB.hL(i("uScale"),this.cO.aL()).hL(i("uDisp"),this.cO.lL()).hL(o("uScaleStart_highpart"),this.cO.HR()).hL(o("uScaleStart_lowpart"),this.cO.UR()):this.ut instanceof Gs&&this.yB.hL(o("uScaleStart"),this.cO.MixedScaleXY.uScaleStart).hL(o("uScaleStartLog"),this.cO.MixedScaleXY.uScaleStartLog).hL(o("uScaleInterval"),this.cO.MixedScaleXY.uScaleInterval).hL(o("uScaleIntervalLog"),this.cO.MixedScaleXY.uScaleIntervalLog).hL(i("uViewportStart"),this.cO.MixedScaleXY.uViewportStart).hL(i("uViewportSize"),this.cO.MixedScaleXY.uViewportSize),1===t)this.yB.oL(i("uColor"),this.uE);else if(G(h))this.yB.oL(i("uColor"),h.getColor());else if(tt(h)){if(!this.pE)return!1;this.yB.pR(n,this.pE,h)}else if(et(h)){if(!this.SE)return!1;this.yB.SR(n,this.SE,h)}else if(qn(h)){if(!this.ZV)return!1;const t=this.ZV&&this.ZV.texture.OO();this.yB.oL(o("uColor"),h.getSurroundingColor()).rL(i("uColorTexture"),t||this.ZV.sourceMissingTexture,0).eL(this.ZV.texCoordsBuffer,void 0,{location:r("aTextureCoord"),size:2}).PL(h.fitMode)}return this.yB.nL(i("uIsHighlighted"),1===t||2===t?0:this.xo).oL(i("uHighlightColorOffset"),this.wo).nL(i("uRenderEffectMask"),2===t?1:0).xR(n,s,this.ut.ai(),void 0).Jm(this.yB.gl.TRIANGLE_FAN,e),!0})));const r=1===t?this.IE:this.TE,n=this.xe,o=this.ME;return r&&o&&ee(n)&&(this.yB.iO(r),this.yB.sL(r,((i,s,e,h)=>{this.ut instanceof Ns||this.ut instanceof Eu?this.yB.hL(i("uScale"),this.cO.aL()).hL(i("uDisp"),this.cO.lL()).hL(h("uScaleStart_highpart"),this.cO.HR()).hL(h("uScaleStart_lowpart"),this.cO.UR()):this.ut instanceof Gs&&this.yB.hL(h("uScaleStart"),this.cO.MixedScaleXY.uScaleStart).hL(h("uScaleStartLog"),this.cO.MixedScaleXY.uScaleStartLog).hL(h("uScaleInterval"),this.cO.MixedScaleXY.uScaleInterval).hL(h("uScaleIntervalLog"),this.cO.MixedScaleXY.uScaleIntervalLog).hL(i("uViewportStart"),this.cO.MixedScaleXY.uViewportStart).hL(i("uViewportSize"),this.cO.MixedScaleXY.uViewportSize);const r=n.getFillStyle();if(1===t)this.yB.oL(i("uColor"),this.uE);else if(G(r))this.yB.oL(i("uColor"),r.getColor());else if(tt(r)){if(!this.kE)return!1;this.yB.pR(e,this.kE,r)}else if(et(r)){if(!this.CE)return!1;this.yB.SR(e,this.CE,r)}return this.yB.nL(i("uIsHighlighted"),1===t||2===t?0:this.xo).oL(i("uHighlightColorOffset"),this.wo).nL(i("uRenderEffectMask"),2===t?1:0).xR(e,o,this.ut.ai(),void 0),this.oz?this.yB.UL(this.oz).$L(this.xE):this.yB.Jm(this.yB.gl.LINE_LOOP,this.xE),!0}))),this}$B(){return this.oz&&(this.yB.dL(this.oz),this.oz=void 0),this.fE&&(this.yB.dL(this.fE),this.fE=void 0),this.ME&&(this.yB.dL(this.ME),this.ME=void 0),this.ZV&&(this.ZV.texture.sO(this),this.ZV.texture.BO(this.ZV.textureReadyCallback),this.yB.jB(this.ZV.sourceMissingTexture),this.yB.dL(this.ZV.texCoordsBuffer),this.ZV=void 0),this.bE=void 0,this.TE=void 0,this.FE=void 0,this.IE=void 0,this}wt(){return Math.max(this.Xo.S().x,this.Xo.S().x+this.$.S().x)}At(){return Math.min(this.Xo.S().x,this.Xo.S().x+this.$.S().x)}Ct(){return Math.max(this.Xo.S().y,this.Xo.S().y+this.$.S().y)}kt(){return Math.min(this.Xo.S().y,this.Xo.S().y+this.$.S().y)}hl(){return Di(this.xe)}rl(){return Di(this.xe)}}class Hm extends nr{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.cO=new nm,this.tE=t,this.iE=i,this.lE=r,this.uE=n,this.yB=t.sE(),this.iE=i}Pb(t){let i,s=Number.MAX_VALUE;for(const e of this.wa){const h=Yi(ut(e,this.ut,this.cs.ut),t);h<s&&(s=h,i=e)}return i}Is(){const t=this.po.S(),i=this.zo(),s=this.il,h=this.wa.length>=3,r=this.xe,n=this.Ho(),o=r.getThickness(),a=this.$o(o);this.cO.cL(this.ut),this.LM=this.ut.ki();const l=this.ut.Ai();if(s&&(this.Ia=Ji(this.wa)),s&&h){const t=ni(this.wa,this.ut.ai());this.fE=this.yB.QO(t,!1,this.fE),this.JV=new Uint16Array(e(t)),this.QV=this.yB.RL(this.JV,this.QV),this.mE=this.JV.length}const u=G(this.ve)&&this.ve,c=j(this.ve)&&this.ve,d=tt(this.ve)&&this.ve,f=et(this.ve)&&this.ve,g=u||c&&"value"!==c.getLookUpProperty()&&c||f||d;if(i&&(c?this.bz=this.tE.YE(c.lut,this.bz):this.bz&&(this.tE.XE(this.bz),this.bz=void 0),this.bE=g?this.yB.iL(im["2D"],u&&im.Color({dataType:"uniform"}),f&&im.Color({dataType:["gradient",f]}),d&&im.Color({dataType:["gradient",d]}),c&&im.Color({dataType:["lookup",c.getLookUpProperty()]}),im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0})):void 0),d?this.pE=cm(this.vo||this.Ia,this.ut,d.getPosition(),d.getExtent(),d.getShape(),this.yB.nO()):f?this.SE=dm(this.vo||this.Ia,this.ut,f.getAngle(!0),this.yB.nO()):(this.pE=void 0,this.SE=void 0),(s||a||l&&1!==o)&&h){const t=1===o||-1===o?this.wa:fm(this.wa,this.LM,o);this.vE=ni(t,this.ut.ai()),this.ME=this.yB.QO(this.vE,!0,this.ME),this.xE=t.length}const m=ee(r)&&r,y=m&&m.getFillStyle(),p=y&&G(y)&&y,S=y&&et(y)&&y,b=y&&tt(y)&&y,v=m,x=p||S||b;return n&&(this.TE=v&&x?this.yB.iL(im["2D"],im.Color({dataType:b?["gradient",b]:S?["gradient",S]:"uniform"}),im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0})):void 0),b?this.kE=cm(this.vo||this.Ia,this.ut,b.getPosition(),b.getExtent(),b.getShape(),this.yB.nO()):S?this.CE=dm(this.vo||this.Ia,this.ut,S.getAngle(!0),this.yB.nO()):(this.kE=void 0,this.CE=void 0),this.FE=t&&g?this.FE||this.yB.iL(im["2D"],im.MousePicking,im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0})):void 0,this.IE=t&&this.xe!==rt?this.FE||this.yB.iL(im["2D"],im.MousePicking,im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0})):void 0,this.il=!1,this.Wo(this.ve),this.jo(r),this}mB(t){const i=this.ve,s=1===t?this.FE:this.bE,e=this.fE,h=this.mE;s&&e&&h&&this.yB.iO(s).sL(s,((s,h,r,n)=>{if(this.yB.hL(s("uScale"),this.cO.aL()).hL(s("uDisp"),this.cO.lL()).hL(n("uScaleStart_highpart"),this.cO.HR()).hL(n("uScaleStart_lowpart"),this.cO.UR()).xR(r,e,this.ut.ai(),void 0).UL(this.QV).nL(s("uIsHighlighted"),1===t||2===t?0:this.xo).oL(s("uHighlightColorOffset"),this.wo).nL(s("uRenderEffectMask"),2===t?1:0),1===t)this.yB.oL(s("uColor"),this.uE);else if(G(i))this.yB.oL(s("uColor"),i.getColor());else if(tt(i)){if(!this.pE)return!1;this.yB.pR(r,this.pE,i)}else if(et(i)){if(!this.SE)return!1;this.yB.SR(r,this.SE,i)}else j(i)&&this.bz&&this.yB.OR(r,i.lut,this.bz,0);return this.yB.$L(this.mE),!0}));const r=1===t?this.IE:this.TE,n=this.xe,o=this.ME,a=this.xE;return r&&o&&a&&this.yB.iO(r).sL(r,((i,s,e,h)=>{this.yB.nL(i("uIsHighlighted"),1===t||2===t?0:this.xo).oL(i("uHighlightColorOffset"),this.wo).nL(i("uRenderEffectMask"),2===t?1:0).hL(i("uScale"),this.cO.aL()).hL(i("uDisp"),this.cO.lL()).xR(e,o,this.ut.ai(),void 0);const r=n.getFillStyle();if(1===t)this.yB.oL(i("uColor"),this.uE);else if(G(r))this.yB.oL(i("uColor"),r.getColor());else if(tt(r)){if(!this.kE)return!1;this.yB.pR(e,this.kE,r)}else if(et(r)){if(!this.CE)return!1;this.yB.SR(e,this.CE,r)}const a=n.getThickness(),l=-1===a||1===a;return this.yB.Jm(l?this.yB.gl.LINE_LOOP:this.yB.gl.TRIANGLE_STRIP,this.xE),!0})),this}hE(t){return this.lE===t&&{}}$B(){return this.QV&&(this.yB.dL(this.QV),this.QV=void 0),this.fE&&(this.yB.dL(this.fE),this.fE=void 0),this.ME&&(this.yB.dL(this.ME),this.ME=void 0),this.bE=void 0,this.TE=void 0,this.FE=void 0,this.IE=void 0,this.bz&&(this.tE.XE(this.bz),this.bz=void 0),this}}const Um=(t,i)=>{let s=0;const e=[];for(;s<t;){const h=s;let r=i;const n=s>0;r-=n?1:0,r-=s+r<t?1:0;const o=Math.min(r,t-h),a=s-(n?1:0),l={start:a,startUnique:h,sizeData:Math.min(i,t-a),sizeUniqueData:o};e.push(l),s+=o}return e},$m=(t,i)=>{let s=0;const e=[];for(;s<t;){const h=s;let r=i;const n=s>0;r-=n?1:0,r-=0;const o=Math.min(r,t-h),a=s-(n?1:0),l={start:a,startUnique:h,sizeData:Math.min(i,t-a),sizeUniqueData:o};e.push(l),s+=o}return e},jm=(t,i,s,e)=>{if(s){const t=new Map;return i.gridTiles.forEach((i=>{t.set(i,{type:s,dataInvalidationRanges:[{tileInvalidationOffset:{primary:0,secondary:0},tileInvalidationLength:i.sizeHeatmapDataVectors}]})})),t}const h=new Map;for(let s=0;s<t.length;s+=1){const r=t[s],n={x:r.startPrimary,y:r.startSecondary},o={x:n.x+r.lengthPrimary-1,y:n.y+r.lengthSecondary-1},a=[n,{x:o.x,y:n.y},o,{x:n.x,y:o.y}];i.gridTiles.forEach((t=>{const i=t.iFirstVector,s=e(t),n={x:i.primary+s.primary-1,y:i.secondary+s.secondary-1},o=[{x:i.primary,y:i.secondary},{x:n.x,y:i.secondary},n,{x:i.primary,y:n.y}];if(!Wi(a,o))return;let l=h.get(t);l||(l={type:r.type,dataInvalidationRanges:[]},h.set(t,l));const u=Hi(a,o),c={primary:u.min.x-i.primary,secondary:u.min.y-i.secondary},d={primary:1+u.max.x-u.min.x,secondary:1+u.max.y-u.min.y};let f=!1;const g=[{x:c.primary,y:c.secondary},{x:c.primary+d.primary,y:c.secondary},{x:c.primary+d.primary,y:c.secondary+d.secondary},{x:c.primary,y:c.secondary+d.secondary}];for(let t=0;t<l.dataInvalidationRanges.length;t+=1)if(!f){const i=l.dataInvalidationRanges[t],s=[{x:i.tileInvalidationOffset.primary,y:i.tileInvalidationOffset.secondary},{x:i.tileInvalidationOffset.primary+i.tileInvalidationLength.primary,y:i.tileInvalidationOffset.secondary},{x:i.tileInvalidationOffset.primary+i.tileInvalidationLength.primary,y:i.tileInvalidationOffset.secondary+i.tileInvalidationLength.secondary},{x:i.tileInvalidationOffset.primary,y:i.tileInvalidationOffset.secondary+i.tileInvalidationLength.secondary}];if(Wi(g,s)){const t=(m=g,y=s,{min:{x:Math.min(m[0].x,y[0].x),y:Math.min(m[0].y,y[0].y)},max:{x:Math.max(m[2].x,y[2].x),y:Math.max(m[2].y,y[2].y)}});i.tileInvalidationOffset.primary=t.min.x,i.tileInvalidationOffset.secondary=t.min.y,i.tileInvalidationLength.primary=t.max.x-t.min.x,i.tileInvalidationLength.secondary=t.max.y-t.min.y,f=!0}}var m,y;f||l.dataInvalidationRanges.push({tileInvalidationLength:d,tileInvalidationOffset:c})}))}return h},Ym=(t,i,s)=>{if(1!==t.length||0!==i.startPrimary||0!==i.startSecondary||i.lengthPrimary!==t[0].sizeHeatmapDataVectors.primary||i.lengthSecondary!==t[0].sizeHeatmapDataVectors.secondary)t.forEach((t=>{const e=s(t),h=Math.max(i.startPrimary,t.iFirstVector.primary),r=Math.min(i.startPrimary+i.lengthPrimary-1,t.iFirstVector.primary+t.sizeHeatmapDataVectors.primary-1),n=Math.max(i.startSecondary,t.iFirstVector.secondary),o=Math.min(i.startSecondary+i.lengthSecondary-1,t.iFirstVector.secondary+t.sizeHeatmapDataVectors.secondary-1);for(let s=h;s<=r;s+=1){const h=s-i.startPrimary,r=i.values[h],a=(s-t.iFirstVector.primary)*t.sizeHeatmapDataVectors.secondary;for(let s=n;s<=o;s+=1){const h=s-i.startSecondary,n=s-t.iFirstVector.secondary,o=r[h];e[a+n]=o}}}));else{const e=t[0],h=s(e);for(let t=0;t<i.lengthPrimary;t+=1){const s=t*e.sizeHeatmapDataVectors.secondary;h.set(i.values[t],s)}}},Xm=(t,i,s)=>{var e,h;const r=null===(e=t.gl2)||void 0===e?void 0:e.ctx;if(r)return t.gR(null,r.RED,!1,!0,{x:i,y:s},!1,r.FLOAT,r.R32F);const n=t.gl;return(null===(h=t.gl1)||void 0===h?void 0:h.optional.OES_texture_float)?t.gR(null,n.LUMINANCE,!1,!0,{x:i,y:s},!1,n.FLOAT):t.gR(null,n.RGBA,!1,!0,{x:i,y:s},!1,n.UNSIGNED_BYTE)},Zm=(t,i,s,e)=>{i.forEach(((i,h)=>{var r,n;const o=s(h),a=e(h),l=t.gl;l.bindTexture(l.TEXTURE_2D,a),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const u=null===(r=t.gl2)||void 0===r?void 0:r.ctx,c=i.dataInvalidationRanges.length,d=i.dataInvalidationRanges.reduce(((t,i)=>t+i.tileInvalidationLength.primary),0)/h.sizeHeatmapDataVectors.primary;1===c&&d<1||d<.5&&c<10?i.dataInvalidationRanges.forEach((i=>{var s;const e=i.tileInvalidationOffset.primary*h.sizeHeatmapDataVectors.secondary,r=e+i.tileInvalidationLength.primary*h.sizeHeatmapDataVectors.secondary;if(u)u.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,u.RED,u.FLOAT,o.subarray(e,r));else if(null===(s=t.gl1)||void 0===s?void 0:s.optional.OES_texture_float)l.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,l.LUMINANCE,l.FLOAT,o.subarray(e,r));else{const t=new Uint8Array(o.buffer).subarray(4*e,4*r);l.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,l.RGBA,l.UNSIGNED_BYTE,t)}})):u?u.texImage2D(l.TEXTURE_2D,0,u.R32F,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,u.RED,u.FLOAT,o):(null===(n=t.gl1)||void 0===n?void 0:n.optional.OES_texture_float)?l.texImage2D(l.TEXTURE_2D,0,l.LUMINANCE,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,l.LUMINANCE,l.FLOAT,o):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,l.RGBA,l.UNSIGNED_BYTE,new Uint8Array(o.buffer)),l.bindTexture(l.TEXTURE_2D,null)}))};class Km extends Qh{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.tN=f("bilinear"),this.cu=Th.lineStyle,this.engine=t,this.Ia=c({x:Math.min(r.start.x,r.start.x+r.columns*r.step.x),y:Math.min(r.start.y,r.start.y+r.rows*r.step.y)},{x:Math.max(r.start.x,r.start.x+r.columns*r.step.x),y:Math.max(r.start.y,r.start.y+r.rows*r.step.y)});const n="columns"===r.dataOrder?r.columns:r.rows,o="columns"===r.dataOrder?r.rows:r.columns;this.wn={...r,primaryDimensionVectorsCount:n,secondaryDimensionVectorsCount:o}}cS(t){return this.tN.u(t),this}dS(){return this.tN.S()}du(t){return this.cu="function"==typeof t?t(this.cu):t,this}fu(){return this.cu}}class qm extends Km{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r),this.cO=new nm,this.Sz={},this.iN=[],this.sN=!1,this.Ra=!1,this.eN=Um,this.tE=t,this.iE=i,this.lE=n,this.uE=o,this.yB=t.sE(),this.iE=i;const a=Math.min(this.yB.UB,void 0!==r.hN?r.hN:2048),l={x:Math.min(a,this.wn.primaryDimensionVectorsCount),y:Math.min(a,this.wn.secondaryDimensionVectorsCount)},u=((t,i,s,e)=>{const h=[],r=s(t.primaryDimensionVectorsCount,i.x),n=s(t.secondaryDimensionVectorsCount,i.y);let o;return r.forEach((t=>n.forEach((i=>{const s={iFirstVector:{primary:t.start,secondary:i.start},iFirstUniqueVector:{primary:t.startUnique,secondary:i.startUnique},sizeHeatmapDataVectors:{primary:t.sizeData,secondary:i.sizeData},sizeUniqueHeatmapDataVectors:{primary:t.sizeUniqueData,secondary:i.sizeUniqueData}};h.push(s)})))),o=[],h.forEach((t=>{let i=o.find((i=>i.sizeHeatmapData.primary===t.sizeHeatmapDataVectors.primary&&i.sizeHeatmapData.secondary===t.sizeHeatmapDataVectors.secondary));i||(i={sizeHeatmapData:t.sizeHeatmapDataVectors,tiles:[]},o.push(i)),i.tiles.push(t)})),{gridTiles:h,gridTileSizes:o}})(this.wn,l,this.eN),c=u.gridTiles.map((t=>{const i="columns"===this.wn.dataOrder?{x:this.wn.start.x+this.wn.step.x*t.iFirstVector.primary,y:this.wn.start.y+this.wn.step.y*t.iFirstVector.secondary}:{x:this.wn.start.x+this.wn.step.x*t.iFirstVector.secondary,y:this.wn.start.y+this.wn.step.y*t.iFirstVector.primary},s="columns"===this.wn.dataOrder?{x:this.wn.step.x*t.sizeHeatmapDataVectors.primary,y:this.wn.step.y*t.sizeHeatmapDataVectors.secondary}:{x:this.wn.step.x*t.sizeHeatmapDataVectors.secondary,y:this.wn.step.y*t.sizeHeatmapDataVectors.primary},e="columns"===this.wn.dataOrder?{x:this.wn.start.x+this.wn.step.x*t.iFirstUniqueVector.primary,y:this.wn.start.y+this.wn.step.y*t.iFirstUniqueVector.secondary}:{x:this.wn.start.x+this.wn.step.x*t.iFirstUniqueVector.secondary,y:this.wn.start.y+this.wn.step.y*t.iFirstUniqueVector.primary},h="columns"===this.wn.dataOrder?{x:this.wn.step.x*t.sizeUniqueHeatmapDataVectors.primary,y:this.wn.step.y*t.sizeUniqueHeatmapDataVectors.secondary}:{x:this.wn.step.x*t.sizeUniqueHeatmapDataVectors.secondary,y:this.wn.step.y*t.sizeUniqueHeatmapDataVectors.primary},r=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary);return{...t,startLocationAxis:i,startRenderLocationAxis:e,sizeAxis:s,renderSizeAxis:h,intensityData:r,hasIntensityData:!1}})),d=u.gridTileSizes.map((t=>({...t,tiles:c.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary))})));this.rN={gridTiles:c,gridTileSizes:d}}Is(){const t=this.iN,i=this.ve,s=this.zo(),e=this.cu,h=e!==this.Du,r=j(i)&&i,n=G(i)&&i,o=r&&r.getPalette(),a=this.tN.i,l=this.tN.S(),u=this.Ra,c=this.po.S();this.nN=this.nN||this.oN();const d=this.nN,f=jm(t,d,u?"intensity":void 0,(t=>t.sizeHeatmapDataVectors));f.size>0&&(Zm(this.yB,f,(t=>t.intensityData),(t=>t.intensityDataTexture)),this.sN=!0),this.cO.cL(this.ut);const g=this.Sz;if((s||a)&&(o?this.aN=this.tE.YE(o,this.aN):this.aN&&(this.tE.XE(this.aN),this.aN=void 0),g.tile=r&&this.aN?{renderMode:"paletted",fillStylePaletted:r,colorLookupTexture:this.aN,shader:this.yB.iL(im["2D"],im.ColorGrid2D({heatmapType:"intensity",interpolation:"bilinear"===l&&"bilinear",flipXY:"rows"===this.wn.dataOrder,intensityTextureType:this.yB.hR?"float":"ubyte",littleEndian:this.yB.IS_MACHINE_LITTLE_ENDIAN}),im.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:xg(this.ut),flipXY:"rows"===this.wn.dataOrder,normalSource:void 0}))}:n?{renderMode:"solid",fillStyleSolid:n,shader:this.yB.iL(im["2D"],im.Color({dataType:"uniform"}),im.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:xg(this.ut),flipXY:"rows"===this.wn.dataOrder,normalSource:void 0}))}:void 0),h){const t=ee(e)&&e,i=t&&t.getFillStyle(),s=G(i)&&i;g.wireframe=t&&s?-1===t.getThickness()?{renderMode:"primitive",shader:this.yB.iL(im["2D"],im.Color({dataType:"uniform"}),im.VertexLocation({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.wn.dataOrder,axisWorldTranslation:xg(this.ut),normalSource:void 0})),fillStyleSolid:s}:{renderMode:"triangulated",shader:this.yB.iL(im["2D"],im.Color({dataType:"uniform"}),im.LineInstanced2D({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.wn.dataOrder,axisWorldTranslation:xg(this.ut),normalSource:void 0})),geometry:Am(this.yB,1),solidLine:t,fillStyleSolid:s}:void 0,g.wireframe?this.lN=this.lN||this.uN():this.lN&&(this.yB.dL(this.lN.wireframeCoordinatesBuffer),this.lN=void 0)}return g.mousePicking=c?this.Sz.mousePicking||{shader:this.yB.iL(im["2D"],im.MousePicking,im.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:xg(this.ut),flipXY:"rows"===this.wn.dataOrder,normalSource:void 0}))}:void 0,this.Sz=g,this.Ra=!1,this.iN.length=0,this.Wo(i),this.Du=e,this.tN.i=!1,this}oN(){const t=this.rN.gridTiles.map((t=>{const i=Xm(this.yB,t.sizeHeatmapDataVectors.secondary,t.sizeHeatmapDataVectors.primary);return{...t,intensityDataTexture:i}})),i=this.rN.gridTileSizes.map((i=>({...i,tiles:t.filter((t=>t.sizeHeatmapDataVectors.primary===i.sizeHeatmapData.primary&&t.sizeHeatmapDataVectors.secondary===i.sizeHeatmapData.secondary))}))),s=this.yB.QO([0,0,1,0,0,1,1,1]),e=this.yB.gl.TRIANGLE_STRIP;return{gridTiles:t,gridTileSizes:i,rectangleLocationsBuffer:s,rectangleLocationsDrawMode:e,rectangleLocationsDrawLength:4}}uN(){const t=this.wn.primaryDimensionVectorsCount+1+this.wn.secondaryDimensionVectorsCount+1,i=new Float32Array(4*t);let s=0;for(let t=0;t<this.wn.primaryDimensionVectorsCount+1;t+=1)i[s+0]=t,i[s+1]=0,i[s+2]=t,i[s+3]=this.wn.secondaryDimensionVectorsCount,s+=4;for(let t=0;t<this.wn.secondaryDimensionVectorsCount+1;t+=1)i[s+0]=0,i[s+1]=t,i[s+2]=this.wn.primaryDimensionVectorsCount,i[s+3]=t,s+=4;return{wireframeCoordinatesBuffer:this.yB.QO(i),wireframeSegmentsLength:t}}mB(t){var i,s;const e=this.nN,h=1===t?null===(i=this.Sz.mousePicking)||void 0===i?void 0:i.shader:null===(s=this.Sz.tile)||void 0===s?void 0:s.shader;if(this.Sz.tile&&h&&e){const i=h,s=this.Sz.tile,r={x:(this.Ia.max.x-this.Ia.min.x)*Math.sign(this.wn.step.x),y:(this.Ia.max.y-this.Ia.min.y)*Math.sign(this.wn.step.y)},n={x:r.x/this.wn.columns,y:r.y/this.wn.rows},o=this.ut.ki(),a={x:n.x/o.x,y:n.y/o.y};if("solid"===s.renderMode||1===t)this.yB.iO(i).sL(i,((i,h,r)=>{if(1===t)this.yB.oL(i("uColor"),this.uE);else if("solid"===s.renderMode){const{fillStyleSolid:t}=s;this.yB.oL(i("uColor"),t.getColor())}return this.yB.nL(i("uIsHighlighted"),1===t||2===t?0:this.xo).oL(i("uHighlightColorOffset"),this.wo).nL(i("uRenderEffectMask"),2===t?1:0).hL(i("uScale"),this.cO.aL()).hL(i("uDisp"),this.cO.lL()).eL(e.rectangleLocationsBuffer,void 0,{location:h("aPos"),size:2}).hL(i("uScaling"),[this.wn.step.x*this.wn.columns,this.wn.step.y*this.wn.rows]).hL(i("uTranslationAxis"),[this.wn.start.x,this.wn.start.y]).Jm(e.rectangleLocationsDrawMode,e.rectangleLocationsDrawLength),!0}));else if("paletted"===s.renderMode){const{colorLookupTexture:h,fillStylePaletted:r}=s;this.yB.sL(i,((s,n,o)=>{let l=!1;var u,c;return this.yB.iO(i).hL(s("uScale"),this.cO.aL()).hL(s("uDisp"),this.cO.lL()).OR(o,r.lut,h,0).eL(e.rectangleLocationsBuffer,void 0,{location:n("aPos"),size:2}).nL(s("uIsHighlighted"),this.xo).oL(s("uHighlightColorOffset"),this.wo).nL(s("uRenderEffectMask"),2===t?1:0),u=t=>{this.yB.hL(s("uTileDimensions"),["columns"===this.wn.dataOrder?t.sizeHeatmapData.primary:t.sizeHeatmapData.secondary,"columns"===this.wn.dataOrder?t.sizeHeatmapData.secondary:t.sizeHeatmapData.primary])},c=(t,i)=>{let h;const r=this.yB.nO();if("bilinear"===this.tN.S()){const i=(this.ut.x.ot(t.startLocationAxis.x)+a.x/2)*r,s=(this.ut.y.ot(t.startLocationAxis.y)+a.y/2)*r;h=[i,s,(this.ut.x.ot(t.startLocationAxis.x+t.sizeAxis.x)-a.x/2)*r-i,(this.ut.y.ot(t.startLocationAxis.y+t.sizeAxis.y)-a.y/2)*r-s]}else{const i=this.ut.x.ot(t.startLocationAxis.x)*r,s=this.ut.y.ot(t.startLocationAxis.y)*r;h=[i,s,this.ut.x.ot(t.startLocationAxis.x+t.sizeAxis.x)*r-i,this.ut.y.ot(t.startLocationAxis.y+t.sizeAxis.y)*r-s]}this.yB.kL(s("uTileBounds"),h).hL(s("uScaling"),[t.renderSizeAxis.x,t.renderSizeAxis.y]).hL(s("uTranslationAxis"),[t.startRenderLocationAxis.x,t.startRenderLocationAxis.y]).rL(s("uTileIntensityValues"),t.intensityDataTexture,1).Jm(e.rectangleLocationsDrawMode,e.rectangleLocationsDrawLength),l=!0},e.gridTileSizes.forEach((t=>{u(t),t.tiles.forEach((t=>{c(t)}))})),l}))}}const r=this.lN,n=this.Sz.wireframe,o=1===t||null==n?void 0:n.shader;if(r&&n&&o&&"primitive"===n.renderMode){const i=o,{fillStyleSolid:s}=n;this.yB.iO(i).sL(i,((i,e,h)=>((this.ut instanceof Ns||this.ut instanceof Eu)&&this.yB.hL(i("uScale"),this.cO.aL()).hL(i("uDisp"),this.cO.lL()),this.yB.nL(i("uIsHighlighted"),1===t||2===t?0:this.xo).oL(i("uHighlightColorOffset"),this.wo).nL(i("uRenderEffectMask"),2===t?1:0).oL(i("uColor"),s.getColor()).eL(r.wireframeCoordinatesBuffer,void 0,{location:e("aPos"),size:2}).hL(i("uScaling"),[this.wn.step.x,this.wn.step.y]).hL(i("uTranslationAxis"),[this.wn.start.x,this.wn.start.y]).Jm(this.yB.gl.LINES,2*r.wireframeSegmentsLength),!0)))}else if(r&&n&&"triangulated"===n.renderMode){const{shader:i,geometry:s,solidLine:e,fillStyleSolid:h}=n;this.yB.iO(i).sL(i,((i,n,o)=>((this.ut instanceof Ns||this.ut instanceof Eu)&&this.yB.hL(i("uScale"),this.cO.aL()).hL(i("uDisp"),this.cO.lL()),this.yB.nL(i("uIsHighlighted"),1===t||2===t?0:this.xo).oL(i("uHighlightColorOffset"),this.wo).nL(i("uRenderEffectMask"),2===t?1:0).oL(i("uColor"),h.getColor()).nL(i("uThicknessPixels"),e.getThickness()).hL(i("uRatioPxClip"),[2/this.cs.$t().x,2/this.cs.$t().y]).eL(r.wireframeCoordinatesBuffer,1,{location:n("aLocationA"),size:2},{location:n("aLocationB"),size:2}).hL(i("uScaling"),[this.wn.step.x,this.wn.step.y]).hL(i("uTranslationAxis"),[this.wn.start.x,this.wn.start.y]),s.iO(o,!1).Jm(r.wireframeSegmentsLength),!0)))}return this}fS(t){return this.iN.push(t),Ym(this.rN.gridTiles,t,(t=>(t.hasIntensityData=!0,t.intensityData))),this}$a(){return this.sN&&(this.rN.gridTiles.forEach((t=>{t.intensityData.fill(0),t.hasIntensityData=!1})),this.Ra=!0,this.sN=!1),this}dispose(){super.dispose(),this.aN&&(this.tE.XE(this.aN),this.aN=void 0);const t=this.nN;t&&(t.gridTiles.forEach((t=>{this.yB.jB(t.intensityDataTexture)})),t.gridTiles.length=0,t.gridTileSizes.forEach((t=>{})),t.gridTileSizes.length=0,this.yB.dL(t.rectangleLocationsBuffer)),this.nN=void 0;const i=this.lN;return i&&this.yB.dL(i.wireframeCoordinatesBuffer),this.lN=void 0,this.Sz={},this}$B(){return this.dispose(),this}hE(t){return this.lE===t&&{}}Pb(t){const i=t,s="columns"===this.wn.dataOrder?i.x:i.y,e="columns"===this.wn.dataOrder?i.y:i.x,h="columns"===this.wn.dataOrder?this.wn.start.x:this.wn.start.y,r="columns"===this.wn.dataOrder?this.wn.start.y:this.wn.start.x;let n=(s-h)/("columns"===this.wn.dataOrder?this.wn.step.x:this.wn.step.y),o=(e-r)/("columns"===this.wn.dataOrder?this.wn.step.y:this.wn.step.x);n=Math.floor(Lt(n,0,this.wn.primaryDimensionVectorsCount-1)),o=Math.floor(Lt(o,0,this.wn.secondaryDimensionVectorsCount-1));const a=this.cN(n,o),l="columns"===this.wn.dataOrder?{x:this.wn.start.x+(n+.5)*this.wn.step.x,y:this.wn.start.y+(o+.5)*this.wn.step.y}:{x:this.wn.start.x+(o+.5)*this.wn.step.x,y:this.wn.start.y+(n+.5)*this.wn.step.y},u="columns"===this.wn.dataOrder?n:o,c="columns"===this.wn.dataOrder?o:n;return{x:l.x,y:l.y,column:u,row:c,cellValue:a}}Yv(t){if(t.x<this.Ia.min.x||t.x>this.Ia.max.x||t.y<this.Ia.min.y||t.y>this.Ia.max.y)return;const i=t,s="columns"===this.wn.dataOrder?i.x:i.y,e="columns"===this.wn.dataOrder?i.y:i.x,h="columns"===this.wn.dataOrder?this.wn.start.x:this.wn.start.y,r="columns"===this.wn.dataOrder?this.wn.start.y:this.wn.start.x,n="columns"===this.wn.dataOrder?this.wn.step.x:this.wn.step.y,o="columns"===this.wn.dataOrder?this.wn.step.y:this.wn.step.x,a=Lt((s-h)/n-.5,0,this.wn.primaryDimensionVectorsCount-1),l=Lt((e-r)/o-.5,0,this.wn.secondaryDimensionVectorsCount-1),u=Lt(Math.ceil(a)-1,0,this.wn.primaryDimensionVectorsCount-1),c=Lt(Math.ceil(l)-1,0,this.wn.secondaryDimensionVectorsCount-1),d={point:{x:u,y:c},value:this.cN(u,c)},f={point:{x:u,y:c+1},value:this.cN(u,c+1)},g={point:{x:u+1,y:c},value:this.cN(u+1,c)},m={point:{x:u+1,y:c+1},value:this.cN(u+1,c+1)},y=Ln({x:a,y:l},d,f,g,m);if(void 0===y)return;const p=Lt(Math.floor(a+.5),0,this.wn.primaryDimensionVectorsCount-1),S=Lt(Math.floor(l+.5),0,this.wn.secondaryDimensionVectorsCount-1),b="columns"===this.wn.dataOrder?p:S,v="columns"===this.wn.dataOrder?S:p,x=t;return{x:x.x,y:x.y,column:b,row:v,cellValue:y}}cN(t,i){for(let s=0;s<this.rN.gridTiles.length;s+=1){const e=this.rN.gridTiles[s];if(t>=e.iFirstVector.primary&&t<=e.iFirstVector.primary+e.sizeHeatmapDataVectors.primary-1&&i>=e.iFirstVector.secondary&&i<=e.iFirstVector.secondary+e.sizeHeatmapDataVectors.secondary-1){const s=t-e.iFirstVector.primary,h=i-e.iFirstVector.secondary,r=s*e.sizeHeatmapDataVectors.secondary+h;return e.intensityData[r]}}return 0}wt(){return this.Ia.max.x}At(){return this.Ia.min.x}Ct(){return this.Ia.max.y}kt(){return this.Ia.min.y}hl(){return 0}rl(){return 0}$C(){const t=[];return this.rN.gridTiles.forEach((i=>{if(!i.hasIntensityData)return;const s=new Array(i.sizeUniqueHeatmapDataVectors.primary).fill(0).map((t=>new Array(i.sizeUniqueHeatmapDataVectors.secondary).fill(0)));for(let t=0;t<i.sizeUniqueHeatmapDataVectors.primary;t+=1){const e=t*i.sizeHeatmapDataVectors.secondary,h=s[t];for(let t=0;t<i.sizeUniqueHeatmapDataVectors.secondary;t+=1){const s=i.intensityData[e+t];h[t]=s}}t.push({type:"intensity",startPrimary:i.iFirstUniqueVector.primary,startSecondary:i.iFirstUniqueVector.secondary,lengthPrimary:i.sizeUniqueHeatmapDataVectors.primary,lengthSecondary:i.sizeUniqueHeatmapDataVectors.secondary,values:s})})),t}}class Jm extends Qh{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.cu=Th.lineStyle,this.iu=f(void 0),this.tN=f("bilinear"),this.engine=t;const n="columns"===r.scrollDimension?c({x:r.start.x,y:r.start.y},{x:r.start.x,y:r.start.y+r.resolution*r.step.y}):c({x:r.start.x,y:r.start.y},{x:r.start.x+r.resolution*r.step.x,y:r.start.y});this.wn={...r,initialBoundaries:n}}du(t){return this.cu="function"==typeof t?t(this.cu):t,this}fu(){return this.cu}su(t){return this.iu.u(t),this}eu(){return this.iu.S()}cS(t){return this.tN.u(t),this}dS(){return this.tN.S()}}class Qm extends Jm{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,o),this.dN=0,this.rM=[],this.SV=new Om(this.ut,this),this.tE=t,this.iE=i,this.lE=r,this.uE=n,this.yB=t.sE(),this.iE=i,this.Ia=this.wn.initialBoundaries,this.fN={dataPerSegment:2048}}Is(){const t=this.SV.uV(this.rM,this.iu.S());if(t>0){for(let i=0;i<t;i+=1)this.rM[0].shape.dispose().$B(),this.rM.shift();"columns"===this.wn.scrollDimension?this.Ia.min.x=this.rM.length>0?this.rM[0].boundaries.min.x:Ri:this.Ia.min.y=this.rM.length>0?this.rM[0].boundaries.min.y:Ri}return this.rM.forEach((t=>t.shape.Is())),this.iu.i=!1,this}mB(t){return this.rM.forEach((i=>i.shape.mB(t))),this}SS(t){if(0===t.length)return this;let i=0;const s=this.fN.dataPerSegment,e=t.length;do{let h=this.rM[this.rM.length-1],r=h?s-(h.existingDataPointsCount+(h.hasJoint?1:0)):0,n=!1;if(!h||0===r){const t={columns:"columns"===this.wn.scrollDimension?s:this.wn.resolution,rows:"rows"===this.wn.scrollDimension?s:this.wn.resolution,heatmapDataType:this.wn.heatmapDataType,dataOrder:this.wn.scrollDimension,step:this.wn.step,start:"columns"===this.wn.scrollDimension?{x:this.wn.start.x+this.wn.step.x*this.dN,y:this.wn.start.y}:{x:this.wn.start.x,y:this.wn.start.y+this.wn.step.y*this.dN}};this.rM.length>0&&(t.start="columns"===this.wn.scrollDimension?{x:t.start.x-1*this.wn.step.x,y:t.start.y}:{x:t.start.x,y:t.start.y-1*this.wn.step.y},n=!0);const i=new qm(this.tE,this.iE,this.ut,Bt,[],t,this.lE,this.uE).cS(this.tN.S()).Ae(this.ve).du(this.cu);h={shape:i,existingDataPointsCount:0,existingCoordinatesCount:0,allocatedCoordinatesCount:s,dataStartIndex:this.dN,hasJoint:!1,boundaries:i.Ia},this.rM.push(h),r=s-(n?1:0)}const o=e-i,a=Math.min(r,o),l=t.slice(i,i+a),u={type:"intensity",values:l,startPrimary:h.existingDataPointsCount+(h.hasJoint?1:0),startSecondary:0,lengthPrimary:a,lengthSecondary:this.wn.resolution};n&&(u.values.unshift(this.gN),u.lengthPrimary+=1,h.hasJoint=!0),h.shape.fS(u),h.existingDataPointsCount+=a,h.existingCoordinatesCount+=a+(n?1:0),h.boundaries=h.shape.Ia,this.gN=l[l.length-1],this.dN+=a,i+=a}while(i<e);return this.Ia.max="columns"===this.wn.scrollDimension?{...this.Ia.max,x:this.wn.start.x+this.dN*this.wn.step.x}:{...this.Ia.max,y:this.wn.start.y+this.dN*this.wn.step.y},this}$a(){return this.rM.forEach((t=>{t.shape.dispose().$B()})),this.rM.length=0,this.Ia=this.wn.initialBoundaries,this.dN=0,this.gN=void 0,this}Ae(t){return super.Ae(t),this.rM.forEach((t=>t.shape.Ae(this.ve))),this}du(t){return super.du(t),this.rM.forEach((t=>t.shape.du(this.cu))),this}cS(t){return super.cS(t),this.rM.forEach((i=>i.shape.cS(t))),this}dispose(){return super.dispose(),this.rM.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.rM.forEach((i=>i.shape.setVisible(t))),this}$B(){return this.rM.forEach((t=>t.shape.$B())),this}hE(t){return this.lE===t&&{}}Pb(t){const i=ut(t,this.ut,this.engine.ut),s=this.rM.reduce(((s,e)=>{const h=e.shape.Pb(t);if(h){const t=Xi(ut(h,this.ut,this.engine.ut),i);if(void 0===s||t<s.distance)return{result:h,distance:t,segment:e}}return s}),void 0);if(s&&s.result){const t="columns"===this.wn.scrollDimension?s.result.column+s.segment.dataStartIndex:s.result.column,i="rows"===this.wn.scrollDimension?s.result.row+s.segment.dataStartIndex:s.result.row;if("columns"===this.wn.scrollDimension&&t>=this.dN||"rows"===this.wn.scrollDimension&&i>=this.dN)return;return{x:s.result.x,y:s.result.y,column:t,row:i,cellValue:s.result.cellValue}}}Yv(t){const i=ut(t,this.ut,this.engine.ut),s=this.rM.reduce(((s,e)=>{const h=e.shape.Yv(t);if(h){const t=Xi(ut(h,this.ut,this.engine.ut),i);if(void 0===s||t<s.distance)return{result:h,distance:t,segment:e}}return s}),void 0);if(s&&s.result){const t="columns"===this.wn.scrollDimension?s.result.column+s.segment.dataStartIndex:s.result.column,i="rows"===this.wn.scrollDimension?s.result.row+s.segment.dataStartIndex:s.result.row;if("columns"===this.wn.scrollDimension&&t>=this.dN||"rows"===this.wn.scrollDimension&&i>=this.dN)return;return{x:s.result.x,y:s.result.y,column:t,row:i,cellValue:s.result.cellValue}}}wt(){return this.Ia.max.x}At(){return this.Ia.min.x}Ct(){return this.Ia.max.y}kt(){return this.Ia.min.y}hl(){return 0}rl(){return 0}ds(t){return super.ds(t),this.rM.forEach((i=>i.shape.ds(t))),this}}class ty extends Qh{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.tN=f("bilinear"),this.cu=Th.lineStyle,this.wn=r}cS(t){return this.tN.u(t),this}dS(){return this.tN.S()}du(t){return this.cu="function"==typeof t?t(this.cu):t,this}fu(){return this.cu}}class iy extends ty{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r),this.cO=new nm,this.Sz={},this.tE=t,this.iE=i,this.lE=n,this.uE=o,this.yB=t.sE(),this.iE=i,this.HC=new qm(this.tE,t.mN,t.ut,Bt,[],{start:{x:0,y:0},step:{x:1,y:1},columns:r.sectors,rows:r.annuli,heatmapDataType:"intensity",dataOrder:"annuli"===r.dataOrder?"rows":"columns",hN:this.yB.UB},-1,C).du(rt);const a=2*Math.PI/360,l=new Float32Array(724);let u=0;l[u+0]=0,l[u+1]=0,u+=2;for(let t=0;t<=360;t+=1){const i=t*a,s=Math.cos(i),e=Math.sin(i);l[u+0]=s,l[u+1]=e,u+=2}this.yN={vertexBuffer:this.yB.QO(l),drawMode:this.yB.gl.TRIANGLE_FAN,drawLength:362}}Is(){const t=this.ve,i=G(t)&&t,s=j(t)&&t,e=i||s,h=this.zo(),r=s&&s.getPalette(),n=this.tN.S(),o=this.tN.i,a=this.po.S(),l=this.po.i;return this.cO.cL(this.ut),this.HC.Is(),this.HC.nN?((h||o)&&(this.Sz.fill=e?{shader:this.yB.iL(im["2D"],im.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:xg(this.ut),normalSource:void 0}),s&&im.PolarHeatmap({interpolation:"bilinear"===n&&"bilinear",intensityTextureType:this.yB.hR?"float":"ubyte",littleEndian:this.yB.IS_MACHINE_LITTLE_ENDIAN,flipXY:"sectors"===this.wn.dataOrder}),i&&im.PolarHeatmap({dataType:"uniform"})),fillStylePaletted:s,fillStyleSolid:i}:void 0,r?this.aN=this.tE.YE(r,this.aN):this.aN&&(this.tE.XE(this.aN),this.aN=void 0)),l&&(this.Sz.mousePicking=a?{shader:this.yB.iL(im["2D"],im.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:xg(this.ut),normalSource:void 0}),im.Color({dataType:"uniform"}))}:void 0),this.Wo(t),this.tN.i=!1,this.po.i=!1,this):this}mB(t){var i;const{vertexBuffer:s,drawLength:e,drawMode:h}=this.yN,r=this.HC.nN,n=this.aN;if(!this.Sz.fill||!r)return this;const{fillStylePaletted:o,fillStyleSolid:a}=this.Sz.fill,l=1===t?null===(i=this.Sz.mousePicking)||void 0===i?void 0:i.shader:this.Sz.fill.shader;if(!l)return this;const u=this.ut.Cv(),c=Math.min(u.start,u.end),d=Math.max(u.start,u.end),f=Math.min(this.wn.amplitudeStart,this.wn.amplitudeStart+(this.wn.annuli-1)*this.wn.amplitudeStep),g=Math.max(this.wn.amplitudeStart,this.wn.amplitudeStart+(this.wn.annuli-1)*this.wn.amplitudeStep);let m;return m=u.end>u.start?Math.min(g,d)-u.start:Math.max(f,c)-u.start,this.yB.iO(l).sL(l,((i,l,u,c)=>{if(this.yB.hL(i("uScale"),this.cO.aL()).hL(i("uDisp"),this.cO.lL()).nL(i("uIsHighlighted"),1===t||2===t?0:this.xo).oL(i("uHighlightColorOffset"),this.wo).nL(i("uRenderEffectMask"),2===t?1:0).hL(c("uViewportSize"),[this.tE.$t().x*this.yB.nO(),this.tE.$t().y*this.yB.nO()]).hL(i("uScaling"),[m,m]).hL(i("uTranslationAxis"),[0,0]).eL(s,void 0,{location:l("aPos"),size:2}).nL(c("uAngleOffset"),this.ut.Dv()%(2*Math.PI)).nL(c("uAngleDirection"),this.ut.Ev()?1:-1).nL(c("uSectors"),this.wn.sectors).nL(c("uAnnuli"),this.wn.annuli),1===t)this.yB.oL(i("uColor"),this.uE);else{if(this.yB.nL(i("uAmplitudeStart"),this.wn.amplitudeStart).nL(i("uAmplitudeStep"),this.wn.amplitudeStep).nL(i("uAmplitudeAxisStart"),this.ut.Cv().start).nL(i("uAmplitudeAxisEnd"),this.ut.Cv().end),o){if(!n)return!1;this.yB.OR(u,o.lut,n,1).rL(i("uTileIntensityValues"),r.gridTiles[0].intensityDataTexture,0)}a&&this.yB.oL(i("uColor"),a.getColor())}return this.yB.Jm(h,e),!0})),this}fS(t){return this.HC.fS(t),this}$a(){return this.HC.$a(),this}dispose(){return super.dispose(),this.aN&&(this.tE.XE(this.aN),this.aN=void 0),this.HC.dispose(),this.Sz={},this.yB.dL(this.yN.vertexBuffer),this}$B(){return this.dispose(),this}hE(t){return this.lE===t&&{}}Pb(t){const i=this.wn.amplitudeStart,s=this.wn.amplitudeStart+(this.wn.annuli-1)*this.wn.amplitudeStep,e=Math.min(i,s),h=Math.max(i,s);if(t.angle<0||t.angle>360||t.amplitude<e||t.amplitude>h)return;let r=Math.round((t.angle-0)/360*this.wn.sectors);r>=this.wn.sectors&&(r=0);const n=Math.round((t.amplitude-i)/(s-i)*(this.wn.annuli-1));return{iAnnulus:n,iSector:r,cellValue:this.cN(n,r),angle:r*(360/this.wn.sectors),amplitude:i+n*(s-i)/(this.wn.annuli-1)}}Yv(t){const i=this.wn.amplitudeStart,s=this.wn.amplitudeStart+(this.wn.annuli-1)*this.wn.amplitudeStep,e=Math.min(i,s),h=Math.max(i,s);if(t.angle<0||t.angle>360||t.amplitude<e||t.amplitude>h)return;const r=(t.angle-0)/360*this.wn.sectors,n=(t.amplitude-i)/(s-i)*(this.wn.annuli-1),o=Math.floor(r),a=Math.floor(n),l={point:{x:a,y:o},value:this.cN(a,o)},u={point:{x:a,y:o+1},value:this.cN(a,o+1)},c={point:{x:a+1,y:o},value:this.cN(a+1,o)},d={point:{x:a+1,y:o+1},value:this.cN(a+1,o+1)},f=Ln({x:n,y:r},l,u,c,d);return void 0!==f?{iAnnulus:a,iSector:o,cellValue:f,angle:t.angle,amplitude:t.amplitude}:void 0}cN(t,i){const s="annuli"===this.wn.dataOrder?t:i,e="annuli"===this.wn.dataOrder?i:t;for(let t=0;t<this.HC.rN.gridTiles.length;t+=1){const i=this.HC.rN.gridTiles[t];if(s>=i.iFirstVector.primary&&s<=i.iFirstVector.primary+i.sizeHeatmapDataVectors.primary-1&&e>=i.iFirstVector.secondary&&e<=i.iFirstVector.secondary+i.sizeHeatmapDataVectors.secondary-1){const t=s-i.iFirstVector.primary,h=e-i.iFirstVector.secondary,r=t*i.sizeHeatmapDataVectors.secondary+h;return i.intensityData[r]}}return 0}wt(){return 0}At(){return 0}Ct(){return 0}kt(){return 0}hl(){return 0}rl(){return 0}}const sy={translation:(t,i)=>[1,0,0,0,1,0,t,i,1],rotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,-s,0,s,i,0,0,0,1]},scaling:(t,i)=>[t,0,0,0,i,0,0,0,1],translate:(t,i,s)=>sy.multiply(t,sy.translation(i,s)),rotate:(t,i)=>sy.multiply(t,sy.rotation(i)),scale:(t,i,s)=>sy.multiply(t,sy.scaling(i,s)),multiply(t,i){const s=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=i[0],d=i[1],f=i[2],g=i[3],m=i[4],y=i[5],p=i[6],S=i[7],b=i[8];return[c*s+d*r+f*a,c*e+d*n+f*l,c*h+d*o+f*u,g*s+m*r+y*a,g*e+m*n+y*l,g*h+m*o+y*u,p*s+S*r+b*a,p*e+S*n+b*l,p*h+S*o+b*u]},projection:(t,i,s)=>[2/t,0,0,0,-2*s/i,0,-1,1*s,1]};class ey extends sr{constructor(t,i,s,e,h,r,o){super(t,i,s,e,h),this.pN=[],this.cO=new nm,this.SN=[n(0,0),n(0,0),n(0,0),n(0,0)],this.bN=c(n(0,0),n(0,0)),this.vN=c(n(0,0),n(0,0)),this.xN=n(0,0),this.MN=n(0,0),this.LM=n(0,0),this._N=n(0,0),this.AN=0,this.tE=t,this.iE=i,this.lE=r,this.uE=o,this.yB=t.sE(),this.iE=i,this.Tz=t.wn.Rn}Is(){const t=this.Go(),i=this.No(),s=this.po.S();if(t){const t=this.yB,e=this.yB.nO();if(this.cO.cL(this.ut),this.Qo.i){this.wN&&this.wN.sO(this),this.font.u(vh(this.Qo.S()));const t=this.font.S();this.wN=this.yB.Ph(t.properties.family),this.wN.iO(this)}const h=this.font.i,r=h||this.Yo.i;if(r&&this.wN){const i=this.font.S();[this.kN,this.vN]=this.wN.hO(this.Yo.S(),i.properties),this.pN.forEach((i=>{i.texCoordBuff&&t.dL(i.texCoordBuff),i.vertexBuff&&t.dL(i.vertexBuff)})),this.pN=this.kN.map((i=>({texCoordBuff:t.QO(i.texCoords,!1),texture:i.texture,info:i}))),this.Qo.i=!1,this.font.i=!1,this.Yo.i=!1}const o=this.ut.Ai()||i,a=this.Xo.i||this.Ko.i||this.Zo.i||this.qo.i||this.ia.i||this.Pt.i||r||o,l=this.ia.S(),u=us(n(this.Ko.S()+1,this.Zo.S()+1),.5);if(a&&this.kN&&(this.xN=n(-(l.left*e+this.vN.max.x-this.vN.min.x+l.right*e)*u.x-this.vN.min.x+l.right*e,-(l.bottom*e+this.vN.max.y-this.vN.min.y+l.top*e)*u.y-this.vN.min.y+l.top*e)),(a||o||this.Jo.i||this.zo())&&this.ve!==R){if(this.kN){const i=cs(this.Xo.S(),this.qo.S()),s=ut(i,this.ut,this.cs.ut),h=us(s,e);this._N=h;const o=bs(this.Jo.S());this.AN=o,r&&this.pN.forEach((i=>{const s=i.info;s&&(i.vertexBuffLen=s.vertices.length/2,i.vertexBuff=t.QO(s.vertices,!0,i.vertexBuff))}));const a=this.Pt.S(),c=[cs(rs(n((this.vN.min.x+(-a.left-l.left)*e+this.xN.x)/e,(this.vN.max.y+(a.top+l.top)*e+this.xN.y)/e),this.ta,o),s),cs(rs(n((this.vN.max.x+(a.right+l.right)*e+this.xN.x)/e,(this.vN.max.y+(a.top+l.top)*e+this.xN.y)/e),this.ta,o),s),cs(rs(n((this.vN.max.x+(a.right+l.right)*e+this.xN.x)/e,(this.vN.min.y+(-a.bottom-l.bottom)*e+this.xN.y)/e),this.ta,o),s),cs(rs(n((this.vN.min.x+(-a.left-l.left)*e+this.xN.x)/e,(this.vN.min.y+(-a.bottom-l.bottom)*e+this.xN.y)/e),this.ta,o),s)];this.SN=[ut(c[0],this.cs.ut,this.ut),ut(c[1],this.cs.ut,this.ut),ut(c[2],this.cs.ut,this.ut),ut(c[3],this.cs.ut,this.ut)];const d=Ji(c);this.MN=n(-(d.max.x-d.min.x)*e*u.x-d.min.x*e+this._N.x,-(d.max.y-d.min.y)*e*u.y-d.min.y*e+this._N.y),this._D=ds(d.max,d.min);const f=Ji(this.SN),g=this.ut.ti(f.min,this.MN),m=this.ut.ti(f.max,this.MN);this.bN=Ji([g,m])}tt(this.ve)?this.pE=cm(this.bN,this.ut,this.ve.getPosition(),this.ve.getExtent(),this.ve.getShape(),this.yB.nO()):et(this.ve)?this.SE=dm(this.bN,this.ut,this.ve.getAngle(!0),this.yB.nO()):(this.pE=void 0,this.SE=void 0)}const c=G(this.ve)&&this.ve,d=tt(this.ve)&&this.ve,f=et(this.ve)&&this.ve,g=c||d||f;(this.zo()||h)&&(this.fO=g?this.yB.iL(im["2D"],im.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.Tz}),im.Color({dataType:d?["gradient",d]:f?["gradient",f]:"uniform",maskTexture:!0})):void 0),this.CN=s&&g?this.CN||this.yB.iL(im["2D"],im.MousePicking,im.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.Tz})):void 0,this.Xo.i=!1,this.Ko.i=!1,this.Zo.i=!1,this.qo.i=!1,this.Jo.i=!1,this.Wo(this.ve)}return this.sa=t,this}mB(t){if(this.Go()){const i=1===t?this.CN:this.fO;if(!i||0===this.pN.length)return this;const s=this.yB.gl.drawingBufferWidth,e=this.yB.gl.drawingBufferHeight;let h=sy.projection(s,e,-1);const r=sy.translation(this.xN.x,this.xN.y),n=sy.translation(this.MN.x,this.MN.y);h=sy.translate(h,this._N.x,this._N.y),h=sy.multiply(h,n),h=sy.rotate(h,this.AN),h=sy.multiply(h,r),1===t&&(h=sy.scale(h,this.vN.max.x,this.vN.max.y)),this.yB.iO(i).sL(i,((i,s,e,r)=>{if(this.yB.TL(i("uMatrix"),h).nL(i("uIsHighlighted"),1===t||2===t?0:this.xo).oL(i("uHighlightColorOffset"),this.wo).nL(i("uRenderEffectMask"),2===t?1:0),this.Tz&&this.yB.hL(r("uViewportSizePx"),[this.cs.$t().x*this.yB.nO(),this.cs.$t().y*this.yB.nO()]),1===t)this.yB.oL(i("uColor"),this.uE);else if(G(this.ve))this.yB.oL(i("uColor"),this.ve.getColor());else if(tt(this.ve)&&this.pE){this.yB.hL(i("uCenter"),this.pE.center).hL(i("uDistance"),this.pE.distance).kL(i("uBounds"),this.pE.bounds).nL(i("uAspect"),this.pE.aspectRatio);const t=this.ve.getColorStops();for(let s=0;s<t.length;s+=1)this.yB.oL(i(`color_${s}`),t[s].color).nL(i(`stop_${s}`),t[s].offset)}else if(et(this.ve)&&this.SE){this.yB.hL(i("uStartPoint"),this.SE.startPoint).hL(i("uEndPoint"),this.SE.endPoint).kL(i("uBounds"),this.SE.bounds);const t=this.ve.getColorStops();for(let s=0;s<t.length;s+=1)this.yB.oL(i(`color_${s}`),t[s].color).nL(i(`stop_${s}`),t[s].offset)}return 1===t&&this.yB.zL(s("aPos"),this.yB.uR).Jm(this.yB.gl.TRIANGLES,6),1!==t&&this.pN.forEach((t=>{this.yB.zL(s("aPos"),t.vertexBuff).zL(s("aMaskTextureCoord"),t.texCoordBuff).rL(i("uMaskTexture"),t.texture,0).Jm(this.yB.gl.TRIANGLES,t.vertexBuffLen)})),!0}))}return this}hE(t){return this.lE===t&&{}}Ne(){return this.Go()?this.SN:[]}Dc(){return this.Go()&&this._D?this._D:n(0,0)}$t(){if(this.Go()&&this.bN){const t=this.bN;return n(t.max.x-t.min.x,t.max.y-t.min.y)}return n(0,0)}$B(){return this.pN.forEach((t=>{t.texCoordBuff&&this.yB.dL(t.texCoordBuff),t.vertexBuff&&this.yB.dL(t.vertexBuff)})),this.pN=[],this.wN&&this.wN.sO(this),this}wt(){return this.bN.max.x}At(){return this.bN.min.x}Ct(){return this.bN.max.y}kt(){return this.bN.min.y}hl(){return 0}rl(){return 0}}class hy{constructor(t,i,s){this.TN=new Set,this.FN=t=>(this.TN.add(t),t),this.IN=t=>(this.TN.delete(t),t.$B(),this),this.cs=t,this.Bo=i,this.PN=s}gB(t){this.TN.delete(t)&&this.TN.add(t)}N(){for(const t of this.TN)t.$B().dispose();this.cs.rn(this.Bo)}vs(){return this.cs.vs(),this}hn(){return this.Bo}}class ry extends hy{constructor(){super(...arguments),this.DN=f(void 0),this.Oo=!1}CS(t){return this.DN.u(t),this}ym(){return this.DN.S()}}class ny extends ry{constructor(t,i,s){super(t,i,s),this.tE=t,this.gl=t.sE(),this.ON=this.TN}JO(t){const i=t instanceof Yh&&t;if(!i)return zi;const s=i.At(),e=i.wt(),h=i.kt(),r=i.Ct();if(s===Ri||e===Ei||h===Ri||r===Ei)return zi;const n=i.hl(),o=i.rl(),a=Xh({min:{x:s,y:h},max:{x:e,y:r}},{x:n,y:o},i.ut),l={min:ut(a.min,i.ut,t.cs.ut),max:ut(a.max,i.ut,t.cs.ut)},u=this.DN.S();let c;if(u){if(c={min:{x:Math.max(l.min.x,u.x),y:Math.max(l.min.y,u.y)},max:{x:Math.min(l.max.x,u.x+u.width),y:Math.min(l.max.y,u.y+u.height)}},c.max.x<c.min.x||c.max.y<c.min.y)return zi}else c=l;return c}LN(t){const i=Array.from(this.ON.values());for(let s=0;s<i.length;s+=1){const e=i[s],h=e.hE(t);if(h)return{entity:e,index:s,collectionMember:h.collectionMember}}}Oe(t){const i=this.tE.RN();return this.FN(new Cm(this.tE,this,t,this.IN,[],i,this.tE.EN(i)))}Ig(t){return this.FN(new Tm(this.tE,this,t,this.IN,[],(()=>{const t=this.tE.RN();return{id:t,color:this.tE.EN(t)}})))}hy(t,i,s){const e=this.tE.RN();return this.FN(new Lm(this.tE,this,t,this.IN,s,e,this.tE.EN(e),i))}vr(t){const i=this.tE.RN();return this.FN(new ey(this.tE,this,t,this.IN,[],i,this.tE.EN(i)))}xp(t){const i=this.tE.RN();return this.FN(new Nm(this.tE,this,t,this.IN,[],i,this.tE.EN(i)))}Fc(t,i=lr.Simple){const s=this.tE.RN();if(i===lr.Simple)return this.FN(new Hm(this.tE,this,t,this.IN,[],s,this.tE.EN(s)));throw new Error("GlEngine.addPolygon | No such polygon type!")}sv(t){return this.FN(new Gm(this.tE,this,t,this.IN,[],(()=>{const t=this.tE.RN();return{id:t,color:this.tE.EN(t)}})))}we(t){const i=this.tE.RN();return this.FN(new Wm(this.tE,this,t,this.IN,[],i,this.tE.EN(i)))}rC(t){const i=this.tE.RN();return this.FN(new Mm(this.tE,this,t,this.IN,[],i,this.tE.EN(i)))}Oc(t){const i=this.tE.RN();return this.FN(new gm(this.tE,this,t,this.IN,[],i,this.tE.EN(i)))}qC(t,i,s){if("intensity"===s.heatmapDataType){const e=this.tE.RN();return this.FN(new Qm(this.tE,this,t,this.IN,i,e,this.tE.EN(e),s))}throw new vt("Unimplemented Heatmap Grid Static type")}UC(t,i,s){const e=this.tE.RN();return this.FN(new qm(this.tE,this,t,this.IN,i,s,e,this.tE.EN(e)))}jv(t,i,s){const e=this.tE.RN();return this.FN(new iy(this.tE,this,t,this.IN,i,s,e,this.tE.EN(e)))}zN(t){return this.FN(new um(this.tE,this,this.IN,[],t))}Is(){if(this.Oo){this.Oo=!1;const t=Array.from(this.TN).sort(((t,i)=>t.Ro()-i.Ro()));this.TN.clear();for(const i of t)this.TN.add(i)}for(const t of this.TN)t.Is();return this}mB(t,i){const s=this.DN.S();if(s&&this.gl.qO(s.x*this.gl.nO()*i,s.y*this.gl.nO()*i,s.width*this.gl.nO()*i,s.height*this.gl.nO()*i),1!==t)for(const i of this.TN)i.getVisible()&&i.mB(t);else for(const i of this.TN)i.getMouseInteractions()&&i.getVisible()&&i.mB(t);return this.gl.XO(!1),this}}class oy extends fg{constructor(t){super(t)}}class ay extends oy{constructor(t){super(t),this.VN="attribute";const{vertices:i,drawSize:s,drawMode:e}=ly(t.gl);this.BB=t.QO(i),this.az=s,this.lz=e}Jm(t,i,s,e){return this.yB.eL(this.BB,0,{location:t.attribute("aInstanceGeo"),size:3},{location:s?t.attribute("aNormal"):void 0,size:3},{location:e?t.attribute("aTriangleBary"):void 0,size:3}).jL(this.lz,0,this.az,i),this}AB(){this.yB.dL(this.BB)}}const ly=t=>{const i=new Float32Array(324);let s=0;return i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,{vertices:i,drawSize:s/9,drawMode:t.TRIANGLES}};class uy extends oy{constructor(t,i){super(t),this.VN="attribute",this.NN=i;const{vertices:s,indices:e}=cy();this.BB=t.QO(s),this.oz=t.RL(e),this.az=e.length,this.lz=t.gl.TRIANGLES}Jm(t,i,s,e){return this.yB.eL(this.BB,0,{location:t.attribute("aEdge"),size:3},{location:s?t.attribute("aNormal"):void 0,size:3},{location:t.attribute("aInstanceGeo"),size:3}).UL(this.oz).nL(t.uniform("uEdgeRoundness"),this.NN/2).XL(this.lz,this.az,0,i),this}AB(){this.yB.dL(this.BB),this.yB.dL(this.oz)}GN(t){return this.NN=t,this}WN(){return this.NN}}const cy=()=>{const t=[{normal:{x:0,y:1,z:0},perpendA:{x:0,y:0,z:1},perpendB:{x:-1,y:0,z:0}},{normal:{x:0,y:0,z:-1},perpendA:{x:0,y:1,z:0},perpendB:{x:-1,y:0,z:0}},{normal:{x:-1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:1}},{normal:{x:1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:-1}},{normal:{x:0,y:0,z:1},perpendA:{x:0,y:1,z:0},perpendB:{x:1,y:0,z:0}},{normal:{x:0,y:-1,z:0},perpendA:{x:0,y:0,z:-1},perpendB:{x:-1,y:0,z:0}}],i=[];let s=0;const e=[];let h=0;for(const r of t){const{normal:t,perpendA:n,perpendB:o}=r,a=Li.multiply(n,-1),l=Li.multiply(o,-1),u=s;i[s]={thicknessDirection:Li.addVec(t,n,o),edge:Li.addVec(a,l),normal:t},s+=1;const c=s;i[s]={thicknessDirection:Li.addVec(t,a,o),edge:Li.addVec(n,l),normal:t},s+=1;const d=s;i[s]={thicknessDirection:Li.addVec(t,a,l),edge:Li.addVec(n,o),normal:t},s+=1;const f=s;i[s]={thicknessDirection:Li.addVec(t,n,l),edge:Li.addVec(a,o),normal:t},s+=1,e[h+0]=d,e[h+1]=u,e[h+2]=f,e[h+3]=d,e[h+4]=c,e[h+5]=u,h+=6;const g=[{A:n,B:o},{A:a,B:o},{A:a,B:l},{A:n,B:l}];for(const e of g){e.thicknessDirection=Li.addVec(t,e.A,e.B),e.stripVerticesA=[],e.stripVerticesB=[];const h=[{direction:e.A,other:e.B,vertices:e.stripVerticesA},{direction:e.B,other:e.A,vertices:e.stripVerticesB}];for(const r of h)for(let h=0;h<8;h+=1){const n=.5*h/7,o=Li.normalize(Li.lerp(t,r.direction,n)),a=Math.PI/2-Li.angle(o,t),l=Li.addVec(Li.multiply(Li.multiply(r.direction,-1),1-Math.cos(a)),Li.multiply(Li.multiply(t,-1),1-Math.sin(a)),Li.multiply(r.other,-1)),u=s;i[s]={thicknessDirection:e.thicknessDirection,normal:o,edge:l};const c=i[s];s+=1,r.vertices.push({index:u,vertex:c})}}for(let t=0;t<g.length;t+=1){const i=g[t],s=g[t<g.length-1?t+1:0],r=t%2==0?i.stripVerticesB:i.stripVerticesA,n=t%2==0?s.stripVerticesB:s.stripVerticesA;for(let t=1;t<r.length;t+=1){const i=r[t-1],s=n[t-1],o=r[t],a=n[t];e[h+0]=i.index,e[h+1]=s.index,e[h+2]=a.index,e[h+3]=o.index,e[h+4]=i.index,e[h+5]=a.index,h+=6}}}const r=[{x:-1,y:1,z:-1,flipVertexOrder:!1},{x:-1,y:1,z:1,flipVertexOrder:!0},{x:1,y:1,z:1,flipVertexOrder:!1},{x:1,y:1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:1,flipVertexOrder:!1},{x:1,y:-1,z:1,flipVertexOrder:!0},{x:1,y:-1,z:-1,flipVertexOrder:!1}],n=Math.PI/15,o=2*Math.PI/15;let a=s;for(const t of r){let h=0;i[s]={thicknessDirection:t,normal:{x:0,y:t.y,z:0},edge:{x:-t.x,y:0,z:-t.z}},s+=1,h+=1;for(let e=1;e<8.5;e+=1){const r=15===e?Math.PI:e*n,a=1*Math.cos(r)*t.y,l=Math.sin(r);for(let e=0;e<Math.ceil(3.75)+1;e+=1){const r=15===e?0:e*o,n=l*Math.cos(r)*1*t.x,u=l*Math.sin(r)*1*t.z,c={x:n,y:a,z:u},d=Li.normalize({x:n,y:a,z:u});i[s]={thicknessDirection:t,normal:d,edge:{x:c.x-t.x,y:c.y-t.y,z:c.z-t.z}},s+=1,h+=1}}const r=[];for(let t=1;t<=Math.ceil(3.75);t+=1)r.push(a),15===t?r.push(a+1):r.push(a+t+1),r.push(a+t);const l=a+1,u=Math.ceil(3.75)+1;for(let t=0;t<6.5;t+=1)for(let i=0;i<Math.ceil(3.75);i+=1){let s=0;const e=l+(t+1)*u+i;let h=0;14===i?(s=l+t*u,h=l+(t+1)*u):(s=l+t*u+i+1,h=l+(t+1)*u+i+1),r.push(l+t*u+i),r.push(s),r.push(e),r.push(e),r.push(s),r.push(h)}e.push.apply(e,t.flipVertexOrder?r.reverse():r),a+=h}const l=new Float32Array(9*i.length);let u=0;for(const t of i)l[u+0]=t.edge.x,l[u+1]=t.edge.y,l[u+2]=t.edge.z,l[u+3]=t.normal.x,l[u+4]=t.normal.y,l[u+5]=t.normal.z,l[u+6]=t.thicknessDirection.x,l[u+7]=t.thicknessDirection.y,l[u+8]=t.thicknessDirection.z,u+=9;return{vertices:l,indices:new Uint16Array(e)}},dy=(t,i)=>{let s=t.bL._B.get(i);return s||(s=void 0!==i&&i>0?new uy(t,Lt(i,0,1)):new ay(t),t.bL._B.set(i,s),s)};class fy extends jg{np(t){return this.RO=this.tp.S(),this.tp.u(t),this}mS(t){return this.HN=t,this}yS(){return this.HN}}class gy extends fy{constructor(t,i,s,e,h){super(t,i,s),this.UN=t,this.lE=e,this.uE=h,this.tE=t.tE,this.yB=this.tE.sE()}hE(t){return t===this.lE&&{}}}class my extends gy{constructor(t,i,s,e,h){super(t,i,s,e,h),this.HN="cull-back",this.Ia=Vi,this.$N={},this.jN=[],this.ve=Th.fillStyle,this.tp.u(jn)}Is(t){const i=this.jN,s=this.ve,e=s!==R,h=this.YN,r=this.zo()||this.XN!==h,n=this.LO(),o=this.po.S(),a=this.po.i;if(e){for(const t of i)t.id=void 0!==t.id?String(t.id):void 0,t.xSize=void 0!==t.xSize&&t.xSize<0?-t.xSize:t.xSize,t.ySize=void 0!==t.ySize&&t.ySize<0?-t.ySize:t.ySize,t.zSize=void 0!==t.zSize&&t.zSize<0?-t.zSize:t.zSize;const t=11,e=this.ZN||0;let h=e;for(const t of i){const i=t.id;void 0!==i&&void 0!==this.$N[i]||(h+=1)}let l,u=!1,d=!1;if(u=h!==e,d=u,l=!d&&(i.length<100?"chunks":"all"),u){const i=h*t,s=new Float32Array(i);this.kV&&s.set(this.kV),this.kV=s,this.KN=i,this.qN=e*t}const f=H(s)?s.getFallbackColor():void 0;for(const s of i){const i=s.id,e=void 0!==i&&this.$N[i],h=[s.xCenter,s.yCenter,s.zCenter,s.xSize,s.ySize,s.zSize,s.color?s.color.r:f?f.r:void 0,s.color?s.color.g:f?f.g:void 0,s.color?s.color.b:f?f.b:void 0,s.color?s.color.a:f?f.a:void 0,s.value];if(e){for(let i=0;i<t;i+=1)h[i]=void 0!==h[i]?h[i]:e.buffer[i];e.buffer.set(h)}else{const s=this.qN,e=new Float32Array(this.kV.buffer,s*Float32Array.BYTES_PER_ELEMENT,t);e.set(h),void 0!==i&&(this.$N[i]={location:s,buffer:e}),this.qN+=t}}if(d&&(this.nz=this.yB.QO(this.kV,!0)),"all"===l)this.yB.OL(this.nz,0,this.kV);else if("chunks"===l)for(const t of i){const i=t.id;if(void 0!==i){const t=this.$N[i];this.yB.OL(this.nz,t.location,t.buffer)}}if(r||n||a){const t=G(s)&&s,i=H(s)&&s,e=j(s)&&s;t||i||e?(this.JN=dy(this.yB,this.QN()),this.fO=this.yB.iL(im["3D"],im.ColorShaded3D({dataType:i?"attribute":e?["lookup",e.getLookUpProperty()]:"uniform",shadingStyle:this.tp.S().type}),im.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:xg(this.ut),normalSource:this.JN.VN}),void 0!==this.YN&&im.RoundedEdges3D),this.CN=o?this.yB.iL(im["3D"],im.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:xg(this.ut),normalSource:void 0}),im.MousePicking,void 0!==this.YN&&im.RoundedEdges3D):void 0):(this.JN=void 0,this.fO=void 0,this.CN=void 0),e?this.bz=this.tE.YE(e.lut,this.bz):this.bz&&(this.tE.XE(this.bz),this.bz=void 0)}if(i.length>0){const i=c({x:Ri,y:Ri,z:Ri},{x:Ei,y:Ei,z:Ei});for(let s=0;s<this.qN;s+=t){const t=this.kV[s+0],e=this.kV[s+3]/2,h=t-e,r=t+e,n=this.kV[s+1],o=this.kV[s+4]/2,a=n-o,l=n+o,u=this.kV[s+2],c=this.kV[s+5]/2,d=u-c,f=u+c;i.min.x=i.min.x<h?i.min.x:h,i.min.y=i.min.y<a?i.min.y:a,i.min.z=i.min.z<d?i.min.z:d,i.max.x=i.max.x>r?i.max.x:r,i.max.y=i.max.y>l?i.max.y:l,i.max.z=i.max.z>f?i.max.z:f}this.Ia=i}this.ZN=h,this.jN.length=0}return this.Wo(s),this.XN=h,this.tp.i=!1,this.po.i=!1,this}mB(t){const i=1===t?this.CN:this.fO,s=this.JN,e=this.nz,h=this.ve,r=this.ZN,n=this.tp.S();return i&&e&&void 0!==r&&this.yB.sL(i,((o,a,l)=>{let u=!1;const c=a("aPos"),d=a("aOffsetAxis");this.yB.iO(i).CL(o("uScale"),this.UN.cO.aL()).CL(o("uDisp"),this.UN.cO.lL()).FL(o("uViewProjectionMatrix"),this.tG).nL(o("uIsHighlighted"),1===t||2===t?0:this.xo).oL(o("uHighlightColorOffset"),this.wo).nL(o("uRenderEffectMask"),2===t?1:0);const f={location:c,size:3},g={location:d,size:3},m={location:void 0,size:4},y={location:void 0,size:1};if(1!==t&&"phong"===n.type&&this.yB.CL(o("uCameraLoc"),this.iG).CL(o("uLightLoc"),this.sG).nL(o("uAmbientReflection"),n.ambientReflection).nL(o("uSpecularReflection"),n.specularReflection).nL(o("uDiffuseReflection"),n.diffuseReflection).nL(o("uShininess"),n.shininess).oL(o("uLightColor"),n.specularColor).oL(o("uAmbientColor"),n.ambientColor),1===t)this.yB.oL(o("uColor"),this.uE);else if(G(h))this.yB.oL(o("uColorDiffuse"),h.getColor());else if(H(h)){const t=a("aColor");m.location=t}else if(j(h)){const t=h.getLookUpProperty(),i=h.getPalette();"value"===t&&(y.location=a("aLookupValue")),this.yB.OR(l,i,this.bz,0)}return e&&(this.yB.eL(e,1,f,g,m,y),s.Jm(l,r,"phong"===n.type&&1!==t,!1),u=!0),u})),this}dispose(){return super.dispose(),this.nz&&(this.yB.dL(this.nz),this.nz=void 0),this.bz&&(this.tE.XE(this.bz),this.bz=void 0),this.fO=void 0,this}$B(){return this.dispose(),this}mp(t){this.jN=gi(this.jN,t,{canReturnB:!0})}Ae(t){return this.ve=Zh(this.ve,t),this}Ih(){return this.ve}fp(t){return this.YN=void 0!==t&&t>0?Lt(t,0,1):void 0,this}QN(){return this.YN}wt(){return this.Ia.max.x}At(){return this.Ia.min.x}Ct(){return this.Ia.max.y}kt(){return this.Ia.min.y}lp(){return this.Ia.max.z}up(){return this.Ia.min.z}hl(){return 0}rl(){return 0}cp(){return 0}zo(){return Kh(this.Vo,this.ve)}Wo(t){this.Vo=t}}class yy extends fg{constructor(t,i){super(t),this.VN="custom",this.hz=i;const{vertices:s,drawSize:e}=this.rz();this.nz=t.QO(s),this.az=e}iO(t){return this.yB.eL(this.nz,0,{location:t.attribute("aSegmentPosition"),size:1},{location:t.attribute("aPerpendHorizontal"),size:1},{location:t.attribute("aPerpendVertical"),size:1}),this}Jm(t){return this.yB.jL(this.yB.gl.TRIANGLE_STRIP,0,this.az,t),this}rz(){const t=this.hz,i=new Float32Array(2*(t+1)*3);let s=0;for(let e=0;e<=t;e+=1){const h=2*Math.PI*e/t,r=Math.cos(h),n=Math.sin(h);for(const t of[0,1])i[s+0]=t,i[s+1]=r,i[s+2]=n,s+=3}return{vertices:i,drawSize:s/3}}AB(){this.yB.dL(this.nz)}}const py=(t,i=16)=>{let s=t.bL.xB.get(i);return s||(s=new yy(t,i),t.bL.xB.set(i,s),s)};class Sy extends gy{constructor(t,i,s,e,h){super(t,i,s,e,h),this.HN="cull-back",this.eG=Vi,this.hG=[],this.rG=!1,this.Xl=Th.lineStyle,this.tp.u(Hn)}Is(t){const i=this.rG,s=this.Xl,e=this.Kl!==s,h=this.LO(),r=i;if(i){const t=oi(this.hG);this.nG=this.yB.QO(t,!1,this.nG)}if(r&&(this.eG=Qi(this.hG)),e||h){const t=8,i=ee(s)&&s.getFillStyle(),e=1===s.getThickness()?"primitive":"instanced";this.Sz=void 0,G(i)&&("primitive"===e?this.Sz={type:e,shader:this.yB.iL(im["3D"],im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0}),im.Color({dataType:"uniform"})),fillStyle:i}:"instanced"===e&&(this.Sz={type:e,shader:this.yB.iL(im["3D"],im.ColorShaded3D({dataType:"uniform",shadingStyle:this.tp.S().type}),im.LineInstanced3D({axisWorldTranslation:xg(this.ut)})),geometry:py(this.yB,t),fillStyle:i}))}return this.rG=!1,this.Kl=s,this.tp.i=!1,this}mB(t){if(1===t)return this;const i=this.yB.gl,s=this.Sz,e=this.nG,h=this.Xl,r=this.tp.S();if(s&&e&&ee(h))switch(s.type){case"instanced":{const n=.5*this.ks.Hy(h.thickness),o=s.fillStyle.getColor(),a=s.shader,l=s.geometry;this.yB.sL(a,((s,h,u)=>{this.yB.iO(a).CL(s("uScale"),this.UN.cO.aL()).CL(s("uDisp"),this.UN.cO.lL()).FL(s("uViewProjectionMatrix"),this.tG).oL(s("uColorDiffuse"),o).nL(s("uOffsetWU"),n).nL(s("uIsHighlighted"),this.xo).oL(s("uHighlightColorOffset"),this.wo).nL(s("uRenderEffectMask"),2===t?1:0),"phong"===r.type&&this.yB.CL(s("uCameraLoc"),this.iG).CL(s("uLightLoc"),this.sG).nL(s("uAmbientReflection"),r.ambientReflection).nL(s("uSpecularReflection"),r.specularReflection).nL(s("uDiffuseReflection"),r.diffuseReflection).nL(s("uShininess"),r.shininess).oL(s("uLightColor"),r.specularColor).oL(s("uAmbientColor"),r.ambientColor),i.bindBuffer(i.ARRAY_BUFFER,e);const c=h("aLocationA"),d=h("aLocationB");return i.vertexAttribPointer(c,3,i.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.yB.NL(c,1),i.enableVertexAttribArray(c),i.vertexAttribPointer(d,3,i.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.yB.NL(d,1),i.enableVertexAttribArray(d),l.iO(u).Jm(this.hG.length/2),!0}));break}case"primitive":{const r=ee(h)?h.getFillStyle():void 0,n=r&&G(r)?r.getColor():void 0;if(n){const h=s.shader;this.yB.sL(h,((s,r)=>(this.yB.iO(h).CL(s("uScale"),this.UN.cO.aL()).CL(s("uDisp"),this.UN.cO.lL()).FL(s("uViewProjectionMatrix"),this.tG).oL(s("uColor"),n).nL(s("uIsHighlighted"),this.xo).oL(s("uHighlightColorOffset"),this.wo).nL(s("uRenderEffectMask"),2===t?1:0).eL(e,void 0,{location:r("aPos"),size:3}).Jm(i.LINES,this.hG.length),!0)))}break}}return this}Ua(t){for(let i=0;i<t.length-1;i+=1){const s=t[i],e=t[i+1];this.hG.push(s),this.hG.push(e)}return this.rG=!0,{ds(){return this},Ss(){return this}}}$a(){return this.hG.length=0,this.rG=!0,this}Be(t){return this.Xl="function"==typeof t?t(this.Xl):t,this}Zl(){return this.Xl}$B(){return this.nG&&(this.yB.dL(this.nG),this.nG=void 0),this}wt(){return this.eG.max.x}At(){return this.eG.min.x}Ct(){return this.eG.max.y}kt(){return this.eG.min.y}lp(){return this.eG.max.z}up(){return this.eG.min.z}hl(){const t=this.Xl;return t===rt?0:t.getThickness()}rl(){const t=this.Xl;return t===rt?0:t.getThickness()}cp(){const t=this.Xl;return t===rt?0:t.getThickness()}}class by extends fg{constructor(t,i,s){super(t),this.VN="gpu-calculate",this.oG=i,this.aG=s;const{vertices:e,drawSize:h}=this.rz();this.nz=t.QO(e),this.az=h}Jm(t,i,s,e){return this.yB.eL(this.nz,0,{location:t.attribute("aInstanceGeo"),size:3},{location:e?t.attribute("aTriangleBary"):void 0,size:3}).jL(this.yB.gl.TRIANGLES,0,this.az,i),this}rz(){const t=this.aG,i=this.oG,s=new Float32Array(6*(6*i+6*(t-2)*i));let e=0;const h=2*Math.PI/i,r=Math.PI/t,n=(t,i,n,o,a)=>{const l=i*h,u=Math.PI/2-t*r,c=Math.cos(u),d=c*Math.cos(l),f=c*Math.sin(l),g=Math.sin(u);s[e]=d,s[e+1]=g,s[e+2]=f,s[e+3]=n,s[e+4]=o,s[e+5]=a,e+=6};for(let s=0;s<t;s+=1)for(let e=0;e<i;e+=1)s>0&&(n(s,e,1,0,0),n(s,e+1,1,1,0),n(s+1,e,0,0,1)),s<t-1&&(n(s,e+1,1,1,0),n(s+1,e+1,0,1,0),n(s+1,e,0,0,1));return e!==s.length&&Ai(0,(()=>{this.yB.mf.Bn&&e>s.length&&kt.console.warn("LightningChart JS unexpected error scenario, sphere geometry buffer size mismatch.\nA point series 3D component might have missing points.\n\nThis warning can be omitted with LightningChartOptions.warnings")})),{vertices:s,drawSize:e/6}}AB(){this.yB.dL(this.nz)}}const vy=(t,i)=>{const s=Math.round(i);s<3&&Ai(0,Bt);const e=s;let h=t.bL.MB.get(Array.from(t.bL.MB.keys()).find((t=>t.sectors===s&&t.stacks===e)));return h||(h=new by(t,s,e),t.bL.MB.set({sectors:s,stacks:e},h),h)};class xy extends gy{constructor(t,i,s,e,h){super(t,i,s,e,h),this.HN="cull-back",this.rM=[],this.Sz={},this.pV=new Bm(this.rM,(t=>t.vertexBuffer&&this.yB.dL(t.vertexBuffer)),!0),this.tu=[],this.Pa=0,this.Da=[],this.Ba=0,this.Ia=Vi,this.Oa=Vi,this.Ra=!1,this.Xl=Th.lineStyle,this.yp=Th.pointStyle3D,this.tp.u(jn),this.MV={attributesPerVertex:3,prepareRenderData:(t,i)=>oi(t)}}Is(t){const i=this.Ra,s=this.Da,e=this.Ba,h=e>0,r=this.Xl,n=r!==this.Kl,o=this.yp,a=o!==this.lG,l=this.LO(),u=this.po.i,c=this.po.S();this.Oa&&(this.Ia=is(this.Ia,this.Oa),this.Oa=void 0),h&&(this.tu=gi(this.tu,s,{canReturnB:!0}),this.Pa+=e);let d=s,f=e;if(i&&(this.rM.forEach((t=>{t.existingCoordinatesCount=0,t.existingDataPointsCount=0,t.boundaries=Vi})),this.pV.aV(),d=this.tu,f=this.Pa),f>0){const t=1e5,i=Math.floor(this.tE.uG/(this.MV.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),s=this.Co("ApplicationType",(t=>"UserSeries"===t.type))?f:1e3,e=Lt(s,t,i);this.pV.hV(d,e,((t,i,s,e)=>({existingDataPointsCount:s-e,existingCoordinatesCount:s,allocatedCoordinatesCount:t,jointPointsCount:e,lastDataPoint:i[s-1],boundaries:Vi,vertexBuffer:this.yB.BL(t*this.MV.attributesPerVertex,this.MV.prepareRenderData(i,s))})),((t,i,s,e)=>{this.yB.OL(t.vertexBuffer,t.existingCoordinatesCount*this.MV.attributesPerVertex,this.MV.prepareRenderData(i,s)),t.existingDataPointsCount+=s-e,t.existingCoordinatesCount+=s,t.jointPointsCount+=e,t.lastDataPoint=i[s-1]}))}if(n||a||l||u){const t={},i=ee(r)&&r,s=i&&i.getFillStyle(),e=G(s)&&s,h=j(s)&&s,n=e||h,a=fh(o)&&o.getSize(),l=fh(o)&&o.getFillStyle(),u=G(l)&&l,d=j(l)&&l,f=u||d,g=fh(o)&&o.getWireframeStyle(),m=g&&ee(g)&&g,y=m&&m.getFillStyle(),p=y&&G(y)&&y,S=r.getThickness()<0||1===r.getThickness()&&this.Co("ApplicationType",(t=>"InternalUI"===t.type))?"primitive":"instanced",b=h?["lookup",h.getLookUpProperty()]:"uniform";if("primitive"===S&&n?t.lines={type:"primitive",fillStyleSolid:e,fillStylePaletted:h,shader:this.yB.iL(im["3D"],im.Color({dataType:b}),im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0})),mousePicking:c?{shader:this.yB.iL(im["3D"],im.MousePicking,im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0}))}:void 0}:"instanced"===S&&i&&n&&(t.lines={type:"instanced",lineStyleSolid:i,fillStyleSolid:e,fillStylePaletted:h,shader:this.yB.iL(im["3D"],im.ColorShaded3D({dataType:b,shadingStyle:this.tp.S().type}),im.LineInstanced3D({axisWorldTranslation:xg(this.ut)})),geometry:My(this.yB,i.getThickness()),mousePicking:c?{shader:this.yB.iL(im["3D"],im.MousePicking,im.LineInstanced3D({axisWorldTranslation:xg(this.ut)}))}:void 0}),t.markers=void 0,f){const i=di(o.getShape(),{cube:()=>dy(this.yB),sphere:()=>_y(this.yB,o)});t.markers={geometry:i,pointStyle:o,pointSizeNWU:"number"==typeof a&&a,pointSizeAxis:"object"==typeof a&&a,fillStyleSolid:u,fillStylePaletted:d,shader:this.yB.iL(im["3D"],im.ColorShaded3D({dataType:d?["lookup",d.getLookUpProperty()]:"uniform",shadingStyle:this.tp.S().type,wireframe:!1!==p}),im.VertexLocation({offset:{dataType:"uniform",sizeUnit:"number"==typeof a?"nwu":"axis",symmetric:"number"==typeof a,halved:!0},axisWorldTranslation:xg(this.ut),normalSource:i.VN})),mousePicking:c?{shader:this.yB.iL(im["3D"],im.MousePicking,im.VertexLocation({offset:{dataType:"uniform",sizeUnit:"number"==typeof a?"nwu":"axis",symmetric:"number"==typeof a,halved:!0},axisWorldTranslation:xg(this.ut),normalSource:void 0}))}:void 0,wireframe:m&&p&&{thickness:m.getThickness(),fillStyleSolid:p}}}this.Sz=t,h?this.cG=this.tE.YE(h.lut,this.cG):this.cG&&(this.tE.XE(this.cG),this.cG=void 0),d?this.dG=this.tE.YE(d.lut,this.dG):this.dG&&(this.tE.XE(this.dG),this.dG=void 0)}return this.Ra=!1,this.Da=[],this.Ba=0,this.Kl=r,this.lG=o,this.tp.i=!1,this.po.i=!1,this}mB(t){var i,s;const e=this.yB.gl,{lines:h,markers:r}=this.Sz,n=this.tp.S(),o=1===t?null===(i=null==h?void 0:h.mousePicking)||void 0===i?void 0:i.shader:null==h?void 0:h.shader;if(h&&o&&"instanced"===h.type){const i=o,{geometry:s,lineStyleSolid:r,fillStyleSolid:a,fillStylePaletted:l}=h;this.yB.sL(i,((h,o,u)=>{let c=!1;return this.yB.iO(i).CL(h("uScale"),this.UN.cO.aL()).CL(h("uDisp"),this.UN.cO.lL()).FL(h("uViewProjectionMatrix"),this.tG).nL(h("uOffsetWU"),this.ks.Hy(r.getThickness())).nL(h("uIsHighlighted"),1===t||2===t?0:this.xo).oL(h("uHighlightColorOffset"),this.wo).nL(h("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===n.type&&this.yB.CL(h("uCameraLoc"),this.iG).CL(h("uLightLoc"),this.sG).nL(h("uAmbientReflection"),n.ambientReflection).nL(h("uSpecularReflection"),n.specularReflection).nL(h("uDiffuseReflection"),n.diffuseReflection).nL(h("uShininess"),n.shininess).oL(h("uLightColor"),n.specularColor).oL(h("uAmbientColor"),n.ambientColor),1===t?this.yB.oL(h("uColor"),this.uE):a?this.yB.oL(h("uColorDiffuse"),a.getColor()):l&&this.cG&&this.yB.OR(u,l.lut,this.cG,0),this.rM.forEach((t=>{e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer);const i=o("aLocationA"),h=o("aLocationB");e.vertexAttribPointer(i,3,e.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.yB.NL(i,1),e.enableVertexAttribArray(i),e.vertexAttribPointer(h,3,e.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.yB.NL(h,1),e.enableVertexAttribArray(h),s.iO(u).Jm(t.existingCoordinatesCount-1),c=!0})),c}))}if(h&&o&&"primitive"===h.type){const i=o,{fillStyleSolid:s,fillStylePaletted:r}=h;this.yB.sL(i,((h,n,o)=>{let a=!1;return this.yB.iO(i).CL(h("uScale"),this.UN.cO.aL()).CL(h("uDisp"),this.UN.cO.lL()).FL(h("uViewProjectionMatrix"),this.tG).nL(h("uIsHighlighted"),1===t||2===t?0:this.xo).oL(h("uHighlightColorOffset"),this.wo).nL(h("uRenderEffectMask"),2===t?1:0),1===t?this.yB.oL(h("uColor"),this.uE):s?this.yB.oL(h("uColor"),s.getColor()):r&&this.cG&&this.yB.OR(o,r.lut,this.cG,0),this.rM.forEach((t=>{this.yB.eL(t.vertexBuffer,void 0,{location:n("aPos"),size:3}).Jm(e.LINE_STRIP,t.existingCoordinatesCount),a=!0})),a}))}const a=1===t?null===(s=null==r?void 0:r.mousePicking)||void 0===s?void 0:s.shader:null==r?void 0:r.shader;if(r&&a){const i=a,{geometry:s,fillStyleSolid:e,fillStylePaletted:h,pointSizeAxis:o,pointSizeNWU:l,wireframe:u}=r;this.yB.sL(i,((r,a,c,d)=>{let f=!1;return this.yB.iO(i).CL(r("uScale"),this.UN.cO.aL()).CL(r("uDisp"),this.UN.cO.lL()).FL(r("uViewProjectionMatrix"),this.tG).nL(d("uRatioNwuWu"),this.UN.fG()).nL(r("uIsHighlighted"),1===t||2===t?0:this.xo).oL(r("uHighlightColorOffset"),this.wo).nL(r("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===n.type&&this.yB.CL(r("uCameraLoc"),this.iG).CL(r("uLightLoc"),this.sG).nL(r("uAmbientReflection"),n.ambientReflection).nL(r("uSpecularReflection"),n.specularReflection).nL(r("uDiffuseReflection"),n.diffuseReflection).nL(r("uShininess"),n.shininess).oL(r("uLightColor"),n.specularColor).oL(r("uAmbientColor"),n.ambientColor),1===t?this.yB.oL(r("uColor"),this.uE):e?this.yB.oL(r("uColorDiffuse"),e.getColor()):h&&this.dG&&this.yB.OR(c,h.lut,this.dG,0),u&&1!==t&&this.yB.nL(r("uWireframeThickness"),u.thickness).oL(r("uWireframeColor"),u.fillStyleSolid.getColor()),!1!==o&&this.yB.CL(r("uOffsetAxis"),[o.x,o.y,o.z]),!1!==l&&this.yB.nL(r("uOffsetNWU"),l),this.rM.forEach((i=>{this.yB.eL(i.vertexBuffer,1,{location:a("aPos"),size:3}),s.Jm(c,i.existingCoordinatesCount,"phong"===n.type&&1!==t,Boolean(u)&&1!==t),f=!0})),f}))}return this}Ua(t,i){Array.isArray(t)||(t=[t]),this.Da=gi(this.Da,t,{canReturnB:!0}),this.Ba+=t.length;const s=i||Qi(t);return this.Oa=this.Oa?is(this.Oa,s):s,this}Be(t){return this.Xl="function"==typeof t?t(this.Xl):t,this}Zl(){return this.Xl}Vy(t){return this.yp="function"==typeof t?t(this.yp):t,this}gG(){return this.yp}wt(){return this.Oa?Math.max(this.Oa.max.x,this.Ia.max.x):this.Ia.max.x}At(){return this.Oa?Math.min(this.Oa.min.x,this.Ia.min.x):this.Ia.min.x}Ct(){return this.Oa?Math.max(this.Oa.max.y,this.Ia.max.y):this.Ia.max.y}kt(){return this.Oa?Math.min(this.Oa.min.y,this.Ia.min.y):this.Ia.min.y}lp(){return this.Oa?Math.max(this.Oa.max.z,this.Ia.max.z):this.Ia.max.z}up(){return this.Oa?Math.min(this.Oa.min.z,this.Ia.min.z):this.Ia.min.z}hl(){return Di(this.Xl)}rl(){return Di(this.Xl)}cp(){return Di(this.Xl)}Va(){return this.tu}za(){return this.Da}ja(){return this.Pa}Ya(){return this.Ba}$a(){return this.Ra=!0,this.tu.length=0,this.Pa=0,this.Da=[],this.Ba=0,this.Ia=Vi,this.Oa=void 0,this}dispose(){return super.dispose(),this.pV.lV(),this.Sz={},this.cG&&(this.tE.XE(this.cG),this.cG=void 0),this.dG&&(this.tE.XE(this.dG),this.dG=void 0),this}$B(){return this.dispose(),this}}const My=(t,i)=>py(t,i>50?20:i>20?16:i>10?12:i>5?8:6),_y=(t,i)=>{const s=i.getSize();return vy(t,"number"==typeof s?s>50?20:s>20?16:s>10?12:s>5?8:6:20)};class Ay extends gy{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.HN="cull-back",this.rM=[],this.pV=new Bm(this.rM,(t=>t.vertexBuffer&&this.yB.dL(t.vertexBuffer)),!1),this.tu=[],this.Pa=0,this.Da=[],this.Ba=0,this.Ia=Vi,this.Oa=Vi,this.Ra=!1,this.wn=r,this.bp=Th.pointStyle3D,this.tp.u(jn);const n=!0===(null==r?void 0:r.individualPointColorEnabled),o=!0===(null==r?void 0:r.individualPointSizeEnabled),a=!0===(null==r?void 0:r.individualLookupValuesEnabled),l=!0===(null==r?void 0:r.individualPointSizeAxisEnabled);let u,c,d,f,g=0;g+=3,n&&(u=g,g+=4),o&&(c=g,g+=1),a&&(d=g,g+=1),l&&(f=g,g+=3);const m=((t,i,s,e)=>t||i||s||e?!t||i||s||e?t||!i||s||e?t||i||!s||e?t||i||s||!e?(h,r,n)=>{const o=3+(t?4:0)+(i?1:0)+(s?1:0)+(e?3:0),a=h.length,l=new Float32Array(a*o);let u=0,c=u;for(let t=0;t<a;t+=1){const i=h[t];l[c+0]=i.x,l[c+1]=i.y,l[c+2]=i.z,c+=o}if(u+=3,t){const t=n&&H(n)&&n.getFallbackColor()||C;c=u;for(let i=0;i<a;i+=1){const s=h[i].color||t;l[c+0]=s.r,l[c+1]=s.g,l[c+2]=s.b,l[c+3]=s.a,c+=o}u+=4}if(i){const t=r&&r.getSize();let i=1;"number"==typeof t&&(i=t),c=u;for(let t=0;t<a;t+=1){const s=h[t],e=void 0!==s.size?s.size:i;l[c+0]=e,c+=o}u+=1}if(s){c=u;for(let t=0;t<a;t+=1){const i=h[t];l[c+0]=void 0!==i.value?i.value:-34028234663852886e22,c+=o}u+=1}if(e){const t=r&&r.getSize();let i={x:1,y:1,z:1};"object"==typeof t&&(i=t),c=u;for(let t=0;t<a;t+=1){const s=h[t],e=void 0!==s.sizeAxisX?s.sizeAxisX:i.x,r=void 0!==s.sizeAxisY?s.sizeAxisY:i.y,n=void 0!==s.sizeAxisZ?s.sizeAxisZ:i.z;l[c+0]=e,l[c+1]=r,l[c+2]=n,c+=o}u+=3}return l}:(t,i,s)=>((t,i)=>{const s=i&&i.getSize();let e={x:1,y:1,z:1};"object"==typeof s&&(e=s);const h=t.length,r=new Float32Array(6*h);let n=0;for(let i=0;i<h;i+=1){const s=t[i];r[n+0]=s.x,r[n+1]=s.y,r[n+2]=s.z;const h=void 0!==s.sizeAxisX?s.sizeAxisX:e.x,o=void 0!==s.sizeAxisY?s.sizeAxisY:e.y,a=void 0!==s.sizeAxisZ?s.sizeAxisZ:e.z;r[n+3]=h,r[n+4]=o,r[n+5]=a,n+=6}return r})(t,i):(t,i,s)=>(t=>{const i=t.length,s=new Float32Array(4*i);for(let e=0,h=0;e<i;e+=1){const i=t[e];s[h+0]=i.x,s[h+1]=i.y,s[h+2]=i.z,s[h+3]=void 0!==i.value?i.value:-34028234663852886e22,h+=4}return s})(t):(t,i,s)=>((t,i)=>{const s=i&&i.getSize();let e=1;"number"==typeof s&&(e=s);const h=t.length,r=new Float32Array(4*h);for(let i=0,s=0;i<h;i+=1){const h=t[i];r[s+0]=h.x,r[s+1]=h.y,r[s+2]=h.z;const n=void 0!==h.size?h.size:e;r[s+3]=n,s+=4}return r})(t,i):(t,i,s)=>((t,i)=>{const s=i&&H(i)&&i.getFallbackColor()||C,e=t.length,h=new Float32Array(7*e);for(let i=0,r=0;i<e;i+=1){const e=t[i];h[r+0]=e.x,h[r+1]=e.y,h[r+2]=e.z;const n=e.color||s;h[r+3]=n.r,h[r+4]=n.g,h[r+5]=n.b,h[r+6]=n.a,r+=7}return h})(t,s):(t,i,s)=>oi(t))(n,o,a,l);this.MV={individualPointColorEnabled:n,individualPointSizeEnabled:o,individualLookupValuesEnabled:a,individualPointSizeAxisEnabled:l,attributesPerVertex:g,attributeOffsetCoordinate:0,attributeOffsetColor:u,attributeOffsetSize:c,attributeOffsetLookUpValue:d,attributeOffsetPointSize3D:f,prepareRenderData:(t,i)=>m(t,this.bp,this.bp.fillStyle)}}Is(t){const i=this.Ra,s=this.Da,e=this.Ba,h=e>0,r=this.bp,n=this.bp!==this.mG,o=this.po.S(),a=this.po.i,l=this.LO();this.Oa&&(this.Ia=is(this.Ia,this.Oa),this.Oa=void 0),h&&(this.tu=gi(this.tu,s,{canReturnB:!0}),this.Pa+=e);let u=s,c=e;if(i&&(this.rM.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.boundaries=Vi})),this.pV.aV(),u=this.tu,c=this.Pa),c>0){const t=Math.floor(this.tE.uG/(this.MV.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),i=Lt(c,1e5,t);this.pV.hV(u,i,((t,i,s)=>({existingDataPointsCount:s,existingCoordinatesCount:s,allocatedCoordinatesCount:t,boundaries:Vi,vertexBuffer:this.yB.BL(t*this.MV.attributesPerVertex,this.MV.prepareRenderData(i,s))})),((t,i,s)=>{this.yB.OL(t.vertexBuffer,t.existingCoordinatesCount*this.MV.attributesPerVertex,this.MV.prepareRenderData(i,s)),t.existingDataPointsCount+=s,t.existingCoordinatesCount=t.existingDataPointsCount}))}if(n||l||a){let t;const i=r.getSize(),s=r.getFillStyle(),e=this.MV.individualPointColorEnabled,h=this.MV.individualPointSizeEnabled,n=this.MV.individualPointSizeAxisEnabled,a=this.MV.individualLookupValuesEnabled,l=G(s)&&s,u=H(s)&&s,c=j(s)&&s,d=s===R&&R;if(u&&!e){const t="LCJS misusage error: Series individualPointColorEnabled flag must be set if using IndividualPointFill !";throw kt.alert(t),new Error(t)}if(c&&"value"===c.getLookUpProperty()&&!a){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw kt.alert(t),new Error(t)}const f=fh(r)&&r,g=f&&f.getWireframeStyle(),m=g&&ee(g)&&g,y=m&&m.getFillStyle(),p=y&&G(y)&&y;if(l||u||c||p){const s=u?"attribute":c?["lookup",c.getLookUpProperty()]:"uniform",e=h&&"number"==typeof i,a=n&&"object"==typeof i,f=e||a?"attribute":"uniform";if(fh(r)){const n=di(r.getShape(),{cube:()=>dy(this.yB),sphere:()=>wy(this.yB,r,h)});t={type:"instanced",shader:this.yB.iL(im["3D"],im.ColorShaded3D({dataType:s,shadingStyle:this.tp.S().type,wireframe:!1!==p}),im.VertexLocation({offset:{dataType:f,sizeUnit:"number"==typeof i?"nwu":"axis",halved:!0,symmetric:"number"==typeof i},axisWorldTranslation:xg(this.ut),normalSource:n.VN})),pointStyle:r,useIndividualPointSize:e,useIndividualPointSize3D:a,pointSizeNWU:"number"==typeof i&&i,pointSizeAxis:"object"==typeof i&&i,fillStyleSolid:l,fillStyleIndividual:u,fillStylePalette:c,fillStyleEmpty:d,mousePickingShader:o&&this.yB.iL(im["3D"],im.MousePicking,im.VertexLocation({offset:{dataType:f,sizeUnit:"number"==typeof i?"nwu":"axis",halved:!0,symmetric:"number"==typeof i},axisWorldTranslation:xg(this.ut),normalSource:void 0})),geometry:n,wireframe:m&&p&&{thickness:m.getThickness()<0?1:m.getThickness(),fillStyleSolid:p}}}else yh(r)&&"number"==typeof i&&(t={type:"primitive",shader:this.yB.iL(im["3D"],im.PointSize(f),im.Color({dataType:s}),im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0})),pointStyle:r,pointSizePixels:i,useIndividualPointSize:e,fillStyleSolid:l,fillStyleIndividual:u,fillStylePalette:c,mousePickingShader:o&&this.yB.iL(im["3D"],im.PointSize(f),im.MousePicking,im.VertexLocation({axisWorldTranslation:xg(this.ut),normalSource:void 0}))})}this.Sz=t,j(s)?this.aN=this.tE.YE(s.lut,this.aN):this.aN&&(this.tE.XE(this.aN),this.aN=void 0)}return this.Ra=!1,this.Da=[],this.Ba=0,this.mG=r,this.tp.i=!1,this}mB(t){const i=this.yB.gl,s=this.Sz;if(!s)return this;const e=1===t?s.mousePickingShader:s.shader;if(!e)return this;const h=this.tp.S(),{fillStyleSolid:r,fillStylePalette:n,useIndividualPointSize:o}=s,a="instanced"===s.type&&s.useIndividualPointSize3D,l="instanced"===s.type&&s.wireframe;return this.yB.sL(e,((u,c,d,f)=>{let g=!1;if(this.yB.iO(e).CL(u("uScale"),this.UN.cO.aL()).CL(u("uDisp"),this.UN.cO.lL()).FL(u("uViewProjectionMatrix"),this.tG).nL(u("uIsHighlighted"),1===t||2===t?0:this.xo).oL(u("uHighlightColorOffset"),this.wo).nL(u("uRenderEffectMask"),2===t?1:0),"instanced"===s.type){const{pointSizeAxis:t,pointSizeNWU:i}=s;!1!==t&&!1===a&&this.yB.CL(u("uOffsetAxis"),[t.x,t.y,t.z]),!1!==i&&!1===o&&this.yB.nL(u("uOffsetNWU"),i).nL(f("uRatioNwuWu"),this.UN.fG())}else if("primitive"===s.type){const{pointSizePixels:t}=s;o||this.yB.nL(u("uPointSize"),t).nL(u("uDevicePixelRatio"),this.yB.nO())}return 1===t?this.yB.oL(u("uColor"),this.uE):("instanced"===s.type?("phong"===h.type&&this.yB.CL(u("uCameraLoc"),this.iG).CL(u("uLightLoc"),this.sG).nL(u("uAmbientReflection"),h.ambientReflection).nL(u("uSpecularReflection"),h.specularReflection).nL(u("uDiffuseReflection"),h.diffuseReflection).nL(u("uShininess"),h.shininess).oL(u("uLightColor"),h.specularColor).oL(u("uAmbientColor"),h.ambientColor),l&&this.yB.nL(u("uWireframeThickness"),l.thickness).oL(u("uWireframeColor"),l.fillStyleSolid.getColor()),r&&this.yB.oL(u("uColorDiffuse"),r.getColor()),s.fillStyleEmpty&&this.yB.oL(u("uColorDiffuse"),T)):"primitive"===s.type&&r&&this.yB.oL(u("uColor"),r.getColor()),n&&this.aN&&this.yB.OR(d,n.lut,this.aN,0)),this.rM.forEach(((e,r)=>{i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer);const n=c("aPos");if(i.vertexAttribPointer(n,3,i.FLOAT,!1,this.MV.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.MV.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.yB.NL(n,1),i.enableVertexAttribArray(n),s.fillStyleIndividual&&void 0!==this.MV.attributeOffsetColor&&1!==t){const t=c("aColor");i.vertexAttribPointer(t,4,i.FLOAT,!1,this.MV.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.MV.attributeOffsetColor*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.yB.NL(t,1),i.enableVertexAttribArray(t)}if(o&&void 0!==this.MV.attributeOffsetSize){"instanced"===s.type?this.yB.nL(f("uRatioNwuWu"),this.UN.fG()):"primitive"===s.type&&this.yB.nL(u("uDevicePixelRatio"),this.yB.nO());const t=c("instanced"===s.type?"aOffsetNWU":"aPointSize");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.MV.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.MV.attributeOffsetSize*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.yB.NL(t,1),i.enableVertexAttribArray(t)}if(a&&void 0!==this.MV.attributeOffsetPointSize3D&&"instanced"===s.type){const t=c("aOffsetAxis");i.vertexAttribPointer(t,3,i.FLOAT,!1,this.MV.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.MV.attributeOffsetPointSize3D*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.yB.NL(t,1),i.enableVertexAttribArray(t)}if(s.fillStylePalette&&"value"===s.fillStylePalette.getLookUpProperty()&&void 0!==this.MV.attributeOffsetLookUpValue&&1!==t){const t=c("aLookupValue");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.MV.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.MV.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.yB.NL(t,1),i.enableVertexAttribArray(t)}"instanced"===s.type?(s.geometry.Jm(d,e.existingCoordinatesCount,"phong"===h.type&&1!==t,Boolean(l)&&1!==t),g=!0):"primitive"===s.type&&(this.yB.Jm(i.POINTS,e.existingCoordinatesCount),g=!0)})),g})),this}Ua(t,i){Array.isArray(t)||(t=[t]),this.Da=gi(this.Da,t,{canReturnB:!0}),this.Ba+=t.length;const s=i||Qi(t);return this.Oa=this.Oa?is(this.Oa,s):s,this}vp(t){return this.bp="function"==typeof t?t(this.bp):t,this}yG(){return this.bp}wt(){return this.Oa?Math.max(this.Oa.max.x,this.Ia.max.x):this.Ia.max.x}At(){return this.Oa?Math.min(this.Oa.min.x,this.Ia.min.x):this.Ia.min.x}Ct(){return this.Oa?Math.max(this.Oa.max.y,this.Ia.max.y):this.Ia.max.y}kt(){return this.Oa?Math.min(this.Oa.min.y,this.Ia.min.y):this.Ia.min.y}lp(){return this.Oa?Math.max(this.Oa.max.z,this.Ia.max.z):this.Ia.max.z}up(){return this.Oa?Math.min(this.Oa.min.z,this.Ia.min.z):this.Ia.min.z}hl(){const t=this.bp,i=t.getSize();return"number"==typeof i?fh(t)?i/2:yh(t)?5:0:0}rl(){return this.hl()}cp(){return this.hl()}Va(){return this.tu}za(){return this.Da}ja(){return this.Pa}Ya(){return this.Ba}$a(){return this.Ra=!0,this.tu.length=0,this.Pa=0,this.Da=[],this.Ba=0,this.Ia=Vi,this.Oa=void 0,this}dispose(){return super.dispose(),this.pV.lV(),this.aN&&(this.tE.XE(this.aN),this.aN=void 0),this.Sz=void 0,this}$B(){return this.dispose(),this}}const wy=(t,i,s)=>{const e=i.getSize();return vy(t,"number"==typeof e?s||e>=50?20:e>=10?10:e>=3?5:3:32)};class ky extends gy{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.HN="disabled",this.ve=Th.fillStyle,this.cu=Th.lineStyle,this.tN=f("bilinear"),this.pG=[],this.SG=Vi,this.bG=void 0,this.Sz={},this.vG=!1,this.tp.u(Hn);const n="columns"===e.dataOrder?e.columns:e.rows,o="columns"===e.dataOrder?e.rows:e.columns;this.wn={...e,primaryDimensionVectorsCount:n,secondaryDimensionVectorsCount:o},this.SG={min:{x:Math.min(e.start.x,e.start.x+(e.columns-1)*e.step.x),z:Math.min(e.start.z,e.start.z+(e.rows-1)*e.step.z)},max:{x:Math.max(e.start.x,e.start.x+(e.columns-1)*e.step.x),z:Math.max(e.start.z,e.start.z+(e.rows-1)*e.step.z)}},this.xG=new Array(this.wn.primaryDimensionVectorsCount).fill(void 0),this.HC=new qm(this.tE,t.tE.mN,t.cs.ut,Bt,[],{...this.wn,start:{x:0,y:0},step:{x:1,y:1}},-1,C).du(rt),this.HC.eN=$m;const a=this.HC.rN.gridTiles.map((t=>{const i=t.sizeHeatmapDataVectors,s=t.sizeUniqueHeatmapDataVectors,e=t.iFirstVector,h=t.iFirstUniqueVector,r="columns"===this.wn.dataOrder?{x:this.wn.step.x*(t.sizeHeatmapDataVectors.primary-1),z:this.wn.step.z*(t.sizeHeatmapDataVectors.secondary-1)}:{x:this.wn.step.x*(t.sizeHeatmapDataVectors.secondary-1),z:this.wn.step.z*(t.sizeHeatmapDataVectors.primary-1)},n="columns"===this.wn.dataOrder?{x:this.wn.start.x+this.wn.step.x*t.iFirstVector.primary,z:this.wn.start.z+this.wn.step.z*t.iFirstVector.secondary}:{x:this.wn.start.x+this.wn.step.x*t.iFirstVector.secondary,z:this.wn.start.z+this.wn.step.z*t.iFirstVector.primary},o=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary),a={primary:t.sizeHeatmapDataVectors.primary-1,secondary:t.sizeHeatmapDataVectors.secondary-1};return{iFirstVector:t.iFirstVector,iFirstUniqueVector:t.iFirstUniqueVector,sizeHeatmapDataVectors:t.sizeHeatmapDataVectors,sizeUniqueHeatmapDataVectors:t.sizeUniqueHeatmapDataVectors,iFirstGeometryVector:e,iFirstGeometryUniqueVector:h,sizeGeometryDataVectors:i,sizeUniqueGeometryDataVectors:s,startLocationAxis:n,sizeAxis:r,heightmapData:o,normalmapSize:a}})),l=this.HC.rN.gridTileSizes.map((t=>{const i=a.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary)),s=i[0].sizeGeometryDataVectors;return{...t,tiles:i,sizeGeometryData:s}})),u=a.reduce(((t,i)=>{const s=i.sizeHeatmapDataVectors.primary,e=i.sizeHeatmapDataVectors.secondary,h=s*e;return h>t.cells?{primary:s,secondary:e,cells:h}:t}),{primary:0,secondary:0,cells:0});this.MG={gridTiles:a,gridTileSizes:l,largestGridTileSize:u}}_G(t){this.AG=t,this.bG=void 0}wG(t){"columns"===this.wn.dataOrder?(this.SG.min.x=Math.min(this.wn.start.x,this.wn.start.x+(this.wn.columns-1)*this.wn.step.x)+t,this.SG.max.x=Math.max(this.wn.start.x,this.wn.start.x+(this.wn.columns-1)*this.wn.step.x)+t):(this.SG.min.z=Math.min(this.wn.start.z,this.wn.start.z+(this.wn.rows-1)*this.wn.step.z)+t,this.SG.max.z=Math.max(this.wn.start.z,this.wn.start.z+(this.wn.rows-1)*this.wn.step.z)+t),this.kG=t}Is(t){const i=this.pG,s=this.ve,e=G(s)&&s,h=j(s)&&s,r=Kh(this.Vo,s),n=h&&h.getPalette(),o=this.cu,a=ee(o)&&o,l=a&&a.getFillStyle(),u=l&&G(l)&&l,c=!1!==u,d=o!==this.Du,f=this.tN.i,g=this.tN.S(),m=this.tp.S(),y=this.LO(),p=this.po.S();this.HC.Is();const S=this.HC.nN;if(!S)return this;this.CG=this.CG||this.TG(S);const b=this.CG;this.FG(b);const v=jm(i,b,void 0,(t=>t.sizeGeometryDataVectors));if(v.size>0&&(Zm(this.yB,v,(t=>t.heightmapData),(t=>t.heightmapDataTexture)),this.vG=!0),"phong"===m.type&&(v.size>0||y)){const t=this.yB.gl,i=this.yB.iL(im["2D"],im.DrawToNormalTexture({flipXZ:"rows"===this.wn.dataOrder,vertexIdSource:this.yB.wR(),normalTextureType:this.yB.gl2?"uint":"ubyte",heightmapTextureType:this.yB.hR?"float":"ubyte",littleEndian:this.yB.IS_MACHINE_LITTLE_ENDIAN}));b.gridTileSizes.forEach((s=>{s.tiles.forEach((e=>{const h=e.normalmapTexture;if(!h)return;const r={x:e.normalmapSize.secondary,y:e.normalmapSize.primary},n=r.x*r.y;this.yB.oR.mB((()=>{this.yB.sL(i,((h,r,o,a)=>(this.yB.iO(i).kR(o,n).hL(h("uTileDimensionsXZ"),["columns"===this.wn.dataOrder?s.sizeHeatmapData.primary:s.sizeHeatmapData.secondary,"columns"===this.wn.dataOrder?s.sizeHeatmapData.secondary:s.sizeHeatmapData.primary]).wL(h("uTileDimensions"),[s.sizeHeatmapData.primary,s.sizeHeatmapData.secondary]).hL(h("uTileStartLocationAxisXZ"),[e.startLocationAxis.x+("columns"===this.wn.dataOrder&&this.kG||0),e.startLocationAxis.z+("rows"===this.wn.dataOrder&&this.kG||0)]).hL(h("uTileSizeAxisXZ"),[e.sizeAxis.x,e.sizeAxis.z]).rL(h("uHeightmapTexture"),e.heightmapDataTexture,1).Jm(t.POINTS,n),!0)))}),h,r,void 0,this.cs.Jr(),0)}))}))}const x=this.Sz;if(r||d||f){n?this.aN=this.tE.YE(n,this.aN):this.aN&&(this.tE.XE(this.aN),this.aN=void 0);const t=a&&u?{wireframeSolid:a,wireframeFillSolid:u}:void 0;e?x.surface={shader:this.yB.iL(im["3D"],im.SurfaceGrid({axisWorldTranslation:xg(this.ut),fillColor:"uniform",interpolation:"bilinear"===g&&"bilinear",flipXZ:"rows"===this.wn.dataOrder,shadingStyle:m.type,wireframe:c,instanceIdSource:this.yB.CR(),normalTextureType:this.yB.gl2?"uint":"ubyte",intensityTextureType:this.yB.hR?"float":"ubyte",heightmapTextureType:this.yB.hR?"float":"ubyte",littleEndian:this.yB.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"solid",fillStyleSolid:e},wireframe:t}:this.aN&&h&&"value"===h.getLookUpProperty()?x.surface={shader:this.yB.iL(im["3D"],im.SurfaceGrid({axisWorldTranslation:xg(this.ut),fillColor:["lookup","value"],interpolation:"bilinear"===g&&"bilinear",flipXZ:"rows"===this.wn.dataOrder,shadingStyle:m.type,wireframe:c,instanceIdSource:this.yB.CR(),normalTextureType:this.yB.gl2?"uint":"ubyte",intensityTextureType:this.yB.hR?"float":"ubyte",heightmapTextureType:this.yB.hR?"float":"ubyte",littleEndian:this.yB.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"intensity",fillStylePaletted:h,colorLookupTexture:this.aN},wireframe:t}:this.aN&&h?x.surface={shader:this.yB.iL(im["3D"],im.SurfaceGrid({axisWorldTranslation:xg(this.ut),fillColor:["lookup",h.getLookUpProperty()],interpolation:"bilinear"===g&&"bilinear",flipXZ:"rows"===this.wn.dataOrder,shadingStyle:m.type,wireframe:c,instanceIdSource:this.yB.CR(),normalTextureType:this.yB.gl2?"uint":"ubyte",intensityTextureType:this.yB.hR?"float":"ubyte",heightmapTextureType:this.yB.hR?"float":"ubyte",littleEndian:this.yB.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"xyz",fillStylePaletted:h,colorLookupTexture:this.aN},wireframe:t}:c&&(x.surface={shader:this.yB.iL(im["3D"],im.SurfaceGrid({axisWorldTranslation:xg(this.ut),fillColor:void 0,interpolation:"bilinear"===g&&"bilinear",flipXZ:"rows"===this.wn.dataOrder,shadingStyle:m.type,wireframe:c,instanceIdSource:this.yB.CR(),normalTextureType:this.yB.gl2?"uint":"ubyte",intensityTextureType:this.yB.hR?"float":"ubyte",heightmapTextureType:this.yB.hR?"float":"ubyte",littleEndian:this.yB.IS_MACHINE_LITTLE_ENDIAN})),fill:void 0,wireframe:t})}return x.mousePicking=p?this.Sz.mousePicking||{shader:this.yB.iL(im["3D"],im.SurfaceGrid({axisWorldTranslation:xg(this.ut),fillColor:"uniform",interpolation:"bilinear"===g&&"bilinear",flipXZ:"rows"===this.wn.dataOrder,shadingStyle:"simple",wireframe:!1,instanceIdSource:this.yB.CR(),normalTextureType:this.yB.gl2?"uint":"ubyte",intensityTextureType:this.yB.hR?"float":"ubyte",heightmapTextureType:this.yB.hR?"float":"ubyte",littleEndian:this.yB.IS_MACHINE_LITTLE_ENDIAN}))}:void 0,this.Sz=x,this.pG.length=0,this.Vo=s,this.Du=o,this.tp.i=!1,this}TG(t){const i=this.MG.gridTiles.map((i=>{const s=Xm(this.yB,i.sizeHeatmapDataVectors.secondary,i.sizeHeatmapDataVectors.primary),e=t.gridTiles.find((t=>t.iFirstUniqueVector.primary===i.iFirstUniqueVector.primary&&t.iFirstUniqueVector.secondary===i.iFirstUniqueVector.secondary));if(!e)throw new Error("Internal LC JS error prepare surface data 2D render data not found");return{...i,intensityDataTexture:e.intensityDataTexture,heightmapDataTexture:s,normalmap:void 0}})),s=this.MG.gridTileSizes.map((t=>{const s=i.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary));return{...t,tiles:s}})),e=this.yB.QO([0,0,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,0,0]),h=this.yB.gl.TRIANGLES;return{gridTiles:i,gridTileSizes:s,rectangleLocationsBuffer:e,rectangleLocationsDrawLength:6,rectangleLocationsDrawMode:h}}FG(t){var i;if("phong"===this.tp.S().type)for(let s=0;s<t.gridTiles.length;s+=1){const e=t.gridTiles[s];if(e.normalmapTexture)return;let h;const r=null===(i=this.yB.gl2)||void 0===i?void 0:i.ctx;if(r)h=this.yB.gR(null,r.RGBA_INTEGER,!1,!0,{x:e.normalmapSize.secondary,y:e.normalmapSize.primary},!1,r.UNSIGNED_INT,r.RGBA32UI);else{const t=this.yB.gl;h=this.yB.gR(null,t.RGBA,!1,!0,{x:e.normalmapSize.secondary,y:e.normalmapSize.primary},!1,t.UNSIGNED_BYTE)}e.normalmapTexture=h}else t.gridTiles.forEach((t=>{t.normalmapTexture&&(this.yB.jB(t.normalmapTexture),t.normalmapTexture=void 0)}))}mB(t){var i,s,e,h;const r=this.yB.gl,n=this.CG;if(!n)return this;const o=this.tp.S(),a=this.Sz,l=1===t?null===(i=a.mousePicking)||void 0===i?void 0:i.shader:null===(s=a.surface)||void 0===s?void 0:s.shader;if(!l)return this;const u=1!==t?null===(e=a.surface)||void 0===e?void 0:e.wireframe:void 0,d=1!==t?null===(h=a.surface)||void 0===h?void 0:h.fill:void 0;return this.yB.sL(l,((i,s,e,h)=>{let a=!1;if(this.yB.iO(l).TR(e,this.MG.largestGridTileSize.cells).CL(i("uScale"),this.UN.cO.aL()).CL(i("uDisp"),this.UN.cO.lL()).FL(i("uViewProjectionMatrix"),this.tG).nL(i("uIsHighlighted"),1===t||2===t?0:this.xo).oL(i("uHighlightColorOffset"),this.wo).nL(i("uRenderEffectMask"),2===t?1:0),1!==t&&("phong"===o.type&&this.yB.CL(i("uCameraLoc"),this.iG).CL(i("uLightLoc"),this.sG).nL(i("uAmbientReflection"),o.ambientReflection).nL(i("uSpecularReflection"),o.specularReflection).nL(i("uDiffuseReflection"),o.diffuseReflection).nL(i("uShininess"),o.shininess).oL(i("uLightColor"),o.specularColor).oL(i("uAmbientColor"),o.ambientColor),u)){const{wireframeFillSolid:t,wireframeSolid:s}=u,e=s.getThickness()<0?1:s.getThickness();this.yB.oL(i("uWireframeColor"),t.getColor()).nL(i("uWireframeThickness"),e)}return 1===t?this.yB.oL(i("uColorDiffuse"),this.uE):"solid"===(null==d?void 0:d.fillMode)&&this.yB.oL(i("uColorDiffuse"),d.fillStyleSolid.getColor()),n.gridTileSizes.forEach((h=>{this.yB.hL(i("uTileDimensionsXZ"),["columns"===this.wn.dataOrder?h.sizeHeatmapData.primary:h.sizeHeatmapData.secondary,"columns"===this.wn.dataOrder?h.sizeHeatmapData.secondary:h.sizeHeatmapData.primary]).wL(i("uTileDimensions"),[h.sizeHeatmapData.primary,h.sizeHeatmapData.secondary]),h.tiles.forEach((o=>{let l=0,f=(o.sizeHeatmapDataVectors.primary-1)*(o.sizeHeatmapDataVectors.secondary-1);if(this.AG){const t=this.AG.fill.iFirstPrimary,i=this.AG.fill.iFirstPrimary+this.AG.fill.amountPrimary-1,s=o.iFirstVector.primary,e=o.iFirstVector.primary+o.sizeHeatmapDataVectors.primary-1;if(s>i||e<t)return;const r=((t,i,s,e)=>c(Math.max(t,s),Math.min(i,e)))(t,i,s,e);l=(r.min-o.iFirstVector.primary)*(h.sizeGeometryData.secondary-1),f=(r.max-r.min)*(h.sizeGeometryData.secondary-1)}if(!(l<0||f<=0)){if("intensity"===(null==d?void 0:d.fillMode)){const{colorLookupTexture:t,fillStylePaletted:s}=d;this.yB.OR(e,s.lut,t,1).rL(i("uTileIntensityValues"),o.intensityDataTexture,2).kL(i("uTileBoundsAxisXZ"),[o.startLocationAxis.x+("columns"===this.wn.dataOrder&&this.kG||0),o.startLocationAxis.z+("rows"===this.wn.dataOrder&&this.kG||0),o.sizeAxis.x,o.sizeAxis.z])}if("xyz"===(null==d?void 0:d.fillMode)){const{colorLookupTexture:t,fillStylePaletted:i}=d;this.yB.OR(e,i.lut,t,1)}1!==t&&"phong"===this.tp.S().type&&o.normalmapTexture&&this.yB.rL(i("uNormalmapTexture"),o.normalmapTexture,3),this.yB.eL(n.rectangleLocationsBuffer,0,{location:s("aGeoCellOffset"),size:2},{location:u?s("aTriangleBary"):void 0,size:3}).IL(i("uBaseInstance"),l).hL(i("uTileStartLocationAxisXZ"),[o.startLocationAxis.x+("columns"===this.wn.dataOrder&&this.kG||0),o.startLocationAxis.z+("rows"===this.wn.dataOrder&&this.kG||0)]).hL(i("uTileSizeAxisXZ"),[o.sizeAxis.x,o.sizeAxis.z]).rL(i("uHeightmapTexture"),o.heightmapDataTexture,0).jL(n.rectangleLocationsDrawMode,0,n.rectangleLocationsDrawLength,f),a=!0,r.bindBuffer(r.ARRAY_BUFFER,null)}}))})),a})),this}dispose(){return super.dispose(),this.HC.dispose(),this.aN&&(this.tE.XE(this.aN),this.aN=void 0),this.CG&&(this.CG.gridTileSizes.forEach((t=>{})),this.CG.gridTiles.forEach((t=>{this.yB.jB(t.heightmapDataTexture),t.normalmapTexture&&this.yB.jB(t.normalmapTexture)})),this.yB.dL(this.CG.rectangleLocationsBuffer),this.CG=void 0),this.Sz={},this}$B(){return this.dispose(),this.HC.$B(),this}fS(t){return this.HC.fS(t),this}gS(t){this.pG.push(t),Ym(this.MG.gridTiles,t,(t=>t.heightmapData));for(let i=t.startPrimary;i<t.startPrimary+t.lengthPrimary;i+=1)this.xG[i]=void 0;return this.bG=void 0,this}cS(t){return this.tN.u(t),this}dS(){return this.tN.S()}Ae(t){return this.ve=Zh(this.ve,t),this.HC.Ae(this.ve),this}Ih(){return this.ve}du(t){return this.cu="function"==typeof t?t(this.cu):t,this}fu(){return this.cu}wt(){return this.SG.max.x}At(){return this.SG.min.x}Ct(){const t=this.bG||this.IG();return this.bG=t,t.max}kt(){const t=this.bG||this.IG();return this.bG=t,t.min}lp(){return this.SG.max.z}up(){return this.SG.min.z}hl(){return 0}rl(){return 0}cp(){return 0}IG(){if(this.bG)return this.bG;const t=this.AG?this.AG.fill.iFirstPrimary:0,i=this.AG?t+this.AG.fill.amountPrimary-1:this.wn.primaryDimensionVectorsCount-1;let s=Ri,e=Ei;return this.MG.gridTiles.forEach((h=>{for(let r=Math.max(t,h.iFirstUniqueVector.primary);r<=Math.min(i,h.iFirstUniqueVector.primary+h.sizeUniqueHeatmapDataVectors.primary-1);r+=1){const t=(r-h.iFirstUniqueVector.primary)*h.sizeHeatmapDataVectors.secondary;let i=this.xG[r];if(i)s=s<i.min?s:i.min,e=e>i.max?e:i.max;else{i={min:Ri,max:Ei},this.xG[r]=i;for(let r=0;r<h.sizeHeatmapDataVectors.secondary;r+=1){const n=h.heightmapData[t+r];s=s<n?s:n,e=e>n?e:n,i.min=Math.min(i.min,n),i.max=Math.max(i.max,n)}}}})),this.bG={min:s,max:e},this.bG}}class Cy extends gy{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.HN="disabled",this.dN=0,this.gN={};const n={min:{x:e.start.x,z:e.start.z},max:{x:"rows"===e.scrollDimension?e.start.x+(e.columns-1)*e.step.x:e.start.x,z:"columns"===e.scrollDimension?e.start.z+(e.rows-1)*e.step.z:e.start.z}};this.wn={...e,initialBoundaries:n,scrollDimensionSize:"columns"===e.scrollDimension?e.columns:e.rows,staticDimensionSize:"columns"===e.scrollDimension?e.rows:e.columns},this.SG=n;const o=()=>({shape:new ky(this.UN,Bt,this._o,{columns:e.columns+("columns"===e.scrollDimension?1:0),rows:e.rows+("rows"===e.scrollDimension?1:0),start:{x:0,z:0},step:e.step,dataOrder:e.scrollDimension,heatmapDataType:"intensity"},this.lE,this.uE).dispose(),hasData:!1});this.rM=[o(),o()]}Is(t){return this.rM.forEach((i=>{i.shape.Is(t)})),this}mB(t){return this.rM.forEach((i=>{i.hasData&&(i.shape.tG=this.tG,i.shape.iG=this.iG,i.shape.sG=this.sG,i.shape.mB(t))})),this}$a(){return this.dN=0,this.gN={},this.SG=this.wn.initialBoundaries,this.rM.forEach((t=>{t.shape.dispose(),t.shape.vG=!1,t.hasData=!1})),this}SS(t){var i;const s=this.rM[0],e=this.rM[1],h=t.heightMapValues?t.heightMapValues.length:null===(i=t.intensityValues)||void 0===i?void 0:i.length;let r=0;if(!h)return this;do{const i=Math.floor(this.dN/this.wn.scrollDimensionSize)%this.rM.length,n=this.rM[i],o=this.dN%this.wn.scrollDimensionSize,a=this.wn.scrollDimensionSize-o,l=0===o,u=Math.min(a,h),c=o+u,d=o,f=d+1,g=r,m=r+u,y=this.dN>=this.wn.scrollDimensionSize&&c<=this.wn.scrollDimensionSize-1,p=l;if(l){const t="columns"===this.wn.scrollDimension?this.wn.start.x+(this.dN-1)*this.wn.step.x:this.wn.start.z+(this.dN-1)*this.wn.step.z;n.shape.wG(t)}const S=y?0:1,b=c+(y?1:0);n.shape._G({fill:{iFirstPrimary:S,amountPrimary:b},wireframe:{iFirstPrimary:S,amountPrimary:b,connectNext:!1}});const v=n===s?e:s,x=c+1,M=1+this.wn.scrollDimensionSize-x;v.shape._G({fill:{iFirstPrimary:x,amountPrimary:M},wireframe:{iFirstPrimary:x,amountPrimary:M-1,connectNext:!0}});const _={};if(t.heightMapValues){const i=t.heightMapValues.slice(g,m);let s=!1;p&&this.gN.yValues&&(s=!0,i.splice(0,0,this.gN.yValues));const e={startPrimary:s?d:f,startSecondary:0,lengthPrimary:i.length,lengthSecondary:this.wn.staticDimensionSize,values:i,type:"y"};n.shape.gS(e),n.hasData=!0,_.yValues=i[u-1]}if(t.intensityValues){const i=t.intensityValues.slice(g,m);let s=!1;p&&this.gN.intensityValues&&(s=!0,i.splice(0,0,this.gN.intensityValues));const e={startPrimary:s?d:f,startSecondary:0,lengthPrimary:i.length,lengthSecondary:this.wn.staticDimensionSize,values:i,type:"intensity"};n.shape.fS(e),n.hasData=!0,_.intensityValues=i[u-1]}this.dN+=u,r+=u,this.gN=_}while(r<h);return"columns"===this.wn.scrollDimension?(this.SG.min.x=this.wn.start.x+Math.max(this.dN-this.wn.scrollDimensionSize,0)*this.wn.step.x,this.SG.max.x=this.wn.start.x+(this.dN-1)*this.wn.step.x):(this.SG.min.z=this.wn.start.z+Math.max(this.dN-this.wn.scrollDimensionSize,0)*this.wn.step.z,this.SG.max.z=this.wn.start.z+(this.dN-1)*this.wn.step.z),this}cS(t){return this.rM.forEach((i=>i.shape.cS(t))),this}dS(){return this.rM[0].shape.dS()}Ae(t){return this.rM.forEach((i=>i.shape.Ae(t))),this}Ih(){return this.rM[0].shape.Ih()}du(t){return this.rM.forEach((i=>i.shape.du(t))),this}fu(){return this.rM[0].shape.fu()}$B(){return this.dispose(),this.rM.forEach((t=>t.shape.$B())),this}dispose(){return super.dispose(),this.rM.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.rM.forEach((i=>i.shape.setVisible(t&&i.hasData))),this}np(t){return super.np(t),this.rM.forEach((i=>i.shape.np(t))),this}wt(){return this.SG.max.x}At(){return this.SG.min.x}Ct(){return Math.max(this.rM[0].shape.Ct(),this.rM[1].shape.Ct())}kt(){return Math.min(this.rM[0].shape.kt(),this.rM[1].shape.kt())}lp(){return this.SG.max.z}up(){return this.SG.min.z}hl(){return 0}rl(){return 0}cp(){return 0}ds(t){return super.ds(t),this.rM.forEach((i=>i.shape.ds(t))),this}}class Ty extends hy{constructor(t,i,s,e){super(t,i,s),this.PG=45,this.DG=.1,this.BG=100,this.iG=l(0,0,1),this.OG=l(0,0,-1),this.LG=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],this.tp=new Gn,this.ut=e}kS(){const{cellIndex:t,cellSpan:i,cellsAmount:s}=this.ut,e=i.x/s.x,h=i.y/s.y,r=t.x/s.x,n=t.y/s.y,o=this.cs.$t();return{x:r*o.x,y:n*o.y,width:e*o.x,height:h*o.y}}setCameraLocation(t){return this.iG=t,this}getCameraLocation(){return this.iG}setCameraDirection(t){return this.OG=Li.normalize(t),this}getCameraDirection(){return this.OG}setLightLocation(t){return this.sG=t,this}getLightLocation(){return this.sG}EG(){return l(this.LG[0],this.LG[1],this.LG[2])}zG(){return l(this.LG[4],this.LG[5],this.LG[6])}}class Fy extends Ty{constructor(t,i,s,e){super(t,i,s,e),this.cO=new om,this.VG=!0,this.tE=t,this.gl=t.sE(),this.ON=this.TN,this.NG=this.cs.co((()=>{this.VG=!0})),this.GG=e.G((()=>{this.VG=!0}))}JO(t){const i=t.At(),s=t.kt(),e=t.up(),h=t.wt(),r=t.Ct(),n=t.lp();if(i===Ri||h===Ei||s===Ri||r===Ei||e===Ri||n===Ei)return zi;const o=t.hl(),a=t.rl(),l=t.cp(),u=Math.abs(t.ks.Hy(o)*t.ut.x.it()),c=Math.abs(t.ks.Hy(a)*t.ut.y.it()),d=Math.abs(t.ks.Hy(l)*t.ut.z.it()),f=i-u,g=h+u,m=s-c,y=r+c,p=e-d,S=n+d;let b;return[{x:f,y:m,z:p},{x:g,y:m,z:p},{x:f,y:y,z:p},{x:g,y:y,z:p},{x:f,y:m,z:S},{x:g,y:m,z:S},{x:f,y:y,z:S},{x:g,y:y,z:S}].map((i=>t.ks.$y(i))).forEach((t=>{if(!t)return;const i={min:t,max:t};b=b?ts(b,{min:t,max:t}):i})),b||zi}LN(t){const i=Array.from(this.ON.values());for(let s=0;s<i.length;s+=1){const e=i[s],h=e.hE(t);if(h)return{entity:e,index:s,collectionMember:h.collectionMember}}}$y(t){if(this.WG(),this.HG(),!this.tG)return;const i=this.cO.lL(),s=l(i[0],i[1],i[2]),e=this.cO.aL(),h=l(e[0],e[1],e[2]),r=Li.divideVec(Li.subtractVec(t,s),h),o=this.tG,a=dg.multiply(o,[r.x,r.y,r.z,1]),u=n(a[0]/a[3],a[1]/a[3]),c=this.cs.$t();return{x:.5*(1+u.x)*c.x,y:.5*(1+u.y)*c.y}}ct(t){const i=this.cO.lL(),s=this.cO.aL(),e=Li.divideVec(Li.subtractVec(t,{x:i[0],y:i[1],z:i[2]}),{x:s[0],y:s[1],z:s[2]});return{...t,x:e.x,y:e.y,z:e.z}}ft(t){const i=this.cO.lL(),s=this.cO.aL(),e=Li.addVec(Li.multiplyVec(t,{x:s[0],y:s[1],z:s[2]}),{x:i[0],y:i[1],z:i[2]});return{...t,x:e.x,y:e.y,z:e.z}}Hy(t){return t/1e3}fG(){return.001}Is(){const t=this.iG,i=this.sG,s=this.ut.x.i||this.ut.y.i||this.ut.z.i;if(!i)throw Ai(0,(()=>wi()));const{viewProjectionMatrix:e}=this.WG();this.HG();const h=[t.x,t.y,t.z],r=[i.x,i.y,i.z];return this.TN.forEach((t=>{t.tG=e,t.iG=h,t.sG=r,t.Is(s)})),this}WG(){if(!this.VG&&this.tG)return{viewProjectionMatrix:this.tG};const t=this.kS(),i=t.width/t.height;this.UG=dg.projectionPerspective(this.PG,i,this.DG,this.BG);const s=this.iG;this.LG[12]=s.x,this.LG[13]=s.y,this.LG[14]=s.z;const e=this.OG,h=l(0,1,0),r=Li.multiply(e,-1),n=Li.normalize(Li.cross(h,r)),o=Li.normalize(Li.cross(r,n));this.LG[0]=n.x,this.LG[1]=n.y,this.LG[2]=n.z,this.LG[4]=o.x,this.LG[5]=o.y,this.LG[6]=o.z,this.LG[8]=r.x,this.LG[9]=r.y,this.LG[10]=r.z,this.$G=dg.inverse(this.LG);const{cellIndex:a,cellSpan:u,cellsAmount:c}=this.ut,d=u.x/c.x,f=u.y/c.y,g=(a.x+u.x/2)/c.x,m=(a.y+u.y/2)/c.y,y=dg.multiply(dg.translation(On(-1,1,g),On(-1,1,m),0),dg.scaling(d,f,1));return this.tG=dg.multiply(y,dg.multiply(this.UG,this.$G)),this.jG=dg.inverse(this.tG),this.VG=!1,{viewProjectionMatrix:this.tG}}HG(){this.cO.YR(this.ut.x),this.cO.XR(this.ut.y),this.cO.ZR(this.ut.z)}mB(t,i){const s=this.gl.nO(),e=this.kS(),h={x:e.x*s*i,y:e.y*s*i,width:e.width*s*i,height:e.height*s*i};return this.gl.qO(h.x,h.y,h.width,h.height),this.TN.forEach((i=>{i.getVisible()&&(this.gl.YO(i.HN),1!==t&&this.gl.op(i.sp),(1!==t||i.getMouseInteractions())&&i.mB(t))})),this.gl.YO("disabled"),this.gl.op(!1),this.gl.XO(!1),this}setCameraLocation(t){return this.iG.x===t.x&&this.iG.y===t.y&&this.iG.z===t.z||(this.VG=!0),super.setCameraLocation(t),this}setCameraDirection(t){return this.OG.x===t.x&&this.OG.y===t.y&&this.OG.z===t.z||(this.VG=!0),super.setCameraDirection(t),this}N(){super.N(),this.cs.do(this.NG),this.ut.W(this.GG)}xp(t){const i=this.tE.RN();return this.FN(new Ay(this,this.IN,[],i,this.tE.EN(i),t))}hy(t){const i=this.tE.RN();return this.FN(new xy(this,this.IN,t,i,this.tE.EN(i)))}gp(){const t=this.tE.RN();return this.FN(new my(this,this.IN,[],t,this.tE.EN(t)))}Ig(){const t=this.tE.RN();return this.FN(new Sy(this,this.IN,[],t,this.tE.EN(t)))}uS(t){const i=this.tE.RN();return this.FN(new ky(this,this.IN,[],t,i,this.tE.EN(i)))}pS(t){const i=this.tE.RN();return this.FN(new Cy(this,this.IN,[],t,i,this.tE.EN(i)))}}const Iy=(t,i,s,e,h)=>{const{range:r}=s,n={row:{...r.row},column:{...r.column}};if(n.row.end+=1,n.column.end+=1,i){n.row.end+=1,n.column.end+=1;const i=Et(t,n),[r,o,a,l,u]=e.pixelated(i.sliced,i.rows*i.columns,h);s.vbo=r,s.ibo=o,s.length=a,s.lengthWireframe=l,s.boundary=u}else{const i=Et(t,n),[r,o,a,l,u]=e.nonPixelated(i.sliced,i.rows*i.columns,h);s.vbo=r,s.ibo=o,s.length=a,s.lengthWireframe=l,s.boundary=u}},Py={pixelated:(t,i)=>{const s=t.length,e=i/s,h=s-1,r=e-1,n=h*r*6,a=Array(h*r*4*2),l=Array(n),u=c(o(Ri,Ri),o(Ei,Ei));let d=0,f=1,g=2,m=3,y=0,p=0;for(let i=0;i<s;i+=1)for(let s=0;s<e;s+=1){const e=t[i][s];if(u.min.x=Math.min(u.min.x,e.x),u.min.y=Math.min(u.min.y,e.y),u.max.x=Math.max(u.max.x,e.x),u.max.y=Math.max(u.max.y,e.y),i<h&&s<r){const e=t[i][s],h=t[i+1][s],r=t[i][s+1],n=t[i+1][s+1];a[y+0]=e.x,a[y+1]=e.y,a[y+2]=h.x,a[y+3]=h.y,a[y+4]=r.x,a[y+5]=r.y,a[y+6]=n.x,a[y+7]=n.y,y+=8,l[p+0]=d,l[p+1]=f,l[p+2]=g,p+=3,l[p+0]=g,l[p+1]=m,l[p+2]=f,p+=3,d+=4,f+=4,g+=4,m+=4}}const S=l.length;for(let t=0;t<r;t+=1){const i=4*(0*r+t);l[p+0]=i+0,l[p+1]=i+2,p+=2}for(let t=0;t<h;t+=1){const i=4*(t*r+(r-1));l[p+0]=i+2,l[p+1]=i+3,p+=2}const b=l.length;return[a,new Uint16Array(l),S,b,u]},nonPixelated:(t,i)=>{const s=t.length,e=i/s,h=s-1,r=e-1,n=Array(2*i),a=Array(h*r*6),l=c(o(Ri,Ri),o(Ei,Ei));let u=0;for(let i=0;i<s;i+=1)for(let s=0;s<e;s+=1){const e=t[i][s];n[u+0]=e.x,n[u+1]=e.y,u+=2,l.min.x=Math.min(l.min.x,e.x),l.min.y=Math.min(l.min.y,e.y),l.max.x=Math.max(l.max.x,e.x),l.max.y=Math.max(l.max.y,e.y)}let d=0;for(let t=0;t<h;t+=1)for(let i=0;i<r;i+=1)a[d+0]=t*e+i,a[d+1]=t*e+i+1,a[d+2]=(t+1)*e+i,d+=3,a[d+0]=t*e+i+1,a[d+1]=(t+1)*e+i+1,a[d+2]=(t+1)*e+i,d+=3;const f=a.length;for(let t=0;t<h;t+=1){const i=0,s=r-1;a[d+0]=t*e+i,a[d+1]=(t+1)*e+i,a[d+2]=t*e+s+1,a[d+3]=(t+1)*e+s+1,d+=4}const g=a.length;return[n,new Uint16Array(a),f,g,l]},verticesPerPixelatedCell:4},Dy=(t,i,s,e)=>{const{range:h}=s,r={row:{...h.row},column:{...h.column}};r.row.end+=1,r.column.end+=1;const n=Et(t,r);s.intensities=i?((t,i,s)=>{const e=t.length,h=i/e,r=new Float32Array(i*s);for(let i=0,n=0;i<e;i+=1)for(let e=0;e<h;e+=1){const{intensity:h}=t[i][e];for(let t=0;t<s;t+=1)r[n]=h,n+=1}return r})(n.sliced,n.rows*n.columns,e.verticesPerPixelatedCell):((t,i)=>{const s=new Float32Array(i),e=t.length,h=i/e;for(let i=0,r=0;i<e;i+=1)for(let e=0;e<h;e+=1)s[r]=t[i][e].intensity,r+=1;return s})(n.sliced,n.rows*n.columns)},By=(t,i,s,e,h)=>{const{range:r}=e,n={row:{...r.row},column:{...r.column}};n.row.end+=1,n.column.end+=1;const o=Et(t,n);e.colors=s?((t,i,s,e)=>{const h=t.length,r=i/h,n=new Float32Array(4*i*e);for(let i=0,o=0;i<h;i+=1)for(let h=0;h<r;h+=1){const{color:r}=t[i][h];for(let t=0;t<e;t+=1)r?(n[o+0]=r.r,n[o+1]=r.g,n[o+2]=r.b,n[o+3]=r.a,o+=4):(n[o+0]=s.r,n[o+1]=s.g,n[o+2]=s.b,n[o+3]=s.a,o+=4)}return n})(o.sliced,o.rows*o.columns,i,h.verticesPerPixelatedCell):((t,i,s)=>{const e=new Float32Array(4*i),h=t.length,r=i/h;for(let i=0,n=0;i<h;i+=1)for(let h=0;h<r;h+=1){const{color:r}=t[i][h];r?(e[n+0]=r.r,e[n+1]=r.g,e[n+2]=r.b,e[n+3]=r.a,n+=4):(e[n+0]=s.r,e[n+1]=s.g,e[n+2]=s.b,e[n+3]=s.a,n+=4)}return e})(o.sliced,o.rows*o.columns,i)};class Oy extends br{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.YG="grid",this.cO=new nm,this.XG=[],this.tE=t,this.iE=i,this.lE=r,this.uE=n,this.yB=t.sE()}Is(){const t=this.No(),i=this.po.S();if(this.Go()&&this.Cu&&this.wu){const s=this.yB,e=this.ve;this.cO.cL(this.ut);const h=this.ut.Ai()||t;this.LM&&!h||(this.LM=this.ut.ki());const r=this.gu(),n=t||this.lu||r;if(t||n){if(r){const{y:t,x:i}=this.ru.S(),s=this.uu?101:201;this.ZG=((t,i,s=200)=>{const e=s-1;t<=1&&(t+=1),i<=1&&(i+=1);const h=Math.ceil((t-1)/e),r=Math.ceil((i-1)/e),n=Array.from(Array(h)).map((()=>Array(r)));for(let s=0,o=0,a=0,l=t-1;s<h;s+=1){const t=Math.min(e,l);l-=t,a+=t;for(let t=0,h=0,l=0,u=i-1;t<r;t+=1){const i=Math.min(e,u);u-=i,l+=i,n[s][t]={row:{start:o,end:a},column:{start:h,end:l}},h=l}o=a}return{tiles:n,tilesCount:{x:r,y:h}}})(t,i,s),this.KG=(({tiles:t,tilesCount:{x:i,y:s}})=>{const e=Array(s*i);for(let h=0,r=0;h<s;h+=1)for(let s=0;s<i;s+=1)e[r]={range:t[h][s]},r+=1;return e})(this.ZG),this.qG(),this.XG=this.KG.map((()=>({vbo:void 0,ibo:void 0,colors:void 0,intensities:void 0,length:0}))),this.ru.i=!1,this.nu.i=!1}const t=this.KG,i=this.XG,e=this.wu;if(n){this.Ia=zi;for(const i of t)Iy(e,this.uu,i,Py,void 0);let h=0;for(const e of i){e.vbo&&s.dL(e.vbo),e.ibo&&s.dL(e.ibo);const i=t[h];h+=1,e.vbo=s.QO(i.vbo),e.ibo=s.RL(i.ibo),e.length=i.length,e.lengthWireframe=i.lengthWireframe,this.Ia=ts(this.Ia,i.boundary)}this.lu=!1}}if(this.zo()){!j(e)&&this.bz&&(this.tE.XE(this.bz),this.bz=void 0),this.fO=e===R?void 0:s.iL(im["2D"],im.VertexLocation({translation:"grid"===this.YG?{dataType:"uniform",sizeUnit:"axis"}:void 0,axisWorldTranslation:xg(this.ut),normalSource:void 0}),G(e)?im.Color({dataType:"uniform"}):H(e)?im.Color({dataType:"attribute"}):j(e)?im.Color({dataType:["lookup",e.getLookUpProperty()]}):tt(e)||et(e)?im.Color({dataType:["gradient",e]}):void 0);const t=this.cu;G(t)?this.JG=s.iL(im["2D"],im.Color({dataType:"uniform"}),im.VertexLocation({translation:"grid"===this.YG?{dataType:"uniform",sizeUnit:"axis"}:void 0,axisWorldTranslation:xg(this.ut),normalSource:void 0})):this.JG=void 0,this.Wo(e),this.Du=this.cu}const o=this.KG,a=this.XG,l=this.Cu;if(j(e)&&e.lut.isValid){if(this.au){for(const t of o)Dy(l,this.uu,t,Py);let t=0;for(const i of a){i&&i.intensities&&s.dL(i.intensities);const e=o[t];t+=1,i.intensities=s.EL(e.intensities)}this.au=!1}const t=e.getPalette();this.bz=this.tE.YE(t,this.bz),this.QG=t}else if(H(e)&&(this.tW&&s.SL(this.tW),this.ou)){for(const t of o)By(l,e.color,this.uu,t,Py);let t=0;for(const i of a){i.colors&&s.dL(i.colors);const e=o[t];t+=1,i.colors=s.EL(e.colors)}this.ou=!1}tt(e)?this.pE=cm(this.Fo(),this.ut,e.getPosition(),e.getExtent(),e.getShape(),this.yB.nO()):et(e)?this.SE=dm(this.Fo(),this.ut,e.getAngle(!0),this.yB.nO()):(this.pE=void 0,this.SE=void 0),this.FE=i?this.FE||this.yB.iL(im["2D"],im.MousePicking,im.VertexLocation({translation:"grid"===this.YG?{dataType:"uniform",sizeUnit:"axis"}:void 0,axisWorldTranslation:xg(this.ut),normalSource:void 0})):void 0}return this}mB(t){const i=this.Cu&&this.wu;if(this.Go()&&i){const i=1===t?this.FE:this.fO;if(i){const s=this.ve,e=G(s)&&s,h=j(s)&&s,r=H(s)&&s,n=tt(s)&&s,o=et(s)&&s;this.yB.sL(i,((s,a,l)=>{let u=!1;this.yB.iO(i).hL(s("uScale"),this.cO.aL()).hL(s("uDisp"),this.cO.lL()).nL(s("uIsHighlighted"),1===t||2===t?0:this.xo).oL(s("uHighlightColorOffset"),this.wo).nL(s("uRenderEffectMask"),2===t?1:0),"grid"===this.YG&&this.yB.hL(s("uTranslationAxis"),[this.mi.x,this.mi.y]),1===t?this.yB.oL(s("uColor"),this.uE):e?this.yB.oL(s("uColor"),e.getColor()):h&&h.lut.isValid&&this.bz?this.yB.OR(l,h.lut,this.bz,0):n?this.yB.pR(l,this.pE,n):o&&this.yB.SR(l,this.SE,o);for(const{vbo:i,ibo:s,colors:e,intensities:n,length:o}of this.XG)this.yB.zL(a("aPos"),i).UL(s),1!==t&&(h&&"value"===h.getLookUpProperty()&&this.yB.HL(a("aLookupValue"),n),r&&this.yB.WL(a("aColor"),e)),this.yB.$L(o),u=!0;return u}))}const s=1===t?void 0:this.JG;if(s){const i=this.cu,e=G(i)&&i;this.yB.sL(s,((i,h,r)=>{let n=!1;this.yB.iO(s).hL(i("uScale"),this.cO.aL()).hL(i("uDisp"),this.cO.lL()).nL(i("uIsHighlighted"),1===t||2===t?0:this.xo).oL(i("uHighlightColorOffset"),this.wo).nL(i("uRenderEffectMask"),2===t?1:0),"grid"===this.YG&&this.yB.hL(i("uTranslationAxis"),[this.mi.x,this.mi.y]),e&&this.yB.oL(i("uColor"),e.getColor());for(const{vbo:t,ibo:i,lengthWireframe:s}of this.XG)this.yB.zL(h("aPos"),t).UL(i).$L(s,this.yB.gl.LINES),n=!0;return n}))}}return this}hE(t){return this.lE===t&&{}}iW(t,i){if(this.po.S()&&this.Ia&&this.wu){const r="grid"===this.YG?this.mi:{x:0,y:0},n=ds(ut({x:t,y:i},this.cs.ut,this.ut),r);if(!(s=n,e=this.Ia.min,h=this.Ia.max,s.x>h.x||s.y>h.y||s.x<e.x||s.y<e.y||this.ve===R))for(let t=0;t<this.wu.length-1;t+=1)for(let i=0;i<this.wu[t].length-1;i+=1){const s=this.wu[t][i],e=this.wu[t][i+1],h=this.wu[t+1][i],r=this.wu[t+1][i+1];if(hs(n,s,e,h,r)&&(ss(n,s,e,h)||ss(n,e,h,r)))return!0}}var s,e,h;return!1}Pb(t){const i="grid"===this.YG?this.mi:{x:0,y:0},s=t;let e=[0,0],h=n(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);const r=this.wu,o=this.Cu,a=this.uu;let l=0;if(a&&(l=-1),r&&o){for(let t=0;t<r.length+l;t+=1)for(let n=0;n<r[t].length+l;n+=1)if(a){const o=r[t][n],a=r[t][n+1],l=r[t+1][n],u=r[t+1][n+1],c=cs(es(o,a,l,u),i);Math.hypot(c.x-s.x,c.y-s.y)<Math.hypot(h.x-s.x,h.y-s.y)&&(e=[t,n],h=c)}else Math.hypot(r[t][n].x+i.x-s.x,r[t][n].y+i.y-s.y)<Math.hypot(r[e[0]][e[1]].x+i.x-s.x,r[e[0]][e[1]].y+i.y-s.y)&&(e=[t,n]);if(e){o[e[0]]||(e[0]=o.length-1),o[e[0]][e[1]]||(e[1]=o[e[0]].length-1);let t={x:0,y:0};const s=o[e[0]][e[1]].intensity;return a?t={x:h.x,y:h.y}:(t.x=r[e[0]][e[1]].x+i.x,t.y=r[e[0]][e[1]].y+i.y),[t,s]}}}Yv(t){const i=t,s=this.wu,e=this.Cu,h=this.uu;{const t=[],e=ut(i,this.ut,this.cs.ut);if(s&&!this.iW(e.x,e.y)){for(let i=0;i<s.length-1;i+=1)t.push([s[i][0],s[i+1][0]]),t.push([s[i][s[i].length-1],s[i+1][s[i].length-1]]);for(let i=0;i<s[0].length-1;i+=1)t.push([s[0][i],s[0][i+1]]),t.push([s[s[0].length-1][i],s[s[0].length-1][i+1]]);let e=Number.MAX_SAFE_INTEGER,h=n(0,0);for(let s=0;s<t.length;s+=1){const r=Zi(i,t[s][0],t[s][1]);r[0]<e&&(e=r[0],h=r[1])}i.x=h.x,i.y=h.y}}let r=[0,0];if(s&&e){for(let i=0;i<s.length+-1;i+=1)for(let e=0;e<s[i].length+-1;e+=1){const h=s[i][e],n=s[i][e+1],o=s[i+1][e],a=s[i+1][e+1];(ss(t,h,n,o)||ss(t,n,o,a))&&(r=[i,e])}if(r){let t;e[r[0]]||(r[0]=e.length-1),e[r[0]][r[1]]||(r[1]=e[r[0]].length-1);let n={x:0,y:0};if(n=i,h)t=e[r[0]][r[1]].intensity;else{const h={point:s[r[0]][r[1]],value:e[r[0]][r[1]].intensity},n={point:s[r[0]+1][r[1]],value:e[r[0]+1][r[1]].intensity},o={point:s[r[0]][r[1]+1],value:e[r[0]][r[1]+1].intensity},a={point:s[r[0]+1][r[1]+1],value:e[r[0]+1][r[1]+1].intensity};t=Ln(i,h,n,o,a)}return[n,t]}}}qG(){const t=this.yB;if(this.XG.length>0){for(const i of this.XG){const{vbo:s,ibo:e,colors:h,intensities:r}=i||{};s&&(t.dL(s),i.vbo=void 0),e&&(t.dL(e),i.ibo=void 0),h&&(t.dL(h),i.colors=void 0),r&&(t.dL(r),i.intensities=void 0)}this.XG.length=0}}$B(){return this.qG(),this.tW&&(this.yB.SL(this.tW),this.tW=void 0),this.bz&&(this.tE.XE(this.bz),this.bz=void 0),this}vu(t,i){return this.YG="mesh",super.vu(t,i)}wt(){return"grid"===this.YG?this.Ia.max.x+this.mi.x:this.Ia.max.x}At(){return"grid"===this.YG?this.Ia.min.x+this.mi.x:this.Ia.min.x}Ct(){return"grid"===this.YG?this.Ia.max.y+this.mi.y:this.Ia.max.y}kt(){return"grid"===this.YG?this.Ia.min.y+this.mi.y:this.Ia.min.y}hl(){return 0}rl(){return 0}}class Ly extends Fh{constructor(t,i,s=hm){var e,h,r;super(t,i),this.$=o(1,1),this.sW=!1,this.eW=0,this.hW=!0,this.rW=0,this.uG=8388608,this.vs=(t=!1)=>(this.Ii||this.nW()||(t&&(this.sW=!0),void 0===this.Gr&&(this.Gr=kt.requestAnimationFrame(this.oW))),this),this.oW=t=>{if(this.Ii)return;const i=t-this.eW;if(i>=this.zn||-1===this.zn){this.eW=t,this.sW=!1;const s=i>50?1e3/60:i;this.Wr&&this.Wr(s),this.Gr=void 0,-1!==this.zn&&(this.Gr=this.sW?kt.requestAnimationFrame(this.oW):void 0),this.us.Is(i),this.tn(),this.sn(),this.Hr&&this.Hr()}else this.Gr=kt.requestAnimationFrame(this.oW)},this.aW=new Map,this.sE=()=>this.yB,this.lW=()=>{var t,i,s;const e=this._n(),h=this.hW,r=kt.performance.now(),n=null===(t=this.uW)||void 0===t?void 0:t.cW.reduce(((t,i)=>t?i.dW&&t.dW&&i.dW>t.dW?i:t:i),void 0),o=null==n?void 0:n.dW,a=null===(i=this.yn)||void 0===i?void 0:i.timeStamp,l=null===(s=this.no)||void 0===s?void 0:s.timeStamp;return h?(this.vs(!0),!1):void 0===n||(void 0===n||!n.fW)&&(void 0!==l&&void 0!==o&&l>o||(void 0!==o&&void 0===e?r-o>=1e3:!(void 0!==o&&void 0!==a&&r-a>=2e3)||r-o>=1e3))},this.gW=()=>{var t,i;this.mW=void 0;const s=null===(i=null===(t=this.uW)||void 0===t?void 0:t.yW)||void 0===i?void 0:i.pW;void 0===s||s>=this.rW||this.SW()},this.sn=()=>{const t=this.yB.gl,i=kt.performance.now(),s=this.$,e=s.x>0&&s.y>0;if(this.qr.i&&this.yB.qL(this.qr.S()),this.yB.$a(),t.resize&&e&&t.resize(s.x*this.yB.nO(),s.y*this.yB.nO()),this.yB.KO(0,0,s.x*this.yB.nO(),s.y*this.yB.nO()),this.bW.width=s.x*this.yB.nO(),this.bW.height=s.y*this.yB.nO(),e)for(const t of this.zr.values())t.mB(0,1);return this.wn.Ln&&e&&(this.mW&&(kt.clearTimeout(this.mW),this.mW=void 0),this.lW()?this.SW():this.mW=kt.setTimeout(this.gW,500)),this.j(),this.Rr(),this.an&&this.nn(this.an),this.hW=!1,this.rW=i,this},this.tn=()=>{const t=this.$;if(0===t.x||0===t.y)return this;this.$n.K(t);for(const t of this.zr.values())t.Is();return this.j(),this},this.vW=0,this.xW=1,this.bW=kt.document.createElement("canvas");const n={preserveDrawingBuffer:!0,antialias:t?t.antialias:void 0,alpha:!0,lineAntialias:!t||(!0===t.lineAntiAlias||!1===t.lineAntiAlias?t.lineAntiAlias:!1!==t.antialias)};let a;if("webgl1"!==(null===(e=null==t?void 0:t.webgl)||void 0===e?void 0:e.version)){const t=this.bW.getContext("webgl2",n);t&&(a=new s(this,this.wn,{type:"webgl2",ctx:t,antialias:n.antialias,lineAntialias:n.lineAntialias},this.ts.isDark))}if(!a&&"webgl2"!==(null===(h=null==t?void 0:t.webgl)||void 0===h?void 0:h.version)){const t=this.bW.getContext("webgl",n)||this.bW.getContext("experimental-webgl",n);a=new s(this,this.wn,{type:"webgl1",ctx:t,antialias:n.antialias,lineAntialias:n.lineAntialias},this.ts.isDark)}if(!a)throw new vt("No WebGL context available."+((null===(r=null==t?void 0:t.webgl)||void 0===r?void 0:r.version)?`\nSelected explicit target: ${t.webgl.version}`:""));this.yB=a,this.nR=St(this.yB.gl);const l=this.yB._L;if(l.length>0){const t=kt.document.createElement("div");t.innerText="LightningChart JS: Some features might not work properly, due to missing WebGL features.",t.style.cssText="position:absolute;top:0;background:red;width:100%;padding:10px;text-align:center;color:white;z-index:1;";const i=kt.document.createElement("button");i.innerText="X",i.addEventListener("click",(()=>{t.parentElement&&t.parentElement.removeChild(t)})),this.Fr.appendChild(t),t.appendChild(i),!1!==this.wn.Bn&&kt.console.warn("LightningChart JS - Following WebGL extensions could not be loaded:",l.join(", "))}let u=1;if(t&&t.devicePixelRatio)u=!0===t.devicePixelRatio?kt.devicePixelRatio||1:t.devicePixelRatio||1;else{const t=kt.document.head.querySelector('meta[name="viewport"]');t&&t.content.includes("width=device-width")&&(u=kt.devicePixelRatio||1)}this.yB.fR(u),this.bW.style.position="absolute",this.bW.style.top="0",this.bW.style.left="0",this.bW.style.right="0",this.bW.style.bottom="0",this.bW.style.width="100%",this.bW.style.height="100%",this.bW.style.boxSizing="content-box",this.Fr.appendChild(this.bW);const c=t?t.width:void 0,d=t?t.height:void 0;this.Wn=this.MW(c),this.Un=this.MW(d),this._W(this.Wn,this.Un),this.mN=this.hF("engine offscreen",1e6),this.AW=this.hF("engine bg",0);const f="function"==typeof this.ts.lcjsBackgroundFillStyle?this.ts.lcjsBackgroundFillStyle(this.wn.$s):this.ts.lcjsBackgroundFillStyle;this.$n=this.AW.we(this.ut).Ae(f)._e(this.ts.lcjsBackgroundStrokeStyle).setMouseInteractions(!1).Ce({x:0,y:0});const g=this.hF("engine effects",200001).zN(this.ts.effect);this.hs=g,this.Zr(),this.Rr(),this.Yg=_h(this),this.Xg={ts:this.ts,us:this.us,ut:this.ut,vs:t=>this.vs(t),_n:()=>this._n(),VP:t=>this.VP(t),wn:this.wn,An:t=>this.An(t),hs:this.hs,mo:t=>this.mo(t),yo:t=>this.yo(t),AD:{_D:(t,i,s)=>this.yB.Ph(i.family).eO(t,i,s)}};const m=()=>{this.N()};kt.addEventListener("unload",m),this.Ur.push((()=>{kt.removeEventListener("unload",m)}))}get wW(){return this.zr}Er(t,i){let s=this.aW.get(t);if(!s){const i=this.yB.bR(t),e=new Set,h=t=>{e.add(t)},r=s=>{e.delete(s)&&0===e.size&&(i.unbindResources(),this.aW.delete(t))},n=[];s={imageTexture:i,instances:e,handleNewInstance:h,handleInstanceDisposed:r,sharedEngineReference:{NP:()=>i.wO,GP:t=>{i.wO?t():n.push(t)}}},this.aW.set(t,s),i.iO(this),i.DO((()=>{n.forEach((t=>{t()})),n.length=0}))}const e=new eo(t,s.handleNewInstance,s.handleInstanceDisposed,i);return s.handleNewInstance(e),e}VP(t){const i=Array.from(this.aW.values()).find((i=>i.instances.has(t)));if(!i)throw Ai(0,(()=>new Error("LightningChart JS error, attempted to use Icon that is disposed. Please check that you are not disposing an Icon that is still in use, or attempting to use a previously disposed Icon!")));return i.sharedEngineReference}ln(t,i){var s;const e=null===(s=this.uW)||void 0===s?void 0:s.yW;if(!e)return;const h=this.Fe(i.x,i.y),r=Math.round(h.x*this.yB.nO()),n=Math.round(h.y*this.yB.nO());return[[-1,-1],[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[0,0]].map((t=>this.kW(e,r+t[0]/e.TW,n+t[1]/e.TW))).reduce(((t,i)=>{if(void 0===i)return t||void 0;const s=1e6*i.layerIndex+i.entityIndex;return!t||s>t.zIndexForComparison?{zIndexForComparison:s,entity:i.entity,collectionMember:i.collectionMember}:t}),void 0)}kW(t,i,s){const e=Math.round(i*t.TW),h=Math.round(s*t.TW);if(e<0||e>=t.$.x||h<0||h>=t.$.y)return;const r=4*(e+h*t.$.x),n=t.FW[r+0],o=t.FW[r+1],a=t.FW[r+2],l=t.FW[r+3];return void 0!==n&&void 0!==o&&void 0!==a&&void 0!==l?this.IW(n,o,a,l):void 0}Br(t,i){return(t=>{const i=t.split(",")[0].split(":")[1].split(";")[0],s=kt.atob(t.split(",")[1]),e=new Uint8Array(s.length);for(let t=0;t<s.length;t+=1)e[t]=s.charCodeAt(t);return new kt.Blob([e.buffer],{type:i})})(this.bW.toDataURL(t,i))}Or(t,i,s=!1){this.Zr(n(Math.round(t),Math.round(i))),this.Qr();const e=this.yB.gl.drawingBufferWidth,h=this.yB.gl.drawingBufferHeight,r=new Uint8Array(e*h*4);if(this.yB.gl.readPixels(0,0,e,h,this.yB.gl.RGBA,this.yB.gl.UNSIGNED_BYTE,r),!s){const t=h/2|0,i=4*e,s=new Uint8Array(4*e);for(let e=0;e<t;e+=1){const t=e*i,n=(h-e-1)*i;s.set(r.subarray(t,t+i)),r.copyWithin(t,n,n+i),r.set(s,n)}}return this.Nr={x:0,y:i},r}XD(t){return void 0!==this.Wn?this.Wn[0]=t:this.Wn=[t,void 0],this.Fr.style.minWidth=`${this.Wn[0]}px`,this.Zr(),this}KD(t){return void 0!==this.Wn?this.Wn[1]=t:this.Wn=[void 0,t],this.Fr.style.maxWidth=`${this.Wn[1]}px`,this.Zr(),this}JD(t){return void 0!==this.Un?this.Un[0]=t:this.Un=[t,void 0],this.Fr.style.minHeight=`${this.Un[0]}px`,this.Zr(),this}tB(t){return void 0!==this.Un?this.Un[1]=t:this.Un=[void 0,t],this.Fr.style.maxHeight=`${this.Un[1]}px`,this.Zr(),this}_W(t,i){return this.Wn=t,this.Un=i,this.Fr.style.minWidth=`${this.Wn[0]}px`,this.Fr.style.maxWidth=`${this.Wn[1]}px`,this.Fr.style.minHeight=`${this.Un[0]}px`,this.Fr.style.maxHeight=`${this.Un[1]}px`,this.Zr(),this}hF(t,i=this.Kn()){const s=this.Zn(i);if(s){if(Ai(0,(()=>{})),!(s instanceof ny))throw new Error("Unexpected Engine Layer error");return s}return this.en(new ny(this,i,t))}oF(t,i,s){const e=this.Zn(i);if(e){if(Ai(0,(()=>{})),!(e instanceof Fy))throw new Error("Unexpected Engine Layer error");return e}return this.en(new Fy(this,i,t,s))}$t(){return this.$}MW(t){return t instanceof Array||(t=[t,t]),t}Xr(){return this.bW}nW(){const t=this.yB.gl;return t&&"resize"in t}SW(){var t;const i=this.yB.gl,s=kt.performance.now(),e=this._n(),h=this.wn.On,r={x:Math.ceil(this.$.x*this.yB.nO()*h),y:Math.ceil(this.$.y*this.yB.nO()*h)};this.uW||(this.uW={TW:h,PW:r,cW:[],yW:void 0});let n=this.uW.cW.find((t=>!t.fW)),o=!1;n||(o=!0,n={fW:!1,$:r,DR:i.createTexture(),DW:this.yB.mL(),BW:this.yB.yL(),OW:new Uint8Array,dW:void 0},this.uW.cW.push(n));const a=n;(o||a.$.x!==r.x||a.$.y!==r.y)&&(i.bindTexture(i.TEXTURE_2D,a.DR),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,r.x,r.y,0,i.RGBA,i.UNSIGNED_BYTE,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.bindFramebuffer(i.FRAMEBUFFER,a.DW),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,a.DR,0),i.bindRenderbuffer(i.RENDERBUFFER,a.BW),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,r.x,r.y),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,a.BW),a.OW=new Uint8Array(r.x*r.y*4),a.$=r),a.fW=!0,a.dW=s,i.bindFramebuffer(i.FRAMEBUFFER,a.DW),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.clear(i.DEPTH_BUFFER_BIT),i.disable(i.BLEND),i.resize&&i.resize(r.x,r.y),this.yB.KO(0,0,r.x,r.y);for(const t of this.zr.values())t.mB(1,h);i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindTexture(i.TEXTURE_2D,null),i.bindRenderbuffer(i.RENDERBUFFER,null),i.enable(i.BLEND);const l=null===(t=this.yB.gl2)||void 0===t?void 0:t.ctx,u=()=>{if(this.uW){const t=this.uW.yW;if(t&&t.pW>s)return;this.uW.yW={pW:s,TW:h,$:r,FW:a.OW,LW:e}}};l?this.yB.FR(l,a.DW,0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,a.OW).then((()=>{this.Ii||(a.fW=!1,u())})).catch((t=>{this.Ii||(a.fW=!1,kt.console.warn("LightningChart JS mouse picking failed unexpectedly. This could mean that user interactions on charts are compromised.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact"))})):(this.yB.IR(a.DW,0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,a.OW),a.fW=!1,u())}Zr(t){const i=this.$.x,s=this.$.y,e=t||{x:this.Fr.offsetWidth,y:this.Fr.offsetHeight};0!==e.x&&0!==e.y&&(e.x===i&&e.y===s||(this.$=e,this.ut.x.X(0,e.x).K(e.x),this.ut.y.X(0,e.y).K(e.y),this.I.emit("resize",[this.$.x,this.$.y])))}N(){super.N(),this.mW&&(kt.clearTimeout(this.mW),this.mW=void 0),this.bW.width=1,this.bW.height=1,this.bW&&(this.Fr.removeChild(this.bW),this.bW=void 0,this.Fr=void 0),this.nR._t(),Array.from(this.yB.vL.values()).forEach((t=>{t.$B()})),Array.from(this.yB.xL.values()).forEach((t=>{t.unbindResources()})),this.yB.xL.clear(),this.yB.bL.AB(),this.yB.aR.N(),this.yB.dL(this.yB.lR),this.yB.dL(this.yB.uR),this.yB.dL(this.yB.cR),this.yB.sR.forEach(((t,i)=>{this.yB.gl.deleteBuffer(i)})),this.yB.sR.clear(),this.yB.AR&&(this.yB.dL(this.yB.AR.buffer),this.yB.AR=void 0),this.uW&&(this.uW.cW.forEach((t=>{this.yB.pL(t.BW),this.yB.SL(t.DW),this.yB.jB(t.DR)})),this.uW=void 0),this.yB.QL.forEach((t=>this.yB.dL(t))),this.aW.clear(),this.yB.MR(),this.yB.gl=void 0}YE(t,i){if((null==i?void 0:i.lut)===t)return i;i&&this.nR.Mt(i);const s=this.vW;this.vW+=1;const e=this.nR.vt(t);if(e){const t={Ao:s,lut:e.lut,texture:e.texture,textureHeight:e.textureHeight};return this.nR.xt(t),t}const h={x:1,y:this.yB.UB},r=h.y,n=at.d2({scaleXYConstructor:Ns}).K(h);n.x.X(0,1),n.y.X(t.min,t.max);const o=new Oy(this,this.mN,n,(()=>{}),[],-1,C);o.Ae(new W({color:t.color})),t.interpolate?o.u({columns:2,rows:t.length,start:{x:0,y:t.min},end:{x:1,y:t.max},pixelate:!1}).vu(((i,s,e)=>({x:e.x,y:t.steps[i].value}))).Su((i=>t.steps[i].color)):o.u({columns:1,rows:t.length,start:{x:0,y:t.min},end:{x:1,y:t.max},pixelate:!0}).vu(((i,s,e)=>({x:e.x,y:i<t.steps.length-1?t.steps[i].value:i===t.steps.length-1?t.steps[i].value-n.y.getPixelSize():t.steps[t.steps.length-1].value}))).Su((i=>t.steps[i].color));const a=this.yB.gR(null,this.yB.gl.RGBA,!1,!t.interpolate,h,!1);this.yB.oR.mB((()=>{o.Is(),o.mB(0)}),a,h,void 0,this.qr.S()),o.dispose().$B();const l={Ao:s,texture:a,textureHeight:r,lut:t};return this.nR.xt(l),l}XE(t){this.nR.Mt(t)}RN(){const t=this.xW;return t>4294967295&&(console.warn("LightningChart JS picking ID overflow.\nThis is an unexpected error that could compromise user interactions on the chart.\nPlease report the issue to https://lightningchart.com/js-charts/docs/contact!"),this.xW=1),this.xW+=1,t}EN(t){let i=t;const s=Math.floor(i/16777216);i-=16777216*s;const e=Math.floor(i/65536);i-=65536*e;const h=Math.floor(i/256);return i-=256*h,v(s,e,h,i)}IW(t,i,s,e){if(0===t&&0===i&&0===s&&0===e)return;const h=16777216*t+65536*i+256*s+e;for(const t of this.wW.values()){const i=t.LN(h);if(i)return{entity:i.entity,collectionMember:i.collectionMember,entityIndex:i.index,layerIndex:t.hn()}}}}var Ry="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ey={exports:{}};!function(t,i){function s(t,i){if(!t)throw new Error(i||"Assertion failed")}function e(t,i){t.super_=i;var s=function(){};s.prototype=i.prototype,t.prototype=new s,t.prototype.constructor=t}function h(t,i,s){if(h.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==i&&"be"!==i||(s=i,i=10),this.PO(t||0,i||10,s||"be"))}var r;"object"==typeof Ey?Ey.exports=h:i.BN=h,h.BN=h,h.wordSize=26;try{r=(void 0).Buffer}catch(t){}function n(t,i,e){for(var h=0,r=Math.min(t.length,e),n=0,o=i;o<r;o++){var a,l=t.charCodeAt(o)-48;h<<=4,h|=a=l>=49&&l<=54?l-49+10:l>=17&&l<=22?l-17+10:l,n|=a}return s(!(240&n),"Invalid character in "+t),h}function o(t,i,e,h){for(var r=0,n=0,o=Math.min(t.length,e),a=i;a<o;a++){var l=t.charCodeAt(a)-48;r*=h,n=l>=49?l-49+10:l>=17?l-17+10:l,s(l>=0&&n<h,"Invalid character"),r+=n}return r}function a(t,i){t.words=i.words,t.length=i.length,t.negative=i.negative,t.red=i.red}if(h.isBN=function(t){return t instanceof h||null!==t&&"object"==typeof t&&t.constructor.wordSize===h.wordSize&&Array.isArray(t.words)},h.max=function(t,i){return t.cmp(i)>0?t:i},h.min=function(t,i){return t.cmp(i)<0?t:i},h.prototype.PO=function(t,i,e){if("number"==typeof t)return this.RW(t,i,e);if("object"==typeof t)return this.EW(t,i,e);"hex"===i&&(i=16),s(i===(0|i)&&i>=2&&i<=36);var h=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&h++,16===i?this.zW(t,h):this.VW(t,i,h),"-"===t[0]&&(this.negative=1),this.NW(),"le"===e&&this.EW(this.toArray(),i,e)},h.prototype.RW=function(t,i,e){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(s(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===e&&this.EW(this.toArray(),i,e)},h.prototype.EW=function(t,i,e){if(s("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var r,n,o=0;if("be"===e)for(h=t.length-1,r=0;h>=0;h-=3)n=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[r]|=n<<o&67108863,this.words[r+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);else if("le"===e)for(h=0,r=0;h<t.length;h+=3)n=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[r]|=n<<o&67108863,this.words[r+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);return this.NW()},h.prototype.zW=function(t,i){this.length=Math.ceil((t.length-i)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var e,h,r=0;for(s=t.length-6,e=0;s>=i;s-=6)h=n(t,s,s+6),this.words[e]|=h<<r&67108863,this.words[e+1]|=h>>>26-r&4194303,(r+=24)>=26&&(r-=26,e++);s+6!==i&&(h=n(t,i,s+6),this.words[e]|=h<<r&67108863,this.words[e+1]|=h>>>26-r&4194303),this.NW()},h.prototype.VW=function(t,i,s){this.words=[0],this.length=1;for(var e=0,h=1;h<=67108863;h*=i)e++;e--,h=h/i|0;for(var r=t.length-s,n=r%e,a=Math.min(r,r-n)+s,l=0,u=s;u<a;u+=e)l=o(t,u,u+e,i),this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this.GW(l);if(0!==n){var c=1;for(l=o(t,u,t.length,i),u=0;u<n;u++)c*=i;this.imuln(c),this.words[0]+l<67108864?this.words[0]+=l:this.GW(l)}},h.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},h.prototype.WW=function(t){a(t,this)},h.prototype.clone=function(){var t=new h(null);return this.copy(t),t},h.prototype.HW=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},h.prototype.NW=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this.UW()},h.prototype.UW=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{h.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){h.prototype.inspect=l}else h.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,i,s){s.negative=i.negative^t.negative;var e=t.length+i.length|0;s.length=e,e=e-1|0;var h=0|t.words[0],r=0|i.words[0],n=h*r,o=67108863&n,a=n/67108864|0;s.words[0]=o;for(var l=1;l<e;l++){for(var u=a>>>26,c=67108863&a,d=Math.min(l,i.length-1),f=Math.max(0,l-t.length+1);f<=d;f++){var g=l-f|0;u+=(n=(h=0|t.words[g])*(r=0|i.words[f])+c)/67108864|0,c=67108863&n}s.words[l]=0|c,a=0|u}return 0!==a?s.words[l]=0|a:s.length--,s.NW()}h.prototype.toString=function(t,i){var e;if(i=0|i||1,16===(t=t||10)||"hex"===t){e="";for(var h=0,r=0,n=0;n<this.length;n++){var o=this.words[n],a=(16777215&(o<<h|r)).toString(16);e=0!=(r=o>>>24-h&16777215)||n!==this.length-1?u[6-a.length]+a+e:a+e,(h+=2)>=26&&(h-=26,n--)}for(0!==r&&(e=r.toString(16)+e);e.length%i!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}if(t===(0|t)&&t>=2&&t<=36){var l=c[t],f=d[t];e="";var g=this.clone();for(g.negative=0;!g.isZero();){var m=g.modrn(f).toString(t);e=(g=g.idivn(f)).isZero()?m+e:u[l-m.length]+m+e}for(this.isZero()&&(e="0"+e);e.length%i!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}s(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},h.prototype.toJSON=function(){return this.toString(16,2)},r&&(h.prototype.toBuffer=function(t,i){return this.toArrayLike(r,t,i)}),h.prototype.toArray=function(t,i){return this.toArrayLike(Array,t,i)},h.prototype.toArrayLike=function(t,i,e){this.NW();var h=this.byteLength(),r=e||Math.max(1,h);s(h<=r,"byte array longer than desired length"),s(r>0,"Requested array length <= 0");var n=function(t,i){return t.allocUnsafe?t.allocUnsafe(i):new t(i)}(t,r);return this["_toArrayLike"+("le"===i?"LE":"BE")](n,h),n},h.prototype.$W=function(t,i){for(var s=0,e=0,h=0,r=0;h<this.length;h++){var n=this.words[h]<<r|e;t[s++]=255&n,s<t.length&&(t[s++]=n>>8&255),s<t.length&&(t[s++]=n>>16&255),6===r?(s<t.length&&(t[s++]=n>>24&255),e=0,r=0):(e=n>>>24,r+=2)}if(s<t.length)for(t[s++]=e;s<t.length;)t[s++]=0},h.prototype.jW=function(t,i){for(var s=t.length-1,e=0,h=0,r=0;h<this.length;h++){var n=this.words[h]<<r|e;t[s--]=255&n,s>=0&&(t[s--]=n>>8&255),s>=0&&(t[s--]=n>>16&255),6===r?(s>=0&&(t[s--]=n>>24&255),e=0,r=0):(e=n>>>24,r+=2)}if(s>=0)for(t[s--]=e;s>=0;)t[s--]=0},Math.clz32?h.prototype.YW=function(t){return 32-Math.clz32(t)}:h.prototype.YW=function(t){var i=t,s=0;return i>=4096&&(s+=13,i>>>=13),i>=64&&(s+=7,i>>>=7),i>=8&&(s+=4,i>>>=4),i>=2&&(s+=2,i>>>=2),s+i},h.prototype.XW=function(t){if(0===t)return 26;var i=t,s=0;return 0==(8191&i)&&(s+=13,i>>>=13),0==(127&i)&&(s+=7,i>>>=7),0==(15&i)&&(s+=4,i>>>=4),0==(3&i)&&(s+=2,i>>>=2),0==(1&i)&&s++,s},h.prototype.bitLength=function(){var t=this.words[this.length-1],i=this.YW(t);return 26*(this.length-1)+i},h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var s=this.XW(this.words[i]);if(t+=s,26!==s)break}return t},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},h.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return 0!==this.negative},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.NW()},h.prototype.ior=function(t){return s(0==(this.negative|t.negative)),this.iuor(t)},h.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},h.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},h.prototype.iuand=function(t){var i;i=this.length>t.length?t:this;for(var s=0;s<i.length;s++)this.words[s]=this.words[s]&t.words[s];return this.length=i.length,this.NW()},h.prototype.iand=function(t){return s(0==(this.negative|t.negative)),this.iuand(t)},h.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},h.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},h.prototype.iuxor=function(t){var i,s;this.length>t.length?(i=this,s=t):(i=t,s=this);for(var e=0;e<s.length;e++)this.words[e]=i.words[e]^s.words[e];if(this!==i)for(;e<i.length;e++)this.words[e]=i.words[e];return this.length=i.length,this.NW()},h.prototype.ixor=function(t){return s(0==(this.negative|t.negative)),this.iuxor(t)},h.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},h.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},h.prototype.inotn=function(t){s("number"==typeof t&&t>=0);var i=0|Math.ceil(t/26),e=t%26;this.HW(i),e>0&&i--;for(var h=0;h<i;h++)this.words[h]=67108863&~this.words[h];return e>0&&(this.words[h]=~this.words[h]&67108863>>26-e),this.NW()},h.prototype.notn=function(t){return this.clone().inotn(t)},h.prototype.setn=function(t,i){s("number"==typeof t&&t>=0);var e=t/26|0,h=t%26;return this.HW(e+1),this.words[e]=i?this.words[e]|1<<h:this.words[e]&~(1<<h),this.NW()},h.prototype.iadd=function(t){var i,s,e;if(0!==this.negative&&0===t.negative)return this.negative=0,i=this.isub(t),this.negative^=1,this.UW();if(0===this.negative&&0!==t.negative)return t.negative=0,i=this.isub(t),t.negative=1,i.UW();this.length>t.length?(s=this,e=t):(s=t,e=this);for(var h=0,r=0;r<e.length;r++)i=(0|s.words[r])+(0|e.words[r])+h,this.words[r]=67108863&i,h=i>>>26;for(;0!==h&&r<s.length;r++)i=(0|s.words[r])+h,this.words[r]=67108863&i,h=i>>>26;if(this.length=s.length,0!==h)this.words[this.length]=h,this.length++;else if(s!==this)for(;r<s.length;r++)this.words[r]=s.words[r];return this},h.prototype.add=function(t){var i;return 0!==t.negative&&0===this.negative?(t.negative=0,i=this.sub(t),t.negative^=1,i):0===t.negative&&0!==this.negative?(this.negative=0,i=t.sub(this),this.negative=1,i):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},h.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var i=this.iadd(t);return t.negative=1,i.UW()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this.UW();var s,e,h=this.cmp(t);if(0===h)return this.negative=0,this.length=1,this.words[0]=0,this;h>0?(s=this,e=t):(s=t,e=this);for(var r=0,n=0;n<e.length;n++)r=(i=(0|s.words[n])-(0|e.words[n])+r)>>26,this.words[n]=67108863&i;for(;0!==r&&n<s.length;n++)r=(i=(0|s.words[n])+r)>>26,this.words[n]=67108863&i;if(0===r&&n<s.length&&s!==this)for(;n<s.length;n++)this.words[n]=s.words[n];return this.length=Math.max(this.length,n),s!==this&&(this.negative=1),this.NW()},h.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,i,s){var e,h,r,n=t.words,o=i.words,a=s.words,l=0,u=0|n[0],c=8191&u,d=u>>>13,f=0|n[1],g=8191&f,m=f>>>13,y=0|n[2],p=8191&y,S=y>>>13,b=0|n[3],v=8191&b,x=b>>>13,M=0|n[4],_=8191&M,A=M>>>13,w=0|n[5],k=8191&w,C=w>>>13,T=0|n[6],F=8191&T,I=T>>>13,P=0|n[7],D=8191&P,B=P>>>13,O=0|n[8],L=8191&O,R=O>>>13,E=0|n[9],z=8191&E,V=E>>>13,N=0|o[0],G=8191&N,W=N>>>13,H=0|o[1],U=8191&H,$=H>>>13,j=0|o[2],Y=8191&j,X=j>>>13,Z=0|o[3],K=8191&Z,q=Z>>>13,J=0|o[4],Q=8191&J,tt=J>>>13,it=0|o[5],st=8191&it,et=it>>>13,ht=0|o[6],rt=8191&ht,nt=ht>>>13,ot=0|o[7],at=8191&ot,lt=ot>>>13,ut=0|o[8],ct=8191&ut,dt=ut>>>13,ft=0|o[9],gt=8191&ft,mt=ft>>>13;s.negative=t.negative^i.negative,s.length=19;var yt=(l+(e=Math.imul(c,G))|0)+((8191&(h=(h=Math.imul(c,W))+Math.imul(d,G)|0))<<13)|0;l=((r=Math.imul(d,W))+(h>>>13)|0)+(yt>>>26)|0,yt&=67108863,e=Math.imul(g,G),h=(h=Math.imul(g,W))+Math.imul(m,G)|0,r=Math.imul(m,W);var pt=(l+(e=e+Math.imul(c,U)|0)|0)+((8191&(h=(h=h+Math.imul(c,$)|0)+Math.imul(d,U)|0))<<13)|0;l=((r=r+Math.imul(d,$)|0)+(h>>>13)|0)+(pt>>>26)|0,pt&=67108863,e=Math.imul(p,G),h=(h=Math.imul(p,W))+Math.imul(S,G)|0,r=Math.imul(S,W),e=e+Math.imul(g,U)|0,h=(h=h+Math.imul(g,$)|0)+Math.imul(m,U)|0,r=r+Math.imul(m,$)|0;var St=(l+(e=e+Math.imul(c,Y)|0)|0)+((8191&(h=(h=h+Math.imul(c,X)|0)+Math.imul(d,Y)|0))<<13)|0;l=((r=r+Math.imul(d,X)|0)+(h>>>13)|0)+(St>>>26)|0,St&=67108863,e=Math.imul(v,G),h=(h=Math.imul(v,W))+Math.imul(x,G)|0,r=Math.imul(x,W),e=e+Math.imul(p,U)|0,h=(h=h+Math.imul(p,$)|0)+Math.imul(S,U)|0,r=r+Math.imul(S,$)|0,e=e+Math.imul(g,Y)|0,h=(h=h+Math.imul(g,X)|0)+Math.imul(m,Y)|0,r=r+Math.imul(m,X)|0;var bt=(l+(e=e+Math.imul(c,K)|0)|0)+((8191&(h=(h=h+Math.imul(c,q)|0)+Math.imul(d,K)|0))<<13)|0;l=((r=r+Math.imul(d,q)|0)+(h>>>13)|0)+(bt>>>26)|0,bt&=67108863,e=Math.imul(_,G),h=(h=Math.imul(_,W))+Math.imul(A,G)|0,r=Math.imul(A,W),e=e+Math.imul(v,U)|0,h=(h=h+Math.imul(v,$)|0)+Math.imul(x,U)|0,r=r+Math.imul(x,$)|0,e=e+Math.imul(p,Y)|0,h=(h=h+Math.imul(p,X)|0)+Math.imul(S,Y)|0,r=r+Math.imul(S,X)|0,e=e+Math.imul(g,K)|0,h=(h=h+Math.imul(g,q)|0)+Math.imul(m,K)|0,r=r+Math.imul(m,q)|0;var vt=(l+(e=e+Math.imul(c,Q)|0)|0)+((8191&(h=(h=h+Math.imul(c,tt)|0)+Math.imul(d,Q)|0))<<13)|0;l=((r=r+Math.imul(d,tt)|0)+(h>>>13)|0)+(vt>>>26)|0,vt&=67108863,e=Math.imul(k,G),h=(h=Math.imul(k,W))+Math.imul(C,G)|0,r=Math.imul(C,W),e=e+Math.imul(_,U)|0,h=(h=h+Math.imul(_,$)|0)+Math.imul(A,U)|0,r=r+Math.imul(A,$)|0,e=e+Math.imul(v,Y)|0,h=(h=h+Math.imul(v,X)|0)+Math.imul(x,Y)|0,r=r+Math.imul(x,X)|0,e=e+Math.imul(p,K)|0,h=(h=h+Math.imul(p,q)|0)+Math.imul(S,K)|0,r=r+Math.imul(S,q)|0,e=e+Math.imul(g,Q)|0,h=(h=h+Math.imul(g,tt)|0)+Math.imul(m,Q)|0,r=r+Math.imul(m,tt)|0;var xt=(l+(e=e+Math.imul(c,st)|0)|0)+((8191&(h=(h=h+Math.imul(c,et)|0)+Math.imul(d,st)|0))<<13)|0;l=((r=r+Math.imul(d,et)|0)+(h>>>13)|0)+(xt>>>26)|0,xt&=67108863,e=Math.imul(F,G),h=(h=Math.imul(F,W))+Math.imul(I,G)|0,r=Math.imul(I,W),e=e+Math.imul(k,U)|0,h=(h=h+Math.imul(k,$)|0)+Math.imul(C,U)|0,r=r+Math.imul(C,$)|0,e=e+Math.imul(_,Y)|0,h=(h=h+Math.imul(_,X)|0)+Math.imul(A,Y)|0,r=r+Math.imul(A,X)|0,e=e+Math.imul(v,K)|0,h=(h=h+Math.imul(v,q)|0)+Math.imul(x,K)|0,r=r+Math.imul(x,q)|0,e=e+Math.imul(p,Q)|0,h=(h=h+Math.imul(p,tt)|0)+Math.imul(S,Q)|0,r=r+Math.imul(S,tt)|0,e=e+Math.imul(g,st)|0,h=(h=h+Math.imul(g,et)|0)+Math.imul(m,st)|0,r=r+Math.imul(m,et)|0;var Mt=(l+(e=e+Math.imul(c,rt)|0)|0)+((8191&(h=(h=h+Math.imul(c,nt)|0)+Math.imul(d,rt)|0))<<13)|0;l=((r=r+Math.imul(d,nt)|0)+(h>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,e=Math.imul(D,G),h=(h=Math.imul(D,W))+Math.imul(B,G)|0,r=Math.imul(B,W),e=e+Math.imul(F,U)|0,h=(h=h+Math.imul(F,$)|0)+Math.imul(I,U)|0,r=r+Math.imul(I,$)|0,e=e+Math.imul(k,Y)|0,h=(h=h+Math.imul(k,X)|0)+Math.imul(C,Y)|0,r=r+Math.imul(C,X)|0,e=e+Math.imul(_,K)|0,h=(h=h+Math.imul(_,q)|0)+Math.imul(A,K)|0,r=r+Math.imul(A,q)|0,e=e+Math.imul(v,Q)|0,h=(h=h+Math.imul(v,tt)|0)+Math.imul(x,Q)|0,r=r+Math.imul(x,tt)|0,e=e+Math.imul(p,st)|0,h=(h=h+Math.imul(p,et)|0)+Math.imul(S,st)|0,r=r+Math.imul(S,et)|0,e=e+Math.imul(g,rt)|0,h=(h=h+Math.imul(g,nt)|0)+Math.imul(m,rt)|0,r=r+Math.imul(m,nt)|0;var _t=(l+(e=e+Math.imul(c,at)|0)|0)+((8191&(h=(h=h+Math.imul(c,lt)|0)+Math.imul(d,at)|0))<<13)|0;l=((r=r+Math.imul(d,lt)|0)+(h>>>13)|0)+(_t>>>26)|0,_t&=67108863,e=Math.imul(L,G),h=(h=Math.imul(L,W))+Math.imul(R,G)|0,r=Math.imul(R,W),e=e+Math.imul(D,U)|0,h=(h=h+Math.imul(D,$)|0)+Math.imul(B,U)|0,r=r+Math.imul(B,$)|0,e=e+Math.imul(F,Y)|0,h=(h=h+Math.imul(F,X)|0)+Math.imul(I,Y)|0,r=r+Math.imul(I,X)|0,e=e+Math.imul(k,K)|0,h=(h=h+Math.imul(k,q)|0)+Math.imul(C,K)|0,r=r+Math.imul(C,q)|0,e=e+Math.imul(_,Q)|0,h=(h=h+Math.imul(_,tt)|0)+Math.imul(A,Q)|0,r=r+Math.imul(A,tt)|0,e=e+Math.imul(v,st)|0,h=(h=h+Math.imul(v,et)|0)+Math.imul(x,st)|0,r=r+Math.imul(x,et)|0,e=e+Math.imul(p,rt)|0,h=(h=h+Math.imul(p,nt)|0)+Math.imul(S,rt)|0,r=r+Math.imul(S,nt)|0,e=e+Math.imul(g,at)|0,h=(h=h+Math.imul(g,lt)|0)+Math.imul(m,at)|0,r=r+Math.imul(m,lt)|0;var At=(l+(e=e+Math.imul(c,ct)|0)|0)+((8191&(h=(h=h+Math.imul(c,dt)|0)+Math.imul(d,ct)|0))<<13)|0;l=((r=r+Math.imul(d,dt)|0)+(h>>>13)|0)+(At>>>26)|0,At&=67108863,e=Math.imul(z,G),h=(h=Math.imul(z,W))+Math.imul(V,G)|0,r=Math.imul(V,W),e=e+Math.imul(L,U)|0,h=(h=h+Math.imul(L,$)|0)+Math.imul(R,U)|0,r=r+Math.imul(R,$)|0,e=e+Math.imul(D,Y)|0,h=(h=h+Math.imul(D,X)|0)+Math.imul(B,Y)|0,r=r+Math.imul(B,X)|0,e=e+Math.imul(F,K)|0,h=(h=h+Math.imul(F,q)|0)+Math.imul(I,K)|0,r=r+Math.imul(I,q)|0,e=e+Math.imul(k,Q)|0,h=(h=h+Math.imul(k,tt)|0)+Math.imul(C,Q)|0,r=r+Math.imul(C,tt)|0,e=e+Math.imul(_,st)|0,h=(h=h+Math.imul(_,et)|0)+Math.imul(A,st)|0,r=r+Math.imul(A,et)|0,e=e+Math.imul(v,rt)|0,h=(h=h+Math.imul(v,nt)|0)+Math.imul(x,rt)|0,r=r+Math.imul(x,nt)|0,e=e+Math.imul(p,at)|0,h=(h=h+Math.imul(p,lt)|0)+Math.imul(S,at)|0,r=r+Math.imul(S,lt)|0,e=e+Math.imul(g,ct)|0,h=(h=h+Math.imul(g,dt)|0)+Math.imul(m,ct)|0,r=r+Math.imul(m,dt)|0;var wt=(l+(e=e+Math.imul(c,gt)|0)|0)+((8191&(h=(h=h+Math.imul(c,mt)|0)+Math.imul(d,gt)|0))<<13)|0;l=((r=r+Math.imul(d,mt)|0)+(h>>>13)|0)+(wt>>>26)|0,wt&=67108863,e=Math.imul(z,U),h=(h=Math.imul(z,$))+Math.imul(V,U)|0,r=Math.imul(V,$),e=e+Math.imul(L,Y)|0,h=(h=h+Math.imul(L,X)|0)+Math.imul(R,Y)|0,r=r+Math.imul(R,X)|0,e=e+Math.imul(D,K)|0,h=(h=h+Math.imul(D,q)|0)+Math.imul(B,K)|0,r=r+Math.imul(B,q)|0,e=e+Math.imul(F,Q)|0,h=(h=h+Math.imul(F,tt)|0)+Math.imul(I,Q)|0,r=r+Math.imul(I,tt)|0,e=e+Math.imul(k,st)|0,h=(h=h+Math.imul(k,et)|0)+Math.imul(C,st)|0,r=r+Math.imul(C,et)|0,e=e+Math.imul(_,rt)|0,h=(h=h+Math.imul(_,nt)|0)+Math.imul(A,rt)|0,r=r+Math.imul(A,nt)|0,e=e+Math.imul(v,at)|0,h=(h=h+Math.imul(v,lt)|0)+Math.imul(x,at)|0,r=r+Math.imul(x,lt)|0,e=e+Math.imul(p,ct)|0,h=(h=h+Math.imul(p,dt)|0)+Math.imul(S,ct)|0,r=r+Math.imul(S,dt)|0;var kt=(l+(e=e+Math.imul(g,gt)|0)|0)+((8191&(h=(h=h+Math.imul(g,mt)|0)+Math.imul(m,gt)|0))<<13)|0;l=((r=r+Math.imul(m,mt)|0)+(h>>>13)|0)+(kt>>>26)|0,kt&=67108863,e=Math.imul(z,Y),h=(h=Math.imul(z,X))+Math.imul(V,Y)|0,r=Math.imul(V,X),e=e+Math.imul(L,K)|0,h=(h=h+Math.imul(L,q)|0)+Math.imul(R,K)|0,r=r+Math.imul(R,q)|0,e=e+Math.imul(D,Q)|0,h=(h=h+Math.imul(D,tt)|0)+Math.imul(B,Q)|0,r=r+Math.imul(B,tt)|0,e=e+Math.imul(F,st)|0,h=(h=h+Math.imul(F,et)|0)+Math.imul(I,st)|0,r=r+Math.imul(I,et)|0,e=e+Math.imul(k,rt)|0,h=(h=h+Math.imul(k,nt)|0)+Math.imul(C,rt)|0,r=r+Math.imul(C,nt)|0,e=e+Math.imul(_,at)|0,h=(h=h+Math.imul(_,lt)|0)+Math.imul(A,at)|0,r=r+Math.imul(A,lt)|0,e=e+Math.imul(v,ct)|0,h=(h=h+Math.imul(v,dt)|0)+Math.imul(x,ct)|0,r=r+Math.imul(x,dt)|0;var Ct=(l+(e=e+Math.imul(p,gt)|0)|0)+((8191&(h=(h=h+Math.imul(p,mt)|0)+Math.imul(S,gt)|0))<<13)|0;l=((r=r+Math.imul(S,mt)|0)+(h>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,e=Math.imul(z,K),h=(h=Math.imul(z,q))+Math.imul(V,K)|0,r=Math.imul(V,q),e=e+Math.imul(L,Q)|0,h=(h=h+Math.imul(L,tt)|0)+Math.imul(R,Q)|0,r=r+Math.imul(R,tt)|0,e=e+Math.imul(D,st)|0,h=(h=h+Math.imul(D,et)|0)+Math.imul(B,st)|0,r=r+Math.imul(B,et)|0,e=e+Math.imul(F,rt)|0,h=(h=h+Math.imul(F,nt)|0)+Math.imul(I,rt)|0,r=r+Math.imul(I,nt)|0,e=e+Math.imul(k,at)|0,h=(h=h+Math.imul(k,lt)|0)+Math.imul(C,at)|0,r=r+Math.imul(C,lt)|0,e=e+Math.imul(_,ct)|0,h=(h=h+Math.imul(_,dt)|0)+Math.imul(A,ct)|0,r=r+Math.imul(A,dt)|0;var Tt=(l+(e=e+Math.imul(v,gt)|0)|0)+((8191&(h=(h=h+Math.imul(v,mt)|0)+Math.imul(x,gt)|0))<<13)|0;l=((r=r+Math.imul(x,mt)|0)+(h>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,e=Math.imul(z,Q),h=(h=Math.imul(z,tt))+Math.imul(V,Q)|0,r=Math.imul(V,tt),e=e+Math.imul(L,st)|0,h=(h=h+Math.imul(L,et)|0)+Math.imul(R,st)|0,r=r+Math.imul(R,et)|0,e=e+Math.imul(D,rt)|0,h=(h=h+Math.imul(D,nt)|0)+Math.imul(B,rt)|0,r=r+Math.imul(B,nt)|0,e=e+Math.imul(F,at)|0,h=(h=h+Math.imul(F,lt)|0)+Math.imul(I,at)|0,r=r+Math.imul(I,lt)|0,e=e+Math.imul(k,ct)|0,h=(h=h+Math.imul(k,dt)|0)+Math.imul(C,ct)|0,r=r+Math.imul(C,dt)|0;var Ft=(l+(e=e+Math.imul(_,gt)|0)|0)+((8191&(h=(h=h+Math.imul(_,mt)|0)+Math.imul(A,gt)|0))<<13)|0;l=((r=r+Math.imul(A,mt)|0)+(h>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,e=Math.imul(z,st),h=(h=Math.imul(z,et))+Math.imul(V,st)|0,r=Math.imul(V,et),e=e+Math.imul(L,rt)|0,h=(h=h+Math.imul(L,nt)|0)+Math.imul(R,rt)|0,r=r+Math.imul(R,nt)|0,e=e+Math.imul(D,at)|0,h=(h=h+Math.imul(D,lt)|0)+Math.imul(B,at)|0,r=r+Math.imul(B,lt)|0,e=e+Math.imul(F,ct)|0,h=(h=h+Math.imul(F,dt)|0)+Math.imul(I,ct)|0,r=r+Math.imul(I,dt)|0;var It=(l+(e=e+Math.imul(k,gt)|0)|0)+((8191&(h=(h=h+Math.imul(k,mt)|0)+Math.imul(C,gt)|0))<<13)|0;l=((r=r+Math.imul(C,mt)|0)+(h>>>13)|0)+(It>>>26)|0,It&=67108863,e=Math.imul(z,rt),h=(h=Math.imul(z,nt))+Math.imul(V,rt)|0,r=Math.imul(V,nt),e=e+Math.imul(L,at)|0,h=(h=h+Math.imul(L,lt)|0)+Math.imul(R,at)|0,r=r+Math.imul(R,lt)|0,e=e+Math.imul(D,ct)|0,h=(h=h+Math.imul(D,dt)|0)+Math.imul(B,ct)|0,r=r+Math.imul(B,dt)|0;var Pt=(l+(e=e+Math.imul(F,gt)|0)|0)+((8191&(h=(h=h+Math.imul(F,mt)|0)+Math.imul(I,gt)|0))<<13)|0;l=((r=r+Math.imul(I,mt)|0)+(h>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,e=Math.imul(z,at),h=(h=Math.imul(z,lt))+Math.imul(V,at)|0,r=Math.imul(V,lt),e=e+Math.imul(L,ct)|0,h=(h=h+Math.imul(L,dt)|0)+Math.imul(R,ct)|0,r=r+Math.imul(R,dt)|0;var Dt=(l+(e=e+Math.imul(D,gt)|0)|0)+((8191&(h=(h=h+Math.imul(D,mt)|0)+Math.imul(B,gt)|0))<<13)|0;l=((r=r+Math.imul(B,mt)|0)+(h>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,e=Math.imul(z,ct),h=(h=Math.imul(z,dt))+Math.imul(V,ct)|0,r=Math.imul(V,dt);var Bt=(l+(e=e+Math.imul(L,gt)|0)|0)+((8191&(h=(h=h+Math.imul(L,mt)|0)+Math.imul(R,gt)|0))<<13)|0;l=((r=r+Math.imul(R,mt)|0)+(h>>>13)|0)+(Bt>>>26)|0,Bt&=67108863;var Ot=(l+(e=Math.imul(z,gt))|0)+((8191&(h=(h=Math.imul(z,mt))+Math.imul(V,gt)|0))<<13)|0;return l=((r=Math.imul(V,mt))+(h>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,a[0]=yt,a[1]=pt,a[2]=St,a[3]=bt,a[4]=vt,a[5]=xt,a[6]=Mt,a[7]=_t,a[8]=At,a[9]=wt,a[10]=kt,a[11]=Ct,a[12]=Tt,a[13]=Ft,a[14]=It,a[15]=Pt,a[16]=Dt,a[17]=Bt,a[18]=Ot,0!==l&&(a[19]=l,s.length++),s};function m(t,i,s){s.negative=i.negative^t.negative,s.length=t.length+i.length;for(var e=0,h=0,r=0;r<s.length-1;r++){var n=h;h=0;for(var o=67108863&e,a=Math.min(r,i.length-1),l=Math.max(0,r-t.length+1);l<=a;l++){var u=r-l,c=(0|t.words[u])*(0|i.words[l]),d=67108863&c;o=67108863&(d=d+o|0),h+=(n=(n=n+(c/67108864|0)|0)+(d>>>26)|0)>>>26,n&=67108863}s.words[r]=o,e=n,n=h}return 0!==e?s.words[r]=e:s.length--,s.NW()}function y(t,i,s){return m(t,i,s)}Math.imul||(g=f),h.prototype.mulTo=function(t,i){var s=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,i):s<63?f(this,t,i):s<1024?m(this,t,i):y(this,t,i)},h.prototype.mul=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),this.mulTo(t,i)},h.prototype.mulf=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),y(this,t,i)},h.prototype.imul=function(t){return this.clone().mulTo(t,this)},h.prototype.imuln=function(t){var i=t<0;i&&(t=-t),s("number"==typeof t),s(t<67108864);for(var e=0,h=0;h<this.length;h++){var r=(0|this.words[h])*t,n=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=n>>>26,this.words[h]=67108863&n}return 0!==e&&(this.words[h]=e,this.length++),i?this.ineg():this},h.prototype.muln=function(t){return this.clone().imuln(t)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(t){var i=function(t){for(var i=new Array(t.bitLength()),s=0;s<i.length;s++){var e=s/26|0,h=s%26;i[s]=t.words[e]>>>h&1}return i}(t);if(0===i.length)return new h(1);for(var s=this,e=0;e<i.length&&0===i[e];e++,s=s.sqr());if(++e<i.length)for(var r=s.sqr();e<i.length;e++,r=r.sqr())0!==i[e]&&(s=s.mul(r));return s},h.prototype.iushln=function(t){s("number"==typeof t&&t>=0);var i,e=t%26,h=(t-e)/26,r=67108863>>>26-e<<26-e;if(0!==e){var n=0;for(i=0;i<this.length;i++){var o=this.words[i]&r,a=(0|this.words[i])-o<<e;this.words[i]=a|n,n=o>>>26-e}n&&(this.words[i]=n,this.length++)}if(0!==h){for(i=this.length-1;i>=0;i--)this.words[i+h]=this.words[i];for(i=0;i<h;i++)this.words[i]=0;this.length+=h}return this.NW()},h.prototype.ishln=function(t){return s(0===this.negative),this.iushln(t)},h.prototype.iushrn=function(t,i,e){var h;s("number"==typeof t&&t>=0),h=i?(i-i%26)/26:0;var r=t%26,n=Math.min((t-r)/26,this.length),o=67108863^67108863>>>r<<r,a=e;if(h-=n,h=Math.max(0,h),a){for(var l=0;l<n;l++)a.words[l]=this.words[l];a.length=n}if(0===n);else if(this.length>n)for(this.length-=n,l=0;l<this.length;l++)this.words[l]=this.words[l+n];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=h);l--){var c=0|this.words[l];this.words[l]=u<<26-r|c>>>r,u=c&o}return a&&0!==u&&(a.words[a.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.NW()},h.prototype.ishrn=function(t,i,e){return s(0===this.negative),this.iushrn(t,i,e)},h.prototype.shln=function(t){return this.clone().ishln(t)},h.prototype.ushln=function(t){return this.clone().iushln(t)},h.prototype.shrn=function(t){return this.clone().ishrn(t)},h.prototype.ushrn=function(t){return this.clone().iushrn(t)},h.prototype.testn=function(t){s("number"==typeof t&&t>=0);var i=t%26,e=(t-i)/26,h=1<<i;return!(this.length<=e||!(this.words[e]&h))},h.prototype.imaskn=function(t){s("number"==typeof t&&t>=0);var i=t%26,e=(t-i)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=e)return this;if(0!==i&&e++,this.length=Math.min(e,this.length),0!==i){var h=67108863^67108863>>>i<<i;this.words[this.length-1]&=h}return this.NW()},h.prototype.maskn=function(t){return this.clone().imaskn(t)},h.prototype.iaddn=function(t){return s("number"==typeof t),s(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this.GW(t)},h.prototype.GW=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},h.prototype.isubn=function(t){if(s("number"==typeof t),s(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.NW()},h.prototype.addn=function(t){return this.clone().iaddn(t)},h.prototype.subn=function(t){return this.clone().isubn(t)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype.ZW=function(t,i,e){var h,r,n=t.length+e;this.HW(n);var o=0;for(h=0;h<t.length;h++){r=(0|this.words[h+e])+o;var a=(0|t.words[h])*i;o=((r-=67108863&a)>>26)-(a/67108864|0),this.words[h+e]=67108863&r}for(;h<this.length-e;h++)o=(r=(0|this.words[h+e])+o)>>26,this.words[h+e]=67108863&r;if(0===o)return this.NW();for(s(-1===o),o=0,h=0;h<this.length;h++)o=(r=-(0|this.words[h])+o)>>26,this.words[h]=67108863&r;return this.negative=1,this.NW()},h.prototype.KW=function(t,i){var s=(this.length,t.length),e=this.clone(),r=t,n=0|r.words[r.length-1];0!=(s=26-this.YW(n))&&(r=r.ushln(s),e.iushln(s),n=0|r.words[r.length-1]);var o,a=e.length-r.length;if("mod"!==i){(o=new h(null)).length=a+1,o.words=new Array(o.length);for(var l=0;l<o.length;l++)o.words[l]=0}var u=e.clone().ZW(r,1,a);0===u.negative&&(e=u,o&&(o.words[a]=1));for(var c=a-1;c>=0;c--){var d=67108864*(0|e.words[r.length+c])+(0|e.words[r.length+c-1]);for(d=Math.min(d/n|0,67108863),e.ZW(r,d,c);0!==e.negative;)d--,e.negative=0,e.ZW(r,1,c),e.isZero()||(e.negative^=1);o&&(o.words[c]=d)}return o&&o.NW(),e.NW(),"div"!==i&&0!==s&&e.iushrn(s),{div:o||null,mod:e}},h.prototype.divmod=function(t,i,e){return s(!t.isZero()),this.isZero()?{div:new h(0),mod:new h(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,i),"mod"!==i&&(r=o.div.neg()),"div"!==i&&(n=o.mod.neg(),e&&0!==n.negative&&n.iadd(t)),{div:r,mod:n}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),i),"mod"!==i&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),i),"div"!==i&&(n=o.mod.neg(),e&&0!==n.negative&&n.isub(t)),{div:o.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new h(0),mod:this}:1===t.length?"div"===i?{div:this.divn(t.words[0]),mod:null}:"mod"===i?{div:null,mod:new h(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new h(this.modrn(t.words[0]))}:this.KW(t,i);var r,n,o},h.prototype.div=function(t){return this.divmod(t,"div",!1).div},h.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},h.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},h.prototype.divRound=function(t){var i=this.divmod(t);if(i.mod.isZero())return i.div;var s=0!==i.div.negative?i.mod.isub(t):i.mod,e=t.ushrn(1),h=t.andln(1),r=s.cmp(e);return r<0||1===h&&0===r?i.div:0!==i.div.negative?i.div.isubn(1):i.div.iaddn(1)},h.prototype.modrn=function(t){var i=t<0;i&&(t=-t),s(t<=67108863);for(var e=(1<<26)%t,h=0,r=this.length-1;r>=0;r--)h=(e*h+(0|this.words[r]))%t;return i?-h:h},h.prototype.modn=function(t){return this.modrn(t)},h.prototype.idivn=function(t){var i=t<0;i&&(t=-t),s(t<=67108863);for(var e=0,h=this.length-1;h>=0;h--){var r=(0|this.words[h])+67108864*e;this.words[h]=r/t|0,e=r%t}return this.NW(),i?this.ineg():this},h.prototype.divn=function(t){return this.clone().idivn(t)},h.prototype.egcd=function(t){s(0===t.negative),s(!t.isZero());var i=this,e=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var r=new h(1),n=new h(0),o=new h(0),a=new h(1),l=0;i.isEven()&&e.isEven();)i.iushrn(1),e.iushrn(1),++l;for(var u=e.clone(),c=i.clone();!i.isZero();){for(var d=0,f=1;0==(i.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(u),n.isub(c)),r.iushrn(1),n.iushrn(1);for(var g=0,m=1;0==(e.words[0]&m)&&g<26;++g,m<<=1);if(g>0)for(e.iushrn(g);g-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(c)),o.iushrn(1),a.iushrn(1);i.cmp(e)>=0?(i.isub(e),r.isub(o),n.isub(a)):(e.isub(i),o.isub(r),a.isub(n))}return{a:o,b:a,gcd:e.iushln(l)}},h.prototype.qW=function(t){s(0===t.negative),s(!t.isZero());var i=this,e=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var r,n=new h(1),o=new h(0),a=e.clone();i.cmpn(1)>0&&e.cmpn(1)>0;){for(var l=0,u=1;0==(i.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(i.iushrn(l);l-- >0;)n.isOdd()&&n.iadd(a),n.iushrn(1);for(var c=0,d=1;0==(e.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(e.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);i.cmp(e)>=0?(i.isub(e),n.isub(o)):(e.isub(i),o.isub(n))}return(r=0===i.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(t),r},h.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var i=this.clone(),s=t.clone();i.negative=0,s.negative=0;for(var e=0;i.isEven()&&s.isEven();e++)i.iushrn(1),s.iushrn(1);for(;;){for(;i.isEven();)i.iushrn(1);for(;s.isEven();)s.iushrn(1);var h=i.cmp(s);if(h<0){var r=i;i=s,s=r}else if(0===h||0===s.cmpn(1))break;i.isub(s)}return s.iushln(e)},h.prototype.invm=function(t){return this.egcd(t).a.umod(t)},h.prototype.isEven=function(){return 0==(1&this.words[0])},h.prototype.isOdd=function(){return 1==(1&this.words[0])},h.prototype.andln=function(t){return this.words[0]&t},h.prototype.bincn=function(t){s("number"==typeof t);var i=t%26,e=(t-i)/26,h=1<<i;if(this.length<=e)return this.HW(e+1),this.words[e]|=h,this;for(var r=h,n=e;0!==r&&n<this.length;n++){var o=0|this.words[n];r=(o+=r)>>>26,o&=67108863,this.words[n]=o}return 0!==r&&(this.words[n]=r,this.length++),this},h.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},h.prototype.cmpn=function(t){var i,e=t<0;if(0!==this.negative&&!e)return-1;if(0===this.negative&&e)return 1;if(this.NW(),this.length>1)i=1;else{e&&(t=-t),s(t<=67108863,"Number is too big");var h=0|this.words[0];i=h===t?0:h<t?-1:1}return 0!==this.negative?0|-i:i},h.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var i=this.ucmp(t);return 0!==this.negative?0|-i:i},h.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var i=0,s=this.length-1;s>=0;s--){var e=0|this.words[s],h=0|t.words[s];if(e!==h){e<h?i=-1:e>h&&(i=1);break}}return i},h.prototype.gtn=function(t){return 1===this.cmpn(t)},h.prototype.gt=function(t){return 1===this.cmp(t)},h.prototype.gten=function(t){return this.cmpn(t)>=0},h.prototype.gte=function(t){return this.cmp(t)>=0},h.prototype.ltn=function(t){return-1===this.cmpn(t)},h.prototype.lt=function(t){return-1===this.cmp(t)},h.prototype.lten=function(t){return this.cmpn(t)<=0},h.prototype.lte=function(t){return this.cmp(t)<=0},h.prototype.eqn=function(t){return 0===this.cmpn(t)},h.prototype.eq=function(t){return 0===this.cmp(t)},h.red=function(t){return new _(t)},h.prototype.toRed=function(t){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),t.convertTo(this).JW(t)},h.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype.JW=function(t){return this.red=t,this},h.prototype.forceRed=function(t){return s(!this.red,"Already a number in reduction context"),this.JW(t)},h.prototype.redAdd=function(t){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},h.prototype.redIAdd=function(t){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},h.prototype.redSub=function(t){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},h.prototype.redISub=function(t){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},h.prototype.redShl=function(t){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},h.prototype.redMul=function(t){return s(this.red,"redMul works only with red numbers"),this.red.QW(this,t),this.red.mul(this,t)},h.prototype.redIMul=function(t){return s(this.red,"redMul works only with red numbers"),this.red.QW(this,t),this.red.imul(this,t)},h.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red.tH(this),this.red.sqr(this)},h.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red.tH(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red.tH(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red.tH(this),this.red.invm(this)},h.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red.tH(this),this.red.neg(this)},h.prototype.redPow=function(t){return s(this.red&&!t.red,"redPow(normalNum)"),this.red.tH(this),this.red.pow(this,t)};var p={k256:null,p224:null,p192:null,p25519:null};function S(t,i){this.name=t,this.p=new h(i,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this.iH()}function b(){S.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){S.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){S.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){S.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _(t){if("string"==typeof t){var i=h.sH(t);this.m=i.p,this.prime=i}else s(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function A(t){_.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.qW(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S.prototype.iH=function(){var t=new h(null);return t.words=new Array(Math.ceil(this.n/13)),t},S.prototype.ireduce=function(t){var i,s=t;do{this.split(s,this.tmp),i=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(i>this.n);var e=i<this.n?-1:s.ucmp(this.p);return 0===e?(s.words[0]=0,s.length=1):e>0?s.isub(this.p):void 0!==s.strip?s.strip():s.NW(),s},S.prototype.split=function(t,i){t.iushrn(this.n,0,i)},S.prototype.imulK=function(t){return t.imul(this.k)},e(b,S),b.prototype.split=function(t,i){for(var s=4194303,e=Math.min(t.length,9),h=0;h<e;h++)i.words[h]=t.words[h];if(i.length=e,t.length<=9)return t.words[0]=0,void(t.length=1);var r=t.words[9];for(i.words[i.length++]=r&s,h=10;h<t.length;h++){var n=0|t.words[h];t.words[h-10]=(n&s)<<4|r>>>22,r=n}r>>>=22,t.words[h-10]=r,0===r&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var i=0,s=0;s<t.length;s++){var e=0|t.words[s];i+=977*e,t.words[s]=67108863&i,i=64*e+(i/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},e(v,S),e(x,S),e(M,S),M.prototype.imulK=function(t){for(var i=0,s=0;s<t.length;s++){var e=19*(0|t.words[s])+i,h=67108863&e;e>>>=26,t.words[s]=h,i=e}return 0!==i&&(t.words[t.length++]=i),t},h.sH=function(t){if(p[t])return p[t];var i;if("k256"===t)i=new b;else if("p224"===t)i=new v;else if("p192"===t)i=new x;else{if("p25519"!==t)throw new Error("Unknown prime "+t);i=new M}return p[t]=i,i},_.prototype.tH=function(t){s(0===t.negative,"red works only with positives"),s(t.red,"red works only with red numbers")},_.prototype.QW=function(t,i){s(0==(t.negative|i.negative),"red works only with positives"),s(t.red&&t.red===i.red,"red works only with red numbers")},_.prototype.imod=function(t){return this.prime?this.prime.ireduce(t).JW(this):(a(t,t.umod(this.m).JW(this)),t)},_.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t).JW(this)},_.prototype.add=function(t,i){this.QW(t,i);var s=t.add(i);return s.cmp(this.m)>=0&&s.isub(this.m),s.JW(this)},_.prototype.iadd=function(t,i){this.QW(t,i);var s=t.iadd(i);return s.cmp(this.m)>=0&&s.isub(this.m),s},_.prototype.sub=function(t,i){this.QW(t,i);var s=t.sub(i);return s.cmpn(0)<0&&s.iadd(this.m),s.JW(this)},_.prototype.isub=function(t,i){this.QW(t,i);var s=t.isub(i);return s.cmpn(0)<0&&s.iadd(this.m),s},_.prototype.shl=function(t,i){return this.tH(t),this.imod(t.ushln(i))},_.prototype.imul=function(t,i){return this.QW(t,i),this.imod(t.imul(i))},_.prototype.mul=function(t,i){return this.QW(t,i),this.imod(t.mul(i))},_.prototype.isqr=function(t){return this.imul(t,t.clone())},_.prototype.sqr=function(t){return this.mul(t,t)},_.prototype.sqrt=function(t){if(t.isZero())return t.clone();var i=this.m.andln(3);if(s(i%2==1),3===i){var e=this.m.add(new h(1)).iushrn(2);return this.pow(t,e)}for(var r=this.m.subn(1),n=0;!r.isZero()&&0===r.andln(1);)n++,r.iushrn(1);s(!r.isZero());var o=new h(1).toRed(this),a=o.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new h(2*u*u).toRed(this);0!==this.pow(u,l).cmp(a);)u.redIAdd(a);for(var c=this.pow(u,r),d=this.pow(t,r.addn(1).iushrn(1)),f=this.pow(t,r),g=n;0!==f.cmp(o);){for(var m=f,y=0;0!==m.cmp(o);y++)m=m.redSqr();s(y<g);var p=this.pow(c,new h(1).iushln(g-y-1));d=d.redMul(p),c=p.redSqr(),f=f.redMul(c),g=y}return d},_.prototype.invm=function(t){var i=t.qW(this.m);return 0!==i.negative?(i.negative=0,this.imod(i).redNeg()):this.imod(i)},_.prototype.pow=function(t,i){if(i.isZero())return new h(1).toRed(this);if(0===i.cmpn(1))return t.clone();var s=new Array(16);s[0]=new h(1).toRed(this),s[1]=t;for(var e=2;e<s.length;e++)s[e]=this.mul(s[e-1],t);var r=s[0],n=0,o=0,a=i.bitLength()%26;for(0===a&&(a=26),e=i.length-1;e>=0;e--){for(var l=i.words[e],u=a-1;u>=0;u--){var c=l>>u&1;r!==s[0]&&(r=this.sqr(r)),0!==c||0!==n?(n<<=1,n|=c,(4==++o||0===e&&0===u)&&(r=this.mul(r,s[n]),o=0,n=0)):o=0}a=26}return r},_.prototype.convertTo=function(t){var i=t.umod(this.m);return i===t?i.clone():i},_.prototype.convertFrom=function(t){var i=t.clone();return i.red=null,i},h.mont=function(t){return new A(t)},e(A,_),A.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},A.prototype.convertFrom=function(t){var i=this.imod(t.mul(this.rinv));return i.red=null,i},A.prototype.imul=function(t,i){if(t.isZero()||i.isZero())return t.words[0]=0,t.length=1,t;var s=t.imul(i),e=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=s.isub(e).iushrn(this.shift),r=h;return h.cmp(this.m)>=0?r=h.isub(this.m):h.cmpn(0)<0&&(r=h.iadd(this.m)),r.JW(this)},A.prototype.mul=function(t,i){if(t.isZero()||i.isZero())return new h(0).JW(this);var s=t.mul(i),e=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=s.isub(e).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n.JW(this)},A.prototype.invm=function(t){return this.imod(t.qW(this.m).mul(this.r2)).JW(this)}}(0,Ry);var zy=Ey.exports;function Vy(t,i){if(Array.isArray(t))return t.slice();if(!t)return[];const s=[];if("string"!=typeof t){for(let i=0;i<t.length;i++)s[i]=0|t[i];return s}if("hex"===i){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t=`0${t}`);for(let i=0;i<t.length;i+=2)s.push(parseInt(t[i]+t[i+1],16))}else for(let i=0;i<t.length;i++){const e=t.charCodeAt(i),h=e>>8,r=255&e;h?s.push(h,r):s.push(r)}return s}const Ny=function(t,i,s){const e=new Array(Math.max(t.bitLength(),s)+1);e.fill(0);const h=1<<i+1,r=t.clone();for(let t=0;t<e.length;t++){let i;const s=r.andln(h-1);r.isOdd()?(i=s>(h>>1)-1?(h>>1)-s:s,r.isubn(i)):i=0,e[t]=i,r.iushrn(1)}return e},Gy=function(t,i){const s=[[],[]];t=t.clone(),i=i.clone();let e=0,h=0;for(;t.cmpn(-e)>0||i.cmpn(-h)>0;){let r,n,o=t.andln(3)+e&3,a=i.andln(3)+h&3;if(3===o&&(o=-1),3===a&&(a=-1),0==(1&o))r=0;else{const i=t.andln(7)+e&7;r=3!==i&&5!==i||2!==a?o:-o}if(s[0].push(r),0==(1&a))n=0;else{const t=i.andln(7)+h&7;n=3!==t&&5!==t||2!==o?a:-a}s[1].push(n),2*e===r+1&&(e=1-e),2*h===n+1&&(h=1-h),t.iushrn(1),i.iushrn(1)}return s};class Wy{constructor(t,i){this.type=t,this.p=new zy(i.p,16),this.red=i.prime?zy.red(i.prime):zy.mont(this.p),this.zero=new zy(0).toRed(this.red),this.one=new zy(1).toRed(this.red),this.two=new zy(2).toRed(this.red),this.n=i.n&&new zy(i.n,16),this.g=i.g&&this.pointFromJSON(i.g,i.gRed),this.eH=new Array(4),this.hH=new Array(4),this.rH=new Array(4),this.nH=new Array(4),this.oH=this.n?this.n.bitLength():0;const s=this.n&&this.p.div(this.n);!s||s.cmpn(100)>0?this.redN=null:(this.aH=!0,this.redN=this.n.toRed(this.red))}lH(t,i){const s=t.uH(),e=Ny(i,1,this.oH);let h=(1<<s.step+1)-(s.step%2==0?2:1);h/=3;const r=[];for(let t=0;t<e.length;t+=s.step){let i=0;for(let h=t+s.step-1;h>=t;h--)i=(i<<1)+e[h];r.push(i)}let n=this.jpoint(null,null,null),o=this.jpoint(null,null,null);for(let t=h;t>0;t--){for(let i=0;i<r.length;i++){const e=r[i];e===t?o=o.mixedAdd(s.points[i]):e===-t&&(o=o.mixedAdd(s.points[i].neg()))}n=n.add(o)}return n.toP()}cH(t,i){let s=4;const e=t.dH(s);s=e.wnd;const h=e.points,r=Ny(i,s,this.oH);let n=this.jpoint(null,null,null);for(let s=r.length-1;s>=0;s--){for(let t=0;s>=0&&0===r[s];s--)t++;if(s>=0&&i++,n=n.dblp(i),s<0)break;const e=r[s];n="affine"===t.type?e>0?n.mixedAdd(h[e-1>>1]):n.mixedAdd(h[-e-1>>1].neg()):e>0?n.add(h[e-1>>1]):n.add(h[-e-1>>1].neg())}return"affine"===t.type?n.toP():n}fH(t,i,s,e,h){const r=this.eH,n=this.hH,o=this.rH;let a=0;for(let s=0;s<e;s++){const e=i[s].dH(t);r[s]=e.wnd,n[s]=e.points}for(let t=e-1;t>=1;t-=2){const e=t-1,h=t;if(1!==r[e]||1!==r[h]){o[e]=Ny(s[e],r[e],this.oH),o[h]=Ny(s[h],r[h],this.oH),a=Math.max(o[e].length,a),a=Math.max(o[h].length,a);continue}const l=[i[e],null,null,i[h]];0===i[e].y.cmp(i[h].y)?(l[1]=i[e].add(i[h]),l[2]=i[e].toJ().mixedAdd(i[h].neg())):0===i[e].y.cmp(i[h].y.redNeg())?(l[1]=i[e].toJ().mixedAdd(i[h]),l[2]=i[e].add(i[h].neg())):(l[1]=i[e].toJ().mixedAdd(i[h]),l[2]=i[e].toJ().mixedAdd(i[h].neg()));const u=[-3,-1,-5,-7,0,7,5,1,3],c=Gy(s[e],s[h]);a=Math.max(c[0].length,a),o[e]=new Array(a),o[h]=new Array(a);for(let t=0;t<a;t++){const i=0|c[0][t],s=0|c[1][t];o[e][t]=u[3*(i+1)+(s+1)],o[h][t]=0,n[e]=l}}let l=this.jpoint(null,null,null);const u=this.nH;for(let t=a;t>=0;t--){let i=0;for(;t>=0;){let s=!0;for(let i=0;i<e;i++)u[i]=0|o[i][t],0!==u[i]&&(s=!1);if(!s)break;i++,t--}if(t>=0&&i++,l=l.dblp(i),t<0)break;for(let t=0;t<e;t++){const i=u[t];let s;0!==i&&(i>0?s=n[t][i-1>>1]:i<0&&(s=n[t][-i-1>>1].neg()),l="affine"===s.type?l.mixedAdd(s):l.add(s))}}for(let t=0;t<e;t++)n[t]=null;return h?l:l.toP()}decodePoint(t,i){t=Vy(t,i);const s=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*s)return this.point(t.slice(1,1+s),t.slice(1+s,1+2*s));if((2===t[0]||3===t[0])&&t.length-1===s)return this.pointFromX(t.slice(1,1+s),3===t[0]);throw new Error("Unknown point format")}}class Hy{constructor(t,i){this.curve=t,this.type=i,this.precomputed=null}eq(t){throw new Error("Not implemented")}validate(){return this.curve.validate(this)}encodeCompressed(t){return this.encode(t,!0)}gH(t){const i=this.curve.p.byteLength(),s=this.getX().toArray("be",i);return t?[this.getY().isEven()?2:3].concat(s):[4].concat(s,this.getY().toArray("be",i))}encode(t,i){return function(t,i){return"hex"===i?function(t){let i="";for(let e=0;e<t.length;e++)i+=1===(s=t[e].toString(16)).length?`0${s}`:s;var s;return i}(t):t}(this.gH(i),t)}precompute(t){if(this.precomputed)return this;const i={doubles:null,naf:null,beta:null};return i.naf=this.dH(8),i.doubles=this.uH(4,t),i.beta=this.mH(),this.precomputed=i,this}yH(t){if(!this.precomputed)return!1;const i=this.precomputed.doubles;return!!i&&i.points.length>=Math.ceil((t.bitLength()+1)/i.step)}uH(t,i){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;const s=[this];let e=this;for(let h=0;h<i;h+=t){for(let i=0;i<t;i++)e=e.dbl();s.push(e)}return{step:t,points:s}}dH(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;const i=[this],s=(1<<t)-1,e=1===s?null:this.dbl();for(let t=1;t<s;t++)i[t]=i[t-1].add(e);return{wnd:t,points:i}}mH(){return null}dblp(t){let i=this;for(let s=0;s<t;s++)i=i.dbl();return i}}class Uy extends Wy{constructor(t){super("short",t),this.a=new zy(t.a,16).toRed(this.red),this.b=new zy(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this.pH(t),this.SH=new Array(4),this.bH=new Array(4)}pointFromJSON(t,i){return $y.fromJSON(this,t,i)}pH(t){if(!this.zeroA||!this.g||!this.n||1!==this.p.modn(3))return;let i,s,e;if(t.beta)i=new zy(t.beta,16).toRed(this.red);else{const t=this.vH(this.p);i=t[0].cmp(t[1])<0?t[0]:t[1],i=i.toRed(this.red)}if(t.lambda)s=new zy(t.lambda,16);else{const t=this.vH(this.n);s=0===this.g.mul(t[0]).x.cmp(this.g.x.redMul(i))?t[0]:t[1]}return e=t.basis?t.basis.map((t=>({a:new zy(t.a,16),b:new zy(t.b,16)}))):this.xH(s),{beta:i,lambda:s,basis:e}}vH(t){const i=t===this.p?this.red:zy.mont(t),s=new zy(2).toRed(i).redInvm(),e=s.redNeg(),h=new zy(3).toRed(i).redNeg().redSqrt().redMul(s);return[e.redAdd(h).fromRed(),e.redSub(h).fromRed()]}xH(t){const i=this.n.ushrn(Math.floor(this.n.bitLength()/2));let s,e,h,r,n,o,a,l,u,c=t,d=this.n.clone(),f=new zy(1),g=new zy(0),m=new zy(0),y=new zy(1),p=0;for(;0!==c.cmpn(0);){const t=d.div(c);l=d.sub(t.mul(c)),u=m.sub(t.mul(f));const n=y.sub(t.mul(g));if(!h&&l.cmp(i)<0)s=a.neg(),e=f,h=l.neg(),r=u;else if(h&&2==++p)break;a=l,d=c,c=l,m=f,f=u,y=g,g=n}n=l.neg(),o=u;const S=h.sqr().add(r.sqr());return n.sqr().add(o.sqr()).cmp(S)>=0&&(n=s,o=e),h.negative&&(h=h.neg(),r=r.neg()),n.negative&&(n=n.neg(),o=o.neg()),[{a:h,b:r},{a:n,b:o}]}MH(t){const i=this.endo.basis,s=i[0],e=i[1],h=e.b.mul(t).divRound(this.n),r=s.b.neg().mul(t).divRound(this.n),n=h.mul(s.a),o=r.mul(e.a),a=h.mul(s.b),l=r.mul(e.b);return{k1:t.sub(n).sub(o),k2:a.add(l).neg()}}point(t,i,s){return new $y(this,t,i,s)}pointFromX(t,i){(t=new zy(t,16)).red||(t=t.toRed(this.red));const s=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);let e=s.redSqrt();if(0!==e.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");const h=e.fromRed().isOdd();return(i&&!h||!i&&h)&&(e=e.redNeg()),this.point(t,e)}validate(t){if(t.inf)return!0;const i=t.x,s=t.y,e=this.a.redMul(i),h=i.redSqr().redMul(i).redIAdd(e).redIAdd(this.b);return 0===s.redSqr().redISub(h).cmpn(0)}_H(t,i,s){const e=this.SH,h=this.bH;let r=0;for(r=0;r<t.length;r++){const s=this.MH(i[r]);let n=t[r],o=n.mH();s.k1.negative&&(s.k1.ineg(),n=n.neg(!0)),s.k2.negative&&(s.k2.ineg(),o=o.neg(!0)),e[2*r]=n,e[2*r+1]=o,h[2*r]=s.k1,h[2*r+1]=s.k2}const n=this.fH(1,e,h,2*r,s);for(let t=0;t<2*r;t++)e[t]=null,h[t]=null;return n}jpoint(t,i,s){return new jy(this,t,i,s)}}class $y extends Hy{constructor(t,i,s,e){super(t,"affine"),null===i&&null===s?(this.x=null,this.y=null,this.inf=!0):(this.x=new zy(i,16),this.y=new zy(s,16),e&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}pointFromX(t,i){throw new Error("Method not implemented.")}point(t,i,s){return new $y(this,t,i,s)}mH(){if(!this.curve.endo)return;const t=this.precomputed;if(t&&t.beta)return t.beta;const i=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){const s=this.curve,e=function(t){return s.point(t.x.redMul(s.endo.beta),t.y)};t.beta=i,i.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(e)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(e)}}}return i}toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]}static fromJSON(t,i,s){"string"==typeof i&&(i=JSON.parse(i));const e=t.point(i[0],i[1],s);if(!i[2])return e;function h(i){return t.point(i[0],i[1],s)}const r=i[2];return e.precomputed={beta:null,doubles:r.doubles&&{step:r.doubles.step,points:[e].concat(r.doubles.points.map(h))},naf:r.naf&&{wnd:r.naf.wnd,points:[e].concat(r.naf.points.map(h))}},e}inspect(){return this.isInfinity()?"<EC Point Infinity>":`<EC Point x: ${this.x.fromRed().toString(16,2)} y: ${this.y.fromRed().toString(16,2)}>`}isInfinity(){return this.inf}add(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);let i=this.y.redSub(t.y);0!==i.cmpn(0)&&(i=i.redMul(this.x.redSub(t.x).redInvm()));const s=i.redSqr().redISub(this.x).redISub(t.x),e=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,e)}dbl(){if(this.inf)return this;const t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);const i=this.curve.a,s=this.x.redSqr(),e=t.redInvm(),h=s.redAdd(s).redIAdd(s).redIAdd(i).redMul(e),r=h.redSqr().redISub(this.x.redAdd(this.x)),n=h.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)}getX(){return this.x.fromRed()}getY(){return this.y.fromRed()}mul(t){return t=new zy(t,16),this.isInfinity()?this:this.yH(t)?this.curve.lH(this,t):this.curve.endo?this.curve._H([this],[t]):this.curve.cH(this,t)}mulAdd(t,i,s){const e=[this,i],h=[t,s];return this.curve.endo?this.curve._H(e,h):this.curve.fH(1,e,h,2)}jmulAdd(t,i,s){const e=[this,i],h=[t,s];return this.curve.endo?this.curve._H(e,h,!0):this.curve.fH(1,e,h,2,!0)}eq(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))}neg(t){if(this.inf)return this;const i=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){const t=this.precomputed,s=function(t){return t.neg()};i.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(s)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(s)}}}return i}toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)}}class jy extends Hy{constructor(t,i,s,e){super(t,"jacobian"),null===i&&null===s&&null===e?(this.x=this.curve.one,this.y=this.curve.one,this.z=new zy(0)):(this.x=new zy(i,16),this.y=new zy(s,16),this.z=new zy(e,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}getY(){throw new Error("Method not implemented.")}getX(){throw new Error("Method not implemented.")}pointFromX(t,i){throw new Error("Method not implemented.")}point(t,i,s){throw new Error("Method not implemented.")}jpoint(t,i,s){return new jy(this,t,i,s)}toP(){if(this.isInfinity())return this.curve.point(null,null);const t=this.z.redInvm(),i=t.redSqr(),s=this.x.redMul(i),e=this.y.redMul(i).redMul(t);return this.curve.point(s,e)}neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)}add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;const i=t.z.redSqr(),s=this.z.redSqr(),e=this.x.redMul(i),h=t.x.redMul(s),r=this.y.redMul(i.redMul(t.z)),n=t.y.redMul(s.redMul(this.z)),o=e.redSub(h),a=r.redSub(n);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const l=o.redSqr(),u=l.redMul(o),c=e.redMul(l),d=a.redSqr().redIAdd(u).redISub(c).redISub(c),f=a.redMul(c.redISub(d)).redISub(r.redMul(u)),g=this.z.redMul(t.z).redMul(o);return this.curve.jpoint(d,f,g)}mixedAdd(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;const i=this.z.redSqr(),s=this.x,e=t.x.redMul(i),h=this.y,r=t.y.redMul(i).redMul(this.z),n=s.redSub(e),o=h.redSub(r);if(0===n.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const a=n.redSqr(),l=a.redMul(n),u=s.redMul(a),c=o.redSqr().redIAdd(l).redISub(u).redISub(u),d=o.redMul(u.redISub(c)).redISub(h.redMul(l)),f=this.z.redMul(n);return this.curve.jpoint(c,d,f)}dblp(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){let i=this;for(let s=0;s<t;s++)i=i.dbl();return i}const i=this.curve.a,s=this.curve.tinv;let e=this.x;const h=this.y;let r=this.z,n=r.redSqr().redSqr(),o=h.redAdd(h);for(let s=0;s<t;s++){const h=e.redSqr(),a=o.redSqr(),l=a.redSqr(),u=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(n)),c=e.redMul(a),d=u.redSqr().redISub(c.redAdd(c)),f=c.redISub(d);let g=u.redMul(f);g=g.redIAdd(g).redISub(l);const m=o.redMul(r);s+1<t&&(n=n.redMul(l)),e=d,r=m,o=g}return this.curve.jpoint(e,o.redMul(s),r)}dbl(){return this.isInfinity()?this:this.curve.zeroA?this.AH():this.curve.threeA?this.wH():this.kH()}AH(){let t,i,s;if(this.zOne){const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e),a=o.redSqr().redISub(n).redISub(n);let l=r.redIAdd(r);l=l.redIAdd(l),l=l.redIAdd(l),t=a,i=o.redMul(n.redISub(a)).redISub(l),s=this.y.redAdd(this.y)}else{const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e),a=o.redSqr();let l=r.redIAdd(r);l=l.redIAdd(l),l=l.redIAdd(l),t=a.redISub(n).redISub(n),i=o.redMul(n.redISub(t)).redISub(l),s=this.y.redMul(this.z),s=s.redIAdd(s)}return this.curve.jpoint(t,i,s)}wH(){let t,i,s;if(this.zOne){const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a),a=o.redSqr().redISub(n).redISub(n);t=a;let l=r.redIAdd(r);l=l.redIAdd(l),l=l.redIAdd(l),i=o.redMul(n.redISub(a)).redISub(l),s=this.y.redAdd(this.y)}else{const e=this.z.redSqr(),h=this.y.redSqr(),r=this.x.redMul(h);let n=this.x.redSub(e).redMul(this.x.redAdd(e));n=n.redAdd(n).redIAdd(n);let o=r.redIAdd(r);o=o.redIAdd(o);const a=o.redAdd(o);t=n.redSqr().redISub(a),s=this.y.redAdd(this.z).redSqr().redISub(h).redISub(e);let l=h.redSqr();l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l),i=n.redMul(o.redISub(t)).redISub(l)}return this.curve.jpoint(t,i,s)}kH(){const t=this.curve.a,i=this.x,s=this.y,e=this.z,h=e.redSqr().redSqr(),r=i.redSqr(),n=s.redSqr(),o=r.redAdd(r).redIAdd(r).redIAdd(t.redMul(h));let a=i.redAdd(i);a=a.redIAdd(a);const l=a.redMul(n),u=o.redSqr().redISub(l.redAdd(l)),c=l.redISub(u);let d=n.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=o.redMul(c).redISub(d),g=s.redAdd(s).redMul(e);return this.curve.jpoint(u,f,g)}trpl(){if(!this.curve.zeroA)return this.dbl().add(this);const t=this.x.redSqr(),i=this.y.redSqr(),s=this.z.redSqr(),e=i.redSqr(),h=t.redAdd(t).redIAdd(t),r=h.redSqr();let n=this.x.redAdd(i).redSqr().redISub(t).redISub(e);n=n.redIAdd(n),n=n.redAdd(n).redIAdd(n),n=n.redISub(r);const o=n.redSqr();let a=e.redIAdd(e);a=a.redIAdd(a),a=a.redIAdd(a),a=a.redIAdd(a);const l=h.redIAdd(n).redSqr().redISub(r).redISub(o).redISub(a);let u=i.redMul(l);u=u.redIAdd(u),u=u.redIAdd(u);let c=this.x.redMul(o).redISub(u);c=c.redIAdd(c),c=c.redIAdd(c);let d=this.y.redMul(l.redMul(a.redISub(l)).redISub(n.redMul(o)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=this.z.redAdd(n).redSqr().redISub(s).redISub(o);return this.curve.jpoint(c,d,f)}mul(t,i){return t=new zy(t,i),this.curve.cH(this,t)}eq(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;const i=this.z.redSqr(),s=t.z.redSqr();if(0!==this.x.redMul(s).redISub(t.x.redMul(i)).cmpn(0))return!1;const e=i.redMul(this.z),h=s.redMul(t.z);return 0===this.y.redMul(h).redISub(t.y.redMul(e)).cmpn(0)}eqXToP(t){const i=this.z.redSqr(),s=t.toRed(this.curve.red).redMul(i);if(0===this.x.cmp(s))return!0;const e=t.clone(),h=this.curve.redN.redMul(i);for(;;){if(e.iadd(this.curve.n),e.cmp(this.curve.p)>=0)return!1;if(s.redIAdd(h),0===this.x.cmp(s))return!0}}inspect(){return this.isInfinity()?"<EC JPoint Infinity>":`<EC JPoint x: ${this.x.toString(16,2)} y: ${this.y.toString(16,2)} z: ${this.z.toString(16,2)}>`}isInfinity(){return 0===this.z.cmpn(0)}}class Yy{constructor(t){this.curve=new Uy(t),this.g=this.curve.g,this.n=this.curve.n}}const Xy={};var Zy;Xy.PresetCurve=Yy,Zy={type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]},Object.defineProperty(Xy,"secp256k1",{configurable:!0,enumerable:!0,get(){const t=new Yy(Zy);return Object.defineProperty(Xy,"secp256k1",{configurable:!0,enumerable:!0,value:t}),t}});class Ky{constructor(t,i){this.ec=t,this.priv=null,this.pub=null,i.pub&&this.CH(i.pub,i.pubEnc)}static fromPublic(t,i,s){return i instanceof Ky?i:new Ky(t,{pub:i,pubEnc:s})}validate(){const t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}}getPublic(t,i){return"string"==typeof t&&(i=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),i?this.pub.encode(i,t):this.pub}CH(t,i){if(t.x||t.y)return"mont"===this.ec.curve.type||"short"===this.ec.curve.type||this.ec.curve.type,void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,i)}verify(t,i){return this.ec.verify(t,i,this)}}function qy(t,i){const s=t[i.place++];if(!(128&s))return s;const e=15&s;if(0===e||e>4)return!1;let h=0,r=i.place;for(let i=0;i<e;i++,r++)h<<=8,h|=t[r],h>>>=0;return!(h<=127)&&(i.place=r,h)}class Jy{constructor(){this.place=0}}class Qy{constructor(t,i){if(t instanceof Qy)return t;this.TH(t,i)||(this.r=new zy(t.r,16),this.s=new zy(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}TH(t,i){t=Vy(t,i);const s=new Jy;if(48!==t[s.place++])return!1;const e=qy(t,s);if(!1===e)return!1;if(e+s.place!==t.length)return!1;if(2!==t[s.place++])return!1;const h=qy(t,s);if(!1===h)return!1;let r=t.slice(s.place,h+s.place);if(s.place+=h,2!==t[s.place++])return!1;const n=qy(t,s);if(!1===n)return!1;if(t.length!==n+s.place)return!1;let o=t.slice(s.place,n+s.place);if(0===r[0]){if(!(128&r[1]))return!1;r=r.slice(1)}if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}return this.r=new zy(r),this.s=new zy(o),this.recoveryParam=null,!0}}class tp{constructor(t){if(!(this instanceof tp))return new tp(t);"string"==typeof t&&(t=Xy[t]),t instanceof Xy.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1)}keyFromPublic(t,i){return Ky.fromPublic(this,t,i)}FH(t,i){const s=8*t.byteLength()-this.n.bitLength();return s>0&&(t=t.ushrn(s)),!i&&t.cmp(this.n)>=0?t.sub(this.n):t}verify(t,i,s,e){t=this.FH(new zy(t,16)),s=this.keyFromPublic(s,e);const h=(i=new Qy(i,"hex")).r,r=i.s;if(h.cmpn(1)<0||h.cmp(this.n)>=0)return!1;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;const n=r.invm(this.n),o=n.mul(t).umod(this.n),a=n.mul(h).umod(this.n);if(!this.curve.aH){const t=this.g.mulAdd(o,s.getPublic(),a);return!t.isInfinity()&&0===t.getX().umod(this.n).cmp(h)}const l=this.g.jmulAdd(o,s.getPublic(),a);return!l.isInfinity()&&l.eqXToP(h)}}var ip,sp={exports:{}};sp.exports=(ip=ip||function(t,i){var s;if("undefined"!=typeof window&&window.crypto&&(s=window.crypto),"undefined"!=typeof self&&self.crypto&&(s=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(s=globalThis.crypto),!s&&"undefined"!=typeof window&&window.msCrypto&&(s=window.msCrypto),!s&&void 0!==Ry&&Ry.crypto&&(s=Ry.crypto),!s)try{s=i}catch(t){}var e=function(){if(s){if("function"==typeof s.getRandomValues)try{return s.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof s.randomBytes)try{return s.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},h=Object.create||function(){function t(){}return function(i){var s;return t.prototype=i,s=new t,t.prototype=null,s}}(),r={},n=r.lib={},o=n.Base={extend:function(t){var i=h(this);return t&&i.mixIn(t),i.hasOwnProperty("init")&&this.init!==i.init||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=o.extend({init:function(t,s){t=this.words=t||[],this.sigBytes=s!=i?s:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var i=this.words,s=t.words,e=this.sigBytes,h=t.sigBytes;if(this.clamp(),e%4)for(var r=0;r<h;r++){var n=s[r>>>2]>>>24-r%4*8&255;i[e+r>>>2]|=n<<24-(e+r)%4*8}else for(var o=0;o<h;o+=4)i[e+o>>>2]=s[o>>>2];return this.sigBytes+=h,this},clamp:function(){var i=this.words,s=this.sigBytes;i[s>>>2]&=4294967295<<32-s%4*8,i.length=t.ceil(s/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var i=[],s=0;s<t;s+=4)i.push(e());return new a.init(i,t)}}),l=r.enc={},u=l.Hex={stringify:function(t){for(var i=t.words,s=t.sigBytes,e=[],h=0;h<s;h++){var r=i[h>>>2]>>>24-h%4*8&255;e.push((r>>>4).toString(16)),e.push((15&r).toString(16))}return e.join("")},parse:function(t){for(var i=t.length,s=[],e=0;e<i;e+=2)s[e>>>3]|=parseInt(t.substr(e,2),16)<<24-e%8*4;return new a.init(s,i/2)}},c=l.Latin1={stringify:function(t){for(var i=t.words,s=t.sigBytes,e=[],h=0;h<s;h++){var r=i[h>>>2]>>>24-h%4*8&255;e.push(String.fromCharCode(r))}return e.join("")},parse:function(t){for(var i=t.length,s=[],e=0;e<i;e++)s[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new a.init(s,i)}},d=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},f=n.BufferedBlockAlgorithm=o.extend({reset:function(){this.dk=new a.init,this.IH=0},PH:function(t){"string"==typeof t&&(t=d.parse(t)),this.dk.concat(t),this.IH+=t.sigBytes},DH:function(i){var s,e=this.dk,h=e.words,r=e.sigBytes,n=this.blockSize,o=r/(4*n),l=(o=i?t.ceil(o):t.max((0|o)-this.BH,0))*n,u=t.min(4*l,r);if(l){for(var c=0;c<l;c+=n)this.OH(h,c);s=h.splice(0,l),e.sigBytes-=u}return new a.init(s,u)},clone:function(){var t=o.clone.call(this);return t.dk=this.dk.clone(),t},BH:0});n.Hasher=f.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this.LH()},update:function(t){return this.PH(t),this.DH(),this},finalize:function(t){return t&&this.PH(t),this.RH()},blockSize:16,EH:function(t){return function(i,s){return new t.init(s).finalize(i)}},zH:function(t){return function(i,s){return new g.HMAC.init(t,s).finalize(i)}}});var g=r.algo={};return r}(Math),ip);var ep={exports:{}}.exports=function(t){return function(i){var s=t,e=s.lib,h=e.WordArray,r=e.Hasher,n=s.algo,o=[],a=[];!function(){function t(t){for(var s=i.sqrt(t),e=2;e<=s;e++)if(!(t%e))return!1;return!0}function s(t){return 4294967296*(t-(0|t))|0}for(var e=2,h=0;h<64;)t(e)&&(h<8&&(o[h]=s(i.pow(e,.5))),a[h]=s(i.pow(e,1/3)),h++),e++}();var l=[],u=n.SHA256=r.extend({LH:function(){this.VH=new h.init(o.slice(0))},OH:function(t,i){for(var s=this.VH.words,e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],u=s[5],c=s[6],d=s[7],f=0;f<64;f++){if(f<16)l[f]=0|t[i+f];else{var g=l[f-15],m=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,y=l[f-2],p=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;l[f]=m+l[f-7]+p+l[f-16]}var S=e&h^e&r^h&r,b=(e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22),v=d+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&u^~o&c)+a[f]+l[f];d=c,c=u,u=o,o=n+v|0,n=r,r=h,h=e,e=v+(b+S)|0}s[0]=s[0]+e|0,s[1]=s[1]+h|0,s[2]=s[2]+r|0,s[3]=s[3]+n|0,s[4]=s[4]+o|0,s[5]=s[5]+u|0,s[6]=s[6]+c|0,s[7]=s[7]+d|0},RH:function(){var t=this.dk,s=t.words,e=8*this.IH,h=8*t.sigBytes;return s[h>>>5]|=128<<24-h%32,s[14+(h+64>>>9<<4)]=i.floor(e/4294967296),s[15+(h+64>>>9<<4)]=e,t.sigBytes=4*s.length,this.DH(),this.VH},clone:function(){var t=r.clone.call(this);return t.VH=this.VH.clone(),t}});s.SHA256=r.EH(u),s.HmacSHA256=r.zH(u)}(Math),t.SHA256}(sp.exports),hp={exports:{}}.exports=function(t){return s=(i=t).lib.WordArray,e=i.algo,h=e.SHA256,r=e.SHA224=h.extend({LH:function(){this.VH=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},RH:function(){var t=h.RH.call(this);return t.sigBytes-=4,t}}),i.SHA224=h.EH(r),i.HmacSHA224=h.zH(r),t.SHA224;var i,s,e,h,r}(sp.exports),rp={exports:{}}.exports=sp.exports.enc.Hex,np={exports:{}}.exports=sp.exports.enc.Utf8;!function(t){return s=(i=t).lib.WordArray,i.enc.Base64={stringify:function(t){var i=t.words,s=t.sigBytes,e=this.NH;t.clamp();for(var h=[],r=0;r<s;r+=3)for(var n=(i[r>>>2]>>>24-r%4*8&255)<<16|(i[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|i[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;o<4&&r+.75*o<s;o++)h.push(e.charAt(n>>>6*(3-o)&63));var a=e.charAt(64);if(a)for(;h.length%4;)h.push(a);return h.join("")},parse:function(t){var i=t.length,e=this.NH,h=this.GH;if(!h){h=this.GH=[];for(var r=0;r<e.length;r++)h[e.charCodeAt(r)]=r}var n=e.charAt(64);if(n){var o=t.indexOf(n);-1!==o&&(i=o)}return function(t,i,e){for(var h=[],r=0,n=0;n<i;n++)if(n%4){var o=e[t.charCodeAt(n-1)]<<n%4*2|e[t.charCodeAt(n)]>>>6-n%4*2;h[r>>>2]|=o<<24-r%4*8,r++}return s.create(h,r)}(t,i,h)},NH:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},t.enc.Base64;var i,s}(sp.exports);!function(t){(function(i){var s=t,e=s.lib,h=e.WordArray,r=e.Hasher,n=s.algo,o=[];!function(){for(var t=0;t<64;t++)o[t]=4294967296*i.abs(i.sin(t+1))|0}();var a=n.MD5=r.extend({LH:function(){this.VH=new h.init([1732584193,4023233417,2562383102,271733878])},OH:function(t,i){for(var s=0;s<16;s++){var e=i+s,h=t[e];t[e]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}var r=this.VH.words,n=t[i+0],a=t[i+1],f=t[i+2],g=t[i+3],m=t[i+4],y=t[i+5],p=t[i+6],S=t[i+7],b=t[i+8],v=t[i+9],x=t[i+10],M=t[i+11],_=t[i+12],A=t[i+13],w=t[i+14],k=t[i+15],C=r[0],T=r[1],F=r[2],I=r[3];C=l(C,T,F,I,n,7,o[0]),I=l(I,C,T,F,a,12,o[1]),F=l(F,I,C,T,f,17,o[2]),T=l(T,F,I,C,g,22,o[3]),C=l(C,T,F,I,m,7,o[4]),I=l(I,C,T,F,y,12,o[5]),F=l(F,I,C,T,p,17,o[6]),T=l(T,F,I,C,S,22,o[7]),C=l(C,T,F,I,b,7,o[8]),I=l(I,C,T,F,v,12,o[9]),F=l(F,I,C,T,x,17,o[10]),T=l(T,F,I,C,M,22,o[11]),C=l(C,T,F,I,_,7,o[12]),I=l(I,C,T,F,A,12,o[13]),F=l(F,I,C,T,w,17,o[14]),C=u(C,T=l(T,F,I,C,k,22,o[15]),F,I,a,5,o[16]),I=u(I,C,T,F,p,9,o[17]),F=u(F,I,C,T,M,14,o[18]),T=u(T,F,I,C,n,20,o[19]),C=u(C,T,F,I,y,5,o[20]),I=u(I,C,T,F,x,9,o[21]),F=u(F,I,C,T,k,14,o[22]),T=u(T,F,I,C,m,20,o[23]),C=u(C,T,F,I,v,5,o[24]),I=u(I,C,T,F,w,9,o[25]),F=u(F,I,C,T,g,14,o[26]),T=u(T,F,I,C,b,20,o[27]),C=u(C,T,F,I,A,5,o[28]),I=u(I,C,T,F,f,9,o[29]),F=u(F,I,C,T,S,14,o[30]),C=c(C,T=u(T,F,I,C,_,20,o[31]),F,I,y,4,o[32]),I=c(I,C,T,F,b,11,o[33]),F=c(F,I,C,T,M,16,o[34]),T=c(T,F,I,C,w,23,o[35]),C=c(C,T,F,I,a,4,o[36]),I=c(I,C,T,F,m,11,o[37]),F=c(F,I,C,T,S,16,o[38]),T=c(T,F,I,C,x,23,o[39]),C=c(C,T,F,I,A,4,o[40]),I=c(I,C,T,F,n,11,o[41]),F=c(F,I,C,T,g,16,o[42]),T=c(T,F,I,C,p,23,o[43]),C=c(C,T,F,I,v,4,o[44]),I=c(I,C,T,F,_,11,o[45]),F=c(F,I,C,T,k,16,o[46]),C=d(C,T=c(T,F,I,C,f,23,o[47]),F,I,n,6,o[48]),I=d(I,C,T,F,S,10,o[49]),F=d(F,I,C,T,w,15,o[50]),T=d(T,F,I,C,y,21,o[51]),C=d(C,T,F,I,_,6,o[52]),I=d(I,C,T,F,g,10,o[53]),F=d(F,I,C,T,x,15,o[54]),T=d(T,F,I,C,a,21,o[55]),C=d(C,T,F,I,b,6,o[56]),I=d(I,C,T,F,k,10,o[57]),F=d(F,I,C,T,p,15,o[58]),T=d(T,F,I,C,A,21,o[59]),C=d(C,T,F,I,m,6,o[60]),I=d(I,C,T,F,M,10,o[61]),F=d(F,I,C,T,f,15,o[62]),T=d(T,F,I,C,v,21,o[63]),r[0]=r[0]+C|0,r[1]=r[1]+T|0,r[2]=r[2]+F|0,r[3]=r[3]+I|0},RH:function(){var t=this.dk,s=t.words,e=8*this.IH,h=8*t.sigBytes;s[h>>>5]|=128<<24-h%32;var r=i.floor(e/4294967296),n=e;s[15+(h+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),s[14+(h+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(s.length+1),this.DH();for(var o=this.VH,a=o.words,l=0;l<4;l++){var u=a[l];a[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return o},clone:function(){var t=r.clone.call(this);return t.VH=this.VH.clone(),t}});function l(t,i,s,e,h,r,n){var o=t+(i&s|~i&e)+h+n;return(o<<r|o>>>32-r)+i}function u(t,i,s,e,h,r,n){var o=t+(i&e|s&~e)+h+n;return(o<<r|o>>>32-r)+i}function c(t,i,s,e,h,r,n){var o=t+(i^s^e)+h+n;return(o<<r|o>>>32-r)+i}function d(t,i,s,e,h,r,n){var o=t+(s^(i|~e))+h+n;return(o<<r|o>>>32-r)+i}s.MD5=r.EH(a),s.HmacMD5=r.zH(a)})(Math),t.MD5}(sp.exports);!function(t){return s=(i=t).lib,e=s.WordArray,h=s.Hasher,r=i.algo,n=[],o=r.SHA1=h.extend({LH:function(){this.VH=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},OH:function(t,i){for(var s=this.VH.words,e=s[0],h=s[1],r=s[2],o=s[3],a=s[4],l=0;l<80;l++){if(l<16)n[l]=0|t[i+l];else{var u=n[l-3]^n[l-8]^n[l-14]^n[l-16];n[l]=u<<1|u>>>31}var c=(e<<5|e>>>27)+a+n[l];c+=l<20?1518500249+(h&r|~h&o):l<40?1859775393+(h^r^o):l<60?(h&r|h&o|r&o)-1894007588:(h^r^o)-899497514,a=o,o=r,r=h<<30|h>>>2,h=e,e=c}s[0]=s[0]+e|0,s[1]=s[1]+h|0,s[2]=s[2]+r|0,s[3]=s[3]+o|0,s[4]=s[4]+a|0},RH:function(){var t=this.dk,i=t.words,s=8*this.IH,e=8*t.sigBytes;return i[e>>>5]|=128<<24-e%32,i[14+(e+64>>>9<<4)]=Math.floor(s/4294967296),i[15+(e+64>>>9<<4)]=s,t.sigBytes=4*i.length,this.DH(),this.VH},clone:function(){var t=h.clone.call(this);return t.VH=this.VH.clone(),t}}),i.SHA1=h.EH(o),i.HmacSHA1=h.zH(o),t.SHA1;var i,s,e,h,r,n,o}(sp.exports);var op,ap,lp;ap=(op=sp.exports).lib.Base,lp=op.enc.Utf8,op.algo.HMAC=ap.extend({init:function(t,i){t=this.WH=new t.init,"string"==typeof i&&(i=lp.parse(i));var s=t.blockSize,e=4*s;i.sigBytes>e&&(i=t.finalize(i)),i.clamp();for(var h=this.HH=i.clone(),r=this.UH=i.clone(),n=h.words,o=r.words,a=0;a<s;a++)n[a]^=1549556828,o[a]^=909522486;h.sigBytes=r.sigBytes=e,this.reset()},reset:function(){var t=this.WH;t.reset(),t.update(this.UH)},update:function(t){return this.WH.update(t),this},finalize:function(t){var i=this.WH,s=i.finalize(t);return i.reset(),i.finalize(this.HH.clone().concat(s))}}),function(t){return e=(s=(i=t).lib).Base,h=s.WordArray,n=(r=i.algo).MD5,o=r.EvpKDF=e.extend({cfg:e.extend({keySize:4,hasher:n,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,i){for(var s,e=this.cfg,r=e.hasher.create(),n=h.create(),o=n.words,a=e.keySize,l=e.iterations;o.length<a;){s&&r.update(s),s=r.update(t).finalize(i),r.reset();for(var u=1;u<l;u++)s=r.finalize(s),r.reset();n.concat(s)}return n.sigBytes=4*a,n}}),i.EvpKDF=function(t,i,s){return o.create(s).compute(t,i)},t.EvpKDF;var i,s,e,h,r,n,o}(sp.exports);!function(t){t.lib.Cipher||function(i){var s=t,e=s.lib,h=e.Base,r=e.WordArray,n=e.BufferedBlockAlgorithm,o=s.enc;o.Utf8;var a=o.Base64,l=s.algo.EvpKDF,u=e.Cipher=n.extend({cfg:h.extend(),createEncryptor:function(t,i){return this.create(this.$H,t,i)},createDecryptor:function(t,i){return this.create(this.jH,t,i)},init:function(t,i,s){this.cfg=this.cfg.extend(s),this.YH=t,this.XH=i,this.reset()},reset:function(){n.reset.call(this),this.LH()},process:function(t){return this.PH(t),this.DH()},finalize:function(t){return t&&this.PH(t),this.RH()},keySize:4,ivSize:4,$H:1,jH:2,EH:function(){function t(t){return"string"==typeof t?b:p}return function(i){return{encrypt:function(s,e,h){return t(e).encrypt(i,s,e,h)},decrypt:function(s,e,h){return t(e).decrypt(i,s,e,h)}}}}()});e.StreamCipher=u.extend({RH:function(){return this.DH(!0)},blockSize:1});var c=s.mode={},d=e.BlockCipherMode=h.extend({createEncryptor:function(t,i){return this.Encryptor.create(t,i)},createDecryptor:function(t,i){return this.Decryptor.create(t,i)},init:function(t,i){this.ZH=t,this.KH=i}}),f=c.CBC=function(){var t=d.extend();function i(t,i,s){var e,h=this.KH;h?(e=h,this.KH=undefined):e=this.qH;for(var r=0;r<s;r++)t[i+r]^=e[r]}return t.Encryptor=t.extend({processBlock:function(t,s){var e=this.ZH,h=e.blockSize;i.call(this,t,s,h),e.encryptBlock(t,s),this.qH=t.slice(s,s+h)}}),t.Decryptor=t.extend({processBlock:function(t,s){var e=this.ZH,h=e.blockSize,r=t.slice(s,s+h);e.decryptBlock(t,s),i.call(this,t,s,h),this.qH=r}}),t}(),g=(s.pad={}).Pkcs7={pad:function(t,i){for(var s=4*i,e=s-t.sigBytes%s,h=e<<24|e<<16|e<<8|e,n=[],o=0;o<e;o+=4)n.push(h);var a=r.create(n,e);t.concat(a)},unpad:function(t){var i=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=i}};e.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:g}),reset:function(){var t;u.reset.call(this);var i=this.cfg,s=i.iv,e=i.mode;this.YH==this.$H?t=e.createEncryptor:(t=e.createDecryptor,this.BH=1),this.JH&&this.JH.QH==t?this.JH.init(this,s&&s.words):(this.JH=t.call(e,this,s&&s.words),this.JH.QH=t)},OH:function(t,i){this.JH.processBlock(t,i)},RH:function(){var t,i=this.cfg.padding;return this.YH==this.$H?(i.pad(this.dk,this.blockSize),t=this.DH(!0)):(t=this.DH(!0),i.unpad(t)),t},blockSize:4});var m=e.CipherParams=h.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),y=(s.format={}).OpenSSL={stringify:function(t){var i=t.ciphertext,s=t.salt;return(s?r.create([1398893684,1701076831]).concat(s).concat(i):i).toString(a)},parse:function(t){var i,s=a.parse(t),e=s.words;return 1398893684==e[0]&&1701076831==e[1]&&(i=r.create(e.slice(2,4)),e.splice(0,4),s.sigBytes-=16),m.create({ciphertext:s,salt:i})}},p=e.SerializableCipher=h.extend({cfg:h.extend({format:y}),encrypt:function(t,i,s,e){e=this.cfg.extend(e);var h=t.createEncryptor(s,e),r=h.finalize(i),n=h.cfg;return m.create({ciphertext:r,key:s,iv:n.iv,algorithm:t,mode:n.mode,padding:n.padding,blockSize:t.blockSize,formatter:e.format})},decrypt:function(t,i,s,e){return e=this.cfg.extend(e),i=this.tU(i,e.format),t.createDecryptor(s,e).finalize(i.ciphertext)},tU:function(t,i){return"string"==typeof t?i.parse(t,this):t}}),S=(s.kdf={}).OpenSSL={execute:function(t,i,s,e){e||(e=r.random(8));var h=l.create({keySize:i+s}).compute(t,e),n=r.create(h.words.slice(i),4*s);return h.sigBytes=4*i,m.create({key:h,iv:n,salt:e})}},b=e.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:S}),encrypt:function(t,i,s,e){var h=(e=this.cfg.extend(e)).kdf.execute(s,t.keySize,t.ivSize);e.iv=h.iv;var r=p.encrypt.call(this,t,i,h.key,e);return r.mixIn(h),r},decrypt:function(t,i,s,e){e=this.cfg.extend(e),i=this.tU(i,e.format);var h=e.kdf.execute(s,t.keySize,t.ivSize,i.salt);return e.iv=h.iv,p.decrypt.call(this,t,i,h.key,e)}})}()}(sp.exports);var up={exports:{}}.exports=function(t){return function(){var i=t,s=i.lib.BlockCipher,e=i.algo,h=[],r=[],n=[],o=[],a=[],l=[],u=[],c=[],d=[],f=[];!function(){for(var t=[],i=0;i<256;i++)t[i]=i<128?i<<1:i<<1^283;var s=0,e=0;for(i=0;i<256;i++){var g=e^e<<1^e<<2^e<<3^e<<4;g=g>>>8^255&g^99,h[s]=g,r[g]=s;var m=t[s],y=t[m],p=t[y],S=257*t[g]^16843008*g;n[s]=S<<24|S>>>8,o[s]=S<<16|S>>>16,a[s]=S<<8|S>>>24,l[s]=S,S=16843009*p^65537*y^257*m^16843008*s,u[g]=S<<24|S>>>8,c[g]=S<<16|S>>>16,d[g]=S<<8|S>>>24,f[g]=S,s?(s=m^t[t[t[p^m]]],e^=t[t[e]]):s=e=1}}();var g=[0,1,2,4,8,16,32,64,128,27,54],m=e.AES=s.extend({LH:function(){if(!this.iU||this.sU!==this.XH){for(var t=this.sU=this.XH,i=t.words,s=t.sigBytes/4,e=4*((this.iU=s+6)+1),r=this.eU=[],n=0;n<e;n++)n<s?r[n]=i[n]:(l=r[n-1],n%s?s>6&&n%s==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]):(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=g[n/s|0]<<24),r[n]=r[n-s]^l);for(var o=this.hU=[],a=0;a<e;a++){if(n=e-a,a%4)var l=r[n];else l=r[n-4];o[a]=a<4||n<=4?l:u[h[l>>>24]]^c[h[l>>>16&255]]^d[h[l>>>8&255]]^f[h[255&l]]}}},encryptBlock:function(t,i){this.rU(t,i,this.eU,n,o,a,l,h)},decryptBlock:function(t,i){var s=t[i+1];t[i+1]=t[i+3],t[i+3]=s,this.rU(t,i,this.hU,u,c,d,f,r),s=t[i+1],t[i+1]=t[i+3],t[i+3]=s},rU:function(t,i,s,e,h,r,n,o){for(var a=this.iU,l=t[i]^s[0],u=t[i+1]^s[1],c=t[i+2]^s[2],d=t[i+3]^s[3],f=4,g=1;g<a;g++){var m=e[l>>>24]^h[u>>>16&255]^r[c>>>8&255]^n[255&d]^s[f++],y=e[u>>>24]^h[c>>>16&255]^r[d>>>8&255]^n[255&l]^s[f++],p=e[c>>>24]^h[d>>>16&255]^r[l>>>8&255]^n[255&u]^s[f++],S=e[d>>>24]^h[l>>>16&255]^r[u>>>8&255]^n[255&c]^s[f++];l=m,u=y,c=p,d=S}m=(o[l>>>24]<<24|o[u>>>16&255]<<16|o[c>>>8&255]<<8|o[255&d])^s[f++],y=(o[u>>>24]<<24|o[c>>>16&255]<<16|o[d>>>8&255]<<8|o[255&l])^s[f++],p=(o[c>>>24]<<24|o[d>>>16&255]<<16|o[l>>>8&255]<<8|o[255&u])^s[f++],S=(o[d>>>24]<<24|o[l>>>16&255]<<16|o[u>>>8&255]<<8|o[255&c])^s[f++],t[i]=m,t[i+1]=y,t[i+2]=p,t[i+3]=S},keySize:8});i.AES=s.EH(m)}(),t.AES}(sp.exports),cp={exports:{}}.exports=function(t){return t.mode.CTR=(s=(i=t.lib.BlockCipherMode.extend()).Encryptor=i.extend({processBlock:function(t,i){var s=this.ZH,e=s.blockSize,h=this.KH,r=this.nU;h&&(r=this.nU=h.slice(0),this.KH=void 0);var n=r.slice(0);s.encryptBlock(n,0),r[e-1]=r[e-1]+1|0;for(var o=0;o<e;o++)t[i+o]^=n[o]}}),i.Decryptor=s,i),t.mode.CTR;var i,s}(sp.exports),dp={exports:{}}.exports=function(t){return function(){if("function"==typeof ArrayBuffer){var i=t.lib.WordArray,s=i.init,e=i.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var i=t.byteLength,e=[],h=0;h<i;h++)e[h>>>2]|=t[h]<<24-h%4*8;s.call(this,e,i)}else s.apply(this,arguments)};e.prototype=i}}(),t.lib.WordArray}(sp.exports),fp={exports:{}}.exports=function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding}(sp.exports);const gp={"-4":["MDQxMmQ1MWU5MjFhYTMzODUwMWE4ZGYzN2ViZTE4NTU3ZDViYmRlZDg1Yzk0OGI3YTJkMDBmZTNhZGVlMjdjY2VmNzBiMWVlOWI3MDZjMTIwYTAzZDZlZTNkNmYyOTc5Y2E2NGEzN2Y3YjY4N2E1ZjljZWY2ODYxN2I1NWU5ZmJjMA=="],"-3":["MjAxODAxMjA="],"-2":["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2Vzc2lvbg=="],"-1":["WE1MSHR0cFJlcXVlc3Q=","ZG9jdW1lbnQ=","ZGVmYXVsdFZpZXc=","YQ==","Yg==","bGljZW5zZV9leHBpcmF0aW9uX2RhdGU=","bG9jYXRpb24=","aG9zdG5hbWU=","dGVzdF9kb21haW4=","ZG9tYWlucw==","Y3J5cHRv","U2lnbmF0dXJl","RUNEU0E=","U0hBMjI0d2l0aEVDRFNB","YWxn","Y3VydmU=","c2VjcDI1Nmsx","YWRkRXZlbnRMaXN0ZW5lcg==","cmVtb3ZlRXZlbnRMaXN0ZW5lcg==","bG9hZGVuZA==","ZXJyb3I=","YWJvcnQ=","dGltZW91dA==","cmVzcG9uc2VUZXh0","Q29udGVudC1UeXBl","YXBwbGljYXRpb24vanNvbg==","TWVzc2FnZURpZ2VzdA==","c2hhMjU2","Y3J5cHRvanM=","dXBkYXRlU3RyaW5n","ZGlnZXN0","Y29tcGFueQ==","YXBwVGl0bGU=","bGNqcy1zZXNzaW9u","bG9jYWxTdG9yYWdl","Z2V0SXRlbQ==","c2V0SXRlbQ==","ZA==","dA==","bGNqcy1zZXNzaW9uLTI="],0:["TGljZW5zZQ==","IA==","a2V5","aGFz","ZXhwaXJlZA==","Lg==","dmVyc2lvbg==","aXM=","dG9v","bmV3","b2xk","b3I=","aW52YWxpZA==","MDAwMQ==","SW52YWxpZA==","bnVtYmVy","b2Y=","ZG9tYWlucw==","ZGVwbG95bWVudA==","aW4=","ZG9tYWlu","RGVwbG95bWVudA==","ZG9tYWlu","dmFsaWRhdGlvbg==","ZmFpbGVk","Og==","UE9TVA==","c2VydmVy","cmVzcG9uZGVk","d2l0aA==","dW5leHBlY3RlZA==","dmFsdWU=","cmVxdWVzdA==","VEVTVA==","REVQTE9ZTUVOVA==","S2V5","VGFtcGVyaW5n","YmVlbg==","ZGV0ZWN0ZWQ=","TWlzc2luZw==","TGljZW5zZQ==","aW5mb3JtYXRpb24=","ZG9lcw==","bm90","aW5jbHVkZQ==","cGVybWlzc2lvbg==","dG8=","dXNl","Q2hhcnQ=","M0Q=","WFk=","RGF0YUdyaWQ=","TWFw","UG9sYXI=","RnVubmVs","R2F1Z2U=","UGll","UHlyYW1pZA==","U3BpZGVy","Zm9y","dGhpcw=="]},mp=kt,yp=(...t)=>t.slice(1).reduce(((i,s)=>i+mp.atob(gp[t[0]][s].toString())),"");let pp,Sp,bp=!1,vp=new Uint8Array([34]);class xp{set e(t){pp=t}get e(){Sp={kn:!1,Cn:!1,Tn:!1,Fn:!1,In:!1,Pn:!1};const t=vp.length>=1?vp[0]:void 0;return void 0!==t&&(Sp.kn=!!(1&t),Sp.Cn=!!(2&t),Sp.Tn=!!(4&t),Sp.Fn=!!(8&t),Sp.In=!!(16&t),Sp.Pn=!!(32&t)),Sp.Pn}}let Mp=!1;const _p=(t,i)=>{const s=new RegExp(`.{${i}}`,"g");return(t.match(s)||[]).map((t=>parseInt(t,16)))},Ap=t=>{if(4===t.byteLength)return`${t[0].toString().padStart(2,"0")}${t[1].toString().padStart(2,"0")}${t[2].toString().padStart(2,"0")}${t[3].toString().padStart(2,"0")}`},wp=t=>t.getFullYear().toString()+(t.getMonth()+1).toString().padStart(2,"0")+t.getDate().toString().padStart(2,"0"),kp=t=>{const i={},s=t.split("-");if(3!==s.length)throw new Error(yp(0,0,1,7,1,12,5));let e=0;const h=Uint8Array.from(atob(s[1]),(t=>t.charCodeAt(0)));e+=1;const r=h.subarray(e,e+=20),n=new DataView(h.buffer).getUint16(e,!0);e+=2;const o=Uint8Array.from(Array(n));for(let t=0;t<n;t+=1)o[t]=h[t+e]^r[t%r.byteLength];const a=new DataView(o.buffer);i.oU=o,e=0;const l=Uint8Array.from(Array(a.getUint16(e,!0)));e+=2,l.set(o.subarray(e,e+=l.byteLength)),vp=new Uint8Array(l);const u=Ap(o.subarray(e,e+=4)),c=yp(-3,0);if(!u)throw new Error(yp(0,0,1,7,1,12,5));if(u<c)throw new Error(yp(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5));if(8&l[0]){const t=Ap(o.subarray(e,e+=4)),i=wp(new Date);if(!t)throw new Error(yp(0,0,1,7,1,12,5));if(t<i)throw new Error(yp(0,0,1,2,1,3,1,4,5))}i.aU=e;const d=`${s[0]}-${s[1]}`,f=Array.prototype.reduce.call(atob(s[2]),((t,i)=>t+`0${i.charCodeAt(0).toString(16)}`.slice(-2)),"");return Fp(d,f)?i:null},Cp=t=>{const i=t.slice(0,4);let s=t.slice(5);switch(i){case"0001":{s=s.replace(/-/g,"");const t=Uint8Array.from(_p(s,2)),i=t.slice(36,40),e=new Uint8Array(4),h=(t=>{let i;const s=[];for(let t=0;t<256;t+=1){i=t;for(let t=0;t<8;t+=1)i=1&i?3988292384^i>>>1:i>>>1;s[t]=i}let e=-1;for(let i=0;i<t.length;i+=1)e=e>>>8^s[255&(e^t[i])];return(-1^e)>>>0})(t.slice(0,36));new DataView(e.buffer).setUint32(0,h,!0);const r=t.slice(28,34);let n=0;for(let t=r.length-1;t>0;t-=1)n+=r[t]*2**(8*t);const o=new Date(n);if(wp(o)<yp(-3,0))throw new Error(yp(0,0,1,2,1,3,1,4,5));if(i.every(((t,i)=>e[i]===t)))return;break}case"0002":if(!kp(t))throw new Error(yp(0,0,1,7,1,12,5));return;default:throw new Error(yp(0,0,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5))}throw new Error(yp(0,0,1,2,1,7,1,12,5))},Tp=t=>{if(!t)throw new Error(yp(0,14,1,15,1,16,1,17,1,19,1,18,1,2,5));const i=(t[yp(-1,9)]||t[yp(-1,37)]).map((t=>(t||"").trim()));if(i.indexOf(mp[yp(-1,6)][yp(-1,7)])>-1)return!0;const s=i.filter((t=>t.indexOf("*")>-1));if(Op(mp[yp(-1,6)][yp(-1,7)],s))return!0;const e=t[yp(-1,8)]||t[yp(-1,38)];if(""!==e&&null!=e){if(Op(mp[yp(-1,6)][yp(-1,7)],[e]))return!1;if(e===mp[yp(-1,6)][yp(-1,7)])return!1}throw new Error(yp(0,14,1,20,5))},Fp=(t,i)=>{const s=new tp("secp256k1").keyFromPublic(yp(-4,0),"hex"),e=hp(t).toString();return s.verify(e,i)},Ip=t=>{switch(t.slice(0,4)){case"0001":return(t=>{let i,s="";try{const i=t.split("-"),e=i[1],h=i[2],r=i[3];if(!Fp(h,r))throw new Error(yp(0,21,1,2,1,7,1,12,5));const n=rp.parse(h);s=up.decrypt({ciphertext:rp.parse(e)},n,{mode:cp,padding:fp,iv:rp.parse("00000000000000000000000000000001")}).toString(np)}catch(t){throw new Error(yp(0,21,1,2,1,7,1,12,5))}try{i=JSON.parse(s)}catch(t){throw new Error(yp(0,21,1,2,1,7,1,12,5))}if(void 0===i[yp(-1,5)]||null===i[yp(-1,4)]||!i[yp(-1,9)])throw new Error(yp(0,21,1,2,1,7,1,12,5));const e=parseInt(yp(-3,0),10)||Number(parseInt(yp(-3,0),10));if(i[yp(-1,5)]<e)throw new Error(yp(0,21,1,2,1,3,1,4,5));let h=!1;try{h=Tp(i)}catch(t){throw new Error(yp(0,14,1,22,5))}return h})(t);case"0002":return(t=>{const i=kp(t);if(!i)throw new Error(yp(0,0,1,7,1,12,5));let s,e="";try{const t=i.oU.slice(i.aU,i.aU+16),s=new DataView(t.buffer),h=new Int32Array(4);for(let t=0;t<h.length;t+=1)h[t]=s.getInt32(4*t,!1);const r=dp.create(Array.from(h)),n=i.aU+16,o=i.oU.slice(n,i.oU.length),a=new DataView(o.buffer),l=new Int32Array(Math.floor(o.byteLength/4));for(let t=0;t<l.length;t+=1)l[t]=a.getInt32(4*t,!1);const u=dp.create(Array.from(l)),c=up.decrypt({ciphertext:u},r,{mode:cp,padding:fp,iv:rp.parse("00000000000000000000000000000001")});e=mp.atob(c.toString(np))}catch(t){throw new Error(yp(0,21,1,2,1,7,1,12,5))}try{s=JSON.parse(e)}catch(t){throw new Error(yp(0,21,1,2,1,7,1,12,5))}if(!s[yp(-1,37)])throw new Error(yp(0,21,1,2,1,7,1,12,5));let h=!1;try{h=Tp(s)}catch(t){throw new Error(yp(0,14,1,22,5))}return h})(t);default:throw new Error(yp(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5))}},Pp=(t,i)=>{switch(t.slice(0,4)){case"0001":((t,i)=>{if(!i)throw new Error(yp(0,39,1,40,1,41,5));const s=t.split("-"),e=s[1].slice(1),h=s[2],r=s[3];if(!Fp(`${e}-${h}`,r))throw new Error(yp(0,21,1,2,1,7,1,12,5));const n=Uint8Array.from(_p(h,2));let o=0;for(let t=n.length-1;t>0;t-=1)o+=n[t]*2**(8*t);if(o<(parseInt(yp(-3,0),10)||Number(parseInt(yp(-3,0),10))))throw new Error(yp(0,21,1,2,1,3,1,4,5));const a=Int32Array.from(_p(e,8)),l=ep(i[yp(-1,31)]).toString(rp),u=Int32Array.from(_p(l,8)),c=ep(i[yp(-1,32)]).toString(rp),d=Int32Array.from(_p(c,8)),f=new Int32Array(u.length);for(let t=0;t<f.length;t+=1)f[t]=u[t]^d[t];if(!a.every(((t,i)=>f[i]===t)))throw new Error(yp(0,21,1,2,1,7,1,12,5))})(t,i);break;case"0002":((t,i)=>{if(!i)throw new Error(yp(0,39,1,40,1,41,5));const s=kp(t);if(!s)throw new Error(yp(0,0,1,7,1,12,5));const e=s.oU.slice(s.aU,s.oU.length),h=new DataView(e.buffer),r=new Int32Array(8);for(let t=0;t<r.length;t+=1)r[t]=h.getInt32(4*t,!1);const n=ep(i[yp(-1,31)]).toString(rp),o=Int32Array.from(_p(n,8)),a=ep(i[yp(-1,32)]).toString(rp),l=Int32Array.from(_p(a,8)),u=new Int32Array(o.length);for(let t=0;t<u.length;t+=1)u[t]=o[t]^l[t];if(!r.every(((t,i)=>u[i]===t)))throw new Error(yp(0,21,1,2,1,7,1,12,5))})(t,i);break;default:throw new Error(yp(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5))}},Dp=(t,i,s=!0)=>{let e;Mp=!1,i instanceof Fh?(e=i.Fr,i.N()):"container"in i&&(e="string"==typeof i.container?kt.document.getElementById(i.container):i.container);const h=!!e&&(e===kt.document.body||kt.document.body.contains(e)),r=e&&h?e:document.body,n=kt.document.createElement("div");n.id="lcjs-error",r.append(n),n.style.width="100%",n.style.height="100%",n.style.backgroundColor="black",n.style.boxSizing="border-box",n.style.padding="20px",n.style.font="Arial",n.style.fontSize="20px";let o=(t||"LICENSE_ERROR").toLowerCase().split("_").join(" ");o=(s?yp(0,0,1,2,1,23,1,24,25,1):"")+o.charAt(0).toUpperCase()+o.substr(1);const a=kt.document.createElement("p1");n.append(a),a.innerHTML=o,a.style.color="red"},Bp=(t,i,s)=>{i?(t[yp(-1,17)](yp(-1,19),s),t[yp(-1,17)](yp(-1,20),s),t[yp(-1,17)](yp(-1,21),s),t[yp(-1,17)](yp(-1,22),s)):(t[yp(-1,18)](yp(-1,19),s),t[yp(-1,18)](yp(-1,20),s),t[yp(-1,18)](yp(-1,21),s),t[yp(-1,18)](yp(-1,22),s))},Op=(t,i)=>{const s=t.split(".").reverse();return i.some((t=>{const i=t.split(".").reverse();let e=!1;const h=i.findIndex((t=>"*"===t)),r=s.every(((t,s)=>{if(!e){if(!(s<i.length))return!1;if(e="*"===i[s]&&s+1>2,!e&&t!==i[s])return!1}return!0}));return!(h>s.length-1||!r)}))},Lp=t=>{const i=()=>{};let s,e,h;if(new kt.Image instanceof kt.HTMLImageElement){const t=new kt.Image;t.src=cg,e=new Kn({source:t,fitMode:Xn.Stretch});const i=new kt.Image;i.src=ug,h=new Kn({source:i,fitMode:Xn.Stretch})}else if(kt.lcjs_setup){const t=new kt.Image;t.src=cg;const i=kt.lcjs_setup(t.naturalWidth,t.naturalHeight);i.getContext("2d").drawImage(t,0,0),e=new Kn({source:i,fitMode:Xn.Stretch}),h=e}else e=new N({color:x("#f00")}),h=e;const r=i=>{if(i.rd&&(i.lU&&(h?i.rd.Ae(h):kt.requestAnimationFrame((()=>r(i)))),i.lU||(e?i.rd.Ae(e):kt.requestAnimationFrame((()=>r(i))))),i.rd){const t=(i.lU,150),s=(i.lU,32),e=i.ut.ti({x:i.ut.x.getInnerEnd(),y:i.ut.y.getInnerStart()},{x:-(3+t),y:3}),h=i.ut.ti({x:i.ut.x.getInnerEnd(),y:i.ut.y.getInnerStart()},{x:-3,y:3+s}),r={x:h.x-e.x,y:h.y-e.y};i.rd.Ce(e).K(r)}!1===i.lU&&(6530!==cg.length&&Dp(yp(0,36,1,38,5),t,!1),"W"!==cg[3361]&&Dp(yp(0,36,1,38,5),t,!1)),!0===i.lU&&(8542!==ug.length&&Dp(yp(0,36,1,38,5),t,!1),"2"!==ug[571]&&Dp(yp(0,36,1,38,5),t,!1)),s&&s.vs()};return s=t.hF("logo",Number.MAX_SAFE_INTEGER),h=>{const n={ut:h,lU:!1};let o,a;return n.uU=()=>{o=kt.setTimeout((()=>{a=t.Ir(Ie.Point),void 0!==n.rd&&(n.rd.setMouseClickEventHandler(Rp),n.rd.setTouchEndEventHandler(Rp)),n.lU=!0,r(n)}),3e3)},n.cU=()=>{kt.clearTimeout(o),t.Pr(a),void 0!==n.rd&&(n.rd.setMouseClickEventHandler(i),n.rd.setTouchEndEventHandler(i)),n.lU=!1,r(n)},(t=>{t.rd&&t.rd.dispose(),s&&(t.rd=s.we(t.ut).Ae(e).setMouseInteractions(!0).setMouseClickEventHandler(i).setTouchEndEventHandler(i)._e(rt),t.uU&&t.rd.setMouseEnterEventHandler(t.uU),t.cU&&t.rd.setMouseLeaveEventHandler(t.cU),r(t))})(n),{Is:()=>r(n),N:()=>(t=>{t.rd&&(t.rd.dispose(),t.rd=void 0,t.uU=()=>{},t.cU=()=>{})})(n)}}},Rp=()=>kt.open("https://lightningchart.com/lightningchart-js/"),Ep={Angola:{name:"Angola",ISO_A3:"AGO"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Gabon:{name:"Gabon",ISO_A3:"GAB"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Namibia:{name:"Namibia",ISO_A3:"NAM"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Oman:{name:"Oman",ISO_A3:"OMN"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},Somalia:{name:"Somalia",ISO_A3:"SOM"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"}},zp={Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Armenia:{name:"Armenia",ISO_A3:"ARM"},Australia:{name:"Australia",ISO_A3:"AUS"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},China:{name:"China",ISO_A3:"CHN"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},India:{name:"India",ISO_A3:"IND"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Nepal:{name:"Nepal",ISO_A3:"NPL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Philippines:{name:"Philippines",ISO_A3:"PHL"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Palestine:{name:"Palestine",ISO_A3:"PSE"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Russia:{name:"Russia",ISO_A3:"RUS"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Singapore:{name:"Singapore",ISO_A3:"SGP"},Syria:{name:"Syria",ISO_A3:"SYR"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Yemen:{name:"Yemen",ISO_A3:"YEM"}},Vp={"New South Wales":{name:"New South Wales"},Victoria:{name:"Victoria"},Queensland:{name:"Queensland"},"South Australia":{name:"South Australia"},"Western Australia":{name:"Western Australia"},Tasmania:{name:"Tasmania"},"Northern Territory":{name:"Northern Territory"},"Australian Capital Territory":{name:"Australian Capital Territory"},"Other Territories":{name:"Other Territories"}},Np={"British Columbia":{name:"British Columbia"},Quebec:{name:"Quebec"},Nunavut:{name:"Nunavut"},"Prince Edward Island":{name:"Prince Edward Island"},Saskatchewan:{name:"Saskatchewan"},Yukon:{name:"Yukon"},Manitoba:{name:"Manitoba"},Ontario:{name:"Ontario"},"New Brunswick":{name:"New Brunswick"},"Northwest Territories":{name:"Northwest Territories"},Alberta:{name:"Alberta"},"Newfoundland and Labrador":{name:"Newfoundland and Labrador"},"Nova Scotia":{name:"Nova Scotia"}},Gp={Albania:{name:"Albania",ISO_A3:"ALB"},Austria:{name:"Austria",ISO_A3:"AUT"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Denmark:{name:"Denmark",ISO_A3:"DNK"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Finland:{name:"Finland",ISO_A3:"FIN"},France:{name:"France",ISO_A3:"FRA"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Greece:{name:"Greece",ISO_A3:"GRC"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Italy:{name:"Italy",ISO_A3:"ITA"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Malta:{name:"Malta",ISO_A3:"MLT"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Poland:{name:"Poland",ISO_A3:"POL"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Romania:{name:"Romania",ISO_A3:"ROU"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Russia:{name:"Russia",ISO_A3:"RUS"},Turkey:{name:"Turkey",ISO_A3:"TUR"}},Wp={Aruba:{name:"Aruba",ISO_A3:"ABW"},Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},Angola:{name:"Angola",ISO_A3:"AGO"},Anguilla:{name:"Anguilla",ISO_A3:"AIA"},Albania:{name:"Albania",ISO_A3:"ALB"},Aland:{name:"Aland",ISO_A3:"ALA"},Andorra:{name:"Andorra",ISO_A3:"AND"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Argentina:{name:"Argentina",ISO_A3:"ARG"},Armenia:{name:"Armenia",ISO_A3:"ARM"},"American Samoa":{name:"American Samoa",ISO_A3:"ASM"},Antarctica:{name:"Antarctica",ISO_A3:"ATA"},"French Southern and Antarctic Lands":{name:"French Southern and Antarctic Lands",ISO_A3:"ATF"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},Australia:{name:"Australia",ISO_A3:"AUS"},Austria:{name:"Austria",ISO_A3:"AUT"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belize:{name:"Belize",ISO_A3:"BLZ"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},Canada:{name:"Canada",ISO_A3:"CAN"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Chile:{name:"Chile",ISO_A3:"CHL"},China:{name:"China",ISO_A3:"CHN"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Cyprus No Mans Area":{name:"Cyprus No Mans Area",ISO_A3:"-99"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},"Cook Islands":{name:"Cook Islands",ISO_A3:"COK"},Colombia:{name:"Colombia",ISO_A3:"COL"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Curaçao":{name:"Curaçao",ISO_A3:"CUW"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},"Northern Cyprus":{name:"Northern Cyprus",ISO_A3:"-99"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Dominica:{name:"Dominica",ISO_A3:"DMA"},Denmark:{name:"Denmark",ISO_A3:"DNK"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},"Dhekelia Sovereign Base Area":{name:"Dhekelia Sovereign Base Area",ISO_A3:"-99"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Finland:{name:"Finland",ISO_A3:"FIN"},Fiji:{name:"Fiji",ISO_A3:"FJI"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},France:{name:"France",ISO_A3:"FRA"},"Faroe Islands":{name:"Faroe Islands",ISO_A3:"FRO"},"Federated States of Micronesia":{name:"Federated States of Micronesia",ISO_A3:"FSM"},Gabon:{name:"Gabon",ISO_A3:"GAB"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Guernsey:{name:"Guernsey",ISO_A3:"GGY"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Greece:{name:"Greece",ISO_A3:"GRC"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},Guam:{name:"Guam",ISO_A3:"GUM"},Guyana:{name:"Guyana",ISO_A3:"GUY"},"Hong Kong S.A.R.":{name:"Hong Kong S.A.R.",ISO_A3:"HKG"},"Heard Island and McDonald Islands":{name:"Heard Island and McDonald Islands",ISO_A3:"HMD"},Honduras:{name:"Honduras",ISO_A3:"HND"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},"Isle of Man":{name:"Isle of Man",ISO_A3:"IMN"},India:{name:"India",ISO_A3:"IND"},"Indian Ocean Territories":{name:"Indian Ocean Territories",ISO_A3:"-99"},"British Indian Ocean Territory":{name:"British Indian Ocean Territory",ISO_A3:"IOT"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Israel:{name:"Israel",ISO_A3:"ISR"},Italy:{name:"Italy",ISO_A3:"ITA"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},Jersey:{name:"Jersey",ISO_A3:"JEY"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},"Baykonur Cosmodrome":{name:"Baykonur Cosmodrome",ISO_A3:"-99"},"Siachen Glacier":{name:"Siachen Glacier",ISO_A3:"-99"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},Kiribati:{name:"Kiribati",ISO_A3:"KIR"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},Liechtenstein:{name:"Liechtenstein",ISO_A3:"LIE"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},"Macao S.A.R":{name:"Macao S.A.R",ISO_A3:"MAC"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Mexico:{name:"Mexico",ISO_A3:"MEX"},"Marshall Islands":{name:"Marshall Islands",ISO_A3:"MHL"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},"Northern Mariana Islands":{name:"Northern Mariana Islands",ISO_A3:"MNP"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Namibia:{name:"Namibia",ISO_A3:"NAM"},"New Caledonia":{name:"New Caledonia",ISO_A3:"NCL"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Niue:{name:"Niue",ISO_A3:"NIU"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Nepal:{name:"Nepal",ISO_A3:"NPL"},"New Zealand":{name:"New Zealand",ISO_A3:"NZL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Panama:{name:"Panama",ISO_A3:"PAN"},"Pitcairn Islands":{name:"Pitcairn Islands",ISO_A3:"PCN"},Peru:{name:"Peru",ISO_A3:"PER"},"Spratly Islands":{name:"Spratly Islands",ISO_A3:"-99"},Philippines:{name:"Philippines",ISO_A3:"PHL"},Palau:{name:"Palau",ISO_A3:"PLW"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},Poland:{name:"Poland",ISO_A3:"POL"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Palestine:{name:"Palestine",ISO_A3:"PSE"},"French Polynesia":{name:"French Polynesia",ISO_A3:"PYF"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Romania:{name:"Romania",ISO_A3:"ROU"},Russia:{name:"Russia",ISO_A3:"RUS"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},Singapore:{name:"Singapore",ISO_A3:"SGP"},"South Georgia and South Sandwich Islands":{name:"South Georgia and South Sandwich Islands",ISO_A3:"SGS"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Solomon Islands":{name:"Solomon Islands",ISO_A3:"SLB"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Somalia:{name:"Somalia",ISO_A3:"SOM"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},"Sao Tome and Principe":{name:"Sao Tome and Principe",ISO_A3:"STP"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},"East Timor":{name:"East Timor",ISO_A3:"TLS"},Tonga:{name:"Tonga",ISO_A3:"TON"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Tuvalu:{name:"Tuvalu",ISO_A3:"TUV"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},"United States Minor Outlying Islands":{name:"United States Minor Outlying Islands",ISO_A3:"UMI"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"US Naval Base Guantanamo Bay":{name:"US Naval Base Guantanamo Bay",ISO_A3:"-99"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Vanuatu:{name:"Vanuatu",ISO_A3:"VUT"},"Wallis and Futuna":{name:"Wallis and Futuna",ISO_A3:"WLF"},"Akrotiri Sovereign Base Area":{name:"Akrotiri Sovereign Base Area",ISO_A3:"-99"},Samoa:{name:"Samoa",ISO_A3:"WSM"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"}},Hp={Alabama:{name:"Alabama"},Alaska:{name:"Alaska"},Arizona:{name:"Arizona"},Arkansas:{name:"Arkansas"},California:{name:"California"},Colorado:{name:"Colorado"},Connecticut:{name:"Connecticut"},Delaware:{name:"Delaware"},"District of Columbia":{name:"District of Columbia"},Florida:{name:"Florida"},Georgia:{name:"Georgia"},Hawaii:{name:"Hawaii"},Idaho:{name:"Idaho"},Illinois:{name:"Illinois"},Indiana:{name:"Indiana"},Iowa:{name:"Iowa"},Kansas:{name:"Kansas"},Kentucky:{name:"Kentucky"},Louisiana:{name:"Louisiana"},Maine:{name:"Maine"},Maryland:{name:"Maryland"},Massachusetts:{name:"Massachusetts"},Michigan:{name:"Michigan"},Minnesota:{name:"Minnesota"},Mississippi:{name:"Mississippi"},Missouri:{name:"Missouri"},Montana:{name:"Montana"},Nebraska:{name:"Nebraska"},Nevada:{name:"Nevada"},"New Hampshire":{name:"New Hampshire"},"New Jersey":{name:"New Jersey"},"New Mexico":{name:"New Mexico"},"New York":{name:"New York"},"North Carolina":{name:"North Carolina"},"North Dakota":{name:"North Dakota"},Ohio:{name:"Ohio"},Oklahoma:{name:"Oklahoma"},Oregon:{name:"Oregon"},Pennsylvania:{name:"Pennsylvania"},"Rhode Island":{name:"Rhode Island"},"South Carolina":{name:"South Carolina"},"South Dakota":{name:"South Dakota"},Tennessee:{name:"Tennessee"},Texas:{name:"Texas"},Utah:{name:"Utah"},Vermont:{name:"Vermont"},Virginia:{name:"Virginia"},Washington:{name:"Washington"},"West Virginia":{name:"West Virginia"},Wisconsin:{name:"Wisconsin"},Wyoming:{name:"Wyoming"}},Up={Anguilla:{name:"Anguilla",ISO_A3:"AIA"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Canada:{name:"Canada",ISO_A3:"CAN"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},Dominica:{name:"Dominica",ISO_A3:"DMA"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Mexico:{name:"Mexico",ISO_A3:"MEX"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"}},$p={Argentina:{name:"Argentina",ISO_A3:"ARG"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Chile:{name:"Chile",ISO_A3:"CHL"},Colombia:{name:"Colombia",ISO_A3:"COL"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},Guyana:{name:"Guyana",ISO_A3:"GUY"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Panama:{name:"Panama",ISO_A3:"PAN"},Peru:{name:"Peru",ISO_A3:"PER"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Honduras:{name:"Honduras",ISO_A3:"HND"}},jp={World:Wp,USA:Hp,NorthAmerica:Up,SouthAmerica:$p,Canada:Np,Europe:Gp,Asia:zp,Africa:Ep,Australia:Vp},Yp={Solid:rc},Xp=(t,i)=>{const s=(t=>{const i=new N({color:t.uiStrokeColorContrastHigh}),s=new N({color:t.uiStrokeColorContrastMedium}),e=new N({color:t.uiStrokeColorContrastLow}),h=new oh({family:t.fontFamily,weight:"normal",style:"normal"}),r=h.setSize(18*t.fontScaler),n=h.setSize(16*t.fontScaler),o=h.setSize(14*t.fontScaler),a=h.setSize(10*t.fontScaler),l=h.withMutations((i=>i.set("size",14*t.fontScaler).set("weight","bold"))),u=h.setSize(13*t.fontScaler),c=new se({thickness:2,fillStyle:e}),d=new N({color:t.dataHighlightOverlayColor}),f=new se({thickness:2,fillStyle:t.legendBackgroundBorderFillStyle}),g=t.dataColorPalette.map((t=>new N({color:t.stroke}))),m=t=>g[t%g.length],y=g.map((t=>new se({thickness:2,fillStyle:t}))),p=t=>y[t%y.length],S=t.dataColorPalette.map((t=>new N({color:t.border}))).map((t=>new se({thickness:2,fillStyle:t}))),b=t=>S[t%S.length],x=t.dataColorPalette.map((t=>{const i=t.area;return new st({angle:180,stops:[{color:mi(i,v(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:mi(i,v(0,0,0,i.getA()),.3),offset:1}]})})),M=t=>x[t%x.length],_=t.dataColorPaletteInverted.map((t=>{const i=t.area;return new st({angle:180,stops:[{color:mi(i,v(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:mi(i,v(0,0,0,i.getA()),.3),offset:1}]})})),A=t=>_[t%_.length],w=t.dataColorPaletteInverted.map((t=>new N({color:t.border}))).map((t=>new se({thickness:2,fillStyle:t}))),k=t=>w[t%w.length],C=new N({color:t.dataColorPositive}),T=new N({color:t.dataColorNegative}),F=new se({thickness:1,fillStyle:new N({color:t.dataStrokeColorContrastHigh.setA(50)})}),I=new se({thickness:2,fillStyle:t.axisLineFillStyle}),P=rt,D=new N({color:v(0,0,0,1)}),B=new se({thickness:1,fillStyle:t.axisGridMajorFillStyle}),O=new se({thickness:1,fillStyle:t.axisTickMajorFillStyle}),L=o,E=t.axisLabelMajorFillStyle,z=new se({thickness:1,fillStyle:t.axisGridMajorFillStyle}),V=new se({thickness:1,fillStyle:t.axisTickMajorFillStyle}),G=o,W=t.axisLabelMajorFillStyle,H=new se({thickness:1,fillStyle:t.axisGridMinorFillStyle}),U=new se({thickness:1,fillStyle:t.axisTickMinorFillStyle}),$=a,j=t.axisLabelMinorFillStyle,Y=Mo,X=new vo({gridStrokeStyle:B,tickStyle:O,tickLength:50,tickPadding:-14,labelFont:L,labelPadding:0,labelFillStyle:E}),Z=new vo({gridStrokeStyle:z,tickStyle:V,tickLength:7,tickPadding:0,labelFont:G,labelPadding:0,labelFillStyle:W}),K=new vo({gridStrokeStyle:H,tickStyle:U,tickLength:4,tickPadding:5,labelFont:$,labelPadding:0,labelFillStyle:j}),q=new Uo({extremeTickStyle:Y,majorTickStyle:Z,minorTickStyle:K}),J=new Ro({greatTickStyle:X,majorTickStyle:Z,minorTickStyle:K}),Q=new Ko({majorTickStyle:Z,minorTickStyle:K}),tt=new N({color:t.dataHighlightOverlayColor}),it=new se({thickness:1,fillStyle:s}),et=new se({thickness:2,fillStyle:s}),ht=t=>new ph.Triangulated({shape:"sphere",size:10,fillStyle:g[t%g.length]}),nt=g[0],ot=t.uiTextFillStyle,at=t.legendBackgroundFillStyle,lt=new se({thickness:1,fillStyle:t.legendBackgroundBorderFillStyle}),ut=pi(t.legendButtonDefaultColor),ct=new se({thickness:1,fillStyle:i}),dt=new se({thickness:1,fillStyle:t.cursorGridFillStyle});let ft={isDark:t.isDark,effect:t.effect,effectsText:t.effectsText,effectsDashboardSplitters:t.effectsDashboardSplitters,lcjsBackgroundFillStyle:t.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:rt,highlightColorOffset:t.highlightColorOffset,highlightColorOffsetAxisOverlay:t.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new se({thickness:4,fillStyle:t.dashboardSplitterFillStyle}),chartXYBackgroundFillStyle:t.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:rt,chartXYTitleFont:r,chartXYTitleFillStyle:t.titleFillStyle,chartXYSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:c,chartXYZoomingRectangleFillStyle:d,chartXYZoomingRectangleStrokeStyle:f,chartXYFittingRectangleFillStyle:d,chartXYFittingRectangleStrokeStyle:f,lineSeriesStrokeStyle:p,pointLineSeriesStrokeStyle:p,pointLineSeriesFillStyle:m,pointSeriesFillStyle:m,ellipseSeriesFillStyle:m,ellipseSeriesStrokeStyle:p,polygonSeriesFillStyle:m,polygonSeriesStrokeStyle:p,rectangleSeriesFillStyle:m,rectangleSeriesStrokeStyle:rt,segmentSeriesStrokeStyle:p,boxSeriesBodyFillStyle:m(0),boxSeriesBodyStrokeStyle:rt,boxSeriesStrokeStyle:new se({thickness:1,fillStyle:g[0]}),boxSeriesMedianStrokeStyle:new se({thickness:1,fillStyle:new N({color:v(0,0,0)})}),ohlcCandleBodyFillStylePositive:C,ohlcCandleBodyFillStyleNegative:T,ohlcCandleBodyStrokeStylePositive:rt,ohlcCandleBodyStrokeStyleNegative:rt,ohlcCandleStrokeStyle:new se({thickness:1,fillStyle:new N({color:t.uiStrokeColorContrastHigh})}),ohlcBarStrokeStylePositive:new se({thickness:2,fillStyle:C}),ohlcBarStrokeStyleNegative:new se({thickness:2,fillStyle:T}),heatmapGridSeriesFillStyle:m,heatmapGridSeriesWireframeStyle:F,heatmapScrollingGridSeriesFillStyle:m,heatmapScrollingGridSeriesWireframeStyle:F,areaRangeSeriesFillStyle:M,areaRangeSeriesStrokeStyle:b,areaRangeSeriesFillStyleInverted:A,areaRangeSeriesStrokeStyleInverted:k,areaSeriesBipolarHighFillStyle:M,areaSeriesBipolarHighStrokeStyle:b,areaSeriesBipolarLowFillStyle:A,areaSeriesBipolarLowStrokeStyle:k,areaSeriesPositiveFillStyle:M,areaSeriesPositiveStrokeStyle:b,areaSeriesNegativeFillStyle:A,areaSeriesNegativeStrokeStyle:k,xAxisTitleFont:n,xAxisTitleFillStyle:t.axisTitleFillStyle,xAxisStrokeStyle:I,xAxisNibStyle:P,xAxisOverlayStyle:D,xAxisZoomingBandFillStyle:d,xAxisZoomingBandStrokeStyle:rt,xAxisNumericTicks:q,xAxisDateTimeTicks:J,xAxisTimeTicks:Q,yAxisTitleFont:n,yAxisTitleFillStyle:t.axisTitleFillStyle,yAxisStrokeStyle:I,yAxisNibStyle:P,yAxisOverlayStyle:D,yAxisZoomingBandFillStyle:d,yAxisZoomingBandStrokeStyle:rt,yAxisNumericTicks:q,yAxisDateTimeTicks:J,yAxisTimeTicks:Q,bandFillStyle:tt,bandStrokeStyle:it,constantLineStrokeStyle:et,barChartBackgroundFillStyle:t.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:rt,barChartTitleFont:r,barChartTitleFillStyle:t.titleFillStyle,barChartSeriesBackgroundFillStyle:R,barChartSeriesBackgroundStrokeStyle:rt,barChartBarFillStyle:m,barChartBarStrokeStyle:rt,barChartValueAxisTitleFont:n,barChartValueAxisTitleFillStyle:t.axisTitleFillStyle,barChartValueAxisStrokeStyle:I,barChartValueAxisTicks:q.setMajorTickStyle((t=>t.setGridStrokeStyle(rt))).setMinorTickStyle((t=>xo(t)?t.setGridStrokeStyle(rt):t)),barChartCategoryAxisTitleFont:n,barChartCategoryAxisTitleFillStyle:t.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:I,barChartCategoryLabels:{formatter:(t,i,s)=>i,labelFillStyle:q.majorTickStyle.labelFillStyle,labelFont:q.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,tickStyle:q.majorTickStyle.tickStyle,tickLength:0},barChartValueLabelsAfterBars:{position:"after-bar",formatter:(t,i,s)=>t.chart.valueAxis.formatValue(s),labelFillStyle:q.majorTickStyle.labelFillStyle,labelFont:q.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:(t,i,s)=>t.chart.valueAxis.formatValue(s),labelFillStyle:q.majorTickStyle.labelFillStyle,labelFont:q.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},chart3DBackgroundFillStyle:t.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:rt,chart3DTitleFont:r,chart3DTitleFillStyle:t.titleFillStyle,chart3DSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:c,chart3DBoundingBoxStrokeStyle:rt,xAxis3DTitleFont:n,xAxis3DTitleFillStyle:t.axisTitleFillStyle,xAxis3DStrokeStyle:I,xAxis3DNumericTicks:q,xAxis3DDateTimeTicks:J,xAxis3DTimeTicks:Q,yAxis3DTitleFont:n,yAxis3DTitleFillStyle:t.axisTitleFillStyle,yAxis3DStrokeStyle:I,yAxis3DNumericTicks:q,yAxis3DDateTimeTicks:J,yAxis3DTimeTicks:Q,zAxis3DTitleFont:n,zAxis3DTitleFillStyle:t.axisTitleFillStyle,zAxis3DStrokeStyle:I,zAxis3DNumericTicks:q,zAxis3DDateTimeTicks:J,zAxis3DTimeTicks:Q,lineSeries3DStrokeStyle:p,pointLineSeries3DStrokeStyle:p,pointLineSeries3DPointStyle:ht,pointSeries3DPointStyle:ht,pointCloudSeries3DPointStyle:t=>new ph.Pixelated({size:5,fillStyle:g[t%g.length]}),surfaceGridSeries3DFillStyle:m,surfaceGridSeries3DWireframeStyle:F,surfaceScrollingGridSeries3DFillStyle:m,surfaceScrollingGridSeries3DWireframeStyle:F,boxSeries3DFillStyle:m,polarChartBackgroundFillStyle:t.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:rt,polarChartTitleFont:r,polarChartTitleFillStyle:t.titleFillStyle,polarChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:c,polarSectorFillStyle:tt,polarSectorStrokeStyle:it,polarAmplitudeAxisTitleFont:n,polarAmplitudeAxisTitleFillStyle:t.axisTitleFillStyle,polarAmplitudeAxisStrokeStyle:I,polarAmplitudeAxisNumericTicks:q,polarAmplitudeAxisDateTimeTicks:J,polarAmplitudeAxisTimeTicks:Q,polarRadialAxisTitleFont:n,polarRadialAxisTitleFillStyle:t.axisTitleFillStyle,polarRadialAxisStrokeStyle:I,polarRadialAxisTickStyle:Z,polarLineSeriesStrokeStyle:p,polarPointLineSeriesFillStyle:m,polarPointLineSeriesStrokeStyle:p,polarPointSeriesFillStyle:m,polarPolygonSeriesFillStyle:M,polarPolygonSeriesStrokeStyle:b,polarAreaSeriesFillStyle:M,polarAreaSeriesStrokeStyle:b,polarHeatmapSeriesFillStyle:m,mapChartBackgroundFillStyle:t.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:rt,mapChartTitleFont:r,mapChartTitleFillStyle:t.titleFillStyle,mapChartFillStyle:nt,mapChartStrokeStyle:new se({thickness:1,fillStyle:new N({color:t.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:R,mapChartOutlierRegionStrokeStyle:new se({thickness:1,fillStyle:e}),mapChartSeparateRegionFillStyle:at,mapChartSeparateRegionStrokeStyle:lt,dataGridBackgroundFillStyle:t.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:rt,dataGridTitleFont:r,dataGridTitleFillStyle:t.titleFillStyle,dataGridTextFont:o,dataGridTextFillStyle:nt,dataGridCellBackgroundFillStyle:new N({color:t.uiBackgroundColor}),dataGridBorderStrokeStyle:new se({thickness:.4,fillStyle:new N({color:t.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:rt,dataGridScrollBarFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:lt,dataGridScrollBarButtonFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:lt,dataGridScrollBarButtonArrowFillStyle:ut,dataGridScrollBarButtonArrowStrokeStyle:lt,sparkLineChartStrokeStyle:p(0),sparkPointChartFillStyle:m(0),sparkBarChartFillStyle:m(0),sparkBarChartStrokeStyle:b(0),sparkAreaChartFillStyle:M(0),sparkAreaChartStrokeStyle:b(0),sparkPieChartFillStyle:m,sparkPieChartStrokeStyle:lt,sparkChartBandFillStyle:tt,sparkChartBandStrokeStyle:it,sparkChartConstantLineStrokeStyle:et,spiderChartBackgroundFillStyle:t.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:rt,spiderChartTitleFont:r,spiderChartTitleFillStyle:t.titleFillStyle,spiderChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:c,spiderChartWebStyle:new se({thickness:2,fillStyle:e}),spiderChartScaleLabelFillStyle:t.axisLabelMajorFillStyle,spiderChartScaleLabelFont:o,spiderChartAxisLabelFillStyle:t.axisTitleFillStyle,spiderChartAxisLabelFont:n,spiderChartAxisStrokeStyle:new se({thickness:2,fillStyle:s}),spiderChartAxisNibStrokeStyle:new se({thickness:2,fillStyle:i}),spiderSeriesFillStyle:M,spiderSeriesStrokeStyle:b,spiderSeriesPointFillStyle:m,pieChartBackgroundFillStyle:t.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:rt,pieChartTitleFont:r,pieChartTitleFillStyle:t.titleFillStyle,pieChartSliceFillStylePalette:m,pieChartSliceStrokeStyle:lt,pieChartSliceLabelFont:u,pieChartSliceLabelFillStyle:t.uiTextFillStyle,pieChartConnectorStrokeStyle:ct,funnelChartBackgroundFillStyle:t.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:rt,funnelChartTitleFont:r,funnelChartTitleFillStyle:t.titleFillStyle,funnelChartSliceFillStylePalette:m,funnelChartSliceStrokeStyle:lt,funnelChartSliceLabelFont:u,funnelChartSliceLabelFillStyle:t.uiTextFillStyle,funnelChartConnectorStrokeStyle:ct,pyramidChartBackgroundFillStyle:t.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:rt,pyramidChartTitleFont:r,pyramidChartTitleFillStyle:t.titleFillStyle,pyramidChartSliceFillStylePalette:m,pyramidChartSliceStrokeStyle:lt,pyramidChartSliceLabelFont:u,pyramidChartSliceLabelFillStyle:t.uiTextFillStyle,pyramidChartConnectorStrokeStyle:ct,gaugeChartBackgroundFillStyle:t.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:rt,gaugeChartTitleFont:r,gaugeChartTitleFillStyle:t.titleFillStyle,gaugeChartEmptyGaugeFillStyle:new N({color:t.uiBackgroundColor}),gaugeChartEmptyGaugeStrokeStyle:lt,gaugeChartGaugeFillStyle:nt,gaugeChartIntervalLabelsFillStyle:ot,gaugeChartIntervalLabelsFont:u,gaugeChartValueLabelFillStyle:ot,gaugeChartValueLabelFont:u,uiPanelBackgroundFillStyle:t.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:rt,onScreenMenuBackgroundColor:v(254,204,0,.7),uiButtonFillStyle:ut,uiButtonStrokeStyle:lt,uiButtonSize:10,uiBackgroundFillStyle:at,uiBackgroundStrokeStyle:lt,uiTextFillStyle:ot,uiTextFont:u,legendTitleFillStyle:ot,legendTitleFont:l,cursorTickMarkerXBackgroundFillStyle:at,cursorTickMarkerXBackgroundStrokeStyle:lt,cursorTickMarkerXTextFillStyle:ot,cursorTickMarkerXTextFont:u,cursorTickMarkerYBackgroundFillStyle:at,cursorTickMarkerYBackgroundStrokeStyle:lt,cursorTickMarkerYTextFillStyle:ot,cursorTickMarkerYTextFont:u,cursorPointMarkerFillStyle:R,cursorPointMarkerStrokeStyle:rt,cursorResultTableFillStyle:at,cursorResultTableStrokeStyle:lt,cursorResultTableTextFillStyle:ot,cursorResultTableTextFont:u,cursorGridStrokeStyleX:dt,cursorGridStrokeStyleY:dt,chartMarkerPointMarkerFillStyle:t.legendBackgroundBorderFillStyle,chartMarkerPointMarkerStrokeStyle:rt};return t.overrideThemeProperties&&(ft={...ft,...t.overrideThemeProperties}),ft})(t),e={...i,header1Font:s.xAxisTitleFont,header2Font:s.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:s.uiTextFont,mainDataColor:t.dataColorPalette[0].stroke};return{...s,examples:e}},Zp=(t,i)=>{const s=new Image;s.crossOrigin="*";const e=`${t}/themes/${i}`;return s.addEventListener("error",(i=>{Bi(t,e,"Theme with asset",{shouldCrash:!1})})),s.src=e,s},Kp=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:mi(i[e%i.length].stroke,v(255,255,255),.5);return new Q({stops:[{color:mi(h,v(255,255,255),.5*s).setA(100),offset:0},{color:h.setA(100),offset:.5},{color:mi(h,v(30,30,30),.5*s).setA(100),offset:1}]})},qp=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:mi(i[e%i.length].stroke,v(255,255,255),.2);return new Q({stops:[{color:mi(h,v(255,255,255),.2*s),offset:0},{color:h,offset:.5},{color:mi(h,v(0,0,0),.2*s),offset:1}]})},Jp=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:mi(i[e%i.length].stroke,v(255,255,255),.2);return new st({angle:90,stops:[{color:mi(h,v(255,255,255),.5*s),offset:0},{color:h,offset:.35},{color:mi(h,v(30,30,30),.5*s),offset:1}]})},Qp=(t,i,s)=>s=>{const e=!0===t?i[s%i.length].stroke:mi(i[s%i.length].stroke,v(255,255,255),.3);return new st({angle:90,stops:[{color:mi(e,v(255,255,255),.5),offset:0},{color:e,offset:.35},{color:mi(e,v(30,30,30),.5),offset:1}]})},tS=(t,i,s)=>{const e=i[0].stroke;return new Q({shape:K.ellipse,extent:q.farthestCorner,position:{x:.5,y:.5},stops:[{color:!0===t?e:mi(e,v(255,255,255),.5*s),offset:0},{color:e,offset:.5},{color:!0===t?e:mi(e,v(0,0,0),.5*s),offset:1}]})},iS=Pi((()=>{const t=v(255,255,255),i=new N({color:t}),s=!0,e=new no({spread:1,blur:9,offset:{x:0,y:0},color:v(0,0,0,150)}),h=new Q({position:{x:.8,y:.8},extent:q.farthestCorner,shape:K.ellipse,stops:[{offset:0,color:v(50,51,52)},{offset:.5,color:v(14,15,16)},{offset:1,color:v(0,0,0)}]}),r=new N({color:v(45,45,45)}),n=new Q({position:{x:.5,y:.5},extent:q.farthestCorner,shape:K.circle,stops:[{offset:0,color:v(120,120,120,100)},{offset:1,color:v(0,0,0,50)}]}),o=new Q({position:{x:.5,y:.5},extent:q.farthestCorner,shape:K.circle,stops:[{offset:0,color:v(30,30,30,200)},{offset:1,color:v(0,0,0,255)}]}),a=new N({color:v(255,255,220)}),l=new N({color:v(255,255,166)}),u=new N({color:v(255,255,220)}),c=new N({color:v(255,255,220,130)}),d=new N({color:v(255,255,200)}),f=d,g=f,m=new st({angle:45,stops:[{offset:0,color:v(230,230,230)},{offset:1,color:v(150,150,150)}]}),y=new N({color:v(220,220,220)}),p=new N({color:v(200,200,200,50)}),S=new N({color:v(200,200,200,150)}),b=new N({color:v(200,200,200,20)}),x=new N({color:v(150,150,150)}),M=new st({angle:0,stops:[{offset:0,color:v(10,10,10,220)},{offset:1,color:v(30,30,30,220)}]}),_=i,A=v(255,255,200),w=M,k=_,C=v(20,20,20),T=v(0,0,0),F=t,I=v(150,150,150),P=v(50,50,50),D=v(50,50,50),B=v(100,100,100),O=v(200,200,200),L=[v(255,255,91,255),v(255,205,91,255),v(255,155,91,255),v(255,196,188,255),v(255,148,184,255),v(219,148,198,255),v(235,196,224,255),v(169,148,198,255),v(148,226,198,255),v(148,255,176,255),v(180,255,165,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),R=t.setA(20),E=v(176,255,157,255),z=v(255,112,76,255),V={mapChartFillStyle:new st({angle:135,stops:[{color:v(255,255,91,255),offset:0},{color:v(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:Kp(s,L,.5),pieChartSliceFillStylePalette:qp(s,L,1),funnelChartSliceFillStylePalette:Jp(s,L,1),pyramidChartSliceFillStylePalette:Jp(s,L,1),rectangleSeriesFillStyle:Qp(s,L),gaugeChartGaugeFillStyle:tS(s,L,1),barChartBarFillStyle:Qp(s,L)},G=new N({color:v(176,255,157,255)}),W=new N({color:v(255,146,146,255)}),H=new N({color:v(176,255,157,255)}),U=new N({color:v(230,63,63,255)}),$=new N({color:v(176,255,157,120)}),j=new N({color:v(229,63,63,180)}),Y=new N({color:v(27,37,36,255)}),X=new N({color:v(62,27,27,255)}),Z=[v(255,0,0),v(255,255,0),v(0,255,0)],J=[v(10,10,255),v(10,190,255),v(251,255,0),v(255,38,0)],tt=[v(255,255,0),v(255,204,0),v(255,128,0),v(255,0,0)],it=[v(0,0,0),v(167,4,69,255),v(255,0,0),v(252,252,168,255)],et=new Q({stops:[{color:v(61,61,80,100),offset:0},{color:v(44,44,55,30),offset:1}]}),ht=new N({color:v(148,148,198,255)}),rt=$.getColor().setA(255),nt=v(100,100,100);return Xp({isDark:s,highlightColorOffset:v(60,60,60,60),highlightColorOffsetAxisOverlay:v(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:h,dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:c,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:g,axisLineFillStyle:m,axisTickMajorFillStyle:y,axisGridMajorFillStyle:p,axisTickMinorFillStyle:S,axisGridMinorFillStyle:b,cursorGridFillStyle:x,legendBackgroundFillStyle:M,legendBackgroundBorderFillStyle:_,legendButtonDefaultColor:A,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:k,uiBackgroundColor:C,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:D,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:O,dataColorPalette:L,dataColorPaletteInverted:[{area:v(190,50,50,100),border:v(210,80,80)}],dataHighlightOverlayColor:R,dataColorPositive:E,dataColorNegative:z,overrideThemeProperties:V},{positiveTextFillStyle:G,negativeTextFillStyle:W,positiveFillStyle:H,negativeFillStyle:U,positiveAreaFillStyle:$,negativeAreaFillStyle:j,positiveBackgroundFillStyle:Y,negativeBackgroundFillStyle:X,badGoodColorPalette:Z,coldHotColorPalette:J,intensityColorPalette:tt,spectrogramColorPalette:it,bollingerFillStyle:et,bollingerBorderFillStyle:ht,highlightPointColor:t,highlightDataGridColor:rt,unfocusedDataColor:nt})})),sS=Pi((()=>{const t=v(255,255,255),i=new N({color:t}),s=!0,e=new no({spread:0,blur:9,offset:{x:0,y:0},color:v(105,255,236,40)}),h=new N({color:v(2,21,30)}),r=new Q({stops:[{color:v(19,40,66,150),offset:0},{color:v(0,0,0,150),offset:1}]}),n=new N({color:v(0,5,8,150)}),o=i,a=i,l=i,u=new N({color:v(255,255,220,130)}),c=i,d=i,f=d,g=new N({color:v(20,224,250,255)}),m=i,y=new N({color:v(61,94,110,100)}),p=new N({color:v(61,94,110,255)}),S=new N({color:v(61,94,110,40)}),b=i,x=new N({color:v(0,18,23,255)}),M=i,_=t,A=new N({color:v(0,17,22,240)}),w=i,k=v(0,38,48,220),C=v(0,0,0),T=t,F=v(150,150,150),I=v(19,78,93),P=v(50,50,50),D=v(0,36,48),B=v(200,200,200),O=[v(45,253,253,255),v(44,172,247,255),v(46,100,248,255),v(96,84,199,255),v(184,104,245,255),v(98,160,218,255),v(43,238,245,255),v(38,140,206,255),v(112,96,224,255),v(206,157,255,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),L=t.setA(50),R=v(3,217,194,255),E=v(230,63,63,255),z={mapChartFillStyle:new st({angle:135,stops:[{color:v(118,248,231,255),offset:0},{color:v(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:Kp(s,O,1),pieChartSliceFillStylePalette:qp(s,O,1),funnelChartSliceFillStylePalette:Jp(s,O,1),pyramidChartSliceFillStylePalette:Jp(s,O,1),rectangleSeriesFillStyle:Qp(s,O),gaugeChartGaugeFillStyle:tS(s,O,1),barChartBarFillStyle:Qp(s,O)},V=new N({color:v(45,253,253,255)}),G=new N({color:v(255,146,146,255)}),W=new N({color:v(45,253,253,255)}),H=new N({color:v(230,63,63,255)}),U=new N({color:v(1,190,164,120)}),$=new N({color:v(229,63,63,180)}),j=new N({color:v(1,53,57,255)}),Y=new N({color:v(62,27,27,255)}),X=[v(1,104,119,255),v(0,165,144,255),v(0,246,214,255)],Z=[v(0,87,95,255),v(0,125,124,255),v(1,209,182,255),v(0,255,221,255),v(218,112,112,255),v(172,47,47,255)],K=[v(126,255,253,255),v(50,233,230,255),v(0,196,193,255),v(62,138,178,255),v(139,88,191,255),v(162,55,143,255)],q=[v(13,31,52,255),v(101,50,118,255),v(1,142,172,255),v(2,196,170,255),v(0,255,221,255)],J=new Q({stops:[{color:v(122,103,254,70),offset:0},{color:v(178,168,255,10),offset:1}]}),tt=new N({color:v(122,103,254,255)}),it=U.getColor().setA(255),et=v(15,83,83);return Xp({isDark:s,highlightColorOffset:v(60,60,60,60),highlightColorOffsetAxisOverlay:v(255,255,255,40),effect:e,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new Kn({source:Zp(t,"turquoiseHexagon.jpg"),fitMode:Xn.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:g,axisTickMajorFillStyle:m,axisGridMajorFillStyle:y,axisTickMinorFillStyle:p,axisGridMinorFillStyle:S,cursorGridFillStyle:b,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:_,resultTableBackgroundFillStyle:A,resultTableBackgroundBorderFillStyle:w,uiBackgroundColor:k,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:B,dataColorPalette:O,dataColorPaletteInverted:[{area:v(170,60,210,100),border:v(210,100,250)}],dataHighlightOverlayColor:L,dataColorPositive:R,dataColorNegative:E,overrideThemeProperties:z},{positiveTextFillStyle:V,negativeTextFillStyle:G,positiveFillStyle:W,negativeFillStyle:H,positiveAreaFillStyle:U,negativeAreaFillStyle:$,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:Y,badGoodColorPalette:X,coldHotColorPalette:Z,intensityColorPalette:K,spectrogramColorPalette:q,bollingerFillStyle:J,bollingerBorderFillStyle:tt,highlightPointColor:t,highlightDataGridColor:it,unfocusedDataColor:et})})),eS=Pi((()=>{const t=!1,i=new no({spread:0,blur:6,offset:{x:2,y:-2},color:v(0,0,0,30)}),s=new Q({position:{x:.8,y:.8},extent:q.farthestCorner,shape:K.ellipse,stops:[{offset:0,color:v(255,255,255)},{offset:1,color:v(255,255,255)}]}),e=new N({color:v(219,227,233,255)}),h=new Q({position:{x:.5,y:.5},extent:q.farthestCorner,shape:K.circle,stops:[{offset:0,color:v(255,255,255,200)},{offset:1,color:v(240,244,246,200)}]}),r=new Q({position:{x:.5,y:.5},extent:q.farthestCorner,shape:K.circle,stops:[{offset:0,color:v(255,255,255,255)},{offset:1,color:v(255,255,255,255)}]}),n=new N({color:v(33,43,49)}),o=new N({color:v(33,43,49)}),a=new N({color:v(33,43,49)}),l=new N({color:v(33,43,49,150)}),u=new N({color:v(33,43,49)}),c=u,d=c,f=new st({angle:45,stops:[{offset:0,color:v(225,225,225)},{offset:1,color:v(225,225,225)}]}),g=new N({color:v(168,186,199,255)}),m=new N({color:v(168,186,199,120)}),y=new N({color:v(168,186,199,40)}),p=new N({color:v(168,186,199,40)}),S=new N({color:v(128,146,159,255)}),b=new st({angle:0,stops:[{offset:0,color:v(255,255,255,240)},{offset:1,color:v(255,255,255,240)}]}),x=new N({color:v(168,186,199)}),M=v(255,255,200),_=new N({color:v(255,255,255,240)}),A=new N({color:v(128,146,159,255)}),w=v(255,255,255,255),k=v(168,168,199,255),C=v(168,186,199,255),T=v(168,186,199,255),F=v(168,186,199,255),I=v(168,186,199,255),P=v(100,100,100),D=v(200,200,200),B=[v(28,181,140,255),v(255,132,0,255),v(240,39,39,255),v(86,121,251,255),v(2,181,213,255),v(13,212,158,255),v(22,167,3,255),v(234,103,232,255),v(62,183,179,255),v(140,93,3,255),v(155,158,186,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),O=v(150,150,150,80),L=v(46,182,120,255),R=v(255,66,66,255),E=new se({thickness:2,fillStyle:new N({color:v(168,186,199,255)})}),z={mapChartFillStyle:new st({angle:-45,stops:[{color:v(2,181,213,255),offset:0},{color:v(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:Kp(t,B,.8),pieChartSliceFillStylePalette:qp(t,B,.8),funnelChartSliceFillStylePalette:Jp(t,B,.5),pyramidChartSliceFillStylePalette:Jp(t,B,.5),rectangleSeriesFillStyle:Qp(t,B),gaugeChartGaugeFillStyle:tS(t,B,.8),barChartBarFillStyle:Qp(t,B),chartXYSeriesBackgroundStrokeStyle:E,chart3DSeriesBackgroundStrokeStyle:E,polarChartSeriesBackgroundStrokeStyle:E,spiderChartSeriesBackgroundStrokeStyle:E,dataGridTextFillStyle:new N({color:v(0,88,64,255)})},V=new N({color:v(4,146,108,255)}),G=new N({color:v(240,39,39,255)}),W=new N({color:v(28,181,140,255)}),H=new N({color:v(230,88,88,255)}),U=new N({color:v(28,181,140,180)}),$=new N({color:v(230,88,88,180)}),j=new N({color:v(229,243,228)}),Y=new N({color:v(232,225,216)}),X=[v(193,48,48,255),v(240,234,60,255),v(45,191,55,255)],Z=[v(10,19,255,255),v(15,191,250,255),v(249,255,2,255),v(253,133,0,255),v(255,24,0,255)],J=[v(50,99,213),v(8,179,77),v(255,246,0),v(255,126,0),v(189,36,30)],tt=[v(16,64,176),v(8,179,77),v(255,246,0),v(255,126,0),v(168,6,0)],it=new N({color:v(185,198,207,255)}),et=new Q({stops:[{color:v(151,190,220,10),offset:0},{color:v(151,190,220,50),offset:1}]}),ht=U.getColor().setA(255),rt=v(150,150,150);return Xp({isDark:t,highlightColorOffset:v(-60,-60,-60,60),highlightColorOffsetAxisOverlay:v(0,0,0,40),effect:i,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:e,panelBackgroundFillStyle:h,seriesBackgroundFillStyle:r,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:n,axisTitleFillStyle:o,axisLabelMajorFillStyle:a,axisLabelMinorFillStyle:l,uiTitleFillStyle:u,uiTextFillStyle:c,cursorTextFillStyle:d,axisLineFillStyle:f,axisTickMajorFillStyle:g,axisGridMajorFillStyle:m,axisTickMinorFillStyle:y,axisGridMinorFillStyle:p,cursorGridFillStyle:S,legendBackgroundFillStyle:b,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:_,resultTableBackgroundBorderFillStyle:A,uiBackgroundColor:w,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:C,uiStrokeColorContrastMedium:T,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:I,dataStrokeColorContrastMedium:P,dataStrokeColorContrastLow:D,dataColorPalette:B,dataColorPaletteInverted:[{area:v(190,50,50,100),border:v(210,80,80)}],dataHighlightOverlayColor:O,dataColorPositive:L,dataColorNegative:R,overrideThemeProperties:z},{positiveTextFillStyle:V,negativeTextFillStyle:G,positiveFillStyle:W,negativeFillStyle:H,positiveAreaFillStyle:U,negativeAreaFillStyle:$,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:Y,badGoodColorPalette:X,coldHotColorPalette:Z,intensityColorPalette:J,spectrogramColorPalette:tt,bollingerFillStyle:et,bollingerBorderFillStyle:it,highlightPointColor:v(0,0,0),highlightDataGridColor:ht,unfocusedDataColor:rt})})),hS=Pi((()=>{const t=!1,i=new Q({position:{x:.8,y:.8},extent:q.farthestCorner,shape:K.ellipse,stops:[{offset:0,color:v(255,255,255)},{offset:1,color:v(255,255,255)}]}),s=new N({color:v(214,236,216,255)}),e=new Q({position:{x:.5,y:.5},extent:q.farthestCorner,shape:K.circle,stops:[{offset:0,color:v(233,244,231,70)},{offset:1,color:v(233,244,231,200)}]}),h=new Q({position:{x:.5,y:.5},extent:q.farthestCorner,shape:K.circle,stops:[{offset:0,color:v(255,255,255,255)},{offset:1,color:v(255,255,255,255)}]}),r=new N({color:v(1,61,53)}),n=new N({color:v(1,61,53)}),o=new N({color:v(1,61,53)}),a=new N({color:v(1,61,53,150)}),l=new N({color:v(1,61,53)}),u=l,c=u,d=new st({angle:45,stops:[{offset:0,color:v(225,225,225)},{offset:1,color:v(225,225,225)}]}),f=new N({color:v(188,211,186,255)}),g=new N({color:v(188,211,186,150)}),m=new N({color:v(188,211,186,50)}),y=new N({color:v(188,211,186,50)}),p=new N({color:v(104,148,111,255)}),S=new st({angle:0,stops:[{offset:0,color:v(255,255,255,240)},{offset:1,color:v(255,255,255,240)}]}),b=new N({color:v(104,148,111)}),x=v(255,255,200),M=new N({color:v(255,255,255,240)}),_=new N({color:v(104,148,111,255)}),A=v(255,255,255,255),w=v(179,201,183,255),k=v(188,211,186,255),C=v(188,211,186,255),T=v(188,211,186,255),F=v(188,211,186,255),I=v(100,100,100),P=v(200,200,200),D=[v(138,195,142,255),v(193,161,114,255),v(178,99,99,255),v(142,156,210,255),v(154,209,219,255),v(164,212,199,255),v(104,156,97,255),v(196,147,195,255),v(92,190,187,255),v(126,100,51,255),v(136,138,157,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),B=v(150,150,150,80),O=v(46,182,84,255),L=v(232,96,96,255),R=new se({thickness:2,fillStyle:new N({color:v(188,211,186,255)})}),E={mapChartFillStyle:new st({angle:-45,stops:[{color:v(118,160,121,255),offset:0},{color:v(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:Kp(t,D,.8),pieChartSliceFillStylePalette:qp(t,D,.8),pyramidChartSliceFillStylePalette:Jp(t,D,.5),funnelChartSliceFillStylePalette:Jp(t,D,.5),rectangleSeriesFillStyle:Qp(t,D),gaugeChartGaugeFillStyle:tS(t,D,.8),barChartBarFillStyle:Qp(t,D),chartXYSeriesBackgroundStrokeStyle:R,chart3DSeriesBackgroundStrokeStyle:R,polarChartSeriesBackgroundStrokeStyle:R,spiderChartSeriesBackgroundStrokeStyle:R,dataGridTextFillStyle:new N({color:v(77,66,21,255)})},z=new N({color:v(93,151,97,255)}),V=new N({color:v(178,99,99,255)}),G=new N({color:v(138,195,142,255)}),W=new N({color:v(178,99,99,255)}),H=new N({color:v(138,195,142,180)}),U=new N({color:v(178,99,99,180)}),$=new N({color:v(224,240,237)}),j=new N({color:v(251,227,227)}),Y=[v(178,99,99,255),v(215,224,111,255),v(80,186,88,255)],X=[v(62,64,142,255),v(66,131,77,255),v(250,250,135,255),v(202,161,78,255),v(179,53,53,255)],Z=[v(64,86,138),v(123,192,205),v(255,252,149),v(220,155,92),v(184,78,74)],J=[v(64,86,138),v(123,192,205),v(255,252,149),v(220,155,92),v(132,60,57)],tt=new N({color:v(185,198,207,255)}),it=new Q({stops:[{color:v(151,190,220,10),offset:0},{color:v(151,190,220,50),offset:1}]}),et=H.getColor().setA(255),ht=v(150,150,150);return Xp({isDark:t,highlightColorOffset:v(-60,-60,-60,60),highlightColorOffsetAxisOverlay:v(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:i,dashboardSplitterFillStyle:s,panelBackgroundFillStyle:e,seriesBackgroundFillStyle:h,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:r,axisTitleFillStyle:n,axisLabelMajorFillStyle:o,axisLabelMinorFillStyle:a,uiTitleFillStyle:l,uiTextFillStyle:u,cursorTextFillStyle:c,axisLineFillStyle:d,axisTickMajorFillStyle:f,axisGridMajorFillStyle:g,axisTickMinorFillStyle:m,axisGridMinorFillStyle:y,cursorGridFillStyle:p,legendBackgroundFillStyle:S,legendBackgroundBorderFillStyle:b,legendButtonDefaultColor:x,resultTableBackgroundFillStyle:M,resultTableBackgroundBorderFillStyle:_,uiBackgroundColor:A,uiBackgroundBorderColor:w,uiStrokeColorContrastHigh:k,uiStrokeColorContrastMedium:C,uiStrokeColorContrastLow:T,dataStrokeColorContrastHigh:F,dataStrokeColorContrastMedium:I,dataStrokeColorContrastLow:P,dataColorPalette:D,dataColorPaletteInverted:[{area:v(210,70,70,100),border:v(200,110,110)}],dataHighlightOverlayColor:B,dataColorPositive:O,dataColorNegative:L,overrideThemeProperties:E},{positiveTextFillStyle:z,negativeTextFillStyle:V,positiveFillStyle:G,negativeFillStyle:W,positiveAreaFillStyle:H,negativeAreaFillStyle:U,positiveBackgroundFillStyle:$,negativeBackgroundFillStyle:j,badGoodColorPalette:Y,coldHotColorPalette:X,intensityColorPalette:Z,spectrogramColorPalette:J,bollingerFillStyle:it,bollingerBorderFillStyle:tt,highlightPointColor:v(0,0,0),highlightDataGridColor:et,unfocusedDataColor:ht})})),rS=Pi((()=>{const t=v(255,255,255),i=new N({color:t}),s=!0,e=new no({spread:1,blur:9,offset:{x:0,y:0},color:v(255,255,255,30)}),h=new N({color:v(6,15,36)}),r=new Q({stops:[{color:v(46,13,87,50),offset:0},{color:v(0,0,0,150),offset:1}]}),n=new N({color:v(0,5,8,150)}),o=i,a=i,l=i,u=new N({color:v(255,255,220,130)}),c=i,d=i,f=d,g=new st({angle:45,stops:[{offset:0,color:v(241,133,255,255)},{offset:1,color:v(115,207,238,255)}]}),m=i,y=new N({color:v(61,94,110,100)}),p=new N({color:v(61,94,110,255)}),S=new N({color:v(61,94,110,40)}),b=i,x=new N({color:v(0,18,23,255)}),M=i,_=v(115,207,238,255),A=new N({color:v(0,17,22,240)}),w=i,k=v(0,38,48,255),C=v(0,0,0),T=t,F=v(150,150,150),I=v(19,57,93),P=v(50,50,50),D=v(0,17,48),B=v(200,200,200),O=[v(20,211,237,255),v(98,147,252,255),v(164,73,250,255),v(129,117,253,255),v(95,134,252,255),v(22,133,212,255),v(35,200,242,255),v(104,121,233,255),v(137,69,232,255),v(70,72,241,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),L=t.setA(50),R=v(3,217,194,255),E=v(243,21,110,255),z={mapChartFillStyle:new st({angle:135,stops:[{color:v(118,248,231,255),offset:0},{color:v(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:Kp(s,O,.5),pieChartSliceFillStylePalette:qp(s,O,2),funnelChartSliceFillStylePalette:Jp(s,O,1),pyramidChartSliceFillStylePalette:Jp(s,O,1),rectangleSeriesFillStyle:Qp(s,O),gaugeChartGaugeFillStyle:tS(s,O,1),barChartBarFillStyle:Qp(s,O)},V=new N({color:v(20,211,237,255)}),G=new N({color:v(253,145,178,255)}),W=new N({color:v(20,211,237,255)}),H=new N({color:v(239,68,121,255)}),U=new N({color:v(20,211,237,120)}),$=new N({color:v(239,68,121,180)}),j=new N({color:v(1,53,57,255)}),Y=new N({color:v(94,19,42,255)}),X=[v(174,51,132,255),v(204,107,218,255),v(189,215,253,255)],Z=[v(0,63,95,255),v(0,149,255,255),v(0,225,255,255),v(255,154,254,255),v(204,98,170,255),v(139,39,84,255)],K=[v(197,241,255,255),v(70,210,255,255),v(0,164,217,255),v(90,99,222,255),v(138,75,192,255),v(151,27,162,255)],q=[v(13,31,52,255),v(129,54,130,255),v(131,108,176,255),v(7,162,213,255),v(26,247,255,255)],J=new Q({stops:[{color:v(219,42,235,60),offset:0},{color:v(237,73,252,10),offset:1}]}),tt=new N({color:v(237,73,252,255)}),it=U.getColor().setA(255),et=v(8,70,100);return Xp({isDark:s,highlightColorOffset:v(60,60,60,60),highlightColorOffsetAxisOverlay:v(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new Kn({source:Zp(t,"cyberSpace.jpg"),fitMode:Xn.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:g,axisTickMajorFillStyle:m,axisGridMajorFillStyle:y,axisTickMinorFillStyle:p,axisGridMinorFillStyle:S,cursorGridFillStyle:b,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:_,resultTableBackgroundFillStyle:A,resultTableBackgroundBorderFillStyle:w,uiBackgroundColor:k,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:B,dataColorPalette:O,dataColorPaletteInverted:[{area:v(41,130,255,100),border:v(45,110,240)}],dataHighlightOverlayColor:L,dataColorPositive:R,dataColorNegative:E,overrideThemeProperties:z},{positiveTextFillStyle:V,negativeTextFillStyle:G,positiveFillStyle:W,negativeFillStyle:H,positiveAreaFillStyle:U,negativeAreaFillStyle:$,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:Y,badGoodColorPalette:X,coldHotColorPalette:Z,intensityColorPalette:K,spectrogramColorPalette:q,bollingerFillStyle:J,bollingerBorderFillStyle:tt,highlightPointColor:t,highlightDataGridColor:it,unfocusedDataColor:et})})),nS={};Object.defineProperty(nS,"darkGold",{get:iS,enumerable:!0}),Object.defineProperty(nS,"turquoiseHexagon",{get:sS,enumerable:!0}),Object.defineProperty(nS,"light",{get:eS,enumerable:!0}),Object.defineProperty(nS,"lightNature",{get:hS,enumerable:!0}),Object.defineProperty(nS,"cyberSpace",{get:rS,enumerable:!0});const oS=nS,aS=oS.darkGold,lS=(t,i,s)=>e=>{const h={theme:aS,...s,...e},r=t(h),n=i?Lp(r):void 0,o=new ag(r.wn,e,r,r.N.bind(r),n);return r.Xn((t=>o.mB(t))).Yn((()=>o.j())).vs(),o},uS=(t,i)=>{t.Xn((t=>{i.ke(t)})).Yn((()=>i.j())).vs()},cS=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||aS},r=t(h),n=i?Lp(r):void 0,o=new ha(r.wn,bf(r,1).nF(0),at,r.N.bind(r),n);return uS(r,o),o},dS=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||aS},r=t(h),n=i?Lp(r):void 0,o=new ff(r.wn,bf(r,1).nF(0),at,r.N.bind(r),n,e);return uS(r,o),o},fS=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||aS},r=t(h),n=i?Lp(r):void 0,o=new Ic(r.wn,bf(r,1).nF(0),at,r.N.bind(r),n,e);return uS(r,o),o},gS=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||aS},r=t(h),n=i?Lp(r):void 0,o=new zu(r.wn,bf(r,1).nF(0),at,r.N.bind(r),n,e);return uS(r,o),o},mS=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||aS},r=t(h),n=i?Lp(r):void 0,o=new(e&&e.type?e.type:Fa)(r.wn,bf(r,1).nF(0),at,r.N.bind(r),n,void 0,e&&e.disableAnimations);return uS(r,o),o},yS=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||aS},r=t(h),n=i?Lp(r):void 0,o=new(e&&e.type?e.type:rc)(r.wn,bf(r,1).nF(0),at,r.N.bind(r),n,void 0,e&&e.disableAnimations);return uS(r,o),o},pS=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||aS},r=t(h),n=i?Lp(r):void 0,o=new(e&&e.type?e.type:Xu)(r.wn,bf(r,1).nF(0),at,r.N.bind(r),n,void 0,e&&e.disableAnimations);return uS(r,o),o},SS=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||aS},r=t(h),n=i?Lp(r):void 0,o=new(e&&e.type?e.type:fc)(r.wn,bf(r,1).nF(0),at,r.N.bind(r),n,void 0,!(!e||!e.disableAnimations));return uS(r,o),o},bS=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||aS},r=t(h),n=i?Lp(r):void 0,o=new Nl(r.wn,bf(r,1).nF(0),at,r.N.bind(r),n,e,void 0);return uS(r,o),o},vS=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||aS},r=t(h),n=i?Lp(r):void 0,o=new nl(r.wn,bf(r,1).nF(0),at,r.N.bind(r),n,void 0,e);return uS(r,o),o},xS=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||aS},r=t(h),n=i?Lp(r):void 0,o=new Hf(r.wn,bf(r,1).nF(0),at,r.N.bind(r),n,void 0);return uS(r,o),o},MS=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||aS},r=t(h),n=i?Lp(r):void 0,o=new tg(r.wn,bf(r,1).nF(0),at,r.N.bind(r),n,void 0,e);return uS(r,o),o};let _S;const AS=(t,i)=>{const s="object"==typeof t?t.license:t,e="object"==typeof t?t.licenseInformation:i,h="object"==typeof t?t:void 0,r=new xp;return r.e=s||"",_S||(_S=(t=>{let i,s,e=!1,h=!1,r=!1,n=!1,o="";try{if(pp){const i=(t=>{if(!pp)return;const i=pp.split("-");if(i.length>0)switch(i[0]){case"0001":return"0001";case"0002":return"0002";default:return}})();if("0001"===i){vp=new Uint8Array([2]);const i=(t=>{if(!pp)return;const i=pp.split("-");return 4===i.length?i[1].startsWith("m")?2:1:0})();1===i?(r=!Ip(pp),e=!0):2===i?(Pp(pp,t),h=!0):(Mp=!0,Cp(pp),n=!0)}else{if("0002"!==i)throw new Error(yp(0,0,1,7,1,12,5));{const i=(t=>{if(!pp)return;const i=pp.split("-");return i.length>=2?Uint8Array.from(atob(i[1]),(t=>t.charCodeAt(0)))[0]:void 0})();if(104===i)Mp=!0,Cp(pp),n=!0;else if(189===i)r=!Ip(pp),e=!0;else{if(159!==i)throw new Error(yp(0,0,1,7,1,12,5));Pp(pp,t),h=!0}}}}else bp=!0}catch(t){t instanceof Error&&(i=t)}try{n&&(s=mp[yp(-1,34)][yp(-1,35)](yp(-1,39))||void 0)}catch(t){mp.console.error(t)}let a=!1;if(s){const t=s.split("-");if(2===t.length&&Fp(t[0],t[1])){const[i,s]=t[0].split(":").map((t=>Number(t)));Date.now()-s<.95*i*1e3&&(a=!0)}}const l=!(i||bp||e||h||a),u=(()=>{const t=new(mp[yp(-1,0)]);return t.open(yp(0,26),yp(-2,0)),t.setRequestHeader(yp(-1,24),yp(-1,25)),t.withCredentials=!0,t})();if(l){let t;try{t=parseInt(pp?pp.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch(i){t=Math.floor(1e6*Math.random())}const i=Math.floor(1e6*Math.random());o=(t^i).toString();const s={};let e="",h="",r="";pp=pp||"";const n=yp(-4,0);for(let t=0;t<pp.length;t+=1){const i=pp.charCodeAt(t)^n.charCodeAt(t);e+=String.fromCharCode(i)}const a=yp(-3,0);for(let t=0;t<a.length;t+=1)h+=String.fromCharCode(a.charCodeAt(t)^n.charCodeAt(t));for(let t=0;t<o.length;t+=1)r+=String.fromCharCode(o.charCodeAt(t)^n.charCodeAt(t));s[yp(-1,3)]=mp.btoa(e),s[yp(-1,4)]=mp.btoa(h),s.h=mp.btoa(r),s.v=3,s.s=mp[yp(-1,34)][yp(-1,35)](yp(-1,33))||void 0,u.send(JSON.stringify(s))}return t=>{if(i)throw Dp(i.message,t),i;const e={An:t=>{const i=`${yp(0,40,1,42,1,43,1,44,1,45,1,46,1,47,1)}${(t=>{switch(t){case 1:return yp(0,48,49);case 0:return yp(0,48,50);case 2:return yp(0,51);case 3:return yp(0,52,48);case 4:return yp(0,53,48);case 5:return yp(0,54,48);case 6:return yp(0,55,48);case 7:return yp(0,56,48);case 8:return yp(0,57,48);case 9:return yp(0,58,48)}return Fi(0,"")})(t)}`;throw Dp(i,h,!1),new Error(i)},...Sp},h=new Ly(t,e),n=t=>{if("error"===(null==t?void 0:t.type)&&s){const t=s.split("-");if(2===t.length&&Fp(t[0],t[1])){const[,i]=t[0].split(":").map((t=>Number(t)));if(i+9e5>Date.now())return Mp=!1,void Bp(u,!1,a)}}if(u.readyState===mp[yp(-1,0)].DONE){if(200!==u.status){let i="";try{i=t&&"loadend"!==t.type?yp(0,0,1,23,1,32,1,24,5):JSON.parse(u[yp(-1,23)]).message,Bp(u,!1,a)}catch(t){console.error(t)}throw Dp(i,h),new Error(yp(0,0,1,2,1,7,1,12,5)+i)}{const t=JSON.parse(u[yp(-1,23)]);if(!Fp(o+yp(-3,0),t.h)){const t=yp(0,0,1,27,1,28,1,29,1,30,1,31,5);throw Dp(t,h),new Error(t)}mp[yp(-1,34)][yp(-1,36)](yp(-1,39),t.t),mp[yp(-1,34)][yp(-1,36)](yp(-1,33),t.s),Mp=!1}}},a=t=>{n(t)};return Bp(u,!0,a),l?setTimeout((()=>{if(Mp){let t=!0;if(s){const i=s.split("-");if(2===i.length&&Fp(i[0],i[1])){const[,s]=i[0].split(":").map((t=>Number(t)));s+9e5>Date.now()&&(t=!1)}}t&&Dp(yp(0,25,1,23,1,32,1,24,5),h)}}),1e4):Bp(u,!1,a),r?(t=>{let i;Mp=!1;const s=t.$t(),e=()=>{i&&(t.rn(i.hn()),i=void 0),i=t.hF("deployment test"),i.vr(t.ut).Fh(yp(0,34,1,33)).Ce({x:s.x/2,y:s.y/2}).ra(50).Bh(13).Ae(new N({color:v(128,128,128,100)})).ea("Arial").oa(500).setMouseInteractions(!1),t.tn().sn()};t.co((()=>{e()})),setTimeout(e,0),setInterval((()=>{i&&i.hn()<t.Kn()-1?e():i||e()}),1e3)})(h):u.readyState===mp[yp(-1,0)].DONE&&n(),h}})(e)),((t,i,s)=>({Dashboard:lS(t,i,s),ChartXY:dS(t,i,s),Spider:fS(t,i,s),Polar:gS(t,i,s),Pie:mS(t,i,s),UIPanel:cS(t,i,s),Gauge:yS(t,i,s),Funnel:pS(t,i,s),Pyramid:SS(t,i,s),Chart3D:vS(t,i,s),Map:bS(t,i,s),DataGrid:xS(t,i,s),BarChart:MS(t,i,s)}))(_S,r.e,h)},wS={None:Vr,Rectangle:jr,Circle:Yr,Diamond:Xr,Pointer:Zr},kS={Rectangle:jr,Circle:Yr,Diamond:Xr},CS={XY:bu},TS={XY:Su,Spider:kl,BarChart:Cl,Map:Fl,Polar:kl},FS={None:Nr,UIRectangle:jr,UICircle:Yr,UIDiamond:Xr},IS=t=>({...t,effect:void 0});export{X as Animation,Y as AnimationEasings,Z as Animator,jd as AreaRangeSeries,Vd as AreaSeries,Hd as AreaSeriesBipolar,Nd as AreaSeriesMonopolar,Wd as AreaSeriesNegative,Gd as AreaSeriesPositive,Ud as AreaSeriesTypes,xl as AutoCursor2DBuilder,TS as AutoCursorBuilders,zl as AutoCursorModes,yu as AutoCursorXYBuilder,fl as AutoFitStrategies,ul as AutoFitStrategy,go as Axis,Ra as Axis3D,hf as AxisPosition,He as AxisScrollStrategies,Ue as AxisTickStrategies,Ge as Band,tg as BarChart,qf as BarChartBar,Zf as BarChartCategoryAxis,sg as BarChartSorting,ig as BarChartTypes,Kf as BarChartValueAxis,Du as BasicSeries,Wr as BorderedPicture,zc as BoxAndWhiskers,Ec as BoxFigure,Rd as BoxSeries,Ha as BoxSeries3D,gn as Button,na as Chart,nl as Chart3D,Xs as ChartComponent,Mu as ChartMarker,_u as ChartMarker2D,wu as ChartMarkerXY,Vl as ChartWithCursor,qa as ChartWithSeries,ff as ChartXY,df as ChartXYTitlePositionOptions,S as Color,_ as ColorCSS,x as ColorHEX,M as ColorHSV,Rn as ColorPalettes,v as ColorRGBA,Yn as ColorShadingStyles,We as ConstantLine,vl as CursorBuilder,mu as CursorBuilderXY,Fr as CustomTick,Lc as CustomizableFigure,ag as Dashboard,to as DashedLine,Hf as DataGrid,$f as DataGridCellContentAlignmentOptions,Ro as DateTimeTickStrategy,yd as EllipseFigure,pd as EllipseSeries,L as EmptyFill,Nr as EmptyPointMarker,zr as EmptyUIElement,Bc as Figure,Oc as FigureSeries,oh as FontSettings,Ls as FormattingFunctions,$u as FunnelChart,Ku as FunnelChartTypes,Zu as FunnelChartWithLabelsInsideSlices,Xu as FunnelChartWithLabelsOnSides,qu as FunnelLabelSide,Nu as FunnelSlice,Wu as FunnelSliceModes,Qu as GaugeChart,Yp as GaugeChartTypes,ic as GaugeSlice,sh as GenericAxis,no as GlowEffect,q as GradientExtent,K as GradientShape,Kd as HeatmapGridSeries,qd as HeatmapGridSeriesIntensityValues,Jd as HeatmapScrollingGridSeries,Qd as HeatmapScrollingGridSeriesIntensityValues,Ys as HighlightModes,Zs as Highlighter,eo as Icon,Kn as ImageFill,Xn as ImageFitMode,W as IndividualPointFill,D as LUT,Bn as LegendBoxBuilders,Ua as LineAndPointSeries3D,ld as LineSeries,$a as LineSeries3D,st as LinearGradientFill,gt as LinearGradientFillPalette,Nl as MapChart,jp as MapRegions,Ep as MapRegionsAfrica,zp as MapRegionsAsia,Vp as MapRegionsAustralia,Np as MapRegionsCanada,Gp as MapRegionsEurope,Up as MapRegionsNorthAmerica,$p as MapRegionsSouthAmerica,Hp as MapRegionsUSA,Wp as MapRegionsWorld,Pl as MapTypes,CS as MarkerBuilders,Ie as MouseStyles,Uo as NumericTickStrategy,Gc as OHLCBar,Nc as OHLCCandleStick,Vc as OHLCFigure,Wc as OHLCFigures,Pd as OHLCSeries,Dd as OHLCSeriesTraditional,Od as OHLCSeriesTypes,Bd as OHLCSeriesWithAutomaticPacking,Ne as OSMPosition,Xd as OnScreenMenu,ke as OnScreenMenuAnimationsButton,Se as OnScreenMenuButton,ne as OnScreenMenuButtonShape,re as OnScreenMenuButtonType,he as OnScreenMenuControlBase,Te as OnScreenMenuCustomButton,Fe as OnScreenMenuOsmToggleButton,be as OnScreenMenuToggleButton,ve as OnScreenMenuZoomInButton,xe as OnScreenMenuZoomInXButton,Me as OnScreenMenuZoomInYButton,_e as OnScreenMenuZoomOutButton,Ae as OnScreenMenuZoomOutXButton,we as OnScreenMenuZoomOutYButton,Ce as OnScreenMenuZoomToFitButton,$ as PalettedFill,sa as Panel,Un as PhongShadingStyle,Gr as Picture,Sa as PieChart,Pa as PieChartTypes,Ia as PieChartWithLabelsInsideSlices,Fa as PieChartWithLabelsOnSides,fa as PieSlice,mh as PixelatedPoints3D,Za as PointCloudSeries3D,Yc as PointLineSeries,ja as PointLineSeries3D,FS as PointMarkers,Yd as PointSeries,Xa as PointSeries3D,Ka as PointSeriesTypes3D,Oh as PointShape,ph as PointStyle3D,Lu as PolarAreaSeries,Ru as PolarAreaSeriesInterior,Hl as PolarAxis,$l as PolarAxisAmplitude,Ul as PolarAxisTick,zu as PolarChart,nu as PolarHeatmapSeries,au as PolarLineSeries,lu as PolarPointLineSeries,uu as PolarPointSeries,cu as PolarPolygon,Ou as PolarPolygonSeries,Jl as PolarSector,tu as PolarSeries,dd as PolygonFigure,fd as PolygonSeries,uc as PyramidChart,mc as PyramidChartTypes,gc as PyramidChartWithLabelsInsideSlices,fc as PyramidChartWithLabelsOnSides,yc as PyramidLabelSide,nc as PyramidSlice,Ju as PyramidSliceModes,tc as RadialGauge,Q as RadialGradientFill,ft as RadialGradientFillPalette,Ed as RangeSeries,ud as RectangleFigure,cd as RectangleSeries,gd as SegmentFigure,md as SegmentSeries,Ql as Series2D,Wa as Series3D,ku as SeriesMarkerXY,Cu as SeriesXY,Rc as SimpleFigureSeries,Gn as SimpleShadingStyle,ca as Slice,ua as SliceLabelFormatters,aa as SliceLabelIndices,la as SliceSorters,N as SolidFill,dt as SolidFillPalette,rc as SolidGauge,sc as SolidGaugeSlice,se as SolidLine,vc as SpiderAxis,Ic as SpiderChart,Mc as SpiderSeries,bc as SpiderWebMode,Kc as SplineSeries,Ml as StaticCursor2DBuilder,pu as StaticCursorXYBuilder,Hc as StepOptions,ad as StepSeries,Jn as StipplePatterns,sl as SurfaceGridSeries3D,el as SurfaceScrollingGridSeries3D,gl as TableContentBuilder,oS as Themes,fo as Tick,bo as TickStyle,Xo as TimeFormattingFunctions,Ko as TimeTickStrategy,dh as TriangulatedPoints3D,wS as UIBackgrounds,kS as UIButtonPictures,Yr as UICircle,sn as UIColumnGrid,Xr as UIDiamond,wt as UIDirections,At as UIDraggingModes,Dn as UIElementBuilders,Qr as UIElementColumn,qr as UIElementLine,Jr as UIElementRow,Cr as UIElementWithBackground,Vr as UIEmptyBackground,Ur as UILabel,ol as UILayoutBuilders,Kr as UILayoutGap,al as UILegendBoxPanel,Mr as UIObject,Pe as UIOrigins,ha as UIPanel,Zr as UIPointer,Hr as UIPolygon,jr as UIRectangle,en as UIRowGrid,Mt as UISpace,_t as UIVisibilityModes,V as VisibleFill,vo as VisibleTicks,Sf as ZoomBandChart,Ve as defaultOsmBackgroundColor,IS as disableThemeEffects,R as emptyFill,rt as emptyLine,uh as emptyPoints3D,Mo as emptyTick,Wl as formatLongitudeLatitude,b as isColor,rl as isCoordinate3D,Jf as isCoordinateBarChart,Us as isCoordinateClient,ql as isCoordinatePolar,js as isCoordinateXY,io as isDashedLine,Eo as isDateTimeTickStrategy,E as isEmptyFill,_o as isEmptyTick,ah as isFontSettings,oo as isGlowEffect,ho as isIcon,H as isIndividualPointFill,B as isLUT,et as isLinearGradientFill,$o as isNumericTickStrategy,j as isPalettedFill,$n as isPhongShadingStyle,yh as isPixelatedPoints3D,tt as isRadialGradientFill,Wn as isSimpleShadingStyle,G as isSolidFill,ee as isSolidLine,qo as isTimeTickStrategy,fh as isTriangulatedPoints3D,xo as isVisibleTicks,AS as lightningChart,Oe as onScreenMenuControlBaseHeight,Le as onScreenMenuControlBaseWidth,Re as onScreenMenuControlOpacity,ze as onScreenMenuDefaultButtonShape,Ee as onScreenMenuSpriteURL,yt as regularColorSteps,Jo as saveToFile,mt as synchronizeAxisIntervals,ut as translatePoint,ct as translatePoint3D,De as transparentFill,Be as transparentLine,Li as vec3Utils,mo as xDimensionStrategy,yo as yDimensionStrategy};
