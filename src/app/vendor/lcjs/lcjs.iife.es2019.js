/* LightningChart JS v4.2.0 */
var lcjs=function(t){"use strict";class i{constructor(){this.o=!0}l(){return this.o}}class s extends i{constructor(t,i){super(),this.u=t,this.o=i}S(t){return t!==this.u&&(this.u=t,this.o=!0),this}M(){return this.u}l(){return super.l()}}const e=(t,i)=>({x:t,y:i}),h=(t,i)=>({x:t,y:i}),r=(t,i,s)=>({position:t,high:i,low:s}),n=(t,i,s)=>({x:t,y:i,z:s}),o=t=>{const i=Array(0),s=Array(0);return t.length>0&&t.forEach((t=>{i.push(e(t.position,t.high)),s.push(e(t.position,t.low))})),[i,s]},a=(t,i)=>({min:t,max:i}),l=(t,i,s,e)=>({x:Math.ceil(t),y:Math.ceil(i),width:Math.ceil(s),height:Math.ceil(e)}),u=(t,i=!0)=>new s(t,i),c=(t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}),f=c,d=(t,i)=>({left:void 0!==i.left?i.left:t.left,top:void 0!==i.top?i.top:t.top,right:void 0!==i.right?i.right:t.right,bottom:void 0!==i.bottom?i.bottom:t.bottom});var g=32,m=31,y={};function p(t){t&&(t.value=!0)}function S(){}function v(t){return void 0===t.size&&(t.size=t._(x)),t.size}function b(t,i){if("number"!=typeof i){var s=i>>>0;if(""+s!==i||4294967295===s)return NaN;i=s}return i<0?v(t)+i:i}function x(){return!0}function M(t,i,s){return(0===t&&!k(t)||void 0!==s&&t<=-s)&&(void 0===i||void 0!==s&&i>=s)}function _(t,i){return w(t,i,0)}function A(t,i){return w(t,i,i)}function w(t,i,s){return void 0===t?s:k(t)?i===1/0?i:0|Math.max(0,i+t):void 0===i||i===t?t:0|Math.min(i,t)}function k(t){return t<0||0===t&&1/t==-1/0}var C="@@__IMMUTABLE_ITERABLE__@@";function T(t){return Boolean(t&&t[C])}var F="@@__IMMUTABLE_KEYED__@@";function I(t){return Boolean(t&&t[F])}var P="@@__IMMUTABLE_INDEXED__@@";function D(t){return Boolean(t&&t[P])}function B(t){return I(t)||D(t)}var O=function(t){return T(t)?t:st(t)},L=function(t){function i(t){return I(t)?t:et(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(O),E=function(t){function i(t){return D(t)?t:ht(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(O),R=function(t){function i(t){return T(t)&&!B(t)?t:rt(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(O);O.Keyed=L,O.Indexed=E,O.Set=R;var z="@@__IMMUTABLE_SEQ__@@";function V(t){return Boolean(t&&t[z])}var N="@@__IMMUTABLE_RECORD__@@";function G(t){return Boolean(t&&t[N])}function W(t){return T(t)||G(t)}var H="@@__IMMUTABLE_ORDERED__@@";function U(t){return Boolean(t&&t[H])}var j="function"==typeof Symbol&&Symbol.iterator,$=j||"@@iterator",Y=function(t){this.next=t};function X(t,i,s,e){var h=0===t?i:1===t?s:[i,s];return e?e.value=h:e={value:h,done:!1},e}function Z(){return{value:void 0,done:!0}}function K(t){return!!Array.isArray(t)||!!Q(t)}function q(t){return t&&"function"==typeof t.next}function J(t){var i=Q(t);return i&&i.call(t)}function Q(t){var i=t&&(j&&t[j]||t["@@iterator"]);if("function"==typeof i)return i}Y.prototype.toString=function(){return"[Iterator]"},Y.KEYS=0,Y.VALUES=1,Y.ENTRIES=2,Y.prototype.inspect=Y.prototype.toSource=function(){return this.toString()},Y.prototype[$]=function(){return this};var tt=Object.prototype.hasOwnProperty;function it(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var st=function(t){function i(t){return null==t?ut():W(t)?t.toSeq():function(t){var i,s,e=dt(t);if(e)return(s=Q(i=t))&&s===i.entries?e.fromEntrySeq():function(t){var i=Q(t);return i&&i===t.keys}(t)?e.toSetSeq():e;if("object"==typeof t)return new ot(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.toSeq=function(){return this},i.prototype.toString=function(){return this.C("Seq {","}")},i.prototype.cacheResult=function(){return!this.T&&this.F&&(this.T=this.entrySeq().toArray(),this.size=this.T.length),this},i.prototype._=function(t,i){var s=this.T;if(s){for(var e=s.length,h=0;h!==e;){var r=s[i?e-++h:h++];if(!1===t(r[1],r[0],this))break}return h}return this.F(t,i)},i.prototype.I=function(t,i){var s=this.T;if(s){var e=s.length,h=0;return new Y((function(){if(h===e)return{value:void 0,done:!0};var r=s[i?e-++h:h++];return X(t,r[0],r[1])}))}return this.P(t,i)},i}(O),et=function(t){function i(t){return null==t?ut().toKeyedSeq():T(t)?I(t)?t.toSeq():t.fromEntrySeq():G(t)?t.toSeq():ct(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.toKeyedSeq=function(){return this},i}(st),ht=function(t){function i(t){return null==t?ut():T(t)?I(t)?t.entrySeq():t.toIndexedSeq():G(t)?t.toSeq().entrySeq():ft(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return i(arguments)},i.prototype.toIndexedSeq=function(){return this},i.prototype.toString=function(){return this.C("Seq [","]")},i}(st),rt=function(t){function i(t){return(T(t)&&!B(t)?t:ht(t)).toSetSeq()}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return i(arguments)},i.prototype.toSetSeq=function(){return this},i}(st);st.isSeq=V,st.Keyed=et,st.Set=rt,st.Indexed=ht,st.prototype[z]=!0;var nt=function(t){function i(t){this.D=t,this.size=t.length}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.get=function(t,i){return this.has(t)?this.D[b(this,t)]:i},i.prototype._=function(t,i){for(var s=this.D,e=s.length,h=0;h!==e;){var r=i?e-++h:h++;if(!1===t(s[r],r,this))break}return h},i.prototype.I=function(t,i){var s=this.D,e=s.length,h=0;return new Y((function(){if(h===e)return{value:void 0,done:!0};var r=i?e-++h:h++;return X(t,r,s[r])}))},i}(ht),ot=function(t){function i(t){var i=Object.keys(t);this.O=t,this.L=i,this.size=i.length}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.get=function(t,i){return void 0===i||this.has(t)?this.O[t]:i},i.prototype.has=function(t){return tt.call(this.O,t)},i.prototype._=function(t,i){for(var s=this.O,e=this.L,h=e.length,r=0;r!==h;){var n=e[i?h-++r:r++];if(!1===t(s[n],n,this))break}return r},i.prototype.I=function(t,i){var s=this.O,e=this.L,h=e.length,r=0;return new Y((function(){if(r===h)return{value:void 0,done:!0};var n=e[i?h-++r:r++];return X(t,n,s[n])}))},i}(et);ot.prototype[H]=!0;var at,lt=function(t){function i(t){this.R=t,this.size=t.length||t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.F=function(t,i){if(i)return this.cacheResult()._(t,i);var s=J(this.R),e=0;if(q(s))for(var h;!(h=s.next()).done&&!1!==t(h.value,e++,this););return e},i.prototype.P=function(t,i){if(i)return this.cacheResult().I(t,i);var s=J(this.R);if(!q(s))return new Y(Z);var e=0;return new Y((function(){var i=s.next();return i.done?i:X(t,e++,i.value)}))},i}(ht);function ut(){return at||(at=new nt([]))}function ct(t){var i=dt(t);if(i)return i.fromEntrySeq();if("object"==typeof t)return new ot(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function ft(t){var i=dt(t);if(i)return i;throw new TypeError("Expected Array or collection object of values: "+t)}function dt(t){return it(t)?new nt(t):K(t)?new lt(t):void 0}var gt="@@__IMMUTABLE_MAP__@@";function mt(t){return Boolean(t&&t[gt])}function yt(t){return mt(t)&&U(t)}function pt(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function St(t,i){if(t===i||t!=t&&i!=i)return!0;if(!t||!i)return!1;if("function"==typeof t.valueOf&&"function"==typeof i.valueOf){if((t=t.valueOf())===(i=i.valueOf())||t!=t&&i!=i)return!0;if(!t||!i)return!1}return!!(pt(t)&&pt(i)&&t.equals(i))}var vt="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,i){var s=65535&(t|=0),e=65535&(i|=0);return s*e+((t>>>16)*e+s*(i>>>16)<<16>>>0)|0};function bt(t){return t>>>1&1073741824|3221225471&t}var xt=Object.prototype.valueOf;function Mt(t){if(null==t)return _t(t);if("function"==typeof t.hashCode)return bt(t.hashCode(t));var i,s,e,h=(i=t).valueOf!==xt&&"function"==typeof i.valueOf?i.valueOf(i):i;if(null==h)return _t(h);switch(typeof h){case"boolean":return h?1108378657:1108378656;case"number":return function(t){if(t!=t||t===1/0)return 0;var i=0|t;for(i!==t&&(i^=4294967295*t);t>4294967295;)i^=t/=4294967295;return bt(i)}(h);case"string":return h.length>Bt?(void 0===(e=Et[s=h])&&(e=At(s),Lt===Ot&&(Lt=0,Et={}),Lt++,Et[s]=e),e):At(h);case"object":case"function":return function(t){var i;if(Ft&&void 0!==(i=Tt.get(t)))return i;if(void 0!==(i=t[Dt]))return i;if(!kt){if(void 0!==(i=t.propertyIsEnumerable&&t.propertyIsEnumerable[Dt]))return i;if(void 0!==(i=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return i}if(i=Ct(),Ft)Tt.set(t,i);else{if(void 0!==wt&&!1===wt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(kt)Object.defineProperty(t,Dt,{enumerable:!1,configurable:!1,writable:!1,value:i});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Dt]=i;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Dt]=i}}return i}(h);case"symbol":return function(t){var i=It[t];return void 0!==i||(i=Ct(),It[t]=i),i}(h);default:if("function"==typeof h.toString)return At(h.toString());throw new Error("Value type "+typeof h+" cannot be hashed.")}}function _t(t){return null===t?1108378658:1108378659}function At(t){for(var i=0,s=0;s<t.length;s++)i=31*i+t.charCodeAt(s)|0;return bt(i)}var wt=Object.isExtensible,kt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();function Ct(){var t=++Pt;return 1073741824&Pt&&(Pt=0),t}var Tt,Ft="function"==typeof WeakMap;Ft&&(Tt=new WeakMap);var It=Object.create(null),Pt=0,Dt="__immutablehash__";"function"==typeof Symbol&&(Dt=Symbol(Dt));var Bt=16,Ot=255,Lt=0,Et={},Rt=function(t){function i(t,i){this.V=t,this.N=i,this.size=t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.get=function(t,i){return this.V.get(t,i)},i.prototype.has=function(t){return this.V.has(t)},i.prototype.valueSeq=function(){return this.V.valueSeq()},i.prototype.reverse=function(){var t=this,i=Ht(this,!0);return this.N||(i.valueSeq=function(){return t.V.toSeq().reverse()}),i},i.prototype.map=function(t,i){var s=this,e=Wt(this,t,i);return this.N||(e.valueSeq=function(){return s.V.toSeq().map(t,i)}),e},i.prototype._=function(t,i){var s=this;return this.V._((function(i,e){return t(i,e,s)}),i)},i.prototype.I=function(t,i){return this.V.I(t,i)},i}(et);Rt.prototype[H]=!0;var zt=function(t){function i(t){this.V=t,this.size=t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.includes=function(t){return this.V.includes(t)},i.prototype._=function(t,i){var s=this,e=0;return i&&v(this),this.V._((function(h){return t(h,i?s.size-++e:e++,s)}),i)},i.prototype.I=function(t,i){var s=this,e=this.V.I(1,i),h=0;return i&&v(this),new Y((function(){var r=e.next();return r.done?r:X(t,i?s.size-++h:h++,r.value,r)}))},i}(ht),Vt=function(t){function i(t){this.V=t,this.size=t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.has=function(t){return this.V.includes(t)},i.prototype._=function(t,i){var s=this;return this.V._((function(i){return t(i,i,s)}),i)},i.prototype.I=function(t,i){var s=this.V.I(1,i);return new Y((function(){var i=s.next();return i.done?i:X(t,i.value,i.value,i)}))},i}(rt),Nt=function(t){function i(t){this.V=t,this.size=t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.entrySeq=function(){return this.V.toSeq()},i.prototype._=function(t,i){var s=this;return this.V._((function(i){if(i){ti(i);var e=T(i);return t(e?i.get(1):i[1],e?i.get(0):i[0],s)}}),i)},i.prototype.I=function(t,i){var s=this.V.I(1,i);return new Y((function(){for(;;){var i=s.next();if(i.done)return i;var e=i.value;if(e){ti(e);var h=T(e);return X(t,h?e.get(0):e[0],h?e.get(1):e[1],i)}}}))},i}(et);function Gt(t){var i=si(t);return i.V=t,i.size=t.size,i.flip=function(){return t},i.reverse=function(){var i=t.reverse.apply(this);return i.flip=function(){return t.reverse()},i},i.has=function(i){return t.includes(i)},i.includes=function(i){return t.has(i)},i.cacheResult=ei,i.F=function(i,s){var e=this;return t._((function(t,s){return!1!==i(s,t,e)}),s)},i.P=function(i,s){if(2===i){var e=t.I(i,s);return new Y((function(){var t=e.next();if(!t.done){var i=t.value[0];t.value[0]=t.value[1],t.value[1]=i}return t}))}return t.I(1===i?0:1,s)},i}function Wt(t,i,s){var e=si(t);return e.size=t.size,e.has=function(i){return t.has(i)},e.get=function(e,h){var r=t.get(e,y);return r===y?h:i.call(s,r,e,t)},e.F=function(e,h){var r=this;return t._((function(t,h,n){return!1!==e(i.call(s,t,h,n),h,r)}),h)},e.P=function(e,h){var r=t.I(2,h);return new Y((function(){var h=r.next();if(h.done)return h;var n=h.value,o=n[0];return X(e,o,i.call(s,n[1],o,t),h)}))},e}function Ht(t,i){var s=this,e=si(t);return e.V=t,e.size=t.size,e.reverse=function(){return t},t.flip&&(e.flip=function(){var i=Gt(t);return i.reverse=function(){return t.flip()},i}),e.get=function(s,e){return t.get(i?s:-1-s,e)},e.has=function(s){return t.has(i?s:-1-s)},e.includes=function(i){return t.includes(i)},e.cacheResult=ei,e._=function(s,e){var h=this,r=0;return e&&v(t),t._((function(t,n){return s(t,i?n:e?h.size-++r:r++,h)}),!e)},e.I=function(e,h){var r=0;h&&v(t);var n=t.I(2,!h);return new Y((function(){var t=n.next();if(t.done)return t;var o=t.value;return X(e,i?o[0]:h?s.size-++r:r++,o[1],t)}))},e}function Ut(t,i,s,e){var h=si(t);return e&&(h.has=function(e){var h=t.get(e,y);return h!==y&&!!i.call(s,h,e,t)},h.get=function(e,h){var r=t.get(e,y);return r!==y&&i.call(s,r,e,t)?r:h}),h.F=function(h,r){var n=this,o=0;return t._((function(t,r,a){if(i.call(s,t,r,a))return o++,h(t,e?r:o-1,n)}),r),o},h.P=function(h,r){var n=t.I(2,r),o=0;return new Y((function(){for(;;){var r=n.next();if(r.done)return r;var a=r.value,l=a[0],u=a[1];if(i.call(s,u,l,t))return X(h,e?l:o++,u,r)}}))},h}function jt(t,i,s,e){var h=t.size;if(M(i,s,h))return t;var r=_(i,h),n=A(s,h);if(r!=r||n!=n)return jt(t.toSeq().cacheResult(),i,s,e);var o,a=n-r;a==a&&(o=a<0?0:a);var l=si(t);return l.size=0===o?o:t.size&&o||void 0,!e&&V(t)&&o>=0&&(l.get=function(i,s){return(i=b(this,i))>=0&&i<o?t.get(i+r,s):s}),l.F=function(i,s){var h=this;if(0===o)return 0;if(s)return this.cacheResult()._(i,s);var n=0,a=!0,l=0;return t._((function(t,s){if(!a||!(a=n++<r))return l++,!1!==i(t,e?s:l-1,h)&&l!==o})),l},l.P=function(i,s){if(0!==o&&s)return this.cacheResult().I(i,s);if(0===o)return new Y(Z);var h=t.I(i,s),n=0,a=0;return new Y((function(){for(;n++<r;)h.next();if(++a>o)return{value:void 0,done:!0};var t=h.next();return e||1===i||t.done?t:X(i,a-1,0===i?void 0:t.value[1],t)}))},l}function $t(t,i,s,e){var h=si(t);return h.F=function(h,r){var n=this;if(r)return this.cacheResult()._(h,r);var o=!0,a=0;return t._((function(t,r,l){if(!o||!(o=i.call(s,t,r,l)))return a++,h(t,e?r:a-1,n)})),a},h.P=function(h,r){var n=this;if(r)return this.cacheResult().I(h,r);var o=t.I(2,r),a=!0,l=0;return new Y((function(){var t,r,u;do{if((t=o.next()).done)return e||1===h?t:X(h,l++,0===h?void 0:t.value[1],t);var c=t.value;r=c[0],u=c[1],a&&(a=i.call(s,u,r,n))}while(a);return 2===h?t:X(h,r,u,t)}))},h}function Yt(t,i){var s=I(t),e=[t].concat(i).map((function(t){return T(t)?s&&(t=L(t)):t=s?ct(t):ft(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===e.length)return t;if(1===e.length){var h=e[0];if(h===t||s&&I(h)||D(t)&&D(h))return h}var r=new nt(e);return s?r=r.toKeyedSeq():D(t)||(r=r.toSetSeq()),(r=r.flatten(!0)).size=e.reduce((function(t,i){if(void 0!==t){var s=i.size;if(void 0!==s)return t+s}}),0),r}function Xt(t,i,s){var e=si(t);return e.F=function(h,r){if(r)return this.cacheResult()._(h,r);var n=0,o=!1;return function t(a,l){a._((function(r,a){return(!i||l<i)&&T(r)?t(r,l+1):(n++,!1===h(r,s?a:n-1,e)&&(o=!0)),!o}),r)}(t,0),n},e.P=function(e,h){if(h)return this.cacheResult().I(e,h);var r=t.I(e,h),n=[],o=0;return new Y((function(){for(;r;){var t=r.next();if(!1===t.done){var a=t.value;if(2===e&&(a=a[1]),i&&!(n.length<i)||!T(a))return s?t:X(e,o++,a,t);n.push(r),r=a.I(e,h)}else r=n.pop()}return{value:void 0,done:!0}}))},e}function Zt(t,i,s){i||(i=hi);var e=I(t),h=0,r=t.toSeq().map((function(i,e){return[e,i,h++,s?s(i,e,t):i]})).valueSeq().toArray();return r.sort((function(t,s){return i(t[3],s[3])||t[2]-s[2]})).forEach(e?function(t,i){r[i].length=2}:function(t,i){r[i]=t[1]}),e?et(r):D(t)?ht(r):rt(r)}function Kt(t,i,s){if(i||(i=hi),s){var e=t.toSeq().map((function(i,e){return[i,s(i,e,t)]})).reduce((function(t,s){return qt(i,t[1],s[1])?s:t}));return e&&e[0]}return t.reduce((function(t,s){return qt(i,t,s)?s:t}))}function qt(t,i,s){var e=t(s,i);return 0===e&&s!==i&&(null==s||s!=s)||e>0}function Jt(t,i,s,e){var h=si(t),r=new nt(s).map((function(t){return t.size}));return h.size=e?r.max():r.min(),h._=function(t,i){for(var s,e=this.I(1,i),h=0;!(s=e.next()).done&&!1!==t(s.value,h++,this););return h},h.P=function(t,h){var r=s.map((function(t){return t=O(t),J(h?t.reverse():t)})),n=0,o=!1;return new Y((function(){var s;return o||(s=r.map((function(t){return t.next()})),o=e?s.every((function(t){return t.done})):s.some((function(t){return t.done}))),o?{value:void 0,done:!0}:X(t,n++,i.apply(null,s.map((function(t){return t.value}))))}))},h}function Qt(t,i){return t===i?t:V(t)?i:t.constructor(i)}function ti(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function ii(t){return I(t)?L:D(t)?E:R}function si(t){return Object.create((I(t)?et:D(t)?ht:rt).prototype)}function ei(){return this.V.cacheResult?(this.V.cacheResult(),this.size=this.V.size,this):st.prototype.cacheResult.call(this)}function hi(t,i){return void 0===t&&void 0===i?0:void 0===t?1:void 0===i?-1:t>i?1:t<i?-1:0}function ri(t,i){i=i||0;for(var s=Math.max(0,t.length-i),e=new Array(s),h=0;h<s;h++)e[h]=t[h+i];return e}function ni(t,i){if(!t)throw new Error(i)}function oi(t){ni(t!==1/0,"Cannot perform this action with an infinite size.")}function ai(t){if(it(t)&&"string"!=typeof t)return t;if(U(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}zt.prototype.cacheResult=Rt.prototype.cacheResult=Vt.prototype.cacheResult=Nt.prototype.cacheResult=ei;var li=Object.prototype.toString;function ui(t){return"object"==typeof t&&(W(t)||Array.isArray(t)||function(t){if(!t||"object"!=typeof t||"[object Object]"!==li.call(t))return!1;var i=Object.getPrototypeOf(t);if(null===i)return!0;for(var s=i,e=Object.getPrototypeOf(i);null!==e;)s=e,e=Object.getPrototypeOf(s);return s===i}(t))}function ci(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(i){return JSON.stringify(t)}}function fi(t,i,s){return W(t)?t.get(i,s):function(t,i){return W(t)?t.has(i):ui(t)&&tt.call(t,i)}(t,i)?"function"==typeof t.get?t.get(i):t[i]:s}function di(t){if(Array.isArray(t))return ri(t);var i={};for(var s in t)tt.call(t,s)&&(i[s]=t[s]);return i}function gi(t,i,s,e){e||(e=s,s=void 0);var h=mi(W(t),t,ai(i),0,s,e);return h===y?s:h}function mi(t,i,s,e,h,r){var n=i===y;if(e===s.length){var o=n?h:i,a=r(o);return a===o?i:a}if(!n&&!ui(i))throw new TypeError("Cannot update within non-data-structure value in path ["+s.slice(0,e).map(ci)+"]: "+i);var l=s[e],u=n?y:fi(i,l,y),c=mi(u===y?t:W(u),u,s,e+1,h,r);return c===u?i:c===y?function(t,i){if(!ui(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(W(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(i)}if(!tt.call(t,i))return t;var s=di(t);return Array.isArray(s)?s.splice(i,1):delete s[i],s}(i,l):function(t,i,s){if(!ui(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(W(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(i,s)}if(tt.call(t,i)&&s===t[i])return t;var e=di(t);return e[i]=s,e}(n?t?$i():{}:i,l,c)}function yi(t,i){return function(t,i,s){return gi(t,i,y,(function(){return s}))}(this,t,i)}function pi(t){return function(t,i){return gi(t,i,(function(){return y}))}(this,t)}function Si(t,i,s,e){return gi(t,[i],s,e)}function vi(t,i,s){return 1===arguments.length?t(this):Si(this,t,i,s)}function bi(t,i,s){return gi(this,t,i,s)}function xi(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return _i(this,t)}function Mi(t){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return _i(this,i,t)}function _i(t,i,s){for(var e=[],h=0;h<i.length;h++){var r=L(i[h]);0!==r.size&&e.push(r)}return 0===e.length?t:0!==t.toSeq().size||t.G||1!==e.length?t.withMutations((function(t){for(var i=s?function(i,e){Si(t,e,y,(function(t){return t===y?i:s(t,i,e)}))}:function(i,s){t.set(s,i)},h=0;h<e.length;h++)e[h].forEach(i)})):t.constructor(e[0])}function Ai(t,i,s){return wi(t,i,function(t){return function i(s,e,h){return ui(s)&&ui(e)&&(r=e,n=st(s),o=st(r),D(n)===D(o)&&I(n)===I(o))?wi(s,[e],i):t?t(s,e,h):e;var r,n,o}}(s))}function wi(t,i,s){if(!ui(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(W(t))return"function"==typeof s&&t.mergeWith?t.mergeWith.apply(t,[s].concat(i)):t.merge?t.merge.apply(t,i):t.concat.apply(t,i);for(var e=Array.isArray(t),h=t,r=e?E:L,n=e?function(i){h===t&&(h=di(h)),h.push(i)}:function(i,e){var r=tt.call(h,e),n=r&&s?s(h[e],i,e):i;r&&n===h[e]||(h===t&&(h=di(h)),h[e]=n)},o=0;o<i.length;o++)r(i[o]).forEach(n);return h}function ki(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return Ai(this,t)}function Ci(t){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];return Ai(this,i,t)}function Ti(t){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];return gi(this,t,$i(),(function(t){return wi(t,i)}))}function Fi(t){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];return gi(this,t,$i(),(function(t){return Ai(t,i)}))}function Ii(t){var i=this.asMutable();return t(i),i.wasAltered()?i.W(this.G):this}function Pi(){return this.G?this:this.W(new S)}function Di(){return this.W()}function Bi(){return this.H}var Oi=function(t){function i(i){return null==i?$i():mt(i)&&!U(i)?i:$i().withMutations((function(s){var e=t(i);oi(e.size),e.forEach((function(t,i){return s.set(i,t)}))}))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return $i().withMutations((function(i){for(var s=0;s<t.length;s+=2){if(s+1>=t.length)throw new Error("Missing value for key: "+t[s]);i.set(t[s],t[s+1])}}))},i.prototype.toString=function(){return this.C("Map {","}")},i.prototype.get=function(t,i){return this.U?this.U.get(0,void 0,t,i):i},i.prototype.set=function(t,i){return Yi(this,t,i)},i.prototype.remove=function(t){return Yi(this,t,y)},i.prototype.deleteAll=function(t){var i=O(t);return 0===i.size?this:this.withMutations((function(t){i.forEach((function(i){return t.remove(i)}))}))},i.prototype.clear=function(){return 0===this.size?this:this.G?(this.size=0,this.U=null,this.j=void 0,this.H=!0,this):$i()},i.prototype.sort=function(t){return Ss(Zt(this,t))},i.prototype.sortBy=function(t,i){return Ss(Zt(this,i,t))},i.prototype.map=function(t,i){var s=this;return this.withMutations((function(e){e.forEach((function(h,r){e.set(r,t.call(i,h,r,s))}))}))},i.prototype.I=function(t,i){return new Wi(this,t,i)},i.prototype._=function(t,i){var s=this,e=0;return this.U&&this.U.iterate((function(i){return e++,t(i[1],i[0],s)}),i),e},i.prototype.W=function(t){return t===this.G?this:t?ji(this.size,this.U,t,this.j):0===this.size?$i():(this.G=t,this.H=!1,this)},i}(L);Oi.isMap=mt;var Li=Oi.prototype;Li[gt]=!0,Li.delete=Li.remove,Li.removeAll=Li.deleteAll,Li.setIn=yi,Li.removeIn=Li.deleteIn=pi,Li.update=vi,Li.updateIn=bi,Li.merge=Li.concat=xi,Li.mergeWith=Mi,Li.mergeDeep=ki,Li.mergeDeepWith=Ci,Li.mergeIn=Ti,Li.mergeDeepIn=Fi,Li.withMutations=Ii,Li.wasAltered=Bi,Li.asImmutable=Di,Li["@@transducer/init"]=Li.asMutable=Pi,Li["@@transducer/step"]=function(t,i){return t.set(i[0],i[1])},Li["@@transducer/result"]=function(t){return t.asImmutable()};var Ei=function(t,i){this.ownerID=t,this.entries=i};Ei.prototype.get=function(t,i,s,e){for(var h=this.entries,r=0,n=h.length;r<n;r++)if(St(s,h[r][0]))return h[r][1];return e},Ei.prototype.update=function(t,i,s,e,h,r,n){for(var o=h===y,a=this.entries,l=0,u=a.length;l<u&&!St(e,a[l][0]);l++);var c=l<u;if(c?a[l][1]===h:o)return this;if(p(n),(o||!c)&&p(r),!o||1!==a.length){if(!c&&!o&&a.length>=Qi)return function(t,i,s,e){t||(t=new S);for(var h=new Ni(t,Mt(s),[s,e]),r=0;r<i.length;r++){var n=i[r];h=h.update(t,0,void 0,n[0],n[1])}return h}(t,a,e,h);var f=t&&t===this.ownerID,d=f?a:ri(a);return c?o?l===u-1?d.pop():d[l]=d.pop():d[l]=[e,h]:d.push([e,h]),f?(this.entries=d,this):new Ei(t,d)}};var Ri=function(t,i,s){this.ownerID=t,this.bitmap=i,this.nodes=s};Ri.prototype.get=function(t,i,s,e){void 0===i&&(i=Mt(s));var h=1<<((0===t?i:i>>>t)&m),r=this.bitmap;return 0==(r&h)?e:this.nodes[qi(r&h-1)].get(t+5,i,s,e)},Ri.prototype.update=function(t,i,s,e,h,r,n){void 0===s&&(s=Mt(e));var o=(0===i?s:s>>>i)&m,a=1<<o,l=this.bitmap,u=0!=(l&a);if(!u&&h===y)return this;var c=qi(l&a-1),f=this.nodes,d=u?f[c]:void 0,p=Xi(d,t,i+5,s,e,h,r,n);if(p===d)return this;if(!u&&p&&f.length>=ts)return function(t,i,s,e,h){for(var r=0,n=new Array(g),o=0;0!==s;o++,s>>>=1)n[o]=1&s?i[r++]:void 0;return n[e]=h,new zi(t,r+1,n)}(t,f,l,o,p);if(u&&!p&&2===f.length&&Zi(f[1^c]))return f[1^c];if(u&&p&&1===f.length&&Zi(p))return p;var S=t&&t===this.ownerID,v=u?p?l:l^a:l|a,b=u?p?Ji(f,c,p,S):function(t,i,s){var e=t.length-1;if(s&&i===e)return t.pop(),t;for(var h=new Array(e),r=0,n=0;n<e;n++)n===i&&(r=1),h[n]=t[n+r];return h}(f,c,S):function(t,i,s,e){var h=t.length+1;if(e&&i+1===h)return t[i]=s,t;for(var r=new Array(h),n=0,o=0;o<h;o++)o===i?(r[o]=s,n=-1):r[o]=t[o+n];return r}(f,c,p,S);return S?(this.bitmap=v,this.nodes=b,this):new Ri(t,v,b)};var zi=function(t,i,s){this.ownerID=t,this.count=i,this.nodes=s};zi.prototype.get=function(t,i,s,e){void 0===i&&(i=Mt(s));var h=(0===t?i:i>>>t)&m,r=this.nodes[h];return r?r.get(t+5,i,s,e):e},zi.prototype.update=function(t,i,s,e,h,r,n){void 0===s&&(s=Mt(e));var o=(0===i?s:s>>>i)&m,a=h===y,l=this.nodes,u=l[o];if(a&&!u)return this;var c=Xi(u,t,i+5,s,e,h,r,n);if(c===u)return this;var f=this.count;if(u){if(!c&&--f<is)return function(t,i,s,e){for(var h=0,r=0,n=new Array(s),o=0,a=1,l=i.length;o<l;o++,a<<=1){var u=i[o];void 0!==u&&o!==e&&(h|=a,n[r++]=u)}return new Ri(t,h,n)}(t,l,f,o)}else f++;var d=t&&t===this.ownerID,g=Ji(l,o,c,d);return d?(this.count=f,this.nodes=g,this):new zi(t,f,g)};var Vi=function(t,i,s){this.ownerID=t,this.keyHash=i,this.entries=s};Vi.prototype.get=function(t,i,s,e){for(var h=this.entries,r=0,n=h.length;r<n;r++)if(St(s,h[r][0]))return h[r][1];return e},Vi.prototype.update=function(t,i,s,e,h,r,n){void 0===s&&(s=Mt(e));var o=h===y;if(s!==this.keyHash)return o?this:(p(n),p(r),Ki(this,t,i,s,[e,h]));for(var a=this.entries,l=0,u=a.length;l<u&&!St(e,a[l][0]);l++);var c=l<u;if(c?a[l][1]===h:o)return this;if(p(n),(o||!c)&&p(r),o&&2===u)return new Ni(t,this.keyHash,a[1^l]);var f=t&&t===this.ownerID,d=f?a:ri(a);return c?o?l===u-1?d.pop():d[l]=d.pop():d[l]=[e,h]:d.push([e,h]),f?(this.entries=d,this):new Vi(t,this.keyHash,d)};var Ni=function(t,i,s){this.ownerID=t,this.keyHash=i,this.entry=s};Ni.prototype.get=function(t,i,s,e){return St(s,this.entry[0])?this.entry[1]:e},Ni.prototype.update=function(t,i,s,e,h,r,n){var o=h===y,a=St(e,this.entry[0]);return(a?h===this.entry[1]:o)?this:(p(n),o?void p(r):a?t&&t===this.ownerID?(this.entry[1]=h,this):new Ni(t,this.keyHash,[e,h]):(p(r),Ki(this,t,i,Mt(e),[e,h])))},Ei.prototype.iterate=Vi.prototype.iterate=function(t,i){for(var s=this.entries,e=0,h=s.length-1;e<=h;e++)if(!1===t(s[i?h-e:e]))return!1},Ri.prototype.iterate=zi.prototype.iterate=function(t,i){for(var s=this.nodes,e=0,h=s.length-1;e<=h;e++){var r=s[i?h-e:e];if(r&&!1===r.iterate(t,i))return!1}},Ni.prototype.iterate=function(t,i){return t(this.entry)};var Gi,Wi=function(t){function i(t,i,s){this.$=i,this.Y=s,this.X=t.U&&Ui(t.U)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.next=function(){for(var t=this.$,i=this.X;i;){var s=i.node,e=i.index++,h=void 0;if(s.entry){if(0===e)return Hi(t,s.entry)}else if(s.entries){if(e<=(h=s.entries.length-1))return Hi(t,s.entries[this.Y?h-e:e])}else if(e<=(h=s.nodes.length-1)){var r=s.nodes[this.Y?h-e:e];if(r){if(r.entry)return Hi(t,r.entry);i=this.X=Ui(r,i)}continue}i=this.X=this.X.Z}return{value:void 0,done:!0}},i}(Y);function Hi(t,i){return X(t,i[0],i[1])}function Ui(t,i){return{node:t,index:0,Z:i}}function ji(t,i,s,e){var h=Object.create(Li);return h.size=t,h.U=i,h.G=s,h.j=e,h.H=!1,h}function $i(){return Gi||(Gi=ji(0))}function Yi(t,i,s){var e,h;if(t.U){var r={value:!1},n={value:!1};if(e=Xi(t.U,t.G,0,void 0,i,s,r,n),!n.value)return t;h=t.size+(r.value?s===y?-1:1:0)}else{if(s===y)return t;h=1,e=new Ei(t.G,[[i,s]])}return t.G?(t.size=h,t.U=e,t.j=void 0,t.H=!0,t):e?ji(h,e):$i()}function Xi(t,i,s,e,h,r,n,o){return t?t.update(i,s,e,h,r,n,o):r===y?t:(p(o),p(n),new Ni(i,e,[h,r]))}function Zi(t){return t.constructor===Ni||t.constructor===Vi}function Ki(t,i,s,e,h){if(t.keyHash===e)return new Vi(i,e,[t.entry,h]);var r,n=(0===s?t.keyHash:t.keyHash>>>s)&m,o=(0===s?e:e>>>s)&m,a=n===o?[Ki(t,i,s+5,e,h)]:(r=new Ni(i,e,h),n<o?[t,r]:[r,t]);return new Ri(i,1<<n|1<<o,a)}function qi(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,127&(t+=t>>8)+(t>>16)}function Ji(t,i,s,e){var h=e?t:ri(t);return h[i]=s,h}var Qi=8,ts=16,is=8,ss="@@__IMMUTABLE_LIST__@@";function es(t){return Boolean(t&&t[ss])}var hs=function(t){function i(i){var s=cs();if(null==i)return s;if(es(i))return i;var e=t(i),h=e.size;return 0===h?s:(oi(h),h>0&&h<g?us(0,h,5,null,new ns(e.toArray())):s.withMutations((function(t){t.setSize(h),e.forEach((function(i,s){return t.set(s,i)}))})))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.prototype.toString=function(){return this.C("List [","]")},i.prototype.get=function(t,i){if((t=b(this,t))>=0&&t<this.size){var s=gs(this,t+=this.K);return s&&s.array[t&m]}return i},i.prototype.set=function(t,i){return function(t,i,s){if((i=b(t,i))!=i)return t;if(i>=t.size||i<0)return t.withMutations((function(t){i<0?ms(t,i).set(0,s):ms(t,0,i+1).set(i,s)}));i+=t.K;var e=t.q,h=t.U,r={value:!1};return i>=ys(t.J)?e=fs(e,t.G,0,i,s,r):h=fs(h,t.G,t.tt,i,s,r),r.value?t.G?(t.U=h,t.q=e,t.j=void 0,t.H=!0,t):us(t.K,t.J,t.tt,h,e):t}(this,t,i)},i.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},i.prototype.insert=function(t,i){return this.splice(t,0,i)},i.prototype.clear=function(){return 0===this.size?this:this.G?(this.size=this.K=this.J=0,this.tt=5,this.U=this.q=this.j=void 0,this.H=!0,this):cs()},i.prototype.push=function(){var t=arguments,i=this.size;return this.withMutations((function(s){ms(s,0,i+t.length);for(var e=0;e<t.length;e++)s.set(i+e,t[e])}))},i.prototype.pop=function(){return ms(this,0,-1)},i.prototype.unshift=function(){var t=arguments;return this.withMutations((function(i){ms(i,-t.length);for(var s=0;s<t.length;s++)i.set(s,t[s])}))},i.prototype.shift=function(){return ms(this,1)},i.prototype.concat=function(){for(var i=arguments,s=[],e=0;e<arguments.length;e++){var h=i[e],r=t("string"!=typeof h&&K(h)?h:[h]);0!==r.size&&s.push(r)}return 0===s.length?this:0!==this.size||this.G||1!==s.length?this.withMutations((function(t){s.forEach((function(i){return i.forEach((function(i){return t.push(i)}))}))})):this.constructor(s[0])},i.prototype.setSize=function(t){return ms(this,0,t)},i.prototype.map=function(t,i){var s=this;return this.withMutations((function(e){for(var h=0;h<s.size;h++)e.set(h,t.call(i,e.get(h),h,s))}))},i.prototype.slice=function(t,i){var s=this.size;return M(t,i,s)?this:ms(this,_(t,s),A(i,s))},i.prototype.I=function(t,i){var s=i?this.size:0,e=ls(this,i);return new Y((function(){var h=e();return h===as?{value:void 0,done:!0}:X(t,i?--s:s++,h)}))},i.prototype._=function(t,i){for(var s,e=i?this.size:0,h=ls(this,i);(s=h())!==as&&!1!==t(s,i?--e:e++,this););return e},i.prototype.W=function(t){return t===this.G?this:t?us(this.K,this.J,this.tt,this.U,this.q,t,this.j):0===this.size?cs():(this.G=t,this.H=!1,this)},i}(E);hs.isList=es;var rs=hs.prototype;rs[ss]=!0,rs.delete=rs.remove,rs.merge=rs.concat,rs.setIn=yi,rs.deleteIn=rs.removeIn=pi,rs.update=vi,rs.updateIn=bi,rs.mergeIn=Ti,rs.mergeDeepIn=Fi,rs.withMutations=Ii,rs.wasAltered=Bi,rs.asImmutable=Di,rs["@@transducer/init"]=rs.asMutable=Pi,rs["@@transducer/step"]=function(t,i){return t.push(i)},rs["@@transducer/result"]=function(t){return t.asImmutable()};var ns=function(t,i){this.array=t,this.ownerID=i};ns.prototype.removeBefore=function(t,i,s){if(s===i?1<<i:0===this.array.length)return this;var e=s>>>i&m;if(e>=this.array.length)return new ns([],t);var h,r=0===e;if(i>0){var n=this.array[e];if((h=n&&n.removeBefore(t,i-5,s))===n&&r)return this}if(r&&!h)return this;var o=ds(this,t);if(!r)for(var a=0;a<e;a++)o.array[a]=void 0;return h&&(o.array[e]=h),o},ns.prototype.removeAfter=function(t,i,s){if(s===(i?1<<i:0)||0===this.array.length)return this;var e,h=s-1>>>i&m;if(h>=this.array.length)return this;if(i>0){var r=this.array[h];if((e=r&&r.removeAfter(t,i-5,s))===r&&h===this.array.length-1)return this}var n=ds(this,t);return n.array.splice(h+1),e&&(n.array[h]=e),n};var os,as={};function ls(t,i){var s=t.K,e=t.J,h=ys(e),r=t.q;return function t(n,o,a){return 0===o?function(t,n){var o=n===h?r&&r.array:t&&t.array,a=n>s?0:s-n,l=e-n;return l>g&&(l=g),function(){if(a===l)return as;var t=i?--l:a++;return o&&o[t]}}(n,a):function(h,r,n){var o,a=h&&h.array,l=n>s?0:s-n>>r,u=1+(e-n>>r);return u>g&&(u=g),function(){for(;;){if(o){var s=o();if(s!==as)return s;o=null}if(l===u)return as;var e=i?--u:l++;o=t(a&&a[e],r-5,n+(e<<r))}}}(n,o,a)}(t.U,t.tt,0)}function us(t,i,s,e,h,r,n){var o=Object.create(rs);return o.size=i-t,o.K=t,o.J=i,o.tt=s,o.U=e,o.q=h,o.G=r,o.j=n,o.H=!1,o}function cs(){return os||(os=us(0,0,5))}function fs(t,i,s,e,h,r){var n,o=e>>>s&m,a=t&&o<t.array.length;if(!a&&void 0===h)return t;if(s>0){var l=t&&t.array[o],u=fs(l,i,s-5,e,h,r);return u===l?t:((n=ds(t,i)).array[o]=u,n)}return a&&t.array[o]===h?t:(r&&p(r),n=ds(t,i),void 0===h&&o===n.array.length-1?n.array.pop():n.array[o]=h,n)}function ds(t,i){return i&&t&&i===t.ownerID?t:new ns(t?t.array.slice():[],i)}function gs(t,i){if(i>=ys(t.J))return t.q;if(i<1<<t.tt+5){for(var s=t.U,e=t.tt;s&&e>0;)s=s.array[i>>>e&m],e-=5;return s}}function ms(t,i,s){void 0!==i&&(i|=0),void 0!==s&&(s|=0);var e=t.G||new S,h=t.K,r=t.J,n=h+i,o=void 0===s?r:s<0?r+s:h+s;if(n===h&&o===r)return t;if(n>=o)return t.clear();for(var a=t.tt,l=t.U,u=0;n+u<0;)l=new ns(l&&l.array.length?[void 0,l]:[],e),u+=1<<(a+=5);u&&(n+=u,h+=u,o+=u,r+=u);for(var c=ys(r),f=ys(o);f>=1<<a+5;)l=new ns(l&&l.array.length?[l]:[],e),a+=5;var d=t.q,g=f<c?gs(t,o-1):f>c?new ns([],e):d;if(d&&f>c&&n<r&&d.array.length){for(var y=l=ds(l,e),p=a;p>5;p-=5){var v=c>>>p&m;y=y.array[v]=ds(y.array[v],e)}y.array[c>>>5&m]=d}if(o<r&&(g=g&&g.removeAfter(e,0,o)),n>=f)n-=f,o-=f,a=5,l=null,g=g&&g.removeBefore(e,0,n);else if(n>h||f<c){for(u=0;l;){var b=n>>>a&m;if(b!==f>>>a&m)break;b&&(u+=(1<<a)*b),a-=5,l=l.array[b]}l&&n>h&&(l=l.removeBefore(e,a,n-u)),l&&f<c&&(l=l.removeAfter(e,a,f-u)),u&&(n-=u,o-=u)}return t.G?(t.size=o-n,t.K=n,t.J=o,t.tt=a,t.U=l,t.q=g,t.j=void 0,t.H=!0,t):us(n,o,a,l,g)}function ys(t){return t<g?0:t-1>>>5<<5}var ps,Ss=function(t){function i(t){return null==t?bs():yt(t)?t:bs().withMutations((function(i){var s=L(t);oi(s.size),s.forEach((function(t,s){return i.set(s,t)}))}))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.prototype.toString=function(){return this.C("OrderedMap {","}")},i.prototype.get=function(t,i){var s=this.it.get(t);return void 0!==s?this.st.get(s)[1]:i},i.prototype.clear=function(){return 0===this.size?this:this.G?(this.size=0,this.it.clear(),this.st.clear(),this.H=!0,this):bs()},i.prototype.set=function(t,i){return xs(this,t,i)},i.prototype.remove=function(t){return xs(this,t,y)},i.prototype._=function(t,i){var s=this;return this.st._((function(i){return i&&t(i[1],i[0],s)}),i)},i.prototype.I=function(t,i){return this.st.fromEntrySeq().I(t,i)},i.prototype.W=function(t){if(t===this.G)return this;var i=this.it.W(t),s=this.st.W(t);return t?vs(i,s,t,this.j):0===this.size?bs():(this.G=t,this.H=!1,this.it=i,this.st=s,this)},i}(Oi);function vs(t,i,s,e){var h=Object.create(Ss.prototype);return h.size=t?t.size:0,h.it=t,h.st=i,h.G=s,h.j=e,h.H=!1,h}function bs(){return ps||(ps=vs($i(),cs()))}function xs(t,i,s){var e,h,r=t.it,n=t.st,o=r.get(i),a=void 0!==o;if(s===y){if(!a)return t;n.size>=g&&n.size>=2*r.size?(e=(h=n.filter((function(t,i){return void 0!==t&&o!==i}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.G&&(e.G=h.G=t.G)):(e=r.remove(i),h=o===n.size-1?n.pop():n.set(o,void 0))}else if(a){if(s===n.get(o)[1])return t;e=r,h=n.set(o,[i,s])}else e=r.set(i,n.size),h=n.set(n.size,[i,s]);return t.G?(t.size=e.size,t.it=e,t.st=h,t.j=void 0,t.H=!0,t):vs(e,h)}Ss.isOrderedMap=yt,Ss.prototype[H]=!0,Ss.prototype.delete=Ss.prototype.remove;var Ms="@@__IMMUTABLE_STACK__@@";function _s(t){return Boolean(t&&t[Ms])}var As=function(t){function i(t){return null==t?Ts():_s(t)?t:Ts().pushAll(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.prototype.toString=function(){return this.C("Stack [","]")},i.prototype.get=function(t,i){var s=this.et;for(t=b(this,t);s&&t--;)s=s.next;return s?s.value:i},i.prototype.peek=function(){return this.et&&this.et.value},i.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var i=this.size+arguments.length,s=this.et,e=arguments.length-1;e>=0;e--)s={value:t[e],next:s};return this.G?(this.size=i,this.et=s,this.j=void 0,this.H=!0,this):Cs(i,s)},i.prototype.pushAll=function(i){if(0===(i=t(i)).size)return this;if(0===this.size&&_s(i))return i;oi(i.size);var s=this.size,e=this.et;return i._((function(t){s++,e={value:t,next:e}}),!0),this.G?(this.size=s,this.et=e,this.j=void 0,this.H=!0,this):Cs(s,e)},i.prototype.pop=function(){return this.slice(1)},i.prototype.clear=function(){return 0===this.size?this:this.G?(this.size=0,this.et=void 0,this.j=void 0,this.H=!0,this):Ts()},i.prototype.slice=function(i,s){if(M(i,s,this.size))return this;var e=_(i,this.size);if(A(s,this.size)!==this.size)return t.prototype.slice.call(this,i,s);for(var h=this.size-e,r=this.et;e--;)r=r.next;return this.G?(this.size=h,this.et=r,this.j=void 0,this.H=!0,this):Cs(h,r)},i.prototype.W=function(t){return t===this.G?this:t?Cs(this.size,this.et,t,this.j):0===this.size?Ts():(this.G=t,this.H=!1,this)},i.prototype._=function(t,i){var s=this;if(i)return new nt(this.toArray())._((function(i,e){return t(i,e,s)}),i);for(var e=0,h=this.et;h&&!1!==t(h.value,e++,this);)h=h.next;return e},i.prototype.I=function(t,i){if(i)return new nt(this.toArray()).I(t,i);var s=0,e=this.et;return new Y((function(){if(e){var i=e.value;return e=e.next,X(t,s++,i)}return{value:void 0,done:!0}}))},i}(E);As.isStack=_s;var ws,ks=As.prototype;function Cs(t,i,s,e){var h=Object.create(ks);return h.size=t,h.et=i,h.G=s,h.j=e,h.H=!1,h}function Ts(){return ws||(ws=Cs(0))}ks[Ms]=!0,ks.shift=ks.pop,ks.unshift=ks.push,ks.unshiftAll=ks.pushAll,ks.withMutations=Ii,ks.wasAltered=Bi,ks.asImmutable=Di,ks["@@transducer/init"]=ks.asMutable=Pi,ks["@@transducer/step"]=function(t,i){return t.unshift(i)},ks["@@transducer/result"]=function(t){return t.asImmutable()};var Fs="@@__IMMUTABLE_SET__@@";function Is(t){return Boolean(t&&t[Fs])}function Ps(t){return Is(t)&&U(t)}function Ds(t,i){if(t===i)return!0;if(!T(i)||void 0!==t.size&&void 0!==i.size&&t.size!==i.size||void 0!==t.j&&void 0!==i.j&&t.j!==i.j||I(t)!==I(i)||D(t)!==D(i)||U(t)!==U(i))return!1;if(0===t.size&&0===i.size)return!0;var s=!B(t);if(U(t)){var e=t.entries();return i.every((function(t,i){var h=e.next().value;return h&&St(h[1],t)&&(s||St(h[0],i))}))&&e.next().done}var h=!1;if(void 0===t.size)if(void 0===i.size)"function"==typeof t.cacheResult&&t.cacheResult();else{h=!0;var r=t;t=i,i=r}var n=!0,o=i._((function(i,e){if(s?!t.has(i):h?!St(i,t.get(e,y)):!St(t.get(e,y),i))return n=!1,!1}));return n&&t.size===o}function Bs(t,i){var s=function(s){t.prototype[s]=i[s]};return Object.keys(i).forEach(s),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(i).forEach(s),t}function Os(t){if(!t||"object"!=typeof t)return t;if(!T(t)){if(!ui(t))return t;t=st(t)}if(I(t)){var i={};return t._((function(t,s){i[s]=Os(t)})),i}var s=[];return t._((function(t){s.push(Os(t))})),s}var Ls=function(t){function i(i){return null==i?Ns():Is(i)&&!U(i)?i:Ns().withMutations((function(s){var e=t(i);oi(e.size),e.forEach((function(t){return s.add(t)}))}))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.fromKeys=function(t){return this(L(t).keySeq())},i.intersect=function(t){return(t=O(t).toArray()).length?Rs.intersect.apply(i(t.pop()),t):Ns()},i.union=function(t){return(t=O(t).toArray()).length?Rs.union.apply(i(t.pop()),t):Ns()},i.prototype.toString=function(){return this.C("Set {","}")},i.prototype.has=function(t){return this.it.has(t)},i.prototype.add=function(t){return zs(this,this.it.set(t,t))},i.prototype.remove=function(t){return zs(this,this.it.remove(t))},i.prototype.clear=function(){return zs(this,this.it.clear())},i.prototype.map=function(t,i){var s=this,e=!1,h=zs(this,this.it.mapEntries((function(h){var r=h[1],n=t.call(i,r,r,s);return n!==r&&(e=!0),[n,n]}),i));return e?h:this},i.prototype.union=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return 0===(i=i.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.G||1!==i.length?this.withMutations((function(s){for(var e=0;e<i.length;e++)t(i[e]).forEach((function(t){return s.add(t)}))})):this.constructor(i[0])},i.prototype.intersect=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];if(0===i.length)return this;i=i.map((function(i){return t(i)}));var e=[];return this.forEach((function(t){i.every((function(i){return i.includes(t)}))||e.push(t)})),this.withMutations((function(t){e.forEach((function(i){t.remove(i)}))}))},i.prototype.subtract=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];if(0===i.length)return this;i=i.map((function(i){return t(i)}));var e=[];return this.forEach((function(t){i.some((function(i){return i.includes(t)}))&&e.push(t)})),this.withMutations((function(t){e.forEach((function(i){t.remove(i)}))}))},i.prototype.sort=function(t){return he(Zt(this,t))},i.prototype.sortBy=function(t,i){return he(Zt(this,i,t))},i.prototype.wasAltered=function(){return this.it.wasAltered()},i.prototype._=function(t,i){var s=this;return this.it._((function(i){return t(i,i,s)}),i)},i.prototype.I=function(t,i){return this.it.I(t,i)},i.prototype.W=function(t){if(t===this.G)return this;var i=this.it.W(t);return t?this.ht(i,t):0===this.size?this.rt():(this.G=t,this.it=i,this)},i}(R);Ls.isSet=Is;var Es,Rs=Ls.prototype;function zs(t,i){return t.G?(t.size=i.size,t.it=i,t):i===t.it?t:0===i.size?t.rt():t.ht(i)}function Vs(t,i){var s=Object.create(Rs);return s.size=t?t.size:0,s.it=t,s.G=i,s}function Ns(){return Es||(Es=Vs($i()))}Rs[Fs]=!0,Rs.delete=Rs.remove,Rs.merge=Rs.concat=Rs.union,Rs.withMutations=Ii,Rs.asImmutable=Di,Rs["@@transducer/init"]=Rs.asMutable=Pi,Rs["@@transducer/step"]=function(t,i){return t.add(i)},Rs["@@transducer/result"]=function(t){return t.asImmutable()},Rs.rt=Ns,Rs.ht=Vs;var Gs,Ws=function(t){function i(t,s,e){if(!(this instanceof i))return new i(t,s,e);if(ni(0!==e,"Cannot step a Range by 0"),t=t||0,void 0===s&&(s=1/0),e=void 0===e?1:Math.abs(e),s<t&&(e=-e),this.nt=t,this.ot=s,this.ut=e,this.size=Math.max(0,Math.ceil((s-t)/e-1)+1),0===this.size){if(Gs)return Gs;Gs=this}}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this.nt+"..."+this.ot+(1!==this.ut?" by "+this.ut:"")+" ]"},i.prototype.get=function(t,i){return this.has(t)?this.nt+b(this,t)*this.ut:i},i.prototype.includes=function(t){var i=(t-this.nt)/this.ut;return i>=0&&i<this.size&&i===Math.floor(i)},i.prototype.slice=function(t,s){return M(t,s,this.size)?this:(t=_(t,this.size),(s=A(s,this.size))<=t?new i(0,0):new i(this.get(t,this.ot),this.get(s,this.ot),this.ut))},i.prototype.indexOf=function(t){var i=t-this.nt;if(i%this.ut==0){var s=i/this.ut;if(s>=0&&s<this.size)return s}return-1},i.prototype.lastIndexOf=function(t){return this.indexOf(t)},i.prototype._=function(t,i){for(var s=this.size,e=this.ut,h=i?this.nt+(s-1)*e:this.nt,r=0;r!==s&&!1!==t(h,i?s-++r:r++,this);)h+=i?-e:e;return r},i.prototype.I=function(t,i){var s=this.size,e=this.ut,h=i?this.nt+(s-1)*e:this.nt,r=0;return new Y((function(){if(r===s)return{value:void 0,done:!0};var n=h;return h+=i?-e:e,X(t,i?s-++r:r++,n)}))},i.prototype.equals=function(t){return t instanceof i?this.nt===t.nt&&this.ot===t.ot&&this.ut===t.ut:Ds(this,t)},i}(ht);function Hs(t,i,s){for(var e=ai(i),h=0;h!==e.length;)if((t=fi(t,e[h++],y))===y)return s;return t}function Us(t,i){return Hs(this,t,i)}function js(){oi(this.size);var t={};return this._((function(i,s){t[s]=i})),t}O.isIterable=T,O.isKeyed=I,O.isIndexed=D,O.isAssociative=B,O.isOrdered=U,O.Iterator=Y,Bs(O,{toArray:function(){oi(this.size);var t=new Array(this.size||0),i=I(this),s=0;return this._((function(e,h){t[s++]=i?[h,e]:e})),t},toIndexedSeq:function(){return new zt(this)},toJS:function(){return Os(this)},toKeyedSeq:function(){return new Rt(this,!0)},toMap:function(){return Oi(this.toKeyedSeq())},toObject:js,toOrderedMap:function(){return Ss(this.toKeyedSeq())},toOrderedSet:function(){return he(I(this)?this.valueSeq():this)},toSet:function(){return Ls(I(this)?this.valueSeq():this)},toSetSeq:function(){return new Vt(this)},toSeq:function(){return D(this)?this.toIndexedSeq():I(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return As(I(this)?this.valueSeq():this)},toList:function(){return hs(I(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},C:function(t,i){return 0===this.size?t+i:t+" "+this.toSeq().map(this.ct).join(", ")+" "+i},concat:function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return Qt(this,Yt(this,t))},includes:function(t){return this.some((function(i){return St(i,t)}))},entries:function(){return this.I(2)},every:function(t,i){oi(this.size);var s=!0;return this._((function(e,h,r){if(!t.call(i,e,h,r))return s=!1,!1})),s},filter:function(t,i){return Qt(this,Ut(this,t,i,!0))},find:function(t,i,s){var e=this.findEntry(t,i);return e?e[1]:s},forEach:function(t,i){return oi(this.size),this._(i?t.bind(i):t)},join:function(t){oi(this.size),t=void 0!==t?""+t:",";var i="",s=!0;return this._((function(e){s?s=!1:i+=t,i+=null!=e?e.toString():""})),i},keys:function(){return this.I(0)},map:function(t,i){return Qt(this,Wt(this,t,i))},reduce:function(t,i,s){return Ks(this,t,i,s,arguments.length<2,!1)},reduceRight:function(t,i,s){return Ks(this,t,i,s,arguments.length<2,!0)},reverse:function(){return Qt(this,Ht(this,!0))},slice:function(t,i){return Qt(this,jt(this,t,i,!0))},some:function(t,i){return!this.every(Qs(t),i)},sort:function(t){return Qt(this,Zt(this,t))},values:function(){return this.I(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,i){return v(t?this.toSeq().filter(t,i):this)},countBy:function(t,i){return function(t,i,s){var e=Oi().asMutable();return t._((function(h,r){e.update(i.call(s,h,r,t),0,(function(t){return t+1}))})),e.asImmutable()}(this,t,i)},equals:function(t){return Ds(this,t)},entrySeq:function(){var t=this;if(t.T)return new nt(t.T);var i=t.toSeq().map(Js).toIndexedSeq();return i.fromEntrySeq=function(){return t.toSeq()},i},filterNot:function(t,i){return this.filter(Qs(t),i)},findEntry:function(t,i,s){var e=s;return this._((function(s,h,r){if(t.call(i,s,h,r))return e=[h,s],!1})),e},findKey:function(t,i){var s=this.findEntry(t,i);return s&&s[0]},findLast:function(t,i,s){return this.toKeyedSeq().reverse().find(t,i,s)},findLastEntry:function(t,i,s){return this.toKeyedSeq().reverse().findEntry(t,i,s)},findLastKey:function(t,i){return this.toKeyedSeq().reverse().findKey(t,i)},first:function(t){return this.find(x,null,t)},flatMap:function(t,i){return Qt(this,function(t,i,s){var e=ii(t);return t.toSeq().map((function(h,r){return e(i.call(s,h,r,t))})).flatten(!0)}(this,t,i))},flatten:function(t){return Qt(this,Xt(this,t,!0))},fromEntrySeq:function(){return new Nt(this)},get:function(t,i){return this.find((function(i,s){return St(s,t)}),void 0,i)},getIn:Us,groupBy:function(t,i){return function(t,i,s){var e=I(t),h=(U(t)?Ss():Oi()).asMutable();t._((function(r,n){h.update(i.call(s,r,n,t),(function(t){return(t=t||[]).push(e?[n,r]:r),t}))}));var r=ii(t);return h.map((function(i){return Qt(t,r(i))})).asImmutable()}(this,t,i)},has:function(t){return this.get(t,y)!==y},hasIn:function(t){return Hs(this,t,y)!==y},isSubset:function(t){return t="function"==typeof t.includes?t:O(t),this.every((function(i){return t.includes(i)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:O(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(i){return St(i,t)}))},keySeq:function(){return this.toSeq().map(qs).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Kt(this,t)},maxBy:function(t,i){return Kt(this,i,t)},min:function(t){return Kt(this,t?te(t):se)},minBy:function(t,i){return Kt(this,i?te(i):se,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,i){return Qt(this,$t(this,t,i,!0))},skipUntil:function(t,i){return this.skipWhile(Qs(t),i)},sortBy:function(t,i){return Qt(this,Zt(this,i,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,i){return Qt(this,function(t,i,s){var e=si(t);return e.F=function(e,h){var r=this;if(h)return this.cacheResult()._(e,h);var n=0;return t._((function(t,h,o){return i.call(s,t,h,o)&&++n&&e(t,h,r)})),n},e.P=function(e,h){var r=this;if(h)return this.cacheResult().I(e,h);var n=t.I(2,h),o=!0;return new Y((function(){if(!o)return{value:void 0,done:!0};var t=n.next();if(t.done)return t;var h=t.value,a=h[0],l=h[1];return i.call(s,l,a,r)?2===e?t:X(e,a,l,t):(o=!1,{value:void 0,done:!0})}))},e}(this,t,i))},takeUntil:function(t,i){return this.takeWhile(Qs(t),i)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.j||(this.j=function(t){if(t.size===1/0)return 0;var i=U(t),s=I(t),e=i?1:0;return function(t,i){return i=vt(i,3432918353),i=vt(i<<15|i>>>-15,461845907),i=vt(i<<13|i>>>-13,5),i=vt((i=(i+3864292196|0)^t)^i>>>16,2246822507),bt((i=vt(i^i>>>13,3266489909))^i>>>16)}(t._(s?i?function(t,i){e=31*e+ee(Mt(t),Mt(i))|0}:function(t,i){e=e+ee(Mt(t),Mt(i))|0}:i?function(t){e=31*e+Mt(t)|0}:function(t){e=e+Mt(t)|0}),e)}(this))}});var $s=O.prototype;$s[C]=!0,$s[$]=$s.values,$s.toJSON=$s.toArray,$s.ct=ci,$s.inspect=$s.toSource=function(){return this.toString()},$s.chain=$s.flatMap,$s.contains=$s.includes,Bs(L,{flip:function(){return Qt(this,Gt(this))},mapEntries:function(t,i){var s=this,e=0;return Qt(this,this.toSeq().map((function(h,r){return t.call(i,[r,h],e++,s)})).fromEntrySeq())},mapKeys:function(t,i){var s=this;return Qt(this,this.toSeq().flip().map((function(e,h){return t.call(i,e,h,s)})).flip())}});var Ys=L.prototype;Ys[F]=!0,Ys[$]=$s.entries,Ys.toJSON=js,Ys.ct=function(t,i){return ci(i)+": "+ci(t)},Bs(E,{toKeyedSeq:function(){return new Rt(this,!1)},filter:function(t,i){return Qt(this,Ut(this,t,i,!1))},findIndex:function(t,i){var s=this.findEntry(t,i);return s?s[0]:-1},indexOf:function(t){var i=this.keyOf(t);return void 0===i?-1:i},lastIndexOf:function(t){var i=this.lastKeyOf(t);return void 0===i?-1:i},reverse:function(){return Qt(this,Ht(this,!1))},slice:function(t,i){return Qt(this,jt(this,t,i,!1))},splice:function(t,i){var s=arguments.length;if(i=Math.max(i||0,0),0===s||2===s&&!i)return this;t=_(t,t<0?this.count():this.size);var e=this.slice(0,t);return Qt(this,1===s?e:e.concat(ri(arguments,2),this.slice(t+i)))},findLastIndex:function(t,i){var s=this.findLastEntry(t,i);return s?s[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return Qt(this,Xt(this,t,!1))},get:function(t,i){return(t=b(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?i:this.find((function(i,s){return s===t}),void 0,i)},has:function(t){return(t=b(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Qt(this,function(t,i){var s=si(t);return s.size=t.size&&2*t.size-1,s.F=function(s,e){var h=this,r=0;return t._((function(t){return(!r||!1!==s(i,r++,h))&&!1!==s(t,r++,h)}),e),r},s.P=function(s,e){var h,r=t.I(1,e),n=0;return new Y((function(){return(!h||n%2)&&(h=r.next()).done?h:n%2?X(s,n++,i):X(s,n++,h.value,h)}))},s}(this,t))},interleave:function(){var t=[this].concat(ri(arguments)),i=Jt(this.toSeq(),ht.of,t),s=i.flatten(!0);return i.size&&(s.size=i.size*t.length),Qt(this,s)},keySeq:function(){return Ws(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,i){return Qt(this,$t(this,t,i,!1))},zip:function(){var t=[this].concat(ri(arguments));return Qt(this,Jt(this,ie,t))},zipAll:function(){var t=[this].concat(ri(arguments));return Qt(this,Jt(this,ie,t,!0))},zipWith:function(t){var i=ri(arguments);return i[0]=this,Qt(this,Jt(this,t,i))}});var Xs=E.prototype;Xs[P]=!0,Xs[H]=!0,Bs(R,{get:function(t,i){return this.has(t)?t:i},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var Zs=R.prototype;function Ks(t,i,s,e,h,r){return oi(t.size),t._((function(t,r,n){h?(h=!1,s=t):s=i.call(e,s,t,r,n)}),r),s}function qs(t,i){return i}function Js(t,i){return[i,t]}function Qs(t){return function(){return!t.apply(this,arguments)}}function te(t){return function(){return-t.apply(this,arguments)}}function ie(){return ri(arguments)}function se(t,i){return t<i?1:t>i?-1:0}function ee(t,i){return t^i+2654435769+(t<<6)+(t>>2)|0}Zs.has=$s.includes,Zs.contains=Zs.includes,Zs.keys=Zs.values,Bs(et,Ys),Bs(ht,Xs),Bs(rt,Zs);var he=function(t){function i(t){return null==t?ae():Ps(t)?t:ae().withMutations((function(i){var s=R(t);oi(s.size),s.forEach((function(t){return i.add(t)}))}))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.fromKeys=function(t){return this(L(t).keySeq())},i.prototype.toString=function(){return this.C("OrderedSet {","}")},i}(Ls);he.isOrderedSet=Ps;var re,ne=he.prototype;function oe(t,i){var s=Object.create(ne);return s.size=t?t.size:0,s.it=t,s.G=i,s}function ae(){return re||(re=oe(bs()))}ne[H]=!0,ne.zip=Xs.zip,ne.zipWith=Xs.zipWith,ne.zipAll=Xs.zipAll,ne.rt=ae,ne.ht=oe;var le=function(t,i){var s;!function(t){if(G(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(W(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===t||"object"!=typeof t)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(t);var e=function(r){var n=this;if(r instanceof e)return r;if(!(this instanceof e))return new e(r);if(!s){s=!0;var o=Object.keys(t),a=h.ft={};h.dt=i,h.L=o,h.yt=t;for(var l=0;l<o.length;l++){var u=o[l];a[u]=l,h[u]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+fe(this)+' with property "'+u+'" since that property name is part of the Record API.'):ge(h,u)}}return this.G=void 0,this.St=hs().withMutations((function(t){t.setSize(n.L.length),L(r).forEach((function(i,s){t.set(n.ft[s],i===n.yt[s]?void 0:i)}))})),this},h=e.prototype=Object.create(ue);return h.constructor=e,i&&(e.displayName=i),e};le.prototype.toString=function(){for(var t,i=fe(this)+" { ",s=this.L,e=0,h=s.length;e!==h;e++)i+=(e?", ":"")+(t=s[e])+": "+ci(this.get(t));return i+" }"},le.prototype.equals=function(t){return this===t||t&&de(this).equals(de(t))},le.prototype.hashCode=function(){return de(this).hashCode()},le.prototype.has=function(t){return this.ft.hasOwnProperty(t)},le.prototype.get=function(t,i){if(!this.has(t))return i;var s=this.ft[t],e=this.St.get(s);return void 0===e?this.yt[t]:e},le.prototype.set=function(t,i){if(this.has(t)){var s=this.St.set(this.ft[t],i===this.yt[t]?void 0:i);if(s!==this.St&&!this.G)return ce(this,s)}return this},le.prototype.remove=function(t){return this.set(t)},le.prototype.clear=function(){var t=this.St.clear().setSize(this.L.length);return this.G?this:ce(this,t)},le.prototype.wasAltered=function(){return this.St.wasAltered()},le.prototype.toSeq=function(){return de(this)},le.prototype.toJS=function(){return Os(this)},le.prototype.entries=function(){return this.I(2)},le.prototype.I=function(t,i){return de(this).I(t,i)},le.prototype._=function(t,i){return de(this)._(t,i)},le.prototype.W=function(t){if(t===this.G)return this;var i=this.St.W(t);return t?ce(this,i,t):(this.G=t,this.St=i,this)},le.isRecord=G,le.getDescriptiveName=fe;var ue=le.prototype;function ce(t,i,s){var e=Object.create(Object.getPrototypeOf(t));return e.St=i,e.G=s,e}function fe(t){return t.constructor.displayName||t.constructor.name||"Record"}function de(t){return ct(t.L.map((function(i){return[i,t.get(i)]})))}function ge(t,i){try{Object.defineProperty(t,i,{get:function(){return this.get(i)},set:function(t){ni(this.G,"Cannot set on an immutable record."),this.set(i,t)}})}catch(t){}}ue[N]=!0,ue.delete=ue.remove,ue.deleteIn=ue.removeIn=pi,ue.getIn=Us,ue.hasIn=$s.hasIn,ue.merge=xi,ue.mergeWith=Mi,ue.mergeIn=Ti,ue.mergeDeep=ki,ue.mergeDeepWith=Ci,ue.mergeDeepIn=Fi,ue.setIn=yi,ue.update=vi,ue.updateIn=bi,ue.withMutations=Ii,ue.asMutable=Pi,ue.asImmutable=Di,ue[$]=ue.entries,ue.toJSON=ue.toObject=$s.toObject,ue.inspect=ue.toSource=function(){return this.toString()};const me=le({type:"color",r:1,g:1,b:1,a:1});class ye extends me{constructor(t){super(t)}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.vt||(this.vt=new ye({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.vt}getLighter(){return this.bt||(this.bt=new ye({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.bt}getDarker(){return this.xt||(this.xt=new ye({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.xt}toRGBAString(){return`rgba( ${255*this.r}, ${255*this.g}, ${255*this.b}, ${255*this.a} )`}}const pe=t=>!(!t||"object"!=typeof t||!("type"in t)||"color"!==t.type),Se=(t,i,s,e=255)=>new ye({r:t/255,g:i/255,b:s/255,a:e/255}),ve=t=>{const i=t.startsWith("#")?t.substring(1):t.startsWith("0x")?t.substr(2):t;switch(i.length){case 8:return new ye({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255,a:Number(`0x${i.substring(6,8)}`)/255});case 6:return new ye({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255});case 4:return new ye({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255,a:Number(`0x${i.charAt(3)}${i.charAt(3)}`)/255});case 3:return new ye({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255});default:throw new Error(`ColorHEX parsing error | input: ${t}`)}},be=(t,i=1,s=1)=>{let e,h,r;t/=360;const n=Math.floor(6*t),o=6*t-n,a=s*(1-i),l=s*(1-o*i),u=s*(1-(1-o)*i);switch(n%6){case 0:e=s,h=u,r=a;break;case 1:e=l,h=s,r=a;break;case 2:e=a,h=s,r=u;break;case 3:e=a,h=l,r=s;break;case 4:e=u,h=a,r=s;break;default:e=s,h=a,r=l}return new ye({r:e,g:h,b:r})},xe={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Me=new ye({}),_e=Se(0,0,0,0),Ae=(t,i)=>t.value-i.value,we=le({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:Se(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1}),ke=t=>{const{steps:i}=t,s=i.length;i.sort(Ae);const[e,h]=s>0?[i[0].value,i[s-1].value]:[0,0],r=s>0?s-1:0,n=Array(r);for(let t=0;t<r;t+=1)n[t]={min:i[t],max:i[t+1]};return{min:e,max:h,length:s,steps:i,subranges:n,isValid:s>0&&e!==h}};class Ce extends we{constructor(t){super(((t,i)=>({steps:t.steps,title:t.title,units:t.units,interpolate:t.interpolate,color:t.color,length:i.length,min:i.min,max:i.max,subranges:i.subranges,isValid:i.isValid}))(t,ke(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.map((t=>`${t.value},${t.color.toString()}`)).join(",")}`}setSteps(t){return this.merge(ke({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}getColors(t){if(Array.isArray(t)){if(Array.isArray(t[0])){const i=t,s=i.length,e=i[0].length,h=[...Array(s)].map((()=>Array(e)));for(let t=0;t<s;t+=1)for(let s=0;s<e;s+=1)h[t][s]=this.Mt(i[t][s]);return h}const i=t,s=i.length,e=Array(s);for(let t=0;t<s;t+=1)e[t]=this.Mt(i[t]);return e}return this.Mt(t)}Mt(t){const{steps:i}=this,s=i.length;if(0===s)return this.getFallbackColor();if(1===s)return i[0].color||this.color;if(this.interpolate){for(let n=0;n<s-1;n+=1){const s=i[n],o=i[n+1],a=Math.min(s.value,o.value),l=Math.max(s.value,o.value);if(t>=a&&t<=l){if(a===l)return s.color;const i=(t-s.value)/(o.value-s.value);return e=s.color,h=o.color,r=i,new ye({r:e.r+(h.r-e.r)*r,g:e.g+(h.g-e.g)*r,b:e.b+(h.b-e.b)*r,a:e.a+(h.a-e.a)*r})}}return t<i[0].value?i[0].color:i[s-1].color}var e,h,r;for(let e=s-1;e>=0;e-=1)if(t>=i[e].value)return i[e].color;return i[0].color}}const Te=le({type:"fillstyle",fillType:"empty"});class Fe extends Te{toString(){return"emptyFill"}}const Ie=new Fe,Pe=le({type:"fillstyle",fillType:"solid",color:Se(255,255,255)});class De extends Pe{}class Be extends De{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}setColor(t){return pe(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const Oe=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"solid"===t.fillType);class Le extends De{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}setFallbackColor(t){return pe(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const Ee=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"individual"===t.fillType),Re=le({type:"fillstyle",fillType:"palette",lut:new Ce({steps:[]}),lookUpProperty:"value"}),ze=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"palette"===t.fillType);var Ve=function(t,i){return Ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])},Ve(t,i)};function Ne(t){var i="function"==typeof Symbol&&Symbol.iterator,s=i&&t[i],e=0;if(s)return s.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ge(t,i){var s="function"==typeof Symbol&&t[Symbol.iterator];if(!s)return t;var e,h,r=s.call(t),n=[];try{for(;(void 0===i||i-- >0)&&!(e=r.next()).done;)n.push(e.value)}catch(t){h={error:t}}finally{try{e&&!e.done&&(s=r.return)&&s.call(r)}finally{if(h)throw h.error}}return n}function We(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(Ge(arguments[i]));return t}var He=function(t){function i(s){var e,h="EventError: "+s+"}";return e=t.call(this,h)||this,Object.setPrototypeOf(e,i.prototype),e}return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=t}Ve(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}(i,t),i}(Error),Ue=0,je=function(t,i){return new He("Event listener with "+t.token+" id does not exist at Eventer with "+i+" id.")},$e=function(){function t(){this.id=++Ue,this.lastEventIndex=0,this.topics=new Map}return t.prototype.on=function(t,i,s){var e,h,r=this.topics.get(t),n=s||{token:(e=this.id)+"-"+(h=++this.lastEventIndex),ownerIndex:e,id:h};return r?r.set(n,i):this.topics.set(t,new Map([[n,i]])),n},t.prototype.has=function(t,i){var s,e;if(i)return(n=this.topics.get(i))?(o=n.get(t))||je(t,this.id):new He("Eventer with "+t.ownerIndex+" does not have "+i+".");try{for(var h=Ne(this.topics),r=h.next();!r.done;r=h.next()){var n,o,a=Ge(r.value,2);if(a[0],o=(n=a[1]).get(t))return o}}catch(t){s={error:t}}finally{try{r&&!r.done&&(e=h.return)&&e.call(h)}finally{if(s)throw s.error}}return je(t,this.id)},t.prototype.off=function(t,i){var s,e;if(i)return!(!(n=this.topics.get(i))||!n.delete(t));try{for(var h=Ne(this.topics),r=h.next();!r.done;r=h.next()){var n,o=Ge(r.value,2);if(o[0],(n=o[1]).delete(t))return!0}}catch(t){s={error:t}}finally{try{r&&!r.done&&(e=h.return)&&e.call(h)}finally{if(s)throw s.error}}return!1},t.prototype.allOff=function(){return this.topics.clear(),this},t.prototype.topicOff=function(t){return this.topics.delete(t)},t.prototype.emit=function(t){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];var e=this.topics.get(t),h=0;if(e){var r=new Map(e);r.forEach((function(t){t.apply(void 0,We(i)),h++}))}return h},t.prototype.listeners=function(t){return this.topics.get(t)||new Map},t}();const Ye={linear:(t,i,s)=>{const e=i-t;return h=>h<s?t+e/s*h:i},easeIn:(t,i,s)=>e=>e<s?t+Math.abs(2*(Math.sqrt(.5)*e/s)**2)*(i-t):i,easeOut:(t,i,s)=>e=>e<s?t+Math.abs(1-2*(Math.sqrt(.5)*(1-e/s))**2)*(i-t):i,ease:(t,i,s)=>e=>e<s?t+(e<s/2?.5*(e/s*2)**2.5:.5+.5*(1-(1-2*(e/s-.5))**2.5))*(i-t):i,logarithmic:t=>{const i=nr(t);return(s,e,h)=>{const r=i(s),n=i(e);return i=>i<h?t**(r+Math.abs(1-2*(Math.sqrt(.5)*(1-i/h))**2)*(n-r)):e}}};class Xe{constructor(t,i,s,e=Ye.linear,h){this.delta=0,this.nextAnimations=new Array,this._t=!1,this.easing=Ye.linear,this.At=new $e,this.isOver=()=>(this.delta===this.duration||this._t)&&0===this.nextAnimations.length,this.values=t,this.action=i,this.duration=s,this.easing=e,this.wt=h,this.eases=t.map((([t,i])=>e(t,i,s)))}kt(){this.At.emit("start")}start(){return this.wt.includes(this)||this.wt.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach((t=>this.nextAnimations.push(t))):this.nextAnimations.push(t),this}NextAnimation(t,i,s=this.duration,e=this.easing){const h=new Xe(t,i,s,e,this.wt);return this.nextAnimations.push(h),h}onAnimationStart(t,i){return this.At.on("start",t,i)}onAnimationEnd(t,i){return this.At.on("end",t,i)}onEveryAnimationEnd(t,i){return this.At.on("everyEnd",t,i)}onAllAnimationEnd(t,i){return this.At.on("allEnd",t,i)}allOffAnimationEnd(){return this.At.topicOff("end"),this}allOffEveryAnimationEnd(){return this.At.topicOff("everyEnd"),this}allOffAllAnimationEnd(){return this.At.topicOff("allEnd"),this}offAnimationEnd(t){return this.At.off(t,"end")}offEveryAnimationEnd(t){return this.At.off(t,"everyEnd")}offAllAnimationEnd(t){return this.At.off(t,"allEnd")}finish(t=!0){if(this._t=!0,this.wt.splice(this.wt.indexOf(this),1),this.nextAnimations.length>0){const i=this.nextAnimations[0];return t&&(this.At.listeners("allEnd").forEach(((t,s)=>i.onAllAnimationEnd(t,s))),this.At.listeners("everyEnd").forEach(((t,s)=>i.onEveryAnimationEnd(t,s)))),i.addNextAnimations(this.nextAnimations.slice(1)),i.start(),t&&(this.At.emit("end",i),this.At.emit("everyEnd",i)),i}t&&(this.At.emit("end",void 0),this.At.emit("everyEnd",void 0),this.At.emit("allEnd"))}finishAll(t=!0){let i=this;for(;i;)i=i.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(Ch):this.values.map(Ch)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let i=0;i<this.nextAnimations.length;i+=1)t+=this.nextAnimations[i].duration-this.nextAnimations[i].delta;return t}}const Ze=(t,i=60)=>{i>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const s=[];let e,h,r=0;const n=()=>{e=void 0;const o=Date.now();h=h||o,r=o-h,r/1e3>=1/i&&(h=Date.now()-r%(1e3/i),s.forEach((t=>{0===t.delta&&t.kt(),t.delta+=r-r%(1e3/i),t.delta>t.duration&&(t.delta=t.duration),t.action(t.eases.map((i=>i(t.delta)))),t.delta===t.duration&&t.finish()})),t()),s.length>0?e=Mh.requestAnimationFrame(n):(e=void 0,h=void 0)};return(t=1e3,i=Ye.linear)=>(h,r,o=t)=>{const a=new Xe(h,r,o,i,s).start();return e||(e=Mh.requestAnimationFrame(n)),a}};var Ke,qe;t.GradientShape=void 0,(Ke=t.GradientShape||(t.GradientShape={})).circle="circle",Ke.ellipse="ellipse",t.GradientExtent=void 0,(qe=t.GradientExtent||(t.GradientExtent={})).closestSide="closest-side",qe.closestCorner="closest-corner",qe.farthestSide="farthest-side",qe.farthestCorner="farthest-corner";const Je=le({type:"fillstyle",fillType:"radial-gradient",stops:[{color:ve("#f00"),offset:0},{color:ve("#0f0"),offset:1}],position:e(.5,.5),shape:t.GradientShape.ellipse,extent:t.GradientExtent.farthestCorner});class Qe extends Je{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.extent},${this.position.x},${this.position.y},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}}const th=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"radial-gradient"===t.fillType),ih=le({type:"fillstyle",fillType:"linear-gradient",stops:[{color:ve("#f00"),offset:0},{color:ve("#0f0"),offset:1}],angle:0});class sh extends ih{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const i=t.sort(((t,i)=>t.offset-i.offset));return this.set("stops",i)}getColorStops(){return this.get("stops")}setAngle(t,i){return this.set("angle",i?pn(t):t)}getAngle(t){return t?yn(this.get("angle")):this.get("angle")}}const eh=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"linear-gradient"===t.fillType),hh=le({type:"linestyle",lineType:"empty"}),rh=new class extends hh{constructor(){super(...arguments),this.thickness=0}setThickness(t){return this}getThickness(){return 0}Ct(){return 0}setFillStyle(t){return this}getFillStyle(){return Ie}};class nh{constructor(t,i,s,e){this.cellIndex=t,this.cellSpan=i,this.cellsAmount=s,this.observedAmount=e,this.x=new oh,this.y=new oh,this.z=new oh,this.At=new $e;const h={...t},r={...i};if(e){const t=t=>{this.cellsAmount.x=t.reduce(Nr,0),this.cellIndex.x=t.reduce(((t,i,s)=>s>=h.x?t:t+i),0),this.cellSpan.x=t.reduce(((t,i,s)=>s>=h.x&&s<h.x+r.x?t+i:t),0),this.At.emit("cell-resize")},i=e.x.Tt(t);t(e.x.M());const s=t=>{this.cellsAmount.y=t.reduce(Nr,0),this.cellIndex.y=t.reduce(((t,i,s)=>s>=h.y?t:t+i),0),this.cellSpan.y=t.reduce(((t,i,s)=>s>=h.y&&s<h.y+r.y?t+i:t),0),this.At.emit("cell-resize")},n=e.y.Tt(s);s(e.y.M()),this.Ft=()=>{e.x.It(i),e.y.It(n)}}}Pt(){return this.Ft&&(this.Ft(),this.Ft=void 0),this}Dt(t){return this.At.on("cell-resize",t)}Bt(t){return this.At.off(t,"cell-resize")}}class oh extends i{constructor(){super(...arguments),this.Ot=0,this.Lt=10,this.Et=1}Rt(){return this.o=!1,this}zt(){return this.o=!0,this}getInnerStart(){return this.Ot}getInnerEnd(){return this.Lt}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}Vt(t,i){return this.Ot=t,this.Lt=i,this.Nt(),this}Gt(t){return this.Et=t,this.Nt(),this}Wt(t){return t/this.Et}Nt(){const t=this.Wt(this.Lt-this.Ot),i=this.Et;void 0!==this.Ht&&!1!==Ih(t,this.Ht)||(this.o=!0,this.Ut=i,this.Ht=t)}jt(){return this.Ht}$t(){return this.Ut}Yt(){return this.Lt<this.Ot}Xt(t,i){return!0}}const ah={d1:t=>new t.scale1DConstructor(0,1,1,void 0),d2:t=>(new t.scaleXYConstructor).Zt({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new nh({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},lh=(t,i,s)=>i===s?t:s.Kt(i.qt(t)),uh=(t,i,s)=>{if(i===s)return t;const e=i instanceof En?i.x:i.x instanceof En?i.x.x:i.x.Jt,h=i instanceof En?i.y:i.y instanceof En?i.y.y:i.y.Jt,r=s instanceof En?s.x:s.x instanceof En?s.x.x:s.x.Jt,n=s instanceof En?s.y:s.y instanceof En?s.y.y:s.y.Jt;return{...t,x:lh(t.x,e,r),y:lh(t.y,h,n)}},ch=(...t)=>{if(0===t.length)return{remove:Fh};let i=!1;const s=t.map((s=>s.onIntervalChange(((e,h,r)=>((s,e,h)=>{i||(i=!0,t.filter((t=>t!==s)).forEach((t=>t.Qt(e,h,!1,!1,"synchronizedAxis"))),i=!1)})(s,h,r)))));let e=!1;const h=t.map((i=>i.onStoppedStateChanged(((s,h)=>((i,s)=>{e||(e=!0,t.filter((t=>t!==i)).forEach((t=>t.setStopped(s))),e=!1)})(i,h)))));return{remove:()=>{t.forEach(((t,i)=>{t.offIntervalChange(s[i]),t.offStoppedStateChanged(h[i])}))}}};class fh{constructor(t){this.ti=t,this.ii=new Map}si(t){const i=this.ii.get(t);return i&&i.length>0?i[0]:void 0}ei(t){let i=this.ii.get(t.lut);i?i.push(t):(i=[t],this.ii.set(t.lut,i))}hi(t){const i=this.ii.get(t.lut);if(i){const s=i.indexOf(t);s>=0&&i.splice(s,1),0===i.length&&(this.ti.deleteTexture(t.texture),this.ii.delete(t.lut))}}ri(){this.ii.forEach((t=>{var i;const s=null===(i=t[0])||void 0===i?void 0:i.texture;s&&this.ti.deleteTexture(s)})),this.ii.clear()}}const dh=t=>new fh(t),gh=-34028234663852886e22;class mh extends Error{constructor(t,i){super(`ChartError: ${t} ${i?`in ${i.constructor.name}`:""}`),Object.setPrototypeOf(this,mh.prototype)}}class yh extends Error{constructor(t,i,s=!1){const e=`EngineError: ${t} ${i?`in ${i.constructor.name}`:""}`;super(e),s&&Mh.alert(e),Object.setPrototypeOf(this,yh.prototype)}}class ph extends yh{constructor(t){super(t),Object.setPrototypeOf(this,ph.prototype)}}var Sh,vh,bh,xh;t.UISpace=void 0,(Sh=t.UISpace||(t.UISpace={}))[Sh.Content=0]="Content",Sh[Sh.PaddedContent=1]="PaddedContent",Sh[Sh.PaddedBackground=2]="PaddedBackground",Sh[Sh.Everything=3]="Everything",t.UIVisibilityModes=void 0,(vh=t.UIVisibilityModes||(t.UIVisibilityModes={}))[vh.never=0]="never",vh[vh.always=1]="always",vh[vh.whenHovered=2]="whenHovered",vh[vh.whenDragged=3]="whenDragged",vh[vh.whenNotDragged=4]="whenNotDragged",vh[vh.whenHoveredOrDragged=5]="whenHoveredOrDragged",t.UIDraggingModes=void 0,(bh=t.UIDraggingModes||(t.UIDraggingModes={}))[bh.notDraggable=0]="notDraggable",bh[bh.draggable=1]="draggable",bh[bh.onlyHorizontal=2]="onlyHorizontal",bh[bh.onlyVertical=3]="onlyVertical",t.UIDirections=void 0,(xh=t.UIDirections||(t.UIDirections={}))[xh.Up=0]="Up",xh[xh.Right=1]="Right",xh[xh.Down=2]="Down",xh[xh.Left=3]="Left";const Mh="undefined"!=typeof window?window:"undefined"!=typeof global&&global._lcjs?global._lcjs:{},_h=(t,i)=>t.x===i.x&&t.y===i.y,Ah=t=>t!==Dr&&t!==Br&&!Number.isNaN(t)&&Number.isFinite(t)&&t!==1/0&&t!==-1/0,wh=(t,i)=>Math.min(t,i.y),kh=(t,i)=>Math.max(t,i.y),Ch=t=>t[1],Th=t=>t.dispose(),Fh=()=>{},Ih=(t,i)=>t===i,Ph=(t,i,s)=>s>i?Math.min(Math.max(t,i),s):Math.min(Math.max(t,s),i),Dh=t=>Array.prototype.concat.apply([],t),Bh=(t,i)=>{const{x:s,y:e}={x:t[0].length,y:t.length},{column:h,row:r}=i,n=Math.max(0,h.start),o=Math.min(s,h.end),a=Math.max(0,r.start),l=Math.min(e,r.end),u=o-n,c=l-a,f=Array.from(Array(c)).map((()=>Array(u)));for(let i=a,s=0;i<l;i+=1,s+=1)for(let e=n,h=0;e<o;e+=1,h+=1)f[s][h]=t[i][e];return{sliced:f,rows:c,columns:u}},Oh=(t,i)=>{const s=i&&void 0!==i.row.start?i.row.start:0,e=i&&void 0!==i.row.end?i.row.end:t.y,h=i&&void 0!==i.column.start?i.column.start:0,r=i&&void 0!==i.column.end?i.column.end:t.x;return[Math.min(s,e),Math.max(s,e),Math.min(h,r),Math.max(h,r)]},Lh=(t,i)=>{for(;i;)t.push(t.shift()),i-=1},Eh=t=>{const i=[];for(const s of t)i.push(s.slice());return i},Rh=(t,i)=>void 0!==t?t:i,zh=t=>t.ni(),Vh=t=>t.oi(),Nh=t=>t.ai(),Gh=t=>t.li(),Wh=t=>t.min.x,Hh=t=>t.max.x,Uh=t=>t.min.y,jh=t=>t.max.y,$h=(t,i,s,e,h)=>{if(t.length>0){let r=h?e(h):void 0;for(let e=0;e<t.length;e+=1){const h=i(t[e]);void 0!==h&&(r=void 0!==r?s(r,h):h)}return r}if(h)return e(h)},Yh=(t,i)=>t.position===i.position&&t.high===i.high&&t.low===i.low,Xh=e(0,1),Zh=e(1,0),Kh=e(0,-1),qh=e(-1,0),Jh=e(0,0),Qh=i=>{switch(i){case t.UIDirections.Up:return Xh;case t.UIDirections.Right:return Zh;case t.UIDirections.Down:return Kh;case t.UIDirections.Left:return qh;default:return Jh}},tr=i=>i===t.UIDirections.Left||i===t.UIDirections.Right,ir=t=>{t.stopPropagation(),t.preventDefault()},sr=(t,i)=>{if(!i){const i=t.length,s=new Float32Array(2*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,e+=2}return s}const s=t.length,e=new Float32Array(4*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s.x),n=Math.fround(s.y);e[h+0]=r,e[h+1]=n,e[h+2]=s.x-r,e[h+3]=s.y-n,h+=4}return e},er=t=>{const i=t.length,s=new Float32Array(3*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,s[e+2]=i.z,e+=3}return s},hr=t=>i=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)},rr=t=>{let i=t.length;for(let s=0;s<i-1;s+=1)t[s].x===t[s+1].x&&t[s].y===t[s+1].y&&(t.splice(s,1),s-=1,i-=1);return t},nr=t=>{const i=Math.log(t);return t=>Math.log(t)/i},or=nr(Math.E),ar=(t,i)=>{const s=i[t];return s?s():void 0},lr=(t,i)=>{let s;if(i)s=i;else{const i={x:0,y:0};for(let s=0;s<t.length;s+=1)i.x+=t[s].x/t.length,i.y+=t[s].y/t.length;s=i}return t.sort(((t,i)=>Sn(ln(t,s))-Sn(ln(i,s))))},ur=(t,i,s)=>{if(0===t.length)return!1===s.canReturnB?i.slice():i;const e=i.length;if(e<1e5)return t.push.apply(t,i),t;for(let s=0;s<e;s+=1)t.push(i[s]);return t},cr=(t,i,s)=>s<0?t:s>1?i:Se(t.getR()+s*(i.getR()-t.getR()),t.getG()+s*(i.getG()-t.getG()),t.getB()+s*(i.getB()-t.getB()),t.getA()+s*(i.getA()-t.getA())),fr=t=>255===t.getA()?t:t.setA(255),dr=(()=>{const i=Se(0,0,0);return s=>(s=fr(s),new Qe({shape:t.GradientShape.circle,extent:t.GradientExtent.farthestCorner,position:{x:.2,y:.8},stops:[{offset:0,color:s},{offset:1,color:cr(s,i,.5)}]}))})(),gr=(()=>{const t=t=>{var i;if(t){if(Oe(t)){if(0===t.getColor().getA())return;return t.getColor()}if(th(t)||eh(t)){const s=t.getColorStops();return 3===s.length?s[1].color:null===(i=s[0])||void 0===i?void 0:i.color}ze(t)}};return(i,s,e)=>{const h=[];if(e.fill&&h.push(e.fill),e.fill2&&h.push(e.fill2),e.stroke){const t=e.stroke.getFillStyle();t!==Ie&&h.push(t)}if(e.point3D){const t=e.point3D;h.push(t.getFillStyle())}let r;if(e.behavior&&!0===e.behavior.colorStep){const[i,e]=h.reduce(((i,s)=>{if(i[0]&&i[1])return i;const e=t(s);return e&&(void 0===i[0]?i[0]=e:i[1]=e),i}),[void 0,void 0]);r=i&&e?(n=i)===(o=e)||n.getR()===o.getR()&&n.getG()===o.getG()&&n.getB()===o.getB()?dr(n):(n=fr(n),o=fr(o),new sh({angle:0,stops:[{offset:0,color:o},{offset:.5,color:o},{offset:.5,color:n},{offset:1,color:n}]})):s.uiButtonFillStyle}else{const i=h.reduce(((i,s)=>i||t(s)),void 0);r=i?dr(i):s.uiButtonFillStyle}var n,o;i.setButtonOffFillStyle(new Be({color:Se(255,255,255,0)})).setButtonOffStrokeStyle(s.uiButtonStrokeStyle).setButtonOnFillStyle(r).setButtonOnStrokeStyle(rh)}})(),mr=t=>{const i=t;if(ze(i))return{lut:i.getPalette(),lookUpProperty:i.getLookUpProperty()}},yr=t=>{let i=0;return()=>(i+=1,`${t}-${i}`)},pr=(t,i)=>{let s="string"==typeof t?t:String(t);const e=s.indexOf(".");let h=e>=0?e:s.length;for(;h<i;h+=1)s=`0${s}`;return s},Sr=(t,i)=>"function"==typeof t?t(i):t,vr=t=>t.ctrlKey?Math.sign(t.deltaY)*Math.min(.05*Math.abs(t.deltaY),1):Math.sign(t.deltaY),br=(t,i)=>i(),xr=()=>new Error("LightningChart JS encountered an unexpected error.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact");new Be({color:Se(255,255,255,1)});const Mr=t=>t===Or||t.min.x===Or.min.x&&t.max.x===Or.max.x&&t.min.y===Or.min.y&&t.max.y===Or.max.y,_r=t=>Array.from(new Set(t)),Ar=t=>"boolean"==typeof t?t?1:0:t>1?1:t<0?0:t,wr=(t,i)=>{throw new Error(i)},kr=()=>{const t=Ze((()=>{}));let i;return(s,e,h,r)=>{const n=null==r?void 0:r.onStart,o=null==r?void 0:r.onCompleted,a=(null==r?void 0:r.easing)||Ye.ease,l=(null==r?void 0:r.durationMs)||1e3;let u;if(i)if(0===i.nextAnimations.length){const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else{s=i.nextAnimations.pop().values[0][0];const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else u=t(l,a)([[s,e]],(([t])=>{h(t)})),i=u;u.onAnimationEnd((()=>{i=void 0})),n&&u.onAnimationStart(n),o&&u.onAnimationEnd(o)}},Cr=t=>{let i;return()=>i||(i=t(),i)},Tr=t=>{if(t===rh)return 0;const i=t.getThickness();return i<0?1:1*i},Fr=(t,i,s,e)=>{const h=`LightningChart JS Resources not found.\nresourcesBaseUrl: "${t}"\ninitiator: ${s}\nresource url: ${i}\nFor more information, please find the FAQ from API documentation at below link:\nhttps://lightningchart.com/js-charts/api-documentation/\nand read section "What is LightningChart JS Resources not found error?"`;if(e.shouldCrash)throw Mh.alert(h),new Error(h);Mh.console.warn(h)},Ir={left:0,right:0,top:0,bottom:0},Pr={add:(t,i)=>n(t.x+i,t.y+i,t.z+i),addVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x+=t.x,s.y+=t.y,s.z+=t.z;return s},subtract:(t,i)=>n(t.x-i,t.y-i,t.z-i),subtractVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x-=t.x,s.y-=t.y,s.z-=t.z;return s},multiply:(t,i)=>n(t.x*i,t.y*i,t.z*i),divide:(t,i)=>n(t.x/i,t.y/i,t.z/i),multiplyVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x*=t.x,s.y*=t.y,s.z*=t.z;return s},divideVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x/=t.x,s.y/=t.y,s.z/=t.z;return s},length:t=>Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),normalize:t=>Pr.divide(t,Pr.length(t)),dot:(t,i)=>t.x*i.x+t.y*i.y+t.z*i.z,cross:(t,i)=>n(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x),angle:(t,i)=>Math.acos(Pr.dot(t,i)/(Pr.length(t)*Pr.length(i))),rotateAroundAxis(t,i,s){const e=Math.cos(s),h=Math.sin(s),r=Pr.dot(i,t),n=Pr.cross(i,t);return Pr.addVec(Pr.multiply(t,e),Pr.addVec(Pr.multiply(i,(1-e)*r),Pr.multiply(n,h)))},lerp:(t,i,s)=>(s=Ph(s,0,1),Pr.addVec(Pr.multiply(t,1-s),Pr.multiply(i,s))),equals:(t,i)=>Ih(t.x,i.x)&&Ih(t.y,i.y)&&Ih(t.z,i.z),abs:t=>({x:Math.abs(t.x),y:Math.abs(t.y),z:Math.abs(t.z)}),sign:t=>({x:Math.sign(t.x),y:Math.sign(t.y),z:Math.sign(t.z)})},Dr=Number.MAX_SAFE_INTEGER,Br=-Number.MAX_SAFE_INTEGER,Or=a(e(Dr,Dr),e(Br,Br)),Lr=a(n(Dr,Dr,Dr),n(Br,Br,Br)),Er=(t,i)=>{const s=Math.log(t)/Math.log(i);return Math.floor((t=>(Math.ceil(t)-t<1e-4?t=Math.ceil(t):t-Math.floor(t)<1e-4&&(t=Math.floor(t)),t))(s))},Rr=(t,i)=>!(i.min.x>t.max.x||i.max.x<t.min.x||i.min.y>t.max.y||i.max.y<t.min.y),zr=(t,i)=>!(t[1].x<i[0].x||t[0].x>i[1].x||t[3].y<i[0].y||t[0].y>i[3].y),Vr=(t,i)=>a(e(Math.max(Math.min(t[0].x,t[2].x),Math.min(i[0].x,i[2].x)),Math.max(Math.min(t[0].y,t[2].y),Math.min(i[0].y,i[2].y))),e(Math.min(Math.max(t[0].x,t[2].x),Math.max(i[0].x,i[2].x)),Math.min(Math.max(t[0].y,t[2].y),Math.max(i[0].y,i[2].y)))),Nr=(t,i)=>i+t,Gr=(t,i,s)=>{const h=ln(i,t),r=h.x*h.x+h.y*h.y;if(0===r)return t;const n=ln(s,t),o=(n.x*h.x+n.y*h.y)/r;return o<=0?t:o>=1?i:e(t.x+o*h.x,t.y+o*h.y)},Wr=(t,i,s)=>s>i?t>=i&&t<=s:t>=s&&t<=i,Hr=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)},Ur=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return s*s+e*e},jr=(t,i,s)=>{const h=Ur(i,s);if(0===h)return[Ur(t,i),i];let r=dn(ln(t,i),ln(s,i))/h;r=Math.max(0,Math.min(1,r));const n=e(i.x+r*(s.x-i.x),i.y+r*(s.y-i.y));return[Ur(t,n),n]},$r=(t,i,s)=>an(t,on(ln(i,t),s)),Yr=(t,i,s)=>Pr.addVec(t,Pr.multiply(Pr.subtractVec(i,t),s));function Xr(t){const i=t.length;if(i>0){let s=t[0].x,h=t[0].x,r=t[0].y,n=t[0].y;for(let e=0;e<i;e+=1){const i=t[e];i.x>s&&(s=i.x),i.x<h&&(h=i.x),i.y>r&&(r=i.y),i.y<n&&(n=i.y)}return a(e(h,n),e(s,r))}return Or}function Zr(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y,o=t[0].z,l=t[0].z;for(let n=0;n<i;n+=1){const i=t[n];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y),i.z>o&&(o=i.z),i.z<l&&(l=i.z)}return a(n(e,r,l),n(s,h,o))}return Lr}const Kr=(...t)=>{const i={min:{x:Dr,y:Dr},max:{x:Br,y:Br}};for(const s of t)i.min.x=i.min.x<s.min.x?i.min.x:s.min.x,i.max.x=i.max.x>s.max.x?i.max.x:s.max.x,i.min.y=i.min.y<s.min.y?i.min.y:s.min.y,i.max.y=i.max.y>s.max.y?i.max.y:s.max.y;return i},qr=(t,i)=>a(n(t.min.x<i.min.x?t.min.x:i.min.x,t.min.y<i.min.y?t.min.y:i.min.y,t.min.z<i.min.z?t.min.z:i.min.z),n(t.max.x>i.max.x?t.max.x:i.max.x,t.max.y>i.max.y?t.max.y:i.max.y,t.max.z>i.max.z?t.max.z:i.max.z));function Jr(t,i,s,e){const h=t.x-e.x,r=t.y-e.y,n=e.x-s.x,o=s.y-e.y,a=o*h+n*r,l=(e.y-i.y)*h+(i.x-e.x)*r,u=o*(i.x-e.x)+n*(i.y-e.y);return u<0?a<=0&&l<=0&&a+l>=u:a>=0&&l>=0&&a+l<=u}const Qr=(t,i,s,h)=>e((t.x+i.x+s.x+h.x)/4,(t.y+i.y+s.y+h.y)/4),tn=(t,i,s,e,h)=>{if(i.x>s.x)if(i.x>e.x)if(i.x>h.x){if(t.x>i.x)return!1;if(h.x<e.x){if(h.x<s.x){if(t.x<h.x)return!1}else if(t.x<s.x)return!1}else if(e.x<s.x){if(t.x<e.x)return!1}else if(t.x<s.x)return!1}else{if(t.x>h.x)return!1;if(e.x<s.x){if(t.x<e.x)return!1}else if(t.x<s.x)return!1}else if(e.x>h.x){if(t.x>e.x)return!1;if(h.x<s.x){if(t.x<h.x)return!1}else if(t.x<s.x)return!1}else{if(t.x>h.x)return!1;if(t.x<s.x)return!1}else if(s.x>e.x)if(s.x>h.x){if(t.x>s.x)return!1;if(h.x<e.x){if(h.x<i.x){if(t.x<h.x)return!1}else if(t.x<i.x)return!1}else if(e.x<i.x){if(t.x<e.x)return!1}else if(t.x<i.x)return!1}else{if(t.x>h.x)return!1;if(e.x<i.x){if(t.x<e.x)return!1}else if(t.x<i.x)return!1}else if(e.x>h.x){if(t.x>e.x)return!1;if(h.x<i.x){if(t.x<h.x)return!1}else if(t.x<i.x)return!1}else{if(t.x>h.x)return!1;if(e.x<i.x){if(t.x<e.x)return!1}else if(t.x<i.x)return!1}if(i.y>s.y)if(i.y>e.y)if(i.y>h.y){if(t.y>i.y)return!1;if(h.y<e.y){if(h.y<s.y){if(t.y<h.y)return!1}else if(t.y<s.y)return!1}else if(e.y<s.y){if(t.y<e.y)return!1}else if(t.y<s.y)return!1}else{if(t.y>h.y)return!1;if(e.y<s.y){if(t.y<e.y)return!1}else if(t.y<s.y)return!1}else if(e.y>h.y){if(t.y>e.y)return!1;if(h.y<s.y){if(t.y<h.y)return!1}else if(t.y<s.y)return!1}else{if(t.y>h.y)return!1;if(t.y<s.y)return!1}else if(s.y>e.y)if(s.y>h.y){if(t.y>s.y)return!1;if(h.y<e.y){if(h.y<i.y){if(t.y<h.y)return!1}else if(t.y<i.y)return!1}else if(e.y<i.y){if(t.y<e.y)return!1}else if(t.y<i.y)return!1}else{if(t.y>h.y)return!1;if(e.y<i.y){if(t.y<e.y)return!1}else if(t.y<i.y)return!1}else if(e.y>h.y){if(t.y>e.y)return!1;if(h.y<i.y){if(t.y<h.y)return!1}else if(t.y<i.y)return!1}else{if(t.y>h.y)return!1;if(e.y<i.y){if(t.y<e.y)return!1}else if(t.y<i.y)return!1}return!0};function sn(t,i,s){return e(Math.cos(s)*(t.x-i.x)+Math.sin(s)*(t.y-i.y)+i.x,-Math.sin(s)*(t.x-i.x)+Math.cos(s)*(t.y-i.y)+i.y)}function en(t,i){return e(t.x-i.x,t.y-i.y)}function hn(t){const i=nn(t);return 0===i?e(0,0):e(t.x/i,t.y/i)}function rn(t,i){let s={x:i.x-t.x,y:i.y-t.y};s=hn(s);const e=Math.PI/2,h=s.x;return s.x=-Math.sin(e)*s.y,s.y=h*Math.sin(e),s}function nn(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function on(t,i){return e(t.x*i,t.y*i)}function an(t,i){return e(t.x+i.x,t.y+i.y)}function ln(t,i){return e(t.x-i.x,t.y-i.y)}function un(t,i){return e(t.x*i.x,t.y*i.y)}function cn(t,i){return e(t.x/i.x,t.y/i.y)}function fn(t){return on(t,-1)}function dn(t,i){return t.x*i.x+t.y*i.y}const gn=(t,i,s)=>{const h=(s.y-i.y)/(s.x-i.x),r=i.y+(t-i.x)*h;return e(t,r)},mn=(t,i,s)=>{const h=(s.y-i.y)/(s.x-i.x),r=i.x+(t-i.y)/h;return e(r,t)};function yn(t){return t*Math.PI/180}function pn(t){return 180*t/Math.PI}function Sn(t){return 180*Math.atan2(t.y,t.x)/Math.PI}function vn(t){return e(Math.cos(t),Math.sin(t))}function bn(t){let i=-1;const s=Math.cos(t),e=Math.sin(t);return s>0&&s<1&&e>0&&e<1?i=1:s<0&&s>-1&&e>0&&e<1?i=2:s<0&&s>-1&&e<0&&e>-1?i=3:s>0&&s<1&&e<0&&e>-1&&(i=4),i}const xn=(t,i,s,h)=>{let r,n,o,a;if(i.x-t.x!=0||h.x-s.x!=0)return i.x-t.x==0?(o=i.x,n=(h.y-s.y)/(h.x-s.x),a=n*(o-s.x)+s.y):h.x-s.x==0?(o=h.x,r=(i.y-t.y)/(i.x-t.x),a=r*(o-t.x)+t.y):(r=(i.y-t.y)/(i.x-t.x),n=(h.y-s.y)/(h.x-s.x),o=(s.y-n*s.x+r*t.x-t.y)/(r-n),a=r*(o-t.x)+t.y),e(o,a)},Mn=(t,i)=>{const s=t.length,e=i.length,h=new Uint16Array(s+e);return h.set(t,0),h.set(i,s),h};class _n{constructor(){this.ui=!0}getInnerStart(){return this.Ot}getInnerEnd(){return this.Lt}getInnerInterval(){return Math.abs(this.Lt-this.Ot)}Vt(t,i){return this.Ot=t,this.Lt=i,this}Rt(){return this.ui=!1,this}zt(){return this.ui=!0,this}}class An extends _n{constructor(t,i,s,e){if(super(),this.ci=!0,this.fi=!0,this.di=[0,0],this.gi=!0,this.mi=t,this.yi=i,this.pi=s,this.Si=t,this.vi=i,e){const t=e.Tt(this.bi.bind(this));this.bi(e.M()),this.xi=()=>e.It(t)}}Gt(t){return this.Et=t,this.fi=!0,this}Mi(t){return this.di=t.map(Math.abs),this.gi=!0,this}_i(){return this.mi/this.pi*this.Et+this.di[0]}Ai(){return(this.mi+this.yi)/this.pi*this.Et-this.di[1]}wi(){return this.getCellSize()-this.ki()}Ci(){return this.Et}getCellSize(){return this.Ti(this.Et)}ki(){return this.di[0]+this.di[1]}Fi(){return this.di}bi(t){this.pi=t.reduce(Nr,0),this.mi=t.reduce(((t,i,s)=>s>=this.Si?t:t+i),0),this.yi=t.reduce(((t,i,s)=>s>=this.Si&&s<this.Si+this.vi?t+i:t),0),this.ci=!0,this.Ii()}Ti(t){return t*this.yi/this.pi}Rt(){return super.Rt(),this.fi=!1,this.gi=!1,this.ci=!1,this}zt(){return super.zt(),this.fi=!0,this.gi=!0,this.ci=!0,this}}class wn extends An{constructor(t,i,s,e){super(t,i,s,e),this.Pi={internal:10,function:kn(10),number:10},this.Et=1e3,this.Vt(1,1e3),this.Di=this.Bi()}Xt(t,i,s,e,h){if(t===i)return!1;const r=Math.min(t,i)<Tn,n=Math.max(t,i)>Fn;return!r&&!n||!!h&&(i>t?{start:r?Tn:t,end:n?Fn:i}:{start:n?Fn:t,end:r?Tn:i})}qt(t){const i=this._i(),s=this.Ai(),e=Math.max(t,Tn);return i+(this.Pi.function(e)-this.Di.scaleStartLog)/this.Di.scaleIntervalLog*(s-i)}Kt(t){const i=this._i(),s=(t-i)/(this.Ai()-i),e=this.Di.scaleStartLog+s*this.Di.scaleIntervalLog;return this.Pi.number**e}Ii(){this.Pi&&this.Bi()}Vt(t,i){return super.Vt(t,i),this.Pi&&this.Bi(),this}Mi(t){return super.Mi(t),this.Pi&&this.Bi(),this}Gt(t){return super.Gt(t),this.Pi&&this.Bi(),this}Oi(t){return this.Pi={internal:t,function:kn(t),number:Cn(t)},this}Li(){return this.Pi.internal}Ei(t,i){const s=this.qt(t)+i;return this.Kt(s)}Ri(){return this.fi||this.ui||this.gi||this.ci}Bi(){const t=this.Pi.function(this.Ot),i=this.Pi.function(this.Lt)-t,s=2*this._i()/this.Et-1,e=2*this.Ai()/this.Et-1-s;return this.Di={scaleStartLog:t,scaleIntervalLog:i,viewportStart:s,viewportSize:e},this.Di}zi(){return this.Di}}const kn=t=>"e"===t?or:nr(t),Cn=t=>"e"===t?Math.E:t,Tn=.9*1e-9,Fn=1.1*10**32,In=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],Pn=(t,i,s)=>{const e=Math.abs(s-i),h=Math.max(2-Er(e,10),0);return t.toFixed(h)},Dn={Numeric:(t,i)=>Pn(t,i.getInnerStart(),i.getInnerEnd()),NumericUnits:(t,i)=>{const s=Math.abs(i.getInnerEnd()-i.getInnerStart()),e=t<0;t=Math.abs(t);let h="",r="";if(s>=1e3&&t>1e3){let i="";for(const s of In){const e=Math.round(1e3*t/s.unit)/1e3;if(e>=1){i=e.toString(),r=s.prefix;break}}h=(e?"-":"")+i}else{let i=String(Math.floor(t));const r=Er(t,1e3);for(let t=1;t<=r;t+=1){const s=i.length-(3*t+(t-1));i=`${i.substring(0,s)} ${i.substring(s,i.length)}`}h=(e?"-":"")+i+(s<=10?((t,i)=>{if(0===i)return"";let s=(Math.abs(t)-Math.abs(Math.floor(t))).toString().substring(1);return s.length>i&&(s=s.substring(0,i+1)),s})(t,2-Er(s,10)):"")}return h+=r,h}},Bn=(t,i)=>{const s=kn(i);return"e"===i?t?(t,i)=>`${Math.floor(s(t))}e`:()=>"":(t,i)=>{const e=t.toString();if(t>1)return e;const h=Math.floor(s(t));return t.toFixed(Math.abs(h))}};class On extends An{constructor(t,i,s,e){super(t,i,s,e),this.Vi=!1,this.Ni=!1,this.Gi=0,this.Et=1e3,this.Vt(0,10),this.Nt()}Ri(){return this.Ni}Xt(t,i,s,e,h){if(t===i)return!1;const r=Math.abs(e-s),n=Math.abs(i-t);if(!this.Vi){const s=((t,i,s)=>{const e=((t,i)=>{if(i<Dr&&i>Br&&t<Dr&&t>Br){const s=Math.abs(t/2**23),e=Math.abs(i/2**23),h=Math.min(s,e);return 10**Math.floor(Math.log10(h))}})(t,i);if(void 0!==e)return e*s})(t,i,this.getCellSize());if(void 0===s)return!1;if(n>s)return!0;const e=(i+t)/2,o=(h?s/2:r/2)*(t>i?-1:1);return{start:e-o,end:e+o}}const o=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(n>o)return!0;const a=(i+t)/2,l=(h?o/2:r/2)*(t>i?-1:1);return{start:a-l,end:a+l}}Ii(){this.Nt()}qt(t){return this._i()+(t-this.Ot)/(this.Lt-this.Ot)*(this.Ai()-this._i())}Kt(t){return this.Ot+(t-this._i())/(this.Ai()-this._i())*(this.Lt-this.Ot)}Vt(t,i){return super.Vt(t,i),this.Nt(),this}Mi(t){return super.Mi(t),this.Nt(),this}Gt(t){return super.Gt(t),this.Wi=Ln(this.Lt-this.Ot,this.di,this.Et,this.yi,this.pi),this.Nt(),this}Hi(){return this.Vi=!0,this}Ui(){return this.Vi}ji(){return Math.abs(this.$i)}Yi(){return this.ji()/this.Wi}Xi(){return this.ot}Zi(){return this.nt}getPixelSize(){return this.Wi}zi(){return this.Di}zt(){return super.zt(),this.Ni=!0,this}Rt(){return super.Rt(),this.Ni=!1,this}Ki(t,i=Dn.Numeric){return i(t,this)}qi(){const t=Math.abs(this.getInnerEnd()).toString().length,i=Math.abs(this.getInnerStart()).toString().length;return t>i?t:i}Ji(t){return Ln(t,this.di,this.Et,this.yi,this.pi)}Nt(){let t=this.Ot,i=this.Lt,s=0;this.Vi&&(t=0,i=this.Lt-this.Ot,s=this.Ot);const e=i-t,h=Ln(e,this.di,this.Et,this.yi,this.pi);this.nt=t-this.di[0]*h,this.ot=i+this.di[1]*h;const r=this.ot-this.nt,n=r-this.$i,o=Math.abs(n/h),a=e-this.Gi,l=Math.abs(a/h);(!this.Di||o>=.4||l>=.4)&&(this.Gi=e,this.$i=r,this.Wi=h,this.Ni=!0);const u=this.$i*this.pi/(2*this.yi),c=-(this.nt-this.$i*this.mi/this.yi)-u,f=2*this._i()/this.Et-1,d=2*this.Ai()/this.Et-1-f;this.Di={displacement:c,scaling:u,highPrecisionOffset:s,viewportStart:f,viewportSize:d,scaleStartLog:0,scaleIntervalLog:0}}Ei(t,i){return t+this.Wi*i}}const Ln=(t,i,s,e=1,h=1)=>t/(s*e/h-(i[0]+i[1]));class En{Qi(t,i){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),this}Rt(){return this.x.Rt(),this.y.Rt(),this}zt(){return this.x.zt(),this.y.zt(),this}Gt(t,i){return"object"==typeof t?(this.x.Gt(t.x),this.y.Gt(t.y)):(this.x.Gt(t),this.y.Gt(i)),this}Ci(){return e(this.x.Ci(),this.y.Ci())}ts(t){return this.x.Mi(t),this}ss(t){return this.y.Mi(t),this}ki(){return e(this.x.ki(),this.y.ki())}es(t,i){return this.x.Vt(t,i),this}hs(t,i){return this.y.Vt(t,i),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),i=this.y.getCellSize();return{x:t-this.x.ki(),y:i-this.y.ki()}}rs(){return this.x.Ri()||this.y.Ri()}}class Rn extends En{constructor(){super(...arguments),this.ns="LinearScaleXY"}Zt(t,i,s,e){return this.x=new On(t.x,i.x,s.x,e?e.x:void 0),this.y=new On(t.y,i.y,s.y,e?e.y:void 0),this}Ui(){return this.x.Ui()||this.y.Ui()}os(){return e(this.x.getPixelSize(),this.y.getPixelSize())}zi(){return{x:this.x.zi(),y:this.y.zi()}}Ei(t,i){const s=this.os();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}ls(t,i,s,e){const h=this.os(),r=rn(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class zn extends En{constructor(){super(...arguments),this.ns="MixedScaleXY"}Ui(){return!1}Ei(t,i){const s=this.x.qt(t.x),e=this.y.qt(t.y),h={x:s+i.x,y:e+i.y};return{x:this.x.Kt(h.x),y:this.y.Kt(h.y)}}ls(t,i,s,e){const h={x:this.x.qt(t.x),y:this.y.qt(t.y)},r={x:this.x.qt(i.x),y:this.y.qt(i.y)},n=hn(ln(r,h)),o=rn(r,h),a={x:h.x+n.x*e+o.x*s,y:h.y+n.y*e+o.y*s};return{x:this.x.Kt(a.x),y:this.y.Kt(a.y)}}zi(){const t=this.x.zi(),i=this.y.zi();return{uScaleStart:[this.x.Ot,this.y.Ot],uScaleInterval:[this.x.getInnerInterval(),this.y.getInnerInterval()],uScaleStartLog:[t.scaleStartLog,i.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,i.scaleIntervalLog],uViewportStart:[t.viewportStart,i.viewportStart],uViewportSize:[t.viewportSize,i.viewportSize]}}}const Vn=(t,i)=>t instanceof wn||i instanceof wn?(new zn).Qi(t,i):(new Rn).Qi(t,i),Nn=t=>"client"===t,Gn=t=>!!(t&&"object"==typeof t&&"clientX"in t&&"number"==typeof t.clientX&&"clientY"in t&&"number"==typeof t.clientY),Wn=t=>"relative"===t,Hn=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y);var Un;t.HighlightModes=void 0,(Un=t.HighlightModes||(t.HighlightModes={}))[Un.noHighlighting=0]="noHighlighting",Un[Un.onHover=1]="onHover";class jn{constructor(i,s,e,h){this.us=!0,this.cs=t.HighlightModes.onHover,this.fs=!1,this.ds=!0,this.gs=!1,this.At=new $e,this.ys=[],this.ps=[],this.Ss=(t,i)=>{this.setVisible(i)},this.vs=()=>this.setHighlight(1),this.bs=()=>this.setHighlight(0),this.onMouseEnter=t=>this.At.on("mouseEnter",t),this.onMouseLeave=t=>this.At.on("mouseLeave",t),this.onMouseClick=t=>this.At.on("mouseClick",t),this.onMouseDoubleClick=t=>this.At.on("mouseDoubleClick",t),this.onMouseDown=t=>this.At.on("mouseDown",t),this.onMouseUp=t=>this.At.on("mouseUp",t),this.onMouseMove=t=>this.At.on("mouseMove",t),this.offMouseEnter=t=>this.At.off(t,"mouseEnter"),this.offMouseLeave=t=>this.At.off(t,"mouseLeave"),this.offMouseClick=t=>this.At.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.At.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.At.off(t,"mouseDown"),this.offMouseUp=t=>this.At.off(t,"mouseUp"),this.offMouseMove=t=>this.At.off(t,"mouseMove"),this.offMouseDragStart=t=>this.At.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.At.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.At.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.At.off(t,"mouseWheel"),this.xs=(i,s,e)=>{this.At.emit("mouseEnter",this,s),this.gs=!0,this.cs===t.HighlightModes.onHover&&this.setHighlight(!0)},this.Ms=(i,s,e)=>{this.At.emit("mouseLeave",this,s),this.gs=!1,this.cs===t.HighlightModes.onHover&&this.setHighlight(!1)},this._s=(t,i,s)=>{this.At.emit("mouseMove",this,i)},this.As=(t,i,s)=>this.At.emit("mouseClick",this,i),this.ws=(t,i,s)=>this.At.emit("mouseDoubleClick",this,i),this.ks=(t,i,s)=>this.At.emit("mouseDown",this,i),this.Cs=(t,i,s)=>this.At.emit("mouseUp",this,i),this.Ts=(t,i,s,e)=>{this.At.emit("mouseDragStart",this,i,s)},this.Fs=(t,i,s,e,h,r)=>{this.At.emit("mouseDrag",this,i,s,e,h)},this.Is=(t,i,s,e,h)=>{this.At.emit("mouseDragStop",this,i,s,e)},this.Ps=(t,i,s)=>{this.At.emit("mouseWheel",this,i)},this.Ds=(i,s,e)=>{this.At.emit("touchStart",this,s),this.gs=!0,this.cs===t.HighlightModes.onHover&&this.setHighlight(!0)},this.Bs=(t,i,s)=>{this.At.emit("touchMove",this,i)},this.Os=(i,s,e)=>{this.At.emit("touchEnd",this,s),this.gs=!1,this.cs===t.HighlightModes.onHover&&this.setHighlight(!1)},this.Ls=i,this.Es=s,this.Rs=e,this.zs=new Map,this.Vs=h,this.Ns=this.Vs.Gs(this,{Ws:{themeEffectEnabled:this.Rs.effectsText},Hs:{}}),this.Ls.$s.js.Us(this,(t=>{this.zs.forEach(((i,s)=>s.Ys(t))),this.ps.forEach((i=>i.setHighlight(t))),this.ys.forEach((i=>i.Ys(t)))}),{animationEnabled:this.Ls.getAnimationsEnabled()})}Xs(t,i){const s=void 0===(null==i?void 0:i.setEventHandlers)||i.setEventHandlers,e=void 0!==(null==i?void 0:i.isText)&&i.isText;this.zs.set(t,{isText:e});const h=Array.from(this.zs);this.Ns.Ws.Zs(h.filter((t=>t[1].isText)).map((t=>t[0]))),this.Ns.Hs.Zs(h.filter((t=>!t[1].isText)).map((t=>t[0]))),t.setMouseInteractions(this.us).setVisible(this.ds).Ys(this.Ls.$s.js.Ks(this,!0)),s&&t.setMouseEnterEventHandler(this.xs).setMouseLeaveEventHandler(this.Ms).setMouseClickEventHandler(this.As).setMouseDoubleClickEventHandler(this.ws).setMouseDownEventHandler(this.ks).setMouseUpEventHandler(this.Cs).setMouseMoveEventHandler(this._s).setMouseDragStartEventHandler(this.Ts).setMouseDragEventHandler(this.Fs).setMouseDragStopEventHandler(this.Is).setMouseWheelEventHandler(this.Ps).setTouchStartEventHandler(this.Ds).setTouchMoveEventHandler(this.Bs).setTouchEndEventHandler(this.Os);const r=t.onDispose((()=>{t.offDispose(r),this.zs.delete(t)}))}qs(t){this.ys=t;const i=this.Ls.$s.js.Ks(this,!0);t.forEach((t=>{t.Ys(i).Js(this.ds)}))}setEffect(t){return this.Ns.Ws.Qs(t&&this.Rs.effectsText),this.Ns.Hs.Qs(t),this.Ls.$s.te(),this}getEffect(){return this.Ns.Ws.ie()||this.Ns.Hs.ie()}onHighlight(t){return this.At.on("highlight",t)}offHighlight(t){return this.At.off(t)}setName(t){return this.dt=t,this.ps.forEach((t=>t.setText(this.dt))),this}getName(){return this.dt}dispose(){return this.fs||(this.fs=!0,this.zs.forEach(((t,i)=>i.dispose())),this.Es(this),this.ps.forEach((t=>{t.dispose()})),this.ps.length=0,this.At.emit("dispose",this),this.Ls.$s.te()),this}setVisible(t){return t===this.ds||(this.ds=t,this.zs.forEach(((i,s)=>s.setVisible(t))),this.ys.forEach((i=>i.Js(t))),this.ps.forEach((i=>i.setOn(t))),this.At.emit("visibleStateChanged",this,this.ds),this.Ls.$s.te()),this}getVisible(){return this.ds}onVisibleStateChanged(t){return this.At.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.At.off(t,"visibleStateChanged")}setHighlight(t){return this.Ls.$s.js.se(this,t),this.At.emit("highlight",t),this}getHighlight(){return this.Ls.$s.js.Ks(this)}setAnimationHighlight(t){return this.Ls.$s.js.ee(this,t),this}getAnimationHighlight(){return this.Ls.$s.js.he(this)}setMouseInteractions(t){return this.us=t,this.zs.forEach(((i,s)=>s.setMouseInteractions(t))),this.Ls.$s.te(),this}getMouseInteractions(){return this.us}getIsUnderMouse(){return this.gs}setHighlightOnHover(i){return this.cs=i?t.HighlightModes.onHover:t.HighlightModes.noHighlighting,!1===i&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.cs!==t.HighlightModes.noHighlighting}attach(t,i=!0){t.setText(this.dt),t.setButtonOffStrokeStyle(t.getButtonOffStrokeStyle().setThickness(1)),t.setButtonOnStrokeStyle(t.getButtonOnStrokeStyle().setThickness(1));const s=t.getLocked();return t.setLocked(!1).setOn(this.getVisible()).setLocked(s),i&&t.onSwitch(this.Ss),t.setLocked(!i),t.onMouseEnter(this.vs),t.onMouseLeave(this.bs),this.onMouseEnter((()=>t.setHighlight(!0))),this.onMouseLeave((()=>t.setHighlight(!1))),this.onTouchStart((()=>t.setHighlight(!0))),this.onTouchEnd((()=>t.setHighlight(!1))),this.ps.push(t),this}onMouseDragStart(t){return this.At.on("mouseDragStart",t)}onMouseDrag(t){return this.At.on("mouseDrag",t)}onMouseDragStop(t){return this.At.on("mouseDragStop",t)}onMouseWheel(t){return this.At.on("mouseWheel",t)}onTouchStart(t){return this.At.on("touchStart",t)}onTouchMove(t){return this.At.on("touchMove",t)}onTouchEnd(t){return this.At.on("touchEnd",t)}onDispose(t){return this.At.on("dispose",t)}offTouchStart(t){return this.At.off(t,"touchStart")}offTouchMove(t){return this.At.off(t,"touchMove")}offTouchEnd(t){return this.At.off(t,"touchEnd")}offDispose(t){return this.At.off(t,"dispose")}}class $n extends jn{constructor(t,i,s,e,h,r,n,o){super(i,s,n,o),this.re=t,this.axis=e,this.Jt=h,this.ne=r,this.oe()}}const Yn=t=>{const i=t.length;if(i>0){let s=0,h=0;for(let e=0;e<i;e+=1)s+=t[e].x,h+=t[e].y;return e(s/i,h/i)}return e(0,0)},Xn=(...t)=>{const i=t.length,s=new Array(i).fill(!1),e=(e,h)=>{for(let r=0;r<i;r+=1){const i=t[r],n=i.ae(e,h);n?i.le(e,h,!0):s[r]&&s[r]&&i.le(e,h,!1),s[r]=n}return!1};return{onTouchStart:e,onTouchMove:e,onTouchEnd:e}},Zn=class{constructor(t,i=300){this.ue=!1,this.ce=[],this.fe=300,this.de=t,this.fe=i}ae(t,i){const s=Mh.performance.now();let e=!1;for(let t=0;t<this.ce.length;t+=1)s-this.ce[t].time>=this.fe?(this.ce.splice(t,1),t-=1):this.ce[t].state&&(e=!0);return this.ue?0===i.interactions.length&&(this.ce.push({state:!1,time:s}),this.ue=!1):1===i.interactions.length&&"pointerdown"===i.type&&(this.ce.push({state:!0,time:s}),e=!0,this.ue=!0),e}le(t,i,s){if(s){const s=this.ce.reduce(((t,i)=>(i.state?t.on+=1:t.off+=1,t)),{on:0,off:0});s.on>=2&&s.off>=1&&(this.de(t,i),this.ce.length=0)}}},Kn=class{constructor(t,i,s,e=1,h=100){this.ge=t,this.me=i,this.ye=s,this.pe=e,this.Se=h}ae(t,i){const s=i.interactions.length;if(s===this.pe){if(void 0!==this.ve)return!0;if("pointerdown"===i.type&&(1===s||(t=>{const i=t.length;if(i>0){const s=Yn(t);let h=0;for(let r=0;r<i;r+=1)h=Math.max(h,Hr(s,e(t[r].x,t[r].y)));return h}return Dr})(i.interactions)<=this.Se))return this.ve=Yn(i.interactions),!0}return!1}le(t,i,s){const h=this.be;if(!s||i.forceTouchEnd||"pointerup"===i.type)this.ye&&this.ye(t,this.ve,h,i),this.ve=void 0,this.be=void 0;else{const s=Yn(i.interactions);"pointerdown"===i.type?this.ge&&this.ge(t,this.ve,i):"pointermove"===i.type&&this.me&&this.me(t,this.ve,s,e(s.x-h.x,h.y-s.y),i),this.be=s}}},qn=class{constructor(t,i,s){this.xe=!1,this.ge=t,this.me=i,this.ye=s}ae(t,i){return this.xe?2!==i.interactions.length&&(this.xe=!1):2===i.interactions.length&&"pointerdown"===i.type&&(this.xe=!0),this.xe}le(t,i,s){let h,r;if(s&&"pointerup"!==i.type){if("pointerdown"===i.type){const s=i.interactions;h=s[0],r=s[1],this.ge(t,h,r,i)}else if("pointermove"===i.type){h=i.interactions[0],r=i.interactions[1];const s=this.Me,n=this._e,o=e(h.x-s.x,s.y-h.y),a=e(r.x-n.x,n.y-r.y);this.me(t,h,r,o,a,i)}}else{const s=i.interactions;this.ye(t,s[0],s[1],i)}this.Me=h,this._e=r}},Jn=le({type:"linestyle",lineType:"solid",fillStyle:new Be({color:Se(255,255,255)}),thickness:1});class Qn extends Jn{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}Ct(){const t=this.getThickness();return t<0?1:t}}const to=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"solid"!==t.lineType);class io{constructor(t,i){this.Ae=t,this.we=i,this.ke=i.rows*Do,this.Ce=i.columns*Bo}}var so,eo;t.OnScreenMenuButtonType=void 0,(so=t.OnScreenMenuButtonType||(t.OnScreenMenuButtonType={}))[so.ZoomIn=0]="ZoomIn",so[so.ZoomInX=1]="ZoomInX",so[so.ZoomInY=2]="ZoomInY",so[so.ZoomOut=3]="ZoomOut",so[so.ZoomOutX=4]="ZoomOutX",so[so.ZoomOutY=5]="ZoomOutY",so[so.ZoomToFit=6]="ZoomToFit",so[so.ToggleAnimations=7]="ToggleAnimations",t.OnScreenMenuButtonShape=void 0,(eo=t.OnScreenMenuButtonShape||(t.OnScreenMenuButtonShape={}))[eo.Circle=0]="Circle",eo[eo.Rectangle=1]="Rectangle",eo[eo.RoundedRectangle=2]="RoundedRectangle";const ho={x:-43,y:0},ro={x:-65,y:0},no={x:-86,y:0},oo={x:-107,y:-1},ao={x:-128,y:-3},lo={x:-150,y:0},uo={x:-171,y:0},co={x:-276,y:0},fo={x:-298,y:0},go={x:0,y:0},mo={x:-21,y:0};class yo extends io{constructor(t,i,s,e){super(t,s),this.Te=Mh.document.createElement("button"),this.Fe=Mh.document.createElement("div"),this.Ie=Mh.document.createElement("label"),this.we=s,this.Pe=i,this.Ls=e}De(t,i,s,e){this.Be(t,e),this.Oe(),this.Le(i),this.Ee(),this.Ie.textContent=s||"";const h=Mh.document.createElement("div");this.Re(h),this.Te.onclick=this.onClick.bind(this),h.appendChild(this.Fe),h.appendChild(this.Ie),this.Te.appendChild(h)}Ee(){this.Te.style.cursor="pointer"}Re(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}Le(t){"string"==typeof t?(this.Fe.style.backgroundImage=`url(${t})`,this.Fe.style.backgroundSize="100%",this.Fe.style.backgroundRepeat="no-repeat",this.Fe.style.backgroundPosition="center",this.Fe.style.width="20px",this.Fe.style.height="20px"):this.applyStyleForSprite(t),this.Fe.style.margin="auto"}Oe(){switch(this.Pe){case t.OnScreenMenuButtonShape.RoundedRectangle:this.Te.style.borderRadius="10px";break;case t.OnScreenMenuButtonShape.Rectangle:this.Te.style.borderRadius="0px";break;case t.OnScreenMenuButtonShape.Circle:default:this.Te.style.borderRadius="31px"}}Be(t,i){this.Te.style.width=`${this.Ce.toString()}px`,this.Te.style.height=`${this.ke.toString()}px`,this.Te.style.backgroundColor=t,this.Te.style.opacity=i||Oo,this.Te.style.alignItems="center",this.Te.style.border="2px solid #707070",this.Te.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.Fe.style.backgroundImage=`url(${this.Ae}/${Lo})`,this.Fe.style.backgroundPositionX=`${t.x}px`,this.Fe.style.backgroundPositionY=`${t.y}px`,this.Fe.style.backgroundSize="1600%",this.Fe.style.backgroundRepeat="no-repeat",this.Fe.style.width="20px",this.Fe.style.height="20px"}ze(t){return t.appendChild(this.Te),t}Ve(){return this.Te}}class po extends yo{constructor(t,i,s,e){super(t,i,s,e),this.Ne="",this.Ge="",this.We=!1,this.Ls=e}He(){this.Ue(),this.onToggledStateAction()}je(){this.$e(),this.onInitialStateAction()}$e(){this.Ye(this.Ne)}Ue(){this.Ye(this.Ge)}Ye(t){"string"==typeof t?this.Fe.style.background=t:(this.Fe.style.backgroundImage=`url(${this.Ae}/${Lo})`,this.Fe.style.backgroundPositionX=`${t.x}px`,this.Fe.style.backgroundPositionY=`${t.y}px`)}onClick(){this.We?this.je():this.He(),this.We=!this.We}}class So extends yo{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ls=i;const e=this.Ls.getTheme();this.De(e.onScreenMenuBackgroundColor.toRGBAString(),ho)}onClick(){const t=this.Ls.Xe();t&&this.Ls.zoom(t,{x:-1,y:-1})}}class vo extends yo{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ls=i;const e=this.Ls.getTheme();this.De(e.onScreenMenuBackgroundColor.toRGBAString(),oo)}onClick(){const t=this.Ls.Xe();t&&this.Ls.zoom(t,{x:-1,y:0})}}class bo extends yo{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ls=i;const e=this.Ls.getTheme();this.De(e.onScreenMenuBackgroundColor.toRGBAString(),lo)}onClick(){const t=this.Ls.Xe();t&&this.Ls.zoom(t,{x:0,y:-1})}}class xo extends yo{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ls=i;const e=this.Ls.getTheme();this.De(e.onScreenMenuBackgroundColor.toRGBAString(),ro)}onClick(){const t=this.Ls.Xe();t&&this.Ls.zoom(t,{x:1,y:1})}}class Mo extends yo{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ls=i;const e=this.Ls.getTheme();this.De(e.onScreenMenuBackgroundColor.toRGBAString(),ao)}onClick(){const t=this.Ls.Xe();t&&this.Ls.zoom(t,{x:1,y:0})}}class _o extends yo{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ls=i;const e=this.Ls.getTheme();this.De(e.onScreenMenuBackgroundColor.toRGBAString(),uo)}onClick(){const t=this.Ls.Xe();t&&this.Ls.zoom(t,{x:0,y:1})}}class Ao extends po{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ls=i;const e=this.Ls.getTheme();this.Ne=co,this.Ge=fo,this.De(e.onScreenMenuBackgroundColor.toRGBAString(),this.Ne)}onToggledStateAction(){this.Ls.setAnimationsEnabled(!1)}onInitialStateAction(){this.Ls.setAnimationsEnabled(!0)}}class wo extends yo{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ls=i;const e=this.Ls.getTheme();this.De(e.onScreenMenuBackgroundColor.toRGBAString(),no)}onClick(){this.Ls.forEachAxis((t=>{t.fit(!0)}))}}class ko extends yo{constructor(t,i,s){super(t,i.shape||Eo,i.dimensions||{rows:1,columns:1},s);const e=s.getTheme(),h=i.color||e.onScreenMenuBackgroundColor.toRGBAString(),r=i.icon||"",n=i.label||"",o=i.opacity||"";this.De(h,r,n,o),this.Ze=i.action}onClick(){this.Ze(this.Ls)}}class Co extends po{constructor(t,i,s,e){super(t,i,{rows:1,columns:1},s),this.Ls=s,this.Ke=e,this.Ne=mo,this.Ge=go,this.De(Ro,this.Ne)}$e(){this.Ye(this.Ne),this.Te.style.backgroundColor=Ro,this.Te.style.border="2px solid #707070",this.Te.style.margin="0px"}Ue(){this.Ye(this.Ge),this.Te.style.background="#FECC00 0% 0% no-repeat padding-box",this.Te.style.border="10px solid #BCBCBC12",this.Te.style.margin="1px"}onToggledStateAction(){var t;null===(t=this.Ke)||void 0===t||t.style.setProperty("display","block")}onInitialStateAction(){var t;null===(t=this.Ke)||void 0===t||t.style.setProperty("display","none")}}var To;t.MouseStyles=void 0,(To=t.MouseStyles||(t.MouseStyles={})).Move="move",To.ResizeColumn="col-resize",To.ResizeRow="row-resize",To.Horizontal="ew-resize",To.Vertical="ns-resize",To.NorthWest="nw-resize",To.NorthEast="ne-resize",To.Copy="copy",To.CrossHair="crosshair",To.Default="default",To.Help="help",To.Restricted="not-allowed",To.None="none",To.Point="pointer",To.Text="text",To.Wait="wait",To.ZoomIn="zoom-in",To.ZoomOut="zoom-out";const Fo={LeftBottom:e(-1,-1),CenterBottom:e(0,-1),RightBottom:e(1,-1),LeftCenter:e(-1,0),Center:e(0,0),RightCenter:e(1,0),LeftTop:e(-1,1),CenterTop:e(0,1),RightTop:e(1,1)},Io=new Be({color:Se(255,255,255,0)}),Po=new Qn({thickness:1,fillStyle:Io}),Do=60,Bo=60,Oo="1.0",Lo="osm/osm-sprite-transparent.png",Eo=t.OnScreenMenuButtonShape.Circle,Ro="#363636";var zo;t.OSMPosition=void 0,(zo=t.OSMPosition||(t.OSMPosition={}))[zo.TopRight=0]="TopRight",zo[zo.TopLeft=1]="TopLeft",zo[zo.BottomLeft=2]="BottomLeft",zo[zo.BottomRight=3]="BottomRight";class Vo extends $n{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.dt="Band",this.qe=0,this.Je=0,this.Qe=this.Rs.bandFillStyle,this.th=this.Rs.bandStrokeStyle,this.ih=this.re.hh(this.Jt).eh(this.Qe).sh(this.th).Ys(this.getHighlight()),this.Xs(this.ih)}setValueStart(t){return this.qe=t,this.At.emit("valueChange",this,this.qe,this.Je),this.re.te(),this}getValueStart(){return this.qe}setValueEnd(t){return this.Je=t,this.At.emit("valueChange",this,this.qe,this.Je),this.re.te(),this}getValueEnd(){return this.Je}setFillStyle(t){this.Qe="function"==typeof t?t(this.Qe):t;const i=this.Qe;return this.ih.eh(i),this.re.te(),this}getFillStyle(){return this.Qe}setStrokeStyle(t){this.th="function"==typeof t?t(this.th):t;const i=this.th;return this.ih.sh(i),this.re.te(),this}getStrokeStyle(){return this.th}onValueChange(t){return this.At.on("valueChange",t)}offValueChange(t){return this.At.off(t,"valueChange")}rh(){return this.ih.oh(this.ne.toVec2(this.qe,this.ne.getHeight(this.Jt).getInnerStart())).Gt(this.ne.toVec2(this.Je-this.qe,this.ne.getHeight(this.Jt).getInnerInterval())),this}attach(t,i){return super.attach(t,i),gr(t,this.Rs,{fill:this.Qe,stroke:this.th}),this}ah(t,i){t.Ys(i),this.re.te()}oe(){let i,s;const h=(t,e)=>{const h=uh(this.re.$s.lh(e.x,e.y),this.re.$s.Jt,this.Jt),r=this.ne.getWidth(h),n=this.axis.Jt.qt(this.qe),o=this.axis.Jt.qt(this.Je),a=(this.axis.Jt.qt(r)-n)/(o-n);i=!(a<.1||a>.9),!1===i&&(s=a<.5)},r=(t,e,h,r,n)=>{const o=this.ne.getWidth(r);i?(this.qe=this.axis.Jt.Ei(this.qe,o),this.Je=this.axis.Jt.Ei(this.Je,o)):s?this.qe=this.axis.Jt.Ei(this.qe,o):this.Je=this.axis.Jt.Ei(this.Je,o),ir(n),this.At.emit("valueChange",this,this.qe,this.Je),this.re.te()};this.onMouseMove(((s,r)=>{h(0,e(r.clientX,r.clientY));const n=i?t.MouseStyles.Point:this.ne.getWidth({x:t.MouseStyles.Horizontal,y:t.MouseStyles.Vertical});this.uh=this.Ls.engine.setMouseStyle(n,this.uh)})),this.onMouseLeave((()=>{this.Ls.engine.restoreMouseStyle(this.uh),this.uh=void 0})),this.onMouseDrag(((t,i,s,e,h)=>{0===s&&r(0,0,0,h,i)}));const n=Xn(new Kn(h,r));this.onTouchStart(n.onTouchStart),this.onTouchMove(n.onTouchMove),this.onTouchEnd(n.onTouchEnd)}}class No extends $n{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.dt="Constant Line",this.u=0,this.th=this.Rs.constantLineStrokeStyle,this.fh=!0,this.dh=this.re.mh(this.Jt).gh(this.th).Ys(this.getHighlight()),this.Xs(this.dh)}setValue(t){return this.u=t,this.At.emit("valueChange",this,this.u),this.re.te(),this}getValue(){return this.u}setStrokeStyle(t){this.th="function"==typeof t?t(this.th):t;const i=this.th;return this.dh.gh(i),this.re.te(),this}getStrokeStyle(){return this.th}setInteractionMoveByDragging(t){return this.fh=t,this}getInteractionMoveByDragging(){return this.fh}onValueChange(t){return this.At.on("valueChange",t)}offValueChange(t){return this.At.off(t,"valueChange")}rh(){return this.dh.ph(this.ne.toVec2(this.u,this.ne.getHeight(this.Jt).getInnerStart())).yh(this.ne.toVec2(this.u,this.ne.getHeight(this.Jt).getInnerEnd())),this}attach(t,i){return super.attach(t,i),gr(t,this.Rs,{stroke:this.th}),this}ah(t,i){t.Ys(i),this.re.te()}oe(){const i=(t,i)=>{this.fh&&(this.u=this.axis.Jt.Ei(this.u,this.ne.getWidth(i)),this.At.emit("valueChange",this,this.u),this.re.te(),ir(t))};this.onMouseMove((()=>{if(this.fh){const i=this.ne.getWidth({x:t.MouseStyles.Horizontal,y:t.MouseStyles.Vertical});this.uh=this.Ls.engine.setMouseStyle(i,this.uh)}})),this.onMouseLeave((()=>{this.fh&&(this.Ls.engine.restoreMouseStyle(this.uh),this.uh=void 0)})),this.onMouseDrag(((t,s,e,h,r)=>{this.fh&&0===e&&i(s,r)}));const s=Xn(new Kn(void 0,((t,s,e,h,r)=>i(r,h))));this.onTouchStart(s.onTouchStart),this.onTouchMove(s.onTouchMove),this.onTouchEnd(s.onTouchEnd)}}const Go={fitting:{start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i>=t?e:s},expansion:{start:(t,i,s,e)=>i>=t?s<t?s:t:e>t?e:t,end:(t,i,s,e)=>i>=t?e>i?e:i:s<i?s:i},progressive:{start:(t,i,s,e)=>i>t?Go.progressive.end(t,i,s,e)+(t-i):e>t?e:t,end:(t,i,s,e)=>i>t?e>i?e:i:Go.progressive.start(t,i,s,e)+(i-t)},regressive:{start:(t,i,s,e)=>i>t?s<t?s:t:Go.regressive.end(t,i,s,e)+(t-i),end:(t,i,s,e)=>i>t?Go.regressive.start(t,i,s,e)+(i-t):s<i?s:i}},Wo={Empty:"Empty",Numeric:"Numeric",DateTime:"DateTime",Time:"Time"},Ho=t=>void 0!==t.Sh,Uo=t=>void 0!==t.bh,jo={xh:Dn.Numeric},$o=(t,i)=>[t,i],Yo=(t,i,s,e)=>{const h=[],r=Math.round(Math.abs((t-i)/s));for(let n=1;n<r;n+=1){const r=Math.round((t+s*n)*e)/e;r<i&&h.push(r)}return h},Xo=(t,i,s,e,h)=>{Ih(t,0)&&(t=0),Ih(i,0)&&(i=0);const r=[];let n=void 0!==e?((t,i,s)=>t-(t-s)%i)(t,s,e):t;if(s<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${s}`);for(;n<i&&!1===Ih(n,i);)r.push(n),n+=s,n=Math.round(n*h)/h;return r.push(n),r},Zo=(t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i&&!1===Ih(r,i);)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h},Ko=(t,...i)=>{const s=i.length>0?i.length:t?1:0;return(e,h,r,n,o,a)=>{if(h>=s)return;const l=i[h]||1;let u=!1,c=!1,f=1;return t&&(u="ignore"in t?"first"===t.ignore||"both"===t.ignore:u,c="ignore"in t?"last"===t.ignore||"both"===t.ignore:c,f="offset"in t&&void 0!==t.offset?t.offset:f),((t,i,s,e,h)=>(s&&(t=t.filter(((t,i)=>i>0))),e&&(t=t.filter(((i,s)=>s<t.length-1))),t.filter(((t,s)=>(s+h)%i==0))))(e,l,u,c,f)}},qo=(...t)=>{const i=t.length>0?t.length:0;return(s,e,h,r,n,o)=>{if(e>=i)return;const a=t[e]||1;return s.filter(((t,i)=>i%a==0))}},Jo=(t,i)=>{if(i.has(t))return i.get(t);const s=Xr(t._h.Mh());return i.set(t,s),s},Qo=t=>{const i=new Map;if(t!==jo){for(const s of t.Ah)i.set(s,new Map);for(const s of t.wh)i.set(s,new Map)}return i};class ta{constructor(t,i,s,e,h,r,n){this.At=new $e,this.kh=jo,this.Ch=Wo.Empty,this.Th=new Map,this.Fh=new Map,this.Ih=Go.fitting,this.Ph=!0,this.Dh=Ze((()=>this.chart.$s.te()))(300,Ye.linear),this.Bh=!0,this.ds=!0,this.Oh=!1,this.Lh=Br,this.Eh=!1,this.Rh=!1,this.zh=Br,this.Vh=Br,this.Nh=Br,this.Gh={},this.Wh=(t,i,s,e,h,r)=>{const n=[],o=[];for(const a of t){if(a<s||a>e){n.push(a);continue}const t=this.Th.get(i),l=(t?t.get(a):void 0)||this.Hh(a,i);l.Uh=!1;const u=this.jh(l,h);r.set(l,u),n.push(a),o.push(l)}return{displayedKeyValues:n,createdTicks:o}},this.$h=(t,i,s,e,h,r,n,o,a,l,u)=>{const c=[];for(let f=0;f<t.length;f+=1){const d=t[f],g=i[f];let m,y,p;if(this.Yh(d,s)){const i=Jo(d,a);y=[t[f-1],t[f+1]],p=y.concat(l).concat(u).filter((t=>void 0!==t)).filter((i=>i.Xh!==s||!!t.find((t=>t===i)))).map((t=>Rr(i,Jo(t,a))?t:void 0)),m=p.some((t=>void 0!==t))}else m=!1;if(m){let t=!0;const i=p.filter((t=>void 0!==t));if(t&&s.Zh&&i.every((t=>Ho(t.Xh)))&&(t=!1),t&&s.Zh&&s.Zh.Kh&&!1===s.Zh.Kh(g,e,h,r,n,o)&&(t=!1),!1===t)continue;return!0}c.push(d)}return c},this.formatValue=t=>this.kh.xh(t,this.Jt),this.qh=([t,i])=>{this.Jh(t,i)},this.chart=t,this.Qh=i,this.Rs=e,this.tr=r,this.Jt=s,this.ir=n,"logarithmic"===n.type&&this.setAnimationZoom(Ye.logarithmic(Cn(n.base))),this.sr=r.numeric,this.er("Numeric"),this.hr=s.getInnerStart(),this.rr=s.getInnerEnd(),h&&this.setAnimationsEnabled(!1)}getTitle(){return this.ar.nr()}setTitle(t){return this.ar.lr(t),this.chart.$s.te(),this}getTitleFillStyle(){return this.ar.ur()}setTitleFillStyle(t){return this.ar.eh(t),this.chart.$s.te(),this}getTitleFont(){return this.ar.cr()}setTitleFont(t){return this.ar.dr(t),this.chart.$s.te(),this}setTitleRotation(t){return this.ar.gr(t),this.chart.$s.te(),this}getTitleRotation(){return this.ar.mr()}setTitleEffect(t){return this.yr.Qs(t),this.chart.$s.te(),this}getTitleEffect(){return this.yr.ie()}er(t,i){if(this.Th.size>0&&this.pr(),"Empty"===t)this.kh=jo,this.Ch=t;else if("Numeric"===t){"Numeric"!==this.Ch&&(this.sr=this.tr.numeric);const s=i||(t=>t);this.sr=s(this.sr),this.kh=this.sr.Sr(this.ir),this.Ch=t}else if("DateTime"===t){"DateTime"!==this.Ch&&(this.sr=this.tr.datetime);const s=i||(t=>t);this.sr=s(this.sr),this.kh=this.sr.Sr(this.ir),this.Ch=t}else if("Time"===t){"Time"!==this.Ch&&(this.sr=this.tr.time);const s=i||(t=>t);this.sr=s(this.sr),this.kh=this.sr.Sr(this.ir),this.Ch=t}return this.Fh.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.Fh=Qo(this.kh),this.chart.$s.te(),this}vr(){return this.kh}br(t){this.kh=t,this.Fh.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.Fh=Qo(this.kh),this.chart.$s.te()}setInterval(t){const{start:i,end:s,animate:e,stopAxisAfter:h}=t;return this.Qt(void 0!==i?i:this.hr,void 0!==s?s:this.rr,void 0!==e&&e,void 0===h||h,"userSetInterval"),this}Qt(t,i,s=!1,e=!0,h){let r={start:t,end:i};const n=Math.abs(i-t);if(Math.abs(this.rr-this.hr),void 0!==this.kh.Mr&&this.kh.Mr>n){const s=(i+t)/2,e=this.kh.Mr/2*(t>i?-1:1);r={start:s-e,end:s+e}}if(void 0!==this.kh._r&&this.kh._r<n){const s=(i+t)/2,e=this.kh._r/2*(t>i?-1:1);r={start:s-e,end:s+e}}const o=this.Jt.Xt(r.start,r.end,this.hr,this.rr,!0);if(!1===o)return this;let a;switch(!0===o||(r=o),h){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":a=!0;break;case"zoomBandChart":case"synchronizedAxis":a=!1;break;default:return wr(0,""),this}if(this.Ar&&this.Ar.finishAll(!1),this.Dh&&(!0===s||s>0)){this.setStopped(!0);const t=!0===s?void 0:s,i=!this.Ar||this.Ar.isOver()?this.Dh:this.Ar.NextAnimation.bind(this);this.Ar=i([[this.hr,r.start],[this.rr,r.end]],this.qh,t),this.Ar.onAnimationEnd((()=>{this.Ar=void 0,a&&(this.Nh=Mh.performance.now())})),this.Ar.onAnimationEnd((()=>this.setStopped(e)))}else this.Jh(r.start,r.end),e&&this.setStopped(!0),a&&(this.Nh=Mh.performance.now());return this}getInterval(){return{start:this.hr,end:this.rr}}setStopped(t){return t===this.Oh||(t&&(this.Ar&&this.Ar.finishAll(!1),this.Ar=void 0),this.Oh=t,this.At.emit("stoppedStateChanged",this,this.Oh),this.Lh=Mh.performance.now(),this.chart.$s.te()),this}getStopped(){return this.Oh}onStoppedStateChanged(t){return this.At.on("stoppedStateChanged",t)}offStoppedStateChanged(t){return this.At.off(t,"stoppedStateChanged")}fit(t,i=!1){const s=this.wr();if(s){const e=this.rr>=this.hr,h=e?s.min:s.max,r=e?s.max:s.min;this.Qt(h,r,t,i,"userFit")}return this}setScrollStrategy(t){return this.Ih=t,this.chart.$s.te(),this}getScrollStrategy(){return this.Ih}setAnimationScroll(t){return this.Ph=Boolean(t),this.chart.$s.te(),this}setAnimationZoom(t,i=300){return this.Ar&&(this.Ar.finishAll(!1),this.Ar=void 0),this.Dh=t?Ze((()=>this.chart.$s.te()))(i,t):void 0,this}setAnimationsEnabled(t){return this.Bh=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(Ye.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.Bh}setVisible(t){const i=this.ds!==t;return this.ds=t,this.ar.setVisible(t),this.kr((i=>{i._h.setVisible(t)})),i&&this.At.emit("visibleStateChanged",this,this.ds),this}getVisible(){return this.ds}onIntervalChange(t){return this.At.on("scaleChange",t)}offIntervalChange(t){return this.At.off(t,"scaleChange")}onVisibleStateChanged(t){return this.At.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.At.off(t,"visibleStateChanged")}Cr(t,i){const s=new Map;if(this.kh===jo||!this.ds)return this.pr(),s;i=i||new Map;const e=this.Tr(),h=e.min,r=e.max,n=r-h,o=t.physicalAxisSize;this.Gh.physicalAxisSize=o;const a=sa(this.kh,h,r,this.hr,this.rr,o),l=[];if(this.Fr(),l.push(...this.Ir(this.kh,h,r,a,i,t,s)),this.Pr(this.kh,h,r,a,i,t,l,s),this.Dr(),a)for(const[t,i]of this.Fh){const s=a.get(t);if(void 0!==s)for(const[t,e]of i)s.includes(t)||(null==e||e.dispose(),i.delete(t))}return this.Gh.min=h,this.Gh.max=r,this.Gh.scaleInterval=n,this.Gh.physicalAxisSize=o,s}Br(t){const i=t.Xh.Or;t._h.lr(i(t.u,this.Jt)).le()}Lr(t,i){const s=i.Er;t._h.eh(s.getLabelFillStyle()).dr(s.getLabelFont()).gr(s.getLabelRotation())}Hh(t,i){const s=this.Fh.get(i);let e=s.get(t);e?(s.delete(t),e.Xh=i,e.Js(!0)):e=this.Rr(t,i);const h=this.Th.get(i)||new Map;return h.set(t,e),this.Th.set(i,h),this.Lr(e,i),e}jh(t,i){const s=this.zr(t,i);return this.Br(t),s}Ir(t,i,s,e,h,r,n){const o=[];for(const a of t.Ah){const t=e.get(a);for(const e of t){if(e<i||e>s)continue;const t=this.Th.get(a),l=(t?t.get(e):void 0)||this.Hh(e,a),u=this.jh(l,r),c=Jo(l,h);o.find((t=>Rr(c,Jo(t,h))))&&l._h.setVisible(!1),l.Uh=!1,n.set(l,u),o.push(l)}}return o}Pr(t,i,s,e,h,r,n,o){let a,l=[];for(const u of t.wh){const t=e.get(u);if(!t)break;let c;if(void 0===a)c=[{start:i,end:s,keyValues:t}];else{c=[];for(let i=0;i<a.length-1;i+=1){const s=a[i],e=a[i+1],h={start:s,end:e,keyValues:[]};for(const i of t)i>=s&&i<e&&h.keyValues.push(i);c.push(h)}}if(a=t,Uo(u))continue;let f=0,d=-1,g=[],m=[];for(let t=0;t<c.length;t+=1){const e=this.Wh(c[t].keyValues,u,i,s,r,o);g=g.concat(e.displayedKeyValues),m=m.concat(e.createdTicks)}let y=m,p=!0;if(u.Er.getLabelFillStyle()!==Ie){let t=[];for(;++d<c.length;){const e=c[d],r=e.start,o=e.end;let a=e.keyValues;if(f>0){if(void 0===u.Zh){p=!1;break}const t=u.Zh.Vr;if(a=t(a,f-1,r,o,i,s),void 0===a)break}const y=this.$h(m.filter((t=>a.some((i=>Ih(t.u,i))))),g,u,f,r,o,i,s,h,n,l);!0!==y?t=t.concat(y):(f+=1,d=-1,t=[])}y=t,m.forEach((i=>{t.find((t=>t===i))||this.Nr(i)}))}if(l=y,!p)break}}Nr(t){const i=this.Th.get(t.Xh);null==i||i.delete(t.u);const s=this.Fh.get(t.Xh);s&&s.has(t.u)?t.dispose():s&&(t.Js(!1),s.set(t.u,t))}kr(t){for(const i of this.Th.values())for(const s of i.values())t(s)}Gr(t,i){for(const s of this.Th.values())for(const e of s.values())i=t(i,e);return i}pr(){this.Th.forEach(((t,i)=>{t.forEach((t=>this.Nr(t)))})),this.Th.clear()}Fr(){for(const t of this.Th.values())for(const i of t.values())i.Uh=!0}Dr(){for(const t of this.Th.values())for(const[i,s]of t.entries())s.Uh&&(s.dispose(),t.delete(i))}Tr(){const t=this.Jt.getInnerStart()<this.Jt.getInnerEnd()?this.Jt.getInnerStart():this.Jt.getInnerEnd(),i=this.Jt.getInnerEnd()>this.Jt.getInnerStart()?this.Jt.getInnerEnd():this.Jt.getInnerStart();return a(t,i)}Yh(t,i){return!(t.Uh||0===t._h.nr().length||Ho(i)&&!0!==i.Wr)}Hr(t,i){return this.kh===jo||(this.kh.Ah.forEach((s=>{i=t(i,s.Er)})),this.kh.wh.forEach((s=>{(t=>void 0!==t.Or)(s)&&(i=t(i,s.Er))}))),i}wr(){let t=this.Qh.Ur();const i=this.Qh.jr();let s;if(void 0!==t&&Ah(t)&&void 0!==i&&Ah(i)&&("logarithmic"===this.ir.type&&(0===t&&(t=Math.min(1,i)),Math.sign(t)!==Math.sign(i)&&(t=Math.min(1,i-.1))),s?(s.min=Math.min(s.min,t),s.max=Math.max(s.max,i)):s=a(t,i)),s&&Ah(s.min)&&Ah(s.max))return Ih(s.min,s.max)?{min:s.min-1,max:s.max+1}:s}$r(){let t=0;const i=this.Qh.Yr();return i&&(t=Math.max(t,i)),t}Xr(){const t=this.Eh;let i=!1;if(this.Ih&&!this.Oh){const t=this.wr();if(t){const s=this.hr,e=this.rr;let h=this.Ih.start(s,e,t.min,t.max),r=this.Ih.end(s,e,t.min,t.max);const n=!1===Ih(s,h),o=!1===Ih(e,r);if(h=n?h:s,r=o?r:e,n||o){let t=!1;if(this.Ph)if(this.Ph){t=!0;const a=n?this.Zr(s,h):s,l=o?this.Zr(e,r):e;if(!0===this.Jh(a,l,{allowClamping:!1})&&(n&&!1===Ih(a,h)||o&&!1===Ih(l,r))){this.chart.$s.te(!0),i=!0;let t=Math.abs(r-h)/Math.abs(a-l);t<1&&(t=1/t),this.Rh=t>=1.4}}else t=!1;t||this.Jh(h,r)}}}i?(this.Eh!==i&&(this.Eh=i,this.zh=Mh.performance.now()),this.Kr&&(clearTimeout(this.Kr),this.Kr=void 0)):!0===t&&void 0===this.Kr&&(this.Rh=!1,this.Kr=setTimeout((()=>{!1!==this.Eh&&(this.Eh=!1,this.zh=Mh.performance.now()),this.Kr=void 0,this.chart.$s.te()}),200))}Jh(t,i,s){const e=!s||!("allowClamping"in s)||void 0===s.allowClamping||s.allowClamping;let h={start:t,end:i},r=!0;const n=Math.abs(i-t),o=Math.abs(this.rr-this.hr);if(void 0!==this.kh.Mr&&this.kh.Mr>n){const s=(i+t)/2,n=(e?this.kh.Mr/2:o/2)*(t>i?-1:1);h={start:s-n,end:s+n},r=!1}if(void 0!==this.kh._r&&this.kh._r<n){const s=(i+t)/2,n=(e?this.kh._r/2:o/2)*(t>i?-1:1);h={start:s-n,end:s+n},r=!1}let a=this.Jt.Xt(h.start,h.end,this.hr,this.rr,e);if(!1===a)return!1;!0!==a&&(h=a);const l=this.$r(),u=this.qr(Math.min(h.start,h.end),Math.max(h.start,h.end),l);return a=this.Jt.Xt(h.end>h.start?u.min:u.max,h.end>h.start?u.max:u.min,this.hr,this.rr,!1),!!a&&(!0===a?this.Jt.Vt(h.end>h.start?u.min:u.max,h.end>h.start?u.max:u.min):this.Jt.Vt(h.start,h.end),this.hr=h.start,this.rr=h.end,this.At.emit("scaleChange",this,h.start,h.end),this.Vh=Mh.performance.now(),this.chart.$s.te(),r)}Jr(){return this.Eh}Qr(){return void 0!==this.Ar}}class ia{constructor(t,i,s,e,h=s.tn(e).setMouseInteractions(!1)){this.Uh=!1,this.fs=!1,this.zs=[],this.Xh=t,this.u=i,this.sn=s,this.en=e,this._h=h,this.zs.push(h)}Js(t){this.zs.forEach((i=>i.setVisible(t)))}dispose(){return this.fs||(this.fs=!0,this.zs.forEach((t=>t.dispose()))),this}}const sa=(t,i,s,e,h,r)=>{const n=new Map;for(const r of t.Ah){let t=r.hn(i,s,e,h);t=ea(t),n.set(r,t)}let o;for(const e of t.wh){let t;if(void 0===o)t=e.hn(i,s,i,s);else{let h=[];const n=o.filter((t=>i<=t&&t<=s)).length;if(n>0){const t=r/(n-1);if(void 0!==e.rn&&e.rn>t)break}for(let t=0;t<o.length-1;t+=1){const r=e.hn(o[t],o[t+1],i,s);h=h.concat(r)}t=h}t=ea(t),n.set(e,t),o=t}return n},ea=t=>(t=(t=>{const i={},s=[],e=t.length;let h=0;for(let r=0;r<e;r+=1){const e=t[r];1!==i[e]&&(i[e]=1,s[h]=e,h+=1)}return s})(t)).sort(((t,i)=>t-i)),ha=le({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class ra extends ha{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const na=t=>!(!t||"object"!=typeof t||!("type"in t)||"font"!==t.type),oa=new ra,aa=new class{},la=le({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new Be,wireframeStyle:rh});class ua extends la{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return"function"==typeof t?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const ca=t=>!(!t||"object"!=typeof t||!("type"in t)||"triangulated-points-3d"!==t.type),fa=le({type:"pixelated-points-3d",size:5,fillStyle:new Be});class da extends fa{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const ga=t=>!(!t||"object"!=typeof t||!("type"in t)||"pixelated-points-3d"!==t.type),ma={Triangulated:ua,Pixelated:da};class ya{constructor(t){this.nn=new Map,this.$s=t}Us(t,i,s){const e=s.animationEnabled;this.nn.set(t,{applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:e,curAnimatedHighlightValue:0});const h=t.onDispose((()=>{this.nn.delete(t),t.offDispose(h)}))}an(t,i){const s=i.animationEnabled,e=[],h=t.onDispose((()=>{e.forEach((t=>{this.nn.delete(t)})),t.offDispose(h)}));return{ln:(t,i)=>{const h={applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0};e.push(t),this.nn.set(t,h)}}}se(t,i){const s=this.nn.get(t);s&&(s.curUnanimatedHighlightValue=Ar(i),this.$s.te())}Ks(t,i=!1){const s=this.nn.get(t);return s?i?s.curAnimatedHighlightValue:s.curUnanimatedHighlightValue:0}ee(t,i){const s=this.nn.get(t);s&&(s.animationEnabled=i)}he(t){const i=this.nn.get(t);return!!i&&i.animationEnabled}le(t){let i=!1;this.nn.forEach(((s,e)=>{let h;if(s.animationEnabled){const e=1e3;if(s.curUnanimatedHighlightValue>0){const r=s.curAnimationPositionMillis/e;h=s.curUnanimatedHighlightValue*Math.abs(Math.sin(r*Math.PI/2+.5));const n=0===s.curAnimatedHighlightValue?1:t;s.curAnimationPositionMillis+=n,i=!0}else s.curAnimatedHighlightValue>0&&0===s.curUnanimatedHighlightValue?(h=Math.max(s.curAnimatedHighlightValue-t/e,0),i=i||h>0):h=0,s.curAnimationPositionMillis=0}else h=s.curUnanimatedHighlightValue;h!==s.curAnimatedHighlightValue&&(s.applyHighlight(h),s.curAnimatedHighlightValue=h)})),i&&this.$s.te(!0)}}const pa=new Map,Sa=t=>{const i=t.getSize(),s=t.getFamily(),e=t.getWeight(),h=t.getStyle(),r=t.getVariant(),n=`${h} ${r?"small-caps":"normal"} ${e} ${i}px ${s}`;let o=pa.get(n);return o||(o=((t,i)=>({font:t,properties:i}))(n,{type:"font",size:i,family:s,style:h,variant:r,weight:e}),pa.set(n,o)),o};var va,ba;!function(t){t[t.click=0]="click",t[t.dbclick=1]="dbclick",t[t.mouseDown=2]="mouseDown",t[t.mouseUp=3]="mouseUp",t[t.contextmenu=4]="contextmenu",t[t.wheel=5]="wheel"}(va||(va={})),function(t){t[t.touchStart=0]="touchStart",t[t.touchMove=1]="touchMove",t[t.touchEnd=2]="touchEnd"}(ba||(ba={}));const xa=t=>({container:t.un,scale:t.Jt,setMouseStyle:(i,s)=>t.cn(i,s),restoreMouseStyle:i=>t.fn(i),clientLocation2Engine:(i,s)=>t.lh(i,s),engineLocation2Client:(i,s)=>t.dn(i,s),captureFrame:(i,s)=>t.gn(i,s),renderFrame:(i,s,e=!1)=>t.mn(i,s,e),layout:()=>{t.yn(),t.pn()},setBackgroundFillStyle(i){return t.setBackgroundFillStyle(i),this},setBackgroundStrokeStyle(i){return t.setBackgroundStrokeStyle(i),this},getBackgroundFillStyle:()=>t.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>t.getBackgroundStrokeStyle(),addCustomIcon:(i,s)=>t.Sn(i,s)}),Ma=[];let _a;const Aa=()=>{if(void 0!==_a){const t=Mh.getComputedStyle(Mh.document.body),i=Number(t.getPropertyValue("margin-top").replace("px",""))+Number(t.getPropertyValue("margin-bottom").replace("px",""));_a.style.height=Mh.innerHeight-i+"px",(()=>{for(let t=0;t<Ma.length;t+=1)Ma[t]()})()}},wa=new Be({color:Se(255,255,255)}),ka={font:Sa(oa),fillStyle:wa,lineStyle:new Qn({fillStyle:wa,thickness:1}),pointStyle3D:new ma.Triangulated};class Ca{constructor(t,i){this.At=new $e,this.Jt=ah.d2({scaleXYConstructor:Rn}),this.vn=new Map,this.bn=Ze((()=>this.te()),60),this.xn=e(0,0),this.Mn=void 0,this._n=Fh,this.An=()=>{},this.wn=[],this.kn=-1,this.Cn=[],this.Tn=!0,this.fs=!1,this.pn=()=>{const{bottom:t,left:i}=this.Fn().getBoundingClientRect();return this.xn=e(Math.floor(i),Math.floor(t)),this},this.yn=()=>{this.In&&this.In()},this.cn=(t,i)=>{if(!i){this.un.style.cursor=t;const i=this.kn;return this.kn+=1,this.Cn.push([i,t]),i}return this.fn(i),this.cn(t)},this.fn=t=>{const i=t?this.Cn.findIndex((i=>i[0]===t)):-1;i>=0?(this.Cn.splice(i,1),this.Cn.length>0?this.un.style.cursor=this.Cn[this.Cn.length-1][1]:this.un.style.cursor="default"):(this.Cn.push([0,"default"]),this.un.style.cursor="default")},this.Pn=t=>(this.Dn.S(t),this),this.Bn=()=>this.Dn.M(),this.On=()=>{this._n&&this._n(1e3/60),this.Ln(),this.En(),this.An&&this.An()},this.Rn=t=>(this.vn.set(t.zn(),t),this.vn=new Map([...this.vn.entries()].sort(((t,i)=>t[0]-i[0]))),t),this.Vn=t=>(this.vn.delete(t),this),this.Rt=()=>(this.Dn.o=!1,this),this.zt=()=>(this.Dn.o=!0,this),this.Nn=t=>{if(!this.Tn)return;const i=this.Gn,s=i&&i.clientX===t.clientX&&i.clientY===t.clientY,h=this.lh(t.clientX,t.clientY),r=this.Wn(t,{x:t.clientX,y:t.clientY});if(this.Hn&&((null==r?void 0:r.entity)!==this.Hn.entity||r.collectionMember!==this.Hn.collectionMember)&&!this.Un){this.Hn.entity.gs=!1;const i=this.Hn.entity.jn;i&&i(this.Hn.entity,t,this.Hn.collectionMember)}if(r&&r.entity.getMouseInteractions()&&!this.Un)if(r.entity.gs){if(!s){const i=r.entity.$n;i&&i(r.entity,t,r.collectionMember)}}else{r.entity.gs=!0;const i=r.entity.Yn;i&&i(r.entity,t,r.collectionMember)}if(this.Un){const s=this.Un.entity.Xn,h=i?e(t.clientX-i.clientX,i.clientY-t.clientY):{x:0,y:0};!s||0===h.x&&0===h.y||s(this.Un.entity,t,this.Un.button,this.Un.startLocation,h,this.Un.collectionMember)}this.Zn=t,this.Gn=t,this.Kn=h,this.Hn=r},this.qn=t=>{if(this.Tn=!1,this.Kn=void 0,this.Zn=t,this.Gn=void 0,this.Un){const i=this.Un.entity.Jn;i&&i(this.Un.entity,t,this.Un.button,this.Un.startLocation,this.Un.collectionMember),this.Un.entity.gs=!1;const s=this.Un.entity.jn;s&&s(this.Un.entity,t,this.Un.collectionMember),this.Un=void 0}if(this.Qn){const i=this.Qn.entity.io;i&&i(this.Qn.entity,t,this.Qn.collectionMember),this.Qn=void 0}if(this.Hn){this.Hn.entity.gs=!1;const i=this.Hn.entity.jn;i&&i(this.Hn.entity,t,this.Hn.collectionMember),this.Hn=void 0}},this.so=t=>{this.Tn=!0,this.Zn=t},this.eo=()=>this.Kn,this.Rs=t.theme,this.ho=i.ho,this.ro={no:i.no,oo:i.oo,ao:i.ao,lo:i.lo,uo:i.uo,co:i.co,fo:t&&t.overrideInteractionMouseButtons?t.overrideInteractionMouseButtons:void 0,Ae:t&&void 0!==t.resourcesBaseUrl&&null!==t.resourcesBaseUrl?t.resourcesBaseUrl:`${Mh.location.origin}/resources`,do:!t||!("warnings"in t)||"boolean"!=typeof t.warnings||t.warnings,mo:(()=>{const i=null==t?void 0:t.pickingPrecision;if("string"==typeof i){const t=i.toLowerCase();if("best"===t)return 1;if("high"===t)return.5;if("low"===t)return 1/8}return 1/4})(),yo:void 0===(null==t?void 0:t.interactable)||t.interactable,po:void 0===t.textPixelSnappingEnabled||t.textPixelSnappingEnabled};const s=t?t.container:void 0;if(s){if("string"==typeof s){const t=Mh.document.getElementById(s);if(!t)throw new Error(`Container "${s}" doesn't exist.`);this.un=t}else this.un=s;Mh.addEventListener("resize",this.yn),this.wn.push((()=>{Mh.removeEventListener("resize",this.yn)}))}else{if(void 0===_a){const t=Mh.document.createElement("div");t.id="lcjs-auto-flexbox",t.style.position="relative",t.style.width="100%",t.style.display="flex",t.style.flexDirection="column",Mh.document.body.appendChild(t),_a=t,Mh.addEventListener("resize",Aa)}let t=1;for(;null!==Mh.document.getElementById(`chart-${t}`);)t+=1;this.un=Mh.document.createElement("div"),this.un.id=`chart-${t}`,this.un.style.flex="1",_a.appendChild(this.un),Aa(),Ma.push(this.yn),this.wn.push((()=>{_a&&_a.removeChild(this.un),Ma.includes(this.yn)&&Ma.splice(Ma.indexOf(this.yn),1),0===Ma.length&&_a&&(Mh.document.body.removeChild(_a),_a=void 0,Mh.removeEventListener("resize",Aa))}))}if(Mh.ResizeObserver){const t=t=>{for(const i of t)i.target===this.un&&this.yn()};this.So=new Mh.ResizeObserver(t.bind(this)),this.So.observe(this.un)}""===this.un.style.position&&(this.un.style.position="relative"),this.un.style.boxSizing="content-box",this.un.addEventListener("fullscreenchange",this.yn),this.un.addEventListener("webkitfullscreenchange",this.yn);const h=t?t.maxFps:void 0;this.vo=h?-1===h?-1:0!==h?1e3/h:0:0;const r=new Map;let n=!1;const o=(t,i)=>s=>{const e=function(t){return{x:t.clientX,y:t.clientY}}(s);switch(s.type){case"pointerover":case"pointerenter":case"pointermove":case"pointerdown":r.set(s.pointerId,e);break;default:r.delete(s.pointerId),n=!1}switch(s.interactions=Array.from(r.values()),s.pointerType){case"pen":case"mouse":default:t&&t(s);break;case"touch":i&&i(s)}s.defaultPrevented&&(n=!0)};if(this.un.onwheel=this.bo(va.wheel),this.un.oncontextmenu=this.bo(va.contextmenu),this.un.onclick=this.bo(va.click),this.un.ondblclick=this.bo(va.dbclick),this.un.onlostpointercapture=()=>{n=!1},this.un.ontouchmove=t=>{n&&t.preventDefault()},this.un.onpointerover=o(),this.un.onpointerenter=o(this.so),this.un.onpointerdown=o(this.bo(va.mouseDown),this.xo(ba.touchStart)),this.un.onpointermove=o(this.Nn,this.xo(ba.touchMove)),this.un.onpointerup=o(this.bo(va.mouseUp),this.xo(ba.touchEnd)),this.un.onpointercancel=o(),this.un.onpointerout=o(),this.un.onpointerleave=o(this.qn,this.xo(ba.touchEnd)),!Mh.requestAnimationFrame||!Mh.cancelAnimationFrame)throw new Error("LightningChart JS depends on requestAnimationFrame. Make sure to load a polyfill in older browsers.");Mh.addEventListener("scroll",this.pn),this.Dn=u(new ye({r:0,g:0,b:0,a:0})),this.js=new ya(this)}Mo(){return this._o}Ao(){return this.wo}setBackgroundFillStyle(t){return this.ko.eh(t),this}getBackgroundFillStyle(){return this.ko.ur()}setBackgroundStrokeStyle(t){return this.ko.sh(t),this}getBackgroundStrokeStyle(){return this.ko.Co()}To(t){return this.An=t,this}Fo(t){return this._n=t,this}Io(t){return this.vn.get(t)}Po(){return Array.from(this.vn.keys()).reverse().reduce(((t,i)=>i!==Number.MAX_SAFE_INTEGER&&i>t?i:t),0)+1}bo(t){return i=>this.Do(t,i)}Do(t,i){if(!this.Tn)return;t===va.contextmenu&&ir(i);const s=this.lh(i.clientX,i.clientY),h=this.Wn(i,{x:i.clientX,y:i.clientY});if(t===va.mouseUp){if(this.Un){const t=this.Un.entity.Jn;if(t&&t(this.Un.entity,i,this.Un.button,this.Un.startLocation,this.Un.collectionMember),(null==h?void 0:h.entity)!==this.Un.entity||h.collectionMember!==this.Un.collectionMember){this.Un.entity.gs=!1;const t=this.Un.entity.jn;t&&t(this.Un.entity,i,this.Un.collectionMember)}this.Un=void 0}if(this.Qn){const t=this.Qn.entity.getMouseInteractions()&&this.Qn.entity.io;t&&t(this.Qn.entity,i,this.Qn.collectionMember),this.Qn=void 0}}else if(h&&h.entity.getMouseInteractions()){const s=t===va.click?h.entity.Bo:t===va.dbclick?h.entity.Oo:t===va.mouseDown?h.entity.Lo:t===va.wheel?h.entity.Eo:t===va.contextmenu?h.entity.Ro:void 0;if(s&&s(h.entity,i,h.collectionMember),t===va.mouseDown){this.Qn={entity:h.entity,collectionMember:h.collectionMember,event:i};const t=this.Qn.event.button,s=h.entity.zo;s&&s(h.entity,i,t,h.collectionMember),this.Un={entity:h.entity,collectionMember:h.collectionMember,button:t,startLocation:e(i.clientX,i.clientY)}}}this.Zn=i,this.Kn=s,this.Hn=h}xo(t){return i=>this.Vo(t,i)}Vo(t,i){const s=i.interactions.length;if(this.No=i,this.Go){const e=t===ba.touchMove?this.Go.entity.Wo:t===ba.touchEnd?this.Go.entity.Ho:t===ba.touchStart?this.Go.entity.Uo:void 0;e&&e(this.Go.entity,i,this.Go.collectionMember),t===ba.touchEnd&&0===s&&(this.Go.entity.gs=!1,this.Go=void 0)}else if(t===ba.touchStart){for(let t=0;t<s&&(this.Go=this.Wn(i,{x:i.interactions[t].x,y:i.interactions[t].y}),!this.Go);t+=1);if(this.Go){this.Go.entity.gs=!0;const t=this.Go.entity.Uo;t&&t(this.Go.entity,i,this.Go.collectionMember)}}t===ba.touchEnd?this.Kn=void 0:this.Kn=this.lh(i.clientX,i.clientY)}jo(t){return this.At.on("resize",t)}$o(t){return this.At.off(t,"resize")}Yo(){return this.At.topicOff("resize"),this}Pt(){if(this.fs=!0,this.vn)for(const t of this.vn.values())t.Pt();this._n=void 0,this.An=void 0,Mh.removeEventListener("scroll",this.pn),this.un.removeEventListener("fullscreenchange",this.yn),this.un.removeEventListener("webkitfullscreenchange",this.yn),this.So&&(this.So.disconnect(),this.So=void 0),this.wn.forEach((t=>{t()})),this.wn.length=0,this.Mn&&Mh.cancelAnimationFrame(this.Mn)}lh(t,i){return e(t-this.xn.x,this.xn.y-i)}dn(t,i){return e(t+this.xn.x,this.xn.y-i)}Xo(t){const i=this.lh(t.clientX,t.clientY);return{engineX:i.x,engineY:i.y}}Zo(t){const i=this.dn(t.engineX,t.engineY);return{clientX:i.x,clientY:i.y}}}const Ta=(t=1)=>({type:"horizontalProgressive",packager:(i,s,h)=>{if(i.length>1){const r=on(s,h*t),n=Math.abs(r.x),o=i.length,a=[];let l=0,u=0,c=i[0].x+n;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.x<c&&u<o){const s=u;let h=t.y,r=t.y;for(;u<o&&i[u].x<=c;)i[u].y>h&&(h=i[u].y),i[u].y<r&&(r=i[u].y),u+=1;if(s!==u){const t=(a[l-1].x+i[u-1].x)/2;a[l+0]=e(t,r),a[l+1]=e(t,h),a[l+2]=i[u-1],l+=3}}c+=n}return a}return i.slice()}}),Fa=(t=1)=>({type:"horizontalRegressive",packager:(i,s,h)=>{if(i.length>1){const r=on(s,h*t),n=Math.abs(r.x),o=i.length,a=[];let l=0,u=0,c=i[0].x-n;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.x>c&&u<o){const s=u;let h=t.y,r=t.y;for(;u<o&&i[u].x>=c;)i[u].y>h&&(h=i[u].y),i[u].y<r&&(r=i[u].y),u+=1;if(s!==u){const t=(a[l-1].x+i[u-1].x)/2;a[l+0]=e(t,r),a[l+1]=e(t,h),a[l+2]=i[u-1],l+=3}}c-=n}return a}return i.slice()}}),Ia=(t=1)=>({type:"verticalProgressive",packager:(i,s,h)=>{if(i.length>1){const r=on(s,h*t),n=Math.abs(r.y),o=i.length,a=[];let l=0,u=0,c=i[0].y+n;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.y<c&&u<o){const s=u;let h=t.x,r=t.x;for(;u<o&&i[u].y<=c;)i[u].x>h&&(h=i[u].x),i[u].x<r&&(r=i[u].x),u+=1;if(s!==u){const t=(a[l-1].y+i[u-1].y)/2;a[l+0]=e(r,t),a[l+1]=e(h,t),a[l+2]=i[u-1],l+=3}}c+=n}return a}return i.slice()}}),Pa=(t=1)=>({type:"verticalRegressive",packager:(i,s,h)=>{if(i.length>1){const r=on(s,h*t),n=Math.abs(r.y),o=i.length,a=[];let l=0,u=0,c=i[0].y-n;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.y>c&&u<o){const s=u;let h=t.x,r=t.x;for(;u<o&&i[u].y>=c;)i[u].x>h&&(h=i[u].x),i[u].x<r&&(r=i[u].x),u+=1;if(s!==u){const t=(a[l-1].y+i[u-1].y)/2;a[l+0]=e(r,t),a[l+1]=e(h,t),a[l+2]=i[u-1],l+=3}}c-=n}return a}return i.slice()}});var Da,Ba;t.PointShape=void 0,(Da=t.PointShape||(t.PointShape={}))[Da.Square=0]="Square",Da[Da.Circle=1]="Circle",Da[Da.Triangle=2]="Triangle",function(t){t[t.Nearest=0]="Nearest",t[t.NearestX=1]="NearestX",t[t.NearestY=2]="NearestY"}(Ba||(Ba={}));const Oa=t=>{const i="nearest"===t?Ba.Nearest:"nearest-x"===t?Ba.NearestX:"nearest-y"===t?Ba.NearestY:void 0;return void 0!==i?i:Ba.NearestX},La=(t,i,s,e,h,r,n,o,a,l)=>{const u=t.length;if(0===u)return;const c=e?1:0,f=u-(h?2:1);if(s===Ba.Nearest)return Ea(t,i,r,n,c,f);if(s===Ba.NearestX||s===Ba.NearestY){if("boolean"==typeof l&&("x"===a&&s===Ba.NearestX||"y"===a&&s===Ba.NearestY))return Va(t,uh(i,n,r),a,l,c,f);if(s===Ba.NearestX)return Ra(t,uh(i,n,r),o,c,f);if(s===Ba.NearestY)return za(t,uh(i,n,r),o,c,f)}},Ea=(t,i,s,e,h,r)=>{let n,o=Number.MAX_VALUE;for(let a=h;a<=r;a+=1){const h=t[a];if(!Number.isNaN(h.x)&&!Number.isNaN(h.y)){const t=uh(h,s,e),r=(t.x-i.x)**2+(t.y-i.y)**2;r<o&&(o=r,n=a)}}return n},Ra=(t,i,s,e,h)=>{if(i.x<s.min.x||i.x>s.max.x)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.x>i.x?e.x-i.x:i.x-e.x;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},za=(t,i,s,e,h)=>{if(i.y<s.min.y||i.y>s.max.y)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.y>i.y?e.y-i.y:i.y-e.y;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},Va=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,f=a.x>l.x?a.x:l.x,d=a.y>l.y?a.y:l.y;if(n&&(o<u||o>f)||!n&&(o<c||o>d))return;let g=h,m=Math.floor((h+r)/2),y=r,p=-1;for(;;){const i=o-(n?t[m].x:t[m].y);if(i*(e?-1:1)>0)g=Math.min(m+1,y),p=Math.floor((g+y)/2);else{if(0===Math.abs(i))return m;y=Math.max(m-1,g),p=Math.floor((g+y)/2)}if(p===m){const s=m>h?Math.abs(o-(n?t[m-1].x:t[m-1].y)):Dr,e=m<r?Math.abs(o-(n?t[m+1].x:t[m+1].y)):Dr,a=Math.abs(i);switch(Math.min(a,s,e)){case s:return m-1;case e:return m+1;default:return m}}else m=p}},Na=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,f=a.x>l.x?a.x:l.x,d=a.y>l.y?a.y:l.y;if(n&&(o<u||o>f)||!n&&(o<c||o>d))return;let g=h,m=Math.floor((h+r)/2),y=r,p=-1;for(;;){const s=o-(n?t[m].x:t[m].y);if(s*(e?-1:1)>0)g=Math.min(m+1,y),p=Math.floor((g+y)/2);else{if(0===Math.abs(s))return{a:m,b:m,lerpAmount:0};y=Math.max(m-1,g),p=Math.floor((g+y)/2)}if(p===m){if(s*(e?-1:1)<0&&m>h){const s=t[m-1],e=t[m];return{a:m-1,b:m,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}if(m<r){const s=t[m],e=t[m+1];return{a:m,b:m+1,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}return{a:m,b:m,lerpAmount:0}}m=p}};let Ga=0;class Wa{constructor(t,i,s){this.Ko=u(!0),this.qo=!1,this.gs=!1,this.Jo=!1,this.fs=!1,this.ds=!0,this.Qo=void 0,this.ta=0,this.At=new $e,this.$n=void 0,this.Yn=void 0,this.jn=void 0,this.Bo=void 0,this.Eo=void 0,this.Ro=void 0,this.Oo=void 0,this.Lo=void 0,this.io=void 0,this.zo=void 0,this.Xn=void 0,this.Jn=void 0,this.Uo=void 0,this.Wo=void 0,this.Ho=void 0,this.onDispose=t=>this.At.on("dispose",t),this.offDispose=t=>this.At.off(t,"dispose"),this.$s=t,this.ia=i,this.sa=s,this.ea=Ga,Ga+=1,this.ha=t.Rs.highlightColorOffset}ra(t){return void 0!==this.sa.find((i=>i.type===t))}na(t,i){var s;return!!this.ra(t)&&!0===i(null===(s=this.sa.find((i=>i.type===t)))||void 0===s?void 0:s.args)}dispose(){return this.fs||(this.gs&&this.jn&&this.jn(this,void 0,void 0),this.fs=!0,this.ia(this),this.At.emit("dispose",this)),this}setVisible(t){const i=this.ds;return this.ds=t,!t&&i&&(this.gs&&this.jn&&this.jn(this,void 0,void 0),this.gs=!1),this}getVisible(){return this.ds}setMouseInteractions(t){const i=this.Ko.M();return this.Ko.S(t),t||(i&&this.gs&&this.jn&&this.jn(this,void 0,void 0),this.gs=!1),this}getMouseInteractions(){return this.Ko.M()}getIsUnderMouse(){return this.gs}getIsGrabbed(){return this.Jo}setMouseMoveEventHandler(t){return this.$n=t,this}setMouseEnterEventHandler(t){return this.Yn=t,this}setMouseLeaveEventHandler(t){return this.jn=t,this}setMouseClickEventHandler(t){return this.Bo=t,this}setMouseDoubleClickEventHandler(t){return this.Oo=t,this}setMouseDownEventHandler(t){return this.Lo=t,this}setMouseUpEventHandler(t){return this.io=t,this}setMouseWheelEventHandler(t){return this.Eo=t,this}setMouseContextMenuEventHandler(t){return this.Ro=t,this}setMouseDragEventHandler(t){return this.Xn=t,this}setMouseDragStartEventHandler(t){return this.zo=t,this}setMouseDragStopEventHandler(t){return this.Jn=t,this}setTouchStartEventHandler(t){return this.Uo=t,this}setTouchMoveEventHandler(t){return this.Wo=t,this}setTouchEndEventHandler(t){return this.Ho=t,this}oa(t){return this.Qo=t,this}aa(){return this.Qo?this.Qo:Ha}Ys(t){return this.ta=t,this}la(){return this.ta}ua(t){return this.ha=t,this}ca(){return this.ha}}const Ha=a(e(0,0),e(0,0));class Ua extends Wa{constructor(t,i,s,e){super(t,s,e),this.fa=0,this.re=i,this.re.da=!0}ga(t){return this.fa===t||(this.fa=t,this.re.da=!0),this}ma(){return this.fa}}class ja extends Ua{constructor(t,i,s,e,h){super(t,i,e,h),this.ya=!0,this.Jt=s}}const $a=(t,i,s)=>{if(s instanceof Rn){const h=s.os(),r=un(i,{x:Math.abs(h.x),y:Math.abs(h.y)});return a(e(t.min.x-r.x,t.min.y-r.y),e(t.max.x+r.x,t.max.y+r.y))}return a(s.Ei(e(t.min.x,t.min.y),on(i,-1)),s.Ei(e(t.max.x,t.max.y),i))},Ya=(t,i)=>"function"==typeof i?i(t):i,Xa=(t,i)=>!t||t!==i,Za=(t,i)=>t===Ie&&i!==Ie,Ka=t=>t!==Ie;class qa extends ja{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Qe=ka.fillStyle,this.$s=t}eh(t){return this.Qe=Ya(this.Qe,t),this}ur(){return this.Qe}pa(){return Xa(this.Sa,this.Qe)}va(){return Za(this.Sa,this.Qe)}ba(){return Ka(this.Qe)}xa(t){this.Sa=t}}class Ja extends qa{constructor(t,i,s,e,h){super(t,i,s,e,h),this.th=ka.lineStyle,this.$s=t}sh(t){return this.th="function"==typeof t?t(this.th):t,this}Co(){return this.th}Ma(){return!this._a||this._a!==this.th}Aa(t){return!this._a||this._a.getThickness()!==t}ba(){return this.th!==rh||super.ba()}va(){return(this.th!==rh||this.Qe!==Ie)&&this._a===rh&&this.Sa===Ie}wa(t){this._a=t}}class Qa extends qa{constructor(t,i,s,e,h,r=u(5)){super(t,i,s,e,h),this.size=u(5),this.size=r}Gt(t){return this.size.S(t),this}}class tl extends qa{constructor(t,i,s,h,r,n=u(ka.font)){super(t,i,s,h,r),this.ka=u(""),this.Ca=u(e(0,0)),this.Ta=u(0),this.Fa=u(0),this.Ia=u(e(0,0)),this.Pa=u(0),this.Da=u(oa),this.K=e(0,0),this.di=u(c(1,1,1,1)),this.Ba=u(f(4,4,4,4)),this.font=u(ka.font),this.Oa=!1,this.font=n}ba(){return Ka(this.Qe)&&this.ka.M().length>0}va(){return!1===this.Oa&&this.ba()}lr(t){return this.ka.S(t),this}nr(){return this.ka.M()}dr(t){return na(t)?this.Da.S(t):this.Da.S(t(this.Da.M())),this}cr(){return this.Da.M()}La(t){return this.Da.S(this.Da.M().setFamily(t)),this}Ea(){return this.Da.M().getFamily()}Ra(t){return this.Da.S(this.Da.M().setSize(t)),this}za(){return this.Da.M().getSize()}Va(t){return this.Da.S(this.Da.M().setWeight(t)),this}Na(){return this.Da.M().getWeight()}Ga(t){return this.Da.S(this.Da.M().setStyle(t)),this}Wa(){return this.Da.M().getStyle()}Ha(t){return this.Da.S(this.Da.M().setVariant(t)),this}Ua(){return this.Da.M().getVariant()}oh(t){return this.Ca.S(t),this}ja(){return this.Ca.M()}gr(t){return this.Pa.S(t),this}mr(){return this.Pa.M()}$a(t,i){return this.Ia.S(e(t,i)),this}Ya(){return this.Ia.M()}Xa(t){return this.Fa.S(t),this}Za(){return this.Fa.M()}Ka(t){return this.Ta.S(t),this}qa(){return this.Ta.M()}Ja(t){return this.Fa.S(t.x),this.Ta.S(t.y),this}Qa(t){return this.di.S(t),this}tl(){return this.di.M()}il(t){return this.Ba.S(t),this}sl(){return this.Ba.M()}}class il extends Qa{constructor(i,s,e,h,r,n=5){super(i,s,e,h,r,u(n)),this.el=[],this.hl=u(t.PointShape.Square),this.Pa=u(0),this.rl=u(!1),this.nl=u(!1),this.ol=u(!1),this.al=Or,this.ll=0,this.ul=[],this.cl=0,this.fl=Or,this.dl=Ba.Nearest,this.ml=!1}yl(t){return this.dl=t,this}pl(){return this.ul}Sl(){return this.el}vl(t){return this.hl.S(t),this}gr(t){return this.Pa.S(t),this}bl(t){return this.rl.S(t),this}xl(t){return this.nl.S(t),this}Ml(t){return this.ol.S(t),this}_l(t,i){return Array.isArray(t)||(t=[t]),this.cl+=t.length,this.ul=ur(this.ul,t,{canReturnB:!0}),this.fl&&(this.fl=i?Kr(this.fl,i):void 0),this}Al(){return this.ml=!0,this.el.length=0,this.ll=0,this.al=Or,this.ul=[],this.cl=0,this}wl(){return this.ll}kl(){return this.cl}}class sl extends Ja{constructor(t,i,s,h,r){super(t,i,s,h,r),this.Ca=u(e(0,0)),this.Et=u(e(100,100)),this.Pa=u(0),this.K=u(e(0,0)),this.Cl=!1}le(){return this.Tl(),this}oh(t){const i=this.Ca.M();return t.x===i.x&&t.y===i.y||(this.Ca.S(t),this.Tl()),this}ja(){return this.Ca.M()}Fl(t){const i=this.Ca.M();return t!==i.x&&(this.Ca.S(e(t,i.y)),this.Tl()),this}Il(t){const i=this.Ca.M();return t!==i.y&&(this.Ca.S(e(i.x,t)),this.Tl()),this}Gt(t){const i=this.Et.M();return t.x===i.x&&t.y===i.y||(this.Et.S(e(t.x,t.y)),this.Tl()),this}Ci(){return this.Et.M()}Pl(t){const i=this.Et.M();return t!==i.x&&(this.Et.S(e(t,i.y)),this.Tl()),this}Dl(t){const i=this.Et.M();return t!==i.x&&(this.Et.S(e(i.x,t)),this.Tl()),this}gr(t){return this.Pa.S(t),this}mr(){return this.Pa.M()}Bl(t){const i=this.K.M();return t===i&&i.x===t.x&&i.y===t.y||(void 0===t?(this.Cl=!1,this.Tl()):(this.Cl=!0,this.K.S(t))),this}Tl(){if(!this.Cl){const t=this.Ca.M(),i=this.Et.M(),s=e(t.x+i.x/2,t.y+i.y/2),h=this.K.M();s.x===h.x&&s.y===h.y||this.K.S(s)}}}class el extends Ja{constructor(){super(...arguments),this.el=[],this.Ca=u(e(0,0)),this.al=Or,this.Ol=!1}Ll(t){return t=rr(t),this.el=t,this.Ol=!0,this}El(){return this.el}oi(){return this.al.max.x}ni(){return this.al.min.x}li(){return this.al.max.y}ai(){return this.al.min.y}Rl(){return 0}zl(){return 0}}class hl extends el{}class rl extends qa{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Vl=new Array,this.Nl=new Array,this.Gl=u({type:"disabled",packager:(t,i,s)=>t.slice()}),this.al=Or,this.Wl=0,this.Hl=!1,this.ul=[Array(),Array()],this.Ul=!1,this.jl=(new Be).setColor(Se(42,171,240)),this.ml=!1,this.$l=!1,this.Yl=!1}_l(t,i){const s=this.Wl-1,h=s>0&&!this.Ul;let[r,n]=h?[[this.Vl[s]],[this.Nl[s]]]:[[],[]];if(t instanceof Array){const[i,s]=o(t);r=ur(r,i,{canReturnB:!0}),n=ur(n,s,{canReturnB:!0})}else{const i=t.position;r.push(e(i,t.high)),n.push(e(i,t.low))}return this.Ul?(this.ul[0]=ur(this.ul[0],r,{canReturnB:!0}),this.ul[1]=ur(this.ul[1],n,{canReturnB:!0})):(this.ul=[r,n],this.Ul=!0),this.al=Kr(this.al,i||Kr(Xr(r),Xr(n))),this}Al(){return this.ml=!0,this.Vl.length=0,this.Nl.length=0,this.Wl=0,this.al=Or,this}Sl(){return[this.Vl,this.Nl]}pl(){return[this.ul[0],this.ul[1]]}Xl(t){return this.Gl.S(t),this}Zl(){return this.Gl.M()}Kl(t){return this.jl="function"==typeof t?t(this.jl):t,this}ql(){return this.jl}wl(){return this.Wl-(Number(this.$l)+Number(this.Yl))}kl(){return this.ul.length}Jl(t){return this.$l=t,this}Ql(){return this.$l}tu(t){return this.Yl=t,this}iu(){return this.Yl}va(){return this.Sa===Ie&&this.su===Ie&&(this.Qe!==Ie||this.jl!==Ie)}eu(t){this.su=t}ba(){return this.jl!==Ie||super.ba()}pa(){return super.pa()||!this.su||this.su!==this.jl}}class nl extends Ja{constructor(t,i,s,h,r){super(t,i,s,h,r),this.Ca=u(e(0,0)),this.hu=u(0),this.ot=u(360),this.ru=u(100),this.nu=u(100),this.ou=u(0),this.au=u(void 0),this.lu=e(0,0),this.uu=e(0,0),this.cu=e(0,0)}fu(){return this.ru.M()}du(){return this.nu.M()}ja(){return this.Ca.M()}gu(){return this.hu.M()}Xi(){return this.ot.M()}mu(){return this.ou.M()}yu(){return this.au.M()}pu(){return this.lu}Su(){return this.uu}vu(){return this.cu}oh(t){return this.Ca.S(t),this}bu(t){return this.hu.S(t),this}yh(t){return this.ot.S(t),this}xu(t){return this.nu.S(t),this.ru.S(t),this}Mu(t){return this.ru.S(t),this}_u(t){return this.nu.S(t),this}Au(t){return this.ou.S(t<0?0:t),this}wu(t){return this.au.S(void 0!==t&&t<=0?void 0:t),this}}var ol;!function(t){t[t.Complex=0]="Complex",t[t.Simple=1]="Simple"}(ol||(ol={}));const al=(t,i)=>"function"==typeof i?i(t):i,ll=(t,i)=>!t||t!==i,ul=(t,i)=>!t||t.getThickness()!==i,cl=(t,i)=>t===rh&&i!==rh,fl=t=>t!==rh&&t.getFillStyle()!==Ie;class dl extends ja{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ku=ka.lineStyle,this.engine=t}gh(t){return this.ku=al(this.ku,t),this}Cu(){return this.ku}Ma(){return ll(this.Tu,this.ku)}Fu(t){return ul(this.Tu,t)}va(){return cl(this.Tu,this.ku)}ba(){return fl(this.ku)}Iu(t){this.Tu=t}}class gl extends dl{constructor(t,i,s,h,r){super(t,i,s,h,r),this.nt=e(0,0),this.ot=e(0,0),this.Pu=!1}S({min:t,max:i}){return t.x===this.nt.x&&t.y===this.nt.y&&i.x===this.ot.x&&i.y===this.ot.y||(this.Pu=!0,this.nt=t,this.ot=i),this}Zi(){return this.nt}Xi(){return this.ot}ph(t){return t.x===this.nt.x&&t.y===this.nt.y||(this.Pu=!0,this.nt=t),this}yh(t){return t.x===this.ot.x&&t.y===this.ot.y||(this.Pu=!0,this.ot=t),this}}class ml extends dl{constructor(t,i,s,e,h){super(t,i,s,e,h)}}class yl extends dl{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Du=[],this.al=Or,this.ul=new Array,this.ll=0,this.dl=Ba.NearestX,this.ml=!1,this.Bu=u(void 0),this.$l=!1,this.Yl=!1}Ou(t){return this.Bu.S(t),this}Lu(){return this.Bu.M()}pl(){return this.ul}Sl(){return this.Du}yl(t){return this.dl=t,this}Al(){return this.ml=!0,this.Du.length=0,this.ll=0,this.ul=[],this.al=Or,this}wl(){return this.ll-(Number(this.$l)+Number(this.Yl))}kl(){return this.ul.length}Jl(t){return this.$l=t,this}Ql(){return this.$l}tu(t){return this.Yl=t,this}iu(){return this.Yl}}class pl extends qa{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Wl=0,this.Eu=0,this.Et=u({x:0,y:0}),this.Ru=u({x:0,y:0}),this.zu=u({x:0,y:0}),this.nt={x:0,y:0},this.ot={x:0,y:0},this.Vu=!0,this.Nu=!0,this.Gu=!0,this.al=Or,this.Wu=!0,this.Hu=Ie}Uu(t){return this.Hu=Ya(this.Hu,t),this}ju(){return this.Hu}S(t){return Sl.S(this,t,((t,i)=>({x:t,y:i}))),this}$u(){return Sl.$u(this)}Yu(){return Sl.Yu(this)}ja(){return Sl.ja(this)}kl(){return Sl.kl(this)}Xu(t,i,s){return Sl.Xu(this,t,i,s),this}Zu(t,i,s){return Sl.Zu(this,t,i,s),this}Ku(t,i){return Sl.Ku(this,t,i),this}qu(t,i){return Sl.qu(this,t,i),this}Ju(t,i){return Sl.Ju(this,t,i),this}Al(){return Sl.Al(this,((t,i)=>({x:t,y:i}))),this}Qu(){return Sl.Qu(this)}tc(){return Sl.tc(this)}ic(){return Sl.ic(this)}wl(){return Sl.wl(this)}va(){return Sl.va(this)}ba(){return Sl.ba(this)}sc(){return this.hc}rc(){return this.nc}}const Sl={S(t,i,s){t.Vu=!0,t.Nu=!0,t.Gu=!0;const{start:e}=i,{end:h}=i,{rows:r}=i,{columns:n}=i;t.Wu=i.pixelate;const o={x:i.pixelate&&n>=1||!i.pixelate&&n>1?n:0,y:i.pixelate&&r>=1||!i.pixelate&&r>1?r:0};t.Ru.S(o),t.nt={...e},t.ot={...h},t.Et.S(ln(h,e)),Sl.oc(t,s)},oc(t,i){const s=t.Ru.M();if(s.x>0&&s.y>0){t.hc?t.hc.length=0:t.hc=[];const e=t.Wu?an(s,{x:1,y:1}):{x:s.x,y:s.y};t.zu.S(e),t.hc=Array.from(Array(e.y)).map((()=>Array(e.x))),t.nc=Array.from(Array(s.y)).map((()=>Array(s.x))),Sl.ac(t,s,e,i),t.Wl=e.x*e.y,t.Eu=s.x*s.y}else t.hc=void 0,t.zu.S({x:0,y:0})},ac(t,i,s,e){const h=t.nt,r=t.ot,n=t.hc,o=t.nc;if(n){const i=s.x,o=s.y,{x:l,y:u}=t.Et.M(),c={x:l/(i-1),y:u/(o-1)};for(let t=0;t<o;t+=1)for(let s=0;s<i;s+=1)n[t][s]=e(c.x*s,c.y*t);const f=e(0,0),d=e(r.x-h.x,r.y-h.y),g={},m={};for(const t of Object.keys(f))g[t]=Math.min(f[t],d[t]),m[t]=Math.max(f[t],d[t]);t.al=a(g,m)}if(o){const t=i.x,s=i.y;for(let i=0;i<s;i+=1)for(let s=0;s<t;s+=1)o[i][s]={intensity:0}}},$u:t=>t.Ru.o||t.zu.o,Yu(t){const i=t.Ru.M();return{columns:i.x,rows:i.y}},ja(t){const i=t.nt,s=t.ot;return{start:{x:i.x,y:i.y},end:{x:s.x,y:s.y}}},kl(t){throw new Error("Method not implemented.")},Xu(t,i,s,e){const h="geometry"===s||"y"===s?t.hc:t.nc;if(h){const r=t.zu.M();if("y"===s){const t=Eh(h);for(let s=0;s<r.y;s+=1){let e=s-i;for(;e<0;)e+=r.y;for(let i=0;i<r.x;i+=1)h[e][i]={...t[e][i],y:t[s][i].y}}}else Lh(h,i);const n=h===t.hc?t.zu.M():t.Ru.M(),o={column:{start:0,end:n.x},row:{start:n.y-i,end:n.y}};Sl.lc(t,s,e,o)}},Zu(t,i,s,e){const h="geometry"===s||"y"===s?t.hc:t.nc;if(h){const r=t.zu.M();if("y"===s){const t=Eh(h);for(let s=0;s<r.x;s+=1){let e=s-i;for(;e<0;)e+=r.x;for(let i=0;i<r.y;i+=1)h[i][e]={...t[i][e],y:t[i][s].y}}}else h.forEach((t=>Lh(t,i)));const n=h===t.hc?t.zu.M():t.Ru.M(),o={column:{start:n.x-i,end:n.x},row:{start:0,end:n.y}},a=(t=>{const i=t.length,s=i>0?t[0].length:0,e=Array.from(Array(s)).map((()=>Array(i)));for(let h=0;h<s;h+=1)for(let s=0;s<i;s+=1)e[h][s]=t[s][h];return e})(e);Sl.lc(t,s,a,o)}},lc(t,i,s,e){"color"===i&&Sl.Ku(t,s,e),"value"===i&&Sl.qu(t,s,e),"geometry"===i&&Sl.Ju(t,s,e),"y"===i&&Sl.uc(t,s,e)},Ku(t,i,s){const e=t.nc;if(e){const[h,r,n,o]=Oh(t.Ru.M(),s);if("function"==typeof i)for(let t=h;t<r;t+=1)for(let s=n;s<o;s+=1){const h=e[t][s],r=i(t,s,{intensity:h.intensity,color:h.color});e[t][s].color=r||h.color}else{const t=i.length,s=t>0?i[0].length:0;for(let a=h,l=0;a<r&&l<t;a+=1,l+=1)for(let t=n,h=0;t<o&&h<s;t+=1,h+=1){const s=i[l][h];s&&(e[a][t].color=s)}}t.Vu=!0}},qu(t,i,s){const e=t.nc;if(e){const[h,r,n,o]=Oh(t.Ru.M(),s);if("function"==typeof i)for(let t=h;t<r;t+=1)for(let s=n;s<o;s+=1){const h=i(t,s,{intensity:e[t][s].intensity});(h||0===h)&&(e[t][s].intensity=h)}else{const t=i.length,s=t>0?i[0].length:0;for(let a=h,l=0;a<r&&l<t;a+=1,l+=1)for(let t=n,h=0;t<o&&h<s;t+=1,h+=1){const s=i[l][h];(s||0===s)&&(e[a][t].intensity=s)}}t.Nu=!0}},Ju(t,i,s){const e=t.hc;if(e){const[h,r,n,o]=Oh(t.zu.M(),s);if("function"==typeof i)for(let t=h;t<r;t+=1)for(let s=n;s<o;s+=1){const h=i(t,s,{...e[t][s]});void 0!==h&&(e[t][s]={...h})}else{const t=i.length,s=t>0?i[0].length:0;for(let a=h,l=0;a<r&&l<t;a+=1,l+=1)for(let t=n,h=0;t<o&&h<s;t+=1,h+=1){const s=i[l][h];void 0!==s&&(e[a][t]={...s})}}t.Gu=!0}},uc(t,i,s){const e=t.hc;if(e){const[h,r,n,o]=Oh(t.zu.M(),s);if("function"==typeof i)for(let t=h;t<r;t+=1)for(let s=n;s<o;s+=1){const h=e[t][s],r=i(t,s,h.y);void 0!==r&&(e[t][s]={...h,y:r})}else{const t=i.length,s=t>0?i[0].length:0;for(let a=h,l=0;a<r&&l<t;a+=1,l+=1)for(let t=n,h=0;t<o&&h<s;t+=1,h+=1){const s=e[a][t],r=i[l][h];void 0!==r&&(e[a][t]={...s,y:r})}}t.Gu=!0}},Al(t,i){t.Vu=!0,t.Nu=!0,t.Gu=!0,t.hc=void 0,t.nc=void 0,t.Wl=0,t.Eu=0,t.Ru.S({x:0,y:0}),t.zu.S({x:0,y:0}),t.nt={x:0,y:0},t.ot={x:0,y:0},t.al=a(i(Dr,Dr),i(Br,Br))},Qu(t){const i=t.zu.M();return{x:i.x,y:i.y}},tc(t){const i=t.Ru.M();return{x:i.x,y:i.y}},ic:t=>t.Wl,wl:t=>t.Eu,va:t=>Za(t.Sa,t.Qe)||Za(t.cc,t.Hu),ba:t=>Ka(t.Qe)||Ka(t.Hu)},vl=i=>{const s=i.getDraggingMode();return void 0!==s&&s!==t.UIDraggingModes.notDraggable?s===t.UIDraggingModes.draggable?t.MouseStyles.Move:s===t.UIDraggingModes.onlyHorizontal?t.MouseStyles.Horizontal:t.MouseStyles.Vertical:void 0};class bl{constructor(){this.ds=!0,this.At=new $e,this.fc=0,this.dc=(t,i)=>{0===this.fc&&this.At.emit("mouseEnter",this,i),this.fc+=1},this.gc=(t,i)=>{this.fc-=1,this.fc<1&&(this.At.emit("mouseLeave",this,i),this.fc=0)},this.mc=(t,i)=>{this.At.emit("mouseClick",this,i)},this.yc=(t,i)=>{this.At.emit("mouseDoubleClick",this,i)},this.Sc=(t,i)=>{this.At.emit("mouseDown",this,i)},this.vc=(t,i)=>{this.At.emit("mouseUp",this,i)},this.bc=(t,i)=>{this.At.emit("mouseMove",this,i)},this.xc=(t,i,s)=>{this.At.emit("mouseDragStart",this,i,s)},this.Mc=(t,i,s,e,h)=>{this.At.emit("mouseDrag",this,i,s,e,h)},this._c=(t,i,s,e)=>{this.At.emit("mouseDragStop",this,i,s,e)},this.Ac=(t,i)=>{this.At.emit("mouseWheel",this,i)},this.wc=(t,i)=>{this.fc+=1,this.At.emit("touchStart",this,i)},this.kc=(t,i)=>{this.At.emit("touchMove",this,i)},this.Cc=(t,i)=>{this.fc-=1,this.At.emit("touchEnd",this,i)},this.Tc=t=>(t instanceof ja?t.setMouseEnterEventHandler(this.dc).setMouseLeaveEventHandler(this.gc).setMouseClickEventHandler(this.mc).setMouseDoubleClickEventHandler(this.yc).setMouseDownEventHandler(this.Sc).setMouseUpEventHandler(this.vc).setMouseMoveEventHandler(this.bc).setMouseDragEventHandler(this.Mc).setMouseDragStartEventHandler(this.xc).setMouseDragStopEventHandler(this._c).setMouseWheelEventHandler(this.Ac).setTouchStartEventHandler(this.wc).setTouchMoveEventHandler(this.kc).setTouchEndEventHandler(this.Cc):(t.onMouseEnter(this.dc),t.onMouseLeave(this.gc),t.onMouseClick(this.mc),t.onMouseDoubleClick(this.yc),t.onMouseDown(this.Sc),t.onMouseUp(this.vc),t.onMouseMove(this.bc),t.onMouseDrag(this.Mc),t.onMouseDragStart(this.xc),t.onMouseDragStop(this._c),t.onMouseWheel(this.Ac),t.onTouchStart(this.wc),t.onTouchMove(this.kc),t.onTouchEnd(this.Cc)),t)}onMouseEnter(t){return this.At.on("mouseEnter",t)}onMouseLeave(t){return this.At.on("mouseLeave",t)}onMouseClick(t){return this.At.on("mouseClick",t)}onMouseDoubleClick(t){return this.At.on("mouseDoubleClick",t)}onMouseDown(t){return this.At.on("mouseDown",t)}onMouseUp(t){return this.At.on("mouseUp",t)}onMouseMove(t){return this.At.on("mouseMove",t)}onMouseDragStart(t){return this.At.on("mouseDragStart",t)}onMouseDrag(t){return this.At.on("mouseDrag",t)}onMouseDragStop(t){return this.At.on("mouseDragStop",t)}onMouseWheel(t){return this.At.on("mouseWheel",t)}onTouchStart(t){return this.At.on("touchStart",t)}onTouchMove(t){return this.At.on("touchMove",t)}onTouchEnd(t){return this.At.on("touchEnd",t)}offMouseEnter(t){return this.At.off(t,"mouseEnter")}offMouseLeave(t){return this.At.off(t,"mouseLeave")}offMouseClick(t){return this.At.off(t,"mouseClick")}offMouseDoubleClick(t){return this.At.off(t,"mouseDoubleClick")}offMouseDown(t){return this.At.off(t,"mouseDown")}offMouseUp(t){return this.At.off(t,"mouseUp")}offMouseMove(t){return this.At.off(t,"mouseMove")}offMouseDragStart(t){return this.At.off(t,"mouseDragStart")}offMouseDrag(t){return this.At.off(t,"mouseDrag")}offMouseDragStop(t){return this.At.off(t,"mouseDragStop")}offMouseWheel(t){return this.At.off(t,"mouseWheel")}offTouchStart(t){return this.At.off(t,"touchStart")}offTouchMove(t){return this.At.off(t,"touchMove")}offTouchEnd(t){return this.At.off(t,"touchEnd")}getIsUnderMouse(){return this.fc>0}setVisible(t){const i=this.ds!==t;return this.ds=t,i&&this.At.emit("visibleStateChanged",this,this.ds),this}getVisible(){return this.ds}onVisibleStateChanged(t){return this.At.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.At.off(t,"visibleStateChanged")}}const xl=(i,s,e)=>{const h=i.getDraggingMode();if(h!==t.UIDraggingModes.notDraggable){const r=i.scale.Ei(i.getPosition(),{x:h!==t.UIDraggingModes.onlyVertical?s.x:0,y:h!==t.UIDraggingModes.onlyHorizontal?s.y:0}),n=i.scale,o=i.getSize(),a=i.getOrigin(),l=n.Ei({x:n.x.getInnerStart(),y:n.y.getInnerStart()},un({x:(1+a.x)/2,y:(1+a.y)/2},o)),u=n.Ei({x:n.x.getInnerEnd(),y:n.y.getInnerEnd()},un({x:(a.x-1)/2,y:(a.y-1)/2},o)),c={x:Math.min(Math.max(r.x,l.x),u.x),y:Math.min(Math.max(r.y,l.y),u.y)};i.setPosition(c),ir(e)}},Ml=(t,i,s,e,h)=>{xl(t,h,i)},_l=(t,i,s,e,h)=>{xl(t,e,h)};class Al extends bl{constructor(t,i,s,h,r){super(),this.position=e(50,50),this.origin=e(0,0),this.size=e(0,0),this.fs=!1,this.Fc=void 0,this.Ic=void 0,this.Pc=vl,this.Dc=void 0,this.Bc=()=>{const t="function"==typeof this.Pc?this.Pc(this):this.Pc;t&&(this.Ic=this.re.$s.cn(t))},this.Oc=()=>{this.re.$s.fn(this.Ic)},this.di=c(0,0,0,0),this.re=t,this.renderingScale=i,this.scale=s,this.ia=h,this.Rs=r,this.re.te(),this.onMouseEnter(this.Bc),this.onMouseLeave(this.Oc),this.onMouseDrag(Ml);const n=Xn(new Kn(Fh,_l,Fh));this.onTouchStart(n.onTouchStart),this.onTouchMove(n.onTouchMove),this.onTouchEnd(n.onTouchEnd),this.Rs=r}setEffect(t){return this.Ns=this.Ns||this.re.$s.Ns.Gs(this,{Lc:{shapes:this.Ec()}}),this.Ns.Lc.Qs(t),this}getEffect(){return!!this.Ns&&this.Ns.Lc.ie()}setAutoDispose(t){return this.Dc=t,this.re.te(),this}getAutoDispose(){return this.Dc}getSize(i=t.UISpace.Everything){return i===t.UISpace.Everything?e(this.size.x+(this.di.left+this.di.right),this.size.y+(this.di.bottom+this.di.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.di="object"==typeof t?d(this.di,t):{left:t,top:t,right:t,bottom:t},this.re.te(),this}getMargin(){return this.di}rh(){if(this.Dc){const t=this.size,i=this.renderingScale.Ci(),s={x:t.x/i.x,y:t.y/i.y};("max-width"===this.Dc.type&&s.x>=this.Dc.maxWidth||"max-height"===this.Dc.type&&s.y>=this.Dc.maxHeight)&&this.dispose()}return this}le(){return this}dispose(){return this.fs||(this.re.te(),this.fs=!0,this.ia(this),this.At.emit("dispose",this)),this}setVisible(t){return super.setVisible(t),this.re.te(),this}onDispose(t){return this.At.on("dispose",t)}offDispose(t){return this.At.off(t,"dispose")}setPosition(t){return this.position=t,this.re.te(),this}getPosition(i=this.origin,s=t.UISpace.Everything){const e=this.getSize(t.UISpace.Everything),h=this.scale.Ei(this.position,un({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},e));if(s===t.UISpace.Everything)return this.scale.Ei(h,un({x:(i.x+1)/2,y:(i.y+1)/2},e));const r=this.scale.Ei(h,{x:this.di.left,y:this.di.bottom}),n=this.getSize(t.UISpace.Content);return this.scale.Ei(r,un({x:(i.x+1)/2,y:(i.y+1)/2},n))}setOrigin(t){return this.origin=t,this.re.te(),this}getOrigin(){return this.origin}setDraggingMode(i=t.UIDraggingModes.notDraggable){return this.Fc=i,this.re.te(),this}getDraggingMode(){return void 0!==this.Fc?this.Fc:t.UIDraggingModes.notDraggable}setMouseStyle(t){return this.Pc=t,this}getMouseStyle(){return this.Pc}}class wl extends Al{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Ba=c(),this.Rc=0,this.re=t,this.zc=e,this.backgroundElement=new this.zc(this.re,this.renderingScale,this.scale,Fh,r),this.Tc(this.backgroundElement)}Ec(){return this.backgroundElement.Ec()}onHighlight(t){return this.At.on("highlight",t)}offHighlight(t){return this.At.off(t)}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}rh(){return super.rh(),this.fs||this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,t.UISpace.PaddedBackground)).rh(),this}le(){const i=this.getSize(t.UISpace.PaddedContent);return this.backgroundElement.Vc(i).le(),super.le()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.Ba="object"==typeof t?d(this.Ba,t):{left:t,top:t,right:t,bottom:t},this.re.te(),this}getPadding(){return this.Ba}getSize(i=t.UISpace.Everything){let s=super.getSize(i);return i>=t.UISpace.PaddedContent&&(s=e(s.x+this.Ba.left+this.Ba.right,s.y+this.Ba.bottom+this.Ba.top)),i>=t.UISpace.PaddedBackground&&(s=e(s.x+this.backgroundElement.Nc()+this.backgroundElement.Gc(),s.y+this.backgroundElement.Wc()+this.backgroundElement.Hc())),s}getPosition(i=this.origin,s=t.UISpace.Everything){if(s===t.UISpace.Everything)return super.getPosition(i,s);const h=super.getPosition(e(-1,-1),t.UISpace.Everything),r=this.getMargin(),n=this.scale.Ei(h,{x:r.left,y:r.bottom});if(s===t.UISpace.PaddedBackground){const s=this.getSize(t.UISpace.PaddedBackground);return this.scale.Ei(n,un({x:(i.x+1)/2,y:(i.y+1)/2},s))}const o=this.scale.Ei(n,{x:this.backgroundElement.Nc(),y:this.backgroundElement.Wc()});if(s===t.UISpace.PaddedContent){const s=this.getSize(t.UISpace.PaddedContent);return this.scale.Ei(o,un({x:(i.x+1)/2,y:(i.y+1)/2},s))}const a=this.getPadding(),l=this.scale.Ei(o,{x:a.left,y:a.bottom}),u=this.getSize(t.UISpace.Content);return this.scale.Ei(l,un({x:(i.x+1)/2,y:(i.y+1)/2},u))}setMouseInteractions(t){return this.backgroundElement.setMouseInteractions(t),this}getMouseInteractions(){return this.backgroundElement.getMouseInteractions()}getHighlight(){return this.Rc}setHighlight(t){return this.Rc=Ar(t),this.backgroundElement.setHighlight(t),this.At.emit("highlight",t),this}}const kl=t=>"setBackground"in t;class Cl extends bl{constructor(t,i,s,e,h,r,n,o,a,l,u){super(),this.u=0,this.Uc=1,this.jc=!0,this.$c=new ra,this.Yc=!0,this.fs=!1,this.axisScale=e,this.renderingScale=h,this.Xc=n,this.Zc=o,this.Kc=a,this.ia=l,this.qc=i,this.Jc=s,this.Qc=this.Tc(this.qc.mh(this.renderingScale)),this.Rs=u,this.tf=this.Tc(this.Kc.if(this.Jc,this.renderingScale,r,Fh,this.Rs,!1).setOrigin(Qh(this.Zc)).setDirection(this.Zc)),this.axis=t,this.setMouseInteractions(!1),"major"===this.tf.sf?this.Qc.gh(u.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):"minor"===this.tf.sf?this.Qc.gh(u.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):"other"===this.tf.sf&&this.Qc.gh(u.cursorGridStrokeStyleX)}setValue(t){return this.u=t,this.Jc.te(),this.At.emit("valueChange",this.u),this}getValue(){return this.u}setTextFormatter(t){return this.ef=t,this.Jc.te(),this}setTickLength(t){return this.tf.setPointerLength(t),this.qc.te(),this}getTickLength(){return this.tf.getPointerLength()}setTickLabelPadding(t){return this.tf.setTickLabelPadding(t),this.qc.te(),this}setTickLabelRotation(t){return this.tf.setTextRotation(t),this.qc.te(),this}getTickLabelRotation(){return this.tf.getTextRotation()}getTickLabelPadding(){return this.tf.getTickLabelPadding()}setGridStrokeLength(t){return this.Uc=t,this.qc.te(),this}getGridStrokeLength(){return this.Uc}setGridStrokeStyle(t){return this.Qc.gh(t),this.qc.te(),this}getGridStrokeStyle(){return this.Qc.Cu()}dispose(){return this.fs||(this.fs=!0,this.Qc.dispose(),this.tf.dispose(),this.ia(this),this.qc.$s.te(),this.At.emit("dispose",this)),this}onDispose(t){return this.At.on("dispose",t)}offDispose(t){return this.At.off(t,"dispose")}setMarkerVisible(t){return this.jc=t,this.Jc.te(),this}getMarkerVisible(){return this.jc}setMarker(t){return t(this.tf),this.Jc.te(),this}getMarker(){return this.tf}setMouseInteractions(t){return this.tf.setMouseInteractions(t),this.Qc.setMouseInteractions(t),this}getMouseInteractions(){return this.Qc.getMouseInteractions()}setAllocatesAxisSpace(t){return this.Yc=t,this.Jc.te(),this}getAllocatesAxisSpace(){return this.Yc}isInScale(){return Wr(this.u,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}onValueChange(t){return this.At.on("valueChange",t)}offValueChange(t){return this.At.off(t,"valueChange")}}class Tl extends Cl{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,u,a,l),this.hf=!1,this.ia=a,this.qc=i,this.Jc=s}dispose(){return this.hf=!1,super.dispose()}update(){return this}plot(t,i,s,e){if(this.isInScale()&&this.getVisible()){this.hf=!1;const h=lh(this.u,this.axisScale,this.Xc.getWidth(this.renderingScale));this.Qc.setVisible(!0).ph(this.Xc.toPoint(h,t)).yh(this.Xc.toPoint(h,t-(s+i*this.Uc))),this.jc?(this.ef&&this.tf.setText(this.ef(this.u,this)),this.tf.setVisible(!0).setPosition(this.Xc.toPoint(h,e))):this.tf.setVisible(!1)}else this.Qc.setVisible(!1),this.tf.setVisible(!1);return this.tf.le().rh(),this}rf(){const t=this.tf.le().getSize();return this.Xc.getHeight(t)}}const Fl=(t,i)=>t.setTextFillStyle(i.uiTextFillStyle).setTextFont(i.uiTextFont),Il=(t,i)=>(gr(t.setButtonOffSize(i.uiButtonSize).setButtonOnSize(i.uiButtonSize),i,{fill:i.uiButtonFillStyle}),t),Pl=(t,i,s)=>{s&&kl(t)&&t.setBackground((t=>t.setFillStyle(i.uiBackgroundFillStyle).setStrokeStyle(i.uiBackgroundStrokeStyle))).setEffect(!0)},Dl={uiElement:void 0,stylers:hs(),addStyler(t){return{...this,stylers:this.stylers.push(t)}},applyStylers(t,i){return this.stylers.forEach((s=>void 0!==s?s(t,i):void 0)),t}},Bl={background:void 0,setBackground(t){return{...this,background:t}}},Ol={if(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,e,h),h);return Pl(n,h,r),n}},Ll={if(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.background,e,h),h);return Pl(n,h,r),n}};class El extends Al{constructor(){super(...arguments),this.nf=!0}rh(){return super.rh(),this}setMouseInteractions(t){return this.nf=t,this}getMouseInteractions(){return this.nf}Ec(){return[]}}class Rl extends El{onHighlight(t){return this.At.on("highlight",t)}offHighlight(t){return this.At.off(t)}Vc(t){return this.size=t,this}Nc(){return 0}Gc(){return 0}Hc(){return 0}Wc(){return 0}setHighlight(t){return this}getHighlight(){return 0}setFillStyle(){return this}getFillStyle(){return Ie}setStrokeStyle(){return this}getStrokeStyle(){return rh}setStrokeThickness(){return this}getStrokeThickness(){return 0}}class zl extends Rl{constructor(){super(...arguments),this.setSize=this.Vc.bind(this)}}class Vl extends Al{constructor(){super(...arguments),this.Qe=Ie,this.At=new $e,this.Rc=0}onHighlight(t){return this.At.on("highlight",t)}offHighlight(t){return this.At.off(t)}Ec(){return[this.hl]}setFillStyle(t){return this.Qe="function"==typeof t?t(this.Qe):t,this.hl.eh(this.Qe),this.re.te(),this}getFillStyle(){return this.Qe}getHighlight(){return this.Rc}setHighlight(t){return this.Rc=t,this.hl.Ys(t),this.At.emit("highlight",t),this.re.te(),this}setMouseInteractions(t){return this.hl.setMouseInteractions(t),this}getMouseInteractions(){return this.hl.getMouseInteractions()}dispose(){return super.dispose(),this.hl.dispose(),this}setVisible(t){return super.setVisible(t),this.hl.setVisible(t),this}}class Nl extends Vl{constructor(){super(...arguments),this.th=rh}setStrokeStyle(t){return this.th="function"==typeof t?t(this.th):t,this.hl.sh(this.th),this.re.te(),this}getStrokeStyle(){return this.th}}class Gl extends Nl{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.re=t,this.hl=this.re.af(this.renderingScale,ol.Simple).sh(this.getStrokeStyle()).eh(this.getFillStyle()).setVisible(!1),this.Tc(this.hl)}lf(){const t=this.uf();if(t.length>2){const i=Xr(t),s=e(i.max.x-i.min.x,i.max.y-i.min.y);this.setContentSize(s);const h=t.map((t=>{const h=an(t,on(i.min,-1));return this.scale.Ei(this.position,an(h,un(on(an(this.origin,e(1,1)),-.5),s)))})).map((t=>uh(t,this.scale,this.renderingScale)));this.hl.Ll(h).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.hl&&this.hl.setVisible(!1),this.setContentSize(e(0,0))}rh(){return super.rh(),this.fs||this.lf(),this}le(){return this.lf(),super.le()}setVisible(t){return super.setVisible(t),this.hl.setVisible(t),this}}class Wl extends Vl{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ka="label",this.hl=this.re.tn(this.renderingScale).eh(this.Qe).lr(this.ka),this.Tc(this.hl)}rh(){const i=this.getPosition(e(0,0),t.UISpace.Content),s=uh(i,this.scale,this.renderingScale);return this.hl.oh(s),this}le(){this.hl.le();const t=0===this.ka.length?e(0,0):this.hl.cf();return this.setContentSize(t),super.le()}setText(t){return this.ka=t,this.hl.lr(this.ka),this.re.te(),this}getText(){return this.ka}setFont(t){return this.hl.dr(t),this.re.te(),this}getFont(){return this.hl.cr()}setTextRotation(t){return this.hl.gr(t),this.re.te(),this}getTextRotation(){return this.hl.mr()}}const Hl={...Dl,...Ol,uiElement:Wl};class Ul extends Nl{constructor(t,i,s,e,h){super(t,i,s,e,h),this.fitTo=this.Vc.bind(this),this.setSize=this.fitTo,this.hl=this.re.hh(i).eh(this.Qe).sh(this.getStrokeStyle()),this.Tc(this.hl)}rh(){const i=Xr([this.getPosition(e(-1,-1),t.UISpace.Content),this.getPosition(e(1,1),t.UISpace.Content)].map((t=>uh(t,this.scale,this.renderingScale)))),s={x:i.max.x-i.min.x,y:i.max.y-i.min.y};return this.hl.Gt(s).oh(uh(this.getPosition(e(-1,-1),t.UISpace.Content),this.scale,this.renderingScale)),this}Vc(t){return this.setContentSize(t),this.re.te(),this}Nc(){return 0}Gc(){return 0}Hc(){return 0}Wc(){return 0}}class jl extends Nl{constructor(t,i,s,h,r){super(t,i,s,h,r),this.ff=e(0,0),this.setSize=this.fitTo.bind(this),this.hl=t.df(i).bu(0).yh(360).eh(this.Qe).sh(this.getStrokeStyle()),this.Tc(this.hl)}rh(){const i=this.getSize(t.UISpace.Content).x/2;return this.hl.Mu(i*this.renderingScale.os().x)._u(i*this.renderingScale.os().y).oh(uh(this.getPosition(e(0,0),t.UISpace.Content),this.scale,this.renderingScale)).wu(255).le(),this}Vc(t){const i=Math.sqrt(t.x*t.x/4+t.y*t.y/4);return this.setContentSize(e(2*i,2*i)),this.ff=t,this.re.te(),this}Nc(){return(this.getSize(t.UISpace.Content).x-this.ff.x)/2}Gc(){return(this.getSize(t.UISpace.Content).x-this.ff.x)/2}Hc(){return(this.getSize(t.UISpace.Content).y-this.ff.y)/2}Wc(){return(this.getSize(t.UISpace.Content).y-this.ff.y)/2}fitTo(t){const i=Math.min(t.x,t.y);return this.setContentSize(e(i,i)),this.ff=t,this}}class $l extends Gl{constructor(t,i,s,h,r){super(t,i,s,ol.Simple,h,r),this.gf=u(e(0,0)),this.mf=!1,this.setSize=this.fitTo.bind(this),this.re=t,this.lf()}uf(){const t=this.gf.M();if(this.mf){const i=Math.min(t.x,t.y);return[e(0,0),e(i/2,i/2),e(0,i),e(-i/2,i/2)]}const i=2*Math.sqrt(this.gf.M().x*this.gf.M().x/4+this.gf.M().y*this.gf.M().y/4),s=e(Math.cos(Math.PI/4)*i,0),h=e(0,Math.sin(Math.PI/4)*i),r=e(0,0),n=an(r,an(s,h)),o=an(n,an(h,on(s,-1)));return[r,n,o,ln(o,an(s,h))]}Vc(t){return this.gf.S(t),this.mf=!1,this.re.te(),this}Nc(){return this.mf?0:(this.getSize(t.UISpace.Content).x-this.gf.M().x)/2}Gc(){return this.mf?0:(this.getSize(t.UISpace.Content).x-this.gf.M().x)/2}Hc(){return this.mf?0:(this.getSize(t.UISpace.Content).y-this.gf.M().y)/2}Wc(){return this.mf?0:(this.getSize(t.UISpace.Content).y-this.gf.M().y)/2}fitTo(t){return this.gf.S(t),this.mf=!0,this.re.te(),this}}class Yl extends Gl{constructor(i,s,h,r,n){super(i,s,h,ol.Simple,r,n),this.yf=u(e(0,0)),this.pf=u(10),this.Sf=u(void 0),this.Zc=u(t.UIDirections.Right),this.lf()}setDirection(t){return this.Zc.S(t),this.re.te(),this}getDirection(){return this.Zc.M()}setPointerLength(t){return this.pf.S(t),this.re.te(),this}getPointerLength(){return this.pf.M()}setPointerAngle(t){return this.Sf.S(t),this.re.te(),this}getPointerAngle(){let t=this.Sf.M();if(void 0===t){const i=this.vf();if(0===i)return 0;t=0!==i?180*Math.atan(2*this.getPointerLength()/i)/Math.PI:0}return Math.min(Math.max(t,1),89)}Vc(t){return this.yf.S(t),this.re.te(),this}bf(){const t=this.getPointerAngle();return 0===t?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}xf(){return tr(this.Zc.M())?this.yf.M().x:this.yf.M().y}vf(){return tr(this.Zc.M())?this.yf.M().y:this.yf.M().x}Nc(){switch(this.Zc.M()){case t.UIDirections.Right:return 0;case t.UIDirections.Left:return this.getPointerLength();case t.UIDirections.Up:case t.UIDirections.Down:return Math.max(0,this.bf()-this.vf());default:return 0}}Gc(){switch(this.Zc.M()){case t.UIDirections.Right:return this.getPointerLength();case t.UIDirections.Left:return 0;case t.UIDirections.Up:case t.UIDirections.Down:return Math.max(0,this.bf()-this.vf());default:return 0}}Hc(){switch(this.Zc.M()){case t.UIDirections.Right:case t.UIDirections.Left:return Math.max(0,this.bf()-this.vf());case t.UIDirections.Up:return this.getPointerLength();case t.UIDirections.Down:default:return 0}}Wc(){switch(this.Zc.M()){case t.UIDirections.Right:case t.UIDirections.Left:return Math.max(0,this.bf()-this.vf());case t.UIDirections.Up:return 0;case t.UIDirections.Down:return this.getPointerLength();default:return 0}}uf(){const t=Qh(this.Zc.M()),i=rn(e(0,0),t),s=this.getPointerLength(),h=this.bf(),r=this.xf(),n=this.vf();if(!(0!==s&&0!==h||0!==r&&0!==n))return[];const o=e(0,0),a=an(an(o,on(t,-s)),on(i,h/2)),l=an(a,on(i,(n-h)/2)),u=an(l,on(t,-r)),c=an(an(o,on(t,-s)),on(i,-h/2)),f=an(c,on(i,-(n-h)/2)),d=an(f,on(t,-r));let g;return g=0===r||0===n?[o,a,c]:0===s||0===h?[l,u,d,f]:Ih(n,h)?[o,a,u,d,c]:[o,a,l,u,d,f,c],g}}class Xl extends El{setSize(t){return this.setContentSize(t),this.re.te(),this}}class Zl extends wl{constructor(){super(...arguments),this.Mf=[],this._f=0,this.Af=t=>{const i=this.Mf.indexOf(t);i>=0&&this.Mf.splice(i,1)}}getMembers(){return this.Mf}getMemberCount(){return this.Mf.length}setMinimumSize(t){return this.wf=t,this.re.te(),this}getMinimumSize(){return this.wf}addElement(t,i=-1){const s=t.if(this.re,this.renderingScale,this.scale,this.Af,this.Rs,!1);return s.setMouseInteractions(this.getMouseInteractions()),i>=0?this.Mf.splice(i,0,s):this.Mf.push(s),s.setVisible(this.getVisible()),this.Tc(s),this.fs&&(br(0,(()=>{})),s.dispose()),s}dispose(){return super.dispose(),this.Mf.slice().forEach(Th),this}setVisible(t){return super.setVisible(t),this.Mf.forEach((i=>i.setVisible(t))),this}setMouseInteractions(t){super.setMouseInteractions(t);for(let i=0;i<this.Mf.length;i+=1)this.Mf[i].setMouseInteractions(t);return this}getMouseInteractions(){if(super.getMouseInteractions())return!0;for(let t=0;t<this.Mf.length;t+=1)if(this.Mf[t].getMouseInteractions())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let s=0;s<this.Mf.length;s+=1){const e=this.Mf[s];"getHighlight"in(i=e)&&"setHighlight"in i&&e.setHighlight(t)}var i;return this}}class Kl extends Zl{rh(){super.rh();const i=this.getPosition(e(-1,1),t.UISpace.Content),s=this.Mf.reduce(((t,i)=>t+ +(i instanceof Xl)),0),h=s>0?(this.size.x-this._f)/s:0;return this.Mf.reduce(((t,s)=>s instanceof Xl?this.scale.Ei({x:t,y:i.y},{x:h+s.getSize().x,y:0}).x:s.setOrigin(e(-1,1)).setPosition(e(t,i.y)).rh().getPosition(e(1,0)).x),i.x),this}le(){for(let t=0;t<this.Mf.length;t+=1){const i=this.Mf[t];i instanceof ql&&i.setMinimumSize(0),i.le()}const t=this.Mf.reduce(this.kf.bind(this),h(0,0));this._f=t.x;const i=void 0===this.wf?t:e(Math.max(t.x,this.wf),t.y);this.setContentSize(i);for(let t=0;t<this.Mf.length;t+=1){const s=this.Mf[t];s instanceof ql&&s.setMinimumSize(i.y).le()}return super.le()}kf(t,i){const s=i.getSize();return t.x+=s.x,t.y=Math.max(t.y,s.y),t}addGap(t=0,i=-1){return this.addElement(Jl,i).setSize(e(0,t))}}class ql extends Zl{rh(){super.rh();const i=this.getPosition(e(-1,1),t.UISpace.Content),s=this.Mf.reduce(((t,i)=>t+ +(i instanceof Xl)),0),h=s>0?(this.size.y-this._f)/s:0;return this.Mf.reduce(((t,s)=>s instanceof Xl?this.scale.Ei({x:i.x,y:t},{x:0,y:-(h+s.getSize().y)}).y:s.setOrigin(e(-1,1)).setPosition(e(i.x,t)).rh().getPosition(e(0,-1)).y),i.y),this}le(){for(let t=0;t<this.Mf.length;t+=1){const i=this.Mf[t];i instanceof Kl&&i.setMinimumSize(0),i.le()}const t=this.Mf.reduce(this.kf.bind(this),h(0,0));this._f=t.y;const i=void 0===this.wf?t:e(t.x,Math.max(t.y,this.wf));this.setContentSize(i);for(let t=0;t<this.Mf.length;t+=1){const s=this.Mf[t];s instanceof Kl&&s.setMinimumSize(i.x).le()}return super.le()}kf(t,i){const s=i.getSize();return t.y+=s.y,t.x=Math.max(t.x,s.x),t}addGap(t=0,i=-1){return this.addElement(Jl,i).setSize(e(0,t))}}const Jl={...Dl,...Ol,uiElement:Xl};class Ql extends ql{constructor(){super(...arguments),this.Mf=[]}addRow(){return this.addElement(su,void 0)}getRow(t,i=!1){return i&&this.Mf.length<=t?(this.addRow(),this.getRow(t,!0)):this.Mf[t]}}const tu={...Dl,...Bl,...Ll},iu={...tu,uiElement:ql,background:Ul},su={...tu,uiElement:Kl,background:Ul},eu={setTextLabel:null,setText(t){return this.setTextLabel.setText(t),this},getText(){return this.setTextLabel.getText()}},hu=(t,i)=>{const s={},e=`stylable${t}s`;return s[e]=i,s[`set${t}FillStyle`]=function(t){return this[e].forEach((i=>i.setFillStyle(t))),this},s[`get${t}FillStyle`]=function(){return this[e][0].getFillStyle()},s[`set${t}Font`]=function(t){return this[e].forEach((i=>i.setFont(t))),this},s[`get${t}Font`]=function(){return this[e][0].getFont()},s[`set${t}Rotation`]=function(t){return this[e].forEach((i=>i.setTextRotation(t))),this},s[`get${t}Rotation`]=function(){return this[e][0].getTextRotation()},s},ru=hu("Text",[]),nu={button:void 0,isLocked:!1,setOn(t){if(!this.isLocked){const i=this.button.getOn()!==t;this.button.setOn(t),i&&this.At.emit("switch",t)}return this},getOn(){return this.button.getOn()},setLocked(t){return this.isLocked=t,this},getLocked(){return this.isLocked},onSwitch(t){return this.At.on("switch",(i=>t(this,i)))},offSwitch(t){return this.At.off(t,"switch")},setButtonOffFillStyle(t){return this.button.setOffFillStyle(t),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOffStrokeStyle(t){return this.button.setOffStrokeStyle(t),this},getButtonOffStrokeStyle(){return this.button.getOffStrokeStyle()},setButtonOffSize(t){return this.button.setOffSize(t),this},getButtonOffSize(){return this.button.getOffSize()},setButtonOnFillStyle(t){return this.button.setOnFillStyle(t),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonOnStrokeStyle(t){return this.button.setOnStrokeStyle(t),this},getButtonOnStrokeStyle(){return this.button.getOnStrokeStyle()},setButtonOnSize(t){return this.button.setOnSize(t),this},getButtonOnSize(){return this.button.getOnSize()}},ou={pointable:void 0,setDirection(t){return this.pointable.setDirection(t),this},getDirection(){return this.pointable.getDirection()},setPointerLength(t){return this.pointable.setPointerLength(t),this},getPointerLength(){return this.pointable.getPointerLength()}},au={...Dl,...Bl,background:Ul,if(t,i,s,e,h,r){const n=new Kl(t,i,s,this.background,e,h),o=n.addElement(Hl,void 0),a=Object.assign(n,eu,{setTextLabel:o},ru,{stylableTexts:[o]});return Pl(a,h,r),this.applyStylers(a,h)}}.addStyler(Fl),lu={...Dl,...Bl,background:Yl,if(i,s,e,h,r,n){const o=new Kl(i,s,e,this.background,h,r),a=o.addElement(Hl,void 0),l=o.getBackground(),u=Object.assign(o,eu,{setTextLabel:a},ru,{stylableTexts:[a]},ou,{pointable:l},{setTickLabelPadding(i){return this.getDirection()===t.UIDirections.Up?this.setPadding({top:i}):this.getDirection()===t.UIDirections.Down?this.setPadding({bottom:i}):this.getDirection()===t.UIDirections.Right?this.setPadding({right:i}):this.getDirection()===t.UIDirections.Left&&this.setPadding({left:i}),this},getTickLabelPadding(){return this.getDirection()===t.UIDirections.Up?this.getPadding().top:this.getDirection()===t.UIDirections.Down?this.getPadding().bottom:this.getDirection()===t.UIDirections.Right?this.getPadding().right:this.getPadding().left}});return u.sf="other",u.setPointerLength(r.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(r.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(r.uiTextFont).setTextFillStyle(r.uiTextFillStyle).setBackground((t=>t.setFillStyle(r.uiBackgroundFillStyle).setStrokeStyle(r.uiBackgroundStrokeStyle))),Pl(u,r,n),this.applyStylers(u,r)}};class uu extends Al{constructor(t,i,s,e,h,r,n){super(t,i,s,r,n),this.ue=!1,this.At=new $e,this.getOn=()=>this.ue,this.Cf=this.Tc(new e(this.re,this.renderingScale,this.scale,Fh,n)),this.Tf=this.Tc(new h(this.re,this.renderingScale,this.scale,Fh,n))}Ec(){return[...this.Cf.Ec(),...this.Tf.Ec()]}onHighlight(t){return this.At.on("highlight",t)}offHighlight(t){return this.At.off(t)}setOn(t){return this.ue=t,this.re.te(),this}setOffFillStyle(t){return this.Cf.setFillStyle(t),this}getOffFillStyle(){return this.Cf.getFillStyle()}setOffStrokeStyle(t){return this.Cf.setStrokeStyle(t),this}getOffStrokeStyle(){return this.Cf.getStrokeStyle()}setOffSize(t){return this.Cf.fitTo("number"==typeof t?e(t,t):t),this}getOffSize(){return this.Cf.getSize()}setOnFillStyle(t){return this.Tf.setFillStyle(t),this}getOnFillStyle(){return this.Tf.getFillStyle()}setOnStrokeStyle(t){return this.Tf.setStrokeStyle(t),this}getOnStrokeStyle(){return this.Tf.getStrokeStyle()}setOnSize(t){return this.Tf.fitTo("number"==typeof t?e(t,t):t),this}getOnSize(){return this.Tf.getSize()}rh(){return super.rh(),this.ue?(this.Cf.setVisible(!1),this.Tf.setVisible(this.getVisible()).setPosition(this.getPosition(e(0,0),t.UISpace.Content)).rh()):(this.Cf.setVisible(this.getVisible()).setPosition(this.getPosition(e(0,0),t.UISpace.Content)).rh(),this.Tf.setVisible(!1)),this}le(){const t=this.Cf.le().getSize(),i=this.Tf.le().getSize();return this.setContentSize(e(Math.max(t.x,i.x),Math.max(t.y,i.y))),super.le()}dispose(){return super.dispose(),this.Cf.dispose(),this.Tf.dispose(),this}setMouseInteractions(t){return this.Tf.setMouseInteractions(t),this.Cf.setMouseInteractions(t),this}getMouseInteractions(){return this.Tf.getMouseInteractions()}setHighlight(t){const i=Ar(t);return this.Tf.setHighlight(i),this.Cf.setHighlight(i),this.At.emit("highlight",t),this.re.te(),this}getHighlight(){return this.Tf.getHighlight()}}const cu={...Dl,uiElement:uu,pictureOff:jl,pictureOn:jl,setPictureOff(t){return{...this,pictureOff:t}},setPictureOn(t){return{...this,pictureOn:t}},if(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.pictureOff,this.pictureOn,e,h),h);return Pl(n,h,r),n}},fu={...Dl,...Bl,background:Ul,buttonBuilder:cu,setPictureOff(t){return{...this,buttonBuilder:this.buttonBuilder.setPictureOff(t)}},setPictureOn(t){return{...this,buttonBuilder:this.buttonBuilder.setPictureOn(t)}},if(i,s,e,h,r,n){const o=new Kl(i,s,e,this.background,h,r),a=o.addElement(iu);a.addGap();const l=a.addElement(this.buttonBuilder);a.addGap();const u=o.addElement(iu);u.addGap();const c=u.addElement(Hl);u.addGap(),o.addGap();const f=Object.assign(o,eu,{setTextLabel:c},ru,{stylableTexts:[c]},nu,{button:l});return f.onMouseClick(((t,i)=>{f.setOn(!f.getOn())})),f.onMouseEnter((()=>f.setHighlight(!0))),f.onMouseLeave((()=>f.setHighlight(!1))),f.setMouseStyle(t.MouseStyles.Point),f.setPadding({left:6}),Pl(f,r,n),this.applyStylers(f,r)}}.addStyler(Fl).addStyler(Il);class du extends Al{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Ff=[],this.If=2,this.Pf="",this.Df=(t,i)=>void 0!==t.label?t.label:Pn(t.value,i.min,i.max),this.Bf=0,this.Of=0,this.Lf=!1,this.re=t,this.Ef=r,this.Rf=this.Tc(t.hh(i).sh(rh)),this.zf=this.Tc(t.tn(i).eh(h.uiTextFillStyle).dr(h.uiTextFont).setMouseInteractions(!1)),"vertical"===r?(this.Vf=140,this.Nf=25):(this.Vf=160,this.Nf=15)}Ec(){return[this.Rf,this.zf]}Gf(t){this.Wf=t;const i=yu(t,"vertical"===this.Ef?0:90,this.Lf);return this.Rf.eh(i),this.re.te(),this}Hf(){return this.Wf}Uf(t){return this.Vf=t,this.re.te(),this}jf(){return this.Vf}$f(t){return this.Nf=t,this.re.te(),this}Yf(){return this.Nf}Xf(t){return this.Pf=t,this.re.te(),this}Zf(){return this.Pf}Kf(t){return this.Df=t,this.re.te(),this}setLUTDisplayProportionalSteps(t){if(this.Lf=t,this.Wf){const t=yu(this.Wf,"vertical"===this.Ef?0:90,this.Lf);this.Rf.eh(t)}return this.re.te(),this}getLUTDisplayProportionalSteps(){return this.Lf}setFillStyle(t){return this.zf.eh(t),this.re.te(),this}getFillStyle(){return this.zf.ur()}setFont(t){return this.zf.dr(t),this.re.te(),this}getFont(){return this.zf.cr()}setTextRotation(t){return this.Of=t,this.zf.gr(t),this.re.te(),this}getTextRotation(){return this.zf.mr()}rh(){var i,s,e,h;if(super.rh(),this.fs)return this;const r=this.Wf;if(r){const n=this.renderingScale.os(),o=r.min,a=r.max;if("vertical"===this.Ef){const e=this.getPosition({x:-1,y:-1},t.UISpace.Content),h=an(e,{x:this.Rf.Ci().x+this.If*n.x,y:0}),l={x:h.x,y:h.y+(this.Pf.length>0?this.Bf*n.y+this.zf.Ci().y:0)+.5*((null===(i=this.Ff[0])||void 0===i?void 0:i.Ci().y)||0)},u={x:l.x,y:this.getPosition({x:-1,y:1},t.UISpace.Content).y-.5*((null===(s=this.Ff[this.Ff.length-1])||void 0===s?void 0:s.Ci().y)||0)};this.Rf.oh({x:e.x,y:l.y}),this.zf.Ja({x:-1,y:-1}).oh(h),r.getSteps().forEach(((t,i)=>{const s=$r(l,u,this.Lf?!0===r.getInterpolation()?(t.value-o)/(a-o):.9*(t.value-o)/(a-o):!0===r.getInterpolation()?i/(r.getSteps().length-1):i/r.getSteps().length);this.Ff[i].Ja({x:-1,y:0}).oh(s)}))}else{const i=this.getPosition({x:-1,y:-1},t.UISpace.Content),s=this.getPosition({x:1,y:1},t.UISpace.Content),l=this.Ff.reduce(((t,i)=>Math.max(t,i.Ci().y)),0),u=an(i,{x:.5*((null===(e=this.Ff[0])||void 0===e?void 0:e.Ci().x)||0),y:l}),c={x:s.x,y:u.y},f={x:c.x-(.5*((null===(h=this.Ff[this.Ff.length-1])||void 0===h?void 0:h.Ci().x)||0)+(this.Pf.length>0?this.Bf*n.x+this.zf.Ci().x:0)),y:u.y},d={x:u.x,y:u.y+this.If*n.y};this.Rf.oh(d),this.zf.Ja({x:1,y:1}).oh(c),r.getSteps().forEach(((t,i)=>{const s=$r(u,f,this.Lf?!0===r.getInterpolation()?(t.value-o)/(a-o):.9*(t.value-o)/(a-o):!0===r.getInterpolation()?i/(r.getSteps().length-1):i/r.getSteps().length);this.Ff[i].Ja({x:0,y:1}).oh(s)}))}}return this}le(){if(this.Wf&&this.getVisible()){const t=this.Wf.getSteps();for(let i=this.Ff.length;i<t.length;i+=1)this.Ff.push(this.Tc(this.re.tn(this.renderingScale).setMouseInteractions(!1)));for(let i=0;i<t.length;i+=1)this.Ff[i].eh(this.zf.ur()).dr(this.zf.cr()).lr(this.Df(t[i],this.Wf)).gr(this.Of);for(let i=t.length;i<this.Ff.length;i+=1)this.Ff[i].dispose();if(this.Ff.length=t.length,this.zf.lr(this.Pf),"vertical"===this.Ef){const t=this.Nf,i=this.Vf;this.Rf.Gt({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=t+Math.max(this.Ff.reduce(((t,i)=>Math.max(t,i.le().cf().x)),0),this.zf.le().cf().x),e=(this.Pf.length>0?this.Bf+this.zf.le().cf().y:0)+i+.5*this.Ff[0].le().cf().y+.5*this.Ff[this.Ff.length-1].le().cf().y;this.setContentSize({x:s,y:e})}else{const t=this.Vf,i=this.Nf;this.Rf.Gt({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=Math.max(this.Pf.length>0?this.Bf+this.zf.le().cf().x:0,.5*this.Ff[this.Ff.length-1].le().cf().x),e=t+.5*this.Ff[0].le().cf().x+s,h=i+this.If+this.Ff.reduce(((t,i)=>Math.max(t,i.le().cf().y)),0);this.setContentSize({x:e,y:h})}}else this.Ff.forEach((t=>t.dispose())),this.Ff.length=0,this.zf.setVisible(!1),this.Rf.setVisible(!1),this.setContentSize({x:0,y:0});return super.le()}dispose(){return super.dispose(),this.Rf.dispose(),this.Ff.forEach(Th),this.zf.dispose(),this}setMouseInteractions(t){return this.Rf.setMouseInteractions(t),this}getMouseInteractions(){return this.Rf.getMouseInteractions()}}const gu={lutElement:{},setLUT(t){return this.lutElement.Gf(t),this},getLUT(){return this.lutElement.Hf()},setLUTLength(t){return this.lutElement.Uf(t),this},getLUTLength(){return this.lutElement.jf()},setLUTThickness(t){return this.lutElement.$f(t),this},getLUTThickness(){return this.lutElement.Yf()},setLookUpUnit(t){return this.lutElement.Xf(t),this},getLookUpUnit(){return this.lutElement.Zf()},setLUTStepValueFormatter(t){return this.lutElement.Kf(t),this},setLUTDisplayProportionalSteps(t){return this.lutElement.setLUTDisplayProportionalSteps(t),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}},mu={...Dl,...Bl,background:Ul,alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},if(t,i,s,e,h,r){const n=new ql(t,i,s,this.background,e,h),o=n.addElement({if:()=>new du(t,i,s,Fh,h,this.alignment)}),a=Object.assign(n,ru,{stylableTexts:[o]},gu,{lutElement:o});return Pl(a,h,r),this.applyStylers(a,h)}}.addStyler(Fl),yu=(t,i,s)=>{const e=t.getSteps(),h=t.min,r=t.max-h;if(!0===t.getInterpolation())return new sh({angle:i,stops:e.map(((i,n)=>({offset:s?(i.value-h)/r:n/(e.length-1),color:i.color||t.color})))});const n=[];for(let i=0;i<e.length;i+=1){const o=e[i];n.push({offset:s?.9*(o.value-h)/r:i/e.length,color:o.color||t.color});const a=i<e.length-1?e[i+1]:void 0;n.push({offset:s?a?.9*(a.value-h)/r:1:a?(i+1)/e.length:1,color:o.color||t.color})}return new sh({angle:i,stops:n})},pu={...Dl,...Bl,background:Ul,buttonBuilder:cu,setPictureOff(t){return{...this,buttonBuilder:this.buttonBuilder.setPictureOff(t)}},setPictureOn(t){return{...this,buttonBuilder:this.buttonBuilder.setPictureOn(t)}},alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},if(i,s,e,h,r){const n=new ql(i,s,e,this.background,h,r),o=n.addElement(su),a=o.addElement(iu);a.addGap();const l=a.addElement(this.buttonBuilder);a.addGap();const u=o.addElement(iu);u.addGap();const c=u.addElement(Hl);u.addGap();const f=n.addElement({if:()=>new du(i,s,e,Fh,r,this.alignment)});"vertical"===this.alignment&&f.setMargin({left:r.uiButtonSize+6});const d=Object.assign(n,eu,{setTextLabel:c},ru,{stylableTexts:[c,f]},hu("LUTText",[f]),nu,{button:l},gu,{lutElement:f});return d.onMouseClick((()=>{d.setOn(!d.getOn())})),d.onMouseEnter((()=>d.setHighlight(!0))),d.onMouseLeave((()=>d.setHighlight(!1))),d.setMouseStyle(t.MouseStyles.Point),d.setPadding({left:6}),this.applyStylers(d,r)}}.addStyler(Fl).addStyler(Il),Su={alignment:null,title:null,entryStylers:null,legendBoxDisposed:null,entries:[],add(t,i){const s=!i||"object"!=typeof i||void 0===i.toggleVisibilityOnClick||i.toggleVisibilityOnClick,e=i&&"object"==typeof i&&void 0!==i.builder?i.builder:void 0;return this.legendBoxDisposed()||(t instanceof Jc?this.addChart(t,s,e):"attach"in t?this.addAttachable(t,s,e):t&&this.addDashboard(t,s,e)),this},addAttachable(t,i,s){const e=t.Hf&&t.Hf();let h=s;h||(h=e?pu.setAlignment(this.alignment):fu);const r=this.addElement(h);if(e&&"setLUT"in r){r.setLUT(e.lut);const t=e.lut.getUnits(),i=e.lookUpProperty,s=t.length>0?t:"x"===i?"x":"y"===i?"y":"z"===i?"z":"";r.setLookUpUnit(s)}return this.entryStylers.forEach((t=>t(r))),this.entries.push({entry:r,component:t}),t.attach(r,i),this},addChart(t,i,s){return t.qf().forEach((t=>this.addAttachable(t,i,s))),this},addDashboard(t,i,s){return t.getCells().filter((t=>t.panel instanceof Jc)).forEach((t=>this.addChart(t.panel,i,s))),this},setTitle(t){return this.title.setText(t),this},getTitle(){return this.title.getText()},setTitleFillStyle(t){return this.title.setTextFillStyle(t),this},getTitleFillStyle(){return this.title.getTextFillStyle()},setTitleFont(t){return this.title.setTextFont(t),this},getTitleFont(){return this.title.getTextFont()},setTitleRotation(t){return this.title.setTextRotation(t),this},getTitleRotation(){return this.title.getTextRotation()},setEntries(t){return this.entries.forEach((i=>t(i.entry,i.component))),this}},vu={alignment:"vertical",layoutBuilder:iu,setAlignment(t){return{...this,alignment:t,layoutBuilder:"horizontal"===t?su:iu}},getAlignment(){return this.alignment},titleBuilder:au,styleTitle(t){return{...this,titleBuilder:this.titleBuilder.addStyler(t)}},entryStylers:[],styleEntries(t){return{...this,entryStylers:[...this.entryStylers,t]}}},bu={...Dl,...Bl,...vu,background:Ul,if(t,i,s,e,h,r){const n=this.layoutBuilder.setBackground(this.background).if(t,i,s,e,h,!1);let o=Object.assign(n,Su,{alignment:this.alignment,entryStylers:this.entryStylers,legendBoxDisposed:()=>n.fs});o.entries=[];const a=o.addElement("horizontal"===this.alignment?iu:su),l=a.addElement(this.titleBuilder).setText("Legend").setTextFillStyle(h.legendTitleFillStyle).setTextFont(h.legendTitleFont);return a.addGap(),o=Object.assign(o,{title:l}),"horizontal"===this.alignment&&l.setMargin({right:6}),Pl(o,h,r),this.applyStylers(o,h)}}.addStyler(((t,i)=>t.setPadding(5)));class xu extends Al{constructor(i,s,e,h,r){super(i,s,e,h,r),this.Jf=10,this.Qf=t.UIDirections.Up,this.td=0,this.sf="major",this.ka=this.Tc(i.tn(this.renderingScale)),this.dh=this.Tc(i.mh(this.renderingScale))}Ec(){return[this.ka]}rh(){if(super.rh(),this.fs)return this;const i=uh(this.getPosition(),this.scale,this.renderingScale),s=this.renderingScale.Ei(i,{x:this.Qf===t.UIDirections.Right?-this.Jf:this.Qf===t.UIDirections.Left?this.Jf:0,y:this.Qf===t.UIDirections.Up?-this.Jf:this.Qf===t.UIDirections.Down?this.Jf:0}),e=this.renderingScale.Ei(s,{x:this.Qf===t.UIDirections.Right?-this.td:this.Qf===t.UIDirections.Left?this.td:0,y:this.Qf===t.UIDirections.Up?-this.td:this.Qf===t.UIDirections.Down?this.td:0});return this.dh.ph(i).yh(s),this.ka.oh(e).Ja(this.Qf===t.UIDirections.Up?{x:0,y:1}:this.Qf===t.UIDirections.Down?{x:0,y:-1}:this.Qf===t.UIDirections.Right?{x:1,y:0}:{x:-1,y:0}),this}le(){const i=this.dh.Cu().getThickness();return this.size=this.Qf===t.UIDirections.Left||this.Qf===t.UIDirections.Right?{x:this.Jf+this.td+this.ka.le().cf().x,y:i}:{y:this.Jf+this.td+this.ka.le().cf().y,x:i},super.le()}dispose(){return super.dispose(),this.ka.dispose(),this.dh.dispose(),this}setVisible(t){return super.setVisible(t),this.ka.setVisible(t),this.dh.setVisible(t),this}setMouseInteractions(t){return this.ka.setMouseInteractions(t),this.dh.setMouseInteractions(t),this}getMouseInteractions(){return this.ka.getMouseInteractions()}getText(){return this.ka.nr()}setTextFillStyle(t){return this.ka.eh(t),this.re.te(),this}getTextFillStyle(){return this.ka.ur()}setTextFont(t){return this.ka.dr(t),this}setTextRotation(t){return this.ka.gr(t),this}getTextRotation(){return this.ka.mr()}getTextFont(){return this.ka.cr()}setText(t){return this.ka.lr(t),this.re.te(),this}setDirection(t){return this.Qf=t,this.re.te(),this}getDirection(){return this.Qf}setPointerLength(t){return this.Jf=t,this.re.te(),this}getPointerLength(){return this.Jf}setTickLabelPadding(t){return this.td=t,this.re.te(),this}getTickLabelPadding(){return this.td}setTickStyle(t){return this.dh.gh(t),this.re.te(),this}getTickStyle(){return this.dh.Cu()}}const Mu={...Dl,if(t,i,s,e,h,r){const n=new xu(t,i,s,e,h);return Pl(n,h,r),this.applyStylers(n,h)}}.addStyler(Fl),_u=Mu.addStyler(((t,i)=>(t.sf="major",t.setPointerLength(i.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.majorTickStyle.labelFillStyle)))),Au=Mu.addStyler(((t,i)=>(t.sf="minor",t.setPointerLength(i.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.minorTickStyle.labelFillStyle)))),wu=fu.addStyler((t=>t.onSwitch(((i,s)=>!0===s?setTimeout((()=>t.setOn(!1)),300):void 0)))),ku=bu.setAlignment("horizontal"),Cu=bu.setAlignment("vertical"),Tu={TextBox:au,CheckBox:fu,ButtonBox:wu,PointableTextBox:lu,AxisTickMajor:_u,AxisTickMinor:Au,LUTRange:mu},Fu={HorizontalLegendBox:ku,VerticalLegendBox:Cu},Iu=(t,i,s)=>t*(1-s)+i*s,Pu=(t,i,s,e,h)=>{if(void 0===i.value||void 0===s.value||void 0===e.value||void 0===h.value)return;const r=(t.x-s.point.x)/(h.point.x-s.point.x),n=(h.point.y-s.point.y)*r+s.point.y,o=(t.x-i.point.x)/(e.point.x-i.point.x),a=(e.point.y-i.point.y)*o+i.point.y,l=(t.y-a)/(n-a),u=Iu(s.value,h.value,r),c=Iu(i.value,e.value,o);return Iu(c,u,l)},Du={warm:t=>i=>be(60/(t-1)*i,.8,.8),cold:t=>i=>be(60/(t-1)*i+180,.8,.8),fullSpectrum:t=>i=>be(360/t*i,.8,.8),reverseSpectrum:t=>i=>be(360/t*(t-i),.8,.8),flatUI:t=>i=>be(360/t*i+8,.8,.8-.15/t*i),arction:t=>i=>{const s=1-.2/t*i;return be(360/t*i+51,s,s)},arctionWarm:t=>i=>{const s=t-1,e=1-.2/s*i;return be(46-46/s*i+4,e,e)},sunset:t=>i=>{const s=[170,320];return be(i%2?s[0]:s[1],.8,.5+.5/(t-1)*i)},dynamic:t=>i=>{const s=i%2,e=[234,346];return be(s?e[0]:e[1],s?.3:.9,.5+.5/(t-1)*i)},magenta:t=>i=>{const s=[.9,.6];return be(354,i%2?s[0]:s[1],.5+.5/(t-1)*i)},greyscale:t=>i=>be(0,0,.25+.5/(t-1)*i),frozen:t=>i=>{const s=[.8,.6];return be(160+80/(t-1)*i,.6,i%2?s[0]:s[1])},retro:t=>i=>{const s=[6,183];return be(i%2?s[0]:s[1],.7,.5+.5/(t-1)*i)},crayons:t=>i=>{let s=180+230/(t-1)*i;return s>360&&(s-=360),be(s,.9,.8)},custom:(t,i)=>s=>{const e=.25+.5/(t-1)*s;if(!i)return be(0,0,e);const h=i.getR()/255,r=i.getG()/255,n=i.getB()/255,o=Math.max(h,r,n),a=Math.min(h,r,n);let l=0;if(o!==a){const t=o-a;switch(o){case h:l=(r-n)/t+(r<n?6:0);break;case r:l=(n-h)/t+2;break;case n:l=(h-r)/t+4;break;default:l=0}return l=l/6*360,be(l,.8,e)}return be(0,0,e)},sector:(t,i,s=.8,e=.8)=>h=>r=>be(t+(i-t)/h*r,s,e),auroraBorealis:t=>i=>Bu([{value:0,hex:"#23FF7A"},{value:1/9,hex:"#03E65D"},{value:2/9,hex:"#04D155"},{value:3/9,hex:"#00B849"},{value:4/9,hex:"#00A869"},{value:5/9,hex:"#008F68"},{value:6/9,hex:"#00815E"},{value:7/9,hex:"#017153"},{value:8/9,hex:"#704A85"},{value:1,hex:"#743A70"}],t,i),blueSciFi:t=>i=>Bu([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#E2E7FF"},{value:2/9,hex:"#ACB9F8"},{value:3/9,hex:"#889DFF"},{value:4/9,hex:"#547EEF"},{value:5/9,hex:"#4068D8"},{value:6/9,hex:"#2B50B7"},{value:7/9,hex:"#1B3E9F"},{value:8/9,hex:"#8D1395"},{value:1,hex:"#780A74"}],t,i),light:t=>i=>Bu([{value:0,hex:"#FECC00"},{value:1/9,hex:"#F7B300"},{value:2/9,hex:"#EF9900"},{value:3/9,hex:"#E88000"},{value:4/9,hex:"#E06600"},{value:5/9,hex:"#DD5A00"},{value:6/9,hex:"#D94D00"},{value:7/9,hex:"#D13300"},{value:8/9,hex:"#C91A00"},{value:1,hex:"#C10000"}],t,i),monochrome:t=>i=>Bu([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#EEEEEE"},{value:2/9,hex:"#DCDCDC"},{value:3/9,hex:"#C1C1C1"},{value:4/9,hex:"#A4A2A2"},{value:5/9,hex:"#8B8B8B"},{value:6/9,hex:"#787878"},{value:7/9,hex:"#656565"},{value:8/9,hex:"#565555"},{value:1,hex:"#434343"}],t,i),night:t=>i=>Bu([{value:0,hex:"#F0F9E0"},{value:1/9,hex:"#C9DFA4"},{value:2/9,hex:"#B5C796"},{value:3/9,hex:"#8998B7"},{value:4/9,hex:"#6E7E9E"},{value:5/9,hex:"#5C6D8F"},{value:6/9,hex:"#47587A"},{value:7/9,hex:"#374B72"},{value:8/9,hex:"#273C65"},{value:1,hex:"#192847"}],t,i),sunset2:t=>i=>Bu([{value:0,hex:"#22334D"},{value:1/9,hex:"#82062C"},{value:2/9,hex:"#AB001D"},{value:3/9,hex:"#D80428"},{value:4/9,hex:"#CF5D1B"},{value:5/9,hex:"#CF8229"},{value:6/9,hex:"#CF9D29"},{value:7/9,hex:"#C4BE25"},{value:8/9,hex:"#E1DC49"},{value:1,hex:"#FFFA67"}],t,i)},Bu=(t,i,s)=>{const e=Lu(i,s),[h,r]=Eu(e,t),n=Ou(t[h]),o=Ou(t[r]),a=0!==n.value?(o.value-e)/n.value:0,l={value:a,h:Iu(n.h,o.h,a),s:Iu(n.s,o.s,a),v:Iu(n.v,o.v,a)};return be(l.h,l.s,l.v)},Ou=t=>{const i=(t=>{const i=t.r,s=t.g,e=t.b,h=Math.max(i,s,e),r=Math.min(i,s,e);let n=0;const o=h,a=h-r,l=0===h?0:a/h;if(h===r)n=0;else{switch(h){case i:n=(s-e)/a+(s<e?6:0);break;case s:n=(e-i)/a+2;break;case e:n=(i-s)/a+4}n/=6}return[360*n,l,o]})(ve(t.hex));return{value:t.value,h:i[0],s:i[1],v:i[2]}},Lu=(t,i)=>{const s=i/t;return s<0?0:s>1?1:s},Eu=(t,i)=>{if(i.length<2)throw new Error("Invalid palette size");for(let s=0;s<i.length;s+=1)if(t<i[s].value)return[s-1,s];return[i.length-2,i.length-1]};class Ru{constructor(){this.type="simple"}}const zu=new Ru;class Vu{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=ve("#000"),this.specularColor=ve("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const Nu=new Vu,Gu={Simple:Ru,Phong:Vu};var Wu;t.ImageFitMode=void 0,(Wu=t.ImageFitMode||(t.ImageFitMode={}))[Wu.Fill=0]="Fill",Wu[Wu.Fit=1]="Fit",Wu[Wu.Stretch=2]="Stretch",Wu[Wu.Center=3]="Center",Wu[Wu.Tile=4]="Tile";const Hu=le({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:Se(0,0,0,0),sourceMissingColor:Se(0,0,0,0),fitMode:t.ImageFitMode.Fill});class Uu extends Hu{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return pe(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return pe(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}}const ju=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"image"===t.fillType),$u={Dotted:[1,3],DottedDense:[1,1],Dashed:[3,1],DashedEqual:[2,2],DashedLoose:[2,4],DashDotted:[3,2,1,2]},Yu=le({type:"linestyle",lineType:"dashed",pattern:$u.DashedEqual,fillStyle:new Be({color:Se(255,255,255)}),thickness:1,patternScale:3}),Xu=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"dashed"!==t.lineType),Zu=le({type:"icon",width:void 0,height:void 0,sd:void 0,ed:Fh,hd:Fh});class Ku extends Zu{constructor(t,i,s,e){super({...e,sd:t,ed:i,hd:s})}dispose(){return this.hd(this),this}setWidth(t){const i=this.set("width",t);return this.ed(i),i}getWidth(){return this.get("width")}setHeight(t){const i=this.set("height",t);return this.ed(i),i}getHeight(){return this.get("height")}setSize(t,i){const s=this.withMutations((s=>{s.set("width",t).set("height",i)}));return this.ed(s),s}Ci(){if(!this.sd)return{x:0,y:0};const t=this.sd.width,i=this.sd.height,s=this.width,e=this.height;return"number"==typeof s&&"number"==typeof e?{x:s,y:e}:"number"==typeof s?{x:s,y:i*s/t}:"number"==typeof e?{x:t*e/i,y:e}:{x:t,y:i}}}const qu=t=>!(!t||"object"!=typeof t||!("type"in t)||"icon"!==t.type),Ju=le({type:"glow",color:Se(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class Qu extends Ju{constructor(t){super(t)}setSpread(t){return this.set("spread","function"==typeof t?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur","function"==typeof t?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color","function"==typeof t?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset","function"==typeof t?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}const tc=(t,i)=>{if(Gn(t)){const s=i.Xo(t);return{x:s.engineX,y:s.engineY}}return t},ic=t=>{let i=!1,s={type:"linear"};if(t&&(void 0!==t.opposite&&(i=t.opposite),t.type&&"linear-highPrecision"===t.type&&(s={type:"linear-highPrecision"}),t.type&&"logarithmic"===t.type)){let i=10;if(t.base)if("E"===t.base||"e"===t.base||"natural"===t.base)i="e";else if("number"==typeof t.base)i=t.base;else if("string"==typeof t.base)try{i=Number(t.base)}catch(i){console.warn(`Unidentified logarithmic base "${t.base}"`)}s={base:i,type:"logarithmic"}}return{opposite:i,type:s}},sc=(t,i,s,e=1)=>Ph(t+.1*e*(i-t)+.5*e*s.getPixelSize()*Math.sign(i-t),t,i),ec=(t,i,s,e=1)=>{const h=s.qt(t),r=s.qt(i);return Ph(s.Kt(h+.1*e*(r-h)+.5*e*Math.sign(r-h)),t,i)};class hc extends ia{constructor(t,i,s,e,h,r,n){super(t,i,s,e,n),this.rd=h,this.nd=r}}class rc extends ta{constructor(i,s,h,r,n,o,a,l,u,c,f,d,g,m,y,p,S){var v;super(f,c,l,y,p,{numeric:c.getWidth({x:y.xAxisNumericTicks,y:y.yAxisNumericTicks}),datetime:c.getWidth({x:y.xAxisDateTimeTicks,y:y.yAxisDateTimeTicks}),time:c.getWidth({x:y.xAxisTimeTicks,y:y.yAxisTimeTicks})},S),this.od=new Map,this.ad=void 0,this.ld=0,this.ud=[],this.fd=[],this.Ih=Go.fitting,this.dd=!0,this.gd=0,this.md=8,this.yd=void 0,this.pd=void 0,this.Sd=20,this.vd=1,this.bd=!0,this.xd=!0,this.Md=!0,this._d=!0,this.Ad=!0,this.wd=!0,this.kd=!0,this.Cd=!0,this.Td=!0,this.Fd=!0,this.Id=this.Qh.defaultDragMouseStyle,this.Pd=this.Qh.defaultDragMouseStyle,this.Dd=this.Qh.defaultDragMouseStyle,this.Bd=this.Qh.defaultDragMouseStyle,this.Od=this.Qh.defaultDragMouseStyle,this.At=new $e,this.Ld=[],this.Ed=t=>{const i=this.fd.indexOf(t);i>=0&&this.fd.splice(i,1)},this.Rd=t=>(this.fd.indexOf(t)<0&&this.fd.push(t),this.Ed),this.Ds=(t,i)=>this.At.emit("axisAreaTouch",this,i),this.zd=hr(this.Ld),this.onAxisInteractionAreaMouseClick=t=>this.At.on("axisAreaMouseClick",t),this.onAxisInteractionAreaMouseDoubleClick=t=>this.At.on("axisAreaDoubleClick",t),this.onAxisInteractionAreaMouseDown=t=>this.At.on("axisAreaMouseDown",t),this.onAxisInteractionAreaMouseUp=t=>this.At.on("axisAreaMouseUp",t),this.onAxisInteractionAreaMouseEnter=t=>this.At.on("axisAreaMouseEnter",t),this.onAxisInteractionAreaMouseLeave=t=>this.At.on("axisAreaMouseLeave",t),this.onAxisInteractionAreaMouseMove=t=>this.At.on("axisAreaMouseMove",t),this.onAxisInteractionAreaMouseWheel=t=>this.At.on("axisAreaMouseWheel",t),this.onAxisInteractionAreaMouseDragStart=t=>this.At.on("axisAreaMouseDragStart",t),this.onAxisInteractionAreaMouseDrag=t=>this.At.on("axisAreaMouseDrag",t),this.onAxisInteractionAreaMouseDragStop=t=>this.At.on("axisAreaMouseDragStop",t),this.onAxisInteractionAreaTouchStart=t=>this.At.on("axisAreaTouchStart",t),this.onAxisInteractionAreaTouch=t=>this.At.on("axisAreaTouch",t),this.onAxisInteractionAreaTouchStop=t=>this.At.on("axisAreaTouchEnd",t),this.offAxisInteractionAreaMouseClick=t=>this.At.off(t,"axisAreaMouseClick"),this.offAxisInteractionAreaMouseDoubleClick=t=>this.At.off(t,"axisAreaDoubleClick"),this.offAxisInteractionAreaMouseDown=t=>this.At.off(t,"axisAreaMouseDown"),this.offAxisInteractionAreaMouseUp=t=>this.At.off(t,"axisAreaMouseUp"),this.offAxisInteractionAreaMouseEnter=t=>this.At.off(t,"axisAreaMouseEnter"),this.offAxisInteractionAreaMouseLeave=t=>this.At.off(t,"axisAreaMouseLeave"),this.offAxisInteractionAreaMouseMove=t=>this.At.off(t,"axisAreaMouseMove"),this.offAxisInteractionAreaMouseWheel=t=>this.At.off(t,"axisAreaMouseWheel"),this.offAxisInteractionAreaMouseDragStart=t=>this.At.off(t,"axisAreaMouseDragStart"),this.offAxisInteractionAreaMouseDrag=t=>this.At.off(t,"axisAreaMouseDrag"),this.offAxisInteractionAreaMouseDragStop=t=>this.At.off(t,"axisAreaMouseDragStop"),this.offAxisInteractionAreaTouchStart=t=>this.At.off(t,"axisAreaTouchStart"),this.offAxisInteractionAreaTouch=t=>this.At.off(t,"axisAreaTouch"),this.offAxisInteractionAreaTouchStop=t=>this.At.off(t,"axisAreaTouchEnd"),this.Vd=(t,i)=>i.getAllocatesAxisSpace()?Math.max(t,i.update().rf()):t,this.Nd=t=>{const i=this.ud.indexOf(t);-1!==i&&this.ud.splice(i,1)},this.Gd=(t,i)=>{this.At.emit("axisAreaDoubleClick",this,i),this._d&&(this.setStopped(!1),ir(i))},this.Wd=t=>{this.At.emit("axisAreaMouseEnter",this),(this.xd||this.bd||this.Md||this._d)&&this.Hd(t)},this.Ud=t=>{this.jd(t),this.At.emit("axisAreaMouseLeave",this)},this.$d=(t,i,s)=>{var h,r;this.At.emit("axisAreaMouseDragStart",this,i,s);const n=Rh(null===(h=this.chart.Yd.fo)||void 0===h?void 0:h.axisXYZoomMouseButton,0),o=Rh(null===(r=this.chart.Yd.fo)||void 0===r?void 0:r.axisXYPanMouseButton,2),a=e(i.clientX,i.clientY);s===o&&this.xd?(this.Xd(t),ir(i)):s===n&&this.bd&&(this.Zd(t,a),ir(i))},this.Kd=(t,i,s,h,r)=>{var n,o;this.At.emit("axisAreaMouseDrag",this,i,s,h,r);const a=Rh(null===(n=this.chart.Yd.fo)||void 0===n?void 0:n.axisXYZoomMouseButton,0),l=Rh(null===(o=this.chart.Yd.fo)||void 0===o?void 0:o.axisXYPanMouseButton,2),u=e(i.clientX,i.clientY);s===l&&this.xd?(this.qd(t,r),ir(i)):s===a&&this.bd&&(this.Jd(t,h,u,r),ir(i))},this.Qd=(t,i,s,h)=>{var r,n;this.At.emit("axisAreaMouseDragStop",this,i,s,h);const o=Rh(null===(r=this.chart.Yd.fo)||void 0===r?void 0:r.axisXYZoomMouseButton,0),a=Rh(null===(n=this.chart.Yd.fo)||void 0===n?void 0:n.axisXYPanMouseButton,2),l=e(i.clientX,i.clientY);s===a&&this.xd?(this.tg(t),ir(i)):s===o&&this.bd&&(this.ig(t,h,l),ir(i)),t.getIsUnderMouse()&&(this.xd||this.bd||this.Md||this._d)&&this.Hd(t)},this.sg=(t,i)=>{if(this.At.emit("axisAreaMouseWheel",this,i),this.Md){this.setStopped(!0);const t=this.Qh.getWidth(this.eg.$s.lh(i.clientX,i.clientY)),s=this.Jt.Kt(t);this.zoom(s,vr(i)),ir(i)}},this.hg=(t,i)=>this.At.emit("axisAreaMouseClick",this,i),this.rg=(t,i)=>this.At.emit("axisAreaMouseDown",this,i),this.ng=(t,i)=>this.At.emit("axisAreaMouseUp",this,i),this.og=(t,i)=>this.At.emit("axisAreaMouseMove",this,i),this.ag=(t,i,s)=>{this.At.emit("axisAreaTouchStart",this,s),this.bd&&(this.Hd(t),this.Zd(t,i),ir(s))},this.lg=(t,i,s,e,h)=>{this.At.emit("axisAreaTouch",this,h),this.bd&&(this.Jd(t,i,s,e),ir(h))},this.ug=(t,i,s,e)=>{this.At.emit("axisAreaTouchEnd",this,e),this.bd&&(this.ig(t,i,s),this.jd(t),ir(e))},this.cg=(t,i,s,e)=>{(this.xd||this.Md)&&(this.Hd(t),this.Xd(t),ir(e))},this.dg=(t,i,s,h,r,n)=>{if(this.xd){const i=e((h.x+r.x)/2,(h.y+r.y)/2);this.qd(t,i),ir(n)}if(this.Md){const t=this.eg.$s.lh(i.x,i.y),e=this.eg.$s.lh(s.x,s.y),o=Math.abs(this.Qh.getWidth(ln(t,h))-this.Qh.getWidth(ln(e,r)))-Math.abs(this.Qh.getWidth(t)-this.Qh.getWidth(e)),a=this.Jt.Ei(this.hr,-o),l=this.Jt.Ei(this.rr,o);this.Jh(a,l),ir(n)}},this.gg=(t,i,s,e)=>{(this.xd||this.Md)&&(this.tg(t),this.jd(t),ir(e))},this.mg=(t,i)=>{(this.Ad||this.wd)&&this.yg(t)},this.pg=(t,i)=>{this.Sg(t)},this.vg=(t,i,s)=>{const h=e(i.clientX,i.clientY);this.Ad&&this.bg(t,h)},this.xg=(t,i,s,h,r)=>{const n=e(i.clientX,i.clientY);this.Ad&&this.Mg(t,n,h,r)},this._g=(t,i,s,h,r)=>{const n=e(i.clientX,i.clientY);this.Ad&&this.Ag(t,n,h,r)},this.wg=(t,i,s,h)=>{const r=e(i.clientX,i.clientY);(this.Ad||this.wd)&&this.kg(t,r,h),(this.Ad||this.wd)&&this.yg(t)},this.Cg=(t,i)=>{this.wd&&(this.setStopped(!0),this.zoom(this.hr,vr(i)),ir(i))},this.Tg=(t,i)=>{this.wd&&(this.setStopped(!0),this.zoom(this.rr,vr(i)),ir(i))},this.Fg=(t,i,s)=>{this.Ad&&(this.yg(t),this.bg(t,i),ir(s))},this.Ig=(t,i,s,e,h)=>{this.Ad&&(this.Mg(t,i,s,e),ir(h))},this.Pg=(t,i,s,e,h)=>{this.Ad&&(this.Ag(t,i,s,e),ir(h))},this.Dg=(t,i,s,e)=>{this.Ad&&(this.kg(t,i,s),this.Sg(t),ir(e))},this.rd=i,this.Bg=s,this.eg=h,this.Og=n,this.Lg=o,this.chart=f,this.Eg=g,this.Rg=r,this.Vs=a,m(this,this.Rd),l.zg=this,this.Vg=d,this.Ng=this.Vg>50?1:-1,this.Gg=(v=this.Qh.toPoint(0,-this.Ng),Math.abs(v.x)>=Math.abs(v.y)?v.x>=0?t.UIDirections.Right:t.UIDirections.Left:v.y>=0?t.UIDirections.Up:t.UIDirections.Down),this.Wg=u,this.Hg=this.Jt instanceof On?(new Rn).Qi(this.Qh.toVec2(this.Jt,this.Wg)):(new zn).Qi(this.Qh.toVec2(this.Jt,this.Wg)),this.Ug=this.chart.pixelScale,this.jg=(new Rn).Qi(this.Qh.toVec2(this.Qh.getWidth(this.Ug),this.Wg)),this.$g=this.eg.mh(this.Hg).setMouseInteractions(!1),this.Yg=this.eg.mh(this.Hg).setMouseInteractions(!1),this.Xg=this.eg.mh(this.Hg).setMouseInteractions(!1),this.Zg=this.Rg.hh(this.Ug).eh(c.getWidth({x:y.xAxisOverlayStyle,y:y.yAxisOverlayStyle})).sh(rh).ua(y.highlightColorOffsetAxisOverlay||y.highlightColorOffset),this.Kg=this.Rg.hh(this.Ug).eh(c.getWidth({x:y.xAxisZoomingBandFillStyle,y:y.yAxisZoomingBandFillStyle})).sh(c.getWidth({x:y.xAxisZoomingBandStrokeStyle,y:y.yAxisZoomingBandStrokeStyle})),this.qg=this.Rg.hh(this.Ug).eh(c.getWidth({x:y.xAxisOverlayStyle,y:y.yAxisOverlayStyle})).sh(rh).ua(y.highlightColorOffsetAxisOverlay||y.highlightColorOffset),this.Jg=this.Rg.hh(this.Ug).eh(c.getWidth({x:y.xAxisOverlayStyle,y:y.yAxisOverlayStyle})).sh(rh).ua(y.highlightColorOffsetAxisOverlay||y.highlightColorOffset),this.ar=this.Rg.tn(this.Hg).setMouseInteractions(!1).gr(this.Qh.getTitleTextRotation(this.Ng)),this.chart.$s.js.Us(this.Zg,(t=>this.Zg.Ys(t)),{animationEnabled:this.Bh}),this.chart.$s.js.Us(this.qg,(t=>this.qg.Ys(t)),{animationEnabled:this.Bh}),this.chart.$s.js.Us(this.Jg,(t=>this.Jg.Ys(t)),{animationEnabled:this.Bh});const b=Xn(new Kn(this.ag,this.lg,this.ug,1),new qn(this.cg,this.dg,this.gg),new Zn(this.Gd)),x=Xn(new Kn(this.Fg,this.Ig,this.Dg)),M=Xn(new Kn(this.Fg,this.Pg,this.Dg));this.Zg.setMouseEnterEventHandler(this.Wd).setMouseLeaveEventHandler(this.Ud).setMouseDragStartEventHandler(this.$d).setMouseDragEventHandler(this.Kd).setMouseDragStopEventHandler(this.Qd).setMouseWheelEventHandler(this.sg).setMouseDoubleClickEventHandler(this.Gd).setMouseClickEventHandler(this.hg).setMouseDownEventHandler(this.rg).setMouseUpEventHandler(this.ng).setMouseMoveEventHandler(this.og).setTouchStartEventHandler(b.onTouchStart).setTouchMoveEventHandler(b.onTouchMove).setTouchEndEventHandler(b.onTouchEnd),this.qg.setMouseEnterEventHandler(this.mg).setMouseLeaveEventHandler(this.pg).setMouseDragStartEventHandler(this.vg).setMouseDragEventHandler(this.xg).setMouseDragStopEventHandler(this.wg).setMouseWheelEventHandler(this.Cg).setTouchStartEventHandler(x.onTouchStart).setTouchMoveEventHandler(x.onTouchMove).setTouchEndEventHandler(x.onTouchEnd),this.Jg.setMouseEnterEventHandler(this.mg).setMouseLeaveEventHandler(this.pg).setMouseDragStartEventHandler(this.vg).setMouseDragEventHandler(this._g).setMouseDragStopEventHandler(this.wg).setMouseWheelEventHandler(this.Tg).setTouchStartEventHandler(M.onTouchStart).setTouchMoveEventHandler(M.onTouchMove).setTouchEndEventHandler(M.onTouchEnd),this.$g.gh(c.getWidth({x:y.xAxisStrokeStyle,y:y.yAxisStrokeStyle})),this.Yg.gh(c.getWidth({x:y.xAxisNibStyle,y:y.yAxisNibStyle})),this.Xg.gh(c.getWidth({x:y.xAxisNibStyle,y:y.yAxisNibStyle})),this.ar.eh(c.getWidth({x:y.xAxisTitleFillStyle,y:y.yAxisTitleFillStyle})).dr(c.getWidth({x:y.xAxisTitleFont,y:y.yAxisTitleFont})),this.Ns=a.Gs(this,{}),this.yr=this.Ns.Qg([this.ar]).Qs(y.effectsText)}Jr(){return this.Eh}Qr(){return void 0!==this.Ar}setTickStrategy(t,i){return super.er(t,i)}getTickStrategy(){return this.Ch}addBand(t=!0){const i=t?this.Lg:this.Og,s=new Vo(i,this.chart,this.zd,this,this.Hg,this.Qh,this.Rs,this.Vs);return this.Ld.push(s),s}addConstantLine(t=!0){const i=t?this.Lg:this.Og,s=new No(i,this.chart,this.zd,this,this.Hg,this.Qh,this.Rs,this.Vs);return this.Ld.push(s),s}tm(t){this.Ld.forEach(t)}im(t){return this.Ld.map(t)}getHighlighters(){return this.Ld}setThickness(t){return"number"==typeof t?(this.sm=t,this.hm=t):"object"==typeof t&&(this.sm=t.min,this.hm=t.max),this.rd.te(),this}getThickness(){return{min:this.sm,max:this.hm}}setMouseInteractions(t){return this.setAxisInteractionPanByDragging(t).setAxisInteractionReleaseByDoubleClicking(t).setAxisInteractionZoomByDragging(t).setAxisInteractionZoomByWheeling(t).setNibInteractionScaleByDragging(t).setNibInteractionScaleByWheeling(t)}rm(){return this.fd}Rr(t,i){return new hc(i,t,this.eg,this.Hg,this.rd,this.Hg)}pr(){if(this.od){for(const t of this.od)t[1].grid.dispose(),t[1].tick.dispose();this.od.clear()}super.pr()}zr(t,i){const{tickStart:s}=i,e=t.Xh.Er,h=s+e.getTickLength()*this.Ng+e.getTickPadding()*this.Ng;t._h.oh(this.Qh.toPoint(t.u,h)).Ja(this.Qh.toPoint(e.getLabelAlignment(),-this.Ng)).gr(e.labelRotation).setVisible(this.getVisible())}nm(t,i){const{startPosition:s,gridStrokeLen:e,gridStrokeStart:h,tickStart:r}=i,n=t.Xh.Er,o=s-e*n.getGridStrokeLength(),a=r+n.getTickLength()*this.Ng;return{gridStroke:{start:this.Qh.toPoint(t.u,h),end:this.Qh.toPoint(t.u,o)},tickStroke:{start:this.Qh.toPoint(t.u,r),end:this.Qh.toPoint(t.u,a)}}}om(t,i,s,e){return this.rd.mh(this.Hg).gh(new Qn({fillStyle:new Be({color:be(360*(1-e))}),thickness:5})).ph(this.Qh.toVec2(t,0)).yh(this.Qh.toVec2(t,this.Ng*(50*e)))}Zr(t,i){return"linear"===this.ir.type?sc(t,i,this.Jt):ec(t,i,this.Jt)}am(t,i){return i instanceof On?sc:ec}qr(t,i,s){if("logarithmic"!==this.ir.type){const e=this.Jt.Ji(i-t);return{min:t-s*e,max:i+s*e}}const e=this.Jt;return{min:e.Ei(t,-s),max:e.Ei(i,s)}}rh(t,i,s){const e=this.$g.Cu(),h=this.Jt.getInnerStart()<this.Jt.getInnerEnd()?this.Jt.getInnerStart():this.Jt.getInnerEnd(),r=this.Jt.getInnerEnd()>this.Jt.getInnerStart()?this.Jt.getInnerEnd():this.Jt.getInnerStart(),n=this.Jt.wi(),o=this.Wg.getInnerInterval(),a=e.getThickness()*this.Ng/2,l=this.Vg/100*o,u=l+t,c=u+a,f=o*this.Ng,d=c+a,g=this.ud.reduce(this.Vd,0);let m,y=0;if(this.ds||this.pr(),this.kh!==jo&&this.ds){const t=this.Jt.wi();this.Cr({physicalAxisSize:t,startPosition:l,gridStrokeLen:f,gridStrokeStart:u,tickStart:d});for(const[i,s]of this.Th){let e=this.od.get(i);if(!e)if(i.Sh)e={grid:this.rd.lm(this.Hg).setMouseInteractions(!1),tick:this.rd.lm(this.Hg).setMouseInteractions(!1)};else if("um"in i){const t=Array.from(this.Th.keys()).filter((t=>"um"in t)).reverse().indexOf(i),s=this.Bg[t];if(!s)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact Arction support.");e={grid:s.lm(this.Hg).setMouseInteractions(!1),tick:s.lm(this.Hg).setMouseInteractions(!1)}}if(e){e.grid.Al(),e.tick.Al();for(const[i,h]of s){const i=this.nm(h,{physicalAxisSize:t,startPosition:l,gridStrokeLen:f,gridStrokeStart:u,tickStart:d});e.grid.ln().fm(i.gridStroke.start,i.gridStroke.end),e.tick.ln().fm(i.tickStroke.start,i.tickStroke.end)}e.grid.gh(i.Er.getGridStrokeStyle()),e.tick.gh(i.Er.getTickStyle()),this.od.set(i,e)}}for(const t of this.Th.values()){let i=Br;for(const s of t.values()){const t=s.Xh.Er,e=this.Qh.getHeight(s._h.Ci()),h=t.getTickLength()+t.getTickPadding()+e+t.getLabelPadding();i=Math.max(i,h)}y=Math.max(y,i)}m=d+Math.max(y,g)*this.Ng}else y=0,m=d+g*this.Ng;this.$g.ph(this.Qh.toPoint(h,c)).yh(this.Qh.toPoint(r,c)),this.Yg.ph(this.Qh.toPoint(this.Jt.Ei(this.Jt.getInnerStart(),this.md),c)).yh(this.Qh.toPoint(this.Jt.getInnerStart(),c)),this.Xg.ph(this.Qh.toPoint(this.Jt.Ei(this.Jt.getInnerEnd(),-this.md),c)).yh(this.Qh.toPoint(this.Jt.getInnerEnd(),c));const p=this.ar&&this.ar.nr().length>0?this.Qh.getHeight(this.ar.le().Ci()):0,S=m+.5*p*this.Ng;this.ar.oh(this.Qh.toPoint(this.Jt.Ei(this.Jt.getInnerStart(),n/2),S));const v=d,b=v+this.Ng*this.ld,x=this.Ad||this.wd?Math.min(this.Sd,.25*n):0,M={start:this.Qh.toVec2(this.Jt.Ei(this.Jt.getInnerStart(),x),v),end:this.Qh.toVec2(this.Jt.Ei(this.Jt.getInnerEnd(),-x),b)};if(this.ad){const i=this.Vg/100*o+t,s=-this.Ng*o-t,e={start:this.Qh.toVec2(this.ad.min,d+this.Ng*this.ld),end:this.Qh.toVec2(this.ad.max,i+s)},h=uh(e.start,this.Hg,this.Ug),r=uh(e.end,this.Hg,this.Ug);this.Kg.oh(h).Gt(ln(r,h)).setVisible(!0)}else this.Kg.setVisible(!1);const _=uh(this.Qh.toVec2(this.Jt.getInnerStart(),b),this.Hg,this.Ug),A=uh(M.start,this.Hg,this.Ug),w=uh(M.end,this.Hg,this.Ug),k=uh(this.Qh.toVec2(this.Jt.getInnerEnd(),v),this.Hg,this.Ug);this.Zg.oh(A).Gt(ln(w,A)),this.qg.oh(_).Gt(ln(A,_)),this.Jg.oh(w).Gt(ln(k,w));for(const i of this.ud)i.update().plot(u,f,t,d);for(const t of this.Ld)t.rh();const C=e.getThickness()+Math.max(y,g)+(this.ar&&this.ar.nr().length>0?p+this.gd:0);return this.ld=Ph(C,void 0!==this.sm?this.sm:0,void 0!==this.hm?this.hm:Dr),this}dm(t){const i=this.$g.Cu().getThickness()*this.Ng/2,s=this.Wg.getInnerInterval(),e=this.Vg/100*s+t,h=e+i,r=s*this.Ng,n=h+i;for(const i of this.ud)i.update().plot(e,r,t,n);for(const t of this.Ld)t.rh()}gm(){return this.ld}ym(t,i){i=i||Tu.AxisTickMajor;const s=new Tl(this,t?this.rd:this.Rg,this.Rg,this.Jt,this.jg,this.jg,this.Qh,this.Gg,this.Nd,this.Rs,i).setTextFormatter(this.formatValue);return this.ud.push(s),s}Hd(t){this.chart.$s.js.se(t,1),this.yd=t.$s.cn(this.Id,this.yd)}jd(t){this.chart.$s.js.se(t,0),t.$s.fn(this.yd)}Xd(t){this.setStopped(!0),t.$s.fn(this.yd)}qd(t,i){const s=-this.Qh.getWidth(i);this.pan(s),this.yd=t.$s.cn(this.Pd,this.yd)}pan(t){const i=this.hr,s=this.rr,e=this.Jt.Ei(i,t),h=this.Jt.Ei(s,t);this.Jh(e,h,{allowClamping:!1})}zoom(t,i){const s=this.Jt.qt(this.hr),e=this.Jt.qt(this.rr),h=this.Jt.qt(t),r=Ph((h-s)/(e-s),0,1),n=.2*this.Jt.wi(),o=r*this.vd*n*-i,a=(1-r)*this.vd*n*i,l=this.Jt.Ei(this.hr,o),u=this.Jt.Ei(this.rr,a);this.Jh(l,u)}tg(t){this.ad=void 0,t.$s.fn(this.yd)}Zd(t,i){this.setStopped(!0),t.$s.fn(this.yd),this.chart.$s.js.se(this.Zg,0)}Jd(t,i,s,e){const h=uh(this.eg.$s.lh(s.x,s.y),this.eg.$s.Jt,this.Hg),r=Ph(this.Qh.getWidth(h),this.hr,this.rr),n=this.Qh.getWidth(uh(this.eg.$s.lh(i.x,i.y),this.eg.$s.Jt,this.Hg)),o=Wr(this.Qh.getHeight(h),this.Qh.getHeight(uh(this.Zg.ja(),this.Ug,this.Hg)),this.Qh.getHeight(uh(an(this.Zg.ja(),this.Zg.Ci()),this.Ug,this.Hg)));Math.abs(this.Jt.qt(r)-this.Jt.qt(n))>10&&o?(this.ad=a(Math.min(r,n),Math.max(r,n)),this.yd=t.$s.cn(this.Dd,this.yd)):(this.ad=void 0,this.yd=t.$s.cn(this.Id,this.yd)),this.eg.te()}ig(t,i,s){if(this.ad){const t=this.ad.min,i=this.ad.max,s=this.rr<this.hr;this.Qt(s?i:t,s?t:i,!0,!0,"interactionSetInterval")}this.ad=void 0,t.$s.fn(this.yd)}yg(t){this.chart.$s.js.se(t,1),this.pd=t.$s.cn(this.Bd,this.pd)}Sg(t){this.chart.$s.js.se(t,0),t.$s.fn(this.pd)}bg(t,i){this.setStopped(!0),this.pd=t.$s.cn(this.Od,this.pd)}Mg(t,i,s,e){const h=this.Qh.getWidth(e);this.Jh(this.Jt.Ei(this.hr,h),this.rr)}Ag(t,i,s,e){const h=this.Qh.getWidth(e);this.Jh(this.hr,this.Jt.Ei(this.rr,h))}kg(t,i,s){t.$s.fn(this.pd),t.getIsUnderMouse()&&(this.pd=t.$s.cn(this.Bd)),this.eg.te()}addCustomTick(t){return this.ym(!0,t)}getUiPosition(){return this.Vg}setStrokeStyle(t){return this.$g.gh(t),this.eg.te(),this}getStrokeStyle(){return this.$g.Cu()}getOverlayStyle(){return this.Zg.ur()}setOverlayStyle(t){return this.Zg.eh(t),this.eg.te(),this}setAxisInteractionZoomByDragging(t){return this.bd=t,this}getAxisInteractionZoomByDragging(){return this.bd}setAxisInteractionPanByDragging(t){return this.xd=t,this}getAxisInteractionPanByDragging(){return this.xd}setAxisInteractionZoomByWheeling(t){return this.Md=t,this}getAxisInteractionZoomByWheeling(){return this.Md}setAxisInteractionReleaseByDoubleClicking(t){return this._d=t,this}getAxisInteractionReleaseByDoubleClicking(){return this._d}setAxisMouseHoverStyle(t=this.Qh.defaultDragMouseStyle){return this.Id=t,this}getAxisMouseHoverStyle(){return this.Id}setAxisMousePanStyle(t=this.Qh.defaultDragMouseStyle){return this.Pd=t,this}getAxisMousePanStyle(){return this.Pd}setAxisMouseZoomStyle(t=this.Qh.defaultDragMouseStyle){return this.Dd=t,this}getAxisMouseZoomStyle(){return this.Dd}setAnimationHighlight(t){return this.chart.$s.js.ee(this.Zg,t),this.chart.$s.js.ee(this.qg,t),this.chart.$s.js.ee(this.Jg,t),this}getAnimationHighlight(){return this.chart.$s.js.he(this.Zg)}getTitleMargin(){return this.gd}setTitleMargin(t){return this.gd=t,this.eg.te(),this}getNibLength(){return this.md}setNibLength(t){return this.md=t,this.eg.te(),this}getNibStyle(){return this.Yg.Cu()}setNibStyle(t){return this.Yg.gh(t),this.Xg.gh(t),this.eg.te(),this}getNibOverlayStyle(){return this.qg.ur()}setNibOverlayStyle(t){return this.qg.eh(t),this.Jg.eh(t),this.eg.te(),this}setNibMousePickingAreaSize(t){return this.Sd=t,this.eg.te(),this}getNibMousePickingAreaSize(){return this.Sd}setNibInteractionScaleByDragging(t){return this.Ad=t,this}getNibInteractionScaleByDragging(){return this.Ad}setNibInteractionScaleByWheeling(t){return this.wd=t,this}getNibInteractionScaleByWheeling(){return this.wd}setNibMouseHoverStyle(t=this.Qh.defaultDragMouseStyle){return this.Bd=t,this}getNibMouseHoverStyle(){return this.Bd}setNibMouseScaleStyle(t=this.Qh.defaultDragMouseStyle){return this.Od=t,this}getNibMouseScaleStyle(){return this.Od}setChartInteractions(t){return this.setChartInteractionFitByDrag(t),this.setChartInteractionPanByDrag(t),this.setChartInteractionZoomByDrag(t),this.setChartInteractionZoomByWheel(t),this}setChartInteractionPanByDrag(t){return this.kd=t,this}getChartInteractionPanByDrag(){return this.kd}setChartInteractionZoomByWheel(t){return this.Cd=t,this}getChartInteractionZoomByWheel(){return this.Cd}setChartInteractionZoomByDrag(t){return this.Td=t,this}getChartInteractionZoomByDrag(){return this.Td}setChartInteractionFitByDrag(t){return this.Fd=t,this}getChartInteractionFitByDrag(){return this.Fd}Rt(){return this.Jt.Rt(),this}zt(){return this.Jt.zt(),this}dispose(){this.Yg.dispose(),this.Xg.dispose(),this.$g.dispose(),this.Zg.dispose(),this.Kg.dispose(),this.qg.dispose(),this.Jg.dispose(),this.ar.dispose(),this.kr(Th);for(const t of this.od.values())t.grid.dispose(),t.tick.dispose();return this.fd.slice().forEach(Th),this.Ld.slice().forEach(Th),this.Eg(this),this.At.emit("dispose",this),this}onDispose(t){return this.At.on("dispose",t)}offDispose(t){return this.At.off(t,"dispose")}setVisible(t){this.Yg.setVisible(t),this.Xg.setVisible(t),this.$g.setVisible(t),this.ar.setVisible(t),this.Zg.setVisible(t),this.qg.setVisible(t),this.Jg.setVisible(t),this.kr((i=>{i.Js(t)}));for(const i of this.od.values())i.grid.setVisible(t),i.tick.setVisible(t);return super.setVisible(t),this.rd.te(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.Bh),this}}const nc={getWidth:t=>t.x,getHeight:t=>t.y,toVec2:(t,i)=>({x:t,y:i}),toPoint:(t,i)=>e(t,i)},oc={getWidth:t=>t.y,getHeight:t=>t.x,toVec2:(t,i)=>({x:i,y:t}),toPoint:(t,i)=>e(i,t)},ac=t=>!!(t&&"object"==typeof t&&"x"in t&&t.x instanceof rc&&"y"in t&&t.y instanceof rc),lc=le({type:"visible-ticks",gridStrokeLength:1,gridStrokeStyle:new Qn,tickLength:7,tickStyle:new Qn,tickPadding:0,labelFont:new ra,labelFillStyle:new Be,labelPadding:0,labelAlignment:0,labelRotation:0});class uc extends lc{}class cc extends uc{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle","function"==typeof t?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle","function"==typeof t?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle","function"==typeof t?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelFont(t){return this.set("labelFont","function"==typeof t?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelPadding(t){return this.set("labelPadding",t)}getLabelPadding(){return this.get("labelPadding")}setLabelAlignment(t){return this.set("labelAlignment",t)}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const fc=t=>!(!t||"object"!=typeof t||!("type"in t)||"visible-ticks"!==t.type),dc=Object.assign(Object.create(new class extends uc{}({type:"empty-ticks"})),{}),gc=(t,i,s,e,h)=>r=>n=>{const o=new Date(n+r),a={year:o.getFullYear(),monthIndex:o.getMonth(),day:o.getDate(),hours:o.getHours(),minutes:o.getMinutes(),seconds:o.getSeconds(),millis:o.getMilliseconds()},l=e?e(a):void 0;if(0===t&&!0===l)return n;const u=a[i];h.includes("year")&&(a.year=Math.floor(a.year/s)*s),h.includes("monthIndex")&&(a.monthIndex=0),h.includes("day")&&(a.day=1),h.includes("hours")&&(a.hours=0),h.includes("minutes")&&(a.minutes=0),h.includes("seconds")&&(a.seconds=0),h.includes("millis")&&(a.millis=0);let c=(0===t?1:t)*s;return-1===t&&!1===l&&(c=0),0!==c&&(a[i]=s*(c>0?Math.floor((u+c)/s):Math.ceil((u+c)/s))),new Date(a.year,a.monthIndex,a.day,a.hours,a.minutes,a.seconds,a.millis).getTime()-r},mc=(t,i,s,...e)=>gc(-1,t,i,s,e),yc=(t,i,s,...e)=>gc(-1,t,i,s,e),pc=(t,i,s,...e)=>gc(0,t,i,s,e),Sc=(t,i,...s)=>gc(1,t,i,void 0,s),vc=t=>i=>s=>{const e=new Date(s+i),h=e.getDay(),r=1===h&&0===e.getHours()&&0===e.getMinutes()&&0===e.getSeconds()&&0===e.getMilliseconds();if(0===t&&!0===r)return s;let n=e.getDate();return-1===t&&1===h&&!1===r||(-1===t?n-=h>=2?h-1:h+6:n+=h>0?8-h:1),new Date(e.getFullYear(),e.getMonth(),n,0,0,0,0).getTime()-i},bc=[{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:Ko({ignore:"first"},2,5)},minorTicks:{amount:4,fitFunction:Ko(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:mc("seconds",1,(t=>0===t.millis),"millis")},majorTicks:{fitFunction:qo(5,10,15,30)},minorTicks:{amount:4,fitFunction:Ko(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:mc("minutes",1,(t=>0===t.seconds&&0===t.millis),"seconds","millis")},majorTicks:{fitFunction:qo(5,10,15,30)},minorTicks:{amount:12,fitFunction:Ko(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:mc("hours",1,(t=>0===t.minutes&&0===t.seconds&&0===t.millis),"minutes","seconds","millis")},majorTicks:{fitFunction:qo(3,6,12)},minorTicks:{amount:8,fitFunction:Ko(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:mc("day",1,(t=>0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"hours","minutes","seconds","millis")},majorTicks:{fitFunction:Ko({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:Ko({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:vc(-1),getNextKeyValueIncludingRef:vc(0),getNextKeyValue:vc(1),greatTicks:!0,majorTicks:{fitFunction:Ko(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:yc("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:pc("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValue:Sc("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Ko(void 0,2,3)},minorTicks:{fitFunction:Ko(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:yc("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:pc("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Sc("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Ko({ignore:"first"},2,5)},minorTicks:{fitFunction:Ko(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:yc("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:pc("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Sc("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Ko(void 0,2,4)},minorTicks:{fitFunction:Ko(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:yc("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:pc("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Sc("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:yc("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:pc("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Sc("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],xc=(t,i,s)=>{let e=((t,i,s,e,h)=>{const r=i-t;let n;for(let t=0;t<bc.length;t+=1){const i=r/bc[t].unit;if(i<=1){n=bc[t];break}}return n})(i,s);if(void 0!==e&&0===bc.indexOf(e)&&(e=bc[1]),void 0===e)return;if("great"===t)return e;const h="major"===t?1:2,r=bc[bc.indexOf(e)-h];return void 0===r?bc[0]:r},Mc=(t,i)=>(s,e,h,r)=>{const n=xc("great",s,e);if(void 0===n)return[];if("Decade"===n.label||"Century"===n.label||"Millennium"===n.label)return[];const o=r>h?s:e,a=(s+e)/2,l=r>h?e:s;if(bc.indexOf(n)<=bc.findIndex((t=>"Hour"===t.label)))return"left"===i?[o]:[];let u;if(!0===n.irregular)u=Zo(s,e,n.getPrevKeyValue(t),n.getNextKeyValue(t));else{const i=n.greatTicks.getReferenceKeyValue(t)(s);u=Xo(s,e,n.unit,i,1)}const c=((t,i,s)=>{for(const e of s)if(e>=t&&e<=i)return e})(s,e,u);return"left"===i?void 0===c||Wr(c,a,l)?[o]:[c]:void 0!==c&&Wr(c,a,l)?[c]:[l]},_c=(t,i)=>(s,e,h,r)=>{const n=xc(t,h,r);let o;if(void 0===n)return[];if("great"===t&&void 0!==n.greatTicks)if(!0===n.irregular)o=Zo(s,e,n.getPrevKeyValue(i),n.getNextKeyValue(i));else{const t=n.greatTicks.getReferenceKeyValue(i)(s);o=Xo(s,e,n.unit,t,1)}else if("major"===t&&void 0!==n.majorTicks)o=!0===n.irregular?((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h})(s,e,n.getPrevKeyValue(i),n.getNextKeyValue(i)):((t,i,s)=>{const e=[];let h=t,r=0;for(;h<i;)if(e.push(h),h+=s,r+=1,r>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return e.push(h),e})(s,e,n.unit);else{if("minor"!==t||void 0===n.minorTicks)return[];if(!0===n.irregular)o=((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h})(s,e,n.getNextKeyValueIncludingRef(i),n.getNextKeyValue(i));else{const t=(t=>{if(void 0!==t)return bc[bc.indexOf(t)+1]})(n);if(void 0===t)return[];o=Yo(s,e,t.unit/n.minorTicks.amount,1)}}return o},Ac=t=>(i,s,e,h,r,n)=>{const o=xc(t,r,n);if(void 0===o)return;let a;return"major"===t?a=o.majorTicks.fitFunction:o.minorTicks&&(a=o.minorTicks.fitFunction),a?a(i,s,e,h,r,n):void 0},wc=le({type:"date-time-ticks",locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new cc,majorTickStyle:new cc,minorTickStyle:new cc,formatOptionsMajorCentury:{year:"numeric"},formatOptionsMinorDecade:{year:"numeric"},formatOptionsMajorDecade:{year:"numeric"},formatOptionsMinorYear:{year:"numeric"},formatOptionsMajorYear:{year:"numeric"},formatOptionsMinorMonth:{month:"short"},formatOptionsGreatYear:{year:"numeric"},formatOptionsMajorMonth:{month:"long"},formatOptionsMinorWeek:{day:"numeric"},formatOptionsGreatMonth:{year:"numeric",month:"long"},formatOptionsMajorWeek:{day:"numeric",weekday:"short"},formatOptionsMinorDay:{day:"numeric",weekday:"short"},formatOptionsGreatWeek:(t,i,s)=>{const e=new Date(t),h=(t=>{const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7));const s=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-s.getTime())/864e5+1)/7)})(e);return`${new Intl.DateTimeFormat(s,{year:"numeric",month:"long"}).format(e)} Week ${h}`},formatOptionsMajorDay:{weekday:"long",day:"numeric"},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit"},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric"},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit"},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit"},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric"},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit"},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit"},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},formatOptionsMajorSecond:{second:"2-digit"},formatOptionsMinorMillisecond:t=>{const i=new Date(t);return`${(i.getSeconds()+i.getUTCMilliseconds()/1e3).toFixed(2)}`},formatOptionsGreatSecond:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},formatOptionsMajorMilliSecond:t=>{const i=new Date(t);return`${(i.getSeconds()+i.getUTCMilliseconds()/1e3).toFixed(1)}`}});class kc extends wc{Sr(t){const i=void 0!==this.dateOrigin?this.dateOrigin.getTime():0,s=t=>bc.map((i=>{const s=((t,i,s)=>{switch(s.label){case"MilliSecond100":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorMilliSecond:t.formatOptionsMinorMillisecond;case"Second":return"Great"===i?t.formatOptionsGreatSecond:"Major"===i?t.formatOptionsMajorSecond:t.formatOptionsMinorSecond;case"Minute":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorMinute:t.formatOptionsMinorMinute;default:case"Hour":return"Great"===i?t.formatOptionsGreatHour:"Major"===i?t.formatOptionsMajorHour:t.formatOptionsMinorHour;case"Day":return"Great"===i?t.formatOptionsGreatDay:"Major"===i?t.formatOptionsMajorDay:t.formatOptionsMinorDay;case"Week":return"Great"===i?t.formatOptionsGreatWeek:"Major"===i?t.formatOptionsMajorWeek:t.formatOptionsMinorWeek;case"Month":return"Great"===i?t.formatOptionsGreatMonth:"Major"===i?t.formatOptionsMajorMonth:t.formatOptionsMinorMonth;case"Year":return"Great"===i?t.formatOptionsGreatYear:"Major"===i?t.formatOptionsMajorYear:t.formatOptionsMinorYear;case"Decade":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorDecade:t.formatOptionsMinorDecade;case"Century":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,t,i);if("object"!=typeof s)return s;try{return new Intl.DateTimeFormat(this.locale,s)}catch(t){let i="";for(const t in s)i+=` ${t}: ${s[t]},`;Mh.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${i}} )`)}})),e=new Map;e.set("great",s("Great")),e.set("major",s("Major")),e.set("minor",s("Minor"));const h=t=>String(t),r=(t,s)=>(r,n)=>{let o=r+i;const a=n.getInnerStart(),l=n.getInnerEnd(),u=a>l,c=xc(t,u?l:a,u?a:l);if(void 0===c)return h(o);if("great"===t){const t=Ih(r,"left"===s?a:l);let e;if(e=!1===t?r:!1===c.irregular?"left"===s&&!1===u||"right"===s&&!0===u?c.greatTicks.getReferenceKeyValue(i)(r):c.greatTicks.getReferenceKeyValue(i)(r+1*c.unit):"left"===s&&!1===u||"right"===s&&!0===u?c.getPrevKeyValue(i)(r):c.getNextKeyValue(i)(r),o=e+i,"right"===s&&!0===t)return""}const f=e.get(t);if(void 0===f)return h(o);const d=f[bc.indexOf(c)];return void 0===d?"":"function"==typeof d?d(o,n,this.locale):d.format(o)},n=[],o=[{_h:"Great ticks (directive)",um:0,bh:!0,hn:_c("great",i),rn:void 0},{_h:"Major ticks",um:1,Er:this.majorTickStyle,Or:r("major"),hn:_c("major",i),Zh:{Vr:Ac("major")},rn:void 0}];this.greatTickStyle!==dc&&(n.push({_h:"Great ticks (left)",Er:this.greatTickStyle.setLabelAlignment(-1),Or:r("great","left"),hn:Mc(i,"left"),Sh:!0,Wr:!1}),n.push({_h:"Great ticks (right)",Er:this.greatTickStyle.setLabelAlignment(1),Or:r("great","right"),hn:Mc(i,"right"),Sh:!0,Wr:!1})),this.minorTickStyle!==dc&&o.push({_h:"Minor ticks",um:2,Er:this.minorTickStyle,Or:r("minor"),hn:_c("minor",i),Zh:{Vr:Ac("minor"),Kh:(t,i,s,e,h,r)=>{const n=xc("minor",h,r);return!n||"Week"!==n.label}},rn:void 0});const a=this.cursorFormatter;return{Ah:n,wh:o,xh:a?(t,s,e)=>a(i+t,s,e):(t,s,e)=>{const h=new Date(i+t);return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"numeric",day:"numeric",minute:"2-digit",hour:"2-digit"}).format(h)} `},Mr:1e3,_r:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setGreatTickStyle(t){if("function"==typeof t){const i=this.get("greatTickStyle");return i!==dc?this.set("greatTickStyle",t(i)):this}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return i!==dc?this.set("minorTickStyle",t(i)):this}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,i,s){return this.withMutations((e=>e.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsGreatSecond",t||this.formatOptionsGreatSecond).set("formatOptionsMajorCentury",i||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",i||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",i||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",i||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",i||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",i||this.formatOptionsMajorDay).set("formatOptionsMajorHour",i||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",i||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",i||this.formatOptionsMajorSecond).set("formatOptionsMajorMilliSecond",i||this.formatOptionsMajorMilliSecond).set("formatOptionsMinorDecade",s||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",s||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",s||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",s||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",s||this.formatOptionsMinorDay).set("formatOptionsMinorHour",s||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",s||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",s||this.formatOptionsMinorSecond)))}setFormattingDecade(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorDecade",t)),i&&(s=s.set("formatOptionsMinorYear",i)),s)))}setFormattingYear(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorYear",t)),i&&(s=s.set("formatOptionsMinorMonth",i)),s)))}setFormattingMonth(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatYear",t)),i&&(e=e.set("formatOptionsMajorMonth",i)),s&&(e=e.set("formatOptionsMinorWeek",s)),e)))}setFormattingWeek(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMonth",t)),i&&(e=e.set("formatOptionsMajorWeek",i)),s&&(e=e.set("formatOptionsMinorDay",s)),e)))}setFormattingDay(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatWeek",t)),i&&(e=e.set("formatOptionsMajorDay",i)),s&&(e=e.set("formatOptionsMinorHour",s)),e)))}setFormattingHour(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatDay",t)),i&&(e=e.set("formatOptionsMajorHour",i)),s&&(e=e.set("formatOptionsMinorMinute",s)),e)))}setFormattingMinute(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatHour",t)),i&&(e=e.set("formatOptionsMajorMinute",i)),s&&(e=e.set("formatOptionsMinorSecond",s)),e)))}setFormattingSecond(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMinute",t)),i&&(e=e.set("formatOptionsMajorSecond",i)),s&&(e=e.set("formatOptionsMinorMillisecond",s)),e)))}setFormattingMilliSecond(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatSecond",t)),i&&(s=s.set("formatOptionsMajorMilliSecond",i)),s)))}}const Cc=(t,i)=>(s,e)=>{const h=e-s;if(i){const i=Math.log10(h/2);let r=10**Math.floor(i-t);const n=1/r;r=Math.round(r*n)/n;const o=Math.round(Math.floor(s/(10*r))*r*10*n)/n;return Xo(o,e,r,void 0,n)}const r=Math.log10(h);let n=10**Math.round(r-t);const o=1/n;return n=Math.round(n*o)/o,Yo(s,e,n,o)},Tc=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%5==0)):void 0,Fc=Ko(void 0,2,5),Ic=(t,i,s,e,h,r)=>0===i?[t[1],t[3],t[5]]:1===i?[t[0],t[3]]:2===i?[t[1]]:void 0,Pc=(t,i)=>{const s=kn(t),e=Cn(t);if(i)return(t,i)=>{const h=[],r=Math.floor(s(t)),n=Math.ceil(s(i));for(let t=r-1;t<=n+1;t+=1){const i=e**t;h.push(i)}return h};const h=10===t?9:4;return(t,i)=>{const r=Math.round(s(t)),n=Math.round(s(i)),o=[],a=e**r,l=(e**n-a)/h;for(let s=1;s<=h;s+=1){const e=a+l*s;e>t&&e<i&&o.push(e)}return o}},Dc=le({type:"numeric-ticks",cursorFormatter:void 0,extremeTickStyle:new cc,majorTickStyle:new cc,minorTickStyle:new cc,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0});class Bc extends Dc{Sr(t){const i=this.formattingOffset,s=this.get("extremeFormattingFunction")||("logarithmic"===t.type?Bn(!0,t.base):Dn.Numeric),e=this.get("majorFormattingFunction")||("logarithmic"===t.type?Bn(!0,t.base):Dn.Numeric),h=this.get("minorFormattingFunction")||("logarithmic"===t.type?Bn(!0,t.base):Dn.Numeric),r=[],n=[];this.extremeTickStyle!==dc&&r.push({_h:"Extreme ticks",Er:this.extremeTickStyle,Or:void 0===i?s:(t,e,h)=>s(i+t,e,h),hn:$o,Sh:!0,Wr:!0}),n.push({_h:"Major ticks",um:0,Er:this.majorTickStyle,Or:void 0===i?e:(t,s,h)=>e(i+t,s,h),hn:"logarithmic"===t.type?Pc(t.base,!0):Cc(0,!0),Zh:"logarithmic"===t.type?void 0:{Vr:Tc},rn:void 0}),this.minorTickStyle!==dc&&n.push({_h:"Minor ticks",um:1,Er:this.minorTickStyle,Or:void 0===i?h:(t,s,e)=>h(i+t,s,e),hn:"logarithmic"===t.type?Pc(t.base,!1):Cc(1,!1),Zh:"logarithmic"===t.type?{Vr:Ic}:{Vr:Fc},rn:50});const o=this.cursorFormatter?this.cursorFormatter:Dn.Numeric;return{Ah:r,wh:n,xh:void 0===i?o:(t,s,e)=>o(i+t,s,e),Mr:1e-9,_r:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if("function"==typeof t){const i=this.get("extremeTickStyle");return i!==dc?this.set("extremeTickStyle",t(i)):this}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return i!==dc?this.set("minorTickStyle",t(i)):this}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations((i=>i.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const Oc=1e6,Lc=le({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new cc,minorTickStyle:new cc,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),Ec=36e5,Rc=6e4,zc=1e3,Vc=1e-6,Nc=(t,i)=>{const s=i-t;return s>=864e5?"MajorHours12":s>=Ec?"MajorHours":s>=6e5?"MajorMinutes15":s>=6e4?"MajorMinutes":s>=1e4?"MajorSeconds15":s>=zc?"MajorSeconds":s>=100?"MajorMilliseconds100":s>=10?"MajorMilliseconds10":s>=1?"MajorMilliseconds":s>=.1?"MajorMicroseconds100":s>=.01?"MajorMicroseconds10":s>=.001?"MajorMicroseconds":s<=.001?"MajorNanoseconds100":"Unknown"},Gc={hhmmss:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/Ec);i%=Ec;const h=Math.floor(i/Rc);i%=Rc;const r=Math.floor(i/zc);return`${s}${pr(e,2)}:${pr(h,2)}:${pr(r,2)}`},hhmmssmmm:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/Ec);i%=Ec;const h=Math.floor(i/Rc);i%=Rc;const r=Math.floor(i/zc);i%=zc;const n=Math.floor(i/1);return`${s}${pr(e,2)}:${pr(h,2)}:${pr(r,2)}.${pr(n,3)}`},hhmmssmmmuuu:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/Ec),h=Math.floor(i/Rc)%60,r=Math.floor(i/zc)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${s}${pr(e,2)}:${pr(h,2)}:${pr(r,2)}.${pr(n,3)}${o}`},hhmmssmmmuuunnn:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/Ec),h=Math.floor(i/Rc)%60,r=Math.floor(i/zc)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${s}${pr(e,2)}:${pr(h,2)}:${pr(r,2)}.${pr(n,3)}${o}`}},Wc={MajorHours12:{major:{format:Gc.hhmmss,getKeyValues:(t,i,s,e)=>{const h=432e5;return t=Math.floor(t/(4*h))*h*4,Xo(t,i,h,void 0,Oc)},fitKeyValues:Ko({ignore:"first"},2,4)},minor:{format:Gc.hhmmss,getKeyValues:(t,i,s,e)=>Yo(t,i,36e5,Oc),fitKeyValues:Ko({},2,3,4,6)},defaultValueFormatter:Gc.hhmmss},MajorHours:{major:{format:Gc.hhmmss,getKeyValues:(t,i,s,e)=>{const h=Ec;return t=Math.floor(t/(12*h))*h*12,Xo(t,i,h,void 0,Oc)},fitKeyValues:Ko({ignore:"first"},2,6,12)},minor:{format:Gc.hhmmss,getKeyValues:(t,i,s,e)=>Yo(t,i,3e5,Oc),fitKeyValues:Ko({},2,4,6)},defaultValueFormatter:Gc.hhmmss},MajorMinutes15:{major:{format:Gc.hhmmss,getKeyValues:(t,i,s,e)=>(t=Math.floor(t/Ec)*Ec,Xo(t,i,9e5,void 0,Oc)),fitKeyValues:Ko({ignore:"first"},2)},minor:{format:Gc.hhmmss,getKeyValues:(t,i,s,e)=>Yo(t,i,6e4,Oc),fitKeyValues:Ko({},3,5)},defaultValueFormatter:Gc.hhmmss},MajorMinutes:{major:{format:Gc.hhmmss,getKeyValues:(t,i,s,e)=>{const h=Rc;return t=Math.floor(t/6e5)*h*10,Xo(t,i,h,void 0,Oc)},fitKeyValues:Ko({ignore:"first"},2,5)},minor:{format:Gc.hhmmss,getKeyValues:(t,i,s,e)=>Yo(t,i,5e3,Oc),fitKeyValues:Ko({},2,3,4,6)},defaultValueFormatter:Gc.hhmmss},MajorSeconds15:{major:{format:Gc.hhmmss,getKeyValues:(t,i,s,e)=>{const h=15e3;return t=Math.floor(t/6e4)*h*4,Xo(t,i,h,void 0,Oc)},fitKeyValues:Ko({ignore:"first"},2,4)},minor:{format:Gc.hhmmss,getKeyValues:(t,i,s,e)=>Yo(t,i,1e3,Oc),fitKeyValues:Ko({},3,5)},defaultValueFormatter:Gc.hhmmss},MajorSeconds:{major:{format:Gc.hhmmssmmm,getKeyValues:(t,i,s,e)=>{const h=zc;return t=Math.floor(t/1e4)*h*10,Xo(t,i,h,void 0,Oc)},fitKeyValues:Ko({ignore:"first"},2,5)},minor:{format:Gc.hhmmssmmm,getKeyValues:(t,i,s,e)=>Yo(t,i,100,Oc),fitKeyValues:Ko({},2,3,5)},defaultValueFormatter:Gc.hhmmssmmm},MajorMilliseconds100:{major:{format:Gc.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=100*Math.floor(t/1e3)*10,Xo(t,i,100,void 0,Oc)),fitKeyValues:Ko({ignore:"first"},2,5)},minor:{format:Gc.hhmmssmmm,getKeyValues:(t,i,s,e)=>Yo(t,i,10,Oc),fitKeyValues:Ko({},2,3,5)},defaultValueFormatter:Gc.hhmmssmmm},MajorMilliseconds10:{major:{format:Gc.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=10*Math.floor(t/100)*10,Xo(t,i,10,void 0,Oc)),fitKeyValues:Ko({ignore:"first"},2,5)},minor:{format:Gc.hhmmssmmm,getKeyValues:(t,i,s,e)=>Yo(t,i,1,Oc),fitKeyValues:Ko({},2,3,5)},defaultValueFormatter:Gc.hhmmssmmm},MajorMilliseconds:{major:{format:Gc.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=1*Math.floor(t/10)*10,Xo(t,i,1,void 0,Oc)),fitKeyValues:Ko({ignore:"first"},2,5)},minor:{format:Gc.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Yo(t,i,.1,Oc),fitKeyValues:Ko({},2)},defaultValueFormatter:Gc.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:Gc.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=.1*Math.floor(t/1)*10,Xo(t,i,.1,void 0,Oc)),fitKeyValues:Ko({ignore:"first"},2,5)},minor:{format:Gc.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Yo(t,i,.01,Oc),fitKeyValues:Ko({},2,3,5)},defaultValueFormatter:Gc.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:Gc.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>{const h=.01;return t=Math.floor(t/.1)*h*10,Xo(t,i,h,void 0,Oc)},fitKeyValues:Ko({ignore:"first"},2,5)},minor:{format:Gc.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Yo(t,i,.001,Oc),fitKeyValues:Ko({},2,3,5)},defaultValueFormatter:Gc.hhmmssmmmuuu},MajorMicroseconds:{major:{format:Gc.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=.001;return t=Math.floor(t/.01)*h*10,Xo(t,i,h,void 0,Oc)},fitKeyValues:Ko({ignore:"first"},2,5)},minor:{format:Gc.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>Yo(t,i,100*Vc,Oc),fitKeyValues:Ko({},2,3,5)},defaultValueFormatter:Gc.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:Gc.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=100*Vc;return t=Math.floor(t/.001)*h*10,Xo(t,i,h,void 0,Oc)},fitKeyValues:Ko({ignore:"first"},2,5)},minor:{format:Gc.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>Yo(t,i,10*Vc,Oc),fitKeyValues:Ko({},2,3,5)},defaultValueFormatter:Gc.hhmmssmmmuuunnn},Unknown:{major:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},minor:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},defaultValueFormatter:(t,i,s)=>""}};class Hc extends Lc{Sr(t){const i=this.timeOrigin||0,s=[{_h:"Major ticks",um:0,Er:this.majorTickStyle,Or:this.majorFormattingFunction?this.majorFormattingFunction:(t,s,e)=>{const h=Nc(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,Wc[h].major.format)(t+i,s,e)},hn:(t,i,s,e)=>{const h=Nc(s,e);return(0,Wc[h].major.getKeyValues)(t,i,s,e)},Zh:{Vr:(t,i,s,e,h,r)=>{const n=Nc(h,r),o=Wc[n].major.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},rn:void 0}];return fc(this.minorTickStyle)&&s.push({_h:"Minor ticks",um:1,Er:this.minorTickStyle,Or:this.minorFormattingFunction?this.minorFormattingFunction:(t,s,e)=>{const h=Nc(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,Wc[h].minor.format)(t+i,s,e)},hn:(t,i,s,e)=>{const h=Nc(s,e);return(0,Wc[h].minor.getKeyValues)(t,i,s,e)},Zh:{Vr:(t,i,s,e,h,r)=>{const n=Nc(h,r),o=Wc[n].minor.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},rn:void 0}),{Ah:[],wh:s,xh:this.cursorFormatter||((t,s,e)=>{const h=Nc(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return Wc[h].defaultValueFormatter(t+i,s,e)}),Mr:1e-4,_r:864e6}}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return i!==dc?this.set("minorTickStyle",t(i)):this}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations((i=>i.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const Uc=(t,i,s="image/png",e)=>{i+=`.${s.slice(s.indexOf("image/")+6)}`;const h=t.captureFrame(s,e);if("image/png"!==s&&h.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${s}\nCheck support table for HTMLCanvasElement.toDataURL`);if(Mh.navigator.msSaveBlob)Mh.navigator.msSaveBlob(h,i);else{const t=Mh.document.createElement("a");Mh.document.body.appendChild(t);const s=Mh.URL.createObjectURL(h);t.href=s,t.download=i,t.click(),setTimeout((()=>{Mh.URL.revokeObjectURL(s),Mh.document.body.removeChild(t)}),0)}},jc=(i,s,e,h,r,n)=>{const o=i.if(s,e,h,r,n,!0);return o.setDraggingMode(t.UIDraggingModes.draggable),o},$c=(t,i)=>{if("relative"===t)return i;if(t instanceof En)return t;const s=t.x instanceof ta?t.x.Jt:t.x.x,e=t.y instanceof ta?t.y.Jt:t.y.y;return Vn(s,e)},Yc=(t,i,s,e,h)=>{if(s){const r=t,n=i,o=ac(n)?n:Wn(n)?e:void 0;if(o&&Nn(s)){const t=uh(r,o,h.Jt);return h.Zo({engineX:t.x,engineY:t.y})}if(o&&Wn(s))return uh(r,o,e);if(o&&ac(s))return uh(r,o,s)}else{const s=t;if(Wn(i)){const t=h.Xo(s);return uh({x:t.engineX,y:t.engineY},h.Jt,e)}if(ac(i)){const t=i,e=h.Xo(s);return uh({x:e.engineX,y:e.engineY},h.Jt,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class Xc{constructor(t,i,s,h,r,n,o,a){this.coordsRelative="relative",this.coordsClient="client",this.pm=[],this.Sm=[],this.At=new $e,this.vm=void 0,this.bm=void 0,this.xm=void 0,this.di=c(0,0,0,0),this.fs=!1,this.Mm=()=>{this._m=!0,this.Am.te()},this.wm=t=>i=>{const s=this.pm.indexOf(i);-1!==s&&this.pm.splice(s,1),this.$s.te(),t.Pt()},this.km=t=>{const i=this.Sm.indexOf(t);-1!==i&&this.Sm.splice(i,1),this.$s.te()},this._m=!0,this.Yd=t,this.Cm=s,this.Am=h,this.removePanel=r,this.Rs=i.$s.Rs;const l=i.$s.Ci();if(this.uiScale=s.d2({scaleXYConstructor:Rn}).es(0,100).hs(0,100).Gt(l),this.pixelScale=s.d2({scaleXYConstructor:Rn}).es(0,this.uiScale.x.getCellSize()).hs(0,this.uiScale.y.getCellSize()).Gt(l),this.engine=i.$s.Tm,this.$s=i.$s.Fm,this.Ns=this.$s.Ns.Gs(this,{}),this.Im=()=>i.Pm("unidentified ui"),this.Dm=i.Bm(),this.Om=this.Am.hh(this.uiScale).oh(e(0,0)).Gt(e(100,100)).eh(n).sh(o).setMouseMoveEventHandler(((t,i)=>this.At.emit("mouseMovePanelBackground",this,i))).setMouseEnterEventHandler(((t,i)=>this.At.emit("mouseEnterPanelBackground",this,i))).setMouseLeaveEventHandler(((t,i)=>this.At.emit("mouseLeavePanelBackground",this,i))).setMouseDownEventHandler(((t,i)=>this.At.emit("mouseDownPanelBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.At.emit("mouseUpPanelBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.At.emit("mouseClickPanelBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.At.emit("mouseDoubleClickPanelBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.At.emit("mouseWheelPanelBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.At.emit("mouseDragStartPanelBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.At.emit("mouseDragPanelBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.At.emit("mouseDragStopPanelBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>this.At.emit("touchStartPanelBackground",this,i))).setTouchMoveEventHandler(((t,i)=>this.At.emit("touchMovePanelBackground",this,i))).setTouchEndEventHandler(((t,i)=>this.At.emit("touchEndPanelBackground",this,i))),a){const t=a.on(this.Mm);this.Lm=()=>a.off(t)}else{const t=i.$s.jo(this.Mm);this.Em=i.$s.$o.bind(i.$s,t)}this.vm=r}getTheme(){return this.Rs}getSizePixels(){return this.pixelScale.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.Om.eh(t),this.Am.te(),this}getBackgroundFillStyle(){return this.Om.ur()}setBackgroundStrokeStyle(t){return this.Om.sh(t),this.Am.te(),this}getBackgroundStrokeStyle(){return this.Om.Co()}translateCoordinate(t,i,s){return Yc(t,i,s,this.pixelScale,this.$s)}Rm(t){return this.pm.push(t),this.$s.te(),t}zm(t){return this.Sm.push(t),this.$s.te(),t}addUIElement(t=au,i=this.uiScale){i=$c(i,this.pixelScale);const s=this.Im();return this.Rm(jc(t,s,this.uiScale,i,this.wm(s),this.Rs))}addLegendBox(i=bu,s=this.uiScale){s=$c(s,this.pixelScale);const e=this.zm(jc(i,this.Dm,this.uiScale,s,this.km,this.Rs));return e.setDraggingMode(t.UIDraggingModes.notDraggable),void 0!==s&&s!==this.uiScale||(void 0===i||"vertical"===i.getAlignment()?e.setOrigin(Fo.RightCenter).setPosition({x:100,y:50}):e.setOrigin(Fo.CenterBottom).setPosition(this.uiScale.Ei({x:50,y:0},{x:0,y:3}))),e}dispose(){return this.fs||(this.fs=!0,this.Em&&this.Em(),this.Lm&&this.Lm(),Zc(this.uiScale),Zc(this.pixelScale),this.bm&&this.bm(),this.Am.Pt(),this.Dm.Pt(),this.pm.slice().forEach((t=>{t.dispose()})),this.Sm.slice().forEach((t=>{t.dispose()})),this.$s.te(),this.vm&&this.vm(this),this.At.emit("dispose",this)),this}onDispose(t){return this.At.on("dispose",t)}offDispose(t){return this.At.off(t,"dispose")}saveToFile(t,i,s){return Uc(this.engine,t,i,s),this}Qa(t){this.di=t,this.Mm()}Rt(){return this.pixelScale.Rt(),this.uiScale.Rt(),this}zt(){return this.pixelScale.zt(),this.uiScale.zt(),this}rh(t){if(this._m){const t=this.Am.$s.Ci(),i=t.x,s=t.y;this.uiScale.Gt(i,s),this.pixelScale.Gt(i,s);const e=[this.di.left,this.di.right],h=[this.di.bottom,this.di.top];this.uiScale.ts(e),this.uiScale.ss(h);const r=this.uiScale.getInnerIntervalPixels();this.pixelScale.es(0,r.x).ts(e).hs(0,r.y).ss(h),this.At.emit("resize",this,r.x,r.y,i,s)}this._m=!1}Vm(){for(let t=0;t<this.pm.length;t+=1)this.pm[t].le().rh();for(let t=0;t<this.Sm.length;t+=1)this.Sm[t].le().rh();this.xm&&this.xm()}Nm(t,i){if(t){const s=t(i);this.onResize(s.le.bind(s)),this.bm=s.Pt.bind(s),this.xm=s.le.bind(s)}}onBackgroundMouseEnter(t){return this.At.on("mouseEnterPanelBackground",t)}offBackgroundMouseEnter(t){return this.At.off(t,"mouseEnterPanelBackground")}onBackgroundMouseMove(t){return this.At.on("mouseMovePanelBackground",t)}offBackgroundMouseMove(t){return this.At.off(t,"mouseMovePanelBackground")}onBackgroundMouseLeave(t){return this.At.on("mouseLeavePanelBackground",t)}offBackgroundMouseLeave(t){return this.At.off(t,"mouseLeavePanelBackground")}onBackgroundMouseDown(t){return this.At.on("mouseDownPanelBackground",t)}offBackgroundMouseDown(t){return this.At.off(t,"mouseDownPanelBackground")}onBackgroundMouseUp(t){return this.At.on("mouseUpPanelBackground",t)}offBackgroundMouseUp(t){return this.At.off(t,"mouseUpPanelBackground")}onBackgroundMouseClick(t){return this.At.on("mouseClickPanelBackground",t)}offBackgroundMouseClick(t){return this.At.off(t,"mouseClickPanelBackground")}onBackgroundMouseDoubleClick(t){return this.At.on("mouseDoubleClickPanelBackground",t)}offBackgroundMouseDoubleClick(t){return this.At.off(t,"mouseDoubleClickPanelBackground")}onBackgroundMouseDragStart(t){return this.At.on("mouseDragStartPanelBackground",t)}offBackgroundMouseDragStart(t){return this.At.off(t,"mouseDragStartPanelBackground")}onBackgroundMouseDrag(t){return this.At.on("mouseDragPanelBackground",t)}offBackgroundMouseDrag(t){return this.At.off(t,"mouseDragPanelBackground")}onBackgroundMouseDragStop(t){return this.At.on("mouseDragStopPanelBackground",t)}offBackgroundMouseDragStop(t){return this.At.off(t,"mouseDragStopPanelBackground")}onBackgroundMouseWheel(t){return this.At.on("mouseWheelPanelBackground",t)}offBackgroundMouseWheel(t){return this.At.off(t,"mouseWheelPanelBackground")}onBackgroundTouchStart(t){return this.At.on("touchStartPanelBackground",t)}offBackgroundMouseTouchStart(t){return this.At.off(t,"touchStartPanelBackground")}onBackgroundTouchMove(t){return this.At.on("touchMovePanelBackground",t)}offBackgroundTouchMove(t){return this.At.off(t,"touchMovePanelBackground")}onBackgroundTouchEnd(t){return this.At.on("touchEndPanelBackground",t)}offBackgroundTouchEnd(t){return this.At.off(t,"touchEndPanelBackground")}onResize(t){return this.At.on("resize",t)}offResize(t){return this.At.off(t,"resize")}}const Zc=t=>{t.xi&&t.xi()};class Kc extends Xc{constructor(t,i,s,e,h,r){super(t,i,s,i.Gm("uipanel bg",0),e,i.$s.Rs.uiPanelBackgroundFillStyle,i.$s.Rs.uiPanelBackgroundStrokeStyle,r),this.Nm(h,this.pixelScale)}setMinimumSize(t){return this.wf=t,this.$s.te(),this}getMinimumSize(){return this.wf}rh(t){super.rh(t),super.Vm()}}const qc=c(10,10,10,10);class Jc extends Xc{constructor(t,i,s,h,r,n,o,a,l,u){super(t,i,s,h,r,n,o,u),this.Wm={},this.Ba=qc,this.Bh=!0,this.Hm=i.Um("chart internal ui",0),this.jm=this.Hm.tn(this.uiScale).lr("Chart").oh(e(50,100)).Ja(e(0,1)).dr(a).eh(l).setMouseInteractions(!1),this.$m=this.Ns.Qg([this.jm]).Qs(this.Rs.effectsText)}setAnimationsEnabled(t){return this.Bh=t,this}getAnimationsEnabled(){return this.Bh}setTitle(t){return this.jm.lr(t),this.$s.te(),this}getTitle(){return this.jm.nr()}getTitleSize(){return this.jm.le().cf()}setTitleFillStyle(t){return this.jm.eh(t),this.Mm(),this}getTitleFillStyle(){return this.jm.ur()}setTitleFont(t){return this.jm.dr(t),this.Mm(),this}getTitleFont(){return this.jm.cr()}setTitleRotation(t){return this.jm.gr(t),this.$s.te(),this}getTitleRotation(){return this.jm.mr()}setTitleEffect(t){return this.$m.Qs(t),this.$s.te(),this}getTitleEffect(){return this.$m.ie()}setTitleMargin(t){var i,s;return this.Wm="object"==typeof t?this.Wm?(i=this.Wm,{left:void 0!==(s=t).left?s.left:i.left,top:void 0!==s.top?s.top:i.top,right:void 0!==s.right?s.right:i.right,bottom:void 0!==s.bottom?s.bottom:i.bottom}):t:{left:t,top:t,right:t,bottom:t},this.Mm(),this}getTitleMargin(){return this.Wm}setPadding(t){return this.Ba="object"==typeof t?d(this.Ba,t):{left:t,top:t,right:t,bottom:t},this.Mm(),this}getPadding(){return this.Ba}Ym(t){const i=t.Xm(),s=null==i?void 0:i.height,e=null==i?void 0:i.width;if(void 0!==s&&void 0!==e)return{x:s/2,y:e/2}}dispose(){return super.dispose(),this.Hm.Pt(),this}}const Qc={Zm:(t,i)=>t.ur()!==Ie&&0!==t.nr().length&&t.getVisible()?t.le().cf().y:0,Km(t,i){t.oh(e(50,100)).Qa({top:void 0!==i.top?i.top:10,right:i.right||0,left:i.left||0,bottom:i.bottom||0})}};var tf;t.SliceLabelIndices=void 0,(tf=t.SliceLabelIndices||(t.SliceLabelIndices={}))[tf.LabelsInsideSlices=0]="LabelsInsideSlices",tf[tf.LabelsOnSides=1]="LabelsOnSides";const sf={SortByName:(t,i)=>t.getName().localeCompare(i.getName(),void 0,{numeric:!0}),SortByValueAscending:(t,i)=>t.getAnimatedValue()-i.getAnimatedValue(),SortByValueDescending:(t,i)=>i.getAnimatedValue()-t.getAnimatedValue(),None:()=>0},ef={Name:t=>`${t.getName()}`,NamePlusValue:t=>`${t.getName()}: ${Math.round(t.getAnimatedValue())}`,NamePlusRelativeValue:(t,i)=>`${t.getName()}: ${(100*i).toFixed(2)}%`};class hf extends jn{constructor(){super(...arguments),this.dt="Slice",this.u=0}}const rf=(t,i)=>{ir(i),t.setExploded(!t.getExploded())};class nf extends hf{}class of extends nf{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.qm=!1,this.Jm=Ie,this.Qm=Ie,this.ty=this.u,this.iy=this.qm?1:0,this.sy=this.getVisible(),this.ey=Ze((()=>this.Ls.$s.te())),this.hy=Ze((()=>this.Ls.$s.te())),this.ny=()=>{this.oy=void 0},this.ly=()=>{this.uy=void 0},this.index=t,this.Ls=e,this.scale=h,this.Es=r,this.gy=i.df(h).Ys(this.getHighlight()),this.Xs(this.gy),this._h=s.tn(h).Ys(this.getHighlight()),this.Xs(this._h,{isText:!0}),this.onMouseClick(rf),this.onTouchEnd(rf)}setValue(t){return this.Ls.getAnimationsEnabled()?this.sy&&this.my(this.ty,t):this.ty=t,this.u=t,this.Ls.$s.te(),this}getValue(){return this.u}setExploded(t){if(t&&!1===this.Ls.getMultipleSliceExplosion()){const t=this.Ls.getSlices();for(let i=0;i<t.length;i+=1)t[i]!==this&&t[i].getExploded()&&t[i].setExploded(!1)}return this.Ls.getAnimationsEnabled()?(this.uy&&this.uy.finish(),this.uy=this.hy(300,Ye.ease)([[this.iy,t?1:0]],(([t])=>{this.iy=t,this.Ls.$s.te()})),this.uy.onEveryAnimationEnd(this.ly),this.qm=!this.qm):!1!==this.Ls.getMultipleSliceExplosion()||t?(this.iy=this.qm?0:1,this.qm=!this.qm):(this.iy=0,this.qm=!this.qm),this.Ls.$s.te(),this}getExploded(){return this.qm}setVisible(t){return this.sy=t,!1===t?this.Ls.getAnimationsEnabled()&&this.ty>0?(this.oy&&(this.oy.finish(!1),this.oy=void 0),this.my(this.ty,0,(()=>super.setVisible(!1)))):(this.ty=0,super.setVisible(!1)):this.Ls.getAnimationsEnabled()?(this.oy&&(this.oy.finish(!1),this.oy=void 0),super.setVisible(!0),this.my(this.ty,this.u)):(this.ty=this.u,super.setVisible(!0)),this}my(t,i,s){this.oy=this.ey(300,Ye.ease)([[t,i]],(([t])=>{this.ty=t,this.Ls.$s.te()})),this.oy.onEveryAnimationEnd(this.ny),s&&this.oy.onAnimationEnd(s)}setStyle(t,i,s,e){this.Jm=t,this.Qm=s,this.gy.eh(this.Jm).sh(i),this._h.eh(this.Qm).dr(e);for(let t=0;t<this.ps.length;t+=1)this.styleAttachedEntry(this.ps[t])}getAnimatedValue(){return this.ty}getAnimatedExplosion(){return this.iy}attach(t,i=!0){return super.attach(t,i),this.styleAttachedEntry(t),this}styleAttachedEntry(t){gr(t,this.Rs,{fill:this.Jm,stroke:this.gy.Co()})}}const af=(t,i,s)=>an(i,on(vn(.5*(t.gu()+t.Xi())*Math.PI/180),s)),lf=(t,i,s,e,h,r)=>{const n=t.length;let o=90;for(let a=0;a<n;a+=1){const l=t[a],u=o-360*i[a],c=l.getAnimatedExplosion();if(0===c||1===n)l.gy.oh(s);else{const t=an(s,on(vn(.5*(o+u)*Math.PI/180),r*c));l.gy.oh(t)}l.gy.bu(o).yh(u).Mu(e)._u(e).Au(h),o=u}},uf=t=>{const i=t.getSlices();for(let t=0;t<i.length;t+=1)i[t].setExploded(!1)};class cf extends Jc{constructor(t,i,s,e,h,r,n){super(t,i,s,i.Gm("pieChart bg",0),e,i.$s.Rs.pieChartBackgroundFillStyle,i.$s.Rs.pieChartBackgroundStrokeStyle,i.$s.Rs.pieChartTitleFont,i.$s.Rs.pieChartTitleFillStyle,r),this.yy=[],this.py=sf.SortByName,this.ou=0,this.Sy=this.Rs.pieChartSliceFillStylePalette,this.vy=this.Rs.pieChartSliceStrokeStyle,this.by=!0,this.xy=this.Rs.pieChartSliceLabelFont,this.My=this.Rs.pieChartSliceLabelFillStyle,this._y=0,this.Ay=!1,this.wy=20,this.ky=!0,this.Cy=!0,this.Ty=t=>{const i=this.yy.indexOf(t);i>=0&&(this.yy.splice(i,1),this.Fy())},this.Yd.oo||this.Yd.no||this.$s.ho(7),this.Iy=i.Py("pieChart bottom",0),this.Dy=i.Py("pieChart top",1),this.jm.lr("Pie Chart"),this.Nm(h,this.pixelScale),this.onBackgroundMouseDoubleClick(uf);const o=Xn(new Zn(uf));this.onBackgroundTouchStart(o.onTouchStart),this.onBackgroundTouchMove(o.onTouchMove),this.onBackgroundTouchEnd(o.onTouchEnd),n&&this.setAnimationsEnabled(!1)}addSlice(t,i){const s=new of(this._y,this.Iy,this.Dy,this,this.pixelScale,this.Ty,this.Rs,this.$s.Ns);this._y+=1,s.setName(t);const e=this.Bh;return this.Bh=!1,s.setValue(i),this.Bh=e,s.setEffect(this.ky),this.By(s),this.yy.push(s),this.Fy(),s.setHighlightOnHover(this.by),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.yy}setMultipleSliceExplosion(t){return this.Ay=t,this}getMultipleSliceExplosion(){return this.Ay}setInnerRadius(t){return this.ou=t,this.$s.te(),this}getInnerRadius(){return this.ou}setSliceExplosionOffset(t){return this.wy=t,this.$s.te(),this}getSliceExplosionOffset(){return this.wy}setLUT(t){return this.Wf=t,this.$s.te(),this}setSliceFillStyle(t){this.Sy=t;for(let t=0;t<this.yy.length;t+=1)this.By(this.yy[t]);return this.$s.te(),this}getSliceFillStyle(){return this.Sy}setSliceStrokeStyle(t){this.vy="function"==typeof t?t(this.vy):t;for(let t=0;t<this.yy.length;t+=1)this.By(this.yy[t]);return this.$s.te(),this}getSliceStrokeStyle(){return this.vy}setSliceEffect(t){return this.ky=t,this.yy.forEach((i=>i.Ns.Hs.Qs(t))),this.$s.te(),this}getSliceEffect(){return this.ky}setSliceSorter(t){return this.py=t,this.yy=this.yy.sort(this.py),this.$s.te(),this}getSliceSorter(){return this.py}setLabelFillStyle(t){this.My="function"==typeof t?t(this.My):t;for(let t=0;t<this.yy.length;t+=1)this.By(this.yy[t]);return this.$s.te(),this}getLabelFillStyle(){return this.My}setLabelFont(t){this.xy="function"==typeof t?t(this.xy):t;for(let t=0;t<this.yy.length;t+=1)this.By(this.yy[t]);return this.$s.te(),this}getLabelFont(){return this.xy}setLabelEffect(t){return this.Cy=t,this.yy.forEach((i=>i.Ns.Ws.Qs(t))),this.$s.te(),this}getLabelEffect(){return this.Cy}setLabelFormatter(t){return this.Oy=t,this.$s.te(),this}getLabelFormatter(){return this.Oy}setSliceHighlightOnHover(t){return this.by=t,this.yy.forEach((i=>i.setHighlightOnHover(t))),this}rh(t){super.rh(t),Qc.Km(this.jm,this.Wm),super.Vm();const i=Qc.Zm(this.jm,this.Wm),s=e(this.pixelScale.x.getInnerInterval()-(this.Ba.left+this.Ba.right),this.pixelScale.y.getInnerInterval()-(this.Ba.bottom+this.Ba.top+i)),h=e(this.Ba.left+s.x/2,this.Ba.bottom+s.y/2);if(this.Wf){const t=this.Wf;this.yy.forEach((i=>{this.By(i,new Be({color:t.getColors(i.getAnimatedValue())}))}))}for(let t=0;t<this.yy.length;t+=1){const i=this.yy[t].getAnimatedValue()>0;this.yy[t].gy.setVisible(i),this.yy[t]._h.setVisible(i)}this.yy=this.yy.sort(this.py);const r=this.yy.filter((t=>t.getAnimatedValue()>0));let n=0;for(let t=0;t<r.length;t+=1)n+=r[t].getAnimatedValue();const o=[];for(let t=0;t<r.length;t+=1)o.push((a=r[t].getAnimatedValue())>0?a/n:0);var a;for(let t=0;t<r.length;t+=1){const i=r[t];i._h.lr(this.Oy(i,o[t])).le()}this.Ly(r,o,h,s)}By(t,i=this.Sy(t.index)){t.setStyle(i,this.vy,this.My,this.xy)}Fy(){this.yy=this.yy.sort(this.py),this.$s.te()}qf(){return this.yy}dispose(){return super.dispose(),this.Dy.Pt(),this.Iy.Pt(),this.yy.slice().forEach((t=>t.dispose())),this}}const ff={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}},df=(...t)=>{const i=[];return t.forEach((t=>{var s;t&&"object"==typeof(s=t)&&s&&"pattern"in s&&i.push({type:"DataPattern",args:t})})),i};var gf;!function(t){t[t.TopRight=0]="TopRight",t[t.TopLeft=1]="TopLeft",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight"}(gf||(gf={}));const mf=(t,i,s,h,r,n,o,a,l)=>{if(0===t.length)return;const u=h.x+i*r.x*.5,c=1===s?Math.max:Math.min;let f;for(let r=0;r<t.length;r+=1){const d=t[r];let g;f&&(g=f._h.ja().y+s*(f._h.Ci().y+10));const m=af(d.gy,h,n+a+o+l).y,y=void 0===g?m:c(m,g);d._h.oh(e(u,y)).Xa(i).Ka(0),f=d}},yf=(t,i,s,h,r,n)=>{const o=r*t.getAnimatedExplosion(),a=t.gy,l=t._h,u=af(a,s,h+n+o),c=mn(l.ja().y,u,s),f=e(l.ja().x-i*(n+l.Ci().x),c.y);return-1===i&&c.x<f.x||1===i&&c.x>f.x?[u,f]:[u,c,f]},pf=(...t)=>i=>{const s=(t=>{let i=.5*(t.gy.gu()+t.gy.Xi());for(i%=360;i<0;)i+=360;return i<=90?gf.TopRight:i<180?gf.TopLeft:i<270?gf.BottomLeft:gf.BottomRight})(i);return t.includes(s)},Sf=pf(gf.BottomLeft,gf.TopLeft),vf=pf(gf.BottomRight,gf.TopRight),bf=pf(gf.TopLeft,gf.TopRight),xf=pf(gf.BottomLeft,gf.BottomRight);class Mf extends cf{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.Oy=ef.NamePlusValue,this.Ey=5,this.Ry=5,this.zy=[],this.Vy=this.Rs.pieChartConnectorStrokeStyle,this.setPadding({bottom:50})}setLabelConnectorStyle(t){this.Vy=t;for(let t=0;t<this.zy.length;t+=1)this.zy[t].gh(this.Vy);return this.$s.te(),this}getLabelConnectorStyle(){return this.Vy}setLabelConnectorLength(t){return this.Ry=t,this.$s.te(),this}getLabelConnectorLength(){return this.Ry}setLabelConnectorGap(t){return this.Ey=t,this.$s.te(),this}getLabelConnectorGap(){return this.Ey}Ly(t,i,s,e){const h=this.wy,r=this.Ey,n=this.Ry,o=this.xy.getSize();let a=0;if(1===t.length)a=t[0]._h.Ci().x;else for(let i=0;i<t.length;i+=1)a=Math.max(a,t[1]._h.Ci().x);const l=Math.max(0,.5*Math.min(e.x-2*a,e.y-2*o)-(r+h+n));lf(t,i,s,l,this.ou,h);const u=t.filter(Sf),c=t.filter(vf),f=u.filter(bf),d=u.filter(xf).reverse(),g=c.filter(bf).reverse(),m=c.filter(xf);mf(d,-1,-1,s,e,l,h,r,n),mf(f,-1,1,s,e,l,h,r,n),mf(m,1,-1,s,e,l,h,r,n),mf(g,1,1,s,e,l,h,r,n);for(let t=0;t<this.zy.length;t+=1)this.zy[t].setVisible(!1);for(let t=0;t<u.length;t+=1)u[t].getVisible()&&this.Ny(yf(u[t],-1,s,l,h,r));for(let t=0;t<c.length;t+=1)c[t].getVisible()&&this.Ny(yf(c[t],1,s,l,h,r))}getMinimumSize(){return e(500,300)}Ny(t){let i;for(let t=0;t<this.zy.length;t+=1)if(!this.zy[t].getVisible()){i=this.zy[t].setVisible(!0);break}void 0===i&&(i=this.Dy.Gy(this.pixelScale,void 0,[ff.InternalUI]).gh(this.Vy),this.zy.push(i)),i.Al()._l(t)}}class _f extends cf{constructor(){super(...arguments),this.Oy=ef.Name,this.Wy=.5}Ly(t,i,s,e){const h=this.wy,r=Math.max(0,.5*Math.min(e.x,e.y)-h);lf(t,i,s,r,this.ou,h);for(let i=0;i<t.length;i+=1){const e=t[i],n=e.gy,o=e._h,a=this.ou/100,l=((1-a)*this.Wy+a)*r+e.getAnimatedExplosion()*h,u=af(n,s,l);o.oh(u).Xa(0).Ka(0)}}getMinimumSize(){return e(200,200)}setLabelPosition(t){return this.Wy=t,this.$s.te(),this}getLabelPosition(){return this.Wy}}const Af={LabelsOnSides:Mf,LabelsInsideSlices:_f},wf=t=>{if(to(t)){const i=t.getThickness(),s=t.getFillStyle();if(Oe(s))return 1===i?aa:new ua({size:i,fillStyle:s,shape:"sphere"})}return aa};class kf{constructor(t,i,s,e){this.Hy=[],this.Uy=t,this.jy=i,this.$y=s,this.Yy=e}Xy(){this.Hy.forEach((t=>t.Al())),this.$y&&this.$y();const t=[];return{add:(i,s)=>{t.push({instanceUniqueProperties:i,instanceSharedProperties:s})},finishPlot:()=>{const i=[];t.forEach((t=>{const s=i.find((i=>((t,i)=>{const s=Object.keys(t);for(const e of s)if(t[e]!==i[e])return!1;return!0})(i.sharedProperties,t.instanceSharedProperties)));s?s.instances.push(t.instanceUniqueProperties):i.push({sharedProperties:t.instanceSharedProperties,instances:[t.instanceUniqueProperties]})}));const s=this.Hy.slice();i.forEach((t=>{let i=s.pop();i||(i=this.Uy(),this.Hy.push(i)),this.jy(i,t.instances,t.sharedProperties)})),s.forEach((t=>{t.dispose();const i=this.Hy.indexOf(t);i<0?br(0,(()=>{})):this.Hy.splice(i,1)})),this.Yy&&this.Yy(this.Hy)}}}Zy(){this.Hy.forEach((t=>{t.dispose()})),this.Hy.length=0}}class Cf{constructor(t){this.Ky=[],this.qy=t}Xy(){return this.Jy(),{add:()=>this.Qy(),finishPlot:()=>{this.tp()}}}Qy(){let t=this.Ky.find((t=>t.isFree));return t||(t={isFree:!1,shape:this.qy()},this.Ky.push(t)),t.isFree=!1,t.shape}Jy(){this.Ky.forEach((t=>{t.isFree=!0}))}tp(){this.Ky.filter((t=>t.isFree)).forEach((t=>{t.shape.dispose(),this.Ky.splice(this.Ky.indexOf(t),1)}))}Zy(){this.Ky.forEach((t=>t.shape.dispose())),this.Ky.length=0}}class Tf{constructor(t,i,s,e,h,r,n,o,a,l){this.At=new $e,this.u=0,this.ds=!0,this.fs=!1,this.te=t,this.ip=i,this.sp=s,this.ep=e,this.hp=h,this.rp=r,this.Of=n,this.np=o,this.op=a,this.ef=l}setValue(t){return t===this.u||(this.u=t,this.te(),this.At.emit("valueChange",this.u)),this}getValue(){return this.u}setTickStyle(t){return this.sp="function"==typeof t?t(this.sp):t,this.te(),this}getTickStyle(){return this.sp}setTickLength(t){return this.ep=t,this.te(),this}getTickLength(){return this.ep}setGridStrokeStyle(t){return this.hp="function"==typeof t?t(this.hp):t,this.te(),this}getGridStrokeStyle(){return this.hp}setTextPadding(t){return this.rp=t,this.te(),this}getTextPadding(){return this.rp}setTextRotation(t){return this.Of=t,this.te(),this}getTextRotation(){return this.Of}setTextFillStyle(t){return this.np="function"==typeof t?t(this.np):t,this.te(),this}getTextFillStyle(){return this.np}setTextFont(t){return this.op="function"==typeof t?t(this.op):t,this.te(),this}getTextFont(){return this.op}setTextFormatter(t){return this.ef=t,this.te(),this}onValueChange(t){return this.At.on("valueChange",t)}offValueChange(t){return this.At.off(t,"valueChange")}dispose(){return this.fs||(this.fs=!0,this.ip(),this.te(),this.At.emit("dispose",this)),this}onDispose(t){return this.At.on("dispose",t)}offDispose(t){return this.At.off(t,"dispose")}setVisible(t){const i=this.ds!==t;return this.ds=t,i&&(this.At.emit("visibleStateChanged",this,this.ds),this.te()),this}getVisible(){return this.ds}onVisibleStateChanged(t){return this.At.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.At.off(t,"visibleStateChanged")}}class Ff extends ta{constructor(t,i,s,e,h,r,n,o,a){super(t,i,s,e,o,{numeric:i.ap({x:t.$s.Rs.xAxis3DNumericTicks,y:t.$s.Rs.yAxis3DNumericTicks,z:t.$s.Rs.zAxis3DNumericTicks}),datetime:i.ap({x:t.$s.Rs.xAxis3DDateTimeTicks,y:t.$s.Rs.yAxis3DDateTimeTicks,z:t.$s.Rs.zAxis3DDateTimeTicks}),time:i.ap({x:t.$s.Rs.xAxis3DTimeTicks,y:t.$s.Rs.yAxis3DTimeTicks,z:t.$s.Rs.zAxis3DTimeTicks})},{type:"linear"}),this.ud=[],this.lp=()=>{},this.up=()=>{},this.cp=()=>{},this.fp=()=>{},this.chart=t,this.dp=h,this.gp=r,this.mp=n,this.yp=this.dp.Jt;const l=this.Qh.ap({x:this.Rs.xAxis3DStrokeStyle,y:this.Rs.yAxis3DStrokeStyle,z:this.Rs.zAxis3DStrokeStyle});this.pp=this.dp.Gy([ff.InternalUI]).gh(l).Sp(wf(l)).setMouseInteractions(!1),this.ar=this.gp.tn(this.mp).setMouseInteractions(!1).eh(i.ap({x:t.$s.Rs.xAxis3DTitleFillStyle,y:t.$s.Rs.yAxis3DTitleFillStyle,z:t.$s.Rs.zAxis3DTitleFillStyle})).dr(i.ap({x:t.$s.Rs.xAxis3DTitleFont,y:t.$s.Rs.yAxis3DTitleFont,z:t.$s.Rs.zAxis3DTitleFont})),this.vp=new Cf((()=>this.gp.tn(this.mp))),this.bp=new kf((()=>this.dp.lm().setMouseInteractions(!1)),((t,i,s)=>{t.Al().gh(s.lineStyle),i.forEach((({positions:i})=>t._l(i)))})),this.Ns=a,this.yr=this.Ns.Qg([this.ar]).Qs(e.effectsText),this.pp.setMouseEnterEventHandler(this.lp).setMouseLeaveEventHandler(this.up).setMouseDragEventHandler(this.cp).setMouseDragStopEventHandler(this.fp),s.zg=this}setTickStrategy(t,i){return super.er(t,i)}getTickStrategy(){return this.Ch}addCustomTick(){const t=new Tf((()=>this.chart.$s.te()),(()=>{const i=this.ud.indexOf(t);i>=0&&this.ud.splice(i,1)}),this.Rs.xAxis3DNumericTicks.majorTickStyle.tickStyle,this.Rs.xAxis3DNumericTicks.majorTickStyle.tickLength,this.Rs.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this.Rs.xAxis3DNumericTicks.majorTickStyle.tickPadding,this.Rs.xAxis3DNumericTicks.majorTickStyle.labelRotation,this.Rs.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this.Rs.xAxis3DNumericTicks.majorTickStyle.labelFont,(t=>this.formatValue(t)));return this.ud.push(t),this.chart.$s.te(),t}setStrokeStyle(t){return this.pp.gh(t).Sp(wf(this.pp.Cu())),this.chart.$s.te(),this}getStrokeStyle(){return this.pp.Cu()}setMouseInteractions(t){return this}setVisible(t){return super.setVisible(t),this.pp.setVisible(t),!1===t&&(this.bp.Zy(),this.vp.Zy()),this.gp.te(),this}rm(){return this.chart.getSeries()}xp(t){return Math.abs(this.Jt.Wt(t)*this.dp.Mp(1))}qr(t,i,s){const e=Math.abs(this.Jt.Wt(i-t)*this.dp.Mp(1));return{min:t-s*e,max:i+s*e}}Rr(t,i){return new If(i,t,this.gp,this.mp,this.dp)}zr(t,i){const s=this._p(i,t.u,t.Xh.Er.tickLength,t.Xh.Er.tickPadding);return t._h.oh(s.labelPosition).Ja(s.labelAlignment),s}_p(t,i,s,h){const{wuSize:r,start:n,end:o,tickDirection3D:a,tickDirection2D:l}=t,u=(i-this.Jt.getInnerStart())/(this.Jt.getInnerEnd()-this.Jt.getInnerStart()),c=Pr.addVec(Yr(n,o,u),Pr.multiplyVec(Pr.multiply(a,this.dp.Mp(.5*this.pp.Cu().getThickness())),r)),f=Pr.addVec(c,Pr.multiplyVec(Pr.multiply(a,this.dp.Mp(s)),r)),d=this.dp.Ap(f)||e(0,0);return{labelPosition:an(uh(d,this.chart.engine.scale,this.mp),on(l,h)),labelAlignment:{x:-l.x,y:-l.y},posTickEnd3D:f,posTickStart3D:c,tickPositionRelative:u}}om(t,i,s){const{wuSize:h,start:r,end:n,tickDirection3D:o}=i,a=(t-this.Jt.getInnerStart())/(this.Jt.getInnerEnd()-this.Jt.getInnerStart()),l=Pr.addVec(Yr(r,n,a),Pr.multiplyVec(Pr.multiply(o,this.dp.Mp(.5*this.pp.Cu().getThickness())),h)),u=Pr.addVec(l,Pr.multiplyVec(Pr.multiply(o,this.dp.Mp(10)),h)),c=this.dp.Ap(l)||e(0,0),f=this.dp.Ap(u)||e(0,0);return this.gp.mh(this.mp).ph(c).yh(f).gh(new Qn({fillStyle:new Be({color:be(120*s)}),thickness:1}))}Zr(t,i){return Pf(t,i,this.Jt)}rh(t){if(!this.ds)return;const i=Math.min(this.hr,this.rr),s=Math.max(this.hr,this.rr),h=this.yp,r=n(h.x.jt(),h.y.jt(),h.z.jt());let o,a;this.wp()?(o=n(h.x.getInnerEnd(),h.y.getInnerStart(),h.z.getInnerStart()),a=n(h.x.getInnerEnd(),h.y.getInnerStart(),h.z.getInnerEnd())):(o=n(h.x.getInnerStart(),h.y.getInnerStart(),h.z.getInnerStart()),a=this.Qh.kp(n(h.x.getInnerEnd(),h.y.getInnerEnd(),h.z.getInnerEnd()),o));const l=this.Qh.Qf,u=this.dp.Ap(o)||e(0,0),c=this.dp.Ap(a)||e(0,0),f=Yr(o,a,.5),d=Pr.addVec(f,Pr.multiplyVec(Pr.multiply(l,-1),r)),g=this.dp.Ap(f)||e(0,0),m=this.dp.Ap(d)||e(0,0),y=hn(ln(uh(g,this.chart.engine.scale,this.mp),uh(m,this.chart.engine.scale,this.mp)));this.pp.Al()._l([o,a]);const{gridlinePositionA:p,gridlinePositionB:S,gridlinePositionC:v}=this.Qh.Cp(t),b=t=>({x:-1===t.x?this.yp.x.getInnerStart():1===t.x?this.yp.x.getInnerEnd():0,y:-1===t.y?this.yp.y.getInnerStart():1===t.y?this.yp.y.getInnerEnd():0,z:-1===t.z?this.yp.z.getInnerStart():1===t.z?this.yp.z.getInnerEnd():0}),x=b(p),M=b(S),_=b(v),A={physicalAxisSize:nn(ln(u,c)),wuSize:r,start:o,end:a,tickDirection3D:l,tickDirection2D:y,gridlinePositionA:x,gridlinePositionB:M,gridlinePositionC:_},w=this.Cr(A),k=this.bp.Xy();for(const[t,i]of this.Th)for(const[,s]of i){const i=w.get(s);if(!i)continue;const e=this.Tp(A,i);k.add({positions:[e.tickStroke.start,e.tickStroke.end]},{lineStyle:t.Er.tickStyle}),e.gridStroke&&k.add({positions:e.gridStroke},{lineStyle:t.Er.gridStrokeStyle})}const C=this.vp.Xy(),T={x:0,y:0};this.ud.forEach((t=>{if(!t.ds||t.u<i||t.u>s)return;const e=this._p(A,t.u,t.ep,t.rp),h=this.Tp(A,e),r=C.add().oh(e.labelPosition).Ja(e.labelAlignment).eh(t.np).dr(t.op).lr(t.ef(t.u)).gr(t.Of).le().Ci();T.x=Math.max(T.x,r.x),T.y=Math.max(T.y,r.y),k.add({positions:[h.tickStroke.start,h.tickStroke.end]},{lineStyle:t.sp}),h.gridStroke&&k.add({positions:h.gridStroke},{lineStyle:t.hp})})),C.finishPlot(),k.finishPlot();const F=this.Gr(((t,i)=>{const s=i._h.Ci();return t.x=Math.max(t.x,s.x),t.y=Math.max(t.y,s.y),t}),{x:T.x,y:T.y}),I=Math.atan((c.y-u.y)/(c.x-u.x));this.ar.Ja({x:0,y:0}).gr(180*-I/Math.PI);const P=Pr.addVec(f,Pr.multiplyVec(Pr.multiply(l,this.dp.Mp(.5*this.pp.Cu().getThickness()+this.Hr(((t,i)=>Math.max(t,i.tickLength)),0))),r)),D=this.dp.Ap(P)||e(0,0),B=an(uh(D,this.chart.engine.scale,this.mp),an(an(un(F,y),on(y,this.Hr(((t,i)=>Math.max(t,i.labelPadding)),0))),un(on(this.ar.le().Ci(),.5),y)));this.ar.oh(B),this.pp.Fp={overrideFollowing:!1,skipMousePicking:!1}}Tp(t,i){const{gridlinePositionA:s,gridlinePositionB:e,gridlinePositionC:h}=t,r=i.posTickStart3D,n=i.posTickEnd3D,o=i.tickPositionRelative;let a;return Ih(o,0)||Ih(o,1)||(a=[this.Ip()?{...s,x:r.x}:this.Pp()?{...s,y:r.y}:this.wp()?{...s,z:r.z}:{x:0,y:0,z:0},this.Ip()?{...e,x:r.x}:this.Pp()?{...e,y:r.y}:this.wp()?{...e,z:r.z}:{x:0,y:0,z:0},this.Ip()?{...h,x:r.x}:this.Pp()?{...h,y:r.y}:this.wp()?{...h,z:r.z}:{x:0,y:0,z:0}]),{gridStroke:a,tickStroke:{start:r,end:n}}}pr(){super.pr(),this.bp.Zy(),this.vp.Zy()}Ip(){return this.Qh.Ip()}Pp(){return this.Qh.Pp()}wp(){return this.Qh.wp()}}class If extends ia{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.rd=h}}const Pf=(t,i,s)=>Ph(t+.1*(i-t)+Math.abs(s.jt())/100*Math.sign(i-t),Math.min(t,i),Math.max(t,i)),Df=(t,i,s,e)=>({Ur:()=>{const s=t();let e;for(const t of s){if(!t.Dp())continue;const s=i(t);e=void 0===s?e:void 0!==e?Math.min(e,s):s}return e},jr:()=>{const i=t();let e;for(const t of i){if(!t.Dp())continue;const i=s(t);e=void 0===i?e:void 0!==e?Math.max(e,i):i}return e},Yr:()=>{const i=t();let s;for(const t of i){if(!t.Dp())continue;const i=e(t);s=void 0===i?s:void 0!==s?Math.max(s,i):i}return s}}),Bf=t=>({...Df(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.Yr().y)),ap:t=>t.y,kp:(t,i)=>({x:i.x,y:t.y,z:i.z}),Qf:n(-1,0,0),Cp:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:n(i.x,0,i.z),gridlinePositionB:n(i.x,0,-i.z),gridlinePositionC:n(-i.x,0,-i.z)}},Ip:()=>!1,Pp:()=>!0,wp:()=>!1}),Of=t=>({...Df(t,(t=>t.getZMin()),(t=>t.getZMax()),(t=>t.Yr().z)),ap:t=>t.z,kp:(t,i)=>({x:i.x,y:i.y,z:t.z}),Qf:n(1,0,0),Cp:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:n(i.x,-i.y,0),gridlinePositionB:n(i.x,i.y,0),gridlinePositionC:n(-i.x,i.y,0)}},Ip:()=>!1,Pp:()=>!1,wp:()=>!0});class Lf extends jn{constructor(t,i,s,e,h){super(t,i,e,h),this.Bp=Nu,this.Op=!0,this.Lp=!0,this.Ls=t,this.dp=s,this.zs=new Map,this.onMouseWheel(this.Ls.Ep),this.onMouseDrag(this.Ls.Rp),this.onTouchStart(this.Ls.zp.onTouchStart),this.onTouchMove(this.Ls.zp.onTouchMove),this.onTouchEnd(this.Ls.zp.onTouchEnd)}setAutoScrollingEnabled(t){return this.Op=t,this.Ls.$s.te(),this}getAutoScrollingEnabled(){return this.Op}setColorShadingStyle(t){return this.Bp=t,this.zs.forEach(((i,s)=>s.Vp(t))),this.dp.te(),this}getColorShadingStyle(){return this.Bp}setDepthTestEnabled(t){return this.Lp=t,this.zs.forEach(((i,s)=>s.Np(t))),this.dp.te(),this}getDepthTestEnabled(){return this.Lp}Gp(){}rh(){}Yy(){}getXMax(){const t=this.hl;return t?t.oi():void 0}getXMin(){const t=this.hl;return t?t.ni():void 0}getYMax(){const t=this.hl;return t?t.li():void 0}getYMin(){const t=this.hl;return t?t.ai():void 0}getZMax(){const t=this.hl;return t?t.Wp():void 0}getZMin(){const t=this.hl;return t?t.Hp():void 0}Yr(){const t=this.hl;return t?n(t.Rl(),t.zl(),t.jp()):n(0,0,0)}}class Ef extends Lf{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.dt="Box Series 3D",this.$p=.25,this.Hf=()=>mr(this.Qe),this.Qe=Sr(this.Rs.boxSeries3DFillStyle,h),this.hl=this.dp.Xp().Np(this.Lp).eh(this.Qe).Yp(this.$p).Ys(this.getHighlight()),this.Xs(this.hl)}invalidateData(t){const i=t.length;if(0===i)return this;const s=t[0];if(!s)return this;let e;if("xMin"in s||"yMin"in s||"zMin"in s||"xMax"in s||"yMax"in s||"zMax"in s){e=[];for(let s=0;s<i;s+=1){const i=t[s],h="xMin"in i&&"xMax"in i,r="yMin"in i&&"yMax"in i,n="zMin"in i&&"zMax"in i;e[s]={color:i.color,value:i.value,id:i.id,xCenter:h?(i.xMin+i.xMax)/2:void 0,yCenter:r?(i.yMin+i.yMax)/2:void 0,zCenter:n?(i.zMin+i.zMax)/2:void 0,xSize:h?i.xMax-i.xMin:void 0,ySize:r?i.yMax-i.yMin:void 0,zSize:n?i.zMax-i.zMin:void 0}}}else e=t;return this.hl.Zp(e.slice()),this.Ls.$s.te(),this}setFillStyle(t){return this.Qe="function"==typeof t?t(this.Qe):t,this.hl.eh(t),this.Ls.$s.te(),this}getFillStyle(){return this.Qe}setRoundedEdges(t){return void 0!==t&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.$p=void 0!==t?Ph(t,0,1):void 0,this.hl.Yp(this.$p),this.dp.te(),this}getRoundedEdges(){return this.$p}Dp(){return this.Op&&this.getVisible()}ah(t,i){t.Ys(i),this.Ls.$s.te()}rh(){super.rh(),this.hl.le(!1)}attach(t,i){return super.attach(t,i),gr(t,this.Rs,{fill:this.Qe}),this}}class Rf extends Lf{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Hf=()=>mr(this.ku.getFillStyle())}setStrokeStyle(t){this.ku="function"==typeof t?t(this.ku):t;const i=this.ku;return this.hl.gh(i),this.dp.te(),this}getStrokeStyle(){return this.ku}add(t){return(t=Array.isArray(t)?t:[t])?(this.hl._l(t.slice()),this.dp.te(),this):this}clear(){return this.hl.Al(),this}getPointAmount(){const t=this.hl;return t.wl()+t.kl()}Dp(){return this.Op&&this.getPointAmount()>0&&this.getVisible()}ah(t,i){t.Ys(i),this.dp.te()}attach(t,i){return super.attach(t,i),gr(t,this.Rs,{stroke:this.ku}),this}}class zf extends Rf{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.dt="Line Series 3D",this.ku=Sr(e.lineSeries3DStrokeStyle,h),this.Kp=ka.pointStyle3D,this.qp(this.ku),this.hl=this.dp.Gy([ff.UserSeries]).Np(this.Lp).gh(this.ku).Sp(this.Kp).Ys(this.getHighlight()),this.Xs(this.hl)}setStrokeStyle(t){super.setStrokeStyle(t),this.qp(this.ku);const i=this.Kp;return this.hl.Sp(i),this}qp(t){const i=new ma.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.Kp=i}}class Vf extends Rf{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.dt="Point Line Series 3D",this.Hf=()=>mr(this.ku.getFillStyle())||mr(this.Kp.getFillStyle()),this.Kp=Sr(e.pointLineSeries3DPointStyle,h),this.ku=Sr(e.lineSeries3DStrokeStyle,h),this.Jp(),this.hl=this.dp.Gy([ff.UserSeries]).Np(this.Lp).gh(this.ku).Sp(this.Kp).Ys(this.getHighlight()),this.Xs(this.hl)}setPointStyle(t){return this.Kp="function"==typeof t?t(this.Kp):t,this.Jp(),this.hl.Sp(this.Kp),this.dp.te(),this}getPointStyle(){return this.Kp}setStrokeStyle(t){super.setStrokeStyle(t);const i=this.ku,s=Math.abs(i.getThickness()),e=this.Kp;s>e.getSize()&&(this.Kp=e.setSize(s)),this.Jp();const h=this.Kp;return this.hl.Sp(h),this.dp.te(),this}Jp(){const t=this.Kp,i=t.getSize();this.Kp=t.setSize(i)}ah(t,i){t.Ys(i),this.dp.te()}}class Nf extends Lf{constructor(t,i,s,e,h,r){super(t,i,s,e,h)}add(t){return(t=Array.isArray(t)?t:[t])?(this.hl._l(t.slice()),this.dp.te(),this):this}clear(){return this.hl.Al(),this}getPointAmount(){const t=this.hl;return t.wl()+t.kl()}Dp(){return this.Op&&this.getPointAmount()>0&&this.getVisible()}ah(t,i){t.Ys(i),this.dp.te()}attach(t,i){return super.attach(t,i),gr(t,this.Rs,{point3D:this.Qp}),this}}class Gf extends Nf{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.dt="Point Series 3D",this.Hf=()=>mr(this.Qp.getFillStyle());const n=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.Ls.getSeries().length;this.Qp=Sr(e.pointSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.hl=this.dp.iS(o).Np(this.Lp).tS(this.Qp).Ys(this.getHighlight()),this.Xs(this.hl)}setPointStyle(t){this.Qp="function"==typeof t?t(this.Qp):t;const i=this.Qp;return this.hl.tS(i),this.dp.te(),this}getPointStyle(){return this.Qp}}class Wf extends Nf{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.dt="Point Cloud Series 3D",this.Hf=()=>mr(this.Qp.getFillStyle());const n=this.Ls.getSeries().length;this.Qp=Sr(e.pointCloudSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.hl=this.dp.iS(o).tS(this.Qp).Ys(this.getHighlight()),this.Xs(this.hl)}setPointStyle(t){this.Qp="function"==typeof t?t(this.Qp):t;const i=this.Qp;return this.hl.tS(i),this.dp.te(),this}getPointStyle(){return this.Qp}}const Hf={Triangulated:Gf,Pixelated:Wf};class Uf extends Jc{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.sS=[],this.eS=0,this.hS=t=>{const i=this.sS.indexOf(t);i>=0&&(this.sS.splice(i,1),this.At.emit("seriesDispose",this,t))},this.rS=()=>{this.eS+=1},this.nS=()=>{this.eS-=1},this.onSeriesBackgroundMouseEnter=t=>this.At.on("mouseEnterSeriesBackground",t),this.onSeriesBackgroundMouseLeave=t=>this.At.on("mouseLeaveSeriesBackground",t),this.onSeriesBackgroundMouseMove=t=>this.At.on("mouseMoveSeriesBackground",t),this.onSeriesBackgroundMouseDown=t=>this.At.on("mouseDownSeriesBackground",t),this.onSeriesBackgroundMouseUp=t=>this.At.on("mouseUpSeriesBackground",t),this.onSeriesBackgroundMouseClick=t=>this.At.on("mouseClickSeriesBackground",t),this.onSeriesBackgroundMouseDoubleClick=t=>this.At.on("mouseDoubleClickSeriesBackground",t),this.onSeriesBackgroundMouseDragStart=t=>this.At.on("mouseDragStartSeriesBackground",t),this.onSeriesBackgroundMouseDrag=t=>this.At.on("mouseDragSeriesBackground",t),this.onSeriesBackgroundMouseDragStop=t=>this.At.on("mouseDragStopSeriesBackground",t),this.onSeriesBackgroundMouseWheel=t=>this.At.on("mouseWheelSeriesBackground",t),this.onSeriesBackgroundTouchStart=t=>this.At.on("touchStartSeriesBackground",t),this.onSeriesBackgroundTouchMove=t=>this.At.on("touchMoveSeriesBackground",t),this.onSeriesBackgroundTouchEnd=t=>this.At.on("touchEndSeriesBackground",t),this.offSeriesBackgroundMouseEnter=t=>this.At.off(t,"mouseEnterSeriesBackground"),this.offSeriesBackgroundMouseLeave=t=>this.At.off(t,"mouseLeaveSeriesBackground"),this.offSeriesBackgroundMouseMove=t=>this.At.off(t,"mouseMoveSeriesBackground"),this.offSeriesBackgroundMouseDown=t=>this.At.off(t,"mouseDownSeriesBackground"),this.offSeriesBackgroundMouseUp=t=>this.At.off(t,"mouseUpSeriesBackground"),this.offSeriesBackgroundMouseClick=t=>this.At.off(t,"mouseClickSeriesBackground"),this.offSeriesBackgroundMouseDoubleClick=t=>this.At.off(t,"mouseDoubleClickSeriesBackground"),this.offSeriesBackgroundMouseDragStart=t=>this.At.off(t,"mouseDragStartSeriesBackground"),this.offSeriesBackgroundMouseDrag=t=>this.At.off(t,"mouseDragSeriesBackground"),this.offSeriesBackgroundMouseDragStop=t=>this.At.off(t,"mouseDragStopSeriesBackground"),this.offSeriesBackgroundMouseWheel=t=>this.At.off(t,"mouseWheelSeriesBackground"),this.offSeriesBackgroundTouchStart=t=>this.At.off(t,"touchStartSeriesBackground"),this.offSeriesBackgroundTouchMove=t=>this.At.off(t,"touchMoveSeriesBackground"),this.offSeriesBackgroundTouchEnd=t=>this.At.off(t,"touchEndSeriesBackground"),this.oS=this.Ns.Qg()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.sS.forEach((i=>i.setAnimationHighlight(t))),this}aS(t,i){this.oS.Zs([i]),t.setMouseMoveEventHandler(((t,i)=>{this.At.emit("mouseMoveSeriesBackground",this,i)})).setMouseEnterEventHandler(((t,i)=>{this.At.emit("mouseEnterSeriesBackground",this,i)})).setMouseLeaveEventHandler(((t,i)=>{this.At.emit("mouseLeaveSeriesBackground",this,i)})).setMouseDownEventHandler(((t,i)=>this.At.emit("mouseDownSeriesBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.At.emit("mouseUpSeriesBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.At.emit("mouseClickSeriesBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.At.emit("mouseDoubleClickSeriesBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.At.emit("mouseWheelSeriesBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.At.emit("mouseDragStartSeriesBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.At.emit("mouseDragSeriesBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.At.emit("mouseDragStopSeriesBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>{this.At.emit("touchStartSeriesBackground",this,i)})).setTouchMoveEventHandler(((t,i)=>{this.At.emit("touchMoveSeriesBackground",this,i)})).setTouchEndEventHandler(((t,i)=>{this.At.emit("touchEndSeriesBackground",this,i)}))}setSeriesBackgroundFillStyle(t){return this.lS.eh(t),this.$s.te(),this}getSeriesBackgroundFillStyle(){return this.lS.ur()}setSeriesBackgroundStrokeStyle(t){return this.uS.sh(t),this.$s.te(),this}getSeriesBackgroundStrokeStyle(){return this.uS.Co()}setSeriesBackgroundEffect(t){return this.oS.Qs(t),this.$s.te(),this}getSeriesBackgroundEffect(){return this.oS.ie()}cS(t){this.sS.push(t),t.onMouseEnter(this.rS),t.onMouseLeave(this.nS),void 0!==this.fS&&t.setHighlightOnHover(this.fS),this.At.emit("seriesAdded",this,t)}qf(){return this.sS}dS(){return this.eS}setSeriesHighlightOnHover(t){return this.fS=t,this.sS.forEach((i=>i.setHighlightOnHover(t))),this}dispose(){return this.sS.slice().forEach(Th),super.dispose()}}const jf=Pr.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class $f{constructor(t,i,s,e){this.gS=!0,this.mS=!0,this.yS=2*-Math.PI/2160,this.pS=2*Math.PI/2160,this.SS=.1,this.vS=1*Math.PI/180,this.bS=t,this.xS=i,this.MS=s,this.Ap=e}getDefaultCameraConfiguration(t){const i={direction:jf,location:Pr.multiply(jf,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:i.direction,cameraLocation:i.location})||i}applyCameraInteractions(t,i){let s={direction:t.cameraDirection,location:t.cameraLocation};return i.forEach((t=>{"rotate"===t.type?s=this._S(s,t):"wheel-zoom"===t.type?s=this.AS(s,t):"rotate+zoom"===t.type?s=this.wS(s,t):"fixed-rotate"===t.type?s=this.kS(s,t):"move"===t.type&&(s=this.CS(s,t))})),this.gS?s=this.TS(t.boundingBox,s):this.mS&&(s=this.FS(t.boundingBox,s)),s}_S(t,i){const{rotation:s}=i,e=t.location,h=Pr.multiply(Pr.normalize(t.location),-1),{Right:r,Up:n}=this.IS(h);let o=e;const a=this.PS(h),l=s.x*this.yS*a;o=Pr.rotateAroundAxis(o,n,l);const u=(s.y>0?1:-1)*Math.min(Math.abs(s.y)*this.pS,a-this.vS);return 0!==u&&(o=Pr.rotateAroundAxis(o,r,u)),{location:o,direction:Pr.multiply(Pr.normalize(o),-1)}}AS(t,i){const{deltaY:s}=i;this.gS&&this.DS(!1);const e=t.location,h=Pr.multiply(Pr.normalize(e),-1),r=s*this.SS,n=Pr.length(e)*-r;return{direction:h,location:Pr.addVec(e,Pr.multiply(h,n))}}wS(t,i){const{rotation:s,cameraDistance:e}=i;this.gS&&this.DS(!1);let h=this._S(t,{type:"rotate",rotation:s});const r=h.location,n=Pr.multiply(Pr.normalize(r),-1),o=Pr.multiply(n,-e);return h={direction:Pr.multiply(Pr.normalize(o),-1),location:o},h}kS(t,i){this.gS&&this.DS(!1);const{rotation:s}=i,e=t.location,h=t.direction,{Right:r,Up:n}=this.IS(h),o=s.x*this.yS;let a=Pr.normalize(Pr.rotateAroundAxis(h,n,o));const l=s.y*this.pS;return a=Pr.normalize(Pr.rotateAroundAxis(a,r,l)),{location:e,direction:a}}CS(t,i){this.gS&&this.DS(!1),this.mS=!1;const{amountRight:s,amountForward:e}=i,h=t.location,r=t.direction,{Right:n}=this.IS(r);return{location:Pr.addVec(h,Pr.multiply(r,.01*e),Pr.multiply(n,.01*s)),direction:r}}boundingBoxChanged(t){const i={location:t.cameraLocation,direction:Pr.multiply(Pr.normalize(t.cameraLocation),-1)};return this.gS?this.TS(t.boundingBox,i):this.FS(t.boundingBox,i)}cameraLocationChanged(t){const i={location:t.cameraLocation,direction:Pr.multiply(Pr.normalize(t.cameraLocation),-1)};return this.gS?this.TS(t.boundingBox,i):this.FS(t.boundingBox,i)}viewportChanged(t){const i={location:t.cameraLocation,direction:Pr.multiply(Pr.normalize(t.cameraLocation),-1)};if(this.gS)return this.TS(t.boundingBox,i)}TS(t,i,s){let e=i;s=void 0!==s?s:0,e=this.BS(t,e,100,20,1,s,5);const h=this.PS(e.direction);return e=this.OS(e,this.LS(t,e,100,1),h),e}BS(t,i,s,e,h,r,n){return Yf(r,n,(t=>({direction:i.direction,location:Pr.multiply(i.direction,-t)})),(i=>this.ES(t,i)),s,h,"linear",e)}LS(t,i,s,e){const{Right:h,Left:r,Up:n,Down:o}=this.IS(i.direction),a=this.RS(t,!1,i);let l=i;const u=e,c=.1;return Math.abs(a.bottom-a.top)>u&&(l=a.bottom<a.top?Xf(0,c,(t=>({location:l.location,direction:Pr.normalize(Pr.lerp(l.direction,o,t))})),(i=>this.zS(t,i)),0,u,!0,s):Xf(0,c,(t=>({location:l.location,direction:Pr.normalize(Pr.lerp(l.direction,n,t))})),(i=>this.zS(t,i)),0,u,!0,s)),Math.abs(a.left-a.right)>u&&(l=a.left<a.right?Xf(0,c,(t=>({location:l.location,direction:Pr.normalize(Pr.lerp(l.direction,r,t))})),(i=>this.VS(t,i)),0,u,!0,s):Xf(0,c,(t=>({location:l.location,direction:Pr.normalize(Pr.lerp(l.direction,h,t))})),(i=>this.VS(t,i)),0,u,!0,s)),l}ES(t,i){const s=this.RS(t,!0,i);return Math.min(s.left+s.right,s.top+s.bottom)}VS(t,i){const s=this.RS(t,!1,i);return Math.abs(s.left-s.right)}zS(t,i){const s=this.RS(t,!1,i);return Math.abs(s.top-s.bottom)}RS(t,i,s){const e=Xr(this.NS(t,i,s).map((t=>uh(t,this.bS,this.xS))));return{left:e.min.x,right:this.xS.x.getInnerEnd()-e.max.x,top:this.xS.y.getInnerEnd()-e.max.y,bottom:e.min.y}}NS(t,i,s){const e=this.MS,h=n(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),r=n(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),o=[],a=i?16:4,l=(h.x+r.x)/2,u=(h.z+r.z)/2,c=Math.sqrt(2)*(r.x-l),f=Math.sqrt(2)*(r.z-u);return[h.y,r.y].forEach((t=>{for(let i=0;i<a;i+=1){const s=Math.PI/4+2*Math.PI*i/a,e=l+Math.cos(s)*c,h=u+Math.sin(s)*f;o.push({x:e,y:t,z:h})}})),o.map((t=>this.Ap(t,s))).filter((t=>void 0!==t))}FS(t,i){const s=Pr.length(i.location),e=this.GS(t);return s<e?{direction:i.direction,location:Pr.multiply(i.direction,-e)}:i}GS(t){return.8*Math.sqrt(t.x**2+t.y**2+t.z**2)}IS(t){const i=n(0,1,0),s=Pr.normalize(Pr.cross(i,Pr.multiply(t,-1)));let e=Pr.cross(s,t);return e.y=Math.abs(e.y),e=Pr.normalize(e),{Right:s,Up:e,Down:Pr.multiply(e,-1),Left:Pr.multiply(s,-1)}}PS(t){const i={x:0,y:1,z:0},s=Pr.angle(t,i),e=Pr.angle(t,Pr.multiply(i,-1));return Math.min(s,e)}OS(t,i,s){return{location:Pr.lerp(t.location,i.location,s),direction:Pr.normalize(Pr.lerp(t.direction,i.direction,s))}}DS(t){return this.gS=t,this}WS(){return this.gS}}const Yf=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=(i+t)/2;do{const o=s(u);if(a={value:u,result:o,score:e(o)},Math.abs(a.score-h)<=r)break;const c=a.score>h;c&&"linear"===n||!c&&"reversed"===n?(u=(a.value+t)/2,i=a.value):(u=(a.value+i)/2,t=a.value),l+=1}while(l<o);return a.result},Xf=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=t;do{const c=s(u),f=e(c);if(void 0===a||Math.abs(f-h)<Math.abs(a.score-h)){if(a={value:u,result:c,score:e(c)},Math.abs(a.score-h)<=r)break}else if(n)break;l+=1,u+=1/(o-1)*(i-t)}while(l<o);return a.result};class Zf extends Lf{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.dt="Surface Grid Series 3D",this.Hf=()=>mr(this.Qe),this.Bp=zu;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.Ls.getSeries().length;this.Qe=Sr(this.Rs.surfaceGridSeries3DFillStyle,n),this.Hu=Sr(this.Rs.surfaceGridSeries3DWireframeStyle,n);const o=e.start||{x:0,z:0},a=e.end?{x:(e.end.x-o.x)/e.columns,z:(e.end.z-o.z)/e.rows}:e.step||{x:1,z:1},l={heatmapDataType:"intensity",dataOrder:e.dataOrder||"columns",columns:e.columns,rows:e.rows,start:o,step:a};this.ro=l,this.hl=this.dp.HS(l).eh(this.Qe).Uu(this.Hu).Vp(this.Bp).Ys(this.getHighlight()),this.Xs(this.hl)}setFillStyle(t){return this.Qe="function"==typeof t?t(this.Qe):t,this.hl.eh(this.Qe),this.dp.te(),this}getFillStyle(){return this.Qe}setWireframeStyle(t){return this.Hu="function"==typeof t?t(this.Hu):t,this.hl.Uu(this.Hu),this.dp.te(),this}getWireframeStyle(){return this.hl.ju()}setIntensityInterpolation(t){return t=t||"disabled",this.hl.US(t),this.dp.te(),this}getIntensityInterpolation(){return this.hl.jS()}invalidateIntensityValues(t){if(Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.ro.dataOrder?t.length:t[0].length,rows:"rows"===this.ro.dataOrder?t.length:t[0].length},s="columns"===this.ro.dataOrder?this.ro.columns:this.ro.rows,e="columns"===this.ro.dataOrder?this.ro.rows:this.ro.columns;if(i.x>s||i.y>e){if(!0===this.Ls.Yd.do){const t=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.ro.columns}x${this.ro.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Mh.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.hl.$S({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.ro.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.ro.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.ro.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.ro.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.ro.dataOrder?this.ro.columns:this.ro.rows)-1,o=("columns"===this.ro.dataOrder?this.ro.rows:this.ro.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.Ls.Yd.do){const s=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.ro.columns}x${this.ro.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Mh.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),f=i.primary-(a+u),d=[];if(0===l&&0===c)for(let i=0;i<f;i+=1)d[i]=t.values[a+i];else for(let i=0;i<f;i+=1)d[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===d.length||0===d[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:d},s=Math.max(s,0),h=Math.max(h,0)}this.hl.$S({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.dp.te(),this}invalidateHeightMap(t){if(Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.ro.dataOrder?t.length:t[0].length,rows:"rows"===this.ro.dataOrder?t.length:t[0].length},s="columns"===this.ro.dataOrder?this.ro.columns:this.ro.rows,e="columns"===this.ro.dataOrder?this.ro.rows:this.ro.columns;if(i.x>s||i.y>e){if(!0===this.Ls.Yd.do){const t=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.ro.columns}x${this.ro.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Mh.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.hl.YS({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.ro.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.ro.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.ro.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.ro.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.ro.dataOrder?this.ro.columns:this.ro.rows)-1,o=("columns"===this.ro.dataOrder?this.ro.rows:this.ro.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.Ls.Yd.do){const s=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.ro.columns}x${this.ro.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Mh.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),f=i.primary-(a+u),d=[];if(0===l&&0===c)for(let i=0;i<f;i+=1)d[i]=t.values[a+i];else for(let i=0;i<f;i+=1)d[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===d.length||0===d[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:d},s=Math.max(s,0),h=Math.max(h,0)}this.hl.YS({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.dp.te(),this}setCullMode(t){return this.hl.XS("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.hl.ZS()}Gp(){}rh(){}Yy(){}Dp(){return this.Op&&this.getVisible()}ah(t,i){t.Ys(i),this.dp.te()}}class Kf extends Lf{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.dt="Surface Grid Series 3D",this.Hf=()=>mr(this.Qe),this.Bp=zu;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.Ls.getSeries().length;this.Qe=Sr(this.Rs.surfaceScrollingGridSeries3DFillStyle,n),this.Hu=Sr(this.Rs.surfaceScrollingGridSeries3DWireframeStyle,n);const o=e.start||{x:0,z:0},a=e.step||{x:1,z:1},l={heatmapDataType:"intensity",scrollDimension:e.scrollDimension||"columns",columns:e.columns,rows:e.rows,start:o,step:a};this.ro=l,this.hl=this.dp.KS(l).eh(this.Qe).Uu(this.Hu).Vp(this.Bp).Ys(this.getHighlight()),this.Xs(this.hl)}setFillStyle(t){return this.Qe="function"==typeof t?t(this.Qe):t,this.hl.eh(this.Qe),this.dp.te(),this}getFillStyle(){return this.Qe}setWireframeStyle(t){return this.Hu="function"==typeof t?t(this.Hu):t,this.hl.Uu(this.Hu),this.dp.te(),this}getWireframeStyle(){return this.hl.ju()}setIntensityInterpolation(t){return t=t||"disabled",this.hl.US(t),this.dp.te(),this}getIntensityInterpolation(){return this.hl.jS()}clear(){return this.hl.Al(),this.dp.te(),this}addValues(t){if(!t)return this;let i=t.yValues,s=t.intensityValues;if(!i&&!s)return this;if(i&&0===i.length&&(i=void 0),s&&0===s.length&&(s=void 0),i){const t=i[0].length,s=0+t-1,e="columns"===this.ro.scrollDimension?this.ro.rows:this.ro.columns;if(s>e-1){if(!0===this.Ls.Yd.do){const i=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.\nGrid was created with ${e} ${"columns"===this.ro.scrollDimension?"rows":"columns"}, input yValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Mh.console.warn(i)}const s=[];for(let t=0;t<i.length;t+=1)s[t]=i[t].slice(0,e+1);i=s}}if(s){const t=s[0].length,i=0+t-1,e="columns"===this.ro.scrollDimension?this.ro.rows:this.ro.columns;if(i>e-1){if(!0===this.Ls.Yd.do){const i=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.\nGrid was created with ${e} ${"columns"===this.ro.scrollDimension?"rows":"columns"}, input intensityValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Mh.console.warn(i)}const i=[];for(let t=0;t<s.length;t+=1)i[t]=s[t].slice(0,e+1);s=i}}if(i&&s){const t=i.length,e=s.length;if(t!==e){if(!0===this.Ls.Yd.do){const i=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.\nyValues: ${t}\nintensityValues: ${e}\nData will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;Mh.console.warn(i)}t>e?i=i.slice(0,e):s=s.slice(0,t)}}const e=i?i.length:null==s?void 0:s.length,h=i?i[0].length:null==s?void 0:s[0].length;return this.hl.qS({startPrimary:0,startSecondary:0,lengthPrimary:e,lengthSecondary:h,heightMapValues:i,intensityValues:s}),this.dp.te(),this}setCullMode(t){return this.hl.XS("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.hl.ZS()}Gp(){}rh(){}Yy(){}Dp(){return this.Op&&this.getVisible()}ah(t,i){t.Ys(i),this.dp.te()}}const qf=t=>!!(t&&"object"==typeof t&&"id"in t&&"chart"in t&&t.chart instanceof Qf),Jf=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y&&"z"in t&&"number"==typeof t.z);class Qf extends Uf{constructor(t,i,s,h,r,o,a){var l;let u;super(t,i,s,i.Gm("chart3D bg",0),h,i.$s.Rs.chart3DBackgroundFillStyle,i.$s.Rs.chart3DBackgroundStrokeStyle,i.$s.Rs.chart3DTitleFont,i.$s.Rs.chart3DTitleFillStyle,o),this.JS=1,this.QS=[],this.tv=2,this.sv=!0,this.ev=!0,this.hv=!0,this.rv=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.axes={id:"axes",chart:this},this.world={id:"world",chart:this},this.wn=[],this.In=()=>{const t=this.dp.nv();this.av.ov(t),this.lv.ov(t);const i=this.uv.viewportChanged(this.cv());i&&this.fv(i),this.$s.te()},this.Rp=(t,i,s,e,h)=>{if(this.hv){const t=h;this.QS.push({type:"rotate",rotation:t}),this.$s.te(),ir(i)}},this.Ep=(t,i)=>{if(this.ev){if(this.sv)Math.sign(this.rv)!==Math.sign(i.deltaY)?this.rv=vr(i):this.rv+=vr(i);else{const t=vr(i);this.QS.push({type:"wheel-zoom",deltaY:t})}this.$s.te(),ir(i)}},this.Yd.oo||this.Yd.no||this.$s.ho(1),this.jm.lr("Chart3D"),this.dv=s.d3(),this.dv.x.Vt(-1,1),this.dv.y.Vt(-1,1),this.dv.z.Vt(-1,1),this.dp=i.gv("chart3D layer3D",0,this.dv),this.av=i.mv("chart3D series bg",0),this.lv=i.Py("chart3D axis ui",1),this.yv={x:new Ff(this,(l=()=>this.sS,{...Df(l,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.Yr().x)),ap:t=>t.x,kp:(t,i)=>({x:t.x,y:i.y,z:i.z}),Qf:n(0,-1,0),Cp:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:n(0,i.y,i.z),gridlinePositionB:n(0,i.y,-i.z),gridlinePositionC:n(0,-i.y,-i.z)}},Ip:()=>!0,Pp:()=>!1,wp:()=>!1}),this.dv.x,this.Rs,this.dp,this.lv,this.pixelScale,!1,this.Ns),y:new Ff(this,Bf((()=>this.sS)),this.dv.y,this.Rs,this.dp,this.lv,this.pixelScale,!1,this.Ns),z:new Ff(this,Of((()=>this.sS)),this.dv.z,this.Rs,this.dp,this.lv,this.pixelScale,!1,this.Ns)},this.pv=this.dp.Gy([ff.InternalUI]).setMouseInteractions(!1),this.setBoundingBoxStrokeStyle(this.Rs.chart3DBoundingBoxStrokeStyle),this.lS=this.av.af(this.engine.scale,ol.Simple).eh(this.Rs.chart3DSeriesBackgroundFillStyle).sh(rh).setMouseInteractions(!0),this.uS=this.av.af(this.engine.scale,ol.Simple).eh(Ie).sh(this.Rs.chart3DSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.aS(this.lS,this.uS),this.Sv({x:1,y:1,z:1},!0),this.uv=new $f(this.engine.scale,this.pixelScale,this.dv,((t,i)=>(i&&this.fv(i),this.dp.Ap(t)))),this.vv=this.uv.getDefaultCameraConfiguration(this.bv(this.xv)),this.fv(this.vv),this.zp=Xn(new qn(((t,i,s)=>{u={locationOne:i,locationTwo:s,cameraLocation:this.dp.getCameraLocation()}}),((t,i,s,h,r,n)=>{if(!this.hv&&!this.ev)return;const o=(u.locationOne.x-u.locationTwo.x)**2+(u.locationOne.y-u.locationTwo.y)**2,a=(i.x-s.x)**2+(i.y-s.y)**2,l=Pr.length(u.cameraLocation),c=o/a*l,f=e((h.x+r.x)/2,(h.y+r.y)/2);this.QS.push({type:"rotate+zoom",rotation:this.hv?f:{x:0,y:0},cameraDistance:this.ev?c:l}),this.$s.te(),ir(n)}),(t=>{})),new Kn((t=>{}),((t,i,s,e,h)=>{if(this.hv){const t=e;this.QS.push({type:"rotate",rotation:t}),this.$s.te(),ir(h)}}),(t=>{}))),this.onBackgroundTouchStart(this.zp.onTouchStart),this.onBackgroundTouchMove(this.zp.onTouchMove),this.onBackgroundTouchEnd(this.zp.onTouchEnd),this.onSeriesBackgroundTouchStart(this.zp.onTouchStart),this.onSeriesBackgroundTouchMove(this.zp.onTouchMove),this.onSeriesBackgroundTouchEnd(this.zp.onTouchEnd),this.onBackgroundMouseDrag(this.Rp),this.onBackgroundMouseWheel(this.Ep),this.onBackgroundMouseDown(((t,i)=>{ir(i)})),this.onSeriesBackgroundMouseDrag(this.Rp),this.onSeriesBackgroundMouseWheel(this.Ep),this.onSeriesBackgroundMouseDown(((t,i)=>{ir(i)})),a&&!0===a.disableAnimations&&this.setAnimationsEnabled(!1),this.onResize(this.In),this.In(),this.Nm(r,this.pixelScale)}addPointSeries(t){const i=new(t&&t.type||Gf)(this,this.hS,this.dp,this.Rs,this.$s.Ns,t);return this.cS(i),i}addLineSeries(t){const i=new zf(this,this.hS,this.dp,this.Rs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length,this.$s.Ns);return this.cS(i),i}addPointLineSeries(t){const i=new Vf(this,this.hS,this.dp,this.Rs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length,this.$s.Ns);return this.cS(i),i}addSurfaceGridSeries(t){const i=new Zf(this,this.hS,this.dp,t,this.Rs,this.$s.Ns);return this.cS(i),i}addSurfaceScrollingGridSeries(t){const i=new Kf(this,this.hS,this.dp,t,this.Rs,this.$s.Ns);return this.cS(i),i}addBoxSeries(t){const i=new Ef(this,this.hS,this.dp,this.Rs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length,this.$s.Ns);return this.cS(i),i}translateCoordinate(t,i,s){if(qf(i)||qf(s)||Jf(t)){if(qf(i)&&qf(s)&&Jf(t)){if("axes"===i.id&&"world"===s.id)return this.dp.Mv(t);if("world"===i.id&&"axes"===s.id)return this.dp._v(t);if(i.id===s.id)return t}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return Yc(t,i,s,this.pixelScale,this.$s)}getDefaultAxisX(){return this.yv.x}getDefaultAxisY(){return this.yv.y}getDefaultAxisZ(){return this.yv.z}getDefaultAxes(){return[this.yv.x,this.yv.y,this.yv.z]}setCameraLocation(t){let i={location:t,direction:Pr.normalize(Pr.multiply(t,-1))};const s=this.uv.cameraLocationChanged(this.cv(i));return s&&(i=s),this.fv(i),this.$s.te(),this}getCameraLocation(){return this.dp.getCameraLocation()}getCameraDirection(){return this.dp.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.uv.DS(t);const i=this.uv.cameraLocationChanged(this.cv());return i&&this.fv(i),this}getCameraAutomaticFittingEnabled(){return this.uv.WS()}onCameraChange(t){return this.At.on("cameraChange",t)}offCameraChange(t){return this.At.off(t,"cameraChange")}setBoundingBoxStrokeStyle(t){return this.pv.gh(t).Sp(wf(this.pv.Cu())),this.dp.te(),this}getBoundingBoxStrokeStyle(){return this.pv.Cu()}setBoundingBox(t){return this.Sv(t,!1),this}Sv(t,i){this.xv=t;const s=this.bv(t);if(this.dv.x.Gt(s.x),this.dv.y.Gt(s.y),this.dv.z.Gt(-s.z),!i){const t=this.uv.boundingBoxChanged(this.cv());t&&this.fv(t)}this.$s.te()}getBoundingBox(){return this.xv}rh(t){if(Qc.Km(this.jm,this.Wm),0!==this.rv){const i=this.rv*t*.006;this.QS.push({type:"wheel-zoom",deltaY:i}),this.rv=Math.sign(this.rv)*Math.max(Math.abs(this.rv)-.01*t,0),0!==this.rv&&this.$s.te(!0)}const i=this.getCameraDirection();if(this.QS.length>0){const t=this.uv.applyCameraInteractions(this.cv(),this.QS);t&&this.fv(t),this.QS.length=0}this.Av&&Pr.equals(this.Av.location,this.vv.location)&&Pr.equals(this.Av.direction,this.vv.direction)||this.At.emit("cameraChange",this,this.getCameraLocation()),this.Av=this.vv,super.rh(t);for(let t=0;t<this.sS.length;t+=1)this.sS[t].Gp();for(let t=0;t<this.sS.length;t+=1)this.sS[t].rh();this.yv.x.Xr(),this.yv.y.Xr(),this.yv.z.Xr(),this.yv.x.rh(i),this.yv.y.rh(i),this.yv.z.rh(i),super.Vm();const s=this.dv,e=n(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),h=n(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd());this.pv.Al()._l([n(h.x,e.y,e.z),n(h.x,h.y,e.z),n(h.x,h.y,h.z),n(h.x,e.y,h.z),n(e.x,e.y,h.z),n(e.x,h.y,h.z),n(h.x,h.y,h.z),n(h.x,h.y,e.z),n(e.x,h.y,e.z),n(e.x,h.y,h.z),n(e.x,e.y,h.z),n(e.x,e.y,e.z)]);const r=[n(e.x,e.y,e.z),n(h.x,e.y,e.z),n(e.x,h.y,e.z),n(h.x,h.y,e.z),n(e.x,e.y,h.z),n(h.x,e.y,h.z),n(e.x,h.y,h.z),n(h.x,h.y,h.z)].map((t=>this.dp.Ap(t))),o=this.dp.Ap(n((e.x+h.x)/2,(e.y+h.y)/2,(e.z+h.z)/2)),a=lr(r,o),l=[];for(let t=0;t<a.length;t+=1){const i=a[t];Jr(i,o,a[t>0?t-1:a.length-1],a[t<a.length-1?t+1:0])||l.push(i)}const u=lr(l,o);this.lS.Ll(u),this.uS.Ll(u);for(let t=0;t<this.sS.length;t+=1)this.sS[t].Yy()}dispose(){return this.wn.forEach((t=>{t()})),this.wn.length=0,this.dv.Pt(),this.dp.Pt(),this.lv.Pt(),this.av.Pt(),super.dispose()}Rt(){return this.dv.x.Rt(),this.dv.y.Rt(),this.dv.z.Rt(),super.Rt()}zt(){return super.zt()}fv(t){this.dp.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(Pr.addVec(t.location,Pr.multiply(t.direction,-this.tv))),this.vv=t,this.$s.te()}bv(t){return Pr.divide(t,Pr.length(t)/this.JS)}cv(t=this.vv){return{boundingBox:this.bv(this.xv),cameraLocation:t.location,cameraDirection:t.direction}}setMouseInteractions(t){return this.setMouseInteractionZoom(t).setMouseInteractionRotate(t)}setMouseInteractionZoom(t){return this.ev=t,this}getMouseInteractionZoom(){return this.ev}setMouseInteractionRotate(t){return this.hv=t,this}getMouseInteractionRotate(){return this.hv}forEachAxis(t){return t(this.yv.x),t(this.yv.y),t(this.yv.z),this}getSeries(){return this.sS}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}setAnimationZoom(t){return this.sv=!!t,this}getAnimationZoom(){return this.sv}}const td={Column:iu,Row:su};class id extends Kc{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.wv=new Map,this.kv=this.addUIElement(td.Row).setPosition({x:0,y:100}).setOrigin(Fo.LeftTop).setBackground((t=>t.setFillStyle(Ie).setStrokeStyle(rh)))}add(t,i){return(t instanceof Jc?[t]:t instanceof eS?t.getCells().filter((t=>t.panel instanceof Jc)).map((t=>t.panel)):[]).forEach((t=>{const s=this.kv.addElement(Fu.VerticalLegendBox).setBackground((t=>t.setFillStyle(Ie).setStrokeStyle(rh))).add(t,i).setTitle(t.getTitle());this.wv.set(t,s)})),this.$s.te(),this}setLegendBoxes(t){return this.wv.forEach(((i,s)=>t(i,s))),this}getMinimumSize(){return super.getMinimumSize()||this.kv.getSize()}}class sd{constructor(t,i){this.Cv=t,this.Tv=i}alter(t){this.Fv=void 0!==this.Fv?this.Fv:this.Tv(),this.Iv=t,this.Cv(t)}resetValue(){void 0!==this.Iv&&(void 0!==this.Fv&&this.isAltered()&&this.Cv(this.Fv),this.Fv=void 0,this.Iv=void 0)}getNormalValue(){return void 0!==this.Fv?this.Fv:this.Tv()}isAltered(){return void 0!==this.Iv&&this.Tv()===this.Iv}}class ed{constructor(t,i){this.Pv=[],this.Dv=t,this.Jt=i}update(){return this.Dv.getVisible()?!(this.Bv()&&(!this.Ov()||(this.resetTable(),this.Dv.le(),this.Bv()))&&(this.Lv(),this.Dv.le(),this.Bv()&&(this.resetTable(),this.Dv.le(),1))):(this.Ov()&&this.resetTable(),!0)}Ov(){for(let t=0;t<this.Pv.length;t+=1)if(this.Pv[t].isAltered())return!0;return!1}resetTable(){for(let t=0;t<this.Pv.length;t+=1)this.Pv[t].resetValue();return this}Bv(){return((i,s)=>{const h=uh(i.getPosition(e(-1,-1),t.UISpace.PaddedBackground),i.scale,s),r=uh(i.getPosition(e(1,1),t.UISpace.PaddedBackground),i.scale,s);return h.x<s.x.getInnerStart()||r.x>s.x.getInnerEnd()||h.y<s.y.getInnerStart()||r.y>s.y.getInnerEnd()})(this.Dv,this.Jt)}Ev(){return((i,s)=>{const h=uh(i.getPosition(e(-1,-1),t.UISpace.PaddedBackground),i.scale,s),r=uh(i.getPosition(e(1,1),t.UISpace.PaddedBackground),i.scale,s);return h.x<s.x.getInnerStart()||r.x>s.x.getInnerEnd()})(this.Dv,this.Jt)}Rv(){return((i,s)=>{const h=uh(i.getPosition(e(-1,-1),t.UISpace.PaddedBackground),i.scale,s),r=uh(i.getPosition(e(1,1),t.UISpace.PaddedBackground),i.scale,s);return h.y<s.y.getInnerStart()||r.y>s.y.getInnerEnd()})(this.Dv,this.Jt)}zv(t){return this.Pv.push(t),t}}class hd extends ed{constructor(){super(...arguments),this.K=this.zv(new sd((t=>this.Dv.setOrigin(t)),(()=>this.Dv.getOrigin())))}Lv(){const t=this.K.getNormalValue(),i=e(this.Ev()?-t.x:t.x,this.Rv()?-t.y:t.y);this.K.alter(i)}}class rd extends ed{constructor(t,i,s,e){super(t,i),this.Vv=this.zv(new sd((t=>this.Dv.setTextFont((i=>i.setSize(t)))),(()=>this.Dv.getTextFont().getSize()))),this.Nv=s,this.Gv=e}Lv(){const t=this.Vv.getNormalValue(),i=this.Nv;if(i<t)for(let s=1;s<=this.Gv;s+=1){const e=t-(t-i)*(s/this.Gv);if(this.Vv.alter(e),this.Dv.le(),!this.Bv())return}}}const nd={Flip:(t,i)=>new hd(t,i),FontSize:(t=5,i=5)=>(s,e)=>new rd(s,e,t,i)};class od{constructor(){this.Wv=[]}addRow(...t){return this.Wv.push(t),this}}class ad extends od{if(){const t=this.Wv;return this.Wv=[],t}Hv(){return this.Wv.length=0,this}}class ld extends Ql{constructor(){super(...arguments),this.$c=this.Rs.cursorResultTableTextFont,this.Of=0,this.np=this.Rs.cursorResultTableTextFillStyle}setContent(t){for(let i=0;i<t.length;i+=1){const s=t[i];let e=!1;for(let t=0;t<s.length;t+=1){const i=s[t];if(void 0===i||0===i.length){e=!0;break}}e||(s.unshift(""),s.push(""))}this.Uv();const i=t.length;let s=this.getMembers().length;for(let e=0;e<Math.max(i,s);e+=1){const h=this.getRow(e,!0);if(e>=i)this.getMembers()[e].dispose(),e-=1,s-=1;else{const i=t[e].length;let s=h.getMembers().length;for(let r=0;r<Math.max(i,s);r+=1){const n=t[e][r],o=h.getMembers();if(r>=i)h.getMembers()[r].dispose(),r-=1,s-=1;else if(void 0!==n&&n.length>0){for(let t=o.length;t<r;t+=1)h.addGap(void 0,void 0);let t;if(r>=o.length)t=h.addElement(Hl,void 0);else{const i=o[r];i instanceof Xl?(h.getMembers()[r].dispose(),t=h.addElement(Hl,r)):t=i}t.setFont(this.$c).setFillStyle(this.np).setText(n).setTextRotation(this.Of)}else{for(let t=o.length;t<r;t+=1)h.addGap(void 0,void 0);r>=o.length?h.addGap(void 0,void 0):o[r]instanceof Wl&&(h.getMembers()[r].dispose(),h.addGap(void 0,r))}}}}return this.re.te(),this}setTextFillStyle(t){this.np="function"==typeof t?t(this.np):t;for(let t=0;t<this.getMemberCount();t+=1){const i=this.getRow(t);for(let t=0;t<i.getMembers().length;t+=1){const s=i.getMembers()[t];s instanceof Wl&&s.setFillStyle(this.np)}}return this.re.te(),this}getTextFillStyle(){return this.np}setTextFont(t){return na(t)?this.$c=t:this.$c=t(this.$c),this.re.te(),this}getTextFont(){return this.$c}setTextRotation(t){return this.Of=t,this.re.te(),this}getTextRotation(){return this.Of}Uv(){for(let t=0;t<this.Mf.length;t+=1)for(let i=0;i<this.Mf[t].getMembers().length;i+=1)this.Mf[t].getMembers()[i].dispose()}le(){for(let t=0;t<this.Mf.length;t+=1)this.Mf[t].setMinimumSize(void 0);super.le();for(let t=0;t<this.Mf.length;t+=1)this.Mf[t].setMinimumSize(this.size.x);return super.le(),this}}class ud{constructor(t,i,s,h,r,n){this.jv=!0,this.$v=!0,this.Yv=!1,this.Ca=e(0,0),this.ds=!0,this.re=t,this.renderingScale=i,this.scale=s,this.Xv=h,this.Zv=r,this.Kv=new this.Xv(this.re,this.renderingScale,this.scale,Fh,n).setMouseInteractions(!1).setFillStyle(n.cursorPointMarkerFillStyle).setStrokeStyle(n.cursorPointMarkerStrokeStyle),this.Dv=new ld(this.re,this.renderingScale,this.scale,this.Zv,Fh,n).setMouseInteractions(!1).setBackground((t=>t.setFillStyle(n.cursorResultTableFillStyle).setStrokeStyle(n.cursorResultTableStrokeStyle))).setTextFillStyle(n.cursorResultTableTextFillStyle).setTextFont(n.cursorResultTableTextFont),this.qv=nd.Flip(this.Dv,this.scale)}dispose(){return this.Kv.dispose(),this.Dv.dispose(),this}pointAt(t){return this.Ca=t.scale===this.scale?t.location:uh(t.location,t.scale,this.scale),this.Kv.setPosition(this.Ca),this.Dv.setPosition(this.Ca).setContent(t.resultTableContent),this.re.te(),this}getPosition(){return this.Ca}setVisible(t){return this.ds=t,this.re.te(),this}getVisible(){return this.ds}setPointMarkerVisible(t){return this.jv=t,this.re.te(),this}getPointMarkerVisible(){return this.jv}setPointMarker(t){return t(this.Kv),this.re.te(),this}getPointMarker(){return this.Kv}setResultTableVisible(t){return this.$v=t,this.re.te(),this}getResultTableVisible(){return this.$v}setResultTable(t){return t(this.Dv),this.re.te(),this}getResultTable(){return this.Dv}setAutoFitStrategy(t){return this.qv&&this.qv.resetTable(),this.qv=t?t(this.Dv,this.re.$s.Jt):void 0,this.re.te(),this}getAutoFitStrategy(){return void 0!==this.qv}rh(){return this.qv&&this.qv.update(),this.Dv.setVisible(this.Yv&&this.ds&&this.$v),this.Kv.setVisible(this.Yv&&this.ds&&this.jv),this.Kv.rh(),this.Dv.rh(),this}le(){return this.Kv.le(),this.Dv.le(),this.Yv=((t,i,s=i)=>{const e=i!==s?uh(t,i,s):t;return e.x>=s.x.getInnerStart()&&e.x<=s.x.getInnerEnd()&&e.y>=s.y.getInnerStart()&&e.y<=s.y.getInnerEnd()})(this.Ca,this.scale),this}}class cd extends ud{constructor(){super(...arguments),this.Jv=!1}pointAt(t){return this.Qv(t.fillStyle),super.pointAt(t)}Qv(t){t&&this.Jv&&this.Dv.setTextFillStyle(t)}setResultTableAutoTextStyle(t){return this.Jv=t,this.re.te(),this}getResultTableAutoTextStyle(){return this.Jv}}class fd extends ud{setPosition(t){return this.Ca=t,this.Kv.setPosition(t),this.Dv.setPosition(t),this.re.te(),this}}class dd{constructor(t,i,s=[]){this.tb=[],this.ib=(t,i)=>(this.tb.forEach((s=>s(t,i))),t),this.Xv=t,this.Zv=i,this.tb=s}}class gd extends dd{constructor(){super(...arguments),this.sb=(t,i,s,e)=>this.ib(new cd(t,i,s,this.Xv,this.Zv,e),e),this.addStyler=t=>new gd(this.Xv,this.Zv,this.tb.map((t=>t)).concat(t)),this.setPointMarker=t=>new gd(t,this.Zv,this.tb.map((t=>t))),this.setResultTableBackground=t=>new gd(this.Xv,t,this.tb.map((t=>t)))}}class md extends dd{constructor(){super(...arguments),this.eb=(t,i,s,e)=>this.ib(new fd(t,i,s,this.Xv,this.Zv,e),e),this.addStyler=t=>new md(this.Xv,this.Zv,this.tb.map((t=>t)).concat(t)),this.setPointMarker=t=>new md(t,this.Zv,this.tb.map((t=>t))),this.setResultTableBackground=t=>new md(this.Xv,t,this.tb.map((t=>t)))}}const yd=t=>t.setPointMarker((t=>t.setSize(e(5,5)).setOrigin(e(0,0)))).setResultTable((t=>t.setEffect(!0).setOrigin(e(-1,-1)).setMargin(5))),pd=(t,i)=>t.setPointMarker((t=>t.setFillStyle(i.chartMarkerPointMarkerFillStyle).setStrokeStyle(i.chartMarkerPointMarkerStrokeStyle).setSize(e(20,20)).setOrigin(e(0,0)))).setResultTable((t=>t.setEffect(!0).setBackground((t=>t)).setOrigin(e(-1,-1)).setMargin(10))),Sd=new gd(Ul,Ul,[yd]),vd=new gd(Ul,Yl,[yd,i=>i.setPointMarkerVisible(!1).setResultTable((i=>i.setOrigin(e(0,-1)).setMargin(0).setBackground((i=>{i instanceof Yl&&i.setDirection(t.UIDirections.Down).setPointerLength(10).setPointerAngle(60)}))))]),bd=Sd,xd=vd;new md($l,Ul,[pd,t=>t.setResultTableVisible(!1)]);const Md=new md(zl,Ul,[pd,t=>t.setResultTable((t=>t.setOrigin(Fo.LeftBottom)))]),_d=(t,i,s,e,h)=>({location:t,scale:i,resultTableContent:s,series:e,fillStyle:h}),Ad={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},wd=(t,i)=>!(!i.name||t.name.toLowerCase()!==i.name.toLowerCase())||"ISO_A3"in t&&"ISO_A3"in i&&t.ISO_A3.toLowerCase()===i.ISO_A3.toLowerCase(),kd=(t,i)=>{let s=i.geometry;return s=Cd(t,i,s),s=Td(t,i,s),s},Cd=(t,i,s)=>{if(t===Ad.Asia){const t=[];for(let i=0;i<s.length;i+=1){t[i]=[];const e=s[i],h=t[i];for(let t=0;t<e.length;t+=1){const i=e[t];i.x<-100?h[t]={x:i.x+360,y:i.y}:h[t]=i}}return t}return s},Td=(t,i,s)=>{const e=i.name.toLowerCase();let h;if(t===Ad.USA&&("alaska"===e?h={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:"hawaii"===e&&(h={translate:{x:48,y:7},scale:{x:1,y:1}})),h){const{translate:t,scale:r}=h,n=Xr(Dh(s)),o=[];for(let i=0;i<s.length;i+=1){o[i]=[];const h=s[i],a=o[i];for(let i=0;i<h.length;i+=1){const s=h[i];let o=s.x;"alaska"===e&&1===Math.sign(o)&&(o=-180-(180-o)),a[i]={x:t.x+(o-n.min.x)*r.x+n.min.x,y:t.y+(s.y-n.min.y)*r.y+n.min.y}}}return i.outlier=!0,i.transform={...h,vertexBoundaries:n},o}return s},Fd={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},Id={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};var Pd;t.AutoCursorModes=void 0,(Pd=t.AutoCursorModes||(t.AutoCursorModes={}))[Pd.disabled=0]="disabled",Pd[Pd.snapToClosest=1]="snapToClosest",Pd[Pd.onHover=2]="onHover";class Dd extends Uf{constructor(i,s,e,h,r,n,o,a,l,u){super(i,s,e,h,r,n,o,a,l,u),this.hb=t.AutoCursorModes.snapToClosest,this.rb=t=>{this.sS.includes(t)||(this.sS.push(t),this.At.emit("seriesAdded",this,t))},this.nb=s.ob();const c=()=>{this.hb!==t.AutoCursorModes.disabled&&this.$s.te()},f=()=>{this.hb!==t.AutoCursorModes.disabled&&this.$s.te()},d=()=>{this.hb!==t.AutoCursorModes.disabled&&this.$s.te()},g=()=>{this.hb!==t.AutoCursorModes.disabled&&this.$s.te()},m=()=>{this.hb!==t.AutoCursorModes.disabled&&this.$s.te()},y=()=>{this.hb!==t.AutoCursorModes.disabled&&this.$s.te()};this.onSeriesBackgroundMouseEnter(c),this.onSeriesBackgroundMouseMove(f),this.onSeriesBackgroundMouseLeave(d),this.onSeriesBackgroundTouchStart(g),this.onSeriesBackgroundTouchMove(m),this.onSeriesBackgroundTouchEnd(y),this.ab(((t,i)=>{const s=i.onMouseEnter(c),e=i.onMouseMove(f),h=i.onMouseLeave(d),r=i.onTouchStart(g),n=i.onTouchMove(m),o=i.onTouchEnd(y),a=this.lb(((t,l)=>{l===i&&(i.offMouseEnter(s),i.offMouseMove(e),i.offMouseLeave(h),i.offTouchStart(r),i.offTouchMove(n),i.offTouchEnd(o)),this.ub(a)}))}))}setAutoCursor(t){return this.cb&&t(this.cb),this.$s.te(),this}getAutoCursor(){return this.cb}setAutoCursorMode(t){return this.hb=t,this.$s.te(),this}getAutoCursorMode(){return this.hb}fb(t){if(t.x<this.uiScale.x._i()||t.x>this.uiScale.x.Ai()||t.y<this.uiScale.y._i()||t.y>this.uiScale.y.Ai())return;let i,s=Number.MAX_VALUE;for(const e of this.sS)if(e.getCursorEnabled()&&e.getVisible()){const h=e.fb(t,!1);if(h){const e=uh(h.location,h.scale,this.engine.scale),r=Hr(t,e);Number.isNaN(r)||i&&!(r<s)||(i=h,s=r)}}return i||void 0}solveNearest(t){if(t=t||this.$s.eo())return this.fb(tc(t,this.$s))}gb(i){let s;if(!i){const i=this.$s.eo(),e=this.sS.find((t=>t.getIsUnderMouse())),h=this.lS.getIsUnderMouse();this.hb===t.AutoCursorModes.snapToClosest?(h||void 0!==e)&&(s=i&&this.fb(i)):this.hb===t.AutoCursorModes.onHover&&void 0!==e&&e.getCursorEnabled()&&(s=i&&e.fb(i,!0))}s?this.cb.pointAt(s).setVisible(!0):this.cb.setVisible(!1),this.cb.le().rh()}ab(t){return this.At.on("seriesAdded",t)}mb(t){return this.At.off(t)}lb(t){return this.At.on("seriesDispose",t)}ub(t){return this.At.off(t)}dispose(){return this.nb.Pt(),this.cb.dispose(),super.dispose()}}class Bd extends Jc{constructor(i,s,e,h,r,n,o){super(i,s,e,s.Gm("mapChart bg",0),h,s.$s.Rs.mapChartBackgroundFillStyle,s.$s.Rs.mapChartBackgroundStrokeStyle,s.$s.Rs.mapChartTitleFont,s.$s.Rs.mapChartTitleFillStyle,o),this.yb=[],this.Jt=this.Cm.d2({scaleXYConstructor:Rn}),this.us=!0,this.pb=this.Rs.mapChartSeparateRegionFillStyle,this.Sb=this.Rs.mapChartSeparateRegionStrokeStyle,this.vb=t.AutoCursorModes.onHover,this.bb=Od,this.Bh=!0,this.xb=0,this.Mb=!0,this._b=new Map,this.onMouseEnter=t=>this.At.on("mouseEnter",t),this.onMouseLeave=t=>this.At.on("mouseLeave",t),this.onMouseClick=t=>this.At.on("mouseClick",t),this.onMouseDoubleClick=t=>this.At.on("mouseDoubleClick",t),this.onMouseDown=t=>this.At.on("mouseDown",t),this.onMouseUp=t=>this.At.on("mouseUp",t),this.onMouseMove=t=>this.At.on("mouseMove",t),this.offMouseEnter=t=>this.At.off(t,"mouseEnter"),this.offMouseLeave=t=>this.At.off(t,"mouseLeave"),this.offMouseClick=t=>this.At.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.At.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.At.off(t,"mouseDown"),this.offMouseUp=t=>this.At.off(t,"mouseUp"),this.offMouseMove=t=>this.At.off(t,"mouseMove"),this.offMouseDragStart=t=>this.At.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.At.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.At.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.At.off(t,"mouseWheel"),this.onMapDataReady=t=>{const i=this.At.on("mapDataReady",t);return this.Ab&&Mh.setTimeout((()=>t())),i},this.onViewChange=t=>this.At.on("viewChange",t),this.wb=(t,i,s,e,h)=>{this.Jt.x.Gt(e).Mi([this.di.left+this.Ba.left,this.di.right+this.Ba.right]),this.Jt.y.Gt(h).Mi([this.di.bottom+this.Ba.bottom,this.di.top+this.Ba.top+Qc.Zm(this.jm,this.Wm)]),this.kb&&this.Cb(this.Tb,this.Jt,this.kb)},this.xs=(i,s)=>{const e=s;if(!e||!this.Ab)return;const{iRegion:h,region:r}=this.Fb(this.Ab,e);this.vb!==t.AutoCursorModes.disabled&&(this.Ib(r,h),ir(i)),this.Mb&&this.$s.js.se(r,!0),this.At.emit("mouseEnter",this,i)},this.Ms=(t,i)=>{const s=i;if(!s||!this.Ab)return;const{iRegion:e,region:h}=this.Fb(this.Ab,s);this.Pb(h,e),this.Mb&&this.$s.js.se(h,!1),this.At.emit("mouseLeave",this,t),t&&ir(t)},this._s=(i,s)=>{const e=s;if(!e||!this.Ab)return;const{iRegion:h,region:r}=this.Fb(this.Ab,e);this.vb!==t.AutoCursorModes.disabled&&(this.Ib(r,h),ir(i)),this.At.emit("mouseMove",this,i)},this.As=(t,i)=>this.At.emit("mouseClick",this,t),this.ws=(t,i)=>this.At.emit("mouseDoubleClick",this,t),this.ks=(t,i)=>this.At.emit("mouseDown",this,t),this.Cs=(t,i)=>this.At.emit("mouseUp",this,t),this.Ts=(t,i,s)=>{this.At.emit("mouseDragStart",this,t,i)},this.Fs=(t,i,s,e,h)=>{this.At.emit("mouseDrag",this,t,i,s,e)},this.Is=(t,i,s,e)=>{this.At.emit("mouseDragStop",this,t,i,s)},this.Ps=(t,i)=>{this.At.emit("mouseWheel",this,t)},this.Ds=(t,i)=>{const s=i;if(!s||!this.Ab)return;const{iRegion:e,region:h}=this.Fb(this.Ab,s);this.Db=this.engine.clientLocation2Engine(t.clientX,t.clientY),this.Ib(h,e),this.Mb&&this.$s.js.se(h,!0),this.At.emit("touchStart",this,t),ir(t)},this.Bs=(t,i)=>{const s=i;if(!s||!this.Ab)return;const{iRegion:e,region:h}=this.Fb(this.Ab,s);this.Db=this.engine.clientLocation2Engine(t.clientX,t.clientY),this.Ib(h,e),this.At.emit("touchMove",this,t),ir(t)},this.Os=(t,i)=>{const s=i;if(!s||!this.Ab)return;const{iRegion:e,region:h}=this.Fb(this.Ab,s);this.Db=void 0,this.Pb(h,e),this.Mb&&this.$s.js.se(h,!1),this.At.emit("touchEnd",this,t),ir(t)},this.Yd.oo||this.Yd.no||this.$s.ho(3),(null==n?void 0:n.disableAnimations)&&(this.Bh=!1),this.Bb=s.Py("mapChart plotting",0),this.onResize(this.wb),this.jm.lr("Map Chart");const a=Rh(n?n.autoCursorBuilder:void 0,Md);this.Ob=a.eb(s.ob(),this.Jt,this.Jt,this.Rs).setVisible(!1),this.Lb=this.Ns.Qg(),this.Nm(r,this.uiScale),this.Eb=this.Bb.Rb(this.Jt).setMouseInteractions(this.us).setMouseEnterEventHandler(((t,i,s)=>this.xs(i,s))).setMouseLeaveEventHandler(((t,i,s)=>this.Ms(i,s))).setMouseClickEventHandler(((t,i,s)=>this.As(i,s))).setMouseDoubleClickEventHandler(((t,i,s)=>this.ws(i,s))).setMouseDownEventHandler(((t,i,s)=>this.ks(i,s))).setMouseUpEventHandler(((t,i,s)=>this.Cs(i,s))).setMouseMoveEventHandler(((t,i,s)=>this._s(i,s))).setMouseDragStartEventHandler(((t,i,s,e)=>this.Ts(i,s,e))).setMouseDragEventHandler(((t,i,s,e,h,r)=>this.Fs(i,s,e,h,r))).setMouseDragStopEventHandler(((t,i,s,e,h)=>this.Is(i,s,e,h))).setMouseWheelEventHandler(((t,i,s)=>this.Ps(i,s))).setTouchStartEventHandler(((t,i,s)=>this.Ds(i,s))).setTouchMoveEventHandler(((t,i,s)=>this.Bs(i,s))).setTouchEndEventHandler(((t,i,s)=>this.Os(i,s))).eh(this.Rs.mapChartFillStyle).sh(this.Rs.mapChartStrokeStyle),this.zb=this.Bb.Rb(this.Jt).setMouseInteractions(this.us).eh(this.Rs.mapChartOutlierRegionFillStyle).sh(this.Rs.mapChartOutlierRegionStrokeStyle);const l=Rh(n&&n.type,Ad.World);this.Tb=l,this.Vb(l).then((()=>{this.At.emit("mapDataReady")}))}setFillStyle(t){return this.Eb.eh(t),this.$s.te(),this}getFillStyle(){return this.Eb.ur()}setStrokeStyle(t){return this.Eb.sh(t),this.$s.te(),this}getStrokeStyle(){return this.Eb.Co()}setEffect(t){return this.Lb.Qs(t),this.$s.te(),this}getEffect(){return this.Lb.ie()}setOutlierRegionFillStyle(t){return this.zb.eh(t),this.$s.te(),this}getOutlierRegionFillStyle(){return this.zb.ur()}setOutlierRegionStrokeStyle(t){return this.zb.sh(t),this.$s.te(),this}getOutlierRegionStrokeStyle(){return this.zb.Co()}setSeparateRegionFillStyle(t){return this.pb="function"==typeof t?t(this.pb):t,this.yb.forEach((t=>t.eh(this.pb))),this.$s.te(),this}getSeparateRegionFillStyle(){return this.pb}setSeparateRegionStrokeStyle(t){return this.Sb="function"==typeof t?t(this.Sb):t,this.yb.forEach((t=>t.sh(this.Sb))),this.$s.te(),this}getSeparateRegionStrokeStyle(){return this.Sb}invalidateRegionValues(t){if(!this.Ab||!this.Nb)return this.Gb=this.Gb||[],this.Gb.push(t),this;if("function"==typeof t)for(let i=0;i<this.Ab.regions.length;i+=1){const s=this.Ab.regions[i],e=this.Nb[i],h=t({...s,geometry:void 0},e);if(void 0!==h&&h!==e){this.Nb[i]=h;const t=this._b.get(s);null==t||t.forEach((t=>{t.Wb(h)}))}}else for(const i of t)if(i)for(let t=0;t<this.Ab.regions.length;t+=1){const s=this.Ab.regions[t],e=this.Nb[t];if(void 0!==i.value&&i.value!==e&&wd(s,i)){this.Nb[t]=i.value;const e=this._b.get(s);null==e||e.forEach((t=>{t.Wb(i.value)}))}}return this.$s.te(),this}setAutoCursor(t){return this.Ob&&t(this.Ob),this.$s.te(),this}getAutoCursor(){return this.Ob}setAutoCursorMode(t){return this.vb=t,this.$s.te(),this}getAutoCursorMode(){return this.vb}setCursorResultTableFormatter(t){return this.bb=t,this.$s.te(),this}getCursorResultTableFormatter(){return this.bb}onMouseDragStart(t){return this.At.on("mouseDragStart",t)}onMouseDrag(t){return this.At.on("mouseDrag",t)}onMouseDragStop(t){return this.At.on("mouseDragStop",t)}onMouseWheel(t){return this.At.on("mouseWheel",t)}onTouchStart(t){return this.At.on("touchStart",t)}onTouchMove(t){return this.At.on("touchMove",t)}onTouchEnd(t){return this.At.on("touchEnd",t)}offTouchStart(t){return this.At.off(t,"touchStart")}offTouchMove(t){return this.At.off(t,"touchMove")}offTouchEnd(t){return this.At.off(t,"touchEnd")}setMouseInteractions(t){return this.us=t,this.Eb.setMouseInteractions(t),this}getMouseInteractions(){return this.us}setHighlight(t){var i;return t=Ar(t),this.xb=t,null===(i=this.Ab)||void 0===i||i.regions.forEach((i=>{this.$s.js.se(i,t)})),this.At.emit("highlight",t),this}getHighlight(){return this.xb}setAnimationHighlight(t){var i;return null===(i=this.Ab)||void 0===i||i.regions.forEach((i=>{this.$s.js.ee(i,t)})),this}getAnimationHighlight(){var t;return this.$s.js.he(null===(t=this.Ab)||void 0===t?void 0:t.regions[0])}setHighlightOnHover(t){return this.Mb=t,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Mb}onHighlight(t){return this.At.on("highlight",t)}offHighlight(t){return this.At.off(t)}offMapDataReady(t){return this.At.off(t,"mapDataReady")}offViewChange(t){return this.At.off(t,"viewChange")}async Vb(t){const i=await((t,i)=>{let s;if(t===Ad.World)s="countries_world.json";else if(t===Ad.NorthAmerica)s="countries_northAmerica.json";else if(t===Ad.SouthAmerica)s="countries_southAmerica.json";else if(t===Ad.Africa)s="countries_africa.json";else if(t===Ad.Europe)s="countries_europe.json";else if(t===Ad.Asia)s="countries_asia.json";else if(t===Ad.USA)s="states_usa.json";else if(t===Ad.Canada)s="territoriesProvinces_canada.json";else{if(t!==Ad.Australia){const i=`LCJS MapChart unidentified \`type\`: ${t}`;throw Mh.alert(i),new Error(i)}s="territories_australia.json"}const e=`${i}/maps/${s}`;return Mh.fetch(e).then((t=>t.json())).catch((t=>{Fr(i,e,"Map Chart",{shouldCrash:!0})}))})(t,this.Yd.Ae);this.Nb=new Array(i.regions.length).map((t=>{})).fill(void 0);const s=Fd[t];if(!s)throw new Error("Unidentified map type.");for(const t of i.outliers)for(const i of t.geometry)this.zb.ln().Ll(i);if(t===Ad.USA){const t=25.8,i=29.7;this.yb.push(this.Bb.hh(this.Jt).setMouseInteractions(!1).eh(this.pb).sh(this.Sb).oh({x:-126,y:t}).Gt({x:10,y:i-t}),this.Bb.hh(this.Jt).setMouseInteractions(!1).eh(this.pb).sh(this.Sb).oh({x:-113,y:t}).Gt({x:7,y:i-t}))}const e=this.$s.js.an(this.Eb,{animationEnabled:this.Bh});for(let s=0;s<i.regions.length;s+=1){const h=i.regions[s],r=kd(t,h),n=[];for(const t of r)t.length<3||n.push(this.Eb.ln().Ll(t));this._b.set(h,n),e.ln(h,(t=>{n.forEach((i=>i.Ys(t)))}))}if(this.Lb.Zs([this.Eb]),this.kb=s,this.Cb(t,this.Jt,s),this.Ab=i,this.Gb){for(const t of this.Gb)this.invalidateRegionValues(t);this.Gb=void 0}this.$s.te()}Cb(t,i,s){const e=Id[t],h=i.x.getCellSize(),r=i.y.getCellSize()/h,n={min:{x:s.min.x,y:s.min.y},max:{x:s.max.x,y:s.max.y}};if(r<e){const t=(n.max.x-n.min.x)*(e/r-1);n.min.x-=t/2,n.max.x+=t/2}else if(r>e){const t=(n.max.y-n.min.y)*(r/e-1);n.min.y-=t/2,n.max.y+=t/2}i.x.Vt(n.min.x,n.max.x),i.y.Vt(n.min.y,n.max.y);const o=this.Jt.x.Fi(),a=this.Jt.y.Fi();this.At.emit("viewChange",{latitudeRange:{start:n.min.y,end:n.max.y},longitudeRange:{start:n.min.x,end:n.max.x},margin:{top:a[1],bottom:a[0],left:o[0],right:o[1]}})}Ib(t,i){this.Hb={region:t,iRegion:i},this.$s.te()}Pb(t,i){this.Hb&&t===this.Hb.region&&(this.Hb=void 0,this.$s.te())}Fb(t,i){const s=Array.from(this._b.entries()).findIndex((([t,s])=>s.includes(i)));return{iRegion:s,region:null==t?void 0:t.regions[s]}}setAnimationsEnabled(t){return this.Bh=!t,this}getAnimationsEnabled(){return this.Bh}getMinimumSize(){}qf(){return[this]}rh(t){super.rh(t),super.Vm(),Qc.Km(this.jm,this.Wm);const i=l(this.Jt.x._i(),this.Jt.y._i(),this.Jt.x.wi(),this.Jt.y.wi());this.Bb.ov(i);const s=this.$s.eo()||this.Db;if(this.Hb&&s){const t=this.Nb&&this.Nb[this.Hb.iRegion];let i=uh(s,this.engine.scale,this.Jt);i={x:Ph(i.x,this.Jt.x.getInnerStart(),this.Jt.x.getInnerEnd()),y:Ph(i.y,this.Jt.y.getInnerStart(),this.Jt.y.getInnerEnd())};let e=i.x,h=i.y;const r=this.Hb.region.transform;this.Hb.region.outlier&&r&&(e=(e-r.translate.x-r.vertexBoundaries.min.x)/r.scale.x+r.vertexBoundaries.min.x,h=(h-r.translate.y-r.vertexBoundaries.min.y)/r.scale.y+r.vertexBoundaries.min.y),this.Ob.setPosition(i).setVisible(!0).getResultTable().setContent(this.bb(new ad,this.Hb.region,t,e,h,this).if())}else this.Ob.setVisible(!1);return this.Ob.le().rh(),this}dispose(){return this.Bb.Pt(),this.Ob.dispose(),Zc(this.Jt),super.dispose()}Rt(){return super.Rt(),this.Jt.Rt(),this}zt(){return super.zt(),this.Jt.zt(),this}Hf(){return mr(this.getFillStyle())}attach(t,i){return t.setText(this.getTitle()),t.setButtonOffStrokeStyle(t.getButtonOffStrokeStyle().setThickness(1)),t.setButtonOnStrokeStyle(t.getButtonOnStrokeStyle().setThickness(1)),t.setOn(!0).setLocked(!0),t.onMouseEnter((()=>{this.setHighlight(!0)})),t.onMouseLeave((()=>{this.setHighlight(!1)})),this.onMouseEnter((()=>t.setHighlight(!0))),this.onMouseLeave((()=>t.setHighlight(!1))),this.onTouchStart((()=>t.setHighlight(!0))),this.onTouchEnd((()=>t.setHighlight(!1))),gr(t,this.Rs,{fill:this.getFillStyle()}),this}}const Od=(t,i,s,e,h,r)=>(t.addRow(`${i.name}`).addRow(Ld(e,h)),void 0!==s&&t.addRow(`Region value: ${s.toFixed(1)}`),t),Ld=(t,i)=>{const s=t>0,e=i>0;return`${[pr(Math.abs(0|t),2),"° ",pr(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(s?"E":"W")}, ${[pr(Math.abs(0|i),2),"° ",pr(Math.abs(0|(i<0?i=-i:i)%1*60),2),"' "].join("")+(e?"N":"S")}`};class Ed extends ta{constructor(t,i,s,e,h,r,n,o,a){super(t,i,i.Ub(s),e,h,{numeric:i.jb({amplitude:e.polarAmplitudeAxisNumericTicks,radial:e.polarAmplitudeAxisNumericTicks}),datetime:i.jb({amplitude:e.polarAmplitudeAxisDateTimeTicks,radial:e.polarAmplitudeAxisDateTimeTicks}),time:i.jb({amplitude:e.polarAmplitudeAxisTimeTicks,radial:e.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.$b=r,this.Yb=n,this.Xb=o,this.Ns=a,this.Zb=s,this.Kb=i.jb({amplitude:e.polarAmplitudeAxisStrokeStyle,radial:e.polarRadialAxisStrokeStyle}),this.ar=o.tn(s).setMouseInteractions(!1).dr(i.jb({amplitude:e.polarAmplitudeAxisTitleFont,radial:e.polarRadialAxisTitleFont})).eh(i.jb({amplitude:e.polarAmplitudeAxisTitleFillStyle,radial:e.polarRadialAxisTitleFillStyle})),this.yr=this.Ns.Qg([this.ar]).Qs(e.effectsText)}setTickStrategy(t,i){return super.er(t,i)}setStrokeStyle(t){return this.Kb="function"==typeof t?t(this.Kb):t,this.Yb.te(),this}getStrokeStyle(){return this.Kb}Rr(t,i){return new Rd(i,t,this.Zb,this.Xb,this.Xb,this.qb(this.$b,this.Zb),this.Xb.mh(this.Zb).setMouseInteractions(!1))}zr(t,i){const s=this.Jb(this.Zb,t);this.Qb&&!1===this.Qb(t)?t._h.setVisible(!1):t._h.setVisible(!0).oh(an(this.tx(this.Zb,t.u),s.padding)).Ja(s.alignment).gr(s.rotation).$a(s.offset.x,s.offset.y),this.ix(this.Zb,t.sx,t.hx,t)}setMouseInteractions(t){return this}rh(){this.Cr({physicalAxisSize:0});const t=this.Gr(((t,i)=>{const s=i.Xh.Er,e=.5*this.Kb.getThickness()+s.tickLength+s.tickPadding+Math.abs(i._h.le().Ci().y/this.Zb.os().y)+s.labelPadding;return Math.max(t,e)}),0);return this.nx(this.Zb,this.Kb,t),this.ox(this.Zb,this.ar,t),t}}class Rd extends hc{constructor(t,i,s,e,h,r,n,o){super(t,i,e,s,h,s,o),this.sx=r,this.hx=n,r.setMouseInteractions(!1),this.zs.push(r,n)}}class zd extends Ed{constructor(t,i,s,e,h,r,n,o,a){super(t,Vd((()=>this.rm())),i,s,e,h,r,n,o),this.pp=this.Yb.mh(this.Zb).setMouseInteractions(!1),this.lx=a,this.setScrollStrategy(Go.expansion),this.setTickStrategy(Wo.Numeric),this.setTitle("Amplitude")}rm(){return this.lx()}Zr(t,i){return sc(t,i,this.Zb.y)}qr(t,i,s){const e=2*(i-t),h=this.Zb.x.Ji(e);return{min:t-s*h,max:i+s*h}}tx(t,i){return{x:t.ux()?i-t.gx().start:t.gx().start-i,y:0}}qb(t,i){return t.df(i)}ix(t,i,s,e){const h=e.Xh.Er,r=t.ux()?e.u-t.gx().start:t.gx().start-e.u;Ih(e.u,t.gx().start)||Ih(e.u,t.gx().end)?i.setVisible(!1):i.setVisible(!0).bu(0).yh(360).wu(void 0).Au(0).xu(r).wu(60).eh(Ie).sh(h.gridStrokeStyle);const n=.5*this.Kb.getThickness();s.ph({x:r,y:-n*t.os().y}).yh({x:r,y:-(n+h.tickLength)*t.os().y}).gh(h.tickStyle)}Jb(t,i){const s=i.Xh.Er;return{alignment:{x:0,y:1},padding:{x:0,y:t.os().y*-(.5*this.Kb.getThickness()+s.tickLength+s.tickPadding)},rotation:0,offset:{x:0,y:0}}}nx(t,i,s){const e=t.ux()?t.gx().end-t.gx().start:t.gx().start-t.gx().end;this.pp.ph({x:0,y:0}).yh({x:e,y:0}).gh(i)}ox(t,i,s){const e=t.ux()?(t.gx().start+t.gx().end)/2-t.gx().start:t.gx().start-(t.gx().start+t.gx().end)/2;i.Ja({x:0,y:1}).oh({x:e,y:-s*t.os().y})}}const Vd=t=>({...Df(t,(t=>t.getAmplitudeMin()),(t=>t.getAmplitudeMax()),(t=>{})),Ub:t=>({getInnerStart:()=>t.gx().start,getInnerEnd:()=>t.gx().end,Vt:(i,s)=>t.mx(i,s),Xt:(i,s,e,h,r)=>t.y.Xt(i,s,e,h,r)}),jb:t=>t.amplitude});class Nd extends Ed{constructor(t,i,s,e,h,r,n,o){super(t,Wd,i,s,e,h,r,n,o),this.yx=90,this.Sx=12,this.vx=Gd,this.pp=this.Yb.df(this.Zb).setMouseInteractions(!1),this.Qb=t=>{let i=180*(t.u-this.Zb.bx())/Math.PI%360;for(;i<0;)i+=360;for(;i>360;)i-=360;if(i>=0&&i<=20||i>=340&&i<=360)return!1},this.Ih=void 0,this.setTickStyle(s.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.yx)}setTickStyle(t){return this.xx="function"==typeof t?t(this.xx):t,this.Mx(),this.Yb.te(),this}getTickStyle(){return this.xx}setTickFormattingFunction(t){return this.vx=t,this.Mx(),this.Yb.te(),this}getTickFormattingFunction(){return this.vx}setClockwise(t){this.Zb._x(t);const i=this.yx*Math.PI/180;return t?this.Zb.Ax(i+Math.PI/2):this.Zb.Ax(i-Math.PI/2),this.Yb.te(),this}getClockwise(){return!this.Zb.wx()}setNorth(t){for(;t<0;)t+=360;t%=360,this.yx=t;const i=t*Math.PI/180;return this.getClockwise()?this.Zb.Ax(i+Math.PI/2):this.Zb.Ax(i-Math.PI/2),this.Yb.te(),this}getNorth(){return 180*this.Zb.bx()/Math.PI}setDivision(t){return this.Sx=t,this.Mx(),this.Yb.te(),this}getDivision(){return this.Sx}rm(){return[]}Zr(t,i){return i}qr(t,i,s){return{min:t,max:i}}tx(t,i){const s=t.wx()?1:-1,e=t.bx(),h=t.ux()?t.gx().end-t.gx().start:t.gx().start-t.gx().end;return{x:Math.cos((i-e)*s)*h,y:Math.sin((i-e)*s)*h}}qb(t,i){return t.mh(i)}ix(t,i,s,e){const h=this.xx,r=t.wx()?1:-1,n=t.bx(),o=(e.u-n)*r,a=Math.cos(o),l=Math.sin(o),u=t.ux()?t.gx().end-t.gx().start:t.gx().start-t.gx().end,c={x:a*u,y:l*u};i.ph({x:0,y:0}).yh(c);const f={x:c.x+a*h.tickLength*t.os().x,y:c.y+l*h.tickLength*t.os().y};s.ph(c).yh(f),i.gh(h.gridStrokeStyle),s.gh(h.tickStyle)}Jb(t,i){const s=this.xx,e=t.wx()?1:-1,h=t.bx();let r,n=(i.u-h)*e;for(;n<0;)n+=2*Math.PI;for(;n>=2*Math.PI;)n-=2*Math.PI;r=n>0&&n<=Math.PI?-n+Math.PI/2:-n-Math.PI/2;const o=s.tickLength+s.tickPadding,a=Math.cos(n)*o*t.os().x,l=Math.sin(n)*o*t.os().y;return{alignment:{x:0,y:0},padding:{x:a,y:l},rotation:180*r/Math.PI,offset:{x:a,y:l}}}nx(t,i,s){const e=t.ux()?t.gx().end-t.gx().start:t.gx().start-t.gx().end;this.pp.bu(0).yh(360).Au(0).xu(e+.5*i.getThickness()*t.os().x).wu(360).eh(Ie).sh(i)}ox(t,i,s){const e=t.bx(),h=this.Jb(t,{u:0+e}),r=t.ux()?t.gx().end-t.gx().start:t.gx().start-t.gx().end;i.Ja(h.alignment).gr(h.rotation).$a(h.offset.x,h.offset.y).oh(an({x:r,y:0},h.padding))}Mx(){this.br({Ah:[],wh:[{_h:"Radial ticks",um:0,Er:this.xx,Or:this.vx,hn:(t,i,s,e)=>{const h=[],r=2*Math.PI/this.Sx;for(let t=0;t<2*Math.PI;t+=r)h.push(t);return h},Zh:{Vr:()=>{},Kh:()=>!1},rn:void 0}],xh:Gd,Mr:void 0,_r:void 0})}}const Gd=(t,i,s)=>(180*t/Math.PI).toFixed(0),Wd={Ur:()=>{},jr:()=>{},Yr:()=>{},Ub:t=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,Vt:(t,i)=>{},Xt:(i,s,e,h,r)=>t.x.Xt(i,s,e,h,r)}),jb:t=>t.radial},Hd=t=>!!(t&&"object"==typeof t&&"axisAmplitude"in t&&"axisRadial"in t),Ud=t=>!!(t&&"object"==typeof t&&"angle"in t&&"number"==typeof t.angle&&"amplitude"in t&&"number"==typeof t.amplitude);class jd extends jn{constructor(t,i,s,e,h,r){super(i,s,h,r),this.dt="Sector",this.kx=0,this.Cx=1*Math.PI/2,this.Tx=void 0,this.Fx=void 0,this.re=t,this.Zb=e,this.gy=this.re.df(this.Zb).Ys(this.getHighlight()),this.Xs(this.gy),this.Qe=h.polarSectorFillStyle,this.th=h.polarSectorStrokeStyle,this.setMouseInteractions(!1)}setAngleStart(t){return this.kx=Ph(t,0,360),this.re.te(),this}getAngleStart(){return this.kx}setAngleEnd(t){return this.Cx=Ph(t,0,360),this.re.te(),this}getAngleEnd(){return this.Cx}setAmplitudeStart(t){return this.Tx=t,this.re.te(),this}getAmplitudeStart(){return this.Tx}setAmplitudeEnd(t){return this.Fx=t,this.re.te(),this}getAmplitudeEnd(){return this.Fx}setFillStyle(t){return this.Qe="function"==typeof t?t(this.Qe):t,this.re.te(),this}getFillStyle(){return this.Qe}setStrokeStyle(t){return this.th="function"==typeof t?t(this.th):t,this.re.te(),this}getStrokeStyle(){return this.th}rh(){const t=this.Zb.gx(),i=180*this.Zb.bx()/Math.PI,s=void 0!==this.Tx?Ph(this.Tx,t.start,t.end):t.start,e=void 0!==this.Fx?Ph(this.Fx,t.start,t.end):t.end,h=this.Zb.ux()?s-t.start:t.start-s,r=this.Zb.ux()?e-t.start:t.start-e,n=Math.min(h,r),o=Math.max(h,r),a=this.Zb.wx()?1:-1,l=Math.abs(this.Cx-this.kx);this.gy.bu((this.kx-i)*a).yh((this.Cx-i)*a).Au(100*n/o).xu(o).eh(this.Qe).sh(this.th).wu(Math.ceil(l/2))}ah(t,i){t.Ys(i),this.re.te()}attach(t,i=!0){return super.attach(t,i),gr(t,this.Rs,{fill:this.Qe,stroke:this.th}),this}}class $d extends jn{constructor(){super(...arguments),this.Op=!0,this.Ix=!0}setAutoScrollingEnabled(t){return this.Op=t,this.Ls.$s.te(),this}getAutoScrollingEnabled(){return this.Op}Gp(){}rh(){}Yy(){}setCursorEnabled(t){return this.Ix=t,this}getCursorEnabled(){return this.Ix}}class Yd extends $d{constructor(t,i,s,e,h,r){super(i,s,h,r),this.re=t,this.Ls=i,this.scale=e}getAmplitudeMin(){return this.Px?this.Px.min:void 0}getAmplitudeMax(){return this.Px?this.Px.max:void 0}}const Xd=(t,i,s,e,h)=>t.addRow(i.getName()).addRow("Angle:","",Math.round(s).toString()).addRow("Amplitude","",h(e)),Zd=(t,i)=>{const s=[],e=i.gx().start,h=i.gx().end,r=i.ux(),n=i.wx()?1:-1,o=i.bx(),a=Math.abs(h-e),l=Math.min(e,h)+.001*a,u=Math.max(e,h)-.001*a;for(const i of t){const t=Ph(i.amplitude,l,u),h=i.angle*Math.PI/180-o,a=Math.cos(h*n)*(r?t-e:e-t),c=Math.sin(h*n)*(r?t-e:e-t),f=i.color;s.push({x:a,y:c,color:f})}return s},Kd=t=>{const i={min:Dr,max:Br};for(const s of t)i.min=Math.min(i.min,s.amplitude),i.max=Math.max(i.max,s.amplitude);return i},qd=t=>t.slice().map((t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360})),Jd=(t,i)=>{let s=Sn(t);for(i.wx()||(s*=-1),s+=180*i.bx()/Math.PI;s<0;)s+=360;s%=360;const e=nn(t),h=i.gx(),r=Math.abs(h.end-h.start);return{angle:s,amplitude:Iu(h.start,h.end,e/r)}};class Qd extends Yd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.dt="Heatmap Series",this.Dx=!0,this.bb=tg,this.Hf=()=>mr(this.Qe);const o=this.Ls.getSeries().length;this.Qe=Sr(this.Rs.polarHeatmapSeriesFillStyle||this.Rs.heatmapGridSeriesFillStyle,o);const a=n.amplitudeStart||0,l=n.amplitudeEnd?(n.amplitudeEnd-a)/(n.annuli-1):n.amplitudeStep||1,u={sectors:n.sectors,annuli:n.annuli,amplitudeStart:a,amplitudeStep:l,heatmapDataType:"intensity",dataOrder:n.dataOrder||"annuli"};this.ro=u,this.Bx=t.Ox(e,[],u).eh(this.Qe).Ys(this.getHighlight()),this.Xs(this.Bx);const c=Math.min(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep),f=Math.max(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep);this.Px={min:c,max:f},this.setHighlightOnHover(!1)}invalidateIntensityValues(t){if(Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,sectors:"annuli"===this.ro.dataOrder?t[0].length:t.length,annuli:"annuli"===this.ro.dataOrder?t.length:t[0].length},s="annuli"===this.ro.dataOrder?this.ro.annuli:this.ro.sectors,e="annuli"===this.ro.dataOrder?this.ro.sectors:this.ro.annuli;if(i.x>s||i.y>e){if(!0===this.Ls.Yd.do){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nHeatmap ${s}x${e}, input ${i.x}x${i.y}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Mh.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);if(0===(t=h).length||0===t[0].length)return this}this.Bx.$S({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,sectors:"annuli"===this.ro.dataOrder?t.values[0].length:t.values.length,annuli:"annuli"===this.ro.dataOrder?t.values.length:t.values[0].length},s="annuli"===this.ro.dataOrder?t.iAnnulus:t.iSector,e=s+i.primary-1,h="annuli"===this.ro.dataOrder?t.iSector:t.iAnnulus,r=h+i.secondary-1,n="annuli"===this.ro.dataOrder?this.ro.annuli-1:this.ro.sectors-1,o="annuli"===this.ro.dataOrder?this.ro.sectors-1:this.ro.annuli-1;if(s<0||h<0){if(!0===this.Ls.Yd.do){const i=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.\nNo intensity values will be invalidated.`;Mh.console.warn(i)}return this}if(e>n||r>o){if(!0===this.Ls.Yd.do){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nMax indexes ${n}x${o}, input ${i.primary}x${i.secondary} starting at [${s},${h}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Mh.console.warn(t)}const a=Math.max(e-n,0),l=i.primary-a,u=Math.max(r-o,0),c=[];for(let i=0;i<l;i+=1)c[i]=t.values[i].slice(0,u>0?-u:void 0);if(0===(t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:c}).values.length||0===t.values[0].length)return this}this.Bx.$S({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.re.te(),this}setFillStyle(t){return this.Qe="function"==typeof t?t(this.Qe):t,this.Bx.eh(this.Qe),this.re.te(),this}getFillStyle(){return this.Qe}setCursorResultTableFormatter(t){return this.bb=t,this.Ls.$s.te(),this}getCursorResultTableFormatter(){return this.bb}clear(){return this.Bx.Al(),this.re.te(),this}setCursorInterpolationEnabled(t){return this.Dx=t,this.re.$s.te(),this}getCursorInterpolationEnabled(){return this.Dx}setCursorEnabled(t){return super.setCursorEnabled(t)}setIntensityInterpolation(t){return t=t||"disabled",this.Bx.US(t),this.re.te(),this}getIntensityInterpolation(){return this.Bx.jS()}Dp(){return this.Op&&this.getVisible()}ah(t,i){t.Ys(i),this.re.te()}fb(t,i){const s=uh(t,this.Ls.engine.scale,this.scale),e=Jd(s,this.scale),h=this.Dx?this.Bx.Lx(e):this.Bx.fb(e);if(h)return _d(Zd([h],this.scale)[0],this.scale,this.bb(new ad,this,{angleDeg:h.angle,amplitude:h.amplitude,intensity:h.cellValue,iAnnulus:h.iAnnulus,iSector:h.iSector},this.Ls.getAmplitudeAxis().formatValue).if(),this,this.Qe)}solveNearestFromScreen(t){return this.fb(tc(t,this.Ls.$s),!1)}rh(){}attach(t,i=!0){return super.attach(t,i),gr(t,this.Rs,{fill:this.Qe}),this}}const tg=(t,i,s,e)=>t.addRow(i.getName()).addRow("Angle:","",Math.round(s.angleDeg).toString()).addRow("Amplitude","",e(s.amplitude)).addRow("Intensity","",s.intensity.toFixed(1));class ig extends Yd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.dt="Line Series",this.Ex=[],this.Rx=!1,this.zx=!1,this.bb=Xd,this.ku=Sr(this.Rs.polarLineSeriesStrokeStyle,r),this.Vx=t.Gy(e,void 0,[ff.UserSeries]).gh(this.ku).Ys(this.getHighlight()).yl(Ba.Nearest),this.Xs(this.Vx)}setCursorResultTableFormatter(t){return this.bb=t,this.Ls.$s.te(),this}getCursorResultTableFormatter(){return this.bb}setData(t){return this.Ex=qd(t),this.Rx=!0,this.Px=Kd(this.Ex),this.re.te(),this}setStrokeStyle(t){this.ku="function"==typeof t?t(this.ku):t;const i=this.ku;return this.Vx.gh(i),this.re.te(),this}getStrokeStyle(){return this.ku}setConnectDataAutomaticallyEnabled(t){return this.zx=t,this.re.te(),this}getConnectDataAutomaticallyEnabled(){return this.zx}Dp(){return this.Op&&this.Ex.length>0&&this.getVisible()}ah(t,i){t.Ys(i),this.re.te()}fb(t,i){return this.Nx(t,this.Vx)}solveNearestFromScreen(t){return this.Nx(tc(t,this.Ls.$s),this.Vx)}Nx(t,i){const s=i.Gx(t);if(!s)return;const{angle:e,amplitude:h}=Jd(s,this.scale);return _d(s,this.scale,this.bb(new ad,this,e,h,this.Ls.getAmplitudeAxis().formatValue).if(),this,this.ku.getFillStyle())}rh(){if(this.Rx||this.scale.Wx()){const t=Zd(this.Ex,this.scale),i=Xr(t);this.zx?(t.push({...t[0]}),this.Vx.tu(!0)):this.Vx.tu(!1),this.Vx.Al()._l(t).oa(i),this.Rx=!1,this.Vx.le()}}attach(t,i=!0){return super.attach(t,i),gr(t,this.Rs,{stroke:this.ku}),this}}class sg extends Yd{constructor(i,s,e,h,r,n,o){super(i,s,e,h,r,o),this.dt="Point Line Series",this.Ex=[],this.Rx=!1,this.zx=!1,this.Hx=3,this.Pa=0,this.Ux=t.PointShape.Circle,this.bb=Xd,this.Qe=Sr(this.Rs.polarPointLineSeriesFillStyle,n),this.ku=Sr(this.Rs.polarPointLineSeriesStrokeStyle,n),this.Vx=i.Gy(h,void 0,[ff.UserSeries]).gh(this.ku).Ys(this.getHighlight()).yl(Ba.Nearest),this.Xs(this.Vx),this.jx=i.iS(h).eh(this.Qe).vl(this.Ux).Gt(this.Hx).Ys(this.getHighlight()).yl(Ba.Nearest),this.Xs(this.jx)}setCursorResultTableFormatter(t){return this.bb=t,this.Ls.$s.te(),this}getCursorResultTableFormatter(){return this.bb}setData(t){return this.Ex=qd(t),this.Rx=!0,this.Px=Kd(this.Ex),this.re.te(),this}setStrokeStyle(t){this.ku="function"==typeof t?t(this.ku):t;const i=this.ku;return this.Vx.gh(i),this.re.te(),this}getStrokeStyle(){return this.ku}setPointFillStyle(t){this.Qe="function"==typeof t?t(this.Qe):t;const i=this.Qe;return this.jx.eh(i),this.re.te(),this}getPointFillStyle(){return this.Qe}setPointSize(t){return this.Hx=t,this.jx.Gt(t),this.re.te(),this}getPointSize(){return this.Hx}setPointShape(t){return this.Ux=t,this.jx.vl(this.Ux),this}getPointShape(){return this.Ux}setPointRotation(t){return this.Pa=t,this.jx.gr(t),this.re.te(),this}getPointRotation(){return this.Pa}setConnectDataAutomaticallyEnabled(t){return this.zx=t,this.re.te(),this}getConnectDataAutomaticallyEnabled(){return this.zx}Dp(){return this.Op&&this.Ex.length>0&&this.getVisible()}ah(t,i){t.Ys(i),this.re.te()}fb(t,i){return this.Nx(t,this.Vx)}solveNearestFromScreen(t){return this.Nx(tc(t,this.Ls.$s),this.Vx)}Nx(t,i){const s=i instanceof il?i.fb(t):i.Gx(t);if(!s)return;const{angle:e,amplitude:h}=Jd(s,this.scale);return _d(s,this.scale,this.bb(new ad,this,e,h,this.Ls.getAmplitudeAxis().formatValue).if(),this,"color"in s&&Ee(this.Qe)?new Be({color:s.color}):this.Qe)}rh(){if(this.Rx||this.scale.Wx()){const t=Zd(this.Ex,this.scale),i=Xr(t);this.zx?(t.push({...t[0]}),this.Vx.tu(!0)):this.Vx.tu(!1),this.Vx.Al()._l(t).oa(i),this.jx.Al()._l(t).oa(i),this.Rx=!1,this.Vx.le(),this.jx.le()}}}class eg extends Yd{constructor(i,s,e,h,r,n,o){super(i,s,e,h,r,o),this.dt="Point Series",this.Ex=[],this.Rx=!1,this.Hx=3,this.Pa=0,this.Ux=t.PointShape.Circle,this.bb=Xd,this.Qe=Sr(this.Rs.polarPointSeriesFillStyle,n),this.jx=i.iS(h).eh(this.Qe).vl(this.Ux).Gt(this.Hx).Ys(this.getHighlight()).yl(Ba.Nearest),this.Xs(this.jx)}setCursorResultTableFormatter(t){return this.bb=t,this.Ls.$s.te(),this}getCursorResultTableFormatter(){return this.bb}setData(t){return this.Ex=qd(t),this.Rx=!0,this.Px=Kd(this.Ex),this.re.te(),this}setPointFillStyle(t){this.Qe="function"==typeof t?t(this.Qe):t;const i=this.Qe;return this.jx.eh(i),this.re.te(),this}getPointFillStyle(){return this.Qe}setPointSize(t){return this.Hx=t,this.jx.Gt(t),this.re.te(),this}getPointSize(){return this.Hx}setPointShape(t){return this.Ux=t,this.jx.vl(this.Ux),this}getPointShape(){return this.Ux}setPointRotation(t){return this.Pa=t,this.jx.gr(t),this.re.te(),this}getPointRotation(){return this.Pa}Dp(){return this.Op&&this.Ex.length>0&&this.getVisible()}ah(t,i){t.Ys(i),this.re.te()}fb(t,i){const s=this.jx.fb(t);if(!s)return;const{angle:e,amplitude:h}=Jd(s,this.scale);return _d(s,this.scale,this.bb(new ad,this,e,h,this.Ls.getAmplitudeAxis().formatValue).if(),this,"color"in s&&Ee(this.Qe)?new Be({color:s.color}):this.Qe)}solveNearestFromScreen(t){return this.fb(tc(t,this.Ls.$s),!1)}rh(){if(this.Rx||this.scale.Wx()){const t=Zd(this.Ex,this.scale),i=Xr(t);this.jx.Al()._l(t).oa(i),this.Rx=!1,this.jx.le()}}attach(t,i=!0){return super.attach(t,i),gr(t,this.Rs,{fill:this.Qe}),this}}class hg{constructor(t,i,s,e){this.At=new $e,this.$x=!1,this.Ls=t,this.Yx=i,this.sS=s,this.hl=e}setGeometry(t){return this.Xx=t,this.$x=!0,this.Ls.$s.te(),this}getGeometry(){return this.Xx}setMouseInteractions(t){return this.hl.setMouseInteractions(t),this}dispose(){return this.hl.dispose(),this.Yx(this),this.At.emit("dispose",this),this}onDispose(t){return this.At.on("dispose",t)}offDispose(t){return this.At.off(t,"dispose")}setVisible(t){const i=this.hl.getVisible()!==t;return this.hl.setVisible(t),i&&this.At.emit("visibleStateChanged",this,t),this.Ls.$s.te(),this}getVisible(){return this.hl.getVisible()}onVisibleStateChanged(t){return this.At.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.At.off(t,"visibleStateChanged")}}const rg=(t,i,s)=>{const h=i.Jt,r=s.Jt;let n=(t.x-h.getInnerStart())/(h.getInnerEnd()-h.getInnerStart()),o=(t.y-r.getInnerStart())/(r.getInnerEnd()-r.getInnerStart());return 1===s.Ng&&(n=1-n),1===i.Ng&&(o=1-o),e(o,n)};class ng extends fd{constructor(t,i,s,e,h,r,n,o,a){super(t,i,Vn(s.Jt,e.Jt),h,r,a),this.Zx=!1,this.Kx=!1,this.qx=!0,this.Jx=!0,this.Qx=!1,this.tM=!1,this.setGridStrokeYStyle=t=>(this.iM.setGridStrokeStyle(t),this),this.getGridStrokeYStyle=()=>this.iM.getGridStrokeStyle(),this.axisX=s,this.axisY=e,this.sM=n,this.eM=o,this.hM=this.axisX.ym(!1,this.sM).setMouseInteractions(!1).setAllocatesAxisSpace(!1),this.iM=this.axisY.ym(!1,this.eM).setMouseInteractions(!1).setAllocatesAxisSpace(!1)}dispose(){return super.dispose(),this.hM.dispose(),this.iM.dispose(),this}pointAt(t){return super.pointAt(t),this.setPosition(uh(t.location,t.scale,this.scale)),this}setPosition(t){super.setPosition(t),this.hM.setValue(t.x),this.iM.setValue(t.y);const i=rg(e(this.hM.getValue(),this.iM.getValue()),this.axisX,this.axisY);return this.hM.setGridStrokeLength(this.Qx?i.x:1),this.iM.setGridStrokeLength(this.tM?i.y:1),this}rh(){this.hM.setVisible(this.ds&&this.Yv).setMarkerVisible(this.ds&&this.Yv&&this.Zx),this.iM.setVisible(this.ds&&this.Yv).setMarkerVisible(this.ds&&this.Yv&&this.Kx);const t=rg(e(this.hM.getValue(),this.iM.getValue()),this.axisX,this.axisY);return this.hM.setGridStrokeLength(this.Qx?t.x:1),this.iM.setGridStrokeLength(this.tM?t.y:1),super.rh()}setGridStrokeXCut(t){return this.Qx=t,this.re.te(),this}getGridStrokeXCut(){return this.Qx}setGridStrokeYCut(t){return this.tM=t,this.re.te(),this}getGridStrokeYCut(){return this.tM}setGridStrokeXStyle(t){return this.hM.setGridStrokeStyle(t),this}getGridStrokeXStyle(){return this.hM.getGridStrokeStyle()}setTickMarkerXVisible(t){return this.Zx=t,this.re.te(),this}getTickMarkerXVisible(){return this.Zx}setTickMarkerYVisible(t){return this.Kx=t,this.re.te(),this}getTickMarkerYVisible(){return this.Kx}setTickMarkerX(t){return this.hM.setMarker(t),this}setTickMarkerY(t){return this.iM.setMarker(t),this}getTickMarkerX(){return this.hM.getMarker()}getTickMarkerY(){return this.iM.getMarker()}}class og extends cd{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,o),this.Qx=!1,this.tM=!1,this.rM=!1,this.nM=!1,this.oM=new Map,this.aM=new Map,this.Zx=!0,this.Kx=!0,this.Xv=e,this.Zv=h,this.sM=r,this.eM=n,this.lM=o.cursorGridStrokeStyleX,this.uM=o.cursorGridStrokeStyleY}dispose(){return super.dispose(),this.oM.forEach((t=>t.dispose())),this.aM.forEach((t=>t.dispose())),this.cM=void 0,this.fM=void 0,this}rh(){return this.cM&&this.cM.setVisible(this.ds&&this.Yv).setMarkerVisible(this.ds&&this.Yv&&this.Zx),this.fM&&this.fM.setVisible(this.ds&&this.Yv).setMarkerVisible(this.ds&&this.Yv&&this.Kx),super.rh()}pointAt(t){const{location:i}=t,{series:s}=t,{axisX:h}=s,{axisY:r}=s,n=this.Hh(h,!0),o=this.Hh(r,!1);n!==this.cM&&this.cM&&this.cM.setVisible(!1),o!==this.fM&&this.fM&&this.fM.setVisible(!1),n.setValue(i.x),o.setValue(i.y);const a=rg(e(i.x,i.y),h,r);return n.setGridStrokeLength(this.Qx?a.x:1),o.setGridStrokeLength(this.tM?a.y:1),this.cM=n,this.fM=o,super.pointAt(t)}Qv(t){if(super.Qv(t),t){const i=i=>i.setTextFillStyle(t);this.cM&&this.rM&&this.cM.setMarker(i),this.fM&&this.nM&&this.fM.setMarker(i)}}Hh(t,i){let s=(i?this.oM:this.aM).get(t);return s||(i?(s=t.ym(!1,this.sM),this.oM.set(t,s)):(s=t.ym(!1,this.eM),this.aM.set(t,s)),this.Lr(s,i),s.setMouseInteractions(!1).setAllocatesAxisSpace(!1)),s}Lr(t,i){const s=i?this.lM:this.uM;return t.setGridStrokeStyle(s),t.setMouseInteractions(!1),(i?this.Zx:this.Kx)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.Qx=t,this.re.te(),this}getGridStrokeXCut(){return this.Qx}setGridStrokeYCut(t){return this.tM=t,this.re.te(),this}getGridStrokeYCut(){return this.tM}setGridStrokeXStyle(t){return this.lM=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.oM.forEach((t=>t.setGridStrokeStyle(this.lM))),this}getGridStrokeXStyle(){return this.lM}setGridStrokeYStyle(t){return this.uM=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.aM.forEach((t=>t.setGridStrokeStyle(this.uM))),this}getGridStrokeYStyle(){return this.uM}setTickMarkerXVisible(t){return this.Zx=t,this.re.te(),this}getTickMarkerXVisible(){return this.Zx}setTickMarkerYVisible(t){return this.Kx=t,this.re.te(),this}getTickMarkerYVisible(){return this.Kx}setTickMarkerX(t){return this.oM.forEach((i=>i.setMarker(t))),this.sM=this.sM.addStyler(t),this.re.te(),this}setTickMarkerY(t){return this.aM.forEach((i=>i.setMarker(t))),this.eM=this.eM.addStyler(t),this.re.te(),this}setTickMarkerXAutoTextStyle(t){return this.rM=t,this.re.te(),this}getTickMarkerXAutoTextStyle(){return this.rM}setTickMarkerYAutoTextStyle(t){return this.nM=t,this.re.te(),this}getTickMarkerYAutoTextStyle(){return this.nM}}class ag extends dd{constructor(t,i,s,e,h){super(t,i,h),this.Xv=t,this.Zv=i,this.sM=s,this.eM=e,this.tb=h}}class lg extends ag{constructor(){super(...arguments),this.sb=(t,i,s,e)=>this.ib(new og(t,i,s,this.Xv,this.Zv,this.sM,this.eM,e),e),this.addStyler=t=>new lg(this.Xv,this.Zv,this.sM,this.eM,this.tb.map((t=>t)).concat(t)),this.setPointMarker=t=>new lg(t,this.Zv,this.sM,this.eM,this.tb.map((t=>t))),this.setResultTableBackground=t=>new lg(this.Xv,t,this.sM,this.eM,this.tb.map((t=>t)))}}class ug extends ag{constructor(){super(...arguments),this.eb=(t,i,s,e,h)=>this.ib(new ng(t,i,s,e,this.Xv,this.Zv,this.sM,this.eM,h),h),this.addStyler=t=>new ug(this.Xv,this.Zv,this.sM,this.eM,this.tb.map((t=>t)).concat(t)),this.setPointMarker=t=>new ug(t,this.Zv,this.sM,this.eM,this.tb.map((t=>t))),this.setResultTableBackground=t=>new ug(this.Xv,t,this.sM,this.eM,this.tb.map((t=>t)))}}const cg=new lg(Ul,Ul,Tu.PointableTextBox,Tu.PointableTextBox,[(t,i)=>{yd(t),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),kl(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),kl(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),fg=new ug($l,Ul,Tu.PointableTextBox,Tu.PointableTextBox,[(t,i)=>{pd(t,i),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),kl(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),kl(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),dg=(i,s,e)=>{switch(i){case t.UIVisibilityModes.always:return!0;case t.UIVisibilityModes.never:return!1;case t.UIVisibilityModes.whenDragged:return e;case t.UIVisibilityModes.whenHovered:return s&&!e;case t.UIVisibilityModes.whenHoveredOrDragged:return e||s;case t.UIVisibilityModes.whenNotDragged:return!e;default:return!1}},gg=(t,i)=>Math.min(Math.max(t,i.getInnerStart()),i.getInnerEnd());class mg{constructor(i,s,h,r,n,o){this.dM=t.UIVisibilityModes.always,this.gM=t.UIVisibilityModes.always,this.Ko=!0,this.fs=!1,this.mM=!1,this.yM=!1,this.Ca=e(0,0),this.Fc=t.UIDraggingModes.draggable,this.Ic=void 0,this.At=new $e,this.ds=!0,this.pM=(i,s,e)=>{this.mM=!0,this.re.te();const h=this.Fc===t.UIDraggingModes.notDraggable?this.Fc:e||this.Fc;this.Ic=this.re.$s.cn(h===t.UIDraggingModes.notDraggable?t.MouseStyles.Restricted:h===t.UIDraggingModes.draggable?t.MouseStyles.Move:h===t.UIDraggingModes.onlyHorizontal?t.MouseStyles.Horizontal:t.MouseStyles.Vertical)},this.SM=()=>{this.mM=!1,this.re.te(),this.re.$s.fn(this.Ic)},this.vM=(t,i)=>{this.yM=!0,ir(i),this.re.te()},this.bM=(i,s)=>{if(this.Fc!==t.UIDraggingModes.notDraggable){const h=s||this.Fc,r=uh(this.re.$s.lh(i.x,i.y),this.re.$s.Jt,this.scale),n=e(h!==t.UIDraggingModes.onlyVertical?gg(r.x,this.scale.x):this.Ca.x,h!==t.UIDraggingModes.onlyHorizontal?gg(r.y,this.scale.y):this.Ca.y);return this.setPosition(n),!0}return!1},this.xM=(t,i)=>{this.yM=!1,ir(i),this.re.te()},this.onDispose=t=>this.At.on("dispose",t),this.offDispose=t=>this.At.off(t,"dispose"),this.re=i,this.renderingScale=s,this.scale=h,this.Ob=r,this.MM=n,this.Rs=o;const a=r.getPointMarker().setMouseInteractions(!0);a.onMouseEnter(((t,i)=>this.pM(t,i))),a.onMouseLeave(this.SM),a.onMouseDragStart(this.vM),a.onMouseDrag(((t,i)=>this.bM(e(i.clientX,i.clientY))&&ir(i))),a.onMouseDragStop(this.xM),a.onTouchStart(this.vM),a.onTouchMove(((t,i)=>this.bM(e(i.clientX,i.clientY))&&ir(i))),a.onTouchEnd(this.xM),r.getResultTable().setMouseInteractions(!0),this.setPosition(this.Ca)}setPosition(t){return this.Ca=t,this.Ob.setPosition(t),this.At.emit("positionChange",this,this.Ca),this}getPosition(){return this.Ca}onPositionChange(t){return this.At.on("positionChange",t)}offPositionChange(t){return this.At.off(t,"positionChange")}setPointMarkerVisibility(t){return this.dM=t,this.re.te(),this}getPointMarkerVisibility(){return this.dM}setResultTableVisibility(t){return this.gM=t,this.re.te(),this}getResultTableVisibility(){return this.gM}setMouseInteractions(t){return this.Ko=t,this.Ob.getPointMarker().setMouseInteractions(t),this.Ob.getResultTable().setMouseInteractions(t),this}getMouseInteractions(){return this.Ko}setAutoFitStrategy(t){return this.Ob.setAutoFitStrategy(t),this}getAutoFitStrategy(){return this.Ob.getAutoFitStrategy()}isAttached(){return!0}rh(){const t=this.isAttached();return dg(this.dM,this.mM,this.yM)?this.Ob.setPointMarkerVisible(!0):this.Ob.setPointMarkerVisible(!1),t&&dg(this.gM,this.mM,this.yM)?this.Ob.setResultTableVisible(!0):this.Ob.setResultTableVisible(!1),this.Ob.rh(),this}le(){return this.Ob.le(),this}pointAt(t){return this.Ob.pointAt(t),this}dispose(){return this.fs||(this.fs=!0,this.MM(this),this.Ob.dispose(),this.At.emit("dispose")),this}setVisible(t){const i=this.ds!==t;return this.ds=t,this.Ob.setVisible(t),i&&this.At.emit("visibleStateChanged",this,this.ds),this}getVisible(){return this.ds}onVisibleStateChanged(t){return this.At.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.At.off(t,"visibleStateChanged")}setPointMarker(t){return this.Ob.setPointMarker(t),this}getPointMarker(){return this.Ob.getPointMarker()}setResultTable(t){return this.Ob.setResultTable(t),this}getResultTable(){return this.Ob.getResultTable()}setDraggingMode(i=t.UIDraggingModes.notDraggable){return this.Fc=i,this.re.te(),this}getDraggingMode(){return this.Fc}}class yg extends mg{constructor(i,s,h,r,n,o,a){super(i,s,Vn(h.Jt,r.Jt),n.eb(i,s,h,r,a),o,a),this._M=t.UIVisibilityModes.always,this.AM=t.UIVisibilityModes.always,this.wM=t.UIVisibilityModes.always,this.kM=t.UIVisibilityModes.always,this.gridStrokeStyleX=this.Ob.getGridStrokeXStyle(),this.gridStrokeStyleY=this.Ob.getGridStrokeYStyle(),this.re=i,this.axisX=h,this.axisY=r,this.MM=o;const l=this.Ob.getTickMarkerX().setMouseInteractions(!0);l.onMouseEnter(((i,s)=>this.pM(i,s,t.UIDraggingModes.onlyHorizontal))),l.onMouseLeave(this.SM),l.onMouseDragStart(this.vM),l.onMouseDrag(((i,s)=>this.bM(e(s.clientX,s.clientY),t.UIDraggingModes.onlyHorizontal)&&ir(s))),l.onMouseDragStop(this.xM),l.onTouchStart(this.vM),l.onTouchMove(((i,s)=>this.bM(e(s.clientX,s.clientY),t.UIDraggingModes.onlyHorizontal)&&ir(s)));const u=this.Ob.getTickMarkerY().setMouseInteractions(!0);u.onMouseEnter(((i,s)=>this.pM(i,s,t.UIDraggingModes.onlyVertical))),u.onMouseLeave(this.SM),u.onMouseDragStart(this.vM),u.onMouseDrag(((i,s)=>this.bM(e(s.clientX,s.clientY),t.UIDraggingModes.onlyVertical)&&ir(s))),u.onMouseDragStop(this.xM),u.onTouchStart(this.vM),u.onTouchMove(((i,s)=>this.bM(e(s.clientX,s.clientY),t.UIDraggingModes.onlyVertical)&&ir(s)))}rh(){const t=this.isAttached();return this.ds&&t&&dg(this.wM,this.mM,this.yM)?this.Ob.setTickMarkerXVisible(!0):this.Ob.setTickMarkerXVisible(!1),this.ds&&t&&dg(this.kM,this.mM,this.yM)?this.Ob.setTickMarkerYVisible(!0):this.Ob.setTickMarkerYVisible(!1),this.Ob.setGridStrokeXStyle(this.ds&&t&&dg(this._M,this.mM,this.yM)?this.gridStrokeStyleX:rh),this.Ob.setGridStrokeYStyle(this.ds&&t&&dg(this.AM,this.mM,this.yM)?this.gridStrokeStyleY:rh),super.rh()}setGridStrokeXVisibility(t){return this._M=t,this.re.te(),this}getGridStrokeXVisibility(){return this._M}setGridStrokeYVisibility(t){return this.AM=t,this.re.te(),this}getGridStrokeYVisibility(){return this.AM}setTickMarkerXVisibility(t){return this.wM=t,this.re.te(),this}getTickMarkerXVisibility(){return this.wM}setTickMarkerYVisibility(t){return this.kM=t,this.re.te(),this}getTickMarkerYVisibility(){return this.kM}setGridStrokeXCut(t){return this.Ob.setGridStrokeXCut(t),this}getGridStrokeXCut(){return this.Ob.getGridStrokeXCut()}setGridStrokeYCut(t){return this.Ob.setGridStrokeYCut(t),this}getGridStrokeYCut(){return this.Ob.getGridStrokeYCut()}setGridStrokeXStyle(t){return this.gridStrokeStyleX="function"==typeof t?t(this.gridStrokeStyleX):t,this}getGridStrokeXStyle(){return this.Ob.getGridStrokeXStyle()}setGridStrokeYStyle(t){return this.gridStrokeStyleY="function"==typeof t?t(this.gridStrokeStyleY):t,this}getGridStrokeYStyle(){return this.Ob.getGridStrokeYStyle()}setTickMarkerX(t){return this.Ob.setTickMarkerX(t),this}getTickMarkerX(){return this.Ob.getTickMarkerX()}setTickMarkerY(t){return this.Ob.setTickMarkerY(t),this}getTickMarkerY(){return this.Ob.getTickMarkerY()}setMouseInteractions(t){return super.setMouseInteractions(t),this.Ob.getTickMarkerX().setMouseInteractions(t),this.Ob.getTickMarkerY().setMouseInteractions(t),this}}class pg extends yg{}class Sg extends pg{constructor(t,i,s,e,h,r){super(t,i,s.axisX,s.axisY,e,h,r),this.CM=!1,this.re=t,this.owningSeries=s}setPosition(t){return super.setPosition(t),this.CM=!1,this.re.te(),this}le(){if(!this.CM){const t=this.owningSeries.solveNearestFromScreen(uh(this.Ca,this.scale,this.re.$s.Jt));t?(this.Ca=uh(t.location,this.owningSeries.scale,this.scale),this.Ob.pointAt(t),this.CM=!0):this.Ob.setPosition(this.Ca)}return super.le()}isAttached(){return this.CM}}class vg extends $d{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,a,l),this.TM=[],this.addMarker=(t=fg)=>{const i=new Sg(this.FM(),this.Ls.uiScale,this,t,this.removeMarker,this.Rs);return this.TM.push(i),i},this.removeMarker=t=>{const i=this.TM.indexOf(t);-1!==i&&this.TM.splice(i,1)},this.zs=new Map,this.chart=t,this.re=s,this.axisX=e,this.axisY=h,this.axisXAttachHandler=r,this.axisYAttachHandler=n,this.FM=o,this.scale=Vn(e.Jt,h.Jt),this.IM=t.PM,t.PM+=1,this.DM(this.scale),this.attacheAxis(),this.onMouseEnter(this.chart.BM),this.onMouseLeave(this.chart.OM),this.onMouseWheel(this.chart.Ep),this.onMouseDragStart(this.chart.LM),this.onMouseDrag(this.chart.Rp),this.onMouseDragStop(this.chart.EM),this.onTouchStart(this.chart.zp.onTouchStart),this.onTouchMove(this.chart.zp.onTouchMove),this.onTouchEnd(this.chart.zp.onTouchEnd)}attacheAxis(){this.RM=this.axisXAttachHandler(this),this.zM=this.axisYAttachHandler(this)}rh(){super.rh();for(let t=0;t<this.TM.length;t+=1)this.TM[t].le().rh()}Xs(t,i){super.Xs(t,i),t.ga(this.IM)}setDrawOrder(t){return this.IM=t.seriesDrawOrderIndex,this.zs.forEach(((t,i)=>{i.ga(this.IM)})),this.Ls.$s.te(),this}dispose(){return super.dispose(),this.TM.slice().forEach((t=>t.dispose())),this.RM(this),this.zM(this),this}VM(){for(let t=0;t<this.TM.length;t+=1)this.TM[t].setPosition(this.TM[t].getPosition());this.re.te()}getBoundaries(){return a(e(this.getXMin()||0,this.getYMin()||0),e(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const bg=(t,i,s,e)=>{const h=t.length;let r=0;if(void 0!==i){const h=s-i;if(h>0){const i=t.slice(r,h);r+=h,e(i,!0)}}for(;r<h;){const i=t.slice(r,r+s);r+=s,e(i,!1)}},xg=(t,i=(t=>t))=>{const s=[];let e;for(let h=0;h<t.length;h+=1){e=t[h];const r=i(e.Sl()),n=e.pl(),o=n?i(n):[];let a=!1,l=!1;"Ql"in e&&(a=e.Ql(),l=e.iu()),s.push.apply(s,r.slice(a?1:0,r.length-(l&&0===o.length?1:0))),s.push.apply(s,o.slice(a&&0===r.length?1:0,o.length-(l?1:0)))}return s},Mg=(t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:e+i*s,y:t[s]};return h},_g=(t,i,s,e)=>t.addRow(i.getName()).addRow("X","",i.axisX.formatValue(s)).addRow("Y","",i.axisY.formatValue(e));class Ag extends vg{constructor(i,s,e,h,r,n,o,a,l,u,c){super(i,s,e,h,r,n,o,a,u,c),this.NM=[],this.Du=[],this.GM=0,this.gs=!1,this.cs=t.HighlightModes.onHover,this.bb=_g,this.WM=l}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.GM=void 0!==i&&i>0?i:0,this.re.te(),this}add(t){if(Array.isArray(t)?this.HM(t):this.HM([t]),this.Du.length>0){const t=this.Du[this.Du.length-1];this.UM={x:t.x,y:t.y}}return this}addArrayX(t,i=1,s){let e=s;return e||(e=this.UM?this.UM.y+i:0),this.add(((t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:t[s],y:e+i*s};return h})(t,i,e)),this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.UM?this.UM.x+i:0),this.add(Mg(t,i,e)),this}addArraysXY(t,i){if(t.length!==i.length)throw new Error("arrayX and arrayY lengths are not equal");return this.add(((t,i)=>{const s=new Array(t.length);for(let e=0;e<t.length;e+=1)s[e]={x:t[e],y:i[e]};return s})(t,i)),this}setCursorResultTableFormatter(t){return this.bb=t,this.Ls.$s.te(),this}getCursorResultTableFormatter(){return this.bb}getPointAmount(){return this.NM.reduce(((t,i)=>t+i.wl()+i.kl()),this.Du.length)}clear(){this.jM=void 0;for(let t=0;t<this.NM.length;t+=1)this.NM[t].Al();return this.Du.length=0,this.UM=void 0,this.re.te(),this.At.emit("dataClear",this),this}getLastPoint(){return this.UM}Dp(){return this.Op&&this.getPointAmount()>0&&this.getVisible()}getXMax(){return this.WM.getXMax(this.NM,this.jM)||0}getXMin(){return this.WM.getXMin(this.NM,this.jM)||0}getYMax(){return this.WM.getYMax(this.NM,this.jM)||0}getYMin(){return this.WM.getYMin(this.NM,this.jM)||0}Yr(){const t=e(0,0);for(const i of this.NM)t.x=Math.max(t.x,i.Rl()),t.y=Math.max(t.y,i.zl());return t}$M(t,i,s,e){this.WM.$M(t,i,s,e,this.scale,(t=>{}))}Gp(){super.Gp();const t=this.NM.length;this.YM&&this.$M(this.NM,this.getPointAmount(),this.YM,this.GM),t!==this.NM.length&&this.VM()}rh(){super.rh();const t=this.getBoundaries();this.Du.length>0&&(this.XM(this.Du),this.Du=[]);for(const i of this.NM)i.oa(t);return super.rh()}Yy(){super.Yy(),this.jM=void 0,this.Du.length=0}HM(t){0!==t.length&&(this.jM?this.jM=Kr(this.jM,Xr(t)):this.jM=Xr(t),this.At.emit("dataAdd",this,t,this.jM),this.Du=ur(this.Du,t,{canReturnB:!1}),this.re.te())}ZM(){return xg(this.NM)}KM(t){return this.At.on("dataAdd",t)}qM(t){return this.At.off(t)}JM(t){return this.At.on("dataClear",t)}QM(t){return this.At.off(t)}}const wg=(t,i,s,e)=>{let h,r,n=Number.MAX_VALUE;for(let o=0;o<i.length;o+=1){const a=i[o],l=s(a,t);if(l){const i=e(t,l);(void 0===h||i<n)&&(h=l,r=a,n=i)}}return h&&r?[h,r]:void 0};class kg extends Yd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.dt="Polygon Series",this.t_=[],this.i_=[],this.bb=Xd,this.s_=t=>{const i=this.i_.indexOf(t);i>=0&&this.i_.splice(i,1);const s=this.t_.findIndex((i=>i===t.hl));s>=0&&this.t_.splice(s,1),this.re.te()},this.Qe=Sr(this.Rs.polarPolygonSeriesFillStyle,r),this.th=Sr(this.Rs.polarPolygonSeriesStrokeStyle,r)}setCursorResultTableFormatter(t){return this.bb=t,this.Ls.$s.te(),this}getCursorResultTableFormatter(){return this.bb}addPolygon(){const t=new hg(this.Ls,this.s_,this,this.e_());return this.i_.push(t),t}setFillStyle(t){this.Qe="function"==typeof t?t(this.Qe):t;const i=this.Qe;for(const t of this.t_)t.eh(i);return this.re.te(),this}getFillStyle(){return this.Qe}setStrokeStyle(t){this.th="function"==typeof t?t(this.th):t;const i=this.th;for(const t of this.t_)t.sh(i);return this.re.te(),this}getStrokeStyle(){return this.th}Dp(){return this.Op&&void 0!==this.i_.find((t=>void 0!==t.h_))&&this.getVisible()}rh(){this.i_.forEach((t=>{(t.$x||this.scale.Wx())&&t.r_&&(t.hl.Ll(Zd(t.r_,this.scale)),t.$x=!1,t.hl.le())}))}Gp(){super.Gp();const t=a(Dr,Br);this.i_.forEach((i=>{if(!i.Xx)return;const s=!i.$x&&i.r_?i.r_:qd(i.Xx);i.r_=s;const e=!i.$x&&i.h_?i.h_:Kd(s);i.h_=e,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)})),this.Px=t}ah(t,i){t.Ys(i),this.re.te()}fb(t,i){const s=wg(t,this.t_,((t,i)=>{const s=t.fb(i);if(s)return uh(s,this.scale,t.$s.Jt)}),Hr);if(!s)return;const e=uh(s[0],s[1].$s.Jt,this.scale),h=this.n_(s[1]);if(!h)return;const{angle:r,amplitude:n}=Jd(e,this.scale);return{location:e,scale:this.scale,resultTableContent:this.bb(new ad,this,r,n,this.Ls.getAmplitudeAxis().formatValue).if(),series:this,fillStyle:this.Qe,polarPolygon:h}}solveNearestFromScreen(t){return this.fb(tc(t,this.Ls.$s),!1)}attach(t,i=!0){return super.attach(t,i),gr(t,this.Rs,{fill:this.Qe,stroke:this.th}),this}e_(){const t=this.re.af(this.scale,ol.Simple).eh(this.Qe).sh(this.th).Ys(this.getHighlight());return this.t_.push(t),this.Xs(t),t}n_(t){return this.i_.find((i=>i.hl===t))}}class Cg extends Yd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.dt="Area Series",this.Ex=[],this.Rx=!1,this.zx=!1,this.o_=!1,this.bb=Xd,this.Qe=Sr(this.Rs.polarAreaSeriesFillStyle,r),this.th=Sr(this.Rs.polarAreaSeriesStrokeStyle,r)}setCursorResultTableFormatter(t){return this.bb=t,this.Ls.$s.te(),this}getCursorResultTableFormatter(){return this.bb}setData(t){const i=(t=>{const i=[];let s,e,h=!1;for(let r=0;r<t.length;r+=1){const n=t[r];let o=!0;if(s){o=!1;const t=n.angle-s.angle;if(Ih(t,0))o=!0;else{const i=Math.sign(t);void 0===e?(e=i,o=!0):e===i&&(o=!0)}}o?i.push(n):h=!0,s=n}return{progressivePoints:i,userDataModified:h}})(t);return i.userDataModified&&!1===this.o_&&(console.warn(`${this.dt} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.o_=!0),this.Ex=i.progressivePoints,this.Rx=!0,this.Px=Kd(this.Ex),this.re.te(),this}setFillStyle(t){return this.Qe="function"==typeof t?t(this.Qe):t,this.re.te(),this}getFillStyle(){return this.Qe}setStrokeStyle(t){return this.th="function"==typeof t?t(this.th):t,this.re.te(),this}getStrokeStyle(){return this.th}setConnectDataAutomaticallyEnabled(t){return this.zx=t,this.re.te(),this}getConnectDataAutomaticallyEnabled(){return this.zx}Dp(){return this.Op&&this.Ex.length>0&&this.getVisible()}attach(t,i=!0){return super.attach(t,i),gr(t,this.Rs,{fill:this.Qe,stroke:this.th}),this}}class Tg extends Cg{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.a_=this.re.af(this.scale,ol.Simple).Ys(this.getHighlight()),this.Xs(this.a_)}rh(){if(this.Rx||this.scale.Wx()){const t=this.Ex,i=!0===this.zx?Zd(t.concat((t=>{if(0===t.length)return t;const i=t[0],s=t[t.length-1];if(Ih(i.angle,s.angle))return t;const e=1*Math.sign(s.angle-i.angle);let h=0;const r=[];for(let t=s.angle+e;!Ih(t%360,i.angle%360);t+=e)if(r.push({angle:t,amplitude:0}),h+=1,h>360)return[];for(let t=0;t<r.length;t+=1)r[t].amplitude=Iu(s.amplitude,i.amplitude,(t+1)/(r.length+1));return r})(t)),this.scale):[...Zd(t,this.scale),{x:0,y:0}];this.a_.Ll(i).eh(this.Qe).sh(this.th),this.Rx=!1,this.a_.le()}}ah(t,i){t.Ys(i),this.re.te()}fb(t,i){const s=this.a_.fb(t);if(!s)return;const{angle:e,amplitude:h}=Jd(s,this.scale);return _d(s,this.scale,this.bb(new ad,this,e,h,this.Ls.getAmplitudeAxis().formatValue).if(),this,this.Qe)}solveNearestFromScreen(t){return this.fb(tc(t,this.Ls.$s),!1)}}class Fg extends En{constructor(){super(...arguments),this.ns="RadialScale",this.l_={start:0,end:1},this.u_=!1,this.c_=0,this.Et=e(0,0),this.f_=[0,0],this.d_=[0,0],this.o=!0,this.Ni=!0,this.g_=!0,this.m_=!0,this.y_={x:0,y:0},this.Di={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}mx(t,i){return t===this.l_.start&&i===this.l_.end||(this.l_={start:t,end:i},this.g_=!0,this.p_()),this}gx(){return this.l_}ux(){return this.l_.end>=this.l_.start}_x(t){this.u_=t,this.m_=!0}wx(){return!1===this.u_}Ax(t){this.c_=t,this.m_=!0}bx(){return this.c_}Ri(){return this.Ni}Ui(){return!1}Zt(t,i,s,e){return this.x=new On(t.x,i.x,s.x,e?e.x:void 0),this.y=new On(t.y,i.y,s.y,e?e.y:void 0),this}zi(){return this.Di}Wx(){return this.g_}S_(){return this.m_}os(){return this.y_}Rt(){return this.o=!1,this.Ni=!1,this.g_=!1,this.m_=!1,this}zt(){return this.o=!0,this.Ni=!0,this.g_=!0,this.m_=!0,this}Gt(t,i){return"object"==typeof t?(this.Et.x=t.x,this.Et.y=t.y):(this.Et.x=t,this.Et.y=i),this.p_(),this}ts(t){return this.f_=t,this.p_(),this}ss(t){return this.d_=t,this.p_(),this}ki(){return e(this.f_[0]+this.f_[1],this.d_[0]+this.d_[1])}Ci(){return this.Et}p_(){const t=this.l_,i=e(this.x.Ti(this.Et.x),this.y.Ti(this.Et.y)),s=this.f_[0]+this.f_[1],h=this.d_[0]+this.d_[1],r=Math.max(i.x-s,0),n=Math.max(i.y-h,0),o=.5*(r>n?n:r),a=[this.f_[0]+Math.max((r-2*o)/2,0),this.f_[1]+Math.max((r-2*o)/2,0)],l=[this.d_[0]+Math.max((n-2*o)/2,0),this.d_[1]+Math.max((n-2*o)/2,0)],u=Math.abs(t.end-t.start);this.x.Gt(this.Et.x).Mi(a).Vt(-u,u),this.y.Gt(this.Et.y).Mi(l).Vt(-u,u),this.y_={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.Di={x:this.x.zi(),y:this.y.zi()},this.zt()}Ei(t,i){const s=this.os();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}ls(t,i,s,e){const h=this.os(),r=rn(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class Ig extends Dd{constructor(i,s,e,h,r,n,o){super(i,s,e,s.Gm("polarChart bg",0),h,s.$s.Rs.polarChartBackgroundFillStyle,s.$s.Rs.polarChartBackgroundStrokeStyle,s.$s.Rs.polarChartTitleFont,s.$s.Rs.polarChartTitleFillStyle,o),this.coordsClient="client",this.hb=t.AutoCursorModes.snapToClosest,this.Ld=[],this.Ko=!0,this.v_=(t,i,s,e,h)=>{this.Zb.Gt(e,h)},this.zd=hr(this.Ld),this.b_=t=>{this.Ld.push(t)},this.x_=()=>this.sS,this.Yd.oo||this.Yd.no||this.$s.ho(4),this.M_=s.mv("polarChart series bg",0),this.__=s.Py("polarChart axis gridlines",0),this.A_=s.Py("polarChart series",1),this.w_=s.Py("polarChart axis lines",2),this.k_=s.Py("polarChart axis ticks",3),this.Zb=e.d2({scaleXYConstructor:Fg}),this.onResize(this.v_),this.jm.lr("Polar Chart");const a=Rh(n?n.autoCursorBuilder:void 0,xd);this.cb=a.sb(this.nb,this.uiScale,this.uiScale,this.Rs),this.lS=this.M_.df(this.Zb).eh(this.Rs.polarChartSeriesBackgroundFillStyle).sh(rh).bu(0).yh(360).Au(0),this.uS=this.M_.df(this.Zb).eh(Ie).sh(this.Rs.polarChartSeriesBackgroundStrokeStyle).bu(0).yh(360).Au(0),super.aS(this.lS,this.uS),this.Nm(r,this.pixelScale),this.C_=new zd(this,this.Zb,this.Rs,!(!n||!0!==n.disableAnimations),this.__,this.w_,this.k_,this.Ns,this.x_),this.T_=new Nd(this,this.Zb,this.Rs,!(!n||!0!==n.disableAnimations),this.__,this.w_,this.k_,this.Ns),this.coordsAxis={axisAmplitude:this.C_,axisRadial:this.T_},n&&!0===n.disableAnimations&&this.setAnimationsEnabled(!1)}getSeries(){return this.sS}translateCoordinate(t,i,s){if(s){const i=t,e=this.pixelScale,h=s;if(Nn(h)){const t=uh(i,e,this.engine.scale);return this.$s.Zo({engineX:t.x,engineY:t.y})}if(Wn(h))return i;if(Hd(h)){const t=uh(i,e,this.Zb);return Jd(t,this.Zb)}}else{const s=t,e=i;if(Gn(s)){if(Hd(e)){const t=this.$s.Xo(s),i=uh({x:t.engineX,y:t.engineY},this.engine.scale,this.Zb);return Jd(i,this.Zb)}if(Nn(e))return s;if(Wn(e)){const t=this.$s.Xo(s);return uh({x:t.engineX,y:t.engineY},this.$s.Jt,this.pixelScale)}}else if(Ud(s)){if(Hd(e))return s;const t=Zd([s],this.Zb)[0];if(Nn(e)){const i=uh(t,this.Zb,this.engine.scale),s={engineX:i.x,engineY:i.y};return this.$s.Zo(s)}if(Wn(e))return uh(t,this.Zb,this.pixelScale)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const i=new ig(this.A_,this,this.hS,this.Zb,this.Rs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length,this.$s.Ns);return this.cS(i),i}addPointSeries(t){const i=new eg(this.A_,this,this.hS,this.Zb,this.Rs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length,this.$s.Ns);return this.cS(i),i}addPointLineSeries(t){const i=new sg(this.A_,this,this.hS,this.Zb,this.Rs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length,this.$s.Ns);return this.cS(i),i}addAreaSeries(t){const i=new Tg(this.A_,this,this.hS,this.Zb,this.Rs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length,this.$s.Ns);return this.cS(i),i}addPolygonSeries(t){const i=new kg(this.A_,this,this.hS,this.Zb,this.Rs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length,this.$s.Ns);return this.cS(i),i}addHeatmapSeries(t){const i=new Qd(this.A_,this,this.hS,this.Zb,this.Rs,this.$s.Ns,t);return this.cS(i),i}addSector(){const t=new jd(this.A_,this,this.zd,this.Zb,this.Rs,this.$s.Ns);return this.b_(t),t}getAmplitudeAxis(){return this.C_}getRadialAxis(){return this.T_}rh(t){var i,s;super.rh(t),Qc.Km(this.jm,this.Wm);for(const t of this.sS)t.Gp();this.C_.Xr(),this.T_.Xr();for(const t of this.sS)t.rh();for(let t=1;t<=2;t+=1){const i=this.C_.rh(),s=this.T_.rh(),e=Qc.Zm(this.jm,this.Wm),h=[this.Ba.left+s,this.Ba.right+s],r=[this.Ba.bottom+s,this.Ba.top+s+e];this.Zb.ts(h).ss(r);const n=4;if(!(!this.F_||Math.abs(this.F_.amplitude-i)>=n||Math.abs(this.F_.radial-s)>=n)||1!==t){this.F_={amplitude:i,radial:s};break}}const e=this.Zb.gx().start,h=this.Zb.gx().end,r=this.Zb.ux()?((null===(i=this.F_)||void 0===i?void 0:i.radial)||0)*this.Zb.x.getPixelSize()+h-e:((null===(s=this.F_)||void 0===s?void 0:s.radial)||0)*this.Zb.x.getPixelSize()+e-h;this.lS.xu(r).wu(360),this.uS.xu(r).wu(360);for(const t of this.Ld)t.rh();this.gb(!1);for(const t of this.sS)t.Yy();return super.Vm(),this.I_(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.C_.setAnimationsEnabled(t),this.T_.setAnimationsEnabled(t),this}setMouseInteractions(t){return this.Ko=t,this}getMouseInteractions(){return this.Ko}getMinimumSize(){return e(Pg,Pg)}I_(){}forEachAxis(t){return t(this.C_),t(this.T_),this}dispose(){return this.M_.Pt(),this.__.Pt(),this.A_.Pt(),this.w_.Pt(),this.k_.Pt(),this.Ld.slice().forEach((t=>t.dispose())),super.dispose()}qf(){return[...this.sS,...this.Ld]}}const Pg=300;class Dg extends hf{}class Bg extends Dg{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.dt="Slice",this.u=0,this.qm=!1,this.P_=Ie,this.Qm=Ie,this.ty=this.u,this.ey=Ze((()=>this.Ls.$s.te())),this.ny=()=>{this.oy=void 0},this.index=t,this.Ls=e,this.scale=h,this.Es=r,this.a_=i.af(h,ol.Simple).Ys(this.getHighlight()),this.Xs(this.a_),this._h=s.tn(h).Ys(this.getHighlight()),this.Xs(this._h,{isText:!0})}setValue(t){return this.Ls.getAnimationsEnabled()?this.getVisible()&&this.my(this.ty,t):this.ty=t,this.u=t,this.Ls.$s.te(),this}getValue(){return this.u}setVisible(t){return!1===t?this.Ls.getAnimationsEnabled()&&this.ty>0?(this.oy&&(this.oy.finish(!1),this.oy=void 0),this.my(this.ty,0,(()=>super.setVisible(!1)))):(this.ty=0,super.setVisible(!1)):this.Ls.getAnimationsEnabled()?(this.oy&&(this.oy.finish(!1),this.oy=void 0),super.setVisible(!0),this.my(this.ty,this.u)):(this.ty=this.u,super.setVisible(!0)),this}my(t,i,s){this.oy=this.ey(300,Ye.ease)([[t,i]],(([t])=>{this.ty=t,this.Ls.$s.te()})),this.oy.onEveryAnimationEnd(this.ny),s&&this.oy.onAnimationEnd(s)}setStyle(t,i,s,e){this.P_=t,this.Qm=s,this.a_.eh(this.P_).sh(i),this._h.eh(this.Qm).dr(e);for(let t=0;t<this.ps.length;t+=1)this.styleAttachedEntry(this.ps[t])}getAnimatedValue(){return this.ty}ah(t,i){return t.Ys(i),this.Ls.$s.te(),this}attach(t,i=!0){return super.attach(t,i),this.styleAttachedEntry(t),this}styleAttachedEntry(t){gr(t,this.Rs,{fill:this.P_,stroke:this.a_.Co()})}}var Og;t.FunnelSliceModes=void 0,(Og=t.FunnelSliceModes||(t.FunnelSliceModes={}))[Og.VariableHeight=0]="VariableHeight",Og[Og.VariableWidth=1]="VariableWidth";const Lg=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},Eg=(i,s,e,h,r,n=0,o=t.FunnelSliceModes.VariableHeight,a)=>{s=Lg(s,h.x),e=Lg(e,h.x);const l=i.length;let u=0,c=0;u=i.reduce(((t,i)=>t+i.getAnimatedValue()),0);let f={x:a-s/2,y:h.y+r.bottom},d={x:a+s/2,y:h.y+r.bottom},g={x:0,y:r.bottom},m={x:0,y:r.bottom},y=0,p=0;if(n)for(let s=0;s<i.length;s+=1){const e=10;p+=i[s].getAnimatedValue();const a=o===t.FunnelSliceModes.VariableWidth?(h.y-n*l)/l:h.y+r.bottom-p/u*h.y;if(o===t.FunnelSliceModes.VariableWidth){n=a-n<e?Math.max(20,a-e):n;break}0!==y&&y-a-n<e&&(n=Math.max(0,y-a-e)),y=a}const S=(s-e)/2/h.y;for(let y=0;y<l;y+=1){const p=i[y];c+=p.getAnimatedValue();const v=o===t.FunnelSliceModes.VariableWidth?(h.y-n*l)/l:h.y+r.bottom-c/u*h.y;let b=0;y>0&&(f={x:g.x+S*n,y:g.y-n},d={x:m.x-S*n,y:m.y-n}),b=(s+c/u*(e-s))/2,g={x:a-b,y:parseInt(`${o===t.FunnelSliceModes.VariableWidth?f.y-v:v}`,10)},m={x:a+b,y:parseInt(`${o===t.FunnelSliceModes.VariableWidth?d.y-v:v}`,10)},d.x>=f.x&&m.x>g.x&&p.a_.Ll([g,f,d,m])}};class Rg extends Jc{constructor(i,s,e,h,r,n,o){super(i,s,e,s.Gm("funnelChart bg",0),h,s.$s.Rs.funnelChartBackgroundFillStyle,s.$s.Rs.funnelChartBackgroundStrokeStyle,s.$s.Rs.funnelChartTitleFont,s.$s.Rs.funnelChartTitleFillStyle,n),this.yy=[],this.py=sf.None,this.by=!0,this._y=0,this.D_=80,this.B_=20,this.O_=0,this.L_=t.FunnelSliceModes.VariableHeight,this.ky=!0,this.Ty=t=>{const i=this.yy.indexOf(t);i>=0&&(this.yy.splice(i,1),this.Fy())},this.Yd.oo||this.Yd.no||this.$s.ho(5),this.Cy=this.Rs.effectsText,this.Iy=s.Py("funnelChart bottom",0),this.Dy=s.Py("funnelChart top",1),this.jm.lr("Funnel Chart"),this.Sy=this.Rs.funnelChartSliceFillStylePalette,this.vy=this.Rs.funnelChartSliceStrokeStyle,this.xy=this.Rs.funnelChartSliceLabelFont,this.My=this.Rs.funnelChartSliceLabelFillStyle,o&&this.setAnimationsEnabled(!1),this.Nm(r,this.pixelScale)}addSlice(t,i){const s=new Bg(this._y,this.Iy,this.Dy,this,this.pixelScale,this.Ty,this.Rs,this.$s.Ns);return this._y+=1,s.setName(t),s.setValue(i),s.Ns.Ws.Qs(this.Cy),s.Ns.Hs.Qs(this.ky),this.yy.push(s),this.$s.te(),s.setHighlightOnHover(this.by),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.yy}setHeadWidth(t){return this.D_=t,this.$s.te(),this}getHeadWidth(){return this.D_}setNeckWidth(t){return this.B_=t,this.$s.te(),this}getNeckWidth(){return this.B_}setSliceGap(t){return this.O_=Math.min(Math.max(t,0),20),this.$s.te(),this}setSliceMode(t){return this.L_=t,this.$s.te(),this}getFunnelSliceMode(){return this.L_}setLUT(t){return this.Wf=t,this.$s.te(),this}setSliceFillStyle(t){return this.Sy=t,this.$s.te(),this}getSliceFillStyle(){return this.Sy}setSliceStrokeStyle(t){return this.vy="function"==typeof t?t(this.vy):t,this.$s.te(),this}getSliceStrokeStyle(){return this.vy}setSliceEffect(t){return this.ky=t,this.yy.forEach((i=>i.Ns.Hs.Qs(t))),this.$s.te(),this}getSliceEffect(){return this.ky}setSliceSorter(t){return this.py=t,this.yy=this.yy.sort(this.py),this.$s.te(),this}getSliceSorter(){return this.py}setLabelFillStyle(t){return this.My="function"==typeof t?t(this.My):t,this.$s.te(),this}getLabelFillStyle(){return this.My}setLabelFont(t){return this.xy="function"==typeof t?t(this.xy):t,this.$s.te(),this}getLabelFont(){return this.xy}setLabelEffect(t){return this.Cy=t,this.yy.forEach((i=>i.Ns.Ws.Qs(t))),this.$s.te(),this}getLabelEffect(){return this.Cy}setLabelFormatter(t){return this.Oy=t,this.$s.te(),this}getLabelFormatter(){return this.Oy}setSliceHighlightOnHover(t){return this.by=t,this.yy.forEach((i=>i.setHighlightOnHover(t))),this}rh(t){super.rh(t),Qc.Km(this.jm,this.Wm),super.Vm();const i=Qc.Zm(this.jm,this.Wm),s=e(this.pixelScale.x.getInnerInterval()-(this.Ba.left+this.Ba.right),this.pixelScale.y.getInnerInterval()-(this.Ba.bottom+this.Ba.top+i)),h=e(this.Ba.left+s.x/2,this.Ba.bottom+s.y/2);this.yy=this.yy.sort(this.py);for(let t=0,{length:i}=this.yy;t<i;t+=1)this.By(this.yy[t],t);const r=this.yy.filter((t=>t.getAnimatedValue()>0));let n=0;for(let t=0;t<r.length;t+=1)n+=r[t].getAnimatedValue();const o=[];for(let t=0;t<r.length;t+=1)o.push((a=r[t].getAnimatedValue())>0?a/n:0);var a;for(let t=0;t<r.length;t+=1){const i=r[t];i._h.lr(this.Oy(i,o[t])).le()}o.push(n),this.Ly(r,o,h,s)}By(t,i){t.setStyle(this.Wf?new Be({color:this.Wf.getColors(t.getAnimatedValue())}):this.Sy(i),this.vy,this.My,this.xy)}Fy(){this.yy=this.yy.sort(this.py),this.$s.te()}qf(){return this.yy}dispose(){return this.Iy.Pt(),this.Dy.Pt(),this.yy.slice().forEach((t=>t.dispose())),super.dispose()}}const zg=(i,s,e)=>{const h=i.El();if(h.length>0){let i;const r=(h[1].y-h[0].y)/2+h[0].y;return i=s===t.FunnelLabelSide.Left?(h[0].x-h[1].x)/2+h[1].x-e:(h[2].x-(4===h.length?h[3].x:h[1].x))/2+(4===h.length?h[3].x:h[1].x)+e,{x:i,y:r}}},Vg=t=>{const i=t.El();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Ng extends Rg{constructor(){super(...arguments),this.Oy=ef.NamePlusValue,this.Ey=10,this.E_=t.FunnelLabelSide.Left,this.R_=t.SliceLabelIndices.LabelsOnSides,this.zy=[],this.Vy=this.Rs.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Vy=t;for(let t=0;t<this.zy.length;t+=1)this.zy[t].gh(this.Vy);return this.$s.te(),this}getLabelConnectorStyle(){return this.Vy}setLabelConnectorGap(t){return this.Ey=t,this.$s.te(),this}getLabelConnectorGap(){return this.Ey}setLabelSide(t){return this.E_=t,this.$s.te(),this}getLabelSide(){return this.E_}Ly(i,s,h,r){const n=this.Ey;let o=0;for(let t=0;t<i.length;t+=1)o=Math.max(o,i[t]._h.Ci().x);const a=r.x+this.Ba.left+this.Ba.right,l=this.E_===t.FunnelLabelSide.Right?(this.Ba.left+(a-(this.Ba.right+o)))/2:(this.Ba.left+o+(a-this.Ba.right))/2,u=r.x-o,c=e(u,r.y);Eg(i,this.D_,this.B_,c,this.Ba,this.O_,this.L_,l),this.z_(i,this.E_===t.FunnelLabelSide.Left?-1:1,-1,h,r);for(let t=0;t<this.zy.length;t+=1)this.zy[t].setVisible(!1);for(let t=0;t<i.length;t+=1)i[t].getVisible()&&this.Ny(this.V_(i[t],-1,h,n))}getMinimumSize(){return e(500,300)}z_(t,i,s,h,r){if(0===t.length)return;const n=h.x+i*r.x*.5,o=1===s?Math.max:Math.min;let a;for(let h=0;h<t.length;h+=1){const r=t[h];if(0===r.a_.El().length)r._h.setVisible(!1);else{let t;r._h.setVisible(!0),a&&(t=a._h.ja().y+s*(a._h.Ci().y+10));const h=(zg(r.a_,this.E_,0)||e(0,0)).y,l=void 0===t?h:o(h,t);r._h.oh(e(n,l)).Xa(i).Ka(0),a=r}}}V_(i,s,h,r){const n=i.a_,o=i._h,a=zg(n,this.E_,r);if(a){const i={x:gn(this.E_===t.FunnelLabelSide.Left?o.ja().x-s*(r+o.Ci().x):o.ja().x+s*(r+o.Ci().x),a,h).x,y:mn(o.ja().y,a,h).y};return[a,i,e(this.E_===t.FunnelLabelSide.Left?o.ja().x-s*(r+o.Ci().x):o.ja().x+s*(r+o.Ci().x),i.y)]}}Ny(t){if(t){let i;for(let t=0;t<this.zy.length;t+=1)if(!this.zy[t].getVisible()){i=this.zy[t].setVisible(!0);break}void 0===i&&(i=this.Dy.Gy(this.pixelScale,void 0,[ff.InternalUI]).gh(this.Vy),this.zy.push(i)),i.Al()._l(t)}}}class Gg extends Rg{constructor(){super(...arguments),this.Oy=ef.Name,this.R_=t.SliceLabelIndices.LabelsInsideSlices}Ly(t,i,s,e){const h=this.Ba.left+e.x/2;Eg(t,this.D_,this.B_,e,this.Ba,this.O_,this.L_,h);for(let i=0;i<t.length;i+=1){const s=t[i],e=s.a_,h=s._h,r=Vg(e);r&&h.oh(r).Xa(0).Ka(0)}}getMinimumSize(){return e(200,200)}}const Wg={LabelsOnSides:Ng,LabelsInsideSlices:Gg};var Hg,Ug;t.FunnelLabelSide=void 0,(Hg=t.FunnelLabelSide||(t.FunnelLabelSide={}))[Hg.Right=0]="Right",Hg[Hg.Left=1]="Left";class jg extends Jc{constructor(t,i,s,e,h,r,n){super(t,i,s,i.Gm("gaugeChart bg",0),e,i.$s.Rs.gaugeChartBackgroundFillStyle,i.$s.Rs.gaugeChartBackgroundStrokeStyle,i.$s.Rs.gaugeChartTitleFont,i.$s.Rs.gaugeChartTitleFillStyle,r),this.yy=[],this.Ty=t=>{const i=this.yy.indexOf(t);i>=0&&this.yy.splice(i,1)},this.Yd.oo||this.Yd.no||this.$s.ho(6),this.re=i.Py("gaugeChart layer",0),this.Dy=i.Py("gaugeChart top layer",1),this.jm.lr("Gauge Chart"),this.Nm(h,this.pixelScale);const o=Xn();this.onBackgroundTouchStart(o.onTouchStart),this.onBackgroundTouchMove(o.onTouchMove),this.onBackgroundTouchEnd(o.onTouchEnd),n&&this.setAnimationsEnabled(!1)}dispose(){return this.re.Pt(),this.Dy.Pt(),this.yy.slice().forEach((t=>t.dispose())),super.dispose()}}class $g extends jg{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.uu=90,this.cu=-270,this.N_={min:this.uu,max:this.cu},this.G_=Ze((()=>this.re.te())),this.W_=()=>{this.H_=void 0},this.U_=i.Py("radialGaugeChart bg arc",2),this.j_=this.re.df(this.pixelScale).eh(this.Rs.gaugeChartEmptyGaugeFillStyle).sh(this.Rs.gaugeChartEmptyGaugeStrokeStyle)}setAngleInterval(t,i){t===i?i-=360:Math.abs(i-t)>360&&(i-=(i-t)%360);const s=this.uu,e=this.cu,h=this.N_;return this.getAnimationsEnabled()?this.Y_(h,{min:t,max:i}):(h.min=t,h.max=i,this.uu=t,this.cu=i),this.At.emit("angleIntervalChange",this,{min:s,max:e},{min:t,max:i}),this.$s.te(),this}getAngleInterval(){return{min:this.uu,max:this.cu}}setGaugeFillStyle(t){return this.j_.eh(t),this.$s.te(),this}setGaugeStrokeStyle(t){return this.j_.sh(t),this.$s.te(),this}Y_(t,i,s){this.H_=this.G_(1e3,Ye.ease)([[t.min,i.min],[t.max,i.max]],(([t,i])=>{this.N_={min:t,max:i},this.uu=t,this.cu=i,this.re.te()})),this.H_.onEveryAnimationEnd(this.W_),s&&this.H_.onAnimationEnd(s)}onAngleIntervalChange(t){return this.At.on("angleIntervalChange",t)}offAngleIntervalChange(t){return this.At.off(t,"angleIntervalChange")}dispose(){return super.dispose(),this.U_.Pt(),this}}class Yg extends hf{X_(t){return this.At.on("valueChange",t)}Z_(t){return this.At.on("valueIntervalChange",t)}offValueChange(t){return this.At.off(t,"valueChange")}offIntervalChange(t){return this.At.off(t,"valueIntervalChange")}attach(t,i=!0){return super.attach(t,i),this.styleAttachedEntry(t),this}styleAttachedEntry(t){gr(t,this.Rs,{fill:this.K_})}}class Xg extends Yg{onValueChange(t){return this.X_(t)}onIntervalChange(t){return this.Z_(t)}}class Zg extends Xg{constructor(t,i,s,e,h,r,n){super(s,h,r,n),this.uu=0,this.cu=0,this.q_=0,this.J_=0,this.Q_=0,this.tA=100,this.iA=!0,this.ty=this.u,this.sy=this.getVisible(),this.ey=kr(),this.sA=t=>{this.ty=t,this.Ls.$s.te()},this.eA=t,this.sn=i,this.Ls=s,this.scale=e,this.K_=this.Rs.gaugeChartGaugeFillStyle,this.gy=t.df(e).eh(this.K_).sh(rh).Ys(this.getHighlight()),this.Xs(this.gy),this.hA=i.tn(e).Ys(this.getHighlight()),this.Xs(this.hA,{isText:!0}),this.rA=i.tn(e).Ys(this.getHighlight()),this.Xs(this.rA,{isText:!0}),this._h=i.tn(e).Ys(this.getHighlight()),this.Xs(this._h,{isText:!0}),this.hA.eh(r.gaugeChartIntervalLabelsFillStyle).dr(r.gaugeChartIntervalLabelsFont),this.rA.eh(r.gaugeChartIntervalLabelsFillStyle).dr(r.gaugeChartIntervalLabelsFont),this._h.eh(r.gaugeChartValueLabelFillStyle).dr(r.gaugeChartValueLabelFont),this.setName("Gauge Slice")}rh(){const t=this.Ls.getDataLabelFormatter(),i=this.uu/90<this.cu/90?1:-1;let s=this.Ls.getAnimationsEnabled()?this.ty:this.u;const[e,h]=this.Q_<this.tA?[this.Q_,this.tA]:[this.tA,this.Q_];s<e?s=e:s>h&&(s=h);const r=this.cu-i*this.J_,n=this.uu+i*this.q_,o=this.tA-this.Q_,a=(0!==o?(r-n)/o:1/0)*(s-this.Q_);this.gy.bu(n).yh(n+a);const l="function"==typeof t?t(s,{getInnerStart:()=>e,getInnerEnd:()=>h}):t.format(s);this._h.lr(l)}nA(){const t=this.Ls.getIntervalLabelFormatter(),i="function"==typeof t?t(this.Q_,{getInnerStart:()=>this.Q_,getInnerEnd:()=>this.tA}):t.format(this.Q_);return this.hA.lr(i).le(),this.hA.Ci()}oA(){const t=this.Ls.getIntervalLabelFormatter(),i="function"==typeof t?t(this.tA,{getInnerStart:()=>this.Q_,getInnerEnd:()=>this.tA}):t.format(this.tA);return this.rA.lr(i).le(),this.rA.Ci()}setName(t){return super.setName(t),this.Ls.$s.te(),this}setValue(t){const i=this.u;return this.Ls.getAnimationsEnabled()?this.sy&&this.ey(i,t,this.sA):this.ty=t,this.u=t,this.At.emit("valueChange",this,i,t),this.Ls.$s.te(),this}getValue(){return this.u}setVisible(t){return this.sy=t,!1===t?this.Ls.getAnimationsEnabled()&&this.ty>0?this.ey(this.ty,0,this.sA,{onCompleted:()=>super.setVisible(!1)}):(this.ty=0,super.setVisible(!1)):this.Ls.getAnimationsEnabled()?(super.setVisible(!0),this.ey(this.ty,this.u,this.sA)):(this.ty=this.u,super.setVisible(!0)),this}setInterval(t,i){const s=this.Q_,e=this.tA;return this.At.emit("valueIntervalChange",this,{min:s,max:e},{min:t,max:i}),this.Q_=t,this.tA=i,this.Ls.$s.te(),this}setIntervalLabelsFont(t){return this.hA.dr(t),this.rA.dr(t),this.Ls.$s.te(),this}getIntervalLabelsFont(){return this.hA.cr()}setIntervalLabelsFillStyle(t){return this.hA.eh(t),this.rA.eh(t),this.Ls.$s.te(),this}getIntervalLabelsFillStyle(){return this.hA.ur()}setIntervalLabelsVisible(t){return t?(this.hA.setVisible(!0),this.rA.setVisible(!0)):(this.hA.setVisible(!1),this.rA.setVisible(!1)),this.iA=t,this}getIntervalLabelsVisible(){return this.iA}setAngleInterval(t,i){return this.uu=t,this.cu=i,this.Ls.$s.te(),this}setMinAngle(t){return this.uu=t,this.Ls.$s.te(),this}setMaxAngle(t){return this.cu=t,this.Ls.$s.te(),this}setMarginInDegrees(t=this.q_,i=this.J_){return t!==this.q_&&(this.q_=t),i!==this.J_&&(this.J_=i),this.Ls.$s.te(),this}setFillStyle(t){this.K_="function"==typeof t?t(this.K_):t;const i=this.K_;this.gy.eh(i);for(let t=0;t<this.ps.length;t+=1)this.styleAttachedEntry(this.ps[t]);return this.Ls.$s.te(),this}aA(t){return this._h.eh(t),this.sn.te(),this}lA(){return this._h.ur()}getAnimatedValue(){return this.ty}}function Kg(t,i,s,h,r,n=Math.floor(Math.sqrt(h>r?25*h:25*r))){const o=Array(n+2),a=Math.PI;let l=0,u=0;const c=i*a/180,f=(s*a/180-c)/n;for(o[l]=e(t.x,t.y),l+=1;l<=n+1;)o[l]=e(t.x+h*Math.cos(c+u*f),t.y+r*Math.sin(c+u*f)),l+=1,u+=1;return[o,n]}class qg extends $g{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.Nf=20,this.uA=new Intl.NumberFormat,this.cA=new Intl.NumberFormat,this.fA=!1,this.dA=5;const o=new Zg(this.re,this.Dy,this,this.pixelScale,this.Ty,this.Rs,this.$s.Ns);this.gA=o,this.yy.push(o),this.setPadding(10)}rh(t){super.rh(t),Qc.Km(this.jm,this.Wm),super.Vm();const i=Qc.Zm(this.jm,this.Wm),s=Xr([this.gA.nA(),this.gA.oA()]),h=e(this.pixelScale.x.getInnerInterval()-(this.Ba.left+this.Ba.right+2*s.max.x),this.pixelScale.y.getInnerInterval()-(this.Ba.bottom+this.Ba.top+1*s.max.y+i)),r=Math.max(.5*Math.min(h.x,h.y),0),n=e(this.Ba.left+s.max.x+.5*h.x,this.Ba.bottom+s.max.y+.5*h.y),o=this.fA?this.mA(n,r):n,a=this.j_.th.getThickness(),l=r-.5*a,u=r-this.Nf;let c=u/r*100;c=c>100||c<0?99:c;const f=100*(1-(this.Nf-a)/r);this.yA(o,u)&&(this.j_.xu(r).Au(c),this.gA.gy.xu(l).Au(f));const d=.5*(g=r,(m=this.cu-this.uu)/(2*Math.PI*g*(m/360))*a);var g,m;this.j_.bu(this.uu).yh(this.cu).oh(o),this.gA.gy.oh(o),this.gA._h.oh(o),this.Wf&&this.gA.setFillStyle(new Be({color:this.Wf.getColors(this.gA.getAnimatedValue())})),this.gA.setMinAngle(this.uu).setMaxAngle(this.cu).setMarginInDegrees(d,d).rh();const y=this.j_.fu();if(this.gA.getIntervalLabelsVisible()){this.pA(this.uu,this.cu,o,y+this.dA);const t=this.gA.hA.le().Mh(),i=this.gA.rA.le().Mh();zr(t,i)&&this.SA(t,i,o,y+this.dA)}}yA(t,i){const s=on(this.gA._h.le().Ci(),.5),e=t.x+i,h=t.x-i,r=t.y+i,n=t.y-i;return!(t.x+s.x>e||t.x-s.x<h||t.y+s.y>r||t.y-s.y<n)}SA(t,i,s,h){const r=Vr(t,i),[n,o]=[bn(yn(this.uu)),bn(yn(this.cu))],[a,l]=n!==o||1!==n&&3!==n?[ln(r.min,s),ln(r.max,s)]:[ln(e(r.min.x,r.max.y),s),ln(e(r.max.x,r.min.y),s)],u=a.x*l.x+a.y*l.y,c=nn(a)*nn(l),f=.7*pn(Math.acos(u/c)),[d,g]=this.vA();this.pA(this.uu-d*f,this.cu-g*f,s,h)}vA(){const t=this.cu-this.uu,i=Math.sign(t);let s=Math.sign(this.uu),e=Math.sign(this.cu);return s===e&&(i>=0?s=-e:e=-s),[s,e]}mA(t,i){const[s]=Kg(t,this.uu,this.cu,i,i),h=Xr(s),r=.5*(h.max.x-h.min.x),n=.5*(h.max.y-h.min.y);return an(ln(t,e(h.min.x+r,h.min.y+n)),t)}pA(t,i,s,h){const r=yn(t),n=yn(i);this.gA.hA.oh(sn(e(s.x+h,s.y),s,-r)),this.gA.rA.oh(sn(e(s.x+h,s.y),s,-n)),this.gA.hA.Ja(e(-Math.cos(r),-Math.sin(r))),this.gA.rA.Ja(e(-Math.cos(n),-Math.sin(n)))}getDefaultSlice(){return this.gA}setAutoScaling(t){return this.fA=t,this.$s.te(),this}getAutoScaling(){return this.fA}setDataLabelFormatter(t){return this.cA=t,this.$s.te(),this}getDataLabelFormatter(){return this.cA}setIntervalLabelFormatter(t){return this.uA=t,this.$s.te(),this}getIntervalLabelFormatter(){return this.uA}setIntervalLabelPadding(t){return this.dA=t,this.$s.te(),this}getIntervalLabelPadding(){return this.dA}setThickness(t){return this.Nf=t,this}setLUT(t){return this.Wf=t,this.$s.te(),this}setDataLabelFont(t){return this.gA._h.dr(t),this.$s.te(),this}getDataLabelFont(){return this.gA._h.cr()}getMinimumSize(){return e(500,300)}setDataLabelFillStyle(t){return this.gA.aA(t),this.$s.te(),this}getDataLabelFillStyle(){return this.gA.lA()}qf(){return this.yy}dispose(){return this.gA.dispose(),super.dispose()}}class Jg extends hf{}class Qg extends Jg{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.dt="Slice",this.u=0,this.qm=!1,this.P_=Ie,this.Qm=Ie,this.ty=this.u,this.ey=Ze((()=>this.Ls.$s.te())),this.ny=()=>{this.oy=void 0},this.index=t,this.Ls=e,this.scale=h,this.Es=r,this.a_=i.af(h,ol.Simple).Ys(this.getHighlight()),this.Xs(this.a_),this._h=s.tn(h).Ys(this.getHighlight()),this.Xs(this._h,{isText:!0})}setValue(t){return this.Ls.getAnimationsEnabled()?this.getVisible()&&this.my(this.ty,t):this.ty=t,this.u=t,this.Ls.$s.te(),this}getValue(){return this.u}setVisible(t){return!1===t?this.Ls.getAnimationsEnabled()&&this.ty>0?(this.oy&&(this.oy.finish(!1),this.oy=void 0),this.my(this.ty,0,(()=>super.setVisible(!1)))):(this.ty=0,super.setVisible(!1)):this.Ls.getAnimationsEnabled()?(this.oy&&(this.oy.finish(!1),this.oy=void 0),super.setVisible(!0),this.my(this.ty,this.u)):(this.ty=this.u,super.setVisible(!0)),this}my(t,i,s){this.oy=this.ey(300,Ye.ease)([[t,i]],(([t])=>{this.ty=t,this.Ls.$s.te()})),this.oy.onEveryAnimationEnd(this.ny),s&&this.oy.onAnimationEnd(s)}setStyle(t,i,s,e){this.P_=t,this.Qm=s,this.a_.eh(this.P_).sh(i),this._h.eh(this.Qm).dr(e);for(let t=0;t<this.ps.length;t+=1)this.styleAttachedEntry(this.ps[t])}getAnimatedValue(){return this.ty}attach(t,i=!0){return super.attach(t,i),this.styleAttachedEntry(t),this}styleAttachedEntry(t){gr(t,this.Rs,{fill:this.P_,stroke:this.a_.Co()})}}t.PyramidSliceModes=void 0,(Ug=t.PyramidSliceModes||(t.PyramidSliceModes={}))[Ug.VariableHeight=0]="VariableHeight",Ug[Ug.VariableWidth=1]="VariableWidth";const tm=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},im=(i,s,e,h,r,n=0,o=t.PyramidSliceModes.VariableHeight,a)=>{s=tm(s,h.x),e=tm(e,h.x);const l=i.length;let u=0,c=0;u=i.reduce(((t,i)=>t+i.getAnimatedValue()),0);let f={x:a-s/2,y:h.y+r.bottom},d={x:a+s/2,y:h.y+r.bottom},g={x:0,y:r.bottom},m={x:0,y:r.bottom},y=0,p=0;if(n)for(let s=0;s<i.length;s+=1){const e=10;p+=i[s].getAnimatedValue();const a=o===t.PyramidSliceModes.VariableWidth?(h.y-n*l)/l:h.y+r.bottom-p/u*h.y;if(o===t.PyramidSliceModes.VariableWidth){n=a-n<e?Math.max(20,a-e):n;break}0!==y&&y-a-n<e&&(n=Math.max(0,y-a-e)),y=a}const S=(s-e)/2/h.y;for(let y=0;y<l;y+=1){const p=i[y];c+=p.getAnimatedValue();const v=o===t.PyramidSliceModes.VariableWidth?(h.y-n*l)/l:h.y+r.bottom-c/u*h.y;let b=0;y>0&&(f={x:g.x+S*n,y:g.y-n},d={x:m.x-S*n,y:m.y-n}),b=(s+c/u*(e-s))/2,g={x:a-b,y:parseInt(`${o===t.PyramidSliceModes.VariableWidth?f.y-v:v}`,10)},m={x:a+b,y:parseInt(`${o===t.PyramidSliceModes.VariableWidth?d.y-v:v}`,10)},d.x>=f.x&&m.x>=g.x&&p.a_.Ll([g,f,d,m])}};class sm extends Jc{constructor(i,s,e,h,r,n,o){super(i,s,e,s.Gm("pyramidChart bg",0),h,s.$s.Rs.pyramidChartBackgroundFillStyle,s.$s.Rs.pyramidChartBackgroundStrokeStyle,s.$s.Rs.pyramidChartTitleFont,s.$s.Rs.pyramidChartTitleFillStyle,n),this.yy=[],this.py=sf.None,this.Sy=this.Rs.pyramidChartSliceFillStylePalette,this.vy=this.Rs.pyramidChartSliceStrokeStyle,this.by=!0,this.xy=this.Rs.pyramidChartSliceLabelFont,this.My=this.Rs.pyramidChartSliceLabelFillStyle,this._y=0,this.D_=0,this.B_=80,this.O_=0,this.L_=t.PyramidSliceModes.VariableHeight,this.ky=!0,this.Ty=t=>{const i=this.yy.indexOf(t);i>=0&&(this.yy.splice(i,1),this.Fy())},this.Yd.oo||this.Yd.no||this.$s.ho(8),this.Cy=this.Rs.effectsText,this.Iy=s.Py("pyramidChart bottom",0),this.Dy=s.Py("pyramidChart top",1),this.jm.lr("Pyramid Chart"),o&&this.setAnimationsEnabled(!1),this.Nm(r,this.pixelScale)}addSlice(t,i){const s=new Qg(this._y,this.Iy,this.Dy,this,this.pixelScale,this.Ty,this.Rs,this.$s.Ns);return this._y+=1,s.setName(t),s.setValue(i),s.Ns.Ws.Qs(this.Cy),s.Ns.Hs.Qs(this.ky),this.yy.push(s),this.$s.te(),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.yy}setNeckWidth(t){return this.B_=t,this.$s.te(),this}getNeckWidth(){return this.B_}setSliceGap(t){return this.O_=Math.min(Math.max(t,0),20),this.$s.te(),this}setSliceMode(t){return this.L_=t,this.$s.te(),this}getPyramidSliceMode(){return this.L_}setLUT(t){return this.Wf=t,this.$s.te(),this}setSliceFillStyle(t){return this.Sy=t,this.$s.te(),this}getSliceFillStyle(){return this.Sy}setSliceStrokeStyle(t){return this.vy="function"==typeof t?t(this.vy):t,this.$s.te(),this}getSliceStrokeStyle(){return this.vy}setSliceEffect(t){return this.ky=t,this.yy.forEach((i=>i.Ns.Hs.Qs(t))),this.$s.te(),this}getSliceEffect(){return this.ky}setSliceSorter(t){return this.py=t,this.yy=this.yy.sort(this.py),this.$s.te(),this}getSliceSorter(){return this.py}setLabelFillStyle(t){return this.My="function"==typeof t?t(this.My):t,this.$s.te(),this}getLabelFillStyle(){return this.My}setLabelFont(t){return this.xy="function"==typeof t?t(this.xy):t,this.$s.te(),this}getLabelFont(){return this.xy}setLabelEffect(t){return this.Cy=t,this.yy.forEach((i=>i.Ns.Ws.Qs(t))),this.$s.te(),this}getLabelEffect(){return this.Cy}setLabelFormatter(t){return this.Oy=t,this.$s.te(),this}getLabelFormatter(){return this.Oy}setSliceHighlightOnHover(t){return this.by=t,this.yy.forEach((i=>i.setHighlightOnHover(t))),this}rh(t){super.rh(t),Qc.Km(this.jm,this.Wm),super.Vm();const i=Qc.Zm(this.jm,this.Wm),s=e(this.pixelScale.x.getInnerInterval()-(this.Ba.left+this.Ba.right),this.pixelScale.y.getInnerInterval()-(this.Ba.bottom+this.Ba.top+i)),h=e(this.Ba.left+s.x/2,this.Ba.bottom+s.y/2);this.yy=this.yy.sort(this.py);for(let t=0,{length:i}=this.yy;t<i;t+=1)this.By(this.yy[t],t);const r=this.yy.filter((t=>t.getAnimatedValue()>0));let n=0;for(let t=0;t<r.length;t+=1)n+=r[t].getAnimatedValue();const o=[];for(let t=0;t<r.length;t+=1)o.push((a=r[t].getAnimatedValue())>0?a/n:0);var a;for(let t=0;t<r.length;t+=1){const i=r[t];i._h.lr(this.Oy(i,o[t])).le()}o.push(n),this.Ly(r,o,h,s)}By(t,i){t.setStyle(this.Wf?new Be({color:this.Wf.getColors(t.getAnimatedValue())}):this.Sy(i),this.vy,this.My,this.xy)}Fy(){this.yy=this.yy.sort(this.py),this.$s.te()}qf(){return this.yy}dispose(){return this.Iy.Pt(),this.Dy.Pt(),this.yy.slice().forEach((t=>t.dispose())),super.dispose()}}const em=(i,s,e)=>{const h=i.El();if(h.length>0){let i;const r=(h[1].y-h[0].y)/2+h[0].y;return i=s===t.PyramidLabelSide.Left?(h[0].x-h[1].x)/2+h[1].x-e:(h[2].x-(4===h.length?h[3].x:h[1].x))/2+(4===h.length?h[3].x:h[1].x)+e,{x:i,y:r}}},hm=t=>{const i=t.El();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class rm extends sm{constructor(){super(...arguments),this.Oy=ef.NamePlusValue,this.Ey=10,this.E_=t.PyramidLabelSide.Left,this.R_=t.SliceLabelIndices.LabelsOnSides,this.zy=[],this.Vy=this.Rs.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Vy=t;for(let t=0;t<this.zy.length;t+=1)this.zy[t].gh(this.Vy);return this.$s.te(),this}getLabelConnectorStyle(){return this.Vy}setLabelConnectorGap(t){return this.Ey=t,this.$s.te(),this}getLabelConnectorGap(){return this.Ey}setLabelSide(t){return this.E_=t,this.$s.te(),this}getLabelSide(){return this.E_}Ly(i,s,h,r){const n=this.Ey;let o=0;for(let t=0;t<i.length;t+=1)o=Math.max(o,i[t]._h.Ci().x);const a=r.x+this.Ba.left+this.Ba.right,l=this.E_===t.PyramidLabelSide.Right?(this.Ba.left+(a-(this.Ba.right+o)))/2:(this.Ba.left+o+(a-this.Ba.right))/2,u=r.x-o,c=e(u,r.y);im(i,this.D_,this.B_,c,this.Ba,this.O_,this.L_,l),this.z_(i,this.E_===t.PyramidLabelSide.Left?-1:1,-1,h,r);for(let t=0;t<this.zy.length;t+=1)this.zy[t].setVisible(!1);for(let t=0;t<i.length;t+=1)if(i[t].getVisible()){const s=this.V_(i[t],-1,h,n);s&&this.Ny(s)}}getMinimumSize(){return e(500,300)}z_(t,i,s,h,r){if(0===t.length)return;const n=h.x+i*r.x*.5,o=1===s?Math.max:Math.min;let a;for(let h=0;h<t.length;h+=1){const r=t[h];let l;0===r.a_.El().length?r._h.setVisible(!1):r._h.setVisible(!0),a&&(l=a._h.ja().y+s*(a._h.Ci().y+10));const u=em(r.a_,this.E_,0);if(u){const t=u.y,s=void 0===l?t:o(t,l);r._h.oh(e(n,s)).Xa(i).Ka(0)}a=r}}V_(i,s,h,r){const n=i.a_,o=i._h,a=em(n,this.E_,r);if(a){const i={x:gn(this.E_===t.PyramidLabelSide.Left?o.ja().x-s*(r+o.Ci().x):o.ja().x+s*(r+o.Ci().x),a,h).x,y:mn(o.ja().y,a,h).y};return[a,i,e(this.E_===t.PyramidLabelSide.Left?o.ja().x-s*(r+o.Ci().x):o.ja().x+s*(r+o.Ci().x),i.y)]}}Ny(t){let i;for(let t=0;t<this.zy.length;t+=1)if(!this.zy[t].getVisible()){i=this.zy[t].setVisible(!0);break}void 0===i&&(i=this.Dy.Gy(this.pixelScale,void 0,[ff.InternalUI]).gh(this.Vy),this.zy.push(i)),i.Al()._l(t)}}class nm extends sm{constructor(){super(...arguments),this.Oy=ef.Name,this.R_=t.SliceLabelIndices.LabelsInsideSlices}Ly(t,i,s,e){const h=this.Ba.left+e.x/2;im(t,this.D_,this.B_,e,this.Ba,this.O_,this.L_,h);for(let i=0;i<t.length;i+=1){const s=t[i].a_,e=t[i]._h,h=hm(s);h&&e.oh(h).Xa(0).Ka(0)}}getMinimumSize(){return e(200,200)}}const om={LabelsOnSides:rm,LabelsInsideSlices:nm};var am;t.PyramidLabelSide=void 0,(am=t.PyramidLabelSide||(t.PyramidLabelSide={}))[am.Right=0]="Right",am[am.Left=1]="Left";const lm=(t,i,s,e,h,r)=>(t.alignmentX=(h+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,t.alignmentY=h%(2*Math.PI)<=Math.PI?-1:1,t.paddingX=Math.cos(h)*r,t.paddingY=Math.sin(h)*r,t),um=(t,i,s,e,h,r,n,o)=>{if(0===i)return t.paddingX=o,t.alignmentX=-1,t};var cm;t.SpiderWebMode=void 0,(cm=t.SpiderWebMode||(t.SpiderWebMode={}))[cm.Normal=0]="Normal",cm[cm.Circle=1]="Circle";class fm{constructor(t,i,s,e,h,r,n,o){this.At=new $e,this.bA=t,this.sn=i,this.scale=s,this.chart=e,this.tag=h,this.axisScale=r,this.xA=n,this.MA=o,this._A=this.bA.mh(this.scale).setMouseInteractions(!1),this.AA=this.sn.tn(this.scale).lr(this.tag).setMouseInteractions(!1),this.wA=this.xA(this,this.sn.Gy(this.scale,void 0,[ff.InternalUI])).gh(this.chart.getNibStyle()),this.MA.Zs([this.AA])}Ly(i,s,h,r,n,o,a){const l=s.length,u=s[h>0?h-1:l-1],c=s[h],f=s[h<l-1?h+1:0],d=this.chart.getNibLength();this._A.ph(i).yh(c).gh(this.chart.getAxisStyle()),this.wA.Al()._l(o===t.SpiderWebMode.Normal?[$r(c,u,Ph(.5*d/nn(ln(u,c)),0,1)),c,$r(c,f,Ph(.5*d/nn(ln(f,c)),0,1))]:((t,i,s,h,r=2)=>{const n=h/s,o=[];for(let a=-h/2;a<=h/2;a+=r){const r=n*(a/h)+i,l=e(t.x+Math.cos(r)*s,t.y+Math.sin(r)*s);o.push(l)}return o})(i,r,n,d)),a?this.AA.setVisible(!0).oh(an(c,e(a.paddingX,a.paddingY))).Xa(a.alignmentX).Ka(a.alignmentY):this.AA.setVisible(!1)}getLabelSize(){return this.AA.dr(this.chart.getAxisLabelFont()).eh(this.chart.getAxisLabelStyle()).le().Ci()}dispose(){this._A&&this._A.dispose(),this.AA&&this.AA.dispose(),this.wA&&this.wA.dispose()}}const dm=(t,i,s,e,h)=>t.addRow(i.getName()).addRow("Axis:","",e).addRow("Value:","",h(s));class gm extends $d{constructor(i,s,e,h,r,n,o,a,l,u,c,f){super(i,l,u,f),this.dt="Spider Series",this.Du=new Map,this.cs=t.HighlightModes.onHover,this.bb=dm,this.Hx=8,this.Pa=0,this.kA=kr(),this.CA={},this.TA={},this.sy=this.getVisible(),this.FA=1,this.IA=((t,i)=>{const s=Ze((()=>{}));let e,h,r=1;return(n,o,a)=>{if(n===h)return;h=n;const l=(null==a?void 0:a.easing)||Ye.ease,u=(null==a?void 0:a.durationMs)||1e3;e&&(e.finish(!1),e=void 0),!1===n?o&&r?(e=s(u,l)([[r,0]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0,i(!1)}))):(r=0,i(!1)):o?(i(!0),e=s(u,l)([[r,1]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0}))):(r=1,i(!0))}})((t=>{this.FA=t,this.re.$s.te()}),(t=>{super.setVisible(t)})),this.Ls=i,this.re=s,this.Ux=h,this.PA=r,this.yv=n,this.DA=o,this.BA=a,this.scale=e,this.OA=Sr(u.spiderSeriesFillStyle,c),this.LA=Sr(u.spiderSeriesStrokeStyle,c),this.EA=Sr(u.spiderSeriesPointFillStyle,c)}Dp(){return this.Op&&this.Du.size>0&&this.getVisible()}addPoints(...t){t=t.filter((t=>void 0!==t.axis));for(let i=0;i<t.length;i+=1)this.PA(t[i].axis);if(this.Ls.getAnimationsEnabled()&&void 0!==this.CA){const i=new Map;let s;t.forEach((t=>i.set(t.axis,t.value))),this.kA(0,1,(t=>{i.forEach(((i,e)=>{const h=(null==s?void 0:s.get(e))||0;this.Du.set(e,h+t*(i-h)),this.re.$s.te()}))}),{easing:this.CA.easing,durationMs:this.CA.durationMs,onStart:()=>{s=new Map(this.Du)}})}else for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.Du.set(s,t[i].value)}return this.re.te(),this}getValue(t,i=!1){const s=this.Du.get(t),e=this.Ls.getOriginValue();if(void 0!==s)return i?e+this.FA*(s-e):s}setAnimationAddPoints(t,i){return this.CA=t?{easing:t,durationMs:i}:void 0,this.re.te(),this}setVisibleStateChangedAnimation(t,i){return this.TA=t?{easing:t,durationMs:i}:void 0,this.re.te(),this}setCursorResultTableFormatter(t){return this.bb=t,this.Ls.$s.te(),this}getCursorResultTableFormatter(){return this.bb}setCursorEnabled(t){return super.setCursorEnabled(t)}setFillStyle(t){return this.OA="function"==typeof t?t(this.OA):t,this.a_&&(this.a_.eh(this.OA),this.re.te()),this}getFillStyle(){return this.OA}setStrokeStyle(t){return this.LA="function"==typeof t?t(this.LA):t,this.a_&&(this.a_.sh(this.LA),this.re.te()),this}getStrokeStyle(){return this.LA}setPointFillStyle(t){return this.EA="function"==typeof t?t(this.EA):t,this.jx&&(this.jx.eh(this.EA),this.re.te()),this}getPointFillStyle(){return this.EA}setPointSize(t){return this.Hx=t,this.jx&&this.jx.Gt(t),this}getPointSize(){return this.Hx}getPointShape(){return this.Ux}setPointRotation(t){return this.Pa=t,this.jx&&this.jx.gr(t),this.re.te(),this}getPointRotation(){return this.Pa}rh(){if(super.rh(),!this.fs){const t=new Array(this.yv.length),i=this.Ls.getOriginValue();for(let s=0;s<this.yv.length;s+=1){const e=this.Du.get(this.yv[s].tag);t[s]=void 0!==e?this.DA(this.yv[s].tag,i+this.FA*(e-i)):this.DA(this.yv[s].tag,i)}rr(t),t.length>=3&&(this.a_||(this.a_=this.re.af(this.scale,ol.Simple).sh(this.LA).eh(this.OA).Ys(this.getHighlight()),this.Xs(this.a_)),this.a_.Ll(t),this.jx||(this.jx=this.re.iS(this.scale).Gt(this.Hx).vl(this.Ux).gr(this.Pa).eh(this.EA).Ys(this.getHighlight()),this.Xs(this.jx)),this.jx.Al()._l(t))}}attach(t,i=!0){return super.attach(t,i),gr(t,this.Rs,{fill:this.OA,stroke:this.LA}),this}RA(){for(let t=0;t<this.ps.length;t+=1)gr(this.ps[t],this.Rs,{fill:this.OA,stroke:this.LA})}fb(t,i){if(this.a_){const i=this.BA(t);if(void 0!==i&&this.Du.has(i.tag)){const t=this.Du.get(i.tag),s=this.DA(i.tag,t);return _d(s,this.scale,this.bb(new ad,this,t,i.tag,this.Ls.formatValue).if(),this,this.OA)}}}solveNearestFromScreen(t){return this.fb(tc(t,this.Ls.$s),!1)}ah(t,i){return t.Ys(i),this.re.te(),this}setVisible(t){var i,s;return this.sy=t,this.IA(t,this.Ls.getAnimationsEnabled()&&void 0!==this.TA,{easing:null===(i=this.TA)||void 0===i?void 0:i.easing,durationMs:null===(s=this.TA)||void 0===s?void 0:s.durationMs}),this}}const mm=(t,i)=>{const s=Math.PI/2-2*t*Math.PI/i;return s>=0?s:s+2*Math.PI},ym=t=>Xr(t.AA.Mh()),pm=t=>Xr(t.Mh()),Sm=(i,s,e,h)=>i.Au(0).oh(e).bu(90).yh(-270).wu(s===t.SpiderWebMode.Circle?void 0:h.length),vm={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},bm={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},xm=()=>{bm.alignmentX=0,bm.alignmentY=0,bm.paddingX=0,bm.paddingY=0};class Mm extends Dd{constructor(i,s,h,r,n,o,l){super(i,s,h,s.Gm("spiderChart bg",0),r,s.$s.Rs.spiderChartBackgroundFillStyle,s.$s.Rs.spiderChartBackgroundStrokeStyle,s.$s.Rs.spiderChartTitleFont,s.$s.Rs.spiderChartTitleFillStyle,l),this.hb=t.AutoCursorModes.onHover,this.Ba=c(20,20,20,20),this.axisScale=ah.d1({scale1DConstructor:On,dimension:"x"}).Vt(0,1),this.yv=[],this.zA=[],this.VA=[],this.NA=Go.expansion,this.GA=!0,this.WA=um,this.HA=lm,this.Ko=!0,this.UA=t.SpiderWebMode.Normal,this.jA=4,this.$A=this.Rs.spiderChartWebStyle,this.YA=this.Rs.spiderChartScaleLabelFillStyle,this.XA=this.Rs.spiderChartScaleLabelFont,this.ZA=5,this.KA=this.Rs.spiderChartAxisLabelFillStyle,this.qA=this.Rs.spiderChartAxisLabelFont,this.JA=5,this.QA=this.Rs.spiderChartAxisStrokeStyle,this.tw=this.Rs.spiderChartAxisNibStrokeStyle,this.md=10,this.iw=c(),this.hasAxis=t=>this.yv.reduce(((i,s)=>i||s.tag===t),!1),this.formatValue=t=>this.axisScale.Ki(t,Dn.Numeric),this.sw=()=>(t=>{const i=t.length;for(let s=0;s<i;s+=1)for(let e=s+1;e<i;e+=1)if(Rr(t[s],t[e]))return!0;return!1})(this.yv.map(ym).concat(this.VA.map(pm))),this.ew=()=>this.hw.df(this.pixelScale).setMouseInteractions(!1),this.rw=t=>t.dispose(),this.nw=()=>this.eg.tn(this.pixelScale).setMouseInteractions(!1),this.ow=t=>t.dispose(),this.aw=t=>this.formatValue(this.axisScale.getInnerStart()+t*(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart())),this.lw=(t,i)=>{let s,h;const r=()=>{void 0!==this.uw&&this.uw.finish(),s=a(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),h=this.NA,this.NA=void 0},n=(i,h,r,n,o)=>{const a=e(r.x-h.x,h.y-r.y),l=this.yv.findIndex((i=>i===t));if(l>=0&&void 0!==s){const i=mm(l,this.yv.length),h=e(Math.cos(i),Math.sin(i)),r=a.x*h.x+a.y*h.y,n=nn(ln(t._A.Zi(),t._A.Xi())),u=s.min+(s.max-s.min)*Math.max(1+r/n,.01);this.axisScale.Vt(s.min,u),ir(o),this.$s.te()}},o=()=>{if(s=void 0,void 0!==h)if(this.Bh){const t=a(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),i=this.cw(),s=h;if(void 0!==i){const e=s.start(t.min,t.max,i.min,i.max),h=s.end(t.min,t.max,i.min,i.max);this.uw=this.Am.$s.bn(300,Ye.ease)([[0,1]],(([i])=>{this.axisScale.Vt(t.min+i*(e-t.min),t.max+i*(h-t.max))})),this.uw.onAnimationEnd((()=>{this.uw=void 0,this.NA=s}))}else this.NA=h}else this.NA=h;h=void 0};i.setMouseEnterEventHandler(this.fw).setMouseLeaveEventHandler(this.dw).setMouseDragStartEventHandler(r).setMouseDragEventHandler(((t,i,s,h,r)=>n(0,e(i.clientX,i.clientY),h,0,i))).setMouseDragStopEventHandler(o);const l=Xn(new Kn(((t,i,s)=>{this.fw(t),r(),ir(s)}),n,((t,i,s,e)=>{this.dw(t),o(),ir(e)})));return i.setTouchStartEventHandler(l.onTouchStart).setTouchMoveEventHandler(l.onTouchMove).setTouchEndEventHandler(l.onTouchEnd)},this.gw=t=>{this.GA&&!this.hasAxis(t)&&this.addAxis(t)},this.DA=(t,i)=>{for(const s of this.yv)if(s.tag===t){const t=Math.max(Math.min((i-this.axisScale.getInnerStart())/(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart()),1),0);return $r(s._A.Zi(),s._A.Xi(),t)}},this.BA=t=>{if(0===this.yv.length)return;const i=ln(uh(t,this.engine.scale,this.pixelScale),this.yv[0]._A.Zi()),s=Math.atan2(i.y,i.x);let e,h=Dr;for(const t of this.yv){const i=ln(t._A.Xi(),t._A.Zi()),r=Math.atan2(i.y,i.x),n=Math.abs(s-r);n<h&&(e=t,h=n)}return e},this.fw=t=>{this.Ko&&(t.gh(this.tw),this.$s.te())},this.dw=t=>{t.gh(this.tw),this.$s.te()},this.Yd.oo||this.Yd.no||this.$s.ho(9),this.M_=s.mv("spiderChart series bg",0),this.hw=s.Py("spiderChart web shapes",0),this.mw=s.Py("spiderChart axis bg",1),this.Bb=s.Py("spiderChart plotting",2),this.eg=s.Py("spiderChart fg",3),this.MA=this.Ns.Qg().Qs(this.Rs.effectsText),this.jm.lr("Spider Chart");const u=Rh(o?o.autoCursorBuilder:void 0,vd);this.cb=u.sb(this.nb,this.uiScale,this.uiScale,this.Rs),this.lS=this.M_.df(this.pixelScale).eh(this.Rs.spiderChartSeriesBackgroundFillStyle).sh(rh).bu(90).yh(-270).Au(0),this.uS=this.M_.df(this.pixelScale).eh(Ie).sh(this.Rs.spiderChartSeriesBackgroundStrokeStyle).bu(90).yh(-270).Au(0),super.aS(this.lS,this.uS),o&&!0===o.disableAnimations&&this.setAnimationsEnabled(!1),this.Nm(n,this.pixelScale)}getSeries(){return this.sS}addAxis(t){if("string"==typeof t){if(!this.hasAxis(t)){const i=new fm(this.mw,this.eg,this.pixelScale,this,t,this.axisScale,this.lw,this.MA);this.yv.push(i)}}else t&&this.yv.push(t);return this.MA.Zs(this.yv.map((t=>t.AA))),this.$s.te(),this}addSeries(i){const s="object"==typeof i?i.pointShape?i.pointShape:t.PointShape.Circle:i||t.PointShape.Circle,e="object"==typeof i&&i.automaticColorIndex?i.automaticColorIndex:this.sS.length,h=new gm(this,this.Bb,this.pixelScale,s,this.gw,this.yv,this.DA,this.BA,this.hS,this.Rs,e,this.$s.Ns);return this.cS(h),h}getSeriesCount(){return this.sS.length}setWebMode(t){return this.UA=t,this.$s.te(),this}getWebMode(){return this.UA}setWebCount(t){return this.jA=t,this.$s.te(),this}getWebCount(){return this.jA}setWebStyle(t){return this.$A="function"==typeof t?t(this.$A):t,this.$s.te(),this}getWebStyle(){return this.$A}setScaleLabelStyle(t){return this.YA="function"==typeof t?t(this.YA):t,this.$s.te(),this}getScaleLabelStyle(){return this.YA}setScaleLabelFont(t){return this.XA="function"==typeof t?t(this.XA):t,this.$s.te(),this}getScaleLabelFont(){return this.XA}setScaleLabelPadding(t){return this.ZA=t,this.$s.te(),this}getScaleLabelPadding(){return this.ZA}setScaleLabelStrategy(t){return this.WA=t,this.$s.te(),this}setScaleLabelFormatter(t){return this.formatValue=t,this.$s.te(),this}setAxisLabelStyle(t){return this.KA="function"==typeof t?t(this.KA):t,this.$s.te(),this}getAxisLabelStyle(){return this.KA}setAxisLabelFont(t){return this.qA="function"==typeof t?t(this.qA):t,this.$s.te(),this}getAxisLabelFont(){return this.qA}setAxisLabelEffect(t){return this.MA.Qs(t),this.$s.te(),this}getAxisLabelEffect(){return this.MA.ie()}setAxisLabelPadding(t){return this.JA=t,this.$s.te(),this}getAxisLabelPadding(){return this.JA}setAxisLabelStrategy(t){return this.HA=t,this.$s.te(),this}setAxisStyle(t){return this.QA="function"==typeof t?t(this.QA):t,this.$s.te(),this}getAxisStyle(){return this.QA}setNibStyle(t){return this.tw="function"==typeof t?t(this.tw):t,this.$s.te(),this}getNibStyle(){return this.tw}setNibLength(t){return this.md=t,this.$s.te(),this}getNibLength(){return this.md}setAutoAxis(t){return this.GA=t,this}getAutoAxis(){return this.GA}setMouseInteractions(t){return this.Ko=t,this}getMouseInteractions(){return this.Ko}setAxisScrollStrategy(t){return this.NA=t,this.$s.te(),this}getAxisScrollStrategy(){return this.NA}setAxisInterval(t,i=0){return this.axisScale.Vt(i,t),this.$s.te(),this}getOriginValue(){return this.axisScale.getInnerStart()}getEdgeValue(){return this.axisScale.getInnerEnd()}rh(t){super.rh(t),Qc.Km(this.jm,this.Wm);const i=this.yv.length,s=Qc.Zm(this.jm,this.Wm),h=e(this.pixelScale.x.getInnerInterval()-(this.Ba.left+this.Ba.right),this.pixelScale.y.getInnerInterval()-(this.Ba.bottom+this.Ba.top+s)),r=((t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}))(0,0,0,0);if(void 0!==this.HA){const t=Math.min(h.x,h.y)/2;for(let s=0;s<i;s+=1){const h=mm(s,i),n=Math.cos(h),o=Math.sin(h),a=this.yv[s].getLabelSize();xm();const l=this.HA(bm,s,i,this.yv[s].tag,h,this.JA),u=e(n*t+l.paddingX,o*t+l.paddingY);n>0?r.right=Math.max(r.right,u.x+.5*(1-l.alignmentX)*a.x-t):r.left=Math.max(r.left,-u.x+.5*(l.alignmentX+1)*a.x-t),o>0?r.top=Math.max(r.top,u.y+.5*(1-l.alignmentY)*a.y-t):r.bottom=Math.max(r.bottom,-u.y+.5*(l.alignmentY+1)*a.y-t)}}if(this.NA){const t=this.cw();if(void 0!==t){const i=this.NA.start(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max),s=this.NA.end(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max);this.axisScale.Vt(i,s)}}const n=e(this.pixelScale.x.getInnerStart()+(r.left+this.pixelScale.x.getInnerInterval()-r.right)/2,this.pixelScale.y.getInnerStart()+(r.bottom+this.pixelScale.y.getInnerInterval()-r.top)/2),o=Math.min(h.x/2-(r.left+r.right)/2,h.y/2-(r.bottom+r.top)/2);this.iw=c(this.di.left+this.Ba.left+r.left,this.di.top+this.Ba.top+s+r.top,this.di.right+this.Ba.right+r.right,this.di.bottom+this.Ba.bottom+r.bottom),this.Ly(n,o);for(const t of this.sS)t.Gp();for(const t of this.sS)t.rh();super.Vm(),this.gb(!1);for(const t of this.sS)t.Yy()}dispose(){return this.M_.Pt(),this.hw.Pt(),this.mw.Pt(),this.Bb.Pt(),this.eg.Pt(),super.dispose()}getMinimumSize(){return e(this.iw.left+this.iw.right+100,this.iw.bottom+this.iw.top+100)}Ly(t,i){const s=this.yv.length,h=[];for(let r=0;r<s;r+=1){const n=mm(r,s),o=e(t.x+Math.cos(n)*i,t.y+Math.sin(n)*i);h.push(o)}Sm(this.lS,this.UA,t,h),Sm(this.uS,this.UA,t,h),this.lS.xu(i),this.uS.xu(i),((t,i,s,e,h,r,n,o)=>{const a=t.length,l=r.length,u=i>0&&l>1;for(let l=0;l<Math.max(i,a);l+=1)if(u&&l<i){l>=a&&t.push(n());const o=t[l];Sm(o,s,e,r);const u=h*((l+1)/i);o.xu(u)}else l<t.length&&o(t[l]);t.length=u?i:0})(this.zA,this.jA,this.UA,t,i,h,this.ew,this.rw);for(const t of this.zA)t.eh(Ie).sh(this.$A);for(let e=0;e<s;e+=1){const r=this.yv[e],n=mm(e,s);xm();const o=void 0!==this.HA?this.HA(bm,e,s,this.yv[e].tag,n,this.JA):void 0;r.Ly(t,h,e,n,i,this.UA,o)}((t,i,s,h,r,n,o,a,l,u)=>{const c=r.length,f=t.length;let d=0;if(void 0!==i)for(let l=0;l<c;l+=1){const g=r[l].tag,m=mm(l,c);for(let r=0;r<s+ +(0===l);r+=1){vm.alignmentX=0,vm.alignmentY=0,vm.paddingX=0,vm.paddingY=0;const y=i(vm,l,c,g,m,r,s,h);if(void 0!==y){d>=f&&t.push(a());const i=t[d];d+=1;const h=(s-r)/s,c=$r(n,o[l],h);i.oh(an(c,e(y.paddingX,y.paddingY))).Xa(y.alignmentX).Ka(y.alignmentY).lr(u(h))}}}for(let i=d;i<f;i+=1)l(t[i]);t.length=d})(this.VA,this.WA,this.jA,this.ZA,this.yv,t,h,this.nw,this.ow,this.aw);for(const t of this.VA)t.eh(this.YA).dr(this.XA)}cw(){let t,i;const s=this.getSeriesCount()>1;for(const e of this.yv)for(const h of this.sS){const r=h.getValue(e.tag,s);void 0!==r&&(t=void 0===t?r:Math.min(t,r),i=void 0===i?r:Math.max(i,r))}if(void 0!==t&&void 0!==i)return a(t,i)}}const _m=i=>({defaultDragMouseStyle:t.MouseStyles.Horizontal,getTitleTextRotation:()=>0,...Df(i,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.Yr().x))}),Am=i=>({defaultDragMouseStyle:t.MouseStyles.Vertical,getTitleTextRotation:t=>90*t,...Df(i,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.Yr().y))});class wm extends bl{constructor(t,i,s,e){super(),this.zs=[],this.Rc=0,this.nf=!0,this.At=new $e,this.yw=t=>(this.zs.push(t),this.Tc(t),t.setMouseInteractions(this.nf),t),this.getHighlight=()=>this.Rc,this.re=t,this.scale=i,this.pw=s,this.Rs=e}Sw(){return this.zs}onHighlight(t){return this.At.on("highlight",t)}offHighlight(t){return this.At.off(t)}dispose(){return this.zs.forEach(Th),this.pw&&this.pw(this),this.re.$s.te(),this.At.emit("dispose",this),this}setVisible(t){return super.setVisible(t),this.zs.forEach((i=>i.setVisible(t))),this.re.$s.te(),this}onDispose(t){return this.At.on("dispose",t)}offDispose(t){return this.At.off(t,"dispose")}setHighlight(t){return this.Rc=Ar(t),this.re.te(),this}setMouseInteractions(t){this.nf=t;for(let t=0;t<this.zs.length;t+=1)this.zs[t].setMouseInteractions(this.nf);return this}getMouseInteractions(){return this.nf}}class km extends vg{constructor(){super(...arguments),this.bw=[],this.pw=t=>{const i=this.bw.findIndex((i=>i===t));i>=0&&this.bw.splice(i,1),this.re.te()}}clear(){return this.bw.slice().forEach(Th),this.bw.length=0,this.re.te(),this}xw(t,i){void 0!==i?this.bw.splice(i,0,t):this.bw.push(t),t.Sw().forEach((t=>this.Xs(t,{setEventHandlers:!1}))),t.onMouseEnter(((t,i)=>this.xs(t,i))),t.onMouseLeave(((t,i)=>this.Ms(t,i))),t.onMouseClick(((t,i)=>this.As(t,i))),t.onMouseDoubleClick(((t,i)=>this.ws(t,i))),t.onMouseDown(((t,i)=>this.ks(t,i))),t.onMouseUp(((t,i)=>this.Cs(t,i))),t.onMouseMove(((t,i)=>this._s(t,i))),t.onMouseDragStart(((t,i,s)=>this.Ts(t,i,s))),t.onMouseDrag(((t,i,s,e,h)=>this.Fs(t,i,s,e,h))),t.onMouseDragStop(((t,i,s,e)=>this.Is(t,i,s,e))),t.onMouseWheel(((t,i)=>this.Ps(t,i))),t.onTouchStart(((t,i)=>this.Ds(t,i))),t.onTouchMove(((t,i)=>this.Bs(t,i))),t.onTouchEnd(((t,i)=>this.Os(t,i))),this.re.te()}ah(t,i){t.setHighlight(i)}Mw(t){return this.bw.find((i=>i.Sw().includes(t)))}setCursorEnabled(t){return super.setCursorEnabled(t)}}class Cm extends wm{}class Tm extends km{constructor(){super(...arguments),this._w=void 0,this.Aw=()=>{this._w=void 0}}Dp(){return this.Op&&this.bw.length>0&&this.getVisible()}setDefaultStyle(t){this.ww=t,this.bw.forEach(t),t(this.kw);for(let t=0;t<this.ps.length;t+=1)this.Cw(this.ps[t]);return this}setCursorResultTableFormatter(t){return this.bb=t,this.Ls.$s.te(),this}getCursorResultTableFormatter(){return this.bb}fb(t,i){const s=wg(t,i?this.bw.filter((t=>t.getVisible()&&t.getIsUnderMouse())):this.bw.filter((t=>t.getVisible())),this.Tw,Hr);if(void 0!==s)return{location:uh(s[0],this.re.$s.Jt,this.scale),scale:this.scale,resultTableContent:this.bb(new ad,this,s[1]).if(),series:this,fillStyle:s[1].getDominantStyle(),figure:s[1]}}solveNearestFromScreen(t){return this.fb(tc(t,this.Ls.$s),!1)}xw(t){super.xw(t),this.ww&&this.ww(t)}clear(){return this._w=void 0,super.clear()}getXMax(){return this._w||(this._w=this.Fw()),this._w.max.x}getXMin(){return this._w||(this._w=this.Fw()),this._w.min.x}getYMax(){return this._w||(this._w=this.Fw()),this._w.max.y}getYMin(){return this._w||(this._w=this.Fw()),this._w.min.y}Yr(){return e(0,0)}Fw(){const t=a(h(Dr,Dr),h(Br,Br));for(let i=0;i<this.bw.length;i+=1)if(this.bw[i].getVisible()){const s=this.bw[i].getBoundaries();t.min.x=Math.min(t.min.x,s.min.x),t.min.y=Math.min(t.min.y,s.min.y),t.max.x=Math.max(t.max.x,s.max.x),t.max.y=Math.max(t.max.y,s.max.y)}return t}attach(t,i=!0){return super.attach(t,i),this.Cw(t),this}Cw(t){gr(t,this.Rs,{fill:this.kw.getDominantStyle()})}}class Fm extends Cm{constructor(t,i,s,e,h,r,n,o,l,u,c,f){super(t,i,s,f),this.re=t,this.scale=i,this.dimensionStrategy=e,this.start=h,this.end=r,this.lowerExtreme=n,this.lowerQuartile=o,this.median=l,this.upperQuartile=u,this.upperExtreme=c,this.boundaries=a(this.dimensionStrategy.toPoint(h,n),this.dimensionStrategy.toPoint(r,c))}getBoundaries(){return this.boundaries}}class Im extends Fm{constructor(t,i,s,e,h,r,n,o,a,l,u,c,f){super(t,i,s,e,h,r,n,o,a,l,u,c),this.Iw=1,this.Pw=1,this.Dw=this.yw(this.re.hh(this.scale)),this.Bw=this.yw(this.re.mh(this.scale)),this.Ow=this.yw(this.re.mh(this.scale)),this.Lw=this.yw(this.re.mh(this.scale)),this.Ew=this.yw(this.re.mh(this.scale)),this.Rw=this.yw(this.re.mh(this.scale)),this.re=t,this.scale=i,this.dimensionStrategy=e,this.start=h,this.end=r,this.lowerExtreme=n,this.lowerQuartile=o,this.median=a,this.upperQuartile=l,this.upperExtreme=u,this.zw=this.Rs.boxSeriesBodyFillStyle,this.Vw=this.Rs.boxSeriesBodyStrokeStyle,this.ku=this.Rs.boxSeriesStrokeStyle,this.Nw=this.Rs.boxSeriesMedianStrokeStyle,this.Dw.eh(this.zw).sh(this.Vw),this.Bw.gh(this.ku),this.Ow.gh(this.ku),this.Lw.gh(this.ku),this.Ew.gh(this.ku),this.Rw.gh(this.Nw),this.le()}setBodyWidth(t){return this.Iw=t,this.le(),this}getBodyWidth(){return this.Iw}setBodyFillStyle(t){return this.zw="function"==typeof t?t(this.zw):t,this.Dw.eh(this.zw),this.re.te(),this}getBodyFillStyle(){return this.zw}setBodyStrokeStyle(t){return this.Vw="function"==typeof t?t(this.Vw):t,this.Dw.sh(this.Vw),this.re.te(),this}getBodyStrokeStyle(){return this.Vw}setTailWidth(t){return this.Pw=t,this.le(),this}getTailWidth(){return this.Pw}setStrokeStyle(t){this.ku="function"==typeof t?t(this.ku):t;const i=this.ku;return this.Bw.gh(i),this.Ow.gh(i),this.Lw.gh(i),this.Ew.gh(i),this.re.te(),this}getStrokeStyle(){return this.ku}setMedianStrokeStyle(t){return this.Nw="function"==typeof t?t(this.Nw):t,this.Rw.gh(this.Nw),this.re.te(),this}getMedianStrokeStyle(){return this.Nw}le(){this.Dw.oh(this.dimensionStrategy.toPoint((this.start+this.end-this.Iw*(this.end-this.start))/2,this.lowerQuartile)).Gt(this.dimensionStrategy.toPoint((this.end-this.start)*this.Iw,this.upperQuartile-this.lowerQuartile)),this.Bw.ph(this.dimensionStrategy.toPoint((this.start+this.end)/2,this.lowerQuartile)).yh(this.dimensionStrategy.toPoint((this.start+this.end)/2,this.lowerExtreme)),this.Ow.ph(this.dimensionStrategy.toPoint((this.start+this.end)/2,this.upperQuartile)).yh(this.dimensionStrategy.toPoint((this.start+this.end)/2,this.upperExtreme)),this.Lw.ph(this.dimensionStrategy.toPoint((this.start+this.end-this.Pw*(this.end-this.start))/2,this.lowerExtreme)).yh(this.dimensionStrategy.toPoint((this.start+this.end+this.Pw*(this.end-this.start))/2,this.lowerExtreme)),this.Ew.ph(this.dimensionStrategy.toPoint((this.start+this.end-this.Pw*(this.end-this.start))/2,this.upperExtreme)).yh(this.dimensionStrategy.toPoint((this.start+this.end+this.Pw*(this.end-this.start))/2,this.upperExtreme)),this.Rw.ph(this.dimensionStrategy.toPoint((this.start+this.end-this.Iw*(this.end-this.start))/2,this.median)).yh(this.dimensionStrategy.toPoint((this.start+this.end+this.Iw*(this.end-this.start))/2,this.median)),this.re.te()}getDominantStyle(){return this.Dw.ur()}}class Pm extends wm{constructor(t,i,s,e,h){super(t,i,s,h),this.Ca=0,this.Gw=0,this.Ww=0,this.Hw=0,this.Uw=0,this.jw=0,this.$w=-1,this.re=t,this.scale=i,this.positive=e,this.Rs=h}Yw(t,i,s,e,h,r){return this.Ca=t,this.Gw=i,this.Ww=s,this.Hw=e,this.Uw=h,this.$w=r,this.Xw(),this.re.te(),this}Pl(t){return this.jw=t,this.Xw(),this.re.te(),this}getPosition(){return this.Ca}getOpen(){return this.Gw}getHigh(){return this.Ww}getLow(){return this.Hw}getClose(){return this.Uw}Zw(){return this.jw}getDataIndices(){return this.$w}}class Dm extends Pm{constructor(){super(...arguments),this.ku=this.Rs.ohlcCandleStrokeStyle,this.zw=this.positive?this.Rs.ohlcCandleBodyFillStylePositive:this.Rs.ohlcCandleBodyFillStyleNegative,this.Vw=this.positive?this.Rs.ohlcCandleBodyStrokeStylePositive:this.Rs.ohlcCandleBodyStrokeStyleNegative,this.Kw=this.yw(this.re.mh(this.scale)),this.Dw=this.yw(this.re.hh(this.scale)),this.qw=this.yw(this.re.mh(this.scale))}setStrokeStyle(t){return this.ku="function"==typeof t?t(this.ku):t,this.Xw(),this}getStrokeStyle(){return this.ku}setBodyFillStyle(t){return this.zw="function"==typeof t?t(this.zw):t,this.Xw(),this}getBodyFillStyle(){return this.zw}setBodyStrokeStyle(t){return this.Vw="function"==typeof t?t(this.Vw):t,this.Xw(),this}getBodyStrokeStyle(){return this.Vw}getDominantStyle(){return this.zw}Xw(){const t=this.Rc;this.Kw.ph(e(this.Ca,this.Hw)).yh(e(this.Ca,Math.min(this.Uw,this.Gw))).gh(this.ku).Ys(t),this.Dw.eh(this.zw).sh(this.Vw).Ys(t),this.qw.ph(e(this.Ca,Math.max(this.Uw,this.Gw))).yh(e(this.Ca,this.Ww)).gh(this.ku).Ys(t),this.re.te()}le(){const t=e(this.Ca-this.jw/2,Math.min(this.Uw,this.Gw)),i=ln(this.Uw!==this.Gw?e(this.Ca+this.jw/2,Math.min(this.Uw,this.Gw)+Math.abs(this.Uw-this.Gw)):{x:this.Ca+this.jw/2,y:this.scale.Ei(t,{x:0,y:2}).y},t);this.Dw.oh(t).Gt(i)}}class Bm extends Pm{constructor(){super(...arguments),this.Jw=this.positive?this.Rs.ohlcBarStrokeStylePositive:this.Rs.ohlcBarStrokeStyleNegative,this.Qw=this.yw(this.re.mh(this.scale)),this.tk=this.yw(this.re.mh(this.scale)),this.ik=this.yw(this.re.mh(this.scale))}setStrokeStyle(t){return this.Jw="function"==typeof t?t(this.Jw):t,this.Xw(),this}getStrokeStyle(){return this.Jw}getDominantStyle(){return this.Jw.getFillStyle()}Xw(){const t=this.Rc;this.Qw.ph(e(this.Ca-this.jw/2,this.Gw)).yh(e(this.Ca,this.Gw)).gh(this.Jw).Ys(t),this.ik.ph(e(this.Ca,this.Uw)).yh(e(this.Ca+this.jw/2,this.Uw)).gh(this.Jw).Ys(t),this.tk.ph(e(this.Ca,this.Hw)).yh(e(this.Ca,this.Ww)).gh(this.Jw).Ys(t),this.re.te()}le(){}}const Om={Candlestick:Dm,Bar:Bm};var Lm;t.StepOptions=void 0,(Lm=t.StepOptions||(t.StepOptions={}))[Lm.before=0]="before",Lm[Lm.middle=.5]="middle",Lm[Lm.after=1]="after";const Em=(t,i)=>{const s=[],h=t.length,r=i;if(h>0){let i=0,n=t[0];s[i]=n,i+=1;for(let o=1;o<h;o+=1){const h=t[o];if(r<=0)s[i]=e(n.x,h.y),i+=1;else{const t=n.x*(1-r)+h.x*r;s[i]=e(t,n.y),i+=1,s[i]=e(t,h.y),i+=1}s[i]=h,i+=1,n=h}}return s},Rm=(t,i)=>{const s=t*t,h=s*t,r=1-t,n=r*r,o=n*r;return e(o*i[0].x+3*t*n*i[1].x+3*s*r*i[2].x+h*i[3].x,o*i[0].y+3*t*n*i[1].y+3*s*r*i[2].y+h*i[3].y)},zm=(t,i=32)=>{if(2===t.length)return[t[0],t[1]];const s=(t=>{const i=1e-5,s=t.length-1,h=Array(s);if(s>1){let r=e(0,0),n=e(0,0),o=e(0,0),a=hn(ln(t[1],t[0]));const l=3;let u=0,c=0;for(let f=0;f<s;f+=1){const d=Array(4);if(d[0]=t[f],d[1]=t[f],d[3]=t[f+1],d[2]=t[f+1],o=a,r=n,f+1<s?(a=t[f+2]===t[f+1]?e(0,0):hn(ln(t[f+2],t[f+1])),n=hn(an(o,a))):n=e(0,0),t[f+1].y===t[f].y)u=0,c=0;else{const s=t[f+1].x-t[f].x;u=Math.abs(r.x)>i?Math.abs(s/(l*r.x)):1,c=Math.abs(n.x)>i?Math.abs(s/(l*n.x)):1}d[1]=an(on(r,u),d[1]),d[2]=ln(d[2],on(n,c)),h[f]=d}}return h.length>0?h:[]})(t),h=s.length,r=Array(h*i);let n=0;for(let t=0;t<h;t+=1)for(let e=0;e<=i;e+=1)r[n]=Rm(e/i,s[t]),n+=1;return r};class Vm extends Ag{constructor(t,i,s,h,r,n,o,l,u,c,f,d,g,m){super(t,i,s,h,r,n,o,l,u,f,d),this.NM=[],this.dt="Point Line series",this.YM=1e5,this.Hx=5,this.Pa=0,this.rl=!1,this.nl=!1,this.ol=!1,this.Dx=!0,this.sk="nearest-x",this.ek=1,this.hk=[],this.rk=t=>{if(this.NM.length>0){const i=this.NM[this.NM.length-1];if(t.length>0){const s=i.Sl(),h=i.pl(),r=s.length+h.length-+i.Ql();if(r>=this.YM){const n=h.length>0?h[h.length-1]:s[i.Ql()?r:r-1],o=e((n.x+t[0].x)/2,(n.y+t[0].y)/2);i._l(o,a(e(o.x,o.y),e(o.x,o.y))).tu(!0),this.nk([o].concat(t)).Jl(!0)}else i._l(t,this.jM)}}else t.length>0&&this.nk(t)},this.ak=t=>{if(this.hk.length>0){const i=this.hk[this.hk.length-1];t.length>0&&((i.Sl().length+i.pl().length)*this.ek>=this.YM?this.lk(t):i._l(t))}else t.length>0&&this.lk(t)},this.uk=(t,i)=>{const s=t.fb(i);if(s)return uh(s,this.scale,this.re.$s.Jt)},this.ck=(t,i)=>{const s=t.fk(i);if(s)return uh(s,this.scale,this.re.$s.Jt)},this.Ux=c,this.dk=g,this.gk=Sr(f.pointLineSeriesFillStyle,m),this.ku=Sr(this.Rs.pointLineSeriesStrokeStyle,m)}add(t){return super.add(t),this}ZM(){return xg(this.hk)}setStrokeStyle(t){this.ku="function"==typeof t?t(this.ku):t;const i=this.ku;for(let t=0;t<this.NM.length;t+=1)this.NM[t].gh(i);return this.re.te(),this}getStrokeStyle(){return this.ku}setPointFillStyle(t){this.gk="function"==typeof t?t(this.gk):t;const i=this.gk;for(let t=0;t<this.hk.length;t+=1)this.hk[t].eh(i);return this.re.te(),this}getPointFillStyle(){return this.gk}setPointSize(t){this.Hx=t;for(let i=0;i<this.hk.length;i+=1)this.hk[i].Gt(t);return this.re.te(),this}getPointSize(){return this.Hx}getPointShape(){return this.Ux}setPointRotation(t){this.Pa=t;for(let i=0;i<this.hk.length;i+=1)this.hk[i].gr(t);return this.re.te(),this}getPointRotation(){return this.Pa}setIndividualPointSizeEnabled(t){this.rl=t;for(let i=0;i<this.hk.length;i+=1)this.hk[i].bl(t);return this.re.te(),this}getIndividualPointSizeEnabled(){return this.rl}setIndividualPointRotationEnabled(t){this.nl=t;for(let i=0;i<this.hk.length;i+=1)this.hk[i].xl(t);return this.re.te(),this}getIndividualPointRotationEnabled(){return this.nl}setIndividualPointValueEnabled(t){this.ol=t;for(let i=0;i<this.hk.length;i+=1)this.hk[i].Ml(t);return this.re.te(),this}getIndividualPointValueEnabled(){return this.ol}setVisible(t){return super.setVisible(t),this.hk.forEach((i=>i.setVisible(t))),this}setCursorInterpolationEnabled(t){return this.Dx=t,this.re.$s.te(),this}getCursorInterpolationEnabled(){return this.Dx}setCursorSolveBasis(t){return this.sk=t,this.NM.forEach((i=>i.yl(Oa(t)))),this.hk.forEach((i=>i.yl(Oa(t)))),this.re.te(),this}getCursorSolveBasis(){return this.sk}Hf(){return mr(this.gk)||mr(this.ku.getFillStyle())}DM(t){}ah(t,i){t.Ys(i),this.re.te()}XM(t){const i=this.NM.length>0?this.NM[this.NM.length-1].Sl().length+this.NM[this.NM.length-1].pl().length-+this.NM[this.NM.length-1].Ql():void 0;bg(t,i,this.YM,this.rk),bg(t,i,this.YM,this.ak)}lk(t,i){const s=this.re.iS(this.scale)._l(t,i).setMouseInteractions(this.us).eh(this.gk).vl(this.Ux).Gt(this.Hx).gr(this.Pa).bl(this.rl).xl(this.nl).Ml(this.ol).yl(Oa(this.sk)).Ys(this.getHighlight());return this.Xs(s),this.hk.push(s),s}nk(t,i){const s=this.re.Gy(this.scale,void 0,[ff.UserSeries,...this.dk])._l(t,i).setMouseInteractions(this.us).gh(this.ku).yl(Oa(this.sk)).Ys(this.getHighlight());return this.Xs(s),this.NM.push(s),s}attach(t,i=!0){return gr(t,this.Rs,{stroke:this.ku,fill:this.gk}),super.attach(t,i)}getPointAmount(){return this.hk.reduce(((t,i)=>t+i.wl()+i.kl()),this.Du.length)}clear(){super.clear();for(let t=0;t<this.NM.length;t+=1)this.NM[t].dispose();this.NM.length=0;for(let t=0;t<this.hk.length;t+=1)this.hk[t].dispose();return this.hk.length=0,this}$M(t,i,s,e){super.$M(t,i,s,e),this.WM.$M(this.hk,i,s,e,this.scale,(t=>{}))}fb(t,i,s=this.Dx){const e=s?wg(t,i?this.NM.filter((t=>t.getIsUnderMouse())):this.NM,this.ck,"nearest-x"===this.sk?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.sk?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2):wg(t,i?this.hk.filter((t=>t.getIsUnderMouse())):this.hk,this.uk,"nearest-x"===this.sk?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.sk?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==e){const t=uh(e[0],this.re.$s.Jt,this.scale),i=e[1]instanceof yl?e[1].Cu():e[1].ur(),s=e[1]instanceof il?e[1].ur():void 0,h=e[1]instanceof yl?e[1].Cu().getFillStyle():void 0,r=Ee(i)?e[0].color?new Be({color:e[0].color}):new Be({color:i.getFallbackColor()}):void 0;return _d(t,this.scale,this.bb(new ad,this,t.x,t.y,t).if(),this,h||r||s)}}solveNearestFromScreen(t,i=this.Dx){return this.fb(tc(t,this.Ls.$s),!1,i)}}const Nm=32,Gm=(t,i)=>t.pl().length>=i?t.pl().slice(-i):Array.prototype.concat(t.Sl(),t.pl()).slice(-i),Wm=(t,i,s)=>{const e=Array.prototype.concat(t.Sl(),t.pl()).slice(0,-s-1).concat(i.slice(s+1,2*s+2));t.Al()._l(e).le()};class Hm extends Vm{constructor(t,i,s,e,h,r,n,o,a,l,u,c,f,d){super(t,i,s,e,h,r,n,o,a,l,u,c,f,d),this.dt="Spline Series",this.ek=Nm,this.YM=8e3,this.mk=t=>{if(0===t.length)return;const i=this.hk.length;if(i>0){const s=i>1,e=this.hk[i-1];if(s){const s=Array.prototype.concat(e.Sl(),e.pl()),h=s.length;if(h*Nm>=this.YM){const s=Gm(e,3),h=Array.prototype.concat(s,t),r=zm(h,Nm);Wm(this.NM[i-1],r,Nm),this.nk(r.slice(66))}else if(h<5){const e=this.hk[i-2],h=Gm(e,3),r=Array.prototype.concat(h,s,t),n=zm(r,Nm),o=this.NM[i-1],a=n.slice(66);o.Al()._l(a).le()}else{const s=this.NM[i-1],h=Array.prototype.concat(s.Sl(),s.pl()),r=Gm(e,4),n=Array.prototype.concat(r,t),o=zm(n,Nm),a=h.slice(0,-66).concat(o.slice(33));s.Al()._l(a).le()}}else{const s=Array.prototype.concat(e.Sl(),e.pl()),h=s.length,r=this.NM[i-1];if(h*Nm>=this.YM){const i=Gm(e,3),s=Array.prototype.concat(i,t),h=zm(s,Nm);Wm(this.NM[0],h,Nm),this.nk(h.slice(66))}else if(h+t.length>1){const i=Array.prototype.concat(s,t),e=zm(i,Nm);r.Al()._l(e).le()}else r._l(t)}}else{const i=t.length>0?zm(t,Nm):t,s=Xr(i);this.nk(i,s)}this.ak(t)}}setCursorInterpolationEnabled(t){return super.setCursorInterpolationEnabled(t)}XM(t){const i=this.hk.length,s=this.hk.length>0?this.hk[i-1].Sl().length+this.hk[i-1].pl().length:void 0;bg(t,s,Math.ceil(this.YM/this.ek),this.mk)}solveNearestFromScreen(t,i=this.Dx){if(i)return super.solveNearestFromScreen(tc(t,this.Ls.$s),i);const s=wg(tc(t,this.Ls.$s),this.hk,this.uk,"nearest-x"===this.sk?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.sk?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==s){const t=uh(s[0],this.re.$s.Jt,this.scale);return _d(t,this.scale,this.bb(new ad,this,t.x,t.y,t).if(),this,s[1].ur())}}}class Um{constructor(){this.ns="FreeformPattern",this.Gl={type:"disabled",packager:(t,i,s)=>t.slice()}}$M(t,i,s,e,h,r){if(e>0){const h=Math.trunc((i-e)/s);if(h>0&&t.length>1){const i=t.splice(0,h);for(let t=0;t<i.length;t+=1)r(i[t]),i[t].dispose()}}}yk(t,i){const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)}getXMax(t=[],i){return $h(t,Vh,Math.max,Hh,i)}getXMin(t=[],i){return $h(t,zh,Math.min,Wh,i)}getYMax(t=[],i){return $h(t,Gh,Math.max,jh,i)}getYMin(t=[],i){return $h(t,Nh,Math.min,Uh,i)}}const jm=t=>{switch(t){case"normal":default:return 1;case"high":return.25}},$m=le({Gl:{type:"disabled",packager:(t,i,s)=>t.slice()}});class Ym extends $m{$M(t,i,s,e,h,r){if(e>0){const i=Math.ceil(e/s),n=t.length-i;if(n>0){const i=this.pk(t,h);if(i>0){const s=n-i>0?i:n;if(s>0){for(let i=0;i<s;i+=1)r(t[i]),t[i].dispose();t.splice(0,s)}}}}}}const Xm=(t,i)=>{const s=i.ai();return t?Math.min(s,t):s},Zm=(t,i)=>{const s=i.li();return t?Math.max(s,t):s};class Km extends Ym{yk(t,i){return Math.abs(t.x-i.x)}getYMax(t=[],i){return t.reduce(Zm,i?i.max.y:void 0)}getYMin(t=[],i){return t.reduce(Xm,i?i.min.y:void 0)}}const qm=(t,i)=>{const s=i.ni();return t?Math.min(s,t):s},Jm=(t,i)=>{const s=i.oi();return t?Math.max(s,t):s};class Qm extends Ym{yk(t,i){return Math.abs(t.y-i.y)}getXMax(t=[],i){return t.reduce(Jm,i?i.max.x:void 0)}getXMin(t=[],i){return t.reduce(qm,i?i.min.x:void 0)}}const ty={horizontalProgressive:new class extends Km{constructor(){super({Gl:Ta()}),this.ns="HorizontalProgressivePattern"}pk(t,i){const s=t.length,e=Math.min(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.x.Ei(t[r].oi(),t[r].Rl())<e&&(h+=1);return h}getXMax(t=[],i){return void 0!==i?i?i.max.x:void 0:t.length>0?t[t.length-1].oi():void 0}getXMin(t=[],i){return t.length>0&&t[0].wl()>0?t[0].ni():i?i.min.x:void 0}setPrecision(t){return this.set("_columnPackaging",Ta(jm(t)))}},horizontalRegressive:new class extends Km{constructor(){super({Gl:Fa()}),this.ns="HorizontalRegressivePattern"}pk(t,i){const s=t.length,e=Math.max(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.x.Ei(t[r].ni(),-t[r].Rl())&&(h+=1);return h}getXMax(t=[],i){return t.length>0&&t[0].wl()>0?t[0].oi():i?i.max.x:void 0}getXMin(t=[],i){return void 0!==i?i?i.min.x:void 0:t.length>0?t[t.length-1].ni():void 0}setPrecision(t){return this.set("_columnPackaging",Fa(jm(t)))}},verticalProgressive:new class extends Qm{constructor(){super({Gl:Ia()}),this.ns="VerticalProgressivePattern"}pk(t,i){const s=t.length,e=Math.min(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.y.Ei(t[r].li(),t[r].zl())<e&&(h+=1);return h}getYMax(t=[],i){return void 0!==i?i?i.max.y:void 0:t.length>0?t[t.length-1].li():void 0}getYMin(t=[],i){return t.length>0&&t[0].wl()>0?t[0].ai():i?i.min.y:void 0}setPrecision(t){return this.set("_columnPackaging",Ia(jm(t)))}},verticalRegressive:new class extends Qm{constructor(){super({Gl:Pa()}),this.ns="VerticalRegressivePattern"}pk(t,i){const s=t.length,e=Math.max(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.y.Ei(t[r].ai(),-t[r].zl())&&(h+=1);return h}getYMax(t=[],i){return t.length>0&&t[0].wl()>0?t[0].li():i?i.max.y:void 0}getYMin(t=[],i){return void 0!==i?i?i.min.y:void 0:t.length>0?t[t.length-1].ai():void 0}setPrecision(t){return this.set("_columnPackaging",Pa(jm(t)))}},freeform:new Um};class iy extends Vm{constructor(t,i,s,h,r,n,o,l,u,c,f,d,g,m){super(t,i,s,h,r,n,o,l,ty.horizontalProgressive,u,f,d,g,m),this.dt="Step Series",this.rk=t=>{const i=this.NM.length>0?this.NM[this.NM.length-1].Sl().length+this.NM[this.NM.length-1].pl().length:void 0;bg(t,i,this.YM,this.Sk)},this.Sk=t=>{const i=t.length;if(this.NM.length>0){const s=this.NM[this.NM.length-1];if(i>0){const i=s.Sl(),h=s.pl(),r=h.length>0?h[h.length-1]:i[i.length-1],n=Em([r].concat(t),this.ut);n.shift();const o=e((r.x+n[0].x)/2,(r.y+n[0].y)/2),l=Array.prototype.concat(o,n);(h.length>0?i.length+h.length:i.length)>=this.YM?(s._l(o,a(e(o.x,o.y),e(o.x,o.y))).tu(!0),this.nk(l).Jl(!0),this.lk(t)):s._l(l)}}else i>0&&this.nk(Em(t,this.ut));this.ak(t)},this.ut=c,void 0===this.dk.find((t=>"DataPattern"===t.type))&&this.dk.push({type:"DataPattern",args:{pattern:"ProgressiveX"}})}}class sy extends Ag{constructor(t,i,s,e,h,r,n,o,a,l,u,c,f,d){super(t,i,s,e,h,r,n,o,a,l,u),this.NM=[],this.dt="Line Series",this.Dx=!0,this.YM=void 0,this.sk="nearest-x",this.Bu=void 0,this.Hf=()=>mr(this.ku.getFillStyle()),this.vk=(t,i)=>{const s=t.Gx(i);if(s)return uh(s,this.scale,this.re.$s.Jt)},this.ck=(t,i)=>{const s=t.fk(i);if(s)return uh(s,this.scale,this.re.$s.Jt)},this.dk=c,this.ro=d,this.ku=Sr(this.Rs.lineSeriesStrokeStyle,f),this.bk={individualLookupValuesEnabled:void 0!==(null==d?void 0:d.individualLookupValuesEnabled)&&d.individualLookupValuesEnabled}}add(t){return super.add(t),this}setMouseInteractions(t){return super.setMouseInteractions(t)}setStrokeStyle(t){this.ku="function"==typeof t?t(this.ku):t;const i=this.ku;for(let t=0;t<this.NM.length;t+=1)this.NM[t].gh(i);return this.re.te(),this}getStrokeStyle(){return this.ku}setDataCleaning(t){return this.Bu=t,this.NM.forEach((t=>t.Ou(this.Bu))),this.re.te(),this}setCursorInterpolationEnabled(t){return this.Dx=t,this.re.$s.te(),this}getCursorInterpolationEnabled(){return this.Dx}setCursorSolveBasis(t){return this.sk=t,this.NM.forEach((i=>i.yl(Oa(t)))),this.re.te(),this}getCursorSolveBasis(){return this.sk}DM(t){}XM(t){let i=this.NM[0];i||(i=this.nk(),this.NM.push(i),this.Xs(i)),i._l(t)}nk(){return this.re.Gy(this.scale,this.bk,[ff.UserSeries,...this.dk]).gh(this.ku).Ou(this.Bu).yl(Oa(this.sk)).Ys(this.getHighlight())}attach(t,i=!0){return gr(t,this.Rs,{stroke:this.ku}),super.attach(t,i)}ah(t,i){t.Ys(i),this.re.te()}$M(t,i,s,e){}fb(t,i,s=this.Dx){const e=wg(t,i?this.NM.filter((t=>t.getIsUnderMouse())):this.NM,s?this.ck:this.vk,"nearest-x"===this.sk?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.sk?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==e){const t=uh(e[0],this.re.$s.Jt,this.scale),i=e[1].Cu();return _d(t,this.scale,this.bb(new ad,this,t.x,t.y,t).if(),this,i.getFillStyle())}}solveNearestFromScreen(t,i=this.Dx){return this.fb(tc(t,this.Ls.$s),!1,i)}}class ey extends Cm{constructor(t,i,s,h,r,n){super(t,i,s,r),this.xk={x:0,y:0,width:0,height:0},this.Mk={x1:0,y1:0,x2:0,y2:0},this.al=a(e(0,0),e(0,0)),this.Qe=Sr(r.rectangleSeriesFillStyle,n),this.re=t,this.Aw=h,this.scale=i,this.th=Sr(r.rectangleSeriesStrokeStyle,n),this.ih=this.yw(this.re.hh(this.scale)).eh(this.Qe).sh(this.th)}getBoundaries(){return this.al}setDimensions(t){return"x"in t?(this.xk=t,this.Mk={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.Mk=t,this.xk={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.ih.oh(e(this.xk.x,this.xk.y)).Gt(e(this.xk.width,this.xk.height)),this.al=Xr([this.xk,e(this.xk.x+this.xk.width,this.xk.y+this.xk.height)]),this.Aw(),this.re.te(),this}getDimensionsPositionAndSize(){return this.xk}getDimensionsTwoPoints(){return this.Mk}setFillStyle(t){return this.Qe="function"==typeof t?t(this.Qe):t,this.ih.eh(this.Qe),this.re.te(),this}getFillStyle(){return this.Qe}setStrokeStyle(t){return this.th="function"==typeof t?t(this.th):t,this.ih.sh(this.th),this.re.te(),this}getStrokeStyle(){return this.th}getDominantStyle(){return this.ih.ur()}}class hy extends Tm{constructor(t,i,s,h,r,n,o,a,l,u,c){super(t,i,s,h,r,n,o,a,l,u),this.dt="Rectangle Series",this.bb=(t,i,s)=>{const e=s.getDimensionsPositionAndSize();return t.addRow(i.dt).addRow("X","",i.axisX.formatValue(e.x)).addRow("Y","",i.axisX.formatValue(e.y)).addRow("Width","",i.axisX.formatValue(e.width)).addRow("Height","",i.axisX.formatValue(e.height))},this.Tw=t=>{const i=t.getDimensionsPositionAndSize(),s=e(i.x+i.width/2,i.y+i.height/2);return uh(s,this.scale,this.re.$s.Jt)},this._k=c,this.kw=new ey(this.re,this.scale,Fh,Fh,this.Rs,this._k).dispose()}DM(t){}add(t){const i=new ey(this.re,this.scale,this.pw,this.Aw,this.Rs,this._k).setDimensions(t);return this.xw(i),i}}class ry extends Cm{constructor(t,i,s,e,h,r){super(t,i,s,h),this.Ak=[],this.al=Or,this.re=t,this.scale=i,this.Aw=e,this.Qe=Sr(h.polygonSeriesFillStyle,r),this.th=Sr(h.polygonSeriesStrokeStyle,r),this.a_=this.yw(this.re.af(this.scale,ol.Simple)).sh(this.th).eh(this.Qe)}getBoundaries(){return this.al}setDimensions(t){return this.Ak=t,this.a_.Ll(this.Ak),this.al=Xr(this.Ak),this.Aw(),this.re.te(),this}getDimensions(){return this.Ak}setFillStyle(t){return this.Qe="function"==typeof t?t(this.Qe):t,this.a_.eh(this.Qe),this.re.te(),this}getFillStyle(){return this.Qe}setStrokeStyle(t){return this.th="function"==typeof t?t(this.th):t,this.a_.sh(this.th),this.re.te(),this}getStrokeStyle(){return this.th}getDominantStyle(){return this.a_.ur()}}class ny extends Tm{constructor(t,i,s,h,r,n,o,a,l,u,c){super(t,i,s,h,r,n,o,a,l,u),this.dt="Polygon Series",this.bb=(t,i,s)=>t.addRow(i.getName()),this.Tw=t=>{const i=t.getBoundaries(),s=e((i.min.x+i.max.x)/2,(i.min.y+i.max.y)/2);return uh(s,this.scale,this.re.$s.Jt)},this._k=c,this.kw=new ry(this.re,this.scale,Fh,Fh,this.Rs,this._k).dispose()}DM(t){if(!(t instanceof Rn))throw new Error("PolygonSeries can only be attached to a pair of Linear Axes.")}add(t){const i=new ry(this.re,this.scale,this.pw,this.Aw,this.Rs,this._k).setDimensions(t);return this.xw(i),i}}class oy extends Cm{constructor(t,i,s,h,r,n){super(t,i,s,r),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.al=a(e(0,0),e(0,0)),this.dh=this.yw(this.re.mh(this.scale)),this.Rs=r,this.re=t,this.scale=i,this.Aw=h,this.Qe=Sr(r.segmentSeriesStrokeStyle,n),this.dh.gh(this.Qe)}getBoundaries(){return this.al}setDimensions(t){return this.dimensions=t,this.dh.ph(e(t.startX,t.startY)).yh(e(t.endX,t.endY)),this.al=a(e(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),e(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.Aw(),this.re.te(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.Qe="function"==typeof t?t(this.Qe):t,this.dh.gh(this.Qe),this.re.te(),this}getStrokeStyle(){return this.Qe}getDominantStyle(){const t=this.dh.Cu();return t!==rh?t.getFillStyle():Ie}}class ay extends Tm{constructor(t,i,s,h,r,n,o,a,l,u,c){super(t,i,s,h,r,n,o,a,l,u),this.dt="Segment Series",this.bb=(t,i,s)=>t.addRow(i.dt).addRow("Start",i.axisX.formatValue(s.getDimensions().startX),",",i.axisY.formatValue(s.getDimensions().startY)).addRow("End",i.axisX.formatValue(s.getDimensions().endX),",",i.axisY.formatValue(s.getDimensions().endY)),this.Tw=t=>{const i=t.getDimensions(),s=e((i.startX+i.endX)/2,(i.startY+i.endY)/2);return uh(s,this.scale,this.re.$s.Jt)},this._k=c,this.kw=new oy(this.re,this.scale,Fh,Fh,this.Rs,this._k).dispose()}DM(t){}add(t){const i=new oy(this.re,this.scale,this.pw,this.Aw,this.Rs,this._k).setDimensions(t);return this.xw(i),i}}class ly extends Cm{constructor(t,i,s,h,r,n){super(t,i,s,r),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.al=a(e(0,0),e(0,0)),this.wk=this.yw(this.re.df(this.scale)).wu(50),this.re=t,this.scale=i,this.Aw=h,this.Qe=Sr(r.ellipseSeriesFillStyle,n),this.th=Sr(r.ellipseSeriesStrokeStyle,n),this.wk.eh(this.Qe).sh(this.th)}getBoundaries(){return this.al}setDimensions(t){return this.dimensions=t,this.wk.oh(e(t.x,t.y)).Mu(t.radiusX)._u(t.radiusY),this.al=a(e(t.x-t.radiusX,t.y-t.radiusY),e(t.x+t.radiusX,t.y+t.radiusY)),this.Aw(),this.re.te(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.Qe="function"==typeof t?t(this.Qe):t,this.wk.eh(this.Qe),this.re.te(),this}getFillStyle(){return this.Qe}setStrokeStyle(t){return this.th="function"==typeof t?t(this.th):t,this.wk.sh(this.th),this.re.te(),this}getStrokeStyle(){return this.th}getDominantStyle(){return this.wk.ur()}}class uy extends Tm{constructor(t,i,s,h,r,n,o,a,l,u,c){super(t,i,s,h,r,n,o,a,l,u),this.dt="Ellipse Series",this.bb=(t,i,s)=>t.addRow(i.dt).addRow("X","",i.axisX.formatValue(s.getDimensions().x)).addRow("Y","",i.axisY.formatValue(s.getDimensions().y)).addRow("Radius X","",i.axisX.formatValue(s.getDimensions().radiusX)).addRow("Radius Y","",i.axisY.formatValue(s.getDimensions().radiusY)),this.Tw=t=>{const i=t.getDimensions(),s=e(i.x,i.y);return uh(s,this.scale,this.re.$s.Jt)},this._k=c,this.kw=new ly(this.re,this.scale,Fh,Fh,this.Rs,this._k).dispose()}DM(t){if(!(t instanceof Rn||t instanceof zn))throw new Error("EllipseSeries only supports Linear Axes")}add(t){const i=new ly(this.re,this.scale,this.pw,this.Aw,this.Rs,this._k).setDimensions(t);return this.xw(i),i}}function cy(t,i){return t===i?0:t<i?-1:1}function fy(t,i){return t===i}class dy{constructor(t){this.left=null,this.right=null,this.length=1,this.value=t}kk(t,i,s,e,h){if(this.left){const{length:r}=this.left;i=this.left.kk(t,i,s,e,h),s+=r}return i=t.call(e,i,this.value,s,h),s+=1,this.right&&(i=this.right.kk(t,i,s,e,h)),i}Ck(t,i,s,e,h){return this.right&&(i=this.right.Ck(t,i,s,e,h),s-=this.right.length),i=t.call(e,i,this.value,s,h),s-=1,this.left&&(i=this.left.Ck(t,i,s,e,h)),i}Tk(){this.length=1+(this.left?this.left.length:0)+(this.right?this.right.length:0)}Fk(){let t=this;if(t.right){for(t=t.right;t.left;)t=t.left;return t}}Ik(){let t=this;if(t.left){for(t=t.left;t.right;)t=t.right;return t}}}class gy{constructor(t,i=fy,s=cy){this.root=null,this.length=0,this.contentEquals=i,this.contentCompare=s,t&&(t instanceof Array?t.forEach((t=>this._l(t))):this._l(t))}Pk(t){return!!this.root&&(this.Dk(t),this.contentEquals(t,this.root.value))}Bk(t,i){return this.kk(((s,e)=>s&&t.call(i,e)),!0)}Ok(t,i){return this.kk(((s,e)=>{t.call(i,e)}),void 0)}M(t){if(this.root&&(this.Dk(t),this.contentEquals(t,this.root.value)))return this.root}_l(t){const i=new dy(t);if(!this.root)return this.root=i,this.length+=1,i;if(this.Dk(t),!this.contentEquals(t,this.root.value)){const s=this.contentCompare(t,this.root.value);if(0===s)throw new Error(`SortedSet cannot contain incomparable but inequal values: ${t} and ${this.root.value}`);return s<0?(i.right=this.root,i.left=this.root.left,this.root.left=null,this.root.Tk()):(i.left=this.root,i.right=this.root.right,this.root.right=null,this.root.Tk()),i.Tk(),this.root=i,this.length+=1,i}}Lk(t){if(this.root&&(this.Dk(t),this.contentEquals(t,this.root.value))){if(this.root.left){const{right:i}=this.root;this.root=this.root.left,this.Dk(t),this.root.right=i}else this.root=this.root.right;return this.length-=1,this.root&&this.root.Tk(),!0}return!1}Ek(){if(this.root){let t=this.root;for(;t.right;)t=t.right;return t}}Rk(){if(this.root){let t=this.root;for(;t.left;)t=t.left;return t}}zk(t){if(this.root)return this.Dk(t),this.contentCompare(this.root.value,t)>0?this.root.Ik():this.root}Vk(t){if(this.root)return this.Dk(t),this.contentCompare(this.root.value,t)>=0?this.root.Ik():this.root}Nk(t){if(this.root)return this.Dk(t),this.contentCompare(this.root.value,t)>=0?this.root:this.root.Fk()}Gk(t){if(this.root)return this.Dk(t),this.contentCompare(this.root.value,t)<=0?this.root.Fk():this.root}Wk(t){t instanceof Array?t.forEach((t=>this._l(t))):this._l(t)}Dk(t){let i,s,e,h,r,n;if(this.root){for(i=new dy,s=i,e=i,n=new dy,r=this.root;;){const i=this.contentCompare(t,r.value);if(i<0){if(!r.left)break;if(this.contentCompare(t,r.left.value)<0&&(h=r.left,r.left=h.right,r.Tk(),h.right=r,h.Tk(),r=h,!r.left))break;h=new dy,h.right=r,h.left=n.left,n.left=h,e.left=r,e.Tk(),e=r,r=r.left}else{if(!(i>0))break;if(!r.right)break;if(this.contentCompare(t,r.right.value)>0&&(h=r.right,r.right=h.left,r.Tk(),h.left=r,h.Tk(),r=h,!r.right))break;h=new dy,h.left=r,h.right=n.right,n.right=h,s.right=r,s.Tk(),s=r,r=r.right}}for(s.right=r.left,s.Tk(),e.left=r.right,e.Tk(),r.left=i.right,r.right=i.left;n.left;)n.left.right.Tk(),n.left=n.left.left;for(;n.right;)n.right.left.Tk(),n.right=n.right.right;r.Tk(),this.root=r}}kk(t,i,s){return this.root&&(i=this.root.kk(t,i,0,s,this)),i}Ck(t,i,s){return this.root&&(i=this.root.Ck(t,i,this.length-1,s,this)),i}Al(){this.root=null,this.length=0}Hk(t,i){let s,e=this.Rk();for(;e;){const h=this.Gk(e.value);t.call(i,s?s.value:void 0,e.value,h?h.value:void 0),s=e,e=h}}Uk(t,i,s){let e,h=this.Rk(),r=0;for(;h;){const n=this.Gk(h.value);i=t.call(s,i,e?e.value:void 0,h.value,n?n.value:void 0,r++,this),e=h,h=n}return i}}class my{constructor(t,i){this.key=t,this.value=i}equals(t){return fy(this.key,t.key)&&fy(this.value,t.value)}compare(t){return cy(this.key,t.key)}}class yy{constructor(t,i=fy,s=cy){this.length=0,this.contentEquals=i,this.contentCompare=s,this.store=new gy(void 0,((t,s)=>i(t.key,s.key)),((t,i)=>s(t.key,i.key))),t&&(Array.isArray(t)?t.forEach((t=>this._l(t.key,t.value))):this._l(t.key,t.value))}M(t){const i=this.store.M(new my(t,void 0));return i?i.value.value:void 0}S(t,i){const s=new my(t,i),e=this.store.M(s);if(e)return e.value.value=i,e;const h=this.store._l(s);return this.length+=1,h}_l(t,i){return this.S(t,i)}Pk(t){return this.store.Pk(new my(t,void 0))}Al(){this.store.Al(),this.length=0}kk(t,i,s){return this.store.kk(((i,e)=>t.call(s,i,e.value,e.key,this)),i,this.store)}Ck(t,i,s){return this.store.Ck(((i,e)=>t.call(s,i,e.value,e.key,this)),i,this.store)}Lk(t){const i=new my(t,void 0);return!!this.store.Pk(i)&&(this.store.Lk(i),this.length--,!0)}Ok(t,i){return this.kk(((s,e,h)=>{t.call(i,e,h)}),void 0)}jk(t){return this.store.M(new my(t,void 0))||void 0}Hk(t,i){let s,e=this.store.Rk();for(;e;){const h=this.store.Gk(e.value);t.call(i,s?s.value.value:void 0,e.value.value,h?h.value.value:void 0),s=e,e=h}}Uk(t,i,s){let e,h=this.store.Rk(),r=0;for(;h;){const n=this.store.Gk(h.value);i=t.call(s,i,e?e.value.value:void 0,h.value.value,n?n.value.value:void 0,r++,this),e=h,h=n}return i}Ek(){return this.store.Ek()}Rk(){return this.store.Rk()}zk(t){return this.store.zk(new my(t,void 0))}Vk(t){return this.store.Vk(new my(t,void 0))}Nk(t){return this.store.Nk(new my(t,void 0))}Gk(t){return this.store.Gk(new my(t,void 0))}}const py={minGapNew:1.75,minGapSplit:2,maxGapFuse:1.5},Sy=(t,i)=>Math.min(t,i[3]),vy=(t,i)=>Math.max(t,i[2]),by=(t,i)=>{const s=t.length;if(!(s<2))return[i,t[0].y,t.reduce(kh,Br),t.reduce(wh,Dr),t[s-1].y]},xy=(t,i)=>{let s=[];const e=t.getDataIndices(),h=i.getDataIndices();return Array.isArray(e)?s=s.concat(e):s.push(e),Array.isArray(h)?s=s.concat(h):s.push(h),s},My=(t,i)=>{if(t.length>0)return i>0?t[t.length-1]:t[0]},_y=(t,i,s)=>t.addRow(i.getName()).addRow("X","",i.axisX.formatValue(s.getPosition())).addRow("Open","",s.getOpen().toFixed(2)).addRow("High","",s.getHigh().toFixed(2)).addRow("Low","",s.getLow().toFixed(2)).addRow("Close","",s.getClose().toFixed(2));class Ay extends km{constructor(i,s,e,r,n,o,l,u,c,f,d,g,m){super(i,s,e,r,n,o,l,u,d,g),this.dt="OHLC Series",this.$k=new yy,this._w=a(h(Dr,Dr),h(Br,Br)),this.Yk=0,this.Xk=5,this.Zk=py,this.Bu=void 0,this.Kk=void 0,this.qk=void 0,this.Jk=!0,this.cs=t.HighlightModes.onHover,this.bb=_y,this.Qk=c,this.tC=f,this.iC=new this.Qk(this.re,this.scale,Fh,!0,this.Rs).dispose(),this.sC=new this.tC(this.re,this.scale,Fh,!1,this.Rs).dispose()}DM(t){if(!(t.x instanceof On))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.eC=t.x}setStyle(t){return this.hC=t,this.rC(),this.re.te(),this}setPositiveStyle(t){return this.nC=t,this.rC(),this.re.te(),this}setNegativeStyle(t){return this.oC=t,this.rC(),this.re.te(),this}setFigureWidth(t){return this.Xk=t,this.re.te(),this}getFigureWidth(){return this.Xk}setFigureAutoFitting(t){return this.Zk=t?py:void 0,this.re.te(),this}getFigureAutoFitting(){return void 0!==this.Zk}aC(t,i){return t-i/2<=this.scale.x.getInnerEnd()+.1*this.scale.x.getInnerInterval()&&this.scale.x.getInnerStart()-.1*this.scale.x.getInnerInterval()<=t+i/2}lC(t,i,s,e){const h=(t=>t[4]>=t[1])(t),r=new(h?this.Qk:this.tC)(this.re,this.scale,this.pw,h,this.Rs);return this.xw(r,e),this.uC(r),this.ah(r,this.getHighlight()),r.Yw(t[0],t[1],t[2],t[3],t[4],i).Pl(s),r}cC(t){const i=this.Yk;return this.Yk+=1,this.$k.S(i,t),this.Jk=!0,this.At.emit("dataAdd",this,[t],void 0),i}rC(){this.bw.forEach((t=>{this.hC&&this.hC(t),t.positive&&this.nC?this.nC(t):!t.positive&&this.oC&&this.oC(t)}))}uC(t){this.hC&&this.hC(t),t.positive&&this.nC?this.nC(t):!t.positive&&this.oC&&this.oC(t)}fC(t){return t*this.eC.getPixelSize()}dC(t){return t/this.eC.getPixelSize()}gC(t){if(!Array.isArray(t))return this.$k.M(t);if(this.$k.M(t[0])&&this.$k.M(t[t.length-1])){let i=0;const s=this.$k.M(t[0])[1];let e=Br,h=Dr;const r=this.$k.M(t[t.length-1])[4];for(let s=0;s<t.length;s+=1){const r=this.$k.M(t[s]);i+=r[0]/t.length,e=Math.max(e,r[2]),h=Math.min(h,r[3])}return[i,s,e,h,r]}}mC(t,i,s){if(0===this.bw.length)return;if(this.bw.length>1){const i=t>0?this.bw.length-1:0;this.bw[i].dispose()}let e;do{e=!1;const h=My(this.bw,t);if(h){const r=h.getPosition(),n=h.getDataIndices();let o,a=("number"==typeof n?n:n[t>0?n.length-1:0])+t;const l=[],u=[];for(;;){const e=this.$k.M(a);if(!e)break;if(!this.aC(e[0],i))break;if(o){if(Math.abs(r-e[0])>=1.5*s)break;t>0?o[4]=e[4]:o[1]=e[1],o[2]=Math.max(o[2],e[2]),o[3]=Math.min(o[3],e[3])}else o=e.slice();l.push(e[0]),t>0?u.push(a):u.splice(0,0,a),a+=t}if(o){const s=t>0?void 0:0;this.lC(o,u,i,s),e=!0}}}while(e)}$M(t){var i;if(t&&"maxDataPointCount"in t){const i=t.maxDataPointCount;if(i&&this.$k.length>i){const t=this.Yk-1,s=this.$k.store.Rk();if(s){for(let e=t-i;e>=s.value.key;e-=1)this.$k.Lk(e);let e=!0;this._w.min.y=Dr,this._w.max.y=Br;for(let s=1+t-i;s<=t;s+=1){const t=this.$k.M(s);t&&(this._w.min.y=Math.min(this._w.min.y,t[3]),this._w.max.y=Math.max(this._w.max.y,t[2]),e&&(this._w.min.x=t[0],e=!1))}}}}else if(t&&"minDataPointCount"in t&&t.minDataPointCount){const s=t.minDataPointCount,e=this.scale.x.getInnerStart(),h=this.Yk-1;let r=this.$k.store.Rk();if(r){const t=r.value.key;let n;for(let t=r.value.key;t<=h&&!((null===(i=this.$k.M(t))||void 0===i?void 0:i[0])>=e);t+=1)n=t;if(void 0!==n&&n-t>=1e3&&this.$k.length-(n-t)>=s){for(let i=n;i>=t;i-=1)this.$k.Lk(i);r=this.$k.store.Rk();let i=!0;if(this._w.min.y=Dr,this._w.max.y=Br,r)for(let t=r.value.key;t<=h;t+=1){const s=this.$k.M(t);s&&(this._w.min.y=Math.min(this._w.min.y,s[3]),this._w.max.y=Math.max(this._w.max.y,s[2]),i&&(this._w.min.x=s[0],i=!1))}}}}return this}setDataCleaning(t){return this.Bu=t,this.re.te(),this}Yy(){super.Yy(),this.$M(this.Bu);const t=this.eC.getPixelSize(),i=this.Kk,s=a(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd()),e=this.qk,h=this.fC(this.Xk),r=!e||s.max-s.min!=e.max-e.min,n=this.bw.length;if(!e||s.min>e.min)for(let t=0;t<this.bw.length;t+=1){const i=this.bw[t];if(this.aC(i.getPosition(),h))break;i.dispose(),t-=1}if(!e||s.max<e.max)for(let t=this.bw.length-1;t>=0;t-=1){const i=this.bw[t];if(this.aC(i.getPosition(),h))break;i.dispose()}if(0===this.bw.length&&this.$k.length>0)for(let t=0;t<this.Yk;t+=1){const i=this.$k.M(t);if(i&&this.aC(i[0],h)){this.lC(i,t,h);break}}if(this.bw.length>0){const n=this.Zk?h*this.Zk.minGapNew:0;if((r||!e||s.min<e.min)&&(this.mC(-1,h,n),this.Jk=!0),(r||!e||this.Jk||s.max>e.max)&&(this.mC(1,h,n),this.Jk=!0),this.Zk){const s=h*this.Zk.maxGapFuse,e=h*this.Zk.minGapSplit;if(void 0===i||t!==i||this.Jk){let t,i;do{t=!1;for(let i=0;i<this.bw.length;i+=1){const s=this.bw[i],r=s.getDataIndices();if("number"!=typeof r&&r.length>1){const n=s.getPosition(),o=i>0?this.bw[i-1]:void 0,a=i<this.bw.length-1?this.bw[i+1]:void 0;if((!o||n-o.getPosition()>=1.5*e)&&(!a||a.getPosition()-n>=1.5*e)){t=!0,s.dispose();const e=r.length,n=Math.round(e/2),o=r.splice(n,e-n),a=this.gC(r),l=this.gC(o);void 0!==a&&this.lC(a,r,h,i),void 0!==l&&this.lC(l,o,h,i+1),i+=1}}}}while(t);do{i=!1;for(let t=0;t<this.bw.length;t+=1){const e=this.bw[t],r=t<this.bw.length-1?this.bw[t+1]:void 0;if(void 0!==r&&r.getPosition()-e.getPosition()<=s){i=!0;const s=(e.getPosition()+r.getPosition())/2,n=e.getOpen(),o=Math.max(e.getHigh(),r.getHigh()),a=Math.min(e.getLow(),r.getLow()),l=r.getClose(),u=xy(e,r);e.dispose(),r.dispose(),this.lC([s,n,o,a,l],u,h,t)}}}while(i)}}}if(t!==i){for(let t=0;t<this.bw.length;t+=1)this.bw[t].Pl(h);this.Kk=t}n!==this.bw.length&&this.VM();for(let t=0;t<this.bw.length;t+=1)this.bw[t].le();this.qk=s,this.Jk=!1}fb(t,i){const s=this.bw.length;if(i){const t=this.bw.find((t=>t.getIsUnderMouse()));return t&&{location:e(t.getPosition(),t.getClose()),scale:this.scale,resultTableContent:this.bb(new ad,this,t).if(),series:this,fillStyle:t.getDominantStyle(),ohlcSegment:t}}if(s>0){const i=((t,i,s)=>{if(t<s(0)||s(i)<t)return;let e=0;const h=i;for(;e!==i;){const h=Math.ceil((e+i)/2);t<s(h)?i=h-1:e=h}const r=Math.abs(t-s(e));return e<h&&Math.abs(t-s(e+1))<r?e+1:e})(uh(t,this.re.$s.Jt,this.scale).x,s-1,(t=>this.bw[t].getPosition()));if(void 0===i)return;const h=this.bw[i];return{location:e(h.getPosition(),h.getClose()),scale:this.scale,resultTableContent:this.bb(new ad,this,h).if(),series:this,fillStyle:h.getDominantStyle(),ohlcSegment:h}}}solveNearestFromScreen(t){return this.fb(tc(t,this.Ls.$s),!1)}setCursorResultTableFormatter(t){return this.bb=t,this.Ls.$s.te(),this}getCursorResultTableFormatter(){return this.bb}setCursorEnabled(t){return super.setCursorEnabled(t)}clear(){return this.$k.Al(),this.Jk=!0,this._w.min.x=Dr,this._w.min.y=Dr,this._w.max.x=Br,this._w.max.y=Br,this.At.emit("dataClear",this),super.clear()}getXMax(){return this._w.max.x}getXMin(){return this._w.min.x}getYMax(){return this._w.max.y}getYMin(){return this._w.min.y}Yr(){return e(this.Xk/2,0)}ZM(){const t=[];return this.$k.Ok((i=>{t.push(i)})),t}KM(t){return this.At.on("dataAdd",t)}qM(t){return this.At.off(t)}JM(t){return this.At.on("dataClear",t)}QM(t){return this.At.off(t)}attach(t,i){return super.attach(t,i),gr(t,this.Rs,{fill:this.iC.getDominantStyle(),fill2:this.sC.getDominantStyle(),behavior:{colorStep:!0}}),this}}class wy extends Ay{add(t){if(t.length>0){if(Array.isArray(t[0])){const i=t;for(let t=0;t<i.length;t+=1)super.cC(i[t]);this._w.min.x=Math.min(this._w.min.x,i[0][0]),this._w.max.x=Math.max(this._w.max.x,i[i.length-1][0]),this._w.min.y=i.reduce(Sy,this._w.min.y),this._w.max.y=i.reduce(vy,this._w.max.y)}else{const i=t;super.cC(i),this._w.min.x=Math.min(this._w.min.x,i[0]),this._w.max.x=Math.max(this._w.max.x,i[0]),this._w.min.y=Math.min(this._w.min.y,i[3]),this._w.max.y=Math.max(this._w.max.y,i[2])}this.re.te()}return this}Dp(){return this.Op&&this.$k.length>0&&this.getVisible()}}class ky extends Ay{constructor(){super(...arguments),this.Du=[]}Dp(){return this.Op&&(this.$k.length>0||this.Du.length>0)&&this.getVisible()}add(t){Array.isArray(t)?this.addPoints(t):this.addPoint(t);const i=this.Du[this.Du.length-1];return this.UM=i?{x:i.x,y:i.y}:void 0,this}addPoint(t){return this.Du.push(t),this.re.te(),this._w.min.x=Math.min(this._w.min.x,t.x),this._w.max.x=Math.max(this._w.max.x,t.x),this._w.min.y=Math.min(this._w.min.y,t.y),this._w.max.y=Math.max(this._w.max.y,t.y),this}addPoints(t){return t.length>0&&(this.Du=this.Du.concat(t),this.re.te(),this._w.min.x=Math.min(this._w.min.x,t[0].x),this._w.max.x=Math.max(this._w.max.x,t[t.length-1].x),this._w.min.y=t.reduce(wh,this._w.min.y),this._w.max.y=t.reduce(kh,this._w.max.y)),this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.UM?this.UM.x+i:0),this.add(Mg(t,i,e)),this}Yy(){if(this.$M(this.Bu),this.Du.length>0){let t;if(void 0!==this.yC)t=this.yC;else{const i=this.Zk?this.Zk.minGapNew:1;t=this.fC(this.Xk*i)}const i=void 0!==this.pC?this.pC:this.Du[0].x,s=((t,i,s)=>{const e=[],h=[];let r=!1;for(;t.length>0;){for(let n=0;n<t.length;n+=1){const o=t[n];if(h.push(o),r=o.x>=s+i,r){const r=by(h,s+i/2);void 0!==r&&(e.push(r),t.splice(0,h.length-1)),s+=i;break}}if(h.length=0,!r)break}return e})(this.Du,t,i);if(s.length>0){for(let t=0;t<s.length;t+=1)this.cC(s[t]);this.pC=s[s.length-1][0]+t/2}}super.Yy()}setPackingResolution(t){return this.yC=t,this}getLastPoint(){return this.UM}}const Cy={Normal:wy,AutomaticPacking:ky},Ty=(t,i,s)=>t.addRow(i.getName()).addRow("Lower extreme","",s.lowerExtreme.toFixed(2)).addRow("Lower quartile","",s.lowerQuartile.toFixed(2)).addRow("Median","",s.median.toFixed(2)).addRow("Upper quartile","",s.upperQuartile.toFixed(2)).addRow("Upper extreme","",s.upperExtreme.toFixed(2));class Fy extends Tm{constructor(t,i,s,e,h,r,n,o,a,l,u,c,f){super(t,i,s,e,h,r,n,o,u,c),this.dt="Box Series",this.bb=Ty,this.Tw=t=>uh(this.ne.toPoint((t.start+t.end)/2,t.median),this.scale,this.re.$s.Jt),this.SC=a,this.ne=l,this.kw=new this.SC(this.re,this.scale,this.pw,this.ne,0,0,0,0,0,0,0,this.Rs).dispose()}DM(t){if(!(t instanceof Rn||t instanceof zn))throw new Error("BoxSeries only supports Linear Axes")}add(t){const i=new this.SC(this.re,this.scale,this.pw,this.ne,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.Rs),s=i.boundaries;return this._w=this._w?Kr(this._w,s):s,this.re.te(),this.xw(i),i}}class Iy extends vg{constructor(){super(...arguments),this.NM=[],this.Du=[],this.vC=[],this.bC=[],this.YM=1e3,this.GM=0,this.cs=t.HighlightModes.onHover,this.Gl={type:"disabled",packager:(t,i,s)=>t.slice()},this.Dx=!0,this.xC=[],this.MC=[],this._C=!1,this.Hf=()=>mr(this.AC)||mr(this.wC),this.kC=t=>{const i=t.length;if(this.NM.length>0){const s=this.NM.length-1,h=this.NM[s];if(i>0){const[i,s]=h.Sl(),[n,o]=h.pl();if((n?i.length+n.length:i.length)>=this.YM){const l=n&&n.length>0?n[n.length-1]:i[i.length-1],u=o&&o.length>0?o[o.length-1]:s[i.length-1],c=(l.x+t[0].position)/2,f=gn(c,l,e(t[0].position,t[0].high)).y,d=gn(c,u,e(t[0].position,t[0].low)).y,g=r(c,f,d);h._l(g,a(e(c,d),e(c,f))).tu(!0),this.CC([g].concat(t)).Jl(!0)}else h._l(t)}}else i>0&&this.CC(t)},this.TC=t=>{const i=this.xC,s=t.length;if(this.xC.length>0){if(s>0){const s=i[i.length-1],h=s.Sl(),r=s.pl();if(h.length+r.length>=this.YM){const n=r.length>0?r[r.length-1]:h[h.length-1],o=(n.x+t[0].x)/2,l=gn(o,n,e(t[0].x,t[0].y)).y,u=e(o,l);s._l(u,a(e(o,l),e(o,l))).tu(!0),i.push(this.FC([u].concat(t),this.jM).Jl(!0))}else s._l(t)}}else s>0&&i.push(this.FC(t))},this.IC=t=>{const i=this.MC,s=t.length;if(this.MC.length>0){if(s>0){const s=i[i.length-1],h=s.Sl(),r=s.pl();if(h.length+r.length>=this.YM){const n=r.length>0?r[r.length-1]:h[h.length-1],o=(n.x+t[0].x)/2,l=gn(o,n,e(t[0].x,t[0].y)).y,u=e(o,l);s._l(u,a(e(o,l),e(o,l))).tu(!0),i.push(this.PC([u].concat(t)).Jl(!0))}else s._l(t)}}else s>0&&i.push(this.PC(t))},this.DC=(t,i)=>{const s=t.Gx(i);if(s)return[uh(s[0],this.scale,this.re.$s.Jt),uh(s[1],this.scale,this.re.$s.Jt)]},this.BC=(t,i)=>{const s=t.fk(i);if(s)return[uh(s[0],this.scale,this.re.$s.Jt),uh(s[1],this.scale,this.re.$s.Jt)]}}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.GM=void 0!==i&&i>0?i:0,this.re.te(),this}clear(){for(let t=0;t<this.NM.length;t+=1)this.NM[t].dispose();for(let t=0;t<this.xC.length;t+=1)this.xC[t].dispose();for(let t=0;t<this.MC.length;t+=1)this.MC[t].dispose();return this.Du.length=0,this.vC.length=0,this.bC.length=0,this.jM=void 0,this.NM.length=0,this.xC.length=0,this.MC.length=0,this.re.te(),this.At.emit("dataClear",this),this}getPointAmount(){return this.NM.reduce(((t,i)=>t+i.wl()+i.kl()),this.Du.length)}setCursorInterpolationEnabled(t){return this.Dx=t,this.re.$s.te(),this}getCursorInterpolationEnabled(){return this.Dx}setCursorResultTableFormatter(t){return this.bb=t,this.Ls.$s.te(),this}setCursorEnabled(t){return super.setCursorEnabled(t)}getCursorResultTableFormatter(){return this.bb}getXMax(){return $h(this.NM,Vh,Math.max,Hh,this.jM)}getXMin(){return $h(this.NM,zh,Math.min,Wh,this.jM)}getYMax(){return $h(this.NM,Gh,Math.max,jh,this.jM)}getYMin(){return $h(this.NM,Nh,Math.min,Uh,this.jM)}Yr(){const t=e(0,0);for(const i of this.NM)t.x=Math.max(t.x,i.Rl()),t.y=Math.max(t.y,i.zl());return t}Dp(){return this.Op&&this.getPointAmount()>0&&this.getVisible()}DM(t){}HM(t,i,s){this.Du=ur(this.Du,t,{canReturnB:!1}),this.vC=ur(this.vC,i,{canReturnB:!1}),this.bC=ur(this.bC,s,{canReturnB:!1}),this.re.te()}OC(t,i,s,e){this.LC(i,s,e),this.HM(Array.isArray(t)?t:[t],i,s)}LC(t,i,s){const e=Kr(Xr(t),Xr(i));this.jM?this.jM=Kr(this.jM,e):this.jM=e,s&&(this.jM=Kr(this.jM,s))}pk(){const t=this.NM.length,i=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let s=0;if(t>1)for(let e=0;e<t-1;e+=1)this.scale.x.Ei(this.NM[e].oi(),this.NM[e].Rl())<i&&(s+=1);return s}$M(t,i,s,e){if(s>0){const h=Math.ceil(s/i),r=t.length-h;if(r>0&&e>0){const i=r-e>0?e:r;if(i>0){for(let s=0;s<i;s+=1)t[s].dispose();t.splice(0,i)}}}}EC(t){const i=this.NM.length>0?this.NM[this.NM.length-1]:void 0,s=i?i.Sl()[0].length+(i.pl()[0]?i.pl()[0].length:0):void 0;bg(t,s,this.YM,this.kC)}RC(t){const i=this.xC.length>0?this.xC[this.xC.length-1].Sl().length+this.xC[this.xC.length-1].pl().length:void 0;bg(t,i,this.YM,this.TC)}zC(t,i){const s=this.xC.length>0?this.xC[this.xC.length-1].Sl().length+this.xC[this.xC.length-1].pl().length:void 0;bg(t,s,this.YM,this.TC),bg(i,s,this.YM,this.IC)}CC(t,i){const s=this.re.VC(this.scale)._l(t,i).eh(this.AC).Kl(this.wC).Xl(this.Gl).Ys(this.getHighlight());return this.NM.push(s),this.Xs(s),s}NC(t,i,s){const e=this.re.Gy(this.scale,void 0,[ff.UserSeries])._l(t,s).setMouseInteractions(!1).gh(i).Ys(this.getHighlight());return this.Xs(e),e}FC(t,i){return this.NC(t,this.GC,i)}PC(t,i){return this.NC(t,this.WC,i)}HC(t){this.AC="function"==typeof t?t(this.AC):t;const i=this.AC;for(let t=0;t<this.NM.length;t+=1)this.NM[t].eh(i);this.re.te()}UC(t){this.wC="function"==typeof t?t(this.wC):t;const i=this.wC;for(let t=0;t<this.NM.length;t+=1)this.NM[t].Kl(i);this.re.te()}jC(){return this.AC}ql(){return this.wC}$C(t){this.GC="function"==typeof t?t(this.GC):t;const i=this.GC;for(let t=0;t<this.xC.length;t+=1)this.xC[t].gh(i);this.re.te()}YC(t){this.WC="function"==typeof t?t(this.WC):t;const i=this.WC;for(let t=0;t<this.MC.length;t+=1)this.MC[t].gh(i);this.re.te()}XC(){return this.GC}ZC(){return this.WC}ah(t,i){t.Ys(i),this.KC(i),this.re.te()}KC(t){for(let i=0;i<this.xC.length;i+=1)this.xC[i].Ys(t);for(let i=0;i<this.MC.length;i+=1)this.MC[i].Ys(t)}Gp(){if(super.Gp(),this._C=!1,this.GM>0){const t=this.NM.length,i=this.pk();this.$M(this.NM,this.YM,this.GM,i);const s=this.NM.length;this.xC.length>0&&this.$M(this.xC,this.YM,this.GM,i),this.MC.length>0&&this.$M(this.MC,this.YM,this.GM,i),t!==s&&this.VM(),this._C=!0}}rh(){if(super.rh(),this.Du.length>0&&(this.EC(this.Du),this.qC(this.vC,this.bC),this._C=!0),this._C){const t=this.getBoundaries();for(const i of this.NM)i.oa(t);for(const i of this.xC)i.oa(t);for(const i of this.MC)i.oa(t)}}Yy(){this.jM=void 0,this.Du.length=0,this.vC.length=0,this.bC.length=0}fb(t,i,s=this.Dx){const e=((t,i,s)=>{let e,h,r=Number.MAX_VALUE;for(let n=0;n<i.length;n+=1){const o=i[n],a=s(o,t);if(a){const i=Hr(t,a[0]),s=Hr(t,a[1]);(void 0===e||i<r||s<r)&&(e=a,h=o,i<r?r=i:s<r&&(r=s))}}return e&&h?[e,h]:void 0})(t,i?this.NM.filter((t=>t.getIsUnderMouse())):this.NM,s?this.BC:this.DC);if(void 0!==e&&void 0!==e[0]){const t=uh(e[0][0],this.re.$s.Jt,this.scale),i=uh(e[0][1],this.re.$s.Jt,this.scale);return _d(t,this.scale,this.bb(new ad,this,t.x,t.y,i.y).if(),this,e[1].ur())}}solveNearestFromScreen(t,i=this.Dx){return this.fb(tc(t,this.Ls.$s),!1,i)}}const Py=(t,i,s,e,h)=>t.addRow(i.getName()).addRow("Position","",i.axisX.formatValue(s)).addRow("Value","",i.axisY.formatValue(e)).addRow("Base","",i.axisY.formatValue(h));class Dy extends Iy{constructor(t,i,s,e,h,r,n,o,a=0,l,u){super(t,i,s,e,h,r,n,o,l,u),this.dt="Area Series",this.bb=Py,this.JC=a}add(t){const i=Array.isArray(t)?t:[t];if(i.length>0){const t=this.QC(i),[s,h]=this.tT(t);this.OC(t,s,h,a(e(Dr,this.JC),e(Br,this.JC)));const r=this.Du[this.Du.length-1];this.UM=r?{position:r.position,high:r.high,low:r.low}:void 0,this.At.emit("dataAdd",this,i,this.jM)}return this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.UM?this.UM.position+i:0),this.add(Mg(t,i,e)),this}KM(t){return this.At.on("dataAdd",t)}qM(t){return this.At.off(t)}JM(t){return this.At.on("dataClear",t)}QM(t){return this.At.off(t)}}class By extends Dy{constructor(){super(...arguments),this.WC=rh}qC(t){return this.RC(t)}tT(t){const i=t.length,s=Array(i);for(let h=0;h<i;h+=1){const i=t[h];s[h]=e(i.position,i.high)}return[s,[]]}setStrokeStyle(t){return this.$C(t),this}getStrokeStyle(){return this.XC()}}class Oy extends By{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u);const f=c;this.AC=Sr(this.Rs.areaSeriesPositiveFillStyle,f),this.wC=Ie,this.GC=Sr(this.Rs.areaSeriesPositiveStrokeStyle,f)}QC(t){return this.iT(t)}iT(t){const i=[];return 1===t.length?this.sT(t[0],i):this.eT(t,i),i}sT(t,i,s=0){const e=this.JC;return i[s]=t.y<e?r(t.x,e,e):r(t.x,t.y,e),s+1}eT(t,i,s=0){let h=0;const n=t.length-1,o=this.JC;for(;h<n;){const n=t[h],a=t[h+=1];if(n.y>=o){const t=r(n.x,n.y,o);if(0!==s&&Yh(i[s-1],t)||(i[s]=t,s+=1),a.y<o){const t=xn(e(Br,o),e(Dr,o),n,a);t&&(i[s]=r(t.x,t.y,o),s+=1),i[s]=r(a.x,o,o),s+=1}else i[s]=r(a.x,a.y,o),s+=1}else{const t=r(n.x,o,o);if(0!==s&&Yh(i[s-1],t)||(i[s]=t,s+=1),a.y>=o){const t=xn(e(Br,o),e(Dr,o),n,a);t&&(i[s]=r(t.x,t.y,o),s+=1),i[s]=r(a.x,a.y,o),s+=1}else i[s]=r(a.x,o,o),s+=1}}return s}ZM(){return xg(this.NM,(t=>t[0]||[]))}setFillStyle(t){return this.HC(t),this}getFillStyle(){return this.jC()}attach(t,i=!0){return gr(t,this.Rs,{fill:this.AC,stroke:this.GC}),super.attach(t,i)}}class Ly extends By{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l,u);const c=t.getSeries().length;this.AC=Ie,this.wC=Sr(this.Rs.areaSeriesNegativeFillStyle,c),this.GC=Sr(this.Rs.areaSeriesNegativeStrokeStyle,c)}QC(t){return this.hT(t)}hT(t){const i=[];return 1===t.length?this.sT(t[0],i):this.eT(t,i),i}sT(t,i,s=0){const e=this.JC;return i[s]=t.y>e?r(t.x,e,e):r(t.x,t.y,e),s+1}eT(t,i,s=0){let h=0;const n=t.length-1,o=this.JC;for(;h<n;){const n=t[h],a=t[h+=1];if(n.y<=o){const t=r(n.x,n.y,o);if(0!==s&&Yh(i[s-1],t)||(i[s]=t,s+=1),a.y>o){const t=xn(e(Br,o),e(Dr,o),n,a);t&&(i[s]=r(t.x,t.y,o),s+=1),i[s]=r(a.x,o,o),s+=1}else i[s]=r(a.x,a.y,o),s+=1}else{const t=r(n.x,o,o);if(0!==s&&Yh(i[s-1],t)||(i[s]=t,s+=1),a.y<=o){const t=xn(e(Br,o),e(Dr,o),n,a);t&&(i[s]=r(t.x,t.y,o),s+=1),i[s]=r(a.x,a.y,o),s+=1}else i[s]=r(a.x,o,o),s+=1}}return s}ZM(){return xg(this.NM,(t=>t[1]))}setFillStyle(t){return this.UC(t),this}getFillStyle(){return this.ql()}attach(t,i=!0){return gr(t,this.Rs,{fill:this.wC,stroke:this.GC}),super.attach(t,i)}}class Ey extends Dy{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l,u);const c=t.getSeries().length;this.AC=Sr(this.Rs.areaSeriesBipolarHighFillStyle,c),this.GC=Sr(this.Rs.areaSeriesBipolarHighStrokeStyle,c),this.wC=Sr(this.Rs.areaSeriesBipolarLowFillStyle,c),this.WC=Sr(this.Rs.areaSeriesBipolarLowStrokeStyle,c)}QC(t){return this.rT(t)}qC(t,i){return this.zC(t,i)}rT(t){let i=0;const s=[],e=t.length,h=this.JC;return e>0&&(this.nT&&(this.nT.y<=h&&h<=t[0].y||this.nT.y>=h&&h>=t[0].y)&&(s[i]=r(.5*(this.nT.x+t[0].x),h,h),i+=1),this.nT=t[e-1],1===e?this.sT(t[0],s,i):this.eT(t,s)),s}sT(t,i,s=0){return i[s]=r(t.x,t.y,this.JC),s+1}eT(t,i){let s=0,e=0;const h=t.length-1,n=this.JC;for(;e<h;){const h=t[e],o=t[e+=1],a=r(h.x,h.y,n);if(0!==s&&Yh(i[s-1],a)||(i[s]=a,s+=1),h.y<=n&&n<=o.y||h.y>=n&&n>=o.y){const t=h.y,e=o.y,a=n,l=t===e?o.x:Iu(h.x,o.x,(a-t)/(e-t));i[s]=r(l,n,n),s+=1}i[s]=r(o.x,o.y,n),s+=1}return s}tT(t){const i=t.length,s=Array(i),h=Array(i),r=this.JC;for(let n=0;n<i;n+=1){const i=t[n];i.high>r?(s[n]=e(i.position,i.high),h[n]=e(i.position,r)):i.high<r?(s[n]=e(i.position,r),h[n]=e(i.position,i.high)):(s[n]=e(i.position,i.high),h[n]=e(i.position,i.high))}return[s,h]}ZM(){return xg(this.NM,(t=>t[0]))}setPositiveFillStyle(t){return this.HC(t),this}setNegativeFillStyle(t){return this.UC(t),this}setPositiveStrokeStyle(t){return this.$C(t),this}setNegativeStrokeStyle(t){return this.YC(t),this}getPositiveFillStyle(){return this.jC()}getNegativeFillStyle(){return this.ql()}getPositiveStrokeStyle(){return this.XC()}getNegativeStrokeStyle(){return this.ZC()}attach(t,i=!0){return gr(t,this.Rs,{fill:this.AC,fill2:this.wC,behavior:{colorStep:!0}}),super.attach(t,i)}}const Ry={Positive:Oy,Negative:Ly,Bipolar:Ey},zy=(t,i,s,e,h)=>t.addRow(i.getName()).addRow("Position","",i.axisX.formatValue(s)).addRow("High","",i.axisY.formatValue(e)).addRow("Low","",i.axisY.formatValue(h));class Vy extends Iy{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l),this.dt="Area Range Series",this.bb=zy;const c=u;this.AC=Sr(this.Rs.areaRangeSeriesFillStyle,c),this.GC=Sr(this.Rs.areaRangeSeriesStrokeStyle,c),this.wC=Sr(this.Rs.areaRangeSeriesFillStyleInverted,c),this.WC=Sr(this.Rs.areaRangeSeriesStrokeStyleInverted,c)}add(t){const i=Array.isArray(t)?t:[t],[s,e]=o(i);this.OC(t,s,e);const h=this.Du[this.Du.length-1];return this.UM=h?{position:h.position,high:h.high,low:h.low}:void 0,this.At.emit("dataAdd",this,i,this.jM),this}addArraysHighLow(t,i,s=1,e=0){if(t.length!==i.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let h=e;h||(h=this.UM?this.UM.position+s:0),this.add(((t,i,s=1,e)=>{const h=void 0!==e?e:0,r=new Array(t.length);for(let e=0;e<t.length;e+=1)r[e]={position:h+s*e,high:t[e],low:i[e]};return r})(t,i,s,h))}return this}qC(t,i){this.zC(t,i)}setHighFillStyle(t){return this.HC(t),this}setLowFillStyle(t){return this.UC(t),this}setHighStrokeStyle(t){return this.$C(t),this}setLowStrokeStyle(t){return this.YC(t),this}getHighFillStyle(){return this.jC()}getLowFillStyle(){return this.ql()}getHighStrokeStyle(){return this.XC()}getLowStrokeStyle(){return this.ZC()}ZM(){return xg(this.NM,(t=>{const i=t[0],s=t[1];if(!i||!s)return[];const e=[],h=i.length;for(let t=0;t<h;t+=1)e[t]={position:i[t].x,high:i[t].y,low:s[t].y};return e}))}KM(t){return this.At.on("dataAdd",t)}qM(t){return this.At.off(t)}JM(t){return this.At.on("dataClear",t)}QM(t){return this.At.off(t)}attach(t,i=!0){return gr(t,this.Rs,{fill:this.AC,fill2:this.wC,behavior:{colorStep:!0}}),super.attach(t,i)}}class Ny extends Ag{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,new Um,l,u),this.NM=[],this.dt="Point series",this.Hx=5,this.Pa=0,this.rl=!1,this.nl=!1,this.ol=!1,this.YM=void 0,this.uk=(t,i)=>{const s=t.fb(i);if(s)return uh(s,this.scale,this.re.$s.Jt)},this.Ux=a,this.Qe=Sr(l.pointSeriesFillStyle,c)}add(t){return super.add(t),this}Hf(){return mr(this.Qe)}DM(t){}attach(t,i=!0){return gr(t,this.Rs,{fill:this.Qe}),super.attach(t,i)}ah(t,i){t.Ys(i),this.re.te()}setPointFillStyle(t){this.Qe="function"==typeof t?t(this.Qe):t;const i=this.Qe;for(let t=0;t<this.NM.length;t+=1)this.NM[t].eh(i);return this.re.te(),this}getPointFillStyle(){return this.Qe}setPointSize(t){this.Hx=t;for(let i=0;i<this.NM.length;i+=1)this.NM[i].Gt(t);return this.re.te(),this}getPointSize(){return this.Hx}getPointShape(){return this.Ux}setPointRotation(t){this.Pa=t;for(let i=0;i<this.NM.length;i+=1)this.NM[i].gr(t);return this.re.te(),this}getPointRotation(){return this.Pa}setIndividualPointSizeEnabled(t){this.rl=t;for(let i=0;i<this.NM.length;i+=1)this.NM[i].bl(t);return this.re.te(),this}getIndividualPointSizeEnabled(){return this.rl}setIndividualPointRotationEnabled(t){this.nl=t;for(let i=0;i<this.NM.length;i+=1)this.NM[i].xl(t);return this.re.te(),this}getIndividualPointRotationEnabled(){return this.nl}setIndividualPointValueEnabled(t){this.ol=t;for(let i=0;i<this.NM.length;i+=1)this.NM[i].Ml(t);return this.re.te(),this}getIndividualPointValueEnabled(){return this.ol}XM(t){let i=this.NM[0];i||(i=this.nk()),i._l(t)}nk(){const t=this.re.iS(this.scale).vl(this.Ux).Gt(this.Hx).gr(this.Pa).bl(this.rl).xl(this.nl).Ml(this.ol).eh(this.Qe).Ys(this.getHighlight());return this.NM.push(t),this.Xs(t),t}fb(t,i){const s=wg(t,i?this.NM.filter((t=>t.getIsUnderMouse())):this.NM,this.uk,Hr);if(void 0!==s){const t=uh(s[0],this.re.$s.Jt,this.scale),i=s[1].ur(),e=Ee(i)?s[0].color?new Be({color:s[0].color}):new Be({color:i.getFallbackColor()}):i;return _d(t,this.scale,this.bb(new ad,this,t.x,t.y,t).if(),this,e)}}solveNearestFromScreen(t){return this.fb(tc(t,this.Ls.$s),!1)}setCursorResultTableFormatter(t){return super.setCursorResultTableFormatter(t)}}class Gy{constructor(t,i,s,e){this.oT=!1,this.At=new $e,this.chart=s,this.aT=e,this.Ae=t.Ae,this.Pe=e||Eo,this.lT=Mh.document.createElement("div"),this.lT.style.position="absolute",this.lT.style.pointerEvents="none",Mh.document.body.append(this.lT);const h=()=>{const t=s.engine.container.getBoundingClientRect();this.lT.style.left=`${t.left}px`,this.lT.style.top=`${t.top}px`,this.lT.style.width=`${t.width}px`,this.lT.style.height=`${t.height}px`};h(),s.onResize(h),this.uT(this.lT),this.cT(),this.fT(),this.dT(),this.gT(i),this.chart.mT().push(this)}uT(t){this.yT=Mh.document.createElement("div"),this.yT.style.pointerEvents="all",t.append(this.yT),this.pT=Mh.document.createElement("div"),this.ST=new Co(this.Ae,this.Pe,this.chart,this.pT),this.vT=Mh.document.createElement("table"),this.vT.style.borderSpacing="0",this.yT.appendChild(this.ST.Ve()),this.yT.appendChild(this.pT),this.pT.appendChild(this.vT)}fT(){let t=0,i=0,s=0,e=0,h=!1;this.oT=!1,this.yT.onmousedown=r=>{r=r||Mh.event,s=r.clientX,e=r.clientY,h=!0,Mh.document.onmouseup=t=>{this.oT?this.yT.addEventListener("click",ir,!0):this.yT.removeEventListener("click",ir,!0),h=!1,this.oT=!1,Mh.document.onmouseup=null,Mh.document.onmousemove=null},Mh.document.onmousemove=r=>{r=r||Mh.event,h&&(t=s-r.clientX,i=e-r.clientY,s=r.clientX,e=r.clientY,this.oT=!0,this.yT.style.top=this.yT.offsetTop-i+"px",this.yT.style.left=this.yT.offsetLeft-t+"px",this.yT.style.removeProperty("right"),this.yT.style.removeProperty("bottom"))}}}dT(){let t=0,i=0,s=0,e=0,h=!1;this.yT.ontouchstart=r=>{r=r||Mh.event,s=r.touches[0].clientX,e=r.touches[0].clientY,h=!0,this.yT.ontouchend=()=>{h=!1,Mh.document.ontouchend=null,Mh.document.ontouchmove=null},this.yT.ontouchmove=r=>{h&&(ir(r),r=r||Mh.event,t=s-r.touches[0].clientX,i=e-r.touches[0].clientY,s=r.touches[0].clientX,e=r.touches[0].clientY,this.yT.style.top=this.yT.offsetTop-i+"px",this.yT.style.left=this.yT.offsetLeft-t+"px",this.yT.style.removeProperty("right"),this.yT.style.removeProperty("bottom"))}}}cT(){this.yT.style.setProperty("top","10px"),this.yT.style.setProperty("left","10px"),this.yT.style.position="absolute",this.yT.style.display="flex",this.yT.style.alignItems="flex-start",this.pT.style.setProperty("display","none")}removePositionProperty(){this.yT.style.removeProperty("top"),this.yT.style.removeProperty("left"),this.yT.style.removeProperty("bottom"),this.yT.style.removeProperty("right")}setPositionProperty(i){switch(this.removePositionProperty(),i){case t.OSMPosition.BottomLeft:this.yT.style.setProperty("bottom","10px"),this.yT.style.setProperty("left","10px");break;case t.OSMPosition.TopLeft:this.yT.style.setProperty("top","10px"),this.yT.style.setProperty("left","10px");break;case t.OSMPosition.BottomRight:this.yT.style.setProperty("bottom","10px"),this.yT.style.setProperty("right","10px");break;case t.OSMPosition.TopRight:default:this.yT.style.setProperty("top","10px"),this.yT.style.setProperty("right","10px")}}gT(t){for(let i=0;i<t.length;i+=1){const s=this.vT.insertRow();for(let e=0;e<t[i].length;e+=1){const h=s.insertCell(),r=t[i][e];"object"!=typeof r?this.bT(r,h):this.addCustomButton(r,h)}}}bT(i,s){switch(i){case t.OnScreenMenuButtonType.ZoomIn:this.xT(new So(this.Ae,this.chart,this.Pe),s);break;case t.OnScreenMenuButtonType.ZoomInX:this.xT(new vo(this.Ae,this.chart,this.Pe),s);break;case t.OnScreenMenuButtonType.ZoomInY:this.xT(new bo(this.Ae,this.chart,this.Pe),s);break;case t.OnScreenMenuButtonType.ZoomOut:this.xT(new xo(this.Ae,this.chart,this.Pe),s);break;case t.OnScreenMenuButtonType.ZoomOutX:this.xT(new Mo(this.Ae,this.chart,this.Pe),s);break;case t.OnScreenMenuButtonType.ZoomOutY:this.xT(new _o(this.Ae,this.chart,this.Pe),s);break;case t.OnScreenMenuButtonType.ZoomToFit:this.xT(new wo(this.Ae,this.chart,this.Pe),s);break;case t.OnScreenMenuButtonType.ToggleAnimations:this.xT(new Ao(this.Ae,this.chart,this.Pe),s);break;default:console.error(`No predefined button like "${t.OnScreenMenuButtonType[i]}" exists.`)}}xT(t,i){i.rowSpan=t.we.rows,i.colSpan=t.we.columns,t.ze(i)}addCustomButton(t,i){const s=new ko(this.Ae,t,this.chart);return this.xT(s,i),this}dispose(){this.lT.remove(),this.At.emit("dispose",this)}onDispose(t){return this.At.on("dispose",t)}offDispose(t){return this.At.off(t,"dispose")}}const Wy=(t,i,s)=>t.addRow(i.getName()).addRow("X:","",i.axisX.formatValue(s.x)).addRow("Y:","",i.axisY.formatValue(s.y)).addRow("Intensity:","",s.intensity.toFixed(1));class Hy extends vg{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.dt="Heatmap Grid Series",this.bb=Wy,this.Dx=!1,this.MT=a,this.Rs=l;const f=c;this.Qe=Sr(l.heatmapGridSeriesFillStyle,f),this.Hu=Sr(this.Rs.heatmapGridSeriesWireframeStyle,f);const d=a.start||{x:0,y:0},g=a.end?{x:(a.end.x-d.x)/a.columns,y:(a.end.y-d.y)/a.rows}:a.step||{x:1,y:1},m={heatmapDataType:"intensity",dataOrder:a.dataOrder||"columns",columns:a.columns,rows:a.rows,start:d,step:g};this.ro=m,this._T=this.re.AT(this.scale,[],m).eh(this.Qe).Uu(this.Hu).Ys(this.getHighlight()),this.Xs(this._T),this.setHighlightOnHover(!1)}clear(){return this._T.Al(),this.re.te(),this.At.emit("dataClear",this),this}setWireframeStyle(t){return this.Hu="function"==typeof t?t(this.Hu):t,this._T.Uu(this.Hu),this.re.te(),this.At.emit("styleChange",this),this}getWireframeStyle(){return this.Hu}setCursorInterpolationEnabled(t){return this.Dx=t,this.re.$s.te(),this}getCursorInterpolationEnabled(){return this.Dx}setCursorEnabled(t){return super.setCursorEnabled(t)}setIntensityInterpolation(t){return t=t||"disabled",this._T.US(t),this.re.te(),this.At.emit("styleChange",this),this}getIntensityInterpolation(){return this._T.jS()}Dp(){return this.Op&&this.getVisible()}Hf(){return mr(this.Qe)}attach(t,i){return super.attach(t,i),gr(t,this.Rs,{fill:this.Qe}),this}wT(t){this._T.wT().forEach((i=>{t._T.$S(i)}))}QM(t){return this.At.off(t)}JM(t){return this.At.on("dataClear",t)}kT(t){return this.At.on("styleChange",t)}CT(t){return this.At.off(t)}fb(t,i,s=this.Dx){const e=uh(t,this.re.$s.Jt,this.scale),h=i?this._T.getIsUnderMouse()?this._T:void 0:this._T;if(!h)return;const r=s?h.Lx(e):h.fb(e);return r?_d(r,this.scale,this.bb(new ad,this,{x:r.x,y:r.y,column:r.column,row:r.column,intensity:r.cellValue}).if(),this):void 0}solveNearestFromScreen(t,i=this.Dx){return this.fb(tc(t,this.Ls.$s),!1,i)}getXMax(){const t=this._T;return t?t.oi():void 0}getXMin(){const t=this._T;return t?t.ni():void 0}getYMax(){const t=this._T;return t?t.li():void 0}getYMin(){const t=this._T;return t?t.ai():void 0}Yr(){const t=e(0,0);return t.x=Math.max(t.x,this._T.Rl()),t.y=Math.max(t.y,this._T.zl()),t}DM(t){if(!(t instanceof Rn))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Rn&&t.Ui())throw new Error("HeatmapGridSeries can not be attached to a high precision Axis.")}ah(t,i){t.Ys(i),this.re.te()}rh(){return super.rh(),this._T.oa(this.getBoundaries()),this}}class Uy extends Hy{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c),this.bb=Wy}invalidateIntensityValues(t){if(Array.isArray(t)){if(0===t.length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.ro.dataOrder?t.length:t[0].length,rows:"rows"===this.ro.dataOrder?t.length:t[0].length},s="columns"===this.ro.dataOrder?this.ro.columns:this.ro.rows,e="columns"===this.ro.dataOrder?this.ro.rows:this.ro.columns;if(i.x>s||i.y>e){if(!0===this.chart.Yd.do){const t=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.ro.columns}x${this.ro.rows}, input ${i.columns}x${i.rows}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Mh.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this._T.$S({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.ro.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.ro.dataOrder?t.values.length:t.values[0].length},s="columns"===this.ro.dataOrder?t.iColumn:t.iRow,e=s+i.primary-1,h="columns"===this.ro.dataOrder?t.iRow:t.iColumn,r=h+i.secondary-1,n=("columns"===this.ro.dataOrder?this.ro.columns:this.ro.rows)-1,o=("columns"===this.ro.dataOrder?this.ro.rows:this.ro.columns)-1;if(s<0||h<0){if(!0===this.chart.Yd.do){const i=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;Mh.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.Yd.do){const s=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.ro.columns}x${this.ro.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Mh.console.warn(s)}const s=Math.max(e-n,0),h=i.primary-s,a=Math.max(r-o,0),l=[];for(let i=0;i<h;i+=1)l[i]=t.values[i].slice(0,a>0?-a:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:l}}this._T.$S({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.At.emit("invalidateIntensity",this,t),this.re.te(),this}setFillStyle(t){return this.Qe="function"==typeof t?t(this.Qe):t,this._T.eh(this.Qe),this.At.emit("styleChange",this),this.re.te(),this}getFillStyle(){return this.Qe}setCursorResultTableFormatter(t){return this.bb=t,this.Ls.$s.te(),this}getCursorResultTableFormatter(){return this.bb}TT(t){return this.At.on("invalidateIntensity",t)}FT(t){return this.At.off(t)}}class jy extends vg{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.dt="Scrolling Heatmap Grid Series",this.bb=Wy,this.Dx=!1;const f=c;this.Qe=Sr(l.heatmapScrollingGridSeriesFillStyle,f),this.Hu=Sr(this.Rs.heatmapScrollingGridSeriesWireframeStyle,f);const d={scrollDimension:"columns",heatmapDataType:"intensity",start:{x:0,y:0},step:{x:1,y:1},...a};this.ro=d;const g=[{type:"DataPattern",args:{pattern:"columns"===d.scrollDimension?d.step.x>0?"ProgressiveX":"RegressiveX":d.step.y>0?"ProgressiveY":"RegressiveY",regularProgressiveStep:!0}}];this.IT=this.re.PT(this.scale,g,d).eh(this.Qe).Uu(this.Hu).Ys(this.getHighlight()),this.Xs(this.IT),this.setHighlightOnHover(!1)}clear(){return this.IT.Al(),this.re.te(),this}setWireframeStyle(t){return this.Hu="function"==typeof t?t(this.Hu):t,this.IT.Uu(this.Hu),this.re.te(),this}getWireframeStyle(){return this.Hu}setPixelInterpolationMode(t){return t=t||"disabled",this.IT.US(t),this.re.te(),this}getPixelInterpolationMode(){return this.IT.jS()}setCursorInterpolationEnabled(t){return this.Dx=t,this.re.$s.te(),this}getCursorInterpolationEnabled(){return this.Dx}setCursorEnabled(t){return super.setCursorEnabled(t)}setDataCleaning(t){return this.IT.Ou(t),this.re.te(),this}Dp(){return this.Op&&this.getVisible()}Hf(){return mr(this.Qe)}attach(t,i){return super.attach(t,i),gr(t,this.Rs,{fill:this.Qe}),this}eh(t){return this.Qe="function"==typeof t?t(this.Qe):t,this.IT.eh(this.Qe),this.re.te(),this}fb(t,i,s=this.Dx){const e=uh(t,this.re.$s.Jt,this.scale),h=i?this.IT.getIsUnderMouse()?this.IT:void 0:this.IT;if(!h)return;const r=s?h.Lx(e):h.fb(e);return r?_d(r,this.scale,this.bb(new ad,this,{x:r.x,y:r.y,column:r.column,row:r.column,intensity:r.cellValue}).if(),this):void 0}solveNearestFromScreen(t,i=this.Dx){return this.fb(tc(t,this.Ls.$s),!1,i)}DM(t){if(!(t instanceof Rn))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Rn&&t.Ui())throw new Error("HeatmapScrollingGridSeries can not be attached to a high precision Axis.")}getXMax(){return this.IT.oi()||0}getXMin(){return this.IT.ni()||0}getYMax(){return this.IT.li()||0}getYMin(){return this.IT.ai()||0}Yr(){const t=e(0,0);return t.x=Math.max(t.x,this.IT.Rl()),t.y=Math.max(t.y,this.IT.zl()),t}ah(t,i){t.Ys(i),this.re.te()}}class $y extends jy{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c),this.bb=Wy}addIntensityValues(t){if(0===t.length||0===t[0].length)return this;const i=t.length,s=t[0].length,e=("columns"===this.ro.scrollDimension?t.length:t[0].length,"rows"===this.ro.scrollDimension?t.length:t[0].length,0+s-1),h=this.ro.resolution-1;if(e>h){if(!0===this.chart.Yd.do){const t=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.\nGrid resolution: ${this.ro.resolution}, input ${i}x${s}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Mh.console.warn(t)}const e=[];for(let s=0;s<i;s+=1)e[s]=t[s].slice(0,h+1);t=e}return this.IT.qS(t),this.re.te(),this}setFillStyle(t){return this.eh(t),this}getFillStyle(){return this.Qe}setCursorResultTableFormatter(t){return this.bb=t,this.Ls.$s.te(),this}getCursorResultTableFormatter(){return this.bb}}const Yy=(...t)=>(i,s)=>t.forEach((t=>t.forEach((t=>{t.Jt.Gt(i),t.Wg.Gt(s)})))),Xy=(t,i)=>{const s=t.indexOf(i);-1!==s&&t.splice(s,1)},Zy=e(10,10);var Ky;t.AxisPosition=void 0,(Ky=t.AxisPosition||(t.AxisPosition={}))[Ky.Top=0]="Top",Ky[Ky.Bottom=1]="Bottom",Ky[Ky.Left=2]="Left",Ky[Ky.Right=3]="Right";const qy=new Set([t.AxisPosition.Top,t.AxisPosition.Bottom,t.AxisPosition.Left,t.AxisPosition.Right]),Jy=t=>t.Xr(),Qy=t=>t.setStopped(!0),tp=t=>t.getChartInteractionFitByDrag()?t.fit(!0).setStopped(!1):void 0,ip=(t,i)=>{const s="linear-highPrecision"===t.ir.type||"linear-highPrecision"===i.ir.type,e="logarithmic"===t.ir.type||"logarithmic"===i.ir.type;if(s&&e){const s=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${t.ir.type}, y: ${i.ir.type})`;throw new Error(s)}};var sp,ep,hp;!function(t){t[t.seriesBackground=0]="seriesBackground",t[t.gridLine0=1]="gridLine0",t[t.gridLine1=2]="gridLine1",t[t.gridLine2=3]="gridLine2",t[t.highlightersBelow=4]="highlightersBelow"}(sp||(sp={})),function(t){t[t.plotting=0]="plotting",t[t.highlightersAbove=1]="highlightersAbove",t[t.fg=2]="fg"}(ep||(ep={}));class rp extends Dd{constructor(i,s,h,r,n,o,a){super(i,s,h,s.Gm("chartXY bg",0),r,s.$s.Rs.chartXYBackgroundFillStyle,s.$s.Rs.chartXYBackgroundStrokeStyle,s.$s.Rs.chartXYTitleFont,s.$s.Rs.chartXYTitleFillStyle,a),this.DT=this.Cm.d2({scaleXYConstructor:Rn}),this.BT=[],this.OT=[],this.LT=[],this.ET=[],this.RT=new Map,this.zT=!0,this.VT=!0,this.NT=!0,this.vd=2,this.GT=!0,this.WT=!0,this.HT=[],this.UT=this.Hm.hh(this.DT).eh(Ie).sh(rh).setMouseInteractions(!1),this.jT=this.Hm.mh(this.DT).gh(rh).setMouseInteractions(!1),this.$T=this.Hm.mh(this.DT).gh(rh).setMouseInteractions(!1),this.YT=this.Rs.chartXYZoomingRectangleFillStyle,this.XT=this.Rs.chartXYZoomingRectangleStrokeStyle,this.ZT=this.Rs.chartXYFittingRectangleFillStyle,this.KT=this.Rs.chartXYFittingRectangleStrokeStyle,this.qT=t.MouseStyles.Default,this.JT=t.MouseStyles.Move,this.QT=t.MouseStyles.ZoomIn,this.tF=t.MouseStyles.Default,this.iF=void 0,this.sF=np,this.PM=0,this.eF=Yy(this.OT,this.BT),this.hF=Yy(this.LT,this.ET),this.rF=(t,i,s,h,r)=>{this.eF(h,r),this.hF(r,h),this.DT.Gt(h,r);const n=this.OT.map((t=>t.gm())),o=this.BT.map((t=>t.gm())),a=this.LT.map((t=>t.gm())),l=this.ET.map((t=>t.gm())),u=n.reduce(Nr,0),c=o.reduce(Nr,0),f=a.reduce(Nr,0),d=l.reduce(Nr,0),g=this.nF(f,d,c,u),m=this.DT.x.getCellSize()-(g.left+g.right),y=this.DT.y.getCellSize()-(g.bottom+g.top),p=[g.left,g.right],S=[g.bottom,g.top];this.DT.x.Vt(0,m),this.DT.y.Vt(0,y),this.DT.ts(p),this.DT.ss(S),this.lS.Gt(e(m,y));for(let t=0;t<this.OT.length;t+=1)this.OT[t].Jt.Mi(p);for(let t=0;t<this.BT.length;t+=1)this.BT[t].Jt.Mi(p);for(let t=0;t<this.LT.length;t+=1)this.LT[t].Jt.Mi(S);for(let t=0;t<this.ET.length;t+=1)this.ET[t].Jt.Mi(S);this.$s.te()},this.oF=(t,i)=>{this.RT.set(t,i)},this.Eg=t=>{this.OT.includes(t)?Xy(this.OT,t):this.BT.includes(t)?Xy(this.BT,t):this.LT.includes(t)?Xy(this.LT,t):this.ET.includes(t)&&Xy(this.ET,t),this.RT.delete(t),this.$s.te()},this.aF=(t=!1)=>{const i=t=>(i,s,e,h)=>(s.rh(i,e,h.length),i+s.gm()*t),s=this.OT.reduce(i(-1),0),h=this.BT.reduce(i(1),0),r=this.LT.reduce(i(-1),0),n=this.ET.reduce(i(1),0),o=this.nF(r,n,h,s),a=this.DT.x.getCellSize()-(o.left+o.right),u=this.DT.y.getCellSize()-(o.bottom+o.top),c=[o.left,o.right],f=[o.bottom,o.top];this.DT.x.Vt(0,a),this.DT.y.Vt(0,u),this.DT.x.Mi(c),this.DT.y.Mi(f);for(const t of this.OT)t.Jt.Mi(c);for(const t of this.BT)t.Jt.Mi(c);for(const t of this.LT)t.Jt.Mi(f);for(const t of this.ET)t.Jt.Mi(f);if((!this.F_||Math.abs(this.F_.bottom-s)>=4||Math.abs(this.F_.left-r)>=4||Math.abs(this.F_.right-n)>=4||Math.abs(this.F_.top-h)>=4)&&!t)return void this.aF(!0);this.F_={bottom:s,left:r,top:h,right:n},this.lS.oh(e(0,0)).Gt(e(a,u)),this.uS.oh(e(0,0)).Gt(e(a,u));const d=this.getDefaultAxisX(),g=this.getDefaultAxisY();if(!d||!g)return;const m=l(d.Jt._i(),g.Jt._i(),d.Jt.wi(),g.Jt.wi());this.Bb.ov(m),this.Og.ov(m),this.Lg.ov(m),this.xm&&this.xm();const y=t=>(i,s,e,h)=>(s.dm(i),i+s.gm()*t);return this.OT.reduce(y(-1),0),this.BT.reduce(y(1),0),this.LT.reduce(y(-1),0),this.ET.reduce(y(1),0),m},this.addAreaSeries=t=>{const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();ip(i,s);const e=t&&t.baseline?t.baseline:0,h=new(t&&t.type?t.type:Ry.Positive)(this,this.hS,this.Bb,i,s,this.lF(i),this.lF(s),this.Im,e,this.Rs,this.$s.Ns,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length);return this.cS(h),h},this.addAreaRangeSeries=t=>{const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();ip(i,s);const e=new Vy(this,this.hS,this.Bb,i,s,this.lF(i),this.lF(s),this.Im,this.Rs,this.$s.Ns,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length);return this.cS(e),e},this.uF=!1,this.cF=!1,this.BM=()=>{(this.zT||this.VT)&&(this.iF=this.engine.setMouseStyle(this.qT))},this.OM=()=>{this.uF=!1,this.engine.restoreMouseStyle(this.iF)},this.LM=(t,i,s)=>{var e,h;const r=Rh(null===(e=this.Yd.fo)||void 0===e?void 0:e.chartXYRectangleZoomFitMouseButton,0),n=Rh(null===(h=this.Yd.fo)||void 0===h?void 0:h.chartXYPanMouseButton,2);this.engine.restoreMouseStyle(this.iF);const o=this.Hm.$s.lh(i.clientX,i.clientY);s===r&&(this.zT||this.VT)?(this.fF(t,o),ir(i)):s===n&&this.GT&&(this.iF=this.engine.setMouseStyle(this.JT),this.cF=!0,ir(i))},this.Rp=(t,i,s,h,r)=>{var n,o;const a=e(i.clientX,i.clientY),l=Rh(null===(n=this.Yd.fo)||void 0===n?void 0:n.chartXYRectangleZoomFitMouseButton,0),u=Rh(null===(o=this.Yd.fo)||void 0===o?void 0:o.chartXYPanMouseButton,2);s===l&&(this.zT||this.VT)?(this.dF(t,h,a),ir(i)):s===u&&this.GT&&(this.gF(on(r,-1)),ir(i)),this.$s.te()},this.EM=(t,i,s,h)=>{var r,n;const o=Rh(null===(r=this.Yd.fo)||void 0===r?void 0:r.chartXYRectangleZoomFitMouseButton,0),a=Rh(null===(n=this.Yd.fo)||void 0===n?void 0:n.chartXYPanMouseButton,2);if(s===o&&(this.zT||this.VT)){const s=e(i.clientX,i.clientY);this.mF(t,h,s),ir(i)}else s===a&&this.GT&&ir(i);this.engine.restoreMouseStyle(this.iF),this.lS.getIsUnderMouse()&&(this.iF=this.engine.setMouseStyle(this.qT)),this.uF=!1,this.cF=!1},this.Ep=(t,i)=>{if(this.NT){const t=this.Hm.$s.lh(i.clientX,i.clientY);this.yF(t,e(vr(i),vr(i))),ir(i)}},this.pF=(t,i,s,e)=>{},this.SF=(t,i,s,h,r,n)=>{if(this.GT){const t=e(-(h.x+r.x)/2,-(h.y+r.y)/2);this.gF(t),ir(n),this.cF=!0}if(this.NT){const t=this.engine.clientLocation2Engine(i.x,i.y),o=this.engine.clientLocation2Engine(s.x,s.y),a=ln(e(Math.abs(t.x-h.x-(o.x-r.x)),Math.abs(t.y-h.y-(o.y-r.y))),e(Math.abs(t.x-o.x),Math.abs(t.y-o.y)));this.forEachAxisX((t=>{t.getChartInteractionZoomByWheel()&&t.Qt(t.Jt.Ei(t.getInterval().start,-a.x),t.Jt.Ei(t.getInterval().end,a.x),!1,!0,"interactionZoom")})),this.forEachAxisY((t=>{t.getChartInteractionZoomByWheel()&&t.Qt(t.Jt.Ei(t.getInterval().start,-a.y),t.Jt.Ei(t.getInterval().end,a.y),!1,!0,"interactionZoom")})),ir(n),this.uF=!0}},this.vF=(t,i,s,e)=>{this.cF=!1,this.uF=!1},this.bF=(t,i,s)=>{(this.VT||this.zT)&&(this.fF(t,i),ir(s))},this.xF=(t,i,s,e,h)=>{(this.VT||this.zT)&&(this.dF(t,i,s),ir(h))},this.MF=(t,i,s,e)=>{(this.VT||this.zT)&&(this.mF(t,i,s),ir(e))},this.Yd.oo||this.Yd.no||this.$s.ho(0),this.setPadding({right:24}),this.M_=s.mv("chartXY series bg",sp.seriesBackground),this._F=[sp.gridLine0,sp.gridLine1,sp.gridLine2].map((t=>s.mv(`chartXY gridline #${t}`,t))),this.Og=s.mv("chartXY highlighters below",sp.highlightersBelow),this.Bb=s.Py("chartXY plotting",ep.plotting),this.Lg=s.Py("chartXY highlighters above",ep.highlightersAbove),this.eg=s.Py("chartXY fg",ep.fg),this.DT.x.Vt(0,this.uiScale.x.getCellSize()-(this.di.left+this.di.right+this.Ba.left+this.Ba.right)),this.DT.y.Vt(0,this.uiScale.y.getCellSize()-(this.di.bottom+this.di.top+this.Ba.bottom+this.Ba.top)),this.DT.Gt(this.uiScale.Ci().x,this.uiScale.Ci().y),this.lS=this.M_.hh(this.DT).eh(this.Rs.chartXYSeriesBackgroundFillStyle).sh(rh),this.uS=this.Lg.hh(this.DT).eh(Ie).sh(this.Rs.chartXYSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.aS(this.lS,this.uS),this.setSeriesBackgroundEffect(!1);const u=Rh(o?o.autoCursorBuilder:void 0,cg);this.cb=u.sb(this.nb,this.DT,this.DT,this.Rs),this.addAxisX(o&&o.defaultAxisX),this.addAxisY(o&&o.defaultAxisY),this.onResize(this.rF),this.jm.lr("ChartXY"),this.zp=Xn(new Kn(this.bF,this.xF,this.MF,1),new qn(this.pF,this.SF,this.vF)),this.onSeriesBackgroundMouseEnter(this.BM),this.onSeriesBackgroundMouseLeave(this.OM),this.onSeriesBackgroundMouseWheel(this.Ep),this.onSeriesBackgroundMouseDragStart(this.LM),this.onSeriesBackgroundMouseDrag(this.Rp),this.onSeriesBackgroundMouseDragStop(this.EM),this.onSeriesBackgroundTouchStart(this.zp.onTouchStart),this.onSeriesBackgroundTouchMove(this.zp.onTouchMove),this.onSeriesBackgroundTouchEnd(this.zp.onTouchEnd),o&&!0===o.disableAnimations&&this.setAnimationsEnabled(!1),this.Nm(n,this.DT)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this.sS}getMinimumSize(){const t={x:0,y:0};t.x+=this.di.left+this.di.right+this.Ba.left+this.Ba.right,t.y+=this.di.top+this.di.bottom+this.Ba.top+this.Ba.bottom;const i=this.jm.le().cf(),s=d(op(this.sF||np),this.Wm);t.x+=i.x+s.left+s.right,t.y+=i.y+s.top+s.bottom;const e={x:0,y:0};return this.forEachAxisX((t=>{e.x=Math.max(e.x,t.gm())})),this.forEachAxisY((t=>{e.y=Math.max(e.y,t.gm())})),t.x+=e.x,t.y+=e.y,t.x+=Zy.x,t.y+=Zy.y,t}addChartMarkerXY(t=fg,i,s){const e=this.Im(),h=new pg(e,this.uiScale,i||this.getDefaultAxisX(),s||this.getDefaultAxisY(),t,this.wm(e),this.Rs);return this.Rm(h),h}addAxisX(t){const{opposite:i,type:s}=ic(t);let e;e="linear"===s.type?this.Cm.d1({dimension:"x",scale1DConstructor:On}):"linear-highPrecision"===s.type?this.Cm.d1({dimension:"x",scale1DConstructor:On}).Hi():this.Cm.d1({dimension:"x",scale1DConstructor:wn}).Oi(s.base),e.Gt(this.DT.x.Ci());const h=i?this.BT:this.OT,r=new rc(this.Og,this._F,this.eg,this.Hm,this.Og,this.Lg,this.$s.Ns,e,this.DT.y,(n=()=>r.rm(),{...nc,..._m(n)}),this,i?100:0,this.Eg,this.oF,this.Rs,!this.Bh,s);var n;return h.push(r),this.$s.te(),r}addAxisY(t){const{opposite:i,type:s}=ic(t);let e;e="linear"===s.type?this.Cm.d1({dimension:"y",scale1DConstructor:On}):"linear-highPrecision"===s.type?this.Cm.d1({dimension:"y",scale1DConstructor:On}).Hi():this.Cm.d1({dimension:"y",scale1DConstructor:wn}).Oi(s.base),e.Gt(this.DT.y.Ci());const h=i?this.ET:this.LT,r=new rc(this.Og,this._F,this.eg,this.Hm,this.Og,this.Lg,this.$s.Ns,e,this.DT.x,(n=()=>r.rm(),{...oc,...Am(n)}),this,i?100:0,this.Eg,this.oF,this.Rs,!this.Bh,s);var n;return h.push(r),this.$s.te(),r}dispose(){return this.M_.Pt(),this.Bb.Pt(),this.eg.Pt(),this._F.forEach((t=>t.Pt())),this.Lg.Pt(),this.Og.Pt(),this.mT().forEach((t=>t.dispose())),Zc(this.DT),this.forEachAxis((t=>{t.dispose()})),this.sS.slice().forEach((t=>{t.dispose()})),super.dispose()}getDefaultAxisX(){return this.OT[0]?this.OT[0]:this.BT[0]}getDefaultAxisY(){return this.LT[0]?this.LT[0]:this.ET[0]}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...i){const s=i&&i.length>0?new Set(i):qy;return Dh(Array.from(s).map((i=>{switch(i){default:case t.AxisPosition.Top:return this.BT;case t.AxisPosition.Bottom:return this.OT;case t.AxisPosition.Left:return this.LT;case t.AxisPosition.Right:return this.ET}})))}AF(t){let i;return this.forEachAxisX((s=>{i=t===s?"x":i})),this.forEachAxisY((s=>{i=t===s?"y":i})),i}forEachAxisX(t){this.OT.slice().forEach(t),this.BT.slice().forEach(t)}forEachAxisY(t){this.LT.slice().forEach(t),this.ET.slice().forEach(t)}setTitlePosition(t){return this.sF=t,this.$s.te(),this}getTitlePosition(){return this.sF}nF(t,i,s,e){const h=this.sF||np;let r,n=d(op(h),this.Wm);this.getTitleFillStyle()===Ie||0===this.getTitle().length?(r={x:0,y:0},n={left:0,top:0,right:0,bottom:0}):r=this.jm.le().cf();const o=Math.abs(e)+this.Ba.bottom+this.di.bottom,a=Math.abs(s)+this.Ba.top+this.di.top,l={left:Math.abs(t)+this.Ba.left+this.di.left,right:Math.abs(i)+this.Ba.right+this.di.right,top:a,bottom:o},u=this.uiScale.os(),{horizontalAlignment:c,verticalAlignment:f,position:g,marginsWithTitle:m}=ap(h,u,l,r,n,this.Ba);return this.jm.oh(g).Xa(c).Ka(f),m}rh(t){super.rh(t);for(const t of this.sS)t.Gp();for(const t of this.sS)t.rh();this.forEachAxis(Jy);let i=!1;this.forEachAxis((t=>{(t.Jr()||t.Qr())&&(i=!0)}));const s=this.uF||this.cF||!this.WT&&i;this.gb(s),this.aF(),super.Vm();for(const t of this.sS)t.Yy()}Rt(){for(let t=0;t<this.OT.length;t+=1)this.OT[t].Rt();for(let t=0;t<this.BT.length;t+=1)this.BT[t].Rt();for(let t=0;t<this.LT.length;t+=1)this.LT[t].Rt();for(let t=0;t<this.ET.length;t+=1)this.ET[t].Rt();return super.Rt()}lF(t){if(this.RT.has(t))return this.RT.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addLineSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();ip(i,s);let e=ty.freeform;t&&t.dataPattern&&(e="ProgressiveX"===t.dataPattern.pattern?ty.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?ty.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?ty.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?ty.verticalRegressive:ty.freeform);const h=new sy(this,this.hS,this.Bb,i,s,this.lF(i),this.lF(s),this.Im,e,this.Rs,this.$s.Ns,df(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length,t);return this.cS(h),h}addPointSeries(i){const s=i&&i.xAxis?i.xAxis:this.getDefaultAxisX(),e=i&&i.yAxis?i.yAxis:this.getDefaultAxisY();ip(s,e);const h=i&&i.pointShape&&Object.values(t.PointShape).includes(i.pointShape)?"string"==typeof i.pointShape?t.PointShape[i.pointShape]:i.pointShape:t.PointShape.Square,r=new Ny(this,this.hS,this.Bb,s,e,this.lF(s),this.lF(e),this.Im,h,this.Rs,this.$s.Ns,void 0!==(null==i?void 0:i.automaticColorIndex)?i.automaticColorIndex:this.sS.length);return this.cS(r),r}addPointLineSeries(i){const s=i&&i.xAxis?i.xAxis:this.getDefaultAxisX(),e=i&&i.yAxis?i.yAxis:this.getDefaultAxisY();ip(s,e);const h=i&&i.pointShape&&Object.values(t.PointShape).includes(i.pointShape)?"string"==typeof i.pointShape?t.PointShape[i.pointShape]:i.pointShape:t.PointShape.Square;let r=ty.freeform;i&&i.dataPattern&&(r="ProgressiveX"===i.dataPattern.pattern?ty.horizontalProgressive:"ProgressiveY"===i.dataPattern.pattern?ty.verticalProgressive:"RegressiveX"===i.dataPattern.pattern?ty.horizontalRegressive:"RegressiveY"===i.dataPattern.pattern?ty.verticalRegressive:ty.freeform);const n=new Vm(this,this.hS,this.Bb,s,e,this.lF(s),this.lF(e),this.Im,r,h,this.Rs,this.$s.Ns,df(i&&i.dataPattern),void 0!==(null==i?void 0:i.automaticColorIndex)?i.automaticColorIndex:this.sS.length);return this.cS(n),n}addStepSeries(i){const s=i&&i.xAxis?i.xAxis:this.getDefaultAxisX(),e=i&&i.yAxis?i.yAxis:this.getDefaultAxisY();ip(s,e);const h=i&&i.pointShape?i.pointShape:t.PointShape.Square,r=i&&i.mode?i.mode:t.StepOptions.before,n=new iy(this,this.hS,this.Bb,s,e,this.lF(s),this.lF(e),this.Im,h,r,this.Rs,this.$s.Ns,df(i&&i.dataPattern),void 0!==(null==i?void 0:i.automaticColorIndex)?i.automaticColorIndex:this.sS.length);return this.cS(n),n}addSplineSeries(i){const s=i&&i.xAxis?i.xAxis:this.getDefaultAxisX(),e=i&&i.yAxis?i.yAxis:this.getDefaultAxisY();ip(s,e);const h=i&&i.pointShape?i.pointShape:t.PointShape.Square;let r=ty.freeform;i&&i.dataPattern&&(r="ProgressiveX"===i.dataPattern.pattern?ty.horizontalProgressive:"RegressiveX"===i.dataPattern.pattern?ty.horizontalRegressive:ty.freeform);const n=new Hm(this,this.hS,this.Bb,s,e,this.lF(s),this.lF(e),this.Im,r,h,this.Rs,this.$s.Ns,df(i&&i.dataPattern),void 0!==(null==i?void 0:i.automaticColorIndex)?i.automaticColorIndex:this.sS.length);return this.cS(n),n}addRectangleSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();ip(i,s);const e=new hy(this,this.hS,this.Bb,i,s,this.lF(i),this.lF(s),this.Im,this.Rs,this.$s.Ns,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length);return this.cS(e),e}addPolygonSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY(),e=new ny(this,this.hS,this.Bb,i,s,this.lF(i),this.lF(s),this.Im,this.Rs,this.$s.Ns,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length);return this.cS(e),e}addSegmentSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();ip(i,s);const e=new ay(this,this.hS,this.Bb,i,s,this.lF(i),this.lF(s),this.Im,this.Rs,this.$s.Ns,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length);return this.cS(e),e}addEllipseSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();ip(i,s);const e=new uy(this,this.hS,this.Bb,i,s,this.lF(i),this.lF(s),this.Im,this.Rs,this.$s.Ns,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length);return this.cS(e),e}addOHLCSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();ip(i,s);const e=t&&t.positiveFigure?t.positiveFigure:Om.Candlestick,h=t&&t.negativeFigure?t.negativeFigure:e,r=new(t&&t.seriesConstructor?t.seriesConstructor:Cy.Normal)(this,this.hS,this.Bb,i,s,this.lF(i),this.lF(s),this.Im,e,h,this.Rs,this.$s.Ns,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length);return this.cS(r),r}addBoxSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();ip(i,s);const e=t&&t.figure?t.figure:Im,h=t&&t.dimensionStrategy?t.dimensionStrategy:nc,r=new Fy(this,this.hS,this.Bb,i,s,this.lF(i),this.lF(s),this.Im,e,h,this.Rs,this.$s.Ns,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length);return this.cS(r),r}addHeatmapGridSeries(t){const i=t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t.yAxis?t.yAxis:this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new Uy(this,this.hS,this.Bb,i,s,this.lF(i),this.lF(s),this.Im,t,this.Rs,this.$s.Ns,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length),this.cS(e),e}addHeatmapScrollingGridSeries(t){const i=t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t.yAxis?t.yAxis:this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new $y(this,this.hS,this.Bb,i,s,this.lF(i),this.lF(s),this.Im,t,this.Rs,this.$s.Ns,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.sS.length),this.cS(e),e}addOnScreenMenu(t,i){return new Gy(this.Yd,t,this,i)}setMouseBackgroundStyle(i=t.MouseStyles.Default){return this.qT=i,this}setMouseZoomStyle(i=t.MouseStyles.ZoomIn){return this.QT=i,this}setMouseFitStyle(i=t.MouseStyles.Default){return this.tF=i,this}setMousePanStyle(i=t.MouseStyles.Move){return this.JT=i,this}setMouseInteractions(t){return this.setMouseInteractionRectangleZoom(t).setMouseInteractionRectangleFit(t).setMouseInteractionWheelZoom(t).setMouseInteractionPan(t)}setMouseInteractionRectangleZoom(t){return this.zT=t,this}getMouseInteractionRectangleZoom(){return this.zT}setMouseInteractionRectangleFit(t){return this.VT=t,this}getMouseInteractionRectangleFit(){return this.VT}setMouseInteractionPan(t){return this.GT=t,this}getMouseInteractionPan(){return this.GT}setMouseInteractionWheelZoom(t){return this.NT=t,this}getMouseInteractionWheelZoom(){return this.NT}setZoomingRectangleFillStyle(t){return this.YT="function"==typeof t?t(this.YT):t,this.$s.te(),this}getZoomingRectangleFillStyle(){return this.YT}setZoomingRectangleStrokeStyle(t){return this.XT="function"==typeof t?t(this.XT):t,this.$s.te(),this}getZoomingRectangleStrokeStyle(){return this.XT}setFittingRectangleFillStyle(t){return this.ZT="function"==typeof t?t(this.ZT):t,this.$s.te(),this}getFittingRectangleFillStyle(){return this.ZT}setFittingRectangleStrokeStyle(t){return this.KT="function"==typeof t?t(this.KT):t,this.$s.te(),this}getFittingRectangleStrokeStyle(){return this.KT}addLegendBox(t,i){const s=super.addLegendBox(t,i);if(void 0===i||i===this.uiScale)if(void 0===t||"vertical"===t.getAlignment())s.setOrigin(Fo.RightCenter).setPosition({x:this.uiScale.x.Kt(this.uiScale.x.Ai()-this.Ba.right),y:lh(this.DT.y.Kt(this.DT.y._i()+this.DT.y.wi()/2),this.DT.y,this.uiScale.y)});else{const t=this.sF||np,i=ap(t,this.uiScale.os(),this.Ba,this.getTitleFillStyle()===Ie||0===this.getTitle().length?{x:0,y:0}:this.jm.le().cf(),d(op(t),this.Wm),this.Ba).marginsWithTitle.top;s.setOrigin(Fo.RightTop).setPosition(uh({x:this.pixelScale.x.getInnerEnd()-this.Ba.right,y:this.pixelScale.y.getInnerEnd()-i},this.pixelScale,this.uiScale))}return s}fF(t,i){this.forEachAxis(Qy);const s=uh(this.engine.clientLocation2Engine(i.x,i.y),this.Hm.$s.Jt,this.DT);this.UT.oh(s).Gt(e(0,0))}dF(t,i,s){const h=uh(this.engine.clientLocation2Engine(i.x,i.y),this.Hm.$s.Jt,this.DT),r=uh(this.engine.clientLocation2Engine(s.x,s.y),this.Hm.$s.Jt,this.DT),n=Wr(r.x,this.DT.x.getInnerStart(),this.DT.x.getInnerEnd())&&Wr(r.y,this.DT.y.getInnerStart(),this.DT.y.getInnerEnd()),o=e(Math.min(h.x,r.x),Math.min(h.y,r.y)),a=e(Math.max(h.x,r.x),Math.max(h.y,r.y));this.UT.oh(o).Gt(ln(a,o));const l=Math.min(a.x-o.x,a.y-o.y)>=10;n&&l&&o.x===h.x&&this.zT?(this.uF=!0,this.UT.eh(this.YT).sh(this.XT),this.jT.gh(rh),this.$T.gh(rh),this.iF=this.engine.setMouseStyle(this.QT,this.iF)):n&&l&&a.x===h.x&&this.VT?(this.uF=!0,this.UT.eh(this.ZT).sh(this.KT),this.jT.gh(this.KT).ph(h).yh(r),this.$T.gh(this.KT).ph(e(h.x,r.y)).yh(e(r.x,h.y)),this.iF=this.engine.setMouseStyle(this.tF,this.iF)):(this.uF=!1,this.UT.sh(rh).eh(Ie),this.jT.gh(rh),this.$T.gh(rh),this.engine.restoreMouseStyle(this.iF)),this.$s.te()}mF(t,i,s){if(this.uF){const t=uh(this.engine.clientLocation2Engine(s.x,s.y),this.Hm.$s.Jt,this.DT),e=Wr(t.x,this.DT.x.getInnerStart(),this.DT.x.getInnerEnd())&&Wr(t.y,this.DT.y.getInnerStart(),this.DT.y.getInnerEnd()),h=s.x>=i.x?"zoom":"fit",r=this.UT.ja(),n=an(r,this.UT.Ci()),o=Math.min(this.UT.Ci().x,this.UT.Ci().y)>=10;e&&o&&"zoom"===h&&this.zT?(this.forEachAxisX((t=>{if(t.getChartInteractionZoomByDrag()){const i=uh(r,this.DT,t.Hg).x,s=uh(n,this.DT,t.Hg).x;t.Qt(i,s,!0,!0,"interactionSetInterval")}})),this.forEachAxisY((t=>{if(t.getChartInteractionZoomByDrag()){const i=uh(r,this.DT,t.Hg).y,s=uh(n,this.DT,t.Hg).y;t.Qt(i,s,!0,!0,"interactionSetInterval")}}))):e&&o&&"fit"===h&&this.VT&&this.forEachAxis(tp)}this.UT.sh(rh).eh(Ie),this.jT.gh(rh),this.$T.gh(rh),this.$s.te()}pan(t){this.forEachAxisX((i=>{i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.setStopped(!0).pan(t.y)}))}gF(t){this.forEachAxisX((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.y)}))}zoom(t,i){this.forEachAxis(Qy),this.forEachAxisX((s=>{s.zoom(s.Jt.Kt(t.x),i.x)})),this.forEachAxisY((s=>{s.zoom(s.Jt.Kt(t.y),i.y)}))}yF(t,i){this.forEachAxis(Qy),this.forEachAxisX((s=>{s.getChartInteractionZoomByWheel()&&s.zoom(s.Jt.Kt(t.x),i.x)})),this.forEachAxisY((s=>{s.getChartInteractionZoomByWheel()&&s.zoom(s.Jt.Kt(t.y),i.y)}))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}qf(){const t=[];return this.forEachAxis((i=>i.tm((i=>t.push(i))))),super.qf().concat(t)}mT(){return this.HT}Xe(){return this.Ym(this.Bb)}setAutoCursorEnabledDuringAxisAnimation(t){return this.WT=t,this}getAutoCursorEnabledDuringAxisAnimation(){return this.WT}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,i,s){if(s){const e=t,h=i,r=ac(h)?h:Wn(h)?this.pixelScale:void 0;if(r&&Nn(s)){const t=uh(e,r,this.engine.scale);return this.$s.Zo({engineX:t.x,engineY:t.y})}if(r&&Wn(s))return uh(e,r,this.pixelScale);if(r&&ac(s))return uh(e,r,s)}else{const s=t;if(Wn(i)){const t=this.$s.Xo(s);return uh({x:t.engineX,y:t.engineY},this.engine.scale,this.pixelScale)}if(ac(i)){const t=i,e=this.$s.Xo(s);return uh({x:e.engineX,y:e.engineY},this.engine.scale,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}}t.ChartXYTitlePositionOptions=void 0,(hp=t.ChartXYTitlePositionOptions||(t.ChartXYTitlePositionOptions={})).CenterTop="center-top",hp.RightTop="right-top",hp.LeftTop="left-top",hp.CenterBottom="center-bottom",hp.RightBottom="right-bottom",hp.LeftBottom="left-bottom",hp.SeriesCenterTop="series-center-top",hp.SeriesRightTop="series-right-top",hp.SeriesLeftTop="series-left-top",hp.SeriesCenterBottom="series-center-bottom",hp.SeriesRightBottom="series-right-bottom",hp.SeriesLeftBottom="series-left-bottom";const np=t.ChartXYTitlePositionOptions.CenterTop,op=t=>{switch(t){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:5};case"left-top":return{left:20,right:0,top:0,bottom:5};case"right-top":return{left:0,right:20,top:0,bottom:5};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:5,bottom:0};case"series-left-top":return{left:5,right:0,top:5,bottom:0};case"series-right-top":return{left:0,right:5,top:5,bottom:0};case"series-left-bottom":return{left:5,right:0,top:0,bottom:5};case"series-right-bottom":return{left:0,right:5,top:0,bottom:5}}return wr(0,`Unexpected ChartXY title position selection ${t}`)},ap=(t,i,s,e,h,r)=>{e.x,h.left,h.right;const n=e.y+h.bottom+h.top,o=(h.left-h.right)*i.x,a=(h.bottom-h.top)*i.y;switch(t){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-(r.top+h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:s.left*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-s.right*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:s.left*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-s.right*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s}}return wr(0,`Unexpected ChartXY title position selection ${t}`)},lp=t=>t instanceof Ag||t instanceof Dy||t instanceof Vy||t instanceof Uy||t instanceof Ay||t instanceof iy;class up{constructor(i,s,e,h,r,n,o,a,l){this.coordsRelative="relative",this.coordsClient="client",this.At=new $e,this.wF=new Map,this.sS=new Map,this.kF=({series:t},i)=>{this.CF&&(i instanceof Vy||i instanceof iy||i instanceof Uy||i instanceof Ag||i instanceof Dy||i instanceof Ay)&&this.CF(t,i)},this.TF=t=>{const i=t.map((t=>t.ir.type));if(1!==[...new Set(i)].length)throw new Error("All ZoomBandChart axes must be of the same type")},this.FF=(t,i,s)=>{0!==this.sS.size&&void 0!==[...this.sS.values()].find((({series:t})=>!0===t.getVisible()))||this.IF.Qt(i,s,!1,!1,"zoomBandChart")},this.Yd=i,this.PF=h,this.attachedAxes=Array.isArray(r)?r:[r],this.TF(this.attachedAxes);const u=this.attachedAxes[0].chart.AF(this.attachedAxes[0])||"x";this.DF=u,this.Xc="x"===u?nc:oc;const c=this.attachedAxes[0].onIntervalChange(this.FF);this.BF=()=>this.attachedAxes[0].offIntervalChange(c);const f=this.Xc.toVec2("linear"===(d=this.attachedAxes[0].ir).type||"linear-highPrecision"===d.type?d:{type:"logarithmic",base:"number"==typeof d.base?d.base:"e"===d.base?"e":(()=>{throw new Error(`Unhandled logarithmic base: ${d.base}`)})()},void 0);var d;const g=f.x,m=f.y;this.OF=new rp(i,s,e,Fh,o,{...a,defaultAxisX:g,defaultAxisY:m},l).setTitle("Zoom Band Chart").setMouseInteractions(!1).setAutoCursorMode(t.AutoCursorModes.disabled),this.engine=this.OF.engine;const y=this.OF.getDefaultAxisX().setMouseInteractions(!1),p=this.OF.getDefaultAxisY().setMouseInteractions(!1);this.IF=this.Xc.getWidth({x:y,y:p}).setScrollStrategy(Go.fitting).setAnimationScroll(!1),this.LF(this.Xc.getHeight({x:y,y:p})),this.IF.br(this.attachedAxes[0].vr()),this.band=this.IF.addBand(n),this.EF(this.band,this.attachedAxes);for(let t=0;t<this.attachedAxes.length;t+=1)for(const i of this.attachedAxes[t].rm())lp(i)&&this.Rd(i);this.attachedAxes.forEach((t=>{t.chart.ab(((t,i)=>{("x"===u?i.axisX:i.axisY)===this.attachedAxes[0]&&lp(i)&&this.Rd(i)})),t.chart.lb(((t,i)=>{var s;if(this.sS.has(i)){const t=null===(s=this.sS.get(i))||void 0===s?void 0:s.series;t&&t.dispose()}}))}))}disposeSeries(t){const i=this.sS.get(t);if(i){const{clearReferences:s}=i;s(),this.sS.delete(t),i.series.dispose();const e=this.Xc.getHeight({x:t.axisX,y:t.axisY}),h=this.wF.get(e);h&&0===h.rm().length&&h!==this.Xc.getHeight({x:this.OF.getDefaultAxisX(),y:this.OF.getDefaultAxisY()})&&(this.wF.delete(e),h.dispose())}return this}setSeriesStyle(t){return this.CF=t,this.sS.forEach(this.kF),this}getDefaultAxisX(){return this.OF.getDefaultAxisX()}getDefaultAxisY(){return this.OF.getDefaultAxisY()}LF(t){t.setTickStrategy(Wo.Empty).setMouseInteractions(!1).setNibStyle(rh).setStrokeStyle(rh)}EF(t,i){t.setValueStart(i[0].getInterval().start).setValueEnd(i[0].getInterval().end);let s,e,h=!1,r=!1;i.length>1&&ch(...i),i[0].onIntervalChange(((i,s,n)=>{if(h)return;r=!0;const o=Mh.performance.now();e=o,t.setValueStart(s).setValueEnd(n),requestAnimationFrame((()=>requestAnimationFrame((()=>{e!==o||(r=!1)}))))})),t.onValueChange(((t,e,n)=>{if(r)return;h=!0;const o=Mh.performance.now();s=o,i[0].Qt(e,n,!1,!0,"zoomBandChart"),requestAnimationFrame((()=>requestAnimationFrame((()=>{s!==o||(h=!1)}))))}))}Rd(t){var i;const s=this.Xc.getHeight({x:t.axisX,y:t.axisY});let e=this.wF.get(s);e||(0===this.wF.size?e=this.Xc.getHeight({x:this.OF.getDefaultAxisX(),y:this.OF.getDefaultAxisY()}):(e=this.Xc.getHeight({x:this.OF.addAxisX.bind(this.OF),y:this.OF.addAxisY.bind(this.OF)})(),this.LF(e))),this.wF.set(s,e);const h=this.Xc.getWidth({x:this.IF,y:e}),r=this.Xc.getHeight({x:this.IF,y:e});let n,o;if(t instanceof Vy){n=this.OF.addAreaRangeSeries({xAxis:h,yAxis:r});const i=n;i.add(t.ZM());const s=t.KM(((t,s,e)=>i.add(s))),e=t.onVisibleStateChanged(((t,i)=>{n.setVisible(i)}));o=()=>{t.qM(s),t.offVisibleStateChanged(e)}}else if(t instanceof iy){const i=t.ut;n=this.OF.addStepSeries({mode:i,xAxis:h,yAxis:r});const s=n;s.add(t.ZM());const e=t.KM(((t,i,e)=>s.add(i))),a=t.onVisibleStateChanged(((t,i)=>{n.setVisible(i)}));o=()=>{t.qM(e),t.offVisibleStateChanged(a)}}else if(t instanceof Uy){const i={...t.MT,xAxis:void 0,yAxis:void 0},s=this.OF.addHeatmapGridSeries(i);n=s;const e=()=>{s.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle())};e();const h=t.kT(e);t.wT(s);const r=t.TT(((t,i)=>{s.invalidateIntensityValues(i)})),a=t.onVisibleStateChanged(((t,i)=>{s.setVisible(i)}));o=()=>{t.CT(h),t.FT(r),t.offVisibleStateChanged(a)}}else{const s={};t instanceof sy&&(s.dataPattern=null===(i=t.ro)||void 0===i?void 0:i.dataPattern);const h=this.OF.addLineSeries({...s,xAxis:this.Xc.getWidth({x:this.IF,y:e}),yAxis:this.Xc.getHeight({x:this.IF,y:e})});if(n=h,t instanceof Ay){const i=t=>{const i=[],s=t.length;for(let e=0;e<s;e+=1){const s=t[e];i.push({x:s[0],y:s[4]})}return i};h.add(i(t.ZM()));const s=t.KM(((t,s)=>{h.add(i(s))})),e=t.onVisibleStateChanged(((t,i)=>{n.setVisible(i)}));o=()=>{t.qM(s),t.offVisibleStateChanged(e)}}else{h.add(t.ZM());const i=t.KM(((t,i)=>h.add(i))),s=t.onVisibleStateChanged(((t,i)=>{n.setVisible(i)}));o=()=>{t.qM(i),t.offVisibleStateChanged(s)}}}t.onHighlight(((t=!0)=>{n.setHighlight(t)})),n.setMouseInteractions(!1),this.kF({series:n},t);const a=t.JM((()=>{n.clear()})),l=o;o=()=>{t.QM(a),l()},this.sS.set(t,{series:n,clearReferences:o})}getSizePixels(){return this.OF.getSizePixels()}onResize(t){return this.OF.onResize(((i,s,e,h,r)=>t(this,s,e,h,r)))}offResize(t){return this.OF.offResize(t)}Qa(t){this.OF.Qa(t)}getMinimumSize(){return this.OF.getMinimumSize()}Rt(){return this.OF.Rt()}zt(){return this.OF.zt()}rh(t){const i=Array.from(new Set(this.attachedAxes.map((t=>t.chart))).values());if("x"===this.DF){const t=i.reduce(((t,i)=>{let s=0;return i.forEachAxisY((t=>{s+=0===t.Vg?t.gm():0})),Math.max(t,s)}),0),s=i.reduce(((t,i)=>{let s=0;return i.forEachAxisY((t=>{s+=100===t.Vg?t.gm():0})),Math.max(t,s)}),0),e=i.reduce(((t,i)=>Math.max(t,i.getPadding().left)),0),h=i.reduce(((t,i)=>Math.max(t,i.getPadding().right)),0);this.getDefaultAxisY().setThickness(t),this.OF.setPadding({left:e,right:h+s})}else{const t=i.reduce(((t,i)=>{let s=0;return i.forEachAxisX((t=>{s+=0===t.Vg?t.gm():0})),Math.max(t,s)}),0),s=i.reduce(((t,i)=>{let s=0;return i.forEachAxisX((t=>{s+=100===t.Vg?t.gm():0})),Math.max(t,s)}),0),e=i.reduce(((t,i)=>Math.max(t,i.getPadding().bottom)),0),h=i.reduce(((t,i)=>Math.max(t,i.getPadding().top)),0);this.getDefaultAxisX().setThickness(t),this.OF.setPadding({bottom:e,top:h+s})}return this.OF.rh(t)}getTheme(){return this.OF.getTheme()}setTitle(t){return this.OF.setTitle(t),this}getTitle(){return this.OF.getTitle()}setTitleFillStyle(t){return this.OF.setTitleFillStyle(t),this}getTitleFillStyle(){return this.OF.getTitleFillStyle()}setTitleFont(t){return this.OF.setTitleFont(t),this}getTitleFont(){return this.OF.getTitleFont()}setTitleMargin(t){return this.OF.setTitleMargin(t),this}getTitleMargin(){return this.OF.getTitleMargin()}setPadding(t){return this.OF.setPadding(t),this}getPadding(){return this.OF.getPadding()}setBackgroundFillStyle(t){return this.OF.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.OF.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.OF.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.OF.getBackgroundStrokeStyle()}translateCoordinate(t,i,s){return Yc(t,i,s,this.OF.pixelScale,this.OF.$s)}addUIElement(t,i){return this.OF.addUIElement(t,i)}addLegendBox(t,i){return this.OF.addLegendBox(t,i)}saveToFile(t,i,s){return this.OF.saveToFile(t,i,s),this}dispose(){return this.OF.dispose(),this.band.dispose(),this.wF.clear(),this.sS.clear(),this.PF(this),this}onDispose(t){return this.OF.onDispose((()=>t(this)))}offDispose(t){return this.OF.offDispose(t)}}const cp=100001,fp=200002,dp=300001,gp=410001,mp=(t,i)=>{const s=Math.floor(99999/i),e=Math.floor(99999/i),h=Math.floor(99998/i),r=Math.floor(99999/(i+1)),n=Math.floor(89999/(i+1)),o=gp+i*n;let a=0;return{RF:()=>{const i=t.zF("dashboard ui",o+a);return a+=1,i},VF:()=>t.zF("dashboard legend",41e4),NF:i=>{const o=1+i*s,a=cp+i*e,l=fp+i*h,u=dp+i*r,c=gp+i*n;let f=0;return{$s:t,Gm:(i,s)=>{const e=o+s;return t.zF(i,e)},mv:(i,s)=>{const e=a+s;return t.zF(i,e)},Py:(i,s)=>{const e=l+s;return t.zF(i,e)},gv:(i,s,e)=>{const h=l+s;return t.GF(i,h,e)},Um:(i,s)=>{const e=u+s;return t.zF(i,e)},Pm:i=>{const s=c+f,e=t.zF(i,s);return f+=1,e},Bm:()=>t.zF("panel legend",400002+i),ob:()=>t.zF("panel cursor",500001+i)}}}};class yp{constructor(t){this.At=new $e,this.u=t}S(t){return this.u=t,this.At.emit("set",t),this}M(){return this.u}Tt(t){return this.At.on("set",t)}It(t){return this.At.off(t,"set")}}const pp={Oh:!1,Lh:0,Eh:!1,zh:0,Rh:!1,Vh:0,Nh:0,Ih:Go.fitting},Sp=t=>{if(!t||"object"!=typeof t||null===t)return!1;const i=t.type;return!(!i||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(i))},vp=(t,i,s,e,h,r,n,o)=>{const{type:a,data:l}=t;if(0===l.length)return;const u=[e,h];"spark-line"===a&&Tp(t,i,u,r,n,o),"spark-bar"===a&&Fp({...t,winLoss:!1},i,u,r,n,o),"spark-win-loss"===a&&Fp({...t,winLoss:!0},i,u,r,n,o),"spark-area"===a&&Ip(t,i,u,r,n,o),"spark-pie"===a&&Pp(t,i,u,r,n,o)},bp=(t,i,s,e)=>({x:Mp(t.x,i.x,s.x,e),y:_p(t.y,i.y,s.y,e)}),xp=(t,i,s,e)=>({position:Mp(t.position,i.x,s.x,e),high:_p(t.high,i.y,s.y,e),low:_p(t.low,i.y,s.y,e)}),Mp=(t,i,s,e)=>{const h=Ph(t,i,i+s);return e[0].x+e[1].x*(h-i)/s},_p=(t,i,s,e)=>{const h=Ph(t,i,i+s);return e[0].y+e[1].y*(h-i)/s},Ap=(t,i,s,e,h,r,n,o)=>{for(const a of t)"point"===a.type&&wp(a,i,s,h,r,n,o),"axis-band"===a.type&&kp(a,s,h,r,n,o),"constant-line"===a.type&&Cp(a,s,e,h,r,n,o)},wp=(i,s,e,h,r,n,o)=>{const{value:a,fillStyle:l,shape:u,size:c,rotation:f}=i;let d={x:NaN,y:NaN};if("start"===a&&(d=s[0]),"end"===a&&(d=s[s.length-1]),"min"===a){d=s[0];for(const t of s)d=d.y<t.y?d:t}if("max"===a){d=s[0];for(const t of s)d=d.y>t.y?d:t}("object"!=typeof a||(d=bp(a,e,h,r),((t,i)=>{const s=i[0],e=i[1],h=t.x,r=t.y;return s.x<=h&&h<=s.x+e.x&&s.y<=r&&r<=s.y+e.y})(d,r)))&&n.pointSet.add().Al().vl(void 0!==u?u:t.PointShape.Circle).gr(f||0).Gt(c||5).eh(l||o.sparkPointChartFillStyle)._l(d)},kp=(t,i,s,h,r,n)=>{const{axis:o,start:a,end:l,fillStyle:u,strokeStyle:c}=t;let f=e(Br,Dr),d=e(Br,Dr);"x"===o&&(f=bp({x:a,y:Br},i,s,h),d=bp({x:l,y:Dr},i,s,h)),"y"===o&&(f=bp({x:Br,y:a},i,s,h),d=bp({x:Dr,y:l},i,s,h));const g=h[0],m=h[1],y=Ph(f.x,g.x,g.x+m.x),p=Ph(f.y,g.y,g.y+m.y),S=Ph(d.x,g.x,g.x+m.x),v=Ph(d.y,g.y,g.y+m.y);r.rect.add().Fl(y).Il(p).Gt(e(S-y,v-p)).eh(u||n.sparkChartBandFillStyle).sh(c||n.sparkChartBandStrokeStyle).sh(rh)},Cp=(t,i,s,h,r,n,o)=>{const{axis:a,value:l,strokeStyle:u}=t,c=l||0,f=i.y,d=s.y,g=i.x,m=s.x,y=[];if("y"===a&&f<=c&&c<=d){const t=bp(e(g,c),{x:g,y:f},h,r),i=bp(e(m,c),{x:g,y:f},h,r);y.push([t,i])}if("x"===a&&g<=c&&c<=m){const t=bp(e(c,f),{x:g,y:f},h,r),i=bp(e(c,d),{x:g,y:f},h,r);y.push([t,i])}y.length>0&&n.line.add().gh(u||o.sparkChartConstantLineStrokeStyle).ph(y[0][0]).yh(y[0][1])},Tp=(t,i,s,e,h,r)=>{const{strokeStyle:n,data:o,markers:a}=t,l=o.length;l>1e4&&h.do&&Mh.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let u=Dr,c=Br,f=Dr,d=Br;for(let t=0;t<l;t+=1){const i=o[t];u=Math.min(u,i.x),c=Math.max(c,i.x),f=Math.min(f,i.y),d=Math.max(d,i.y)}const g={x:c-u,y:d-f},m=o.map((t=>bp(t,{x:u,y:f},g,s)));i.lineSet.add().Ys(r).gh(n||e.sparkLineChartStrokeStyle).Al()._l(m),a&&Ap(a,m,{x:u,y:f},{x:c,y:d},g,s,i,e)},Fp=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:a,threshold:l,winFillStyle:u,lossFillStyle:c}=t,f=t.barSize||1,d=t.gap||1,g=t.winLoss,m=l||0,y=d/f*1;let p=Dr,S=Br;if(g)p=-1,S=1;else for(const t of n)p=Math.min(p,t),S=Math.max(S,t);const v={x:0,y:g?-1:Math.min(0,p)},b={x:1*n.length+(n.length-1)*y,y:g?2:Math.max(S,1e-5)};n.map(((t,i)=>{const e={x:1*(i+1)+i*y,y:g?t>=m?1:0:t},h=bp({x:1*i+i*y,y:g?t>=m?0:-1:0},v,b,s),r=bp(e,v,b,s);return{value:t,position:h,width:r.x-h.x,height:r.y-h.y}})).forEach((t=>{var s;i.rect.add().Ys(r).oh(t.position).Dl(t.height).Pl(t.width).eh((s=t.value,g?(s>=m?u:c)||e.sparkBarChartFillStyle:o||e.sparkBarChartFillStyle)).sh(a||e.sparkBarChartStrokeStyle)}))},Ip=(t,i,s,e,h,n)=>{const{data:o,fillStyle:a,strokeStyle:l,markers:u}=t,c=o.length;c>1e4&&h.do&&Mh.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let f=Dr,d=Br,g=Dr,m=Br;for(let t=0;t<c;t+=1){const i=o[t];f=Math.min(f,i.x),d=Math.max(d,i.x),g=Math.min(g,i.y),m=Math.max(m,i.y)}const y={x:d-f,y:m-g},p=[],S=[];for(const t of o){const i=r(t.x,t.y,g);p.push(xp(i,{x:f,y:g},y,s)),S.push(bp(t,{x:f,y:g},y,s))}i.junction.add().Ys(n).Al()._l(p).eh(a||e.sparkAreaChartFillStyle),i.lineSet.add().Ys(n).Al()._l(S).gh(l||e.sparkAreaChartStrokeStyle),u&&Ap(u,S,{x:f,y:g},{x:d,y:m},y,s,i,e)},Pp=(t,i,s,h,r,n)=>{const{data:o,strokeStyle:a}=t,l=o.map((t=>"number"==typeof t?t:t.value)),u=o.map((t=>"object"==typeof t?t.fillStyle:void 0)),c=l.reduce(((t,i)=>t+i),0),f=bp(e(50,50),{x:0,y:0},{x:100,y:100},s),d=s[1],g=d.x<=d.y?d.x/2:d.y/2;let m=90;l.forEach(((t,s)=>{const e=t/c*360;i.arc.add().Ys(n).oh(f).xu(g).Au(0).bu(m).yh(m+e).eh(u[s]||Sr(h.sparkPieChartFillStyle,s)).sh(a||h.sparkPieChartStrokeStyle),m+=e}))};var Dp,Bp,Op;!function(t){t[t.UpToDown=0]="UpToDown",t[t.LeftToRight=1]="LeftToRight"}(Dp||(Dp={})),function(t){t[t.Vertical=0]="Vertical",t[t.Horizontal=1]="Horizontal",t[t.Both=2]="Both"}(Bp||(Bp={})),function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(Op||(Op={}));class Lp extends bl{constructor(t,i,s,e,h){super(),this.ue=!1,this.xk={x:0,y:0,height:20,width:20},this.WF={x:10,y:10},this.re=t,this.HF=h,this.UF=new Ul(t,i,s,Fh,e).setMouseInteractions(!0),this.jF=t.af(i,ol.Simple).eh(e.dataGridScrollBarButtonArrowFillStyle).sh(e.dataGridScrollBarButtonArrowStrokeStyle).setMouseInteractions(!1),this.Tc(this),this.UF.onMouseEnter((t=>t.setHighlight(1))),this.UF.onMouseLeave((t=>t.setHighlight(0)))}$F(){switch(this.HF){case Op.Up:this.jF.Ll([{x:this.xk.x,y:this.xk.y+this.WF.y/2},{x:this.xk.x+this.WF.x/2,y:this.xk.y-this.WF.y/2},{x:this.xk.x-this.WF.x/2,y:this.xk.y-this.WF.y/2}]);break;case Op.Down:this.jF.Ll([{x:this.xk.x-this.WF.x/2,y:this.xk.y+this.WF.y/2},{x:this.xk.x+this.WF.x/2,y:this.xk.y+this.WF.y/2},{x:this.xk.x,y:this.xk.y-this.WF.y/2}]);break;case Op.Left:this.jF.Ll([{x:this.xk.x-this.WF.x/2,y:this.xk.y},{x:this.xk.x+this.WF.x/2,y:this.xk.y+this.WF.y/2},{x:this.xk.x+this.WF.x/2,y:this.xk.y-this.WF.y/2}]);break;case Op.Right:this.jF.Ll([{x:this.xk.x-this.WF.x/2,y:this.xk.y+this.WF.y/2},{x:this.xk.x+this.WF.x/2,y:this.xk.y},{x:this.xk.x-this.WF.x/2,y:this.xk.y-this.WF.y/2}])}}oh(t){return this.xk.x=t.x,this.xk.y=t.y,this}ja(){return e(this.xk.x,this.xk.y)}Gt(t){return this.xk.height=t.x,this.xk.width=t.y,this}Ci(){return{x:this.xk.height,y:this.xk.width}}onMouseDown(t){return this.UF.onMouseDown(t)}onMouseUp(t){return this.UF.onMouseUp(t)}setFillStyle(t){return this.UF.setFillStyle(t),this}getFillStyle(){return this.UF.getFillStyle()}setStrokeStyle(t){return this.UF.setStrokeStyle(t),this}getStrokeStyle(){return this.UF.getStrokeStyle()}rh(){return this.UF.rh(),this.$F(),this}le(){return this.UF.setSize(e(this.xk.height,this.xk.width)).setPosition(e(this.xk.x,this.xk.y)),this}setVisible(t){return this.UF.setVisible(t),this.jF.setVisible(t),this}dispose(){return this.UF.dispose(),this.jF.dispose(),this}setMouseInteractions(t){return this.UF.setMouseInteractions(t),this}getMouseInteractions(){return this.UF.getMouseInteractions()}onHighlight(t){return this.At.on("highlight",t)}offHighlight(t){return this.At.off(t)}getHighlight(){return this.UF.getHighlight()}setHighlight(t){return this.UF.setHighlight(Ar(t)),this.At.emit("highlight",Boolean(t)),this.re.te(),this}}const Ep=(t,i)=>Math.min(Math.max(t,i.getInnerStart()),i.getInnerEnd());class Rp{constructor(i,s,h,r,n,o,a){this.gf={x:0,y:0},this.xk={x:0,y:0,height:0,width:0},this.At=new $e,this.YF={min:e(0,0),max:e(0,0)},this.mM=!1,this.yM=!1,this.XF={x:0,y:0},this.Ic=void 0,this.ZF=e(0,0),this.KF={x:0,y:0},this.qF=0,this.JF=15,this.pM=(i,s)=>{this.mM=!0,this.eg.te();const e=this.QF.getDraggingMode();this.Ic=this.eg.$s.cn(e===t.UIDraggingModes.notDraggable?t.MouseStyles.Restricted:e===t.UIDraggingModes.draggable?t.MouseStyles.Move:e===t.UIDraggingModes.onlyHorizontal?t.MouseStyles.Horizontal:t.MouseStyles.Vertical),this.tI&&clearInterval(this.tI)},this.SM=()=>{this.mM=!1,this.eg.te(),this.eg.$s.fn(this.Ic)},this.vM=t=>(this.yM=!0,this.XF=uh(this.eg.$s.lh(t.x,t.y),this.eg.$s.Jt,this.scale),!0),this.iI=(t,i)=>(this.sI(i),this.tI=setInterval((()=>this.sI(i)),300),!0),this.eI=()=>(clearInterval(this.tI),!0),this.bM=(i,s)=>{const h=this.QF.getDraggingMode();if(h!==t.UIDraggingModes.notDraggable){const r=s||h,n=uh(this.eg.$s.lh(i.x,i.y),this.eg.$s.Jt,this.scale),o=e(r!==t.UIDraggingModes.onlyVertical?Ep(n.x,this.scale.x):this.xk.x,r!==t.UIDraggingModes.onlyHorizontal?Ep(n.y,this.scale.y):this.xk.y),a=e(o.x-this.XF.x,o.y-this.XF.y),l=e(this.QF.getPosition().x+a.x,this.QF.getPosition().y+a.y),u=this.hI(l),c={x:Math.abs(this.ZF.x-u.x),y:Math.abs(this.ZF.y-u.y)};return this.rI(c),this.KF.y>a.y&&(this.XF=n),this.rh(),!0}return!1},this.xM=(t,i)=>{this.yM=!1,ir(i),this.eg.te()},this.eg=i,this.Am=s,this.scale=r,this.contentScale=n,this.nI=a,this.oI=new Lp(i,h,r,o,a===Dp.UpToDown?Op.Up:Op.Left).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.aI=new Lp(i,h,r,o,a===Dp.UpToDown?Op.Down:Op.Right).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.QF=new Ul(i,h,r,Fh,o).setFillStyle(o.dataGridScrollBarFillStyle).setStrokeStyle(o.dataGridScrollBarStrokeStyle).setMouseInteractions(!0).setDraggingMode(a===Dp.UpToDown?t.UIDraggingModes.onlyVertical:a===Dp.LeftToRight?t.UIDraggingModes.onlyHorizontal:t.UIDraggingModes.notDraggable),this.lI=new Ul(s,h,r,Fh,o).setFillStyle(o.dataGridScrollBarBackgroundFillStyle).setStrokeStyle(o.dataGridScrollBarBackgroundStrokeStyle).setMouseInteractions(!0),this.QF.onMouseEnter(this.pM),this.QF.onMouseLeave(this.SM),this.QF.onMouseDragStart(((t,i)=>this.vM(e(i.clientX,i.clientY))&&ir(i))),this.QF.onMouseDrag(((t,i)=>this.bM(e(i.clientX,i.clientY))&&ir(i))),this.QF.onMouseDragStop(this.xM),this.QF.onTouchStart(((t,i)=>this.vM(e(i.clientX,i.clientY))&&ir(i))),this.QF.onTouchMove(((t,i)=>this.bM(e(i.clientX,i.clientY))&&ir(i))),this.QF.onTouchEnd(this.xM),this.oI.onMouseDown(((t,i)=>this.iI(t,i)&&ir(i))),this.aI.onMouseDown(((t,i)=>this.iI(t,i)&&ir(i))),this.oI.onMouseUp(((t,i)=>this.eI()&&ir(i))),this.aI.onMouseUp(((t,i)=>this.eI()&&ir(i))),this.lI.onMouseWheel(((t,i)=>this.uI(i))),this.QF.onMouseWheel(((t,i)=>this.uI(i))),this.lI.onMouseDown(((t,i)=>this.iI(t,i)&&ir(i))),this.lI.onMouseUp(((t,i)=>this.eI()&&ir(i)))}cI(t){return this.xk=t,this}Pl(t){return this.xk.width=t,this}Zw(){return this.xk.width}fI(t){return this.ZF=t,this}dI(t){return this.gf=t,this}gI(){return this.gf}mI(t){return this.JF=t,this}yI(){return this.nI}pI(t){let i;switch(this.nI){case Dp.UpToDown:return i=t>0?Math.min(this.ZF.y-this.YF.max.y,this.KF.y+t):Math.max(0,this.KF.y+t),i!==this.KF.y&&(this.rI({x:0,y:i}),this.rh(),!0);case Dp.LeftToRight:return i=Math.min(this.YF.max.x-this.ZF.x,this.KF.x+t),i!==this.KF.x&&(this.rI({y:0,x:i}),this.rh(),!0);default:return!1}}SI(t){let i;switch(this.nI){case Dp.UpToDown:return i=Math.max(0,this.KF.y-t),i!==this.KF.y&&(this.rI({x:0,y:i}),this.rh(),!0);case Dp.LeftToRight:return i=t>0?Math.max(0,this.KF.x-t):Math.min(this.YF.max.x-this.ZF.x,this.KF.x-t),i!==this.KF.x&&(this.rI({x:i,y:0}),this.rh(),!0);default:return!0}}vI(t){switch(this.nI){case Dp.UpToDown:return this.At.on("scrollY",t);case Dp.LeftToRight:return this.At.on("scrollX",t)}return this.At.on("scrollY",t)}hI(t){switch(this.nI){case Dp.UpToDown:if(t.y>this.YF.min.y)return e(t.x,this.YF.min.y);if(t.y<this.YF.max.y)return e(t.x,this.YF.max.y);break;case Dp.LeftToRight:if(t.x<this.YF.min.x)return e(this.YF.min.x,t.y);if(t.x>this.YF.max.x)return e(this.YF.max.x,t.y)}return t}uI(t){t.deltaY>0&&this.bI()&&ir(t),t.deltaY<0&&this.xI()&&ir(t)}sI(t){const i=uh(this.eg.$s.lh(t.clientX,t.clientY),this.eg.$s.Jt,this.scale);let s;const h=this.QF.getPosition(),r=this.QF.getSize();this.MI(i,h,r)?clearInterval(this.tI):(s=this.nI===Dp.UpToDown?e(0,i.y-h.y>0?this.JF:-this.JF):e(h.x-i.x>0?this.JF:-this.JF,0),(s.x>0||s.y>0)&&this._I(0!==s.x?Math.abs(s.x):Math.abs(s.y)),(s.x<0||s.y<0)&&this.AI(0!==s.x?Math.abs(s.x):Math.abs(s.y)))}MI(t,i,s){return this.nI===Dp.UpToDown?t.y<i.y+s.y/2&&t.y>i.y-s.y/2:t.x>i.x-s.x/2&&t.x<i.x+s.x/2}wI(t){this.YF=t}_I(t){switch(this.nI){case Dp.UpToDown:{const i=Math.max(0,this.KF.y-t);return i!==this.KF.y&&(this.rI({x:0,y:i}),this.rh(),!0)}case Dp.LeftToRight:{const i=Math.max(0,this.KF.x-t);return i!==this.KF.x&&(this.rI({x:i,y:0}),this.rh(),!0)}default:return!1}}AI(t){switch(this.nI){case Dp.UpToDown:{let i;return i=this.gf.x>this.xk.height?Math.min(this.ZF.y-this.YF.max.y,this.KF.y+t):0,i!==this.KF.y&&(this.rI({x:0,y:i}),this.rh(),!0)}case Dp.LeftToRight:{const i=Math.min(this.YF.max.x-this.ZF.x,this.KF.x+t);return i!==this.KF.x&&(this.rI({y:0,x:i}),this.rh(),!0)}default:return!1}}xI(){return this._I(this.JF)}bI(){return this.AI(this.JF)}rI(t){if(t.x===this.KF.x&&t.y===this.KF.y)return;let i;switch(this.KF=t,this.nI){case Dp.UpToDown:i=this.KF.y*this.qF*this.contentScale.os().y,this.At.emit("scrollY",Bp.Vertical,i),this.eg.$s.te();break;case Dp.LeftToRight:i=this.KF.x*this.qF*this.contentScale.os().x,this.At.emit("scrollX",Bp.Horizontal,i)}}setVisible(t){return this.oI.setVisible(t),this.aI.setVisible(t),this.lI.setVisible(t),this.QF.setVisible(t),this}dispose(){return this.oI.dispose(),this.aI.dispose(),this.lI.dispose(),this.QF.dispose(),this.tI&&clearInterval(this.tI),this}le(){switch(this.kI(),this.CI(),this.nI){case Dp.UpToDown:this.oI.oh({x:this.xk.x,y:this.xk.y+this.xk.height-this.oI.Ci().x/2}).Gt(e(this.xk.width,this.xk.width)).le(),this.aI.oh({x:this.xk.x,y:this.xk.y+10}).Gt(e(this.xk.width,this.xk.width)).le(),this.lI.setSize({x:this.xk.width,y:this.xk.height-2*this.oI.Ci().x}).setPosition({x:this.xk.x,y:this.xk.y+this.aI.Ci().y+this.lI.getSize().y/2}),this.QF.setSize(e(this.xk.width,this.TI())),this.ZF={x:this.xk.x,y:this.oI.ja().y-this.oI.Ci().y/2-this.QF.getSize().y/2},this.wI({min:{x:this.xk.x,y:this.oI.ja().y-this.oI.Ci().y/2-this.QF.getSize().y/2},max:{x:this.xk.x,y:this.aI.ja().y+this.aI.Ci().x/2+this.QF.getSize().y/2}});break;case Dp.LeftToRight:this.oI.oh({x:this.xk.x,y:this.xk.y}).Gt(e(this.xk.height,this.xk.height)).le(),this.aI.oh({x:this.xk.x+this.xk.width-this.aI.Ci().x,y:this.xk.y}).Gt(e(this.xk.height,this.xk.height)).le(),this.lI.setSize({y:this.xk.height,x:this.xk.width-2*this.oI.Ci().y}).setPosition({x:this.xk.x+this.oI.Ci().x/2+this.lI.getSize().x/2,y:this.xk.y}),this.QF.setSize(e(this.TI(),this.xk.height)),this.ZF={x:this.oI.ja().x+this.oI.Ci().x/2+this.QF.getSize().x/2,y:this.xk.y},this.wI({min:{x:this.oI.ja().x+this.oI.Ci().x/2+this.QF.getSize().x/2,y:this.xk.y},max:{x:this.aI.ja().x-this.aI.Ci().x/2-this.QF.getSize().x/2,y:this.xk.y}})}return this.FI(),this}kI(){switch(this.nI){case Dp.UpToDown:this.II()||this.setVisible(!1),this.II()&&this.setVisible(!0);break;case Dp.LeftToRight:this.DI()||this.setVisible(!1),this.DI()&&this.setVisible(!0)}}CI(){switch(this.nI){case Dp.UpToDown:this.II()||this.rI({x:0,y:0});break;case Dp.LeftToRight:this.DI()||this.rI({x:0,y:0})}}II(){return this.gf.x>this.xk.height}DI(){return this.gf.y>this.xk.width}TI(){switch(this.nI){case Dp.UpToDown:return this.xk.height*(this.xk.height-2*this.oI.Ci().x)/this.gf.x;case Dp.LeftToRight:return this.xk.width*(this.xk.width-2*this.oI.Ci().y)/this.gf.y;default:return 0}}FI(){switch(this.nI){case Dp.UpToDown:this.qF=(this.gf.x-this.xk.height)/(this.YF.min.y-this.YF.max.y);break;case Dp.LeftToRight:this.qF=(this.gf.y-this.xk.width)/(this.YF.max.x-this.YF.min.x)}}rh(){switch(this.oI.rh(),this.aI.rh(),this.lI.rh(),this.nI){case Dp.UpToDown:this.QF.setPosition({x:this.xk.x,y:this.oI.ja().y-this.oI.Ci().y/2-this.QF.getSize().y/2-this.KF.y}).rh();break;case Dp.LeftToRight:this.QF.setPosition({y:this.xk.y,x:this.oI.ja().x+this.oI.Ci().x/2+this.QF.getSize().x/2+this.KF.x}).rh()}return this}}class zp{constructor(t,i,s,e,h,r,n){switch(this.eg=t,this.Am=i,this.scale=e,this.contentScale=h,n){case Bp.Vertical:this.BI=this.OI(s,r,Dp.UpToDown);break;case Bp.Horizontal:this.LI=this.OI(s,r,Dp.LeftToRight);break;case Bp.Both:this.BI=this.OI(s,r,Dp.UpToDown),this.LI=this.OI(s,r,Dp.LeftToRight)}this.EI=Xn(new Kn(void 0,((t,i,s,e,h)=>{var r,n;0!==e.x&&(null===(r=this.LI)||void 0===r?void 0:r.SI(e.x))&&ir(h),0!==e.y&&(null===(n=this.BI)||void 0===n?void 0:n.pI(e.y))&&ir(h)})))}OI(t,i,s){return new Rp(this.eg,this.Am,t,this.scale,this.contentScale,i,s)}Zw(){return 20}dI(t){var i,s;return null===(i=this.BI)||void 0===i||i.dI(t),null===(s=this.LI)||void 0===s||s.dI(t),this}RI(t){var i;return null===(i=this.LI)||void 0===i||i.mI(t),this}zI(t){var i;return null===(i=this.BI)||void 0===i||i.mI(t),this}VI(t){const i=this.BI;return i&&i.uI(t),this}NI(t){return this.EI.onTouchStart(this,t),this}GI(t){return this.EI.onTouchMove(this,t),this}WI(t){return this.EI.onTouchEnd(this,t),this}onScroll(t){var i,s;return null===(i=this.LI)||void 0===i||i.vI(t),null===(s=this.BI)||void 0===s||s.vI(t),this}dispose(){var t,i;return null===(t=this.BI)||void 0===t||t.dispose(),null===(i=this.LI)||void 0===i||i.dispose(),this}rh(){var t,i;return null===(t=this.BI)||void 0===t||t.rh(),null===(i=this.LI)||void 0===i||i.rh(),this}le(){var t,i,s,e;const h=this.scale.x,r=this.scale.y;return null===(t=this.BI)||void 0===t||t.cI({x:h.getInnerEnd()-10,y:r.getInnerStart()+20,height:r.getInnerEnd()-20,width:20}),null===(i=this.LI)||void 0===i||i.cI({x:h.getInnerStart()+10,y:r.getInnerStart()+10,height:20,width:h.getInnerEnd()-20}),null===(s=this.BI)||void 0===s||s.le(),null===(e=this.LI)||void 0===e||e.le(),this}}class Vp extends Jc{constructor(t,i,s,e,h,r){super(t,i,s,i.Gm("dataGrid bg",0),e,i.$s.Rs.dataGridBackgroundFillStyle,i.$s.Rs.dataGridBackgroundStrokeStyle,i.$s.Rs.dataGridTitleFont,i.$s.Rs.dataGridTitleFillStyle,r),this.HI=[],this.UI=[],this.jI=[],this.$I=new Map,this.YI=!0,this.XI=!0,this.ZI=!0,this.KI=!0,this.qI=!0,this.JI=!0,this.QI=!0,this.tP=!0,this.iP=!0,this.sP=!0,this.eP=!0,this.hP=!0,this.rP=!0,this.nP=!0,this.oP=!0,this.aP=!0,this.lP=new Set,this.uP=new Set,this.cP=!0,this.fP=!0,this.dP=(t,i)=>{t.borders=void 0===i?Up:{...t.borders,...i},this.gP(t),this.hP=!0,this.$s.te()},this.gP=t=>{t.borders&&(!1===t.borders.top&&this.mP(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!1}:{...this.yP,bottom:!1}})),!1===t.borders.bottom&&this.mP(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!1}:{...this.yP,top:!1}})),!1===t.borders.left&&this.mP(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!1}:{...this.yP,right:!1}})),!1===t.borders.right&&this.mP(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!1}:{...this.yP,left:!1}})),!0===t.borders.top&&this.mP(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!0}:{...this.yP,bottom:!0}})),!0===t.borders.bottom&&this.mP(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!0}:{...this.yP,top:!0}})),!0===t.borders.left&&this.mP(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!0}:{...this.yP,right:!0}})),!0===t.borders.right&&this.mP(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!0}:{...this.yP,left:!0}})))},this.pP=(t,i)=>{const s=this.$I.get(t);s&&this.At.emit(Np.cellMouseEnter,s,i)},this.SP=(t,i)=>{const s=this.$I.get(t);s&&this.At.emit(Np.cellMouseLeave,s,i)},this.vP=(t,i)=>{const s=this.$I.get(t);s&&this.At.emit(Np.cellMouseClick,s,i)},this.bP=(t,i)=>{const s=this.$I.get(t);s&&this.At.emit(Np.cellMouseDoubleClick,s,i)},this.xP=(t,i)=>{const s=this.$I.get(t);s&&this.At.emit(Np.cellMouseDown,s,i)},this.MP=(t,i)=>{const s=this.$I.get(t);s&&this.At.emit(Np.cellMouseUp,s,i)},this._P=(t,i)=>{const s=this.$I.get(t);s&&this.At.emit(Np.cellMouseMove,s,i)},this.AP=(t,i)=>{const s=this.$I.get(t);s&&this.At.emit(Np.cellMouseDrag,s,i)},this.wP=(t,i)=>{const s=this.$I.get(t);s&&this.At.emit(Np.cellMouseDragStart,s,i)},this.kP=(t,i)=>{const s=this.$I.get(t);s&&this.At.emit(Np.cellMouseDragStop,s,i)},this.CP=(t,i)=>{const s=this.$I.get(t);s&&(this.At.emit(Np.cellMouseWheel,s,i),!i.defaultPrevented&&this.cP&&this.TP.VI(i))},this.FP=(t,i)=>{const s=this.$I.get(t);s&&(this.At.emit(Np.cellTouchStart,s,i),!i.defaultPrevented&&this.fP&&this.TP.NI(i))},this.IP=(t,i)=>{const s=this.$I.get(t);s&&(this.At.emit(Np.cellTouchMove,s,i),!i.defaultPrevented&&this.fP&&this.TP.GI(i))},this.PP=(t,i)=>{const s=this.$I.get(t);s&&(this.At.emit(Np.cellTouchEnd,s,i),!i.defaultPrevented&&this.fP&&this.TP.WI(i))},this.Yd.no||this.Yd.ao||this.$s.ho(2),this.jm.lr("Data Grid"),this.DP=s.d2({scaleXYConstructor:Rn}),this.DP.x.zg=pp,this.BP=s.d2({scaleXYConstructor:Rn}),this.OP={x:0,y:0},this.LP=this.Rs.dataGridTextFont,this.EP=this.Rs.dataGridTextFillStyle,this.yP={top:!0,bottom:!0,left:!0,right:!0},this.RP=this.Rs.dataGridCellBackgroundFillStyle,this.zP=this.Rs.dataGridBorderStrokeStyle,this.VP="left-center",this.NP={left:5,right:5,bottom:5,top:5},this.GP=i.mv("dataGrid grid bg",0),this.WP=i.mv("dataGrid cell bg",1),this.HP=i.Py("dataGrid cell content",0),this.UP=i.Py("dataGrid scrollbar bg",1),this.jP=i.Py("dataGrid scrollbar fg",2),this.TP=this.$P(),this.onBackgroundMouseWheel(((t,i)=>{this.cP&&this.TP.VI(i)})),this.onBackgroundTouchStart(((t,i)=>{this.fP&&this.TP.NI(i)})),this.onBackgroundTouchMove(((t,i)=>{this.fP&&this.TP.GI(i)})),this.onBackgroundTouchEnd(((t,i)=>{this.fP&&this.TP.WI(i)})),this.YP=this.GP.hh(this.DP).eh(this.Rs.dataGridBackgroundFillStyle).sh(rh).setMouseInteractions(!1),this.XP=this.HP.lm(this.DP).setMouseInteractions(!1),this.ZP=new Cf((()=>this.WP.hh(this.DP).setMouseInteractions(!0).setMouseEnterEventHandler(this.pP).setMouseLeaveEventHandler(this.SP).setMouseClickEventHandler(this.vP).setMouseDoubleClickEventHandler(this.bP).setMouseDownEventHandler(this.xP).setMouseUpEventHandler(this.MP).setMouseMoveEventHandler(this._P).setMouseDragEventHandler(this.AP).setMouseDragStartEventHandler(this.wP).setMouseDragStopEventHandler(this.kP).setMouseWheelEventHandler(this.CP).setTouchStartEventHandler(this.FP).setTouchMoveEventHandler(this.IP).setTouchEndEventHandler(this.PP))),this.KP=new Cf((()=>this.HP.hh(this.DP).setMouseInteractions(!1))),this.qP=new Cf((()=>this.HP.tn(this.DP).setMouseInteractions(!1))),this.JP=new Cf((()=>this.HP.Gy(this.DP,{},[ff.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setMouseInteractions(!1))),this.QP=new Cf((()=>this.HP.mh(this.DP).setMouseInteractions(!1))),this.tD=new Cf((()=>this.HP.iS(this.DP).setMouseInteractions(!1))),this.iD=new Cf((()=>this.HP.hh(this.DP).setMouseInteractions(!1))),this.sD=new Cf((()=>this.HP.VC(this.DP).setMouseInteractions(!1))),this.eD=new Cf((()=>this.HP.df(this.DP).setMouseInteractions(!1))),this.Nm(h,this.uiScale),this.onResize((()=>{this.YI=!0,this.$s.te(),this.DP.Gt(this.pixelScale.Ci()),this.BP.Gt(this.pixelScale.Ci())})),this.hD=this.Ns.Qg([this.YP])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}qf(){return[]}dispose(){return super.dispose(),this.GP.Pt(),this.WP.Pt(),this.HP.Pt(),this.UP.Pt(),this.jP.Pt(),Zc(this.DP),Zc(this.BP),this.TP.dispose(),this.qP.Zy(),this.ZP.Zy(),this.KP.Zy(),this.JP.Zy(),this.QP.Zy(),this.tD.Zy(),this.iD.Zy(),this.sD.Zy(),this.eD.Zy(),this}Rt(){return super.Rt(),this.DP.Rt(),this.BP.Rt(),this}zt(){return super.zt(),this.DP.zt(),this.BP.zt(),this}setBackgroundEffect(t){return this.hD.Qs(t),this.$s.te(),this}getBackgroundEffect(){return this.hD.ie()}setInteractionScrollOnWheel(t){return this.cP=t,this}getInteractionScrollOnWheel(){return this.cP}setInteractionPanOnTouch(t){return this.fP=t,this}getInteractionPanOnTouch(){return this.fP}onCellMouseEnter(t){return this.At.on(Np.cellMouseEnter,t)}offCellMouseEnter(t){return this.At.off(t)}onCellMouseLeave(t){return this.At.on(Np.cellMouseLeave,t)}offCellMouseLeave(t){return this.At.off(t)}onCellMouseClick(t){return this.At.on(Np.cellMouseClick,t)}offCellMouseClick(t){return this.At.off(t)}onCellMouseDoubleClick(t){return this.At.on(Np.cellMouseDoubleClick,t)}offCellMouseDoubleClick(t){return this.At.off(t)}onCellMouseDown(t){return this.At.on(Np.cellMouseDown,t)}offCellMouseDown(t){return this.At.off(t)}onCellMouseUp(t){return this.At.on(Np.cellMouseUp,t)}offCellMouseUp(t){return this.At.off(t)}onCellMouseMove(t){return this.At.on(Np.cellMouseMove,t)}offCellMouseMove(t){return this.At.off(t)}onCellMouseDrag(t){return this.At.on(Np.cellMouseDrag,t)}offCellMouseDrag(t){return this.At.off(t)}onCellMouseDragStart(t){return this.At.on(Np.cellMouseDragStart,t)}offCellMouseDragStart(t){return this.At.off(t)}onCellMouseDragStop(t){return this.At.on(Np.cellMouseDragStop,t)}offCellMouseDragStop(t){return this.At.off(t)}onCellMouseWheel(t){return this.At.on(Np.cellMouseWheel,t)}offCellMouseWheel(t){return this.At.off(t)}onCellTouchStart(t){return this.At.on(Np.cellTouchStart,t)}offCellTouchStart(t){return this.At.off(t)}onCellTouchMove(t){return this.At.on(Np.cellTouchMove,t)}offCellTouchMove(t){return this.At.off(t)}onCellTouchEnd(t){return this.At.on(Np.cellTouchEnd,t)}offCellTouchEnd(t){return this.At.off(t)}setGridBackgroundFillStyle(t){return this.YP.eh(t),this.$s.te(),this}getGridBackgroundFillStyle(){return this.YP.ur()}setCellContent(t,i,s,e,h){if("number"==typeof s&&void 0!==e&&void 0!==h){const r=s,n=e,o=h;let a=[];for(let s=t;s<t+r;s+=1)for(let t=i;t<i+n;t+=1){const i=this.mP(s,t);i&&a.push(i)}a=_r(a);let l={highlight:0};for(const t of a){const i=this.HI.indexOf(t);i<0||(l={...l,highlight:t.highlight,textFont:t.textFont,textFillStyle:t.textFillStyle,contentAlignment:t.contentAlignment,borders:t.borders,padding:t.padding,backgroundFillStyle:t.backgroundFillStyle},this.HI.splice(i,1))}const u={...l,column:t,row:i,columnSpan:r,rowSpan:n,content:o};this.HI.push(u),this.KI=!0,"string"==typeof u.content||"number"==typeof u.content?this.XI=!0:this.ZI=!0,this.$s.te()}else this.rD(t,i,s);return this}setColumnContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.rD(t,e,s)}return this}setRowContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.rD(e,t,s)}return this}setTableContent(t){const i=t.length;if(0===i)return this;const s=t[0].length;if(0===s)return this;for(let e=0;e<s;e+=1)for(let s=0;s<i;s+=1){const i=t[s][e];this.rD(e,s,i)}return this}setColumnWidth(t,i){let s=this.UI.find((i=>i.column===t));return s||(s={column:t,min:void 0,max:void 0},this.UI.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.UI.splice(this.UI.indexOf(s),1):(s.min=i,s.max=i),this.JI=!0,this.$s.te(),this}setRowHeight(t,i){let s=this.jI.find((i=>i.row===t));return s||(s={row:t,min:void 0,max:void 0},this.jI.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.jI.splice(this.jI.indexOf(s),1):(s.min=i,s.max=i),this.JI=!0,this.$s.te(),this}setColumnPaddings(t,i){return"number"==typeof i&&(i=f(i,i,i,i)),this.nD(t,(t=>this.oD(t,i))),this}setRowPaddings(t,i){return"number"==typeof i&&(i=f(i,i,i,i)),this.aD(t,(t=>this.oD(t,i))),this}setCellPadding(t,i,s){return"number"==typeof s&&(s=f(s,s,s,s)),this.mP(t,i,(t=>this.oD(t,s))),this}setCellsPaddings(t){return"number"==typeof t&&(t=f(t,t,t,t)),this.NP={...this.NP,...t},this.lD((t=>this.oD(t,this.NP))),this}setCellBorders(t,i,s){return this.mP(t,i,(t=>this.dP(t,s))),this}setRowBorders(t,i){return this.aD(t,(t=>this.dP(t,i))),this}setColumnBorders(t,i){return this.nD(t,(t=>this.dP(t,i))),this}setCellsBorders(t){return this.yP=void 0===t?Up:t,this.lD((t=>this.dP(t,this.yP))),this}setCellsBorderStrokeStyle(t){return this.zP="function"==typeof t?t(this.zP):t,this.nP=!0,this.$s.te(),this}setColumnTextFillStyle(t,i){return this.nD(t,(t=>this.uD(t,i))),this}setRowTextFillStyle(t,i){return this.aD(t,(t=>this.uD(t,i))),this}setCellTextFillStyle(t,i,s){return this.mP(t,i,(t=>this.uD(t,s))),this}setCellsTextFillStyle(t){return this.EP="function"==typeof t?t(this.EP):t,this.lD((t=>this.uD(t,this.EP))),this}setColumnTextFont(t,i){return this.nD(t,(t=>this.cD(t,i))),this}setRowTextFont(t,i){return this.aD(t,(t=>this.cD(t,i))),this}setCellTextFont(t,i,s){return this.mP(t,i,(t=>this.cD(t,s))),this}setCellsTextFont(t){return this.LP="function"==typeof t?t(this.LP):t,this.lD((t=>this.cD(t,this.LP))),this}setColumnContentAlignment(t,i){return this.nD(t,(t=>this.fD(t,i))),this}setRowContentAlignment(t,i){return this.aD(t,(t=>this.fD(t,i))),this}setCellContentAlignment(t,i,s){return this.mP(t,i,(t=>this.fD(t,s))),this}setCellsContentAlignment(t){return this.VP=t,this.lD((t=>this.fD(t,this.VP))),this}setCellBackgroundFillStyle(t,i,s){return this.mP(t,i,(t=>this.dD(t,s))),this}setColumnBackgroundFillStyle(t,i){return this.nD(t,(t=>this.dD(t,i))),this}setRowBackgroundFillStyle(t,i){return this.aD(t,(t=>this.dD(t,i))),this}setCellsBackgroundFillStyle(t){return this.RP="function"==typeof t?t(this.RP):t,this.lD((t=>this.dD(t,this.RP))),this}setCellHighlight(t,i,s){return this.mP(t,i,(t=>{t.highlight=Ar(s)})),this.rP=!0,this.$s.te(),this}setColumnHighlight(t,i){const s=Ar(i);return this.nD(t,(t=>{t.highlight=s})),this.rP=!0,this.$s.te(),this}setRowHighlight(t,i){const s=Ar(i);return this.aD(t,(t=>{t.highlight=s})),this.rP=!0,this.$s.te(),this}removeCell(t,i){return this.mP(t,i,(t=>this.HI.splice(this.HI.indexOf(t),1))),this.qI=!0,this.$s.te(),this}removeRow(t){return this.aD(t,(t=>this.HI.splice(this.HI.indexOf(t),1))),this.HI.filter((i=>i.row>t)).forEach((t=>{t.row-=1})),this.qI=!0,this.$s.te(),this}removeColumn(t){return this.nD(t,(t=>this.HI.splice(this.HI.indexOf(t),1))),this.HI.filter((i=>i.column>t)).forEach((t=>{t.column-=1})),this.qI=!0,this.$s.te(),this}removeCells(){return this.HI.splice(0),this.qI=!0,this.$s.te(),this}getColumnMax(){return 0===this.HI.length?0:this.HI.reduce(((t,i)=>Math.max(t,i.column+i.columnSpan-1)),0)}getRowMax(){return 0===this.HI.length?0:this.HI.reduce(((t,i)=>Math.max(t,i.row+i.rowSpan-1)),0)}rh(t){super.rh(t),Qc.Km(this.jm,this.Wm);const i=Math.round(this.zP.Ct()),s=i/2;let e=this.XI||this.ZI||this.KI||this.qI||this.JI||this.QI||this.eP||this.hP||this.nP||this.aP;if(e){this.HI.forEach((t=>{this.uP.add(t.column)})),this.HI.forEach((t=>{this.lP.add(t.row)}));const t=this.qP.Xy(),h=this.gD(s,t);t.finishPlot();const r=this.mD(this.uP.size,h),n=this.yD(this.lP.size,h),o=r.reduce(Nr,0)+i,a=n.reduce(Nr,0)+i,l=new Array(r.length+1).fill(0).map(((t,i)=>r.reduce(((t,s,e)=>t+(e<i?s:0)),0))),u=new Array(n.length+1).fill(0).map(((t,i)=>n.reduce(((t,s,e)=>t+(e<i?s:0)),0)));if(this.pD){const t=this.pD.columnWidths.every(((t,i)=>t===r[i])),i=this.pD.rowHeights.every(((t,i)=>t===n[i]));t&&i&&(e=!1)}this.pD={columnWidths:r,rowHeights:n,dataGridWidth:o,dataGridHeight:a,columnWidthsCumulative:l,rowHeightsCumulative:u,cellsContentSizes:h}}const h=e||this.ZI||this.KI||this.qI||this.tP||this.iP||this.sP||this.hP||this.rP||this.nP||this.YI||this.aP;if((h||this.oP)&&this.pD){const t=this.pixelScale.getInnerIntervalPixels(),e=Qc.Zm(this.jm,this.Wm),r=[this.Ba.left+s,this.Ba.right+s],n=[this.Ba.bottom+s,this.Ba.top+e+s],o={x:t.x-r[0]-r[1],y:t.y-n[0]-n[1]},a=[this.Ba.left,this.Ba.right],l=[this.Ba.bottom,this.Ba.top+e],u={x:Math.round(t.x-a[0]-a[1]),y:Math.round(t.y-l[0]-l[1])},c={x:Math.ceil(s),y:Math.floor(u.y-s)};this.BP.ts(r).ss(n).es(0,o.x).hs(0,o.y),this.TP.dI({x:this.pD.dataGridHeight,y:this.pD.dataGridWidth}).le().rh();const f={x:Math.round(this.OP.x),y:Math.round(Math.min(0,this.OP.y))};this.DP.ts(a).ss(l).es(f.x,u.x+f.x).hs(f.y,u.y+f.y),this.YP.oh({x:c.x,y:c.y});const d={x:this.DP.x._i(),y:this.DP.y._i()+this.TP.Zw(),width:this.DP.x.wi()+i-this.TP.Zw(),height:this.DP.y.wi()+i};this.HP.ov(d),this.WP.ov(d),this.GP.ov(d),h&&this.SD(c,this.pD,i)}this.YI=!1,this.XI=!1,this.ZI=!1,this.KI=!1,this.qI=!1,this.JI=!1,this.QI=!1,this.tP=!1,this.iP=!1,this.sP=!1,this.eP=!1,this.hP=!1,this.rP=!1,this.nP=!1,this.oP=!1,this.aP=!1}gD(t,i){const s=[],e={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const t of this.HI){const{content:h}=t,r={...this.NP,...t.padding};let n,o,a,l={x:0,y:0};if("string"==typeof h||"number"==typeof h){const s=String(h);n=i.add(),l=n.lr(s).dr(t.textFont||this.LP).le().cf()}if(Sp(h)&&(o=h,l={x:200,y:50}),qu(h)){const t=this.$s.vD(h);t.bD()?(a=h,l=a.Ci()):t.xD((()=>{this.aP=!0,this.$s.te()}))}if(n||o||a){r.top=Math.round(r.top),r.left=Math.round(r.left),r.right=Math.round(r.right),r.bottom=Math.round(r.bottom);const i={x:Math.round(l.x+r.left+r.right+e.left+e.right),y:Math.round(l.y+r.top+r.bottom+e.top+e.bottom)};s.push({cell:t,contentSize:i,text:n,sparkChart:o,icon:a,cellPadding:r,cellMargin:e})}}return s}SD(i,s,e){const{dataGridWidth:h,dataGridHeight:r,cellsContentSizes:n,columnWidths:o,columnWidthsCumulative:a,rowHeights:l,rowHeightsCumulative:u}=s,c={x:h-e,y:-r+e};this.YP.Gt(c),this.XP.gh(this.zP),this.$I.clear();const f={cellBackground:this.ZP.Xy(),cellIconRect:this.KP.Xy(),lineSet:this.JP.Xy(),line:this.QP.Xy(),pointSet:this.tD.Xy(),rect:this.iD.Xy(),junction:this.sD.Xy(),arc:this.eD.Xy()},d=[];for(const s of n){const{cell:h,text:r,sparkChart:n,icon:c,cellPadding:g,cellMargin:m}=s,y={column:h.column,row:h.row},p={x:i.x+a[h.column],y:i.y-u[h.row+h.rowSpan]},S={x:p.x+m.left,y:p.y+m.bottom},v={x:S.x+g.left,y:S.y+g.bottom},b={x:new Array(h.columnSpan).fill(0).reduce(((t,i,s)=>t+o[h.column+s]),0),y:new Array(h.rowSpan).fill(0).reduce(((t,i,s)=>t+l[h.row+s]),0)},x={x:b.x-m.left-m.right,y:b.y-m.top-m.bottom},M={x:x.x-g.left-g.right,y:x.y-g.top-g.bottom};if(r){const t=Hp(v,M,h.contentAlignment||this.VP);r.oh(t[0]).Ja({x:t[1],y:t[2]}).eh(this.MD(h.textFillStyle||this.EP,h.content,this.EP)).Ys(h.highlight)}const _=this.MD(h.backgroundFillStyle||this.RP,h.content);if(_!==Ie){const t=f.cellBackground.add();t.oh(p).Gt(b).eh(_).sh(rh).Ys(h.highlight),this.$I.set(t,y)}const A=h.borders||this.yP;if(A&&Wp(p,b,A,e,d),n){const t=v,i=M;vp(n,f,this.DP,t,i,this.Rs,this.Yd,h.highlight)}if(c){const i=c.Ci(),s=Hp(v,M,h.contentAlignment||this.VP);f.cellIconRect.add().oh({x:s[0].x+i.x*(-.5-s[1]/2),y:s[0].y+i.y*(-.5-s[2]/2)}).Gt(i).eh(new Uu({source:c.sd,fitMode:t.ImageFitMode.Stretch})).sh(rh).Ys(h.highlight)}}this.XP.Al();for(const t of d)this.XP.ln().fm(t[0],t[1]);f.cellBackground.finishPlot(),f.cellIconRect.finishPlot(),f.lineSet.finishPlot(),f.line.finishPlot(),f.pointSet.finishPlot(),f.rect.finishPlot(),f.junction.finishPlot(),f.arc.finishPlot()}mD(t,i){const s=new Array(t).fill(0);for(const t of this.uP.values()){const e=i.filter((i=>t>=i.cell.column&&t+1<=i.cell.column+i.cell.columnSpan)).reduce(((t,i)=>{const s=i.contentSize.x/i.cell.columnSpan;return Math.max(t,s)}),0),h=this.UI.find((i=>i.column===t)),r=h?Ph(e,void 0!==h.min?h.min:Br,void 0!==h.max?h.max:Dr):e;s[t]=r}return s}yD(t,i){const s=new Array(t).fill(0);for(const t of this.lP.values()){const e=i.filter((i=>t>=i.cell.row&&t+1<=i.cell.row+i.cell.rowSpan)).reduce(((t,i)=>{const s=i.contentSize.y/i.cell.rowSpan;return Math.max(t,s)}),0),h=this.jI.find((i=>i.row===t)),r=h?Ph(e,void 0!==h.min?h.min:Br,void 0!==h.max?h.max:Dr):e;s[t]=r}return s}MD(t,i,s){if(ze(t)){try{const s=Number(i);return new Be({color:t.getPalette().getColors(s)})}catch(t){}return s||Ie}return t}uD(t,i){t.textFillStyle="function"==typeof i?i(t.textFillStyle||this.EP):i,this.sP=!0,this.$s.te()}cD(t,i){t.textFont="function"==typeof i?i(t.textFont||this.LP):i,this.eP=!0,this.$s.te()}dD(t,i){t.backgroundFillStyle="function"==typeof i?i(t.backgroundFillStyle||this.RP):i,this.iP=!0,this.$s.te()}fD(t,i){t.contentAlignment=i,this.tP=!0,this.$s.te()}oD(t,i){t.padding={...t.padding,...i},this.QI=!0,this.$s.te()}rD(t,i,s){let e=this.mP(t,i);e?e.content=s:(e={column:t,row:i,columnSpan:1,rowSpan:1,content:s,highlight:0},this.HI.push(e),this.KI=!0),"string"==typeof e.content||"number"==typeof e.content?this.XI=!0:this.ZI=!0,this.$s.te()}lD(t){this.HI.forEach((i=>t(i)))}mP(t,i,s){const e=this.HI.find((s=>t>=s.column&&t+1<=s.column+s.columnSpan&&i>=s.row&&i+1<=s.row+s.rowSpan));return e&&s&&s(e),e}nD(t,i){const s=this.HI.filter((i=>t>=i.column&&t+1<=i.column+i.columnSpan));for(const t of s)t&&i(t)}aD(t,i){const s=this.HI.filter((i=>t>=i.row&&t+1<=i.row+i.rowSpan));for(const t of s)t&&i(t)}$P(){return new zp(this.jP,this.UP,this.BP,this.BP,this.DP,this.Rs,Bp.Both).onScroll(((t,i)=>{this.pD&&(t===Bp.Vertical&&(this.OP.y=-i),t===Bp.Horizontal&&(this.OP.x=i),this.oP=!0,this.$s.te())})).RI(50).zI(12)}}const Np={cellMouseEnter:"cellMouseEnter",cellMouseLeave:"cellMouseLeave",cellMouseClick:"cellMouseClick",cellMouseDoubleClick:"cellMouseDoubleClick",cellMouseDown:"cellMouseDown",cellMouseUp:"cellMouseUp",cellMouseMove:"cellMouseMove",cellMouseDrag:"cellMouseDrag",cellMouseDragStart:"cellMouseDragStart",cellMouseDragStop:"cellMouseDragStop",cellMouseWheel:"cellMouseWheel",cellTouchStart:"cellTouchStart",cellTouchMove:"cellTouchMove",cellTouchEnd:"cellTouchEnd"};var Gp;t.DataGridCellContentAlignmentOptions=void 0,(Gp=t.DataGridCellContentAlignmentOptions||(t.DataGridCellContentAlignmentOptions={})).Center="center",Gp.RightCenter="right-center",Gp.LeftCenter="left-center",Gp.RightTop="right-top",Gp.LeftTop="left-top",Gp.RightBottom="right-bottom",Gp.LeftBottom="left-bottom",Gp.CenterTop="center-top",Gp.CenterBottom="center-bottom";const Wp=(t,i,s,e,h)=>{const r={x:t.x,y:t.y},n={x:t.x,y:t.y+i.y},o={x:t.x+i.x,y:t.y},a={x:t.x+i.x,y:t.y+i.y};s.top&&h.push([n,a]),s.bottom&&h.push([r,o]),s.left&&h.push([r,n]),s.right&&h.push([o,a])},Hp=(t,i,s)=>{const h=t.x,r=t.x+i.x,n=t.x+i.x/2,o=t.y+i.y,a=t.y,l=t.y+i.y/2;switch(s){case"left-center":return[e(h,l),-1,0];case"right-center":return[e(r,l),1,0];case"center":return[e(n,l),0,0];case"left-bottom":return[e(h,a),-1,-1];case"right-bottom":return[e(r,a),1,-1];case"center-bottom":return[e(n,a),0,-1];case"left-top":return[e(h,o),-1,1];case"right-top":return[e(r,o),1,1];case"center-top":return[e(n,o),0,1]}return wr(0,`Unidentified DataGrid cell content alignment option: ${s}`)},Up={top:!1,bottom:!1,left:!1,right:!1};class jp extends ta{constructor(t,i,s,e,h,r){super(t,{jr(){},Ur(){},Yr(){}},e,i,s,{numeric:i.xAxisNumericTicks,datetime:i.xAxisDateTimeTicks,time:i.xAxisTimeTicks},{type:"linear"}),this.chart=t,this.Ns=r,this.re=h,this.ar=h.tn(t._D).dr(this.Rs.barChartCategoryAxisTitleFont||this.Rs.xAxisTitleFont).eh(this.Rs.barChartCategoryAxisTitleFillStyle||this.Rs.xAxisTitleFillStyle),this.setTitleRotation(this.chart.ne.getWidth({x:0,y:-90})),this.yr=this.Ns.Qg([this.ar]).Qs(i.effectsText),this.AD=h.mh(t._D).gh(i.barChartCategoryAxisStrokeStyle||i.xAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.sm=t,this.hm=t):"object"==typeof t&&(this.sm=t.min,this.hm=t.max),this.chart.$s.te(),this}getThickness(){return{min:this.sm,max:this.hm}}setStrokeStyle(t){return this.AD.gh(t),this.chart.$s.te(),this}getStrokeStyle(){return this.AD.Cu()}le(){if(!this.ds)return{wD:0,kD:0,Nf:Ph(0,void 0!==this.sm?this.sm:0,void 0!==this.hm?this.hm:Dr)};const t=this.AD.Cu().Ct()/2,i=this.chart.ne.getHeight(this.ar.le().cf());return{wD:t,kD:i,Nf:t+i}}rh(t,i,s,e){const h=this.getInterval(),r=this.chart.valueAxis.getInterval();this.AD.ph(this.chart.ne.toPoint(h.start,r.start)).yh(this.chart.ne.toPoint(h.end,r.start)).setVisible(this.ds),this.ar.oh(this.chart.ne.toPoint(.5*(h.start+h.end),this.chart.valueAxis.Jt.Ei(0,-(t.wD+e.labelMarginBeforeCategoryAxisPixels)))).Ja(this.chart.ne.toPoint(0,1)).setVisible(this.ds)}setMouseInteractions(t){return this}Rr(t,i){return new ia(i,t,this.re,this.chart._D)}zr(t,i){return{}}Zr(t,i){return i}qr(t,i,s){return{min:t,max:i}}}class $p extends ta{constructor(t,i,s,e,h,r,n){super(t,{jr:()=>{var i;if(t.CD){if("positive"===t.TD||"bipolar"===t.TD){if("after-bar"===(null===(i=t.FD)||void 0===i?void 0:i.position)){const i=this.Jt.wi();return this.Jt.Ei(t.CD.max,Math.min(this.chart.ne.getHeight(this.chart.ID())+t.FD.labelMargin,.3*i))}return t.CD.max}return t.PD?Ph(-1,-1e-6,t.CD.max):0}},Ur:()=>{var i;if(t.CD){if("negative"===t.TD||"bipolar"===t.TD){if("after-bar"===(null===(i=t.FD)||void 0===i?void 0:i.position)){const i=this.Jt.wi();return console.log("asd",t.CD.min,this.Jt.Ei(t.CD.min,-10),this.getInterval()),this.Jt.Ei(t.CD.min,-Math.min(this.chart.ne.getHeight(this.chart.ID())+t.FD.labelMargin,.3*i))}return t.CD.min}return t.PD?Ph(1,1e-6,t.CD.min):0}},Yr:()=>{}},e,i,s,{numeric:i.barChartValueAxisTicks||i.yAxisNumericTicks,datetime:i.yAxisDateTimeTicks,time:i.yAxisTimeTicks},n),this.chart=t,this.Ns=r,this.re=h,this.ar=h.tn(t._D).dr(this.Rs.barChartValueAxisTitleFont||this.Rs.yAxisTitleFont).eh(this.Rs.barChartValueAxisTitleFillStyle||this.Rs.yAxisTitleFillStyle),this.setTitleRotation(this.chart.ne.getHeight({x:0,y:-90})),this.yr=this.Ns.Qg([this.ar]).Qs(i.effectsText),this.AD=h.mh(t._D).gh(i.barChartValueAxisStrokeStyle||this.Rs.yAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.sm=t,this.hm=t):"object"==typeof t&&(this.sm=t.min,this.hm=t.max),this.chart.$s.te(),this}getThickness(){return{min:this.sm,max:this.hm}}setStrokeStyle(t){return this.AD.gh(t),this.chart.$s.te(),this}getStrokeStyle(){return this.AD.Cu()}setTickStrategy(t,i){return super.er(t,i)}le(t){if(!this.ds)return this.pr(),{wD:0,kD:0,Nf:Ph(0,void 0!==this.sm?this.sm:0,void 0!==this.hm?this.hm:Dr)};const i=this.chart.ne.getWidth(this.chart._D).wi(),s=this.Jt.wi();this.Cr({physicalAxisSize:s,oppositeAxisSize:i,plotLines:t});let e=0;for(const t of this.Th.values())for(const i of t.values()){const t=i.Xh.Er,s=this.chart.ne.getWidth(i._h.cf()),h=t.getTickLength()+t.getTickPadding()+s+t.getLabelPadding();e=Math.max(e,h)}const h=e+this.AD.Cu().Ct()/2,r=this.chart.ne.getWidth(this.ar.le().cf());return{wD:h,kD:r,Nf:Ph(h+r,void 0!==this.sm?this.sm:0,void 0!==this.hm?this.hm:Dr)}}rh(t){const i=this.getInterval();this.AD.ph(this.chart.ne.toPoint(-.5,this.hr)).yh(this.chart.ne.toPoint(-.5,this.rr)).setVisible(this.ds),this.ar.oh(this.chart.ne.toPoint(this.chart.categoryAxis.Jt.Ei(-.5,t.wD*this.chart.ne.DD),.5*(i.start+i.end))).Ja(this.chart.ne.toPoint(this.chart.ne.BD,0)).setVisible(this.ds)}setMouseInteractions(t){return this}Rr(t,i){return new ia(i,t,this.re,this.chart._D)}zr(t,i){const s=t.Xh.Er,e=this.chart.ne.toPoint(-.5,t.u),h=this.chart._D.Ei(e,this.chart.ne.toPoint(s.getTickLength()*this.chart.ne.DD,0)),r=this.chart._D.Ei(e,this.chart.ne.toPoint(s.gridStrokeLength*i.oppositeAxisSize,0)),n=this.chart._D.Ei(h,this.chart.ne.toPoint(s.getTickPadding()*this.chart.ne.DD,0));t._h.oh(n).Ja(this.chart.ne.toPoint(this.chart.ne.BD,s.getLabelAlignment())).gr(s.getLabelRotation()),s.tickStyle!==rh&&0!==s.tickLength&&i.plotLines.add({positions:[e,h]},{lineStyle:s.tickStyle}),s.gridStrokeStyle!==rh&&s.gridStrokeLength>0&&i.plotLines.add({positions:[e,r]},{lineStyle:s.gridStrokeStyle})}Zr(t,i){return"linear"===this.ir.type?sc(t,i,this.Jt):ec(t,i,this.Jt)}qr(t,i,s){return{min:t,max:i}}}class Yp extends $d{constructor(t,i,s,e,h,r){super(t,i,s,e),this.u=0,this.chart=t,this.Ls=t,this.category=h,this.dt=h,this.Qe=Sr(s.barChartBarFillStyle||s.rectangleSeriesFillStyle,r),this.th=Sr(s.barChartBarStrokeStyle||s.rectangleSeriesStrokeStyle,r),this.onVisibleStateChanged((()=>{this.Ls.OD()})),this.onDispose((()=>{this.Ls.OD(),this.Ls.LD.delete(this),this.Ls.ED.delete(this)}))}setValue(t){return this.u=t,this.Ls.OD(),this.Ls.$s.te(),this.Ls.LD.delete(this),this.Ls.ED.delete(this),this}getValue(){return this.u}get value(){return this.u}setFillStyle(t){return this.Qe="function"==typeof t?t(this.Qe):t,this.Ls.OD(),this}getFillStyle(){return this.Qe}setStrokeStyle(t){return this.th="function"==typeof t?t(this.th):t,this.Ls.OD(),this}getStrokeStyle(){return this.th}Dp(){return this.Op}fb(t,i){return _d(t,this.Ls.engine.scale,this.Ls.bb(new ad,this.category,this.u,this).if(),this,void 0)}solveNearestFromScreen(t){}setEffect(t){return this.Ls.setBarsEffect(t),this}}const Xp=t=>!!(t&&"object"==typeof t&&"iCategory"in t&&"number"==typeof t.iCategory&&"value"in t&&"number"==typeof t.value),Zp=(t,i,s)=>{const e=t.Ff.filter((t=>void 0!==t)),h=e.map((t=>s(t.sizePixels))).reduce(((t,i)=>Math.max(t,i)),1),r=Math.ceil(h/(i/e.length));return r<=1?e:e.filter(((t,i)=>i%r==0))};class Kp extends Dd{constructor(i,s,e,h,r,n,o){var a;let l;super(i,s,e,s.Gm("barChart bg",0),h,s.$s.Rs.barChartBackgroundFillStyle||s.$s.Rs.chartXYBackgroundFillStyle,s.$s.Rs.barChartBackgroundStrokeStyle||s.$s.Rs.chartXYBackgroundStrokeStyle,s.$s.Rs.barChartTitleFont||s.$s.Rs.chartXYTitleFont,s.$s.Rs.barChartTitleFillStyle||s.$s.Rs.chartXYTitleFillStyle,n),this.coordsBars="barChart",this.RD=qp.Descending,this.zD=this.Rs.barChartCategoryLabels,this.FD=this.Rs.barChartValueLabelsAfterBars,this.bb=(t,i,s,e)=>(this.categoryAxis.getTitle().length>0&&t.addRow(this.categoryAxis.getTitle()),t.addRow(i),this.valueAxis.getTitle().length>0&&t.addRow(this.valueAxis.getTitle()),t.addRow(this.valueAxis.formatValue(s)),t),this.VD=!1,this.ND=(()=>{const t=new Map;return{R:i=>(i.setMouseEnterEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.xs(i,s,e)})),i.setMouseLeaveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Ms(i,s,e)})),i.setMouseClickEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.As(i,s,e)})),i.setMouseDoubleClickEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.ws(i,s,e)})),i.setMouseDownEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.ks(i,s,e)})),i.setMouseUpEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Cs(i,s,e)})),i.setMouseMoveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h._s(i,s,e)})),i.setMouseDragEventHandler(((i,s,e,h,r,n)=>{const o=n&&t.get(n);o&&o.Fs(i,s,e,h,r,n)})),i.setMouseDragStartEventHandler(((i,s,e,h)=>{const r=h&&t.get(h);r&&r.Ts(i,s,e,h)})),i.setMouseDragStopEventHandler(((i,s,e,h,r)=>{const n=r&&t.get(r);n&&n.Is(i,s,e,h,r)})),i.setMouseWheelEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Ps(i,s,e)})),i.setTouchStartEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Ds(i,s,e)})),i.setTouchMoveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Bs(i,s,e)})),i.setTouchEndEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Os(i,s,e)})),i),GD:(i,s)=>{t.set(i,s)},Al:()=>{t.clear()}}})(),this.LD=new Map,this.ED=new Map,this.TD="positive",this.WD=!0,this.HD=new Map,this.UD={speed:1},this.oy={speed:1},this.jD=.08,this.In=(t,i,s,e,h)=>{this._D.Gt(e,h)},this.ne="horizontal"===(null==o?void 0:o.type)?Qp:Jp,this.jm.lr("Bar Chart"),this.$D=s.Py("barChart plotting 1",0),this.YD=s.Py("barChart plotting 2",1),this.PD="logarithmic"===(null===(a=null==o?void 0:o.valueAxis)||void 0===a?void 0:a.type),this.PD?"horizontal"===this.ne.$?(l=e.d1({scale1DConstructor:On,dimension:"y"}),this._D=(new zn).Qi(e.d1({scale1DConstructor:wn,dimension:"x"}),l)):(l=e.d1({scale1DConstructor:On,dimension:"x"}),this._D=(new zn).Qi(l,e.d1({scale1DConstructor:wn,dimension:"y"}))):(this._D=e.d2({scaleXYConstructor:Rn}),l=this.ne.getWidth(this._D)),this.XD=this.Ns.Qg(),this.ZD=new kf((()=>this.ND.R(this.$D.Rb(this._D).ga(0))),((t,i,s)=>{t.eh(s.fillStyle).sh(s.strokeStyle),i.forEach((i=>{const s=t.ln().Ll(i.vertices);this.ND.GD(s,i.bar),i.bar.qs([s])}))}),(()=>{this.ND.Al()}),(t=>{this.XD.Zs(t)})),this.lS=this.Am.hh(this._D).eh(this.Rs.barChartSeriesBackgroundFillStyle||Ie).sh(rh),this.uS=this.Am.hh(this._D).eh(Ie).sh(this.Rs.barChartSeriesBackgroundStrokeStyle||rh).setMouseInteractions(!1),super.aS(this.lS,this.uS),this.categoryAxis=new jp(this,this.Rs,!(!o||void 0===o.disableAnimations)&&o.disableAnimations,l,this.YD,this.Ns);const u=ic(null==o?void 0:o.valueAxis);this.valueAxis=new $p(this,this.Rs,!(!o||void 0===o.disableAnimations)&&o.disableAnimations,this.ne.getHeight(this._D),this.YD,this.Ns,u.type),this.KD=new Cf((()=>this.YD.tn(this._D).il(Ir).Qa(Ir).ga(1))),this.qD=new kf((()=>this.Am.lm(this._D).setMouseInteractions(!1)),((t,i,s)=>{t.Al().gh(s.lineStyle),i.forEach((({positions:i})=>t.ln().fm(i[0],i[1])))}));const c=Rh(o?o.autoCursorBuilder:void 0,bd);this.cb=c.sb(this.nb,this.uiScale,this.uiScale,this.Rs),this.onResize(this.In),this.Nm(r,this._D),this.setAutoCursorMode(t.AutoCursorModes.onHover),(null==o?void 0:o.disableAnimations)&&this.setAnimationsEnabled(!1)}getSeries(){return this.sS}setBarsMargin(t){return this.jD=Ph(t,0,.49),this.VD=!0,this.$s.te(),this}getBarsMargin(){return this.jD}setBarsEffect(t){return this.XD.Qs(t),this.$s.te(),this}getBarsEffect(){return this.XD.ie()}setData(t){let i;if(Array.isArray(t))i=[],t.forEach(((t,s)=>{"string"==typeof t?i.push({category:t}):"number"==typeof t?i.push({category:`Category ${s+1}`,value:t}):"object"==typeof t&&i.push(t)}));else{i=[];const s=Object.keys(t);for(const e of s){const s=t[e];i.push({category:e,value:"number"==typeof s?s:void 0})}}if(this.RD&&i.sort(this.RD),i.forEach(((t,i)=>{let s=this.sS.find((i=>i.category===t.category));s||(s=new Yp(this,this.hS,this.Rs,this.$s.Ns,t.category,i),this.cS(s),this.HD.set(s,{category:i,value:void 0!==t.value?t.value:0})),void 0!==t.value&&s.setValue(t.value)})),this.sS.slice().forEach((t=>{void 0===i.find((i=>i.category===t.category))&&(t.dispose(),this.HD.delete(t))})),this.categoryAxis.setInterval(this.ne.getWidth({x:{start:-.5,end:this.sS.length-.5},y:{start:this.sS.length-.5,end:-.5}})),this.CD=0===this.sS.length?void 0:this.sS.reduce(((t,i)=>({min:Math.min(t.min,i.getValue()),max:Math.max(t.max,i.getValue())})),{min:Dr,max:Br}),this.CD&&(this.TD=this.CD.min>=0?"positive":this.CD.max<=0?"negative":"bipolar",("bipolar"===this.TD||"negative"===this.TD)&&this.PD))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");return this.RD&&this.sS.sort(this.RD),this.LD.clear(),this.ED.clear(),this.VD=!0,this.$s.te(),this}setCategoryLabels(t){const i="function"==typeof t?this.zD?t(this.zD):this.zD:t;return this.zD=i?{...this.Rs.barChartCategoryLabels,...i}:void 0,this.LD.clear(),this.$s.te(),this}getCategoryLabels(){return this.zD}setValueLabels(t){var i;const s="function"==typeof t?this.FD?t(this.FD):this.FD:t,e=(null==s?void 0:s.position)||(null===(i=this.FD)||void 0===i?void 0:i.position);return s&&e?"after-bar"===e?this.FD={...this.Rs.barChartValueLabelsAfterBars,...s}:"inside-bar"!==e&&"inside-bar-start"!==e&&"inside-bar-centered"!==e&&"inside-bar-end"!==e||(this.FD={...this.Rs.barChartValueLabelsInsideBars,...s}):this.FD=void 0,this.ED.clear(),this.$s.te(),this}getValueLabels(){return this.FD}setLabelFittingEnabled(t){return this.WD=t,this.$s.te(),this}getLabelFittingEnabled(){return this.WD}getBar(t){const i=this.sS.find((i=>i.category===t));if(!i)throw new Error(`BarChart.getBar() no such bar: "${t}"`);return i}getBars(){return this.sS}setSorting(t){return this.RD=t,t&&this.sS.sort(t),this.$s.te(),this}getSorting(){return this.RD}setCursorResultTableFormatter(t){return this.bb=t,this.$s.te(),this}setAnimationCategoryPosition(t,i=1){return this.UD=t?{speed:i}:void 0,this.$s.te(),this}setAnimationValues(t,i=1){return this.oy=t?{speed:i}:void 0,this.$s.te(),this}translateCoordinate(t,i,s){if(s&&Hn(t)&&Wn(i))return super.translateCoordinate(t,i,s);const e=i;let h;if(Gn(t))h=this.$s.Xo(t);else if(Hn(t)){const i=uh(t,this.pixelScale,this.$s.Jt);h={engineX:i.x,engineY:i.y}}else{if(!Xp(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const i=uh(this.ne.toPoint(t.iCategory,t.value),this._D,this.$s.Jt);h={engineX:i.x,engineY:i.y}}}if(Nn(e))return this.$s.Zo(h);if("barChart"===e){const t=uh({x:h.engineX,y:h.engineY},this.$s.Jt,this._D);return{iCategory:this.ne.getWidth(t),value:this.ne.getHeight(t)}}if(Wn(e))return uh({x:h.engineX,y:h.engineY},this.$s.Jt,this.pixelScale);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}rh(t){var i,s;super.rh(t);const e=this.KD.Xy(),h=this.qD.Xy(),r=this.sS.filter((t=>t.getVisible())),n=5e-4*t*((null===(i=this.UD)||void 0===i?void 0:i.speed)||0),o=.003*t*((null===(s=this.UD)||void 0===s?void 0:s.speed)||0),a=this.valueAxis.Jt,l=a instanceof On?(t,i)=>{var s;return sc(t,i,a,(null===(s=this.oy)||void 0===s?void 0:s.speed)||0)}:(t,i)=>{var s;return ec(t,i,a,(null===(s=this.oy)||void 0===s?void 0:s.speed)||0)};r.forEach(((t,i)=>{const s={category:i,value:t.value};let e,h,r=this.HD.get(t);if(void 0===r&&(r=s),this.UD&&r.category!==s.category){const t=Math.sign(s.category-r.category);e=r.category+n*t+o*(s.category-r.category),t!==Math.sign(s.category-e)&&(e=s.category)}else e=s.category;if(this.oy&&r.value!==s.value){const t=Math.sign(s.value-r.value);h=l(r.value,s.value),t!==Math.sign(s.value-h)&&(h=s.value)}else h=s.value;this.HD.set(t,{category:e,value:h}),e===s.category&&h===s.value||this.$s.te(!0),e===r.category&&h===r.value||(this.VD=!0)})),Qc.Km(this.jm,this.Wm),this.categoryAxis.Xr(),this.valueAxis.Xr();const u=this.categoryAxis.le(),c=this.valueAxis.le(h),{labelMarginBeforeCategoryAxisPixels:f}=this.JD(r,e,h);this.categoryAxis.rh(u,e,h,{labelMarginBeforeCategoryAxisPixels:f}),this.valueAxis.rh(c);const d=this.categoryAxis.getThickness(),g=Ph(u.Nf+f,void 0!==d.min?d.min:0,void 0!==d.max?d.max:Dr),m={x:Math.min(this._D.x.getInnerStart(),this._D.x.getInnerEnd()),y:Math.min(this._D.y.getInnerStart(),this._D.y.getInnerEnd())},y=Math.max(this._D.x.getInnerStart(),this._D.x.getInnerEnd()),p=Math.max(this._D.y.getInnerStart(),this._D.y.getInnerEnd()),S={x:y-m.x,y:p-m.y};this.lS.oh(m),this.lS.Gt(S),this.uS.oh(m),this.uS.Gt(S),super.Vm(),this.gb(!1);const v=Qc.Zm(this.jm,this.Wm);if(this._D.ss([this.di.bottom+this.Ba.bottom+("vertical"===this.ne.$?g:0),this.di.top+this.Ba.top+v+("horizontal"===this.ne.$?c.Nf:0)]),this._D.ts([this.di.left+this.Ba.left+this.ne.getHeight({x:g,y:c.Nf}),this.di.right+this.Ba.right]),this.$D.ov({x:this._D.x._i(),y:this._D.y._i(),width:this._D.x.wi(),height:this._D.y.wi()}),this.xm&&this.xm(),this.VD){const t=this.ZD.Xy(),i=1-2*this.jD;r.forEach(((s,e)=>{const h=this.HD.get(s);if(void 0===h)return;const r=h.category-.5*i,n=h.category+.5*i,o=this.PD?1e-6:0,a=[this.ne.toPoint(r,o),this.ne.toPoint(r,h.value),this.ne.toPoint(n,h.value),this.ne.toPoint(n,o)];t.add({vertices:a,bar:s},{fillStyle:s.Qe,strokeStyle:s.th})})),t.finishPlot()}e.finishPlot(),h.finishPlot(),this.VD=!1}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(!1),this.setAnimationValues(!1),this.valueAxis.setAnimationsEnabled(!1),this.categoryAxis.setAnimationsEnabled(!1),this}solveNearest(t){}dispose(){return this.YD.Pt(),this.$D.Pt(),super.dispose()}JD(t,i,s){let e=0;const h=this.zD,r=this.FD,n=this.valueAxis.getInterval(),o=this.ne.getWidth({x:this._D.x.wi(),y:this._D.y.wi()});if(h&&h.labelFillStyle!==Ie){const r=h.tickLength+h.labelMargin,a=this.ne.toPoint(0,1),l={Ff:t.map(((t,i)=>{const s=h.formatter(t,t.category,t.value);if(!s)return;const e=this.HD.get(t);return void 0!==e?{text:s,position:this.ne.toPoint(e.category,this.valueAxis.Jt.Ei(n.start,-r)),alignment:a,rotation:h.labelRotation,sizePixels:this.QD(t)}:void 0})),$c:h.labelFont,Jt:this._D},u=l?this.WD?Zp(l,o,this.ne.getWidth):l.Ff:[];u.forEach((t=>{t&&i.add().lr(t.text).oh(t.position).Ja(t.alignment).gr(t.rotation).eh(h.labelFillStyle).dr(h.labelFont)})),h.tickStyle!==rh&&0!==h.tickLength&&u.forEach((t=>{if(!t)return;const i=this.ne.getWidth(t.position);s.add({positions:[this.ne.toPoint(i,this.valueAxis.Jt.getInnerStart()),this.ne.toPoint(i,this.valueAxis.Jt.Ei(n.start,-h.tickLength))]},{lineStyle:h.tickStyle})})),e=u.reduce(((t,i)=>i?Math.max(t,this.ne.getHeight(i.sizePixels)):t),0)+h.tickLength+h.labelMargin}if(r&&r.labelFillStyle!==Ie){let s;"after-bar"===r.position?s={Ff:t.map(((t,i)=>{const s=r.formatter(t,t.category,t.value);if(!s)return;const e=this.HD.get(t);return void 0!==e?{text:s,position:this.ne.toPoint(e.category,this.valueAxis.Jt.Ei(e.value,r.labelMargin*Math.sign(e.value))),alignment:this.ne.toPoint(0,-1*Math.sign(e.value)),rotation:r.labelRotation,sizePixels:this.tB(t)}:void 0})),$c:r.labelFont,Jt:this._D}:"inside-bar"!==r.position&&"inside-bar-start"!==r.position&&"inside-bar-centered"!==r.position&&"inside-bar-end"!==r.position||(s={Ff:t.map(((t,i)=>{const s=r.formatter(t,t.category,t.value);if(!s)return;const e=this.HD.get(t);if(void 0===e)return;const h=this.PD?1e-6:0,n="bipolar"===this.TD?Math.sign(e.value):"negative"===this.TD?-1:1,o=this.ne.toPoint(0,"inside-bar"===r.position||"inside-bar-end"===r.position?1*n:"inside-bar-centered"===r.position?0:-1*n);return{text:s,position:this.ne.toPoint(e.category,"inside-bar"===r.position||"inside-bar-end"===r.position?this.valueAxis.Jt.Ei(e.value,-r.labelMargin*n):"inside-bar-centered"===r.position?(h+e.value)/2:this.valueAxis.Jt.Ei(h,r.labelMargin*n)),alignment:o,rotation:r.labelRotation,sizePixels:this.tB(t)}})),$c:r.labelFont,Jt:this._D}),s&&(s?this.WD?Zp(s,o,this.ne.getWidth):s.Ff:[]).forEach((t=>{t&&i.add().lr(t.text).oh(t.position).Ja(t.alignment).gr(t.rotation).eh(r.labelFillStyle).dr(r.labelFont)}))}return{labelMarginBeforeCategoryAxisPixels:e}}QD(t){if(!this.zD||this.zD.labelFillStyle===Ie)return{x:0,y:0};const i=this.LD.get(t);if(i)return i;const s=this.zD.formatter(t,t.category,t.value),e=this.$s.sB.iB(s,this.zD.labelFont,this.zD.labelRotation);return e.isEstimate?this.$s.te(!0):this.LD.set(t,e),e}tB(t){if(!this.FD||this.FD.labelFillStyle===Ie)return{x:0,y:0};const i=this.ED.get(t);if(i)return i;const s=this.$s.sB.iB(this.FD.formatter(t,t.category,t.value),this.FD.labelFont,this.FD.labelRotation);return s.isEstimate?this.$s.te(!0):this.ED.set(t,s),s}ID(){return this.sS.reduce(((t,i)=>{const s=this.tB(i);return{x:Math.max(t.x,s.x),y:Math.max(t.y,s.y)}}),{x:0,y:0})}OD(){this.VD=!0,this.$s.te()}getMinimumSize(){return{x:200,y:200}}}const qp={Disabled:void 0,None:void 0,Ascending:(t,i)=>t.value-i.value,Descending:(t,i)=>i.value-t.value,Alphabetical:(t,i)=>t.category.localeCompare(i.category)},Jp={...nc,$:"vertical",DD:-1,BD:1},Qp={...oc,$:"horizontal",DD:1,BD:-1},tS=(t,i)=>i?t.x:t.y,iS=(t,i,s,e)=>1===i&&e===(s?t.columnIndex:t.rowIndex)||-1===i&&e===(s?t.columnIndex+t.columnSpan:t.rowIndex+t.rowSpan),sS=(t,i,s,e,h,r)=>{const n=i.length,o=Math.sign(e),a=[],l=i.reduce(((t,i)=>t+i));for(let t=1;t<=n-1;t+=1)a.push(tS(h,r)*i.slice(0,t).reduce(((t,i)=>t+i),0)/l);const u=a.map((t=>0));let c=a[s-1]+e;for(let i=s;i>0&&i<n;i+=o){const e=t.filter((t=>iS(t,o,r,i))).reduce(((t,i)=>Math.max(t,tS(i.panel.getMinimumSize()||{x:0,y:0},r))),20),n=a[i-1];if(1===o&&c>tS(h,r)-e||-1===o&&c<0+e){u.fill(0);break}if(i!==s&&(1===o?n>c:n<c))break;u[i-1]=c-n,c+=e*o}const f=u.map(((t,i)=>a[i]+t)),d=f.map(((t,i)=>(t-(i>0?f[i-1]:0))/tS(h,r)));return d.push(1-d.reduce(((t,i)=>t+i),0)),d};class eS{constructor(t,i,s,e,h){this.coordsRelative="relative",this.coordsClient="client",this.fs=!1,this.HI=new Array,this.At=new $e,this.eB=[],this.Sm=[],this.hB=void 0,this.rB=!0,this.nB=!0,this.oB=!0,this.aB=!0,this.lB=()=>{this.aB=!0,this.$s.te()},this.uB=[],this.cB=t=>{for(let i=0;i<this.HI.length;i+=1)if(this.HI[i].panel===t){this.HI.splice(i,1),this.rB=!0,this.$s.te();break}},this.fB=t=>{const i=this.eB.indexOf(t);i>=0&&this.eB.splice(i,1)},this.km=t=>{const i=this.Sm.indexOf(t);i>=0&&this.Sm.splice(i,1)},this.dB=(t,i,s,e,h)=>{if(this.gB(i,s,e,h)){const r={panel:t,columnIndex:i,rowIndex:s,columnSpan:e,rowSpan:h};return this.HI.push(r),this.mB(r),this.rB=!0,t}throw new mh("Out of dashboard range.")},this.yB=i.numberOfRows,this.pB=i.numberOfColumns,this.Yd=t,this.SB=i,this.vB=e;const r=this.pB*this.yB;this.bB={x:new yp(new Array(this.pB).fill(1)),y:new yp(new Array(this.yB).fill(1))},this.Rs=s.Rs,this.xB=this.Rs.dashboardSplitterStyle,this.Bh=void 0===i.disableAnimations||!i.disableAnimations,this.MB=mp(s,r),this._B=s.zF("dashboard splitters",400001),this.FM=()=>this.MB.RF(),this.Dm=this.MB.VF(),this.Ns=s.Ns.Gs(this,{AB:{}}),this.Ns.AB.Qs(this.Rs.effectsDashboardSplitters);const n=s.Ci();this.uiScale=ah.d2({scaleXYConstructor:Rn}).es(0,100).hs(0,100).Gt(n),this.pixelScale=ah.d2({scaleXYConstructor:Rn}).es(0,this.uiScale.x.getCellSize()).hs(0,this.uiScale.y.getCellSize()).Gt(n),this.wB=s.kB.bind(s),this.CB=s.TB.bind(s),this.FB=s.IB.bind(s),this.PB=s.DB.bind(s),this.Mo=s.Mo.bind(s),this.Ao=s.Ao.bind(s),this.engine=s.Tm,this.$s=s.Fm,s.jo((()=>this.lB())),s.te(),this.BB(),this.setAnimationsEnabled(this.Bh);const o=("resize",{on:(a=this.At).on.bind(a,"resize"),off:a.off.bind(a)});var a;this.createChartXY=t=>{const i=hS(t,this.SB,this.Bh);return this.dB(new rp(this.Yd,this.MB.NF(this.OB(t.columnIndex,t.rowIndex)),this.LB(i,this.bB),this.cB,h,i,o),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createSpiderChart=t=>{const i=hS(t,this.SB,this.Bh);return this.dB(new Mm(this.Yd,this.MB.NF(this.OB(t.columnIndex,t.rowIndex)),this.LB(i,this.bB),this.cB,h,i,o),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPolarChart=t=>{const i=hS(t,this.SB,this.Bh);return this.dB(new Ig(this.Yd,this.MB.NF(this.OB(t.columnIndex,t.rowIndex)),this.LB(i,this.bB),this.cB,h,i,o),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPieChart=t=>{const i=hS(t,this.SB,this.Bh),s=i&&i.type?i.type:Mf;return this.dB(new s(this.Yd,this.MB.NF(this.OB(t.columnIndex,t.rowIndex)),this.LB(i,this.bB),this.cB,h,o,i.disableAnimations),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createGaugeChart=t=>{const i=hS(t,this.SB,this.Bh),s=i&&i.type?i.type:qg;return this.dB(new s(this.Yd,this.MB.NF(this.OB(t.columnIndex,t.rowIndex)),this.LB(i,this.bB),this.cB,h,o,i.disableAnimations),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createFunnelChart=t=>{const i=hS(t,this.SB,this.Bh),s=i&&i.type?i.type:Ng;return this.dB(new s(this.Yd,this.MB.NF(this.OB(t.columnIndex,t.rowIndex)),this.LB(i,this.bB),this.cB,h,o,i.disableAnimations),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPyramidChart=t=>{const i=hS(t,this.SB,this.Bh),s=t&&t.type?t.type:rm;return this.dB(new s(this.Yd,this.MB.NF(this.OB(t.columnIndex,t.rowIndex)),this.LB(i,this.bB),this.cB,h,o,i.disableAnimations),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createUIPanel=t=>{const i=hS(t,this.SB,this.Bh);return this.dB(new Kc(this.Yd,this.MB.NF(this.OB(t.columnIndex,t.rowIndex)),this.LB(i,this.bB),this.cB,h,o),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createLegendBoxPanel=t=>{const i=hS(t,this.SB,this.Bh);return this.dB(new id(this.Yd,this.MB.NF(this.OB(t.columnIndex,t.rowIndex)),this.LB(i,this.bB),this.cB,h,o),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createZoomBandChart=t=>{const i=hS(t,this.SB,this.Bh),s=void 0===i.bandAboveSeries||i.bandAboveSeries;return this.dB(new up(this.Yd,this.MB.NF(this.OB(t.columnIndex,t.rowIndex)),this.LB(i,this.bB),this.cB,i.axis,s,h,i,o),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createMapChart=t=>{const i=hS(t,this.SB,this.Bh);return this.dB(new Bd(this.Yd,this.MB.NF(this.OB(t.columnIndex,t.rowIndex)),this.LB(i,this.bB),this.cB,h,i,o),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createChart3D=t=>{const i=hS(t,this.SB,this.Bh),s=new Qf(this.Yd,this.MB.NF(this.OB(t.columnIndex,t.rowIndex)),this.LB(i,this.bB),this.cB,h,o,i);return this.dB(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createDataGrid=t=>{const i=hS(t,this.SB,this.Bh),s=new Vp(this.Yd,this.MB.NF(this.OB(t.columnIndex,t.rowIndex)),this.LB(i,this.bB),this.cB,h,o);return this.dB(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createBarChart=t=>{const i=hS(t,this.SB,this.Bh),s=new Kp(this.Yd,this.MB.NF(this.OB(t.columnIndex,t.rowIndex)),this.LB(i,this.bB),this.cB,h,o,i);return this.dB(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)}}OB(t,i){return t+i*this.pB}LB(t,i){return{d1:s=>new s.scale1DConstructor("x"===s.dimension?t.columnIndex:t.rowIndex,"x"===s.dimension?t.columnSpan:t.rowSpan,"x"===s.dimension?this.pB:this.yB,"x"===s.dimension?i.x:i.y),d2:s=>(new s.scaleXYConstructor).Zt({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.pB,y:this.yB},i),d3:()=>new nh({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.pB,y:this.yB},i)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.wB(t[0]),this.CB(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.FB(t[0]),this.PB(t[1]),this}getWidth(){return this.Mo()}getHeight(){return this.Ao()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this._B.te(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this._B.te(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.Rs}setSplitterStyle(t){const i=this.xB;return this.xB="function"==typeof t?t(this.xB):t,this.EB(i),this}getSplitterStyle(){return this.xB}setSplitterEffect(t){return this.Ns.AB.Qs(t),this.$s.te(),this}getSplitterEffect(){return this.Ns.AB.ie()}setAnimationHighlight(t){return this.oB=t,this.uB.forEach((i=>this.$s.js.ee(i.line,t))),this}getAnimationHighlight(){return this.oB}EB(t){for(const t of this.uB)t.line.gh(this.xB);this.BB()}setColumnWidth(t,i){const s=this.bB.x.M();return t>=0&&t<s.length&&(s[t]=i,this.bB.x.S(s)),this.lB(),this}getColumnWidth(t){const i=this.bB.x.M();if(t>=i.length)throw new mh("Column index is out of dashboard range.");return i[t]}setRowHeight(t,i){const s=this.bB.y.M();return t>=0&&t<s.length&&(s[Math.abs(s.length-1-t)]=i,this.bB.y.S(s)),this.lB(),this}getRowHeight(t){const i=this.bB.y.M();if(t>=i.length)throw new mh("Row index is out of dashboard range.");return i[Math.abs(i.length-1-t)]}getSizePixels(){return this.pixelScale.getInnerIntervalPixels()}onResize(t){return this.At.on("resize",t)}offResize(t){return this.At.off(t,"resize")}RB(t,i,s){if(s&&Math.abs(t.x)>0)this.zB(i,t.x);else{if(s||!(Math.abs(t.y)>0))return;this.VB(i,t.y)}for(const t of this.HI)t.panel.zt();this.lB()}VB(t,i){const s=sS(this.HI,this.bB.y.M(),t,i,this.pixelScale.Ci(),!1);this.bB.y.S(s),this.lB()}zB(t,i){const s=sS(this.HI,this.bB.x.M(),t,i,this.pixelScale.Ci(),!0);this.bB.x.S(s),this.lB()}NB(){this.uB.forEach((t=>t.line.dispose())),this.uB.length=0;for(let t=1;t<=this.pB-1;t+=1)for(let i=0;i<=this.yB-1;i+=1)if(void 0!==this.HI.find((s=>Wr(i,s.rowIndex,s.rowIndex+s.rowSpan-1)&&(t===s.columnIndex||t===s.columnIndex+s.columnSpan)))){const s=Xn(new Kn((()=>{this.GB(t)}),((i,s,e,h,r)=>{this.RB(h,t,!0),ir(r)}),(()=>{this.WB(t)}))),e=this._B.mh(this.pixelScale).gh(this.xB).setMouseEnterEventHandler((()=>{this.GB(t)})).setMouseLeaveEventHandler((()=>{this.WB(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this.RB(r,t,!0),ir(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.$s.js.Us(e,(t=>e.Ys(t)),{animationEnabled:this.oB}),this.uB.push({row:i,column:t,line:e,alignment:"vertical"})}for(let t=1;t<=this.yB-1;t+=1)for(let i=0;i<=this.pB-1;i+=1)if(void 0!==this.HI.find((s=>Wr(i,s.columnIndex,s.columnIndex+s.columnSpan-1)&&(t===s.rowIndex||t===s.rowIndex+s.rowSpan)))){const s=Xn(new Kn((()=>{this.HB(t)}),((i,s,e,h,r)=>{this.RB(h,t,!1),ir(r)}),(()=>{this.UB(t)}))),e=this._B.mh(this.pixelScale).gh(this.xB).setMouseEnterEventHandler((()=>{this.HB(t)})).setMouseLeaveEventHandler((()=>{this.UB(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this.RB(r,t,!1),ir(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.$s.js.Us(e,(t=>e.Ys(t)),{animationEnabled:this.oB}),this.uB.push({row:t,column:i,line:e,alignment:"horizontal"})}this.Ns.AB.Zs(this.uB.map((t=>t.line)))}jB(){const t=this.pixelScale.Ci(),i=this.bB.x.M(),s=i.reduce(((t,i)=>t+i)),h=this.bB.y.M(),r=h.reduce(((t,i)=>t+i));this.uB.forEach((n=>{if("vertical"===n.alignment){const o=e(t.x*i.slice(0,n.column).reduce(((t,i)=>t+i),0)/s,t.y*h.slice(0,n.row).reduce(((t,i)=>t+i),0)/r),a=e(o.x,t.y*h.slice(0,n.row+1).reduce(((t,i)=>t+i),0)/r);n.line.ph(o).yh(a)}else{const o=e(t.x*i.slice(0,n.column).reduce(((t,i)=>t+i),0)/s,t.y*h.slice(0,n.row).reduce(((t,i)=>t+i),0)/r),a=e(t.x*i.slice(0,n.column+1).reduce(((t,i)=>t+i),0)/s,o.y);n.line.ph(o).yh(a)}}))}GB(i){this.uB.forEach((t=>{"vertical"===t.alignment&&t.column===i&&(this.$s.js.se(t.line,1),this._B.$B(t.line))})),this.hB=this.engine.setMouseStyle(t.MouseStyles.ResizeColumn),this.$s.te()}HB(i){this.uB.forEach((t=>{"horizontal"===t.alignment&&t.row===i&&(this.$s.js.se(t.line,1),this._B.$B(t.line))})),this.hB=this.engine.setMouseStyle(t.MouseStyles.ResizeRow),this.$s.te()}WB(t){this.uB.forEach((i=>{"vertical"===i.alignment&&i.column===t&&this.$s.js.se(i.line,0)})),this.engine.restoreMouseStyle(this.hB),this.$s.te()}UB(t){this.uB.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&this.$s.js.se(i.line,0)})),this.engine.restoreMouseStyle(this.hB),this.$s.te()}setAnimationsEnabled(t){return this.Bh=t,this.getCells().filter((t=>t.panel instanceof Jc)).forEach((i=>i.panel.setAnimationsEnabled(t))),this.setAnimationHighlight(this.Bh),this}getAnimationsEnabled(){return this.Bh}getCells(){return this.HI.slice()}dispose(){return this.fs||(this.HI.slice().forEach((t=>t.panel.dispose())),this.eB.slice().forEach((t=>t.dispose())),this.Sm.slice().forEach((t=>t.dispose())),this.fs=!0,this.vB(),this.At.emit("dispose",this)),this}onDispose(t){return this.At.on("dispose",t)}offDispose(t){return this.At.off(t,"dispose")}saveToFile(t,i,s){return Uc(this.engine,t,i,s),this}YB(t){if(this.aB){const t=this.$s.Jt.Ci(),i=t.x,s=t.y;this.uiScale.Gt(i,s),this.pixelScale.Gt(i,s);const e=this.uiScale.getInnerIntervalPixels();this.pixelScale.es(0,e.x).hs(0,e.y),this.At.emit("resize",this,e.x,e.y,i,s),this.nB=!0}this.rB&&(this.NB(),this.rB=!1,this.nB=!0),this.nB&&(this.jB(),this.nB=!1);for(const i of this.HI)i.panel.rh(t);return this.eB.forEach((t=>t.le())),this.eB.forEach((t=>t.rh())),this.Sm.forEach((t=>t.le())),this.Sm.forEach((t=>t.rh())),this.aB=!1,this}Rt(){for(const t of this.HI)t.panel.Rt();return this.pixelScale.x.Rt(),this.pixelScale.y.Rt(),this.uiScale.x.Rt(),this.uiScale.y.Rt(),this}zt(){for(const t of this.HI)t.panel.zt();return this.pixelScale.x.zt(),this.pixelScale.y.zt(),this.uiScale.x.zt(),this.uiScale.y.zt(),this}translateCoordinate(t,i,s){return Yc(t,i,s,this.pixelScale,this.$s)}addUIElement(t=au,i=this.uiScale){i=$c(i,this.pixelScale);const s=jc(t,this.FM(),this.uiScale,i,this.fB,this.Rs);return this.eB.push(s),s}addLegendBox(i=bu,s=this.uiScale){s=$c(s,this.pixelScale);const e=jc(i,this.Dm,this.uiScale,s,this.km,this.Rs);return e.setDraggingMode(t.UIDraggingModes.notDraggable),this.Sm.push(e),e}gB(t,i,s,e){return i>=0&&t>=0&&i+e<=this.yB&&t+s<=this.pB}mB(t){const i=this.xB,s=i===rh?0:i.getThickness()/2,e={left:t.columnIndex>0?s:0,top:t.rowIndex<this.yB-1?s:0,right:t.columnIndex<this.pB-1?s:0,bottom:t.rowIndex>0?s:0};t.panel.Qa(e)}BB(){this.uiScale.x.Mi([0,0]),this.uiScale.y.Mi([0,0]),this.pixelScale.x.Mi([0,0]),this.pixelScale.y.Mi([0,0]);for(const t of this.HI)this.mB(t);this.$s.te()}}const hS=(t,i,s)=>{const e={...t,columnSpan:t.columnSpan||1,rowSpan:t.rowSpan||1,disableAnimations:void 0!==t.disableAnimations?t.disableAnimations:!s};var h,r;return e.rowIndex=(h=e.rowIndex,r=e.rowSpan,i.numberOfRows-(h+r)),e},rS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAACXBIWXMAACxLAAAsSwGlPZapAAAE7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNy4yLWMwMDAgNzkuMWI2NWE3OSwgMjAyMi8wNi8xMy0xNzo0NjoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIzLjUgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMi0wNy0yMFQxMjowODo1OCswMzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjItMDktMDdUMTU6MDc6MjErMDM6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjItMDktMDdUMTU6MDc6MjErMDM6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjIwMGQwMzM2LWEyOTktZjU0YS05MmYzLTg0NzlmNWM5MzEyMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyMDBkMDMzNi1hMjk5LWY1NGEtOTJmMy04NDc5ZjVjOTMxMjIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyMDBkMDMzNi1hMjk5LWY1NGEtOTJmMy04NDc5ZjVjOTMxMjIiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjIwMGQwMzM2LWEyOTktZjU0YS05MmYzLTg0NzlmNWM5MzEyMiIgc3RFdnQ6d2hlbj0iMjAyMi0wNy0yMFQxMjowODo1OCswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIzLjUgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ptd9sFgAABOuSURBVHic7Zx7dFXVncc/55x77r1JIBBCSIhAkiYoQkArUhCrtrRVBHWm1WpptdbxMV1o26mOnXb6sEttq7aOVjtabWdq2/FZ2ooMY2tFK1YlgLwfCYQYkEdISEJCEu6957Hnj98+9557c8NjtY6sWfzWOuuce84++/nd399v/377XEMpBcAll1zCEFIEXGkYxidM0ywxDAPDMLISBHn4vo9SCqVU+tr3/fSR+9v3fTzPw/f9d5VSi5VSS3v6DL70qX185fN7YWCoKg0hBvx59zfZ0z+DiJk4zpffcxkNXIf0pwJeBt54X2sE44D/BD4PtOl7FcAvgWuA9uPJ7KqrrkpfR46S9gzTNH9pmuYZpmlimuYgUAFpMJmmmQaMYRj4vg9AAMbgdz7xff9GpdQS4Dql6Aw9GgZYQM9RW2aAr47WpPdN5gB3AY8DhcAS4Ebgt8g4VCGD2w+MAlJAn363DDiAALIUSOh01frcodOV6PdGAHv1vQ8AXcDBUF3G6XSTgTqddyD1+l4MOAXYg0yGglC6QmBkqIxBkh4Fy7Jyn401DGOJZVnjLctKgyofW4WPgIWUUscEqCAPANfj0oGk9RQwF+noawEDeCTvi2bo2oDGzktpP1xPxEwesbz3SWYBvwO+rH+PBc4DmhHWiABR4B912krgnxCWuxeoBTzgBeDbwBeA04A48BDwH8Bv9HsbgO8C9yOgjOp3lgI/A2YDvQh4VgBuqJ6nA+XAkwgAnwD+AvwQOBsB9+/08fhQjU0DyzTNrAeGYXwjANVQwMoFVC6YgrRyMvSRLb6ClGuQchSjhif46FkHLvzkBZ1vkWIa8LTu3EPZlRNmaj14Pnv7P4hpeHgqyu6+GRiG0m0/4eQMoFGfJwEfQgD1K0T1PA7cgoDhXgR0ceCrCGOMBq5CQHOJzuNfgGnA3cBLwFTgDgQMv0c64nbgIgRodcC5CHv6Oq/ncuo5C/gTcD0wAXgFAd9IhC0vBoYjQB5S0sCKRLJUSJFpmpdZlkUkEiGsBvMBK2wzBWnC6XzfwPMVGCoLwEqBaSjOPrWXOdPb+ci0TsrHpcBjJoovE+XhrLmEdFVP/ym82XYbnYm69E0DpZnqhARVFBmksQiguoCbgK0Iw/ybTtcC2MAmxAT4HjKwqxDmmgt8CgHNIeAfEBb7bwRohxBG8hHArQFu0GleAeYjTBSosH26rEAMBPi36zom9bs7EWa9BrgaAZ13pAan0WTbdvj+KNM0RwXAsixrEGDysVQ+UBmGQV8iwsVnrqeo0OapV2spiCZRymAgGeHSD7XwrRt2ilqzoKstwt2/ql5dEPUerq/rZ2pVP7atQIGvfOx4BVsPf4Oe5Fhs83it+/dNJiFGcT1iswTTZRRiI92PgOzbiB3WBExEwFGDgOpB/Xw3wnxjgOd1useAzyJg8BCAbEXUXZDmfuA24IvAu8A5Ov+1oXqW67p+Ved/DcJWTcBbyAT4JrDuaA0eCljKNE0ViUQGMRYMVoFiV/kYhpcFLMMwSLkRRtjbuGH+dgwjxrJ14+g+ZGFaJl7qAJfN2i3d4MO2HUX86+N1bGwpwDIVv10OhTEfwwCFwnUcPn3lAiZPHott9pNPtZ6gEgd+gcz8sHQBlwJfQwzxWxFjHoRZtiPgeAP4L8SWAlGZX0NWc1v1vX5EtYLQ9jXA13WaVQhr/ghZCH1S5/1DhLUCGQE8gADvcgRUd+ln3Qij3n8sDTYCw/n6668P3x9nmuZm27aLw4wVSLZdBYeTYKgU4OF5XuBCwFcGTduaue/6Vcw5zwUFz71UxyNL60kM9FI9aiPPfK8DTNi6Yzi3/HgKnT0mMdtZrRQzpCwpM5VyqKmp5uqrr8b3vbTBf1Lec/k7hOWqERX45lAJw+6GtMFj2/YxHQGL2bZNxC6gqyfF+RP/zDmnbcfxY5imiWVZ2LbNxs3vMO+DG5hzvguHgRRcOruV2opuWlr38pk5PTKPDFj02il09MQpjPtARqWaZnDArFkzsSzzJKj+b2UjYuBfwRFAlStDGe9pcORjLNM02d/Rx+6d6/n8R1dy1fwetu6YwBtNkzENWUW+va6REnszX79uQExAAB8KRrjMnriBFauiXDTbARcOdtmsbBzFsLiHYZh6ZZcRx3Goqamhrq4Ox3GOu2dOyl8lLfo4LhnSjxUAy7bt9DPLskgkkqxe24zT08CdN7RwzgwgCTVlbZSPPER3/wgaGzfzbutWXnygj8JiJWwVSALmn9NDaXGMgiIFJry1ZTT7DxYQt1N4nthmYVYyDIOZM2diWRaed8TFyEk5QeSIwApUXjQaxfM8du3aw8o1Wzmrags/uHU/ZeWkwy7xohT143fz0+c7Wb1qI9//4gBnTXcyvmMDMSk9qCjz+fuPHRbfbwSWravANBlk+AO4rsuECROora0Ns1UR8A1Ekf4AMSzD8jnEH/ME8PZR+qAcMYTfAX4yRJpPI36lx8leng8lBvDPiOf6Po7goT5O+SCymhuNuBQMJCLxKGL/1AHfRxYFf0tZCJwK3EMm9APSvuHIqjFLzQzpIA3bSr29PWxpfIe9e3Zzw9xmFl6+X5oUZiITqkaspqFhGBfNcrnlswOZWJ+BrEU8XbyvDxve3VPEhndKiNl+umphxvJ9n8LCwly2qkOWvYcQ52Cu3I74Y54/Soeh090KLGJoYH0FcSz+8hjyA3Ek3ou0/N5jfOdIUgD8O+J2yJXNiJP1AaSHv/03KC8sFnAn0qa7QveDCMF+neYeyITihgysGYaB4zh0dHTQ+m4ncfMA9y9s4sNnd4jNlBulcWByVQ+zptjcs7CPSFRJRAsgBo8+PYyPn51gYo2b8eJY8Nqmcg4NRCmIJhlKy0UikVyDfbI+v40sx8NiIt7nOLJcDqQAiXEpMvzZhYQwQIzUEn0dMGAE8efUIMv5XmRJ3od4ooNKGfpZQKkOstzvRmb4MOmFdNkpcqMJIiN0mUE6R+f7IAKq3QhTbyMTyjiAMEccMa7jup0HyTgxLZ13IAYy7cPUMFKnAxndbkQj1Ot+CZh6GBJemqnTDUPY/grEnwaEVoVB6EYfllLK6unppaPLYVp1Fw/d3MCHp3dIVfKF/jwYORx+dcdBJtemMqCKw7pNcW5/uJglbxRI9+qS3cMGyzdUYEcGZxhWi5WVlbmMeqY+b85Tk8AZeC0ChmJEVbQgzsmdupP+gHRwAKzvIAPXBLxIJoTShHjHi5AQyCPAdJ1Hi36nFViPOClBQiZ3AucjIPk94tTcjfiIGoGf6zzR+b2k67YH8XJvRlR0DeI9d4HPIP6slUADMnGayUy02bqMFsTrPlff/5i+Hxy7dP1v088rgNUIYIP+uRsJA72O4KRe1/123TcNul9ORQLqY8KDkB4t04qnD9u2I4qInXKjXDy9ke9e8yqnlPdlwDKEGEDVeDczT0xwEhZPvX4ew4tH8tzLNskeU0qNwNbWkTTvK84LrKPINH3OZ+9MQWaUq6u0CPHD7Edm1ItIR6aQQZ9KJrD6W/3eXIRxNur3QTr+h8CvgbN0Hi3AU8hAn46wCcAMZFfBQWQqzUZY5DfAYgTs1yNquAoB1ScQxnkMAWo5MsiXIj22mqG32UzR59eAZxCn6TQyarENAcp39PGkrt99iPe/WvdZC+JErUScqOsRAIFMxB/p/msELgD+iMRzb0FYKy1pYJUUdlNS1M3weC9Jx3Ys0+Wa85dx3YWvE4u4GZIPS4zsHQaQnc6G59+oZ3vbOD50Vh3Ne4t4eaUtZG3AK+srSTkmxlHiezkLizgSdgDYkid50MmvAxciA/YKMthfIRM8Xa1rPwkxrq9EvNQ/DYpFGCro2KeRQfkDEuUH+BbCJjfq34FqCRhkFTJghcCrCIsu0PUBMSq+iQzubcA8XccgzNKIqBw48t6tYKLdjgD2i6H80e14EgnLrACeRbbaBBH7oD+fRmy1TsTMeJbM5P2xbv8KhFWfQQBZp39nBbPTNtZXL3wUDEi5Ud7trBwbtxNWdeVuAUq+cS+EJS8VUjvOYfJEZzDwbGjeOZrnG+qxrQSWXUht7USe/OMh5s9J0t9rs6JxDNGI0Fuu0zPw7kejUSoqKsKG+wRgPGIjbMtTs3p93gxcpq+fIFPD2fq8FrFNRgHLQu+fps8b9XmWPjeG0gTAadXniaEyg+cKAf55+l4wCUydPthTdTECyPDCYDpicOxEGA1EDeUTE2FLBxlgyABlPWIn/R4Bba5sR2ypM/XvnYj9OFnXDWRChtsayAsI0xaSZxWa8bxHXGzLpSg+cNGk8c2Lqst3W2llkSsFsPiPMRbcMZJX345J1XNydVIWv1g2k0TKwjR8XNdlXGUpze21tO6ATe+UsvdAIZbpp0GVe8691jKJjJE5Ok/tApupiRy9ryVgtA2h62BWGvqe0u+DqErIAGM4Yld0ILZKOM1aRM1VI6q3DXERhMuoQNRQM5nFgE9mLAoQltuDMGl4gHP1A4jKrEFU0X59L2CwBkSlzUPU1hRk4gQM26zPZ+jzdsSQadflluj0XeSfxAmGcG1kVoUyfhaKB/EZly8xADFYv30Sd/66iFRyF29sjHGz05edxobFf5nK1l1jiNmH8X0dtPY9ho0Yz5KGNvrdMag0Ew8GVcBYsViMWCwWBlighgL18hpiL3nIkvwDyIDtQtTdFUhUfhZC8R/WHdJMZhYH7DQa6ch9yMCaZMB7D2KHbUaW3m+R8dKdqc/r9Ps2MkgKsccgw3jB7swWXU6TbtP/ICpyOLLSegux9xYhKv1zCGB2IRPARFTXRp1fIxnrNgDzZv0eCDN/UqeZHmq3gUyMPjITJZARZFbKDyL21Yscg+S6G8oQwy2/xGBN00SeeO0ipk4boKPjAKu3DNCx36KszJNuiMIOrQKjdnLQ/veiuOKVTfW4niJuu2nQwWB28jyP4cOHM2LEiPAu1BJkJispjQt15+xDBsFH7AMH2Q1wGmJn3Rh6Zxuy3A9AGLDJOKQVq8iozp8g20jmI53fqc+B7QWiUrsRVpurnweujgqEuYKwSOC6WKXrc6Ou5xn6CNg4YMifI+C+FlGhAaMaCLDG6fxW6vQ2Mo7tyArwGWRj4DSE9ZRuY69+ZxRiizWQvX0ZRP0+ijiIv4So7GMCVnp3A28bIF7d/IHGGLzdWMvPXr4QX5nEYyatra38eXkDT9/Vy/yPJSAJjmfx3Sfn0rinlKiZxMv+aALf93BchfJ9lArthMhK469WSs0I9notWLCACRMmBJ73AsSAz9WRDgKqUt3R3Tpt4IsqQlZYd+vOXoAMWBRRIZ7OdzQCjHAnlyAD2Y8MfCmiAgI1VUEG3MXITA+eVyIDGXyYEDzvROxEU5c7Rj+7D9nxeSWyigwkioDA1G03dZ4xXb8DyMCbOi+lnyudplTnE4ASRJ37utwkQ3++Uqbz6DpCmiN+THFq3jdisGpLDY+9NAdf+UQsh0TCoLKyknHja3h55Sbmf1ya/vyyejbvKqMgmsDzsr/IkUNh4ON6Dq7r4nkeiYT4MaLRaNZeL4BkMklDQwMTJkwIanOYbMderuzWZwPxr1xAxrVQhHT293WaAznvJkLvhyU3ZJTbueEwRy/ZTtvccE74eS2yeo0iE6MIUYV/QnaFhiWVU04gDhmVDAKU3HTJPPUIS277cqXjKM8HSS6w6geliEHDpmoe+cMFKOUTsVzc0HbhqVNOZfOudvz+d9jZMZrfrZhCNJIcBKgwYFzXpby8PB3knjRpEu3t7SxfvjwrLch2nm3btrFz506qqqqOZ3eDiQzQBjIzfA9iJx13tP49Eg9Zpgfsq5D6PsuRJ88JL7nAOj3rVxzWbqnkxy/Mxscnarm4KnvDXzwWIVY8mTVN7SxddxaHEwbRiJNWgfmOZDJJTU0NY8eOpbS0lPXr1zNv3jzWrVtHZ2dnVqwwCC2tWLGCqqoqjkM8/jZxuvdSWpGPRf7fSSTnui79Kw5rtpRz36JzSHk+MTuJ68lqN7xF2fM8ioYV87NlF9DVNwzbSuJ5+T9OzWWtRCLB4cOHaWtr44UXXsDVVBhmLKXUX8NaJ+V9krBfpBK0m8GG1RvHcNeTM+gbUBgqheO4OI7YRcE5ODzXof1gEb7nprcmZ21Rzvny2XGc9AeuixYt4tprr2XNmjV0d3cHn46Zud8rplIp3nzzzbwfzJ6UE0/CwKoGirDgQFfs9e89Pe1A34CBaaSygOR53iBweZ4HyskLptxVn2VZlJSU4Ps+lmXR3t7O0qVLWbhwIUDwsWsiF1i2bdPY2MiOHTuIRnM9siflRJMwsCQMYLP0zU1l89o67bWWmcJ1sxnIcZxBrDTUkctWjuNQVlbG5ZdfTl9fH0opbrrpJlauXIlSitLS0gBYr+dTo77vs3jxYnp7ewftHzspJ5aER+c8YDmKK9c2j+xTvvtwWN3lMlYYQOHfYXbKBZdSip6eHqqrq7nsssvYt28fruty8803U1xcTH9/P0qpXqXUY/kqG4lE2L9/P2vXrj3JWie4hI33Ncj/CgwoFAq1xPO8O5VS3wlWafm2DgeSG4oZ6vP7zs5OHnroIYqKimhpaSEajVJZWUlnZyf9/f0JwzC+QM4WjKwKRyI0NTVx7rnnDtobf1JOHAkD64HgIoCMUuoO13W3GIZxq2maUw3DKMj3xyBhyQesXHC1tbXheR6madLf38+WLVt6gb+YpnkX2bs+B4lhGCSTyaz/hjgpJ578LzXVOI5QBFhrAAAAAElFTkSuQmCC",nS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5goDBwssgK9G3QAAEq5JREFUeNrtnHtsFNe9xz8zsw9717s2Zv0Ib0LBJEAOIQkl0Eua3Ju2N6LcNmracG9VqWpVqWrzb1QpUh9qm6pKpVaR2ihR1fSPKgVKm5oktzeBAMmlkIILHGxMCGAMfuHX4rV3vd7HzNw//Ju9441NTJq2AXGk0T7mzJkz5/c939/vfH9n12AW5aGHHlpqmuYi0zQjxmRxAQzDwHVdAFzXnXI4jvOu1xkOw3Ec13GctOM4nceOHeviBi1a6zrgDsABTKBVKTXwT+7TfGAt8CellCPffQRYqpTa837bDbxXhS1bttxrWdYK0zQLlmXlAFfAVQKU9+oHkWmaOI5TAp9hGFMOrwhIDaAWWLpmzZq21tbWY975tra2EFANJFevXm1f59haA8wF2uWZPqG1blZKjWmt5wEx4LxSqqi1rgXGlFIFrXUIqFBKjYrh5yqlhrXWVcBCoMd3LgpEAVMpdVlrXQPcAnQppdI+QDUBw0ACwAOVlFogqLVeDEwopfrlXqbvPjEgrJQaumZgbd26VVmWtdKyrGHLshzTNEuAmomtbNt+F5gcx5m2fcMwsG0by7IAcplMxrp8+bJatmzZ2PPPP9+1cOHCNZlMJgK8Dbg3AGnFgf1KqUExzmKgRmu9FFgGZIEmrfVeQAFdwDngE8Jwu+WalVrrd4BbgXFgqdb6mFLqMvAQEASOa60rgI8AGanzFjAKfBrIAY3AAuB4WT8rgBpgKdCgtT4MhICVwMtaawv4d+AIcG3A+sxnPlNlWdaKQCAwYlmWa5qmYZpmCSzloPLYygOSx1Z+EE1MTGBZFpZl4boupmlimiYDAwOk02mjsbHR/uxnP5vcunXrbbfeeus9uVwuHQwG32hqakrdAG6wQsZ7kdZ6DrAE6BF2aQKalVJ5rfWnxIBJwNBaVwN1QKfW2pS6F6VOVsDXKGBLC6heEhb8L6BT6iwAbgcmgLTn5rTW/wn4mcwUUB1VSp3VWi8A7gIOiWcBuAcYUkp1XrMrDAQCtwQCgVAgEJgIBAL4QeUv5THUdO4uEAiQTqeprKwsMZppmgCMjIywfPlyHnzwQdatW2c0NTXZhmHE2tvbL23atOngDRRi1Yhh4uJqssCfgbuBlFIqL/WCwkJXgNXAYuB1YI4w1xDQIXFRh9Q/JyBdCgwKqBrlfpelTrtcuxFoERCF5F7+iVsNVCqlzsrnSmHLJJDSWn9M6rz2vmKsUCgUDAQCBAIBLMsqsYtXPKbyx1KmaZaA4xXTNEmnJyfEt771LV544QWOHTvGnDlzyOfz2LbN448/zqpVq5iYmCCXyxlPP/201dzcfOEGi92XAwWl1P4yJusClmmt7xX2soB3gLC4w6NKqUsSUN8OPCPMNgrUAyMSIyWlDQ8kKTlXJyAuSqx0CdgkrnQ54Cil/MCqF/f8McCWOgeVUrbW+oqAe7tSqnC1hzVnOhEMBp1gMOgGg0FCoRChUIhgMDjl8IAXDAZL7s4DogfGSCRCR0cHn/zkJ1m/fj33338/tm0TDAbp7e1l5cqVLFmyhKGhIVKpFN/5znf49a9/7RSLxegNBqxLwNHyL5VSfcAeiWFGgZclkC4A/+OxC3AGeFEplZXPeyVOmiPXIax0StrNSrseC43J938FTgpw24D/LetSCnhZmK4C2KuU6pBzc2Ul2/NeD2vMdOIrX/nKymAwuC4QCIz5XaF/Beg4DuFwmOHhYYrFYsnV2bZNsVikurqa/fv3s2zZMp599lnGxsYIh8P8+Mc/5vjx45w9e5annnqKLVu2MD4+zo9+9CNefPFFFi1aFDMM4+iRI0fOcrN8GOLDlSKTjAL7fG77fTFWiY3KGcqyLKqqqqitraW9vZ3Kykq+/OUvE4/HyeVyGIZBIpHg5MmTDA4O8t3vfpdisUg2m8WyLD7/+c9z+vRp5s+fz/33308ul6Ojo4NDhw6xYMECAoFAaXFws3woSo8w557ZgOq9gnc8NxgIBEorQcuyqKmp4cKFC+zbt4+NGzfy2GOPUV9fT0tLC52dnTQ0NHD+/HkOHjzIs88+y5IlS+ju7sayLEZHR1mxYgX19fVs2rSpBMa//OUvZDIZbrnllnfFaTfLP7copcY8V/o3C6SWZZXA5b2PRqMUi0VeffVVWltb+epXv8rXv/51stlsaXXX0dFBX18fzc3NbNu2jc997nP09vaWAn/btslmszz99NNUVFQwMjJCoVCgpaWFaDQ6RZ64Wa7fclVgeYCqrq7Gsiw6Ozt55ZVXcF2XZ555hs2bN3P58mUKhQKhUIimpiZ2797Njh07WLRoEU8++SQjIyPYtl1yofl8nnQ6TVNTE4VCAcuyOHnyJOfPn6e6unrWoNJaN8hS/ZxS6kzZuSCwCSgCh8pU5enamgesA/4qwfR0dT4q43X4vdqT+lXAx2T5/9cPKNYJiuCZEAnBASLAWdGcNotaf/wDjrEMYIN8fEsp5frOzZeVbK9SqviewDIMA8uyqKioIJ1O09rayltvvcWGDRv4wQ9+QHV1NV1dXSWZoVgsUl9fT19fH47j8POf/5xoNEpvb28JqJ4rdV2XTCYDQDQa5ciRI+RyOaqrq7Fte7bgmidaznRAqJRUR/9sQCBa0UrRlaYbWFOAd3GW7SHSwaJrdSFXMW4t8ICIocMidHq62GkRYO8G3vo7EdBdAmBX+lMJrBJQ5WTFeHw2KR3XdV0GBwdpa2tjcHCQxx57jC9+8Yvkcjn6+/un6FqeWHrPPfdQV1fHhg0b6OubtHltbS0HDhxg586d/PSnPy1pYKFQiKGhIU6cOEEsFrvWh40Cg0D/NOfs8nSDgKNWFiyODEhWcl+VQC8Q0VoHRPO5ItfFBKRZEQgbRR+ypT1bDGwAw0opL5+ZA94Eun3AsHyr8azELuXqvDcQjtgnKcy7WTSpN4G3RcsyAEMp5Witb5XUTVZrnZDnLPVHax0Wkdbf3zFPvpA0zRy5zgRySqkrWuuIpI4ywKjv+efI8xTkc2hWrjAcDgdyuZxx7tw54vE43/jGN1i/fj2pVIpcLvcuUAEMDw/zyCOPEA6HGRwcxHGckv71y1/+kjfffJNvfvObrFq1iuHhYaqqqjh8+DDd3d0kEokZc4ozUHO1pCLSMzDQfaLjDEtaYqPM7qIYPSKz+5QMigv8q4xJUWv9tuhOd4pIOADMZzKR/KJc/28ysF4Z0VoflMTscmHUnQLqB0UXMrxZrrVuVUppeabbhRVCYvys3OMPMokWAO1KqZO+oNrl/3OocVHRbxdhtbw/q4B/ERAYAp6s1vqIUuq8uNdPyfi4gKm1PiKT5zaZpIuk7d9L/7IyEUJl6v3MwHIcx0wmkzQ1NfGFL3yBhoYGhoaGSmq7Pxbz3Jdt24RCIRzHIZ/PYxgGsViMffv2kcvlANi+fTs/+clPME2zFLS/j2C9SgZyptVKjbz2yYx7SDSYN2TwF4rRBwSkCXGpZ0Q4XC0GOgNoGehlwGExzKAANS/gHBfQ3c3kToIhmdF5ue8cmQjtwAUByjpxv1prvUhAeo7JhPuEANiS9yuFwS5eZUziUueITByvP4ulP6fl3h6jeq51NXBeQFwF/EkmyzZR4dsEOEuZzBeOSXtV8qxvSz9X+b3HjDrWxMREbt26debXvvY1amtrSSaTUwBg2zbRaJSKioop6Z1isUixOBnDVVVV0dPTw44dO1i6dCl33nknL730EhcuXKCuro6uri7a2tqoqakptTHLUi0Plpoh5omLC5kQYc8EXldKnRXVuCAzMylt1TC59aRbZu+YGCAn6Q6PGc4ppby4rV7uf0Yp1cVkohcf0OPAFWGVWjFOh1KqRyn1jhg/JQH5XWKUV5VSHUqpXpn0KR8IRr30zQwxYC2TyeWzSqlLPhBmfUp8WPpdJ+yZFRfnjaktz9Erk+q8UspjOEfavqyUcsWNt8gkqQRaZ8VYDz/8cH1DQ0Petm3Gx8ensJRt2zQ0NHD06FG2b9/OE088UYqxPGU+GAximia/+93vSgnoO+64g87OTv74xz/yxBNP0NLSwvDwMA0NDSXWm2WJy8AkpxnkChmkYVk5LQAueVtVfPmwlOS/5spMz/hWXrVAUik1IfUbgQFfvBITYF8sa7MADEqcFhcG8oCRFaAje6SqmUwiR+XaFl/7UbnmrLRZKUYfv0q8GZ+hPz0yJv8h7aTleQ0ZnyFfH8eAoFJqHGj2jUeDhALl+tawjPN7K+9tbW2h06dP39fY2LjQtu1MPp+fAirHcairq6Ojo4MvfelLbN++nZGRESKRyFTLx+O88cYbnDhxgkQiUVLeV61axfHjxxkYGODUqVOEw+EpbFX+ehVgTQB1EpSWn6uS2Z0Tmq6UVYw3u+cwuXvAy39N+Jgm5rGN1J8j342X3SNSFlfMATJKqYy0WeG7h2e0tO8eETmf933nB0qVMJAj7FoJ3CqgRWttyLN49SNljFYj16fErTcwuRdsl1LqD+Li475r5gAjAirKnivmY7b3rWM12ra9zLbtwUnPZ0wBVSwWI5VK8atf/YrR0VEcx6GlpYVt27YxNjaG67rEYjF6enpobm4uiZ6u65LL5UgkEmSzWZ5//nkGBgaIx+PXBCoZzHkyg5cA9VrrjBhCC5gSTO4kcGX3wF3Ap7XWw+LSLN9MXSzGTfuAVudL/noDsEhrvQU4KEb2YjxvVi/wgc/bDeox6kLgsi8dUi/ni0qpca11L3Cb1jou/Qj4gmMvAd0A3MvkvitbSKFCa/2iAMtbzCDgW+i7PiostUI0O0fas2VxE5SY7OR06oA3TtK/E+KqrzlXGBXjvEtKiMVijI+P84tf/IJQKMTDDz8MwOHDh0tbZ0KhEIZhsGvXLsbGxohEIti2PWWHqWVZHDhwgPHx8ZKu5e3r8h8zpTF9gfZpeT8urJOX4x0JsFFKHZLVYZ+4hgqJNTyGugKc8Yl7jrigfrk+KfpWv1xryj3e9rmBkAD1HflclEDdM1q/BMheyctq1GOB/5ZFQMrHTrYHFBGA90j7Y3JdRoBbkD6f9k2WsLz37nlSJp0nKSRkvNokVopIbHVpGnc3KJNpUOrNapVlTOMK18sKKF0Oqmw2y3PPPUdvby+JRIJ4PM6uXbsYHx9nz549BAIBYrEYe/bs4Te/+Q1z584t7YKwbXvKa6FQKLXt/16OmG3bR48ePfo3724QF1gQQAaBj8oKZ5eA5u+9M8DwK9XTnLcEmEXpX4VIEy7wB7+a/c/q4weV0on6lqQ4jkM8Hi8xVU9PD4lEglwux9jYGA888AC//e1vOXToENu2baO9vZ3m5uZSzFX+qxyPjQKBAMlkEsdxyGazJcabO3duSZr4gNTqrWKkvBjOAt74R4DKpzVdrSwTqSElzFMhHmP/PwJUs+zj3wYs+UVMVGYPjuNQU1NDJpPhZz/7GT09PTQ0NJTYJp1OE4/HWb58Oe3t7ViWxY4dO0ilUtTV1VEsFt8FKM/tZbNZNm/eTDKZZN26ddTX17N//35ef/11qqurP6htM1nggG+iGBKgjn6I8rX9TG7oy/sU8X6lVI7ruASmER4rgIIHqnQ6zVNPPUV3dzeNjY3k81O34ySTSRYvXgzACy+8QGtrK7W1tVNANd2RyWRYu3YtiUSC7u5uent7efTRR9m1axexWOwDAZZoN50fZgPIqu26/7HIbIAVdBwnV1NTY2QyGfeHP/whly5dYv78+SU1vXylWFlZSX9/P+fOnSMajZaCdD9blQPLMIyS8r5y5Up2797N3r17mTdvnlf/5r6Z67iUrwpjrusSiUTCyWQy/L3vfc85e/YsdXV15PP5kqpeKBRK723bplAokM1mS9uXve+nYyrLsrhy5Qqjo6MkEgn27t3LwYMHefzxxzl8+LC3e9Rwb24hvaGAFQVikUhkYOfOnWeOHz9eWV9fPwVIHmjK33s48INqOnClUinWrFnD4sWL6evrY+PGjezevZuLFy/y/e9/n66uLi8Wm7hpnhvHFd4SDodHe3t7//zkk0/aGzZsuK1YLAYMwyjO9BP5KUpamQ413f84dHd38+1vf5tTp07R19fHxz/+cerq6njttdd49NFHXdu2KxzHGXddd+CmeW4cxgqGw+E/3X333TZAMBh8u1Ao1Ni2bRSLRdf/Cxzv/XSHn6HKP0ciEfbv38/atWuZN28ezz33HLW1tTzyyCPuwYMHrUAgEHNdt/3kyZO5m+a5fotRJjckVq9ePeW3+Pfdd9+9pmmuME2zYJpmzvsTj+lYqzznNx1rGYbBlStXqK+vZ2Jigu7ubrexsdGorKys6O7utiKRSJvW+thN09xAwJqpbN68ealhGItM04yKKywF1v7/cbgauDxgeXHYxMRkCBUKhYxsNusWCoV0MBjsbGtr67ppluu//B9N0zw2U/fnYwAAAABJRU5ErkJggg==",oS={translation:(t,i,s)=>[1,0,0,0,0,1,0,0,0,0,1,0,t,i,s,1],xRotation(t){const i=Math.cos(t),s=Math.sin(t);return[1,0,0,0,0,i,s,0,0,-s,i,0,0,0,0,1]},yRotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,0,-s,0,0,1,0,0,s,0,i,0,0,0,0,1]},zRotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,s,0,0,-s,i,0,0,0,0,1,0,0,0,0,1]},scaling:(t,i,s)=>[t,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1],translate:(t,i,s,e)=>oS.multiply(t,oS.translation(i,s,e)),xRotate:(t,i)=>oS.multiply(t,oS.xRotation(i)),yRotate:(t,i)=>oS.multiply(t,oS.yRotation(i)),zRotate:(t,i)=>oS.multiply(t,oS.zRotation(i)),scale:(t,i,s,e)=>oS.multiply(t,oS.scaling(i,s,e)),multiply(t,i){const s=i[0],e=i[1],h=i[2],r=i[3],n=i[4],o=i[5],a=i[6],l=i[7],u=i[8],c=i[9],f=i[10],d=i[11],g=i[12],m=i[13],y=i[14],p=i[15],S=t[0],v=t[1],b=t[2],x=t[3],M=t[4],_=t[5],A=t[6],w=t[7],k=t[8],C=t[9],T=t[10],F=t[11],I=t[12],P=t[13],D=t[14],B=t[15],O=[];return O[0]=s*S+e*M+h*k+r*I,O[1]=s*v+e*_+h*C+r*P,O[2]=s*b+e*A+h*T+r*D,O[3]=s*x+e*w+h*F+r*B,O[4]=n*S+o*M+a*k+l*I,O[5]=n*v+o*_+a*C+l*P,O[6]=n*b+o*A+a*T+l*D,O[7]=n*x+o*w+a*F+l*B,O[8]=u*S+c*M+f*k+d*I,O[9]=u*v+c*_+f*C+d*P,O[10]=u*b+c*A+f*T+d*D,O[11]=u*x+c*w+f*F+d*B,O[12]=g*S+m*M+y*k+p*I,O[13]=g*v+m*_+y*C+p*P,O[14]=g*b+m*A+y*T+p*D,O[15]=g*x+m*w+y*F+p*B,O},inverse(t){const i=[],s=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],g=t[12],m=t[13],y=t[14],p=t[15],S=f*p,v=y*d,b=a*p,x=y*l,M=a*d,_=f*l,A=h*p,w=y*r,k=h*d,C=f*r,T=h*l,F=a*r,I=u*m,P=g*c,D=n*m,B=g*o,O=n*c,L=u*o,E=s*m,R=g*e,z=s*c,V=u*e,N=s*o,G=n*e,W=S*o+x*c+M*m-(v*o+b*c+_*m),H=v*e+A*c+C*m-(S*e+w*c+k*m),U=b*e+w*o+T*m-(x*e+A*o+F*m),j=_*e+k*o+F*c-(M*e+C*o+T*c),$=1/(s*W+n*H+u*U+g*j);return i[0]=$*W,i[1]=$*H,i[2]=$*U,i[3]=$*j,i[4]=$*(v*n+b*u+_*g-(S*n+x*u+M*g)),i[5]=$*(S*s+w*u+k*g-(v*s+A*u+C*g)),i[6]=$*(x*s+A*n+F*g-(b*s+w*n+T*g)),i[7]=$*(M*s+C*n+T*u-(_*s+k*n+F*u)),i[8]=$*(I*l+B*d+O*p-(P*l+D*d+L*p)),i[9]=$*(P*r+E*d+V*p-(I*r+R*d+z*p)),i[10]=$*(D*r+R*l+N*p-(B*r+E*l+G*p)),i[11]=$*(L*r+z*l+G*d-(O*r+V*l+N*d)),i[12]=$*(D*f+L*y+P*a-(O*y+I*a+B*f)),i[13]=$*(z*y+I*h+R*f-(E*f+V*y+P*h)),i[14]=$*(E*a+G*y+B*h-(N*y+D*h+R*a)),i[15]=$*(N*f+O*h+V*a-(z*a+G*f+L*h)),i},projectionPerspective(t,i,s,e){const h=1/Math.tan(t*Math.PI/180/2),r=1/(s-e);return[h/i,0,0,0,0,h,0,0,0,0,(s+e)*r,-1,0,0,s*e*r*2,0]},projectionOrthographic:(t,i,s,e,h,r)=>[2/(i-t),0,0,-(i+t)/(i-t),0,2/(e-s),0,-(e+s)/(e-s),0,0,-2/(r-h),-(r+h)/(r-h),0,0,0,1]};class aS{constructor(t){this.XB=t}}class lS{constructor(){this.ZB=new Array,this.KB=t=>(this.ZB.push(t),t),this.qB=this.KB(new Map),this.JB=this.KB(new Map),this.QB=this.KB(new Map),this.tO=this.KB(new Map),this.iO=this.KB(new Map)}sO(){this.ZB.forEach((t=>{t.forEach((t=>t.sO())),t.clear()}))}}class uS{constructor(t,i){this.K=t,this.Et=i,this.eO=!0,this.hO=null,this.rO=null}}class cS{constructor(t){this.nO=!1,this.oO=1,this.aO=t,this.lO={K:e(0,0),Et:e(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),eO:!0,hO:null,rO:null},this.uO=e(64,64),this.cO=new Uint8ClampedArray(this.uO.x*this.uO.y*this.oO)}fO(t,i){if(!t.eO)return null;if(t.hO&&t.rO){const s=this.fO(t.hO,i);return null!==s?s:this.fO(t.rO,i)}const s=h(t.Et.x,t.Et.y);if(t.K.x+t.Et.x>=Number.MAX_SAFE_INTEGER&&(s.x=this.uO.x-t.K.x-1),t.K.y+t.Et.y>=Number.MAX_SAFE_INTEGER&&(s.y=this.uO.y-t.K.y-1),t.Et.x===i.x&&t.Et.y===i.y)return t.eO=!1,t;if(s.x<i.x||s.y<i.y)return null;let r,n;const o=s.x-i.x,a=s.y-i.y;let l=o<a;return 0===o&&0===a&&(l=!(t.Et.x>t.Et.y)),l?(r=new uS(an(t.K,{x:0,y:1}),e(t.Et.x,i.y)),n=new uS(an(t.K,{x:0,y:i.y+1}),e(t.Et.x,t.Et.y-1-i.y))):(r=new uS(an(t.K,{x:1,y:0}),e(i.x,t.Et.y)),n=new uS(an(t.K,{x:i.x+1,y:0}),e(t.Et.x-1-i.x,t.Et.y))),t.hO=r,t.rO=n,this.fO(t.hO,i)}dO(t,i){const s={gO:!1,K:null};let h=this.fO(this.lO,i);if(null===h)for(;null===h&&this.uO.x<this.aO&&this.uO.y<this.aO;){if(!this.mO(e(2*this.uO.x,2*this.uO.y)))return this.nO=!0,null;s.gO=!0,h=this.fO(this.lO,i)}if(null===h)return this.nO=!0,null;for(let s=0;s<i.y;s+=1)for(let e=0;e<i.x;e+=1){const r=h.K.y+s,n=h.K.x+e;this.cO[r*this.oO*this.uO.x+n*this.oO+0]=t[s*this.oO*i.x+e*this.oO+0]}return s.K=h.K,s}mO(t){if(t.x>this.aO||t.y>this.aO)return!1;const i=new Uint8ClampedArray(t.x*t.y*this.oO);for(let s=0;s<this.uO.y;s+=1)for(let e=0;e<this.uO.x;e+=1)i[s*t.x*this.oO+e*this.oO+0]=this.cO[s*this.uO.x*this.oO+e*this.oO+0];return this.uO=t,this.cO=i,!0}}class fS{constructor(t){this.yO=new Map,this.aO=t,this.yO.set(this.yO.size,new cS(this.aO))}pO(t){return this.yO.get(t)}dO(t,i){let s=-1;const e=Array.from(this.yO.values());for(let t=0;t<e.length;t+=1){const i=e[t];if(!i)break;if(!i.nO){s=t;break}}-1===s&&(s=this.yO.size,this.yO.set(this.yO.size,new cS(this.aO)));const h=this.yO.get(s);if(!h)return null;let r=h.dO(t,i);if(!r&&h.nO){const e=this.yO.size,h=new cS(this.aO);this.yO.set(e,h),s=e,r=h.dO(t,i)}return r?{SO:s,...r}:null}}var dS;!function(t){t[t.Fail=0]="Fail",t[t.Success=1]="Success",t[t.Resize=2]="Resize"}(dS||(dS={}));const gS=yr("font-texture");class mS{constructor(t){this.vO=new Map,this.bO=new Map,this.ea=gS(),this.XB=t,this.xO=new fS(this.XB.MO||4096)}_O(){return this.bO.forEach((t=>{this.XB.AO(t)})),this.bO.clear(),this}wO(t,i){const s=this.vO.get(i);if(s)return s.get(t)}kO(t,i,s){let e=this.vO.get(i);if(e||(e=new Map,this.vO.set(i,e)),e.has(t.glyph))return dS.Success;const h=this.xO.dO(s,t.size);if(!h||!h.K)return dS.Fail;h.gO&&this.CO();const r=this.xO.pO(h.SO);if(!r)return dS.Fail;let n=this.bO.get(h.SO);if(!n){const t=this.XB.gl.createTexture();if(!t)throw new yh("Failed to create texture for font!");n=t,this.bO.set(h.SO,t)}const o=h.K,a=r.uO.x,l=r.uO.y,u=-t.offsetX,c=t.baseline-t.size.y,f=-t.offsetX+t.size.x,d=t.baseline,g=o.x/a,m=(o.y+t.size.y)/l,y=(o.x+t.size.x)/a,p=o.y/l,S=[g,m,y,m,g,p,g,p,y,m,y,p],v=[u,c,f,c,u,d,u,d,f,c,f,d],b={origin:o,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:v,texCoords:S,packerId:h.SO,texture:n};e.set(t.glyph,b);const x=this.XB.gl;return x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),x.bindTexture(x.TEXTURE_2D,n),x.texImage2D(x.TEXTURE_2D,0,x.LUMINANCE,r.uO.x,r.uO.y,0,x.LUMINANCE,x.UNSIGNED_BYTE,this.XB.TO?r.cO:new Uint8Array(r.cO)),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.bindTexture(x.TEXTURE_2D,null),h.gO?dS.Resize:dS.Success}CO(){this.vO.forEach((t=>{t.forEach(((i,s)=>{const e=this.xO.pO(i.packerId);if(!e)return;const h=i.origin,r=e.uO.x,n=e.uO.y,o=h.x/r,a=(h.y+i.size.y)/n,l=(h.x+i.size.x)/r,u=h.y/n,c=[o,a,l,a,o,u,o,u,l,a,l,u];i.texCoords=c,t.set(s,i)}))}))}}const yS=t=>{if(t instanceof Rn||t instanceof Fg)return t.Ui()?"linear-highPrecision":"linear";if(t instanceof zn){const i={};return t.x instanceof wn&&(i.x={base:t.x.Li()}),t.y instanceof wn&&(i.y={base:t.y.Li()}),["logarithmic",i]}return"linear"},pS=t=>(i,s)=>s%2?i:i+t;class SS{constructor(t){this.FO=new Map,this.IO=yr("font"),this.PO=new Map,this.DO=new Set,this.XB=t}_O(){return this.FO.forEach((t=>t._O())),this.DO.clear(),this}BO(t){this.DO.add(t)}OO(t){this.DO.delete(t)}LO(t,i,s){const e=`${i.family} - ${i.weight} - ${i.style} - ${i.variant}`;let h=this.PO.get(e);h||(h=this.IO(),this.FO.set(h,new mS(this.XB)),this.PO.set(e,h));const r=this.FO.get(h);if(!r)throw new yh("Failed to get font texture!");let n=0,o=0,a=0;const l=t.split(""),u=i.size,c=.7*i.size,f=Math.round(1*i.size);let d=!1;for(let t=0;t<l.length;t+=1){const i=l[t],s=r.wO(i,u);if(s)""!==i.trim()&&(o=Math.max(o,s.baseline),n=Math.min(n,s.baseline-(s.size.y-1))),a+=s.advanceX;else{if(""!==i.trim()){const t=0;o=Math.max(o,t),n=Math.min(n,t-(f-1))}a+=c,d=!0}}const g=((t,i,s)=>{if(0===s||360===s||180===s||s%180==0)return{x:t,y:i};if(90===s||-90===s||(s+90)%180==0)return{x:i,y:t};const e=s*Math.PI/180,h=Math.cos(e),r=Math.sin(e);return{x:Math.abs(t*h)+Math.abs(i*r),y:Math.abs(t*r)+Math.abs(i*h)}})(a,o-n+1,s);return{x:g.x,y:g.y,isEstimate:d}}EO(t,i){const s=`${i.family} - ${i.weight} - ${i.style} - ${i.variant}`;let h=this.PO.get(s);h||(h=this.IO(),this.FO.set(h,new mS(this.XB)),this.PO.set(s,h));const r=this.FO.get(h);if(!r)throw new yh("Failed to get font texture!");let n=0,o=0,l=0;const u=t.split(""),c=new Map;let f=0;const d=i.size;for(let t=0;t<u.length;t+=1){const s=u[t],e=Math.ceil(f);let h=r.wO(s,d);if(!h){const e=this.XB.RO(s,i,this.XB.zO());if(!e)continue;const a=r.kO(e[1],d,e[0]);if(a===dS.Resize){this.DO.forEach((t=>{t.ka.o=!0})),t=-1,f=0,o=0,n=0,c.clear();continue}if(a===dS.Fail)throw new yh("Failed to create glyph");if(h=r.wO(s,d),!h)throw new yh("Failed to get glyph after creation")}if(""!==s.trim()){let t=c.get(h.texture);t||(t={vertices:[],texCoords:[]},c.set(h.texture,t)),t.vertices.push(...h.vertices.map(pS(e))),t.texCoords.push(...h.texCoords),o=Math.max(o,h.baseline),n=Math.min(n,h.baseline-(h.size.y-1))}f+=h.advanceX}l=f;const g=a(e(0,n),e(l,o)),m=[];return c.forEach(((t,i)=>{m.push({texCoords:new Float32Array(t.texCoords),vertices:new Float32Array(t.vertices),texture:i})})),[m,g]}}class vS extends Error{constructor(t,i,s){super(`Dynamic shader generation error\n(id: ${i})\n ${s?`when applying feature: ${s.idVertex?`vert: ${s.idVertex}`:""} ${s.idFragment?`frag: ${s.idFragment}`:""}`:""} | ${t}`)}}const bS=(...t)=>{let i="";for(const s of t){if("object"!=typeof s){i+=`${String(s)},`;continue}const t=[{prefix:"",obj:s}];for(;t.length>0;){const{prefix:s,obj:e}=t.shift();i+=`${s}:`;const h=Object.keys(e).sort();for(const s of h){const h=e[s];"object"==typeof h&&h.__proto__===Object.prototype||Array.isArray(h)?t.push({prefix:s,obj:h}):i+=`${s}=${String(h)},`}}}return i},xS={roundUnsigned:{VO:"roundUnsigned",NO:"float roundUnsigned(float number) {\n  return floor(number + 0.5);\n}"},linearStep:{VO:"linearStep",NO:"float linearStep(float step0, float step1, float step) {\n  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);\n}"},decodeUbyteRGBAEncodedFloat:{VO:"decodeUbyteRGBAEncodedFloat",NO:"\n      // Denormalize 8-bit color channels to integers in the range 0 to 255.\n      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n        ivec4 bytes = ivec4(inputFloats * 255.0);\n        return (\n          littleEndian\n          ? bytes.abgr\n          : bytes\n        );\n      }\n      \n      // Break the four bytes down into an array of 32 bits.\n      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n          float acc = float(bytes[channelIndex]);\n          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n            float powerOfTwo = exp2(float(indexInByte));\n            bool bit = acc >= powerOfTwo;\n            bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n            acc = mod(acc, powerOfTwo);\n          }\n        }\n      }\n      \n      // Compute the exponent of the 32-bit float.\n      float getExponent(bool bits[32]) {\n        const int startIndex = 1;\n        const int bitStringLength = 8;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        float acc = 0.0;\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Compute the mantissa of the 32-bit float.\n      float getMantissa(bool bits[32], bool subnormal) {\n        const int startIndex = 9;\n        const int bitStringLength = 23;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        // Leading/implicit/hidden bit convention:\n        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n        float acc = float(!subnormal) * exp2(float(bitStringLength));\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Parse the float from its 32 bits.\n      float bitsToFloat(bool bits[32]) {\n        float signBit = float(bits[0]) * -2.0 + 1.0;\n        float exponent = getExponent(bits);\n        bool subnormal = abs(exponent - 0.0) < 0.01;\n        float mantissa = getMantissa(bits, subnormal);\n        float exponentBias = 127.0;\n        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n      }\n      \n      // Decode a 32-bit float from the RGBA color channels of a texel.\n      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {\n        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);\n        bool bits[32];\n        bytesToBits(rgbaBytes, bits);\n        return bitsToFloat(bits);\n      }\n      "},texelFetchWithFallback:{webgl2:{VO:"texelFetchWithFallback",NO:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{VO:"texelFetchWithFallback",NO:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},texelFetchUnsignedWithFallback:{webgl2:{VO:"texelFetchUnsignedWithFallback",NO:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{VO:"texelFetchUnsignedWithFallback",NO:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},modulus:{VO:"modulus",NO:"int modulus(int a, int b) {\n  return (a)-((a)/(b))*(b);\n}"},computeScreenSpaceWireframe:{VO:"computeScreenSpaceWireframe",NO:"#extension GL_OES_standard_derivatives : enable\nfloat computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n  vec3 dist = fwidth(barycentric);\n  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);\n  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n}"}},MS="posAxis",_S="posWorld",AS="normal",wS="rotatedGeo",kS="uColorTexture",CS="aInstanceGeo",TS={"2D":"\nvoid main(void) {\n    gl_Position = vec4(posWorld, 0.0, 1.0 );\n}\n","3D":"\nuniform mat4 uViewProjectionMatrix;\nvoid main(void) {\n    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);\n}\n"},FS={FragmentShader:"\nuniform float uIsHighlighted;\nuniform vec4 uHighlightColorOffset;\nuniform float uRenderEffectMask;\nvoid main(void) {\n    float antiAliasFactor = 1.0;\n    vec4 fragColorEnd = colorFragment;\n    if (fragColorEnd.a <= 0.0) { discard; }\n    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));\n    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);\n    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor);\n}\n",Empty:"\nvoid main(void) {\n}\n"};class IS{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const i=this.modifiers.filter((t=>PS(t)));for(const s of i)t=s(t);return`${_r(this.modifiers.filter((t=>DS(t)))).map((t=>t.NO)).join("\n")}\n${t}`}}const PS=t=>"function"==typeof t,DS=t=>t&&"object"==typeof t&&"VO"in t,BS=(...t)=>i=>{t=t.reverse();for(let s of t)"string"==typeof s&&(s=s.includes("{")||s.endsWith(";")?s:`${s};`,s=s.trim(),i=i.replace("void main(void)",`${s}\nvoid main(void)`));return i},OS=t=>i=>(t=t.endsWith(";")?t:`${t};`,i.replace(t,"")),LS=(...t)=>i=>{const s=t.filter((t=>!1!==t));for(let t=0;t<s.length;t+=1)s[t]=s[t].endsWith(";")?s[t]:`${s[t]};`,s[t]=s[t].startsWith("\t")?s[t]:`\t${s[t]}`;const e=s.join("\n");return i.replace("void main(void) {\n",`void main(void) {\n${e}\n`)},ES=(t,...i)=>s=>{for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:`${i[t]};`,i[t]=i[t].startsWith("\t")?i[t]:`\t${i[t]}`;const e=i.join("\n"),h=new RegExp(`(.*${t}.*)`),r=s.replace(h,`${e}\n$1`);return i.forEach((i=>{if(!r.includes(i))throw new Error(`ShaderBefore misusage (not found: \n${i}\nmatch: \n${t}\nresult: \n${r}\n)`)})),r},RS=(t,...i)=>s=>{const e=i.filter((t=>!1!==t));for(let t=0;t<e.length;t+=1)e[t]=e[t].endsWith(";")?e[t]:`${e[t]};`,e[t]=e[t].startsWith("\t")?e[t]:`\t${e[t]}`;const h=e.join("\n"),r=s.lastIndexOf(t),n=s.substring(r),o=n.indexOf("\n"),a=n.substring(o),l=`${s.substring(0,r+o)}\n${h}${a}`;return e.forEach((i=>{if(!l.includes(i))throw new Error(`ShaderAfter misusage (not found: "${i}", match: "${t}", result: "${l}")`)})),l},zS=(...t)=>i=>{for(let s of t)if("string"==typeof s){s=s.endsWith(";")?s:`${s};`,s=s.trim(),s=s.startsWith("\t")?s:`\t${s}`;const t=i.lastIndexOf("}");i=`${i.substring(0,t-1)}\n${s}\n}`}return i},VS=(t,i)=>s=>{let e,h;if(t.includes("uniform")||t.includes("attribute")){const i=t.endsWith(";")?t:`${t};`;s=BS(i)(s),e=t.split(" ")[2].replace(";","")}else e=t;if(i.includes(" ")){const t=i.endsWith(";")?i:`${i};`;s=BS(t)(s),h=i.split(" ")[2].replace(";","")}else h=i;return zS(`\t${h} = ${e};`)(s)},NS=(...t)=>i=>{t=t.reverse();for(const s of t)i=s+i;return i};class GS{constructor(t,i,s,e,h){if(this.id=t,this.shader=s,this.gl=e,this.info=h,!i||!s)throw new ph(`Could not find ${this.GO()} ${this.WO()} shader source code.`);this.gl.shaderSource(s,i),this.gl.compileShader(s)}get src(){return""}GO(){return this.id.toString()}WO(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class WS extends GS{constructor(t,i,s,e){super(t,i,s.createShader(s.VERTEX_SHADER),s,e)}}class HS extends GS{constructor(t,i,s,e){super(t,i,s.createShader(s.FRAGMENT_SHADER),s,e)}}class US{constructor(t,i,s,e){this.HO=new Map,this.UO=new Map,this.ti=s,this.jO=s.createProgram(),this.$O=`${t.GO()} vertex`,this.YO=`${i.GO()} fragment`,s.attachShader(this.jO,t.shader),s.attachShader(this.jO,i.shader),s.bindAttribLocation(this.jO,0,"aPos"),s.linkProgram(this.jO),s.deleteShader(t.shader),s.deleteShader(i.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(i.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=i.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}XO(t){return br(0,(()=>xr()))}ZO(t){const i=this.KO(t);if(void 0===i)throw this.XO(`Could not get ${t} uniform from ${this.$O} and ${this.YO} shaders.`);return i}KO(t){const i=this.HO.get(t);if(i)return i;const s=this.ti.getUniformLocation(this.jO,t);return s?(this.HO.set(t,s),s):void 0}qO(t){const i=this.JO(t);if(void 0===i)throw this.XO(`Could not get ${t} attribute from ${this.$O} and ${this.YO} shaders.`);return i}JO(t){const i=this.UO.get(t);if(i||0===i)return i;const s=this.ti.getAttribLocation(this.jO,t);return s>=0?(this.UO.set(t,s),s):void 0}Pt(){this.ti.deleteProgram(this.jO)}}const jS=(t,i,s)=>()=>{t.QO=i,s&&s()};class $S{constructor(t,i){if(this.tL=0,this.iL=0,this.sL=!1,this.QO=!1,this.eL=!1,this.hL=!1,this.rL=!1,this.nL=new Set,this.oL=new Set,this.sd=i,this.ti=t,this.aL=null,this.sL=i instanceof Mh.HTMLVideoElement,this.sd instanceof Mh.HTMLImageElement)this.sd.addEventListener("load",(()=>{this.hL=!0,this.lL()})),this.sd.addEventListener("error",(()=>{this.rL=!0})),this.sd.complete&&(this.hL=!0,this.lL());else if(this.sd instanceof Mh.HTMLVideoElement){const t=this;this.sd.addEventListener("canplay",(function(){t.iL=this.videoHeight,t.tL=this.videoWidth,t.hL=!0,t.lL()}),!0),this.sd.addEventListener("play",jS(this,!0,(()=>this.lL()))),this.sd.addEventListener("playing",jS(this,!0,(()=>this.lL()))),this.sd.addEventListener("pause",jS(this,!1)),this.sd.addEventListener("ended",jS(this,!1)),this.sd.readyState>=1&&(this.tL=this.sd.videoWidth,this.iL=this.sd.videoHeight,this.QO=!this.sd.paused,this.hL=!0,this.lL())}else this.hL=!0,this.lL()}BO(t){0===this.oL.size&&this.hL&&this.lL(),this.oL.add(t)}OO(t){this.oL.delete(t),0===this.oL.size&&this.unbindResources()}uL(t){this.nL.add(t),this.eL&&(t(),this.cL(t))}cL(t){this.nL.delete(t)}lL(){if(this.rL||this.eL||!this.hL)return;const t=this.ti.gl;if(!this.aL&&this.sd&&t){this.aL=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.aL),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const i=0,s=t.RGBA,e=t.RGBA,h=t.UNSIGNED_BYTE,r=this.sd,n=this.tL>0?this.tL:r.width,o=this.iL>0?this.iL:r.height;t.texImage2D(t.TEXTURE_2D,i,s,e,h,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.tL=n,this.iL=o,t.bindTexture(t.TEXTURE_2D,null)}this.eL=!0,this.nL&&this.nL.forEach((t=>{t(),this.cL(t)}))}le(){const t=this.ti.gl;if(!this.rL&&this.eL&&this.aL){const i=0,s=t.RGBA,e=t.RGBA,h=t.UNSIGNED_BYTE,r=this.sd;r&&(t.bindTexture(t.TEXTURE_2D,this.aL),t.texImage2D(t.TEXTURE_2D,i,s,e,h,r))}}fL(){return this.aL}unbindResources(){return this.eL&&(this.aL&&(this.ti.AO(this.aL),this.aL=null),this.eL=!1),this}}class YS extends Wa{constructor(t,i,s){super(t.$s,i,s),this.Lp=!0,this.Fp={},this.Bp=u(zu),this.re=t,this.Jt=t.Jt}dL(){var t;return this.Bp.o&&this.Bp.M().type!==(null===(t=this.gL)||void 0===t?void 0:t.type)}Np(t){return this.Lp=t,this}mL(t){return this.Fp=t,this}}const XS=(t,i)=>[BS("uniform float uLookupMin","uniform float uLookupMax","uniform sampler2D uLookupTexture","uniform float uLookupTextureHeightPx","uniform vec4 uFallbackColor"),xS.texelFetchWithFallback[i],ES("colorFragment","vec4 colorFragment = vec4(0.0)",`if (${t} <= -340282346638528859811704183484516925440.0) {\n                colorFragment = uFallbackColor;\n            } else {\n                int texCoordY = int(clamp((${t} - uLookupMin) / (uLookupMax - uLookupMin), 0.0, 1.0) * (uLookupTextureHeightPx - 1.0));\n                colorFragment = texelFetchWithFallback(uLookupTexture, ivec2(0, texCoordY), vec2(1.0, uLookupTextureHeightPx));\n            }`)],ZS=[BS("uniform sampler2D uMaskTexture"),BS("varying vec2 vMaskTextureCoord"),RS("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.r")],KS=[BS("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),RS("colorFragment =","float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb","vec3 diffuseColor = colorFragment.rgb","vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)","colorFragment = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, colorFragment.a)")],qS=t=>void 0!==t.find((t=>{var i;return null===(i=t.yL)||void 0===i?void 0:i.pL})),JS=t=>void 0!==t.find((t=>{var i;return null===(i=t.yL)||void 0===i?void 0:i.SL})),QS=t=>void 0!==t.find((t=>{var i;return null===(i=t.yL)||void 0===i?void 0:i.vL})),tv=(t,i,...s)=>{const e=[],h=i?"vec3":"vec2",{axisWorldTranslation:r,scaling:n,translation:o,offset:a,flipXY:l,flipXZ:u,splitPosAttribute:c,normalSource:f}=t,d=[];if("attribute"===f&&e.push(BS("attribute vec3 aNormal"),LS("vec3 normal = aNormal")),"linear-highPrecision"!==r)s.forEach((t=>{void 0!==t.attributeNameAxisCoord&&(!0!==c?e.push(LS(`${h} ${t.variableNameAxisCoord} = ${t.attributeNameAxisCoord}`)):e.push(LS(`${h} ${t.variableNameAxisCoord} = ${i?`vec3(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y, ${t.attributeNameAxisCoord}Z)`:`vec2(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y)`}`)))}));else{if(!0===c)throw new Error("splitPosAttribute: true not supported with axisWorldTranslation: linear-highPrecision");s.forEach((t=>{e.push(LS(`${h} ${t.variableNameAxisCoord}_highpart = ${t.attributeNameAxisCoord}_highpart`),LS(`${h} ${t.variableNameAxisCoord}_lowpart = ${t.attributeNameAxisCoord}_lowpart`))}))}if(a&&a.rotation){const t=a.rotation.dataType,i=("uniform"===t?"u":"a")+"Rot";e.push(BS(`${t} vec2 ${i}`));const s=CS;e.push(LS(`vec2 rotatedGeo = vec2(${s}.x * ${i}.y + ${s}.y * ${i}.x, ${s}.y * ${i}.y - ${s}.x * ${i}.x)`))}if(a&&e.push(BS(`attribute ${h} aInstanceGeo`)),!0===l){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");s.forEach((t=>{d.push(`${t.variableNameAxisCoord} = ${i?`vec3(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x, ${t.variableNameAxisCoord}.z)`:`vec2(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`}`)}))}if(!0===u){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");s.forEach((t=>{d.push(`${t.variableNameAxisCoord} = vec3(${t.variableNameAxisCoord}.z, ${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`)}))}if(n){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const t=("attribute"===n.dataType?"a":"u")+"Scaling",h=i?"vec3":"vec2";e.push(BS(`${n.dataType} ${h} ${t}`)),s.forEach((i=>{d.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} * ${t}`)}))}if(o&&"axis"===o.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const t=("attribute"===o.dataType?"a":"u")+"TranslationAxis",h=i?"vec3":"vec2";e.push(BS(`${o.dataType} ${h} ${t}`)),s.forEach((i=>{d.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} + ${t}`)}))}if(a&&"axis"===a.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const t=("attribute"===a.dataType?"a":"u")+"OffsetAxis",n=!0===a.symmetric?"float":h;e.push(BS(`${a.dataType} ${n} ${t}`));const o=a.halved?" * 0.5":"",l=a.rotation?wS:CS,u="offsetGeometry";d.push(`${h} ${u} = ${t} * ${l}${o} * sign(uScale)`),i&&"gpu-calculate"===f&&d.push(`${h} normal = ${l}`),s.forEach((t=>{d.push(`${t.variableNameAxisCoord} = ${t.variableNameAxisCoord} + ${u}`)}))}if(void 0===r||"linear"===r)e.push(BS(`uniform ${h} uDisp`,`uniform ${h} uScale`)),s.forEach((t=>{d.push(`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord} - uDisp) / uScale`)}));else if("linear-highPrecision"===r)e.push(BS(`uniform ${h} uDisp`,`uniform ${h} uScale`,`uniform ${h} uScaleStart_highpart`,`uniform ${h} uScaleStart_lowpart`)),s.forEach((t=>{d.push(`${h} ${t.variableNameAxisCoord}_hprecision = (${t.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${t.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${h} ${t.variableNameAxisCoord} = ${t.variableNameAxisCoord}_highpart + ${t.variableNameAxisCoord}_lowpart`)}));else if("matrix"===r)e.push(BS("uniform mat3 uMatrix")),s.forEach((t=>{d.push(`vec2 ${t.variableNameWorldCoord} = (uMatrix * vec3(${t.variableNameAxisCoord}, 1.0)).xy`)}));else if("logarithmic"===r[0]){e.push(BS(`uniform ${h} uScaleStart`,`uniform ${h} uScaleStartLog`,`uniform ${h} uScaleInterval`,`uniform ${h} uScaleIntervalLog`,`uniform ${h} uViewportStart`,`uniform ${h} uViewportSize`));const t=i?["x","y","z"]:["x","y"],n=[];t.forEach((t=>{const i=r[1][t];if(void 0!==i){const t=i.base;if("e"===t)return;const s=`float cLog${t} = 1.0 / log(${Cn(t).toFixed(1)})`;n.includes(s)||n.push(s)}})),e.push(BS(...n)),s.forEach(((i,s)=>{const e=`${s}`,n=[];t.forEach((t=>{const s=t.toUpperCase(),h=r[1][t];if(void 0===h)d.push(`float posPercent${s}${e} = (${i.variableNameAxisCoord}.${t} - uScaleStart.${t}) / uScaleInterval.${t}`);else{const r=h.base,n="e"===r;d.push(`float posLog${s}${e} = log(${i.variableNameAxisCoord}.${t})${n?"":` * cLog${r}`}`,`float posPercent${s}${e} = (posLog${s}${e} - uScaleStartLog.${t}) / uScaleIntervalLog.${t}`)}n.push(`posPercent${s}${e}`)})),d.push(`${h} ${i.variableNameWorldCoord} = uViewportStart + ${h}(${n.join(", ")}) * uViewportSize`)}))}if(a&&"px"===a.sizeUnit){e.push(BS("uniform vec2 uRatioPxClip"));const t=("attribute"===a.dataType?"a":"u")+"OffsetPixels",i=!0===a.symmetric?"float":h;e.push(BS(`${a.dataType} ${i} ${t}`));const r=a.halved?" * 0.5":"",n=`${t} * ${a.rotation?wS:CS}${r}`;s.forEach((t=>{d.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${n} * uRatioPxClip`)}))}if(a&&"wu"===a.sizeUnit){const t=("attribute"===a.dataType?"a":"u")+"OffsetWU",r=!0===a.symmetric?"float":h;e.push(BS(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?wS:CS,l="offsetGeometry";d.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===f&&d.push(`${h} normal = normalize(${l})`),s.forEach((t=>{d.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l}`)}))}if(a&&"nwu"===a.sizeUnit){e.push(BS("uniform float uRatioNwuWu"));const t=("attribute"===a.dataType?"a":"u")+"OffsetNWU",r=!0===a.symmetric?"float":h;e.push(BS(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?wS:CS,l="offsetGeometry";d.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===f&&d.push(`${h} normal = normalize(${l})`),s.forEach((t=>{d.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l} * uRatioNwuWu`)}))}return t.snapToNearestPixel&&(e.push(BS("uniform vec2 uViewportSizePx")),s.forEach((t=>{d.push(`${t.variableNameWorldCoord} = 2.0 * floor(((${t.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)}))),e.push(ES("gl_Position =",...d)),e},iv=(t,i,s,e)=>{const h=[],r=t.axisWorldTranslation,n=i?"vec3":"vec2";if("linear"===r)h.push(RS(s,`${n} ${e} = ${s} * uScale + uDisp`));else if("linear-highPrecision"===r)h.push(RS(s,`${n} ${e} = ${s} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if("matrix"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("logarithmic"!==r[0])throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const t=[`${n} ${s}_percent = (${s} - uViewportStart) / uViewportSize`];(i?["x","y","z"]:["x","y"]).forEach((i=>{const e=i.toUpperCase(),h=r[1][i];if(void 0===h)t.push(`float pos${e}Back = ${s}_percent.${i} * uScaleInterval.${i} + uScaleStart.${i}`);else{const r=h.base,n="e"===r?"1.0":`cLog${r}`;t.push(`float pos${e}Back = pow(2.71828, (${s}_percent.${i} * uScaleIntervalLog.${i} + uScaleStartLog.${i}) / ${n})`)}})),t.push(`${n} ${e} = ${n}(posXBack, posYBack${i?", posZBack":""})`),h.push(RS(s,...t))}}return h},sv={"2D":{idFeature:"2D",apply:t=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"3D":{idFeature:"3D",yL:{pL:!0},apply:t=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:t=>({idFeature:"PointSize",apply:i=>{const s="uniform"===t?"u":"a";return{idVertex:`SizePrimitive:${bS(t)}`,idFragment:void 0,vertexShaderModifiers:[BS(`${t} float ${s}PointSize`,"uniform float uDevicePixelRatio"),zS(`gl_PointSize = ${s}PointSize * uDevicePixelRatio`)]}}}),Color:i=>{const s=i&&i.dataType,e=i&&i.maskTexture;return{idFeature:"Color",yL:{SL:!(!Array.isArray(i.dataType)||"value"===i.dataType[1])||void 0,vL:!(!Array.isArray(i.dataType)||"value"!==i.dataType[1])||void 0},apply:(h,r)=>{let n,o=`Color:${bS(i)}`;const a=[],l=[];if("uniform"===s)l.push(BS("uniform vec4 uColor"),LS("vec4 colorFragment = uColor"),...e?ZS:[]);else if("attribute"===s)n="colorAttribute",a.push(VS("attribute vec4 aColor","varying vec4 vColor")),l.push(BS("varying vec4 vColor"),LS("vec4 colorFragment = vColor"));else if("texture"===s)n="colorTexCoord",a.push(VS("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),l.push(BS("varying vec2 vTextureCoord"),BS("uniform sampler2D uColorTexture"),BS("uniform vec4 uColor"),LS("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {\n                        colorFragment = uColor;\n                    }"));else if(Array.isArray(s)&&"image"===s[0])n="colorTexCoord",a.push(VS("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),s[1]===t.ImageFitMode.Tile?l.push(BS("uniform sampler2D uColorTexture"),BS("varying vec2 vTextureCoord"),LS("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord);")):l.push(BS("uniform sampler2D uColorTexture"),BS("varying vec2 vTextureCoord"),BS("uniform vec4 uColor"),LS("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord);","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){\n                            colorFragment = uColor;\n                        }"));else if(Array.isArray(s)&&"lookup"===s[0]){const t=s[1];if("value"===t)n="lookup:value",a.push(VS("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;n=`lookup:${t}`,a.push(VS(i,"varying float vLookupValue"))}l.push(BS("varying float vLookupValue"),...XS("vLookupValue",r))}else if(Array.isArray(s)&&"gradient"===s[0]){o=`Color:${bS(i)}`;const t=s[1],h=t.getColorStops();th(t)?l.push(BS("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),BS(...Dh(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),xS.linearStep,LS("vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, mixVal));`)),"vec4 colorFragment = color"),...e?ZS:[]):eh(t)&&l.push(BS("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),BS(...Dh(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),xS.linearStep,LS("vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, magnitude))`)),"vec4 colorFragment = color"),...e?ZS:[])}if(!0===e){const t="maskTexture";n=n?`${n} ${t}`:`Color:${t}`,a.push(VS("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return{vertexShaderModifiers:a,fragmentShader:"FragmentShader",fragmentShaderModifiers:l,idVertex:n,idFragment:o}}}},ColorShaded3D:t=>{const{dataType:i,shadingStyle:s,wireframe:e}=t;let h;const r=`ColorShaded3D:${bS(t)}`;return{idFeature:"ColorShaded3D",yL:{SL:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,vL:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0},apply:(t,n)=>{const o=[],a=[];if(o.push("phong"===s&&VS(AS,"varying vec3 vNormal"),VS(_S,"varying vec3 vPosWorld")),"uniform"===i)a.push(BS("uniform vec4 uColorDiffuse"),LS("vec4 colorFragment = uColorDiffuse"));else if("attribute"===i)h="per-vertex-color",o.push(VS("attribute vec4 aColor","varying vec4 vColor")),a.push(BS("varying vec4 vColor"),LS("vec4 colorFragment = vColor"));else if(Array.isArray(i)){const t=i[1];if("value"===t)h="lookup:value",o.push(VS("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;h=`lookup:${t}`,o.push(VS(i,"varying float vLookupValue"))}a.push(BS("varying float vLookupValue"),...XS("vLookupValue",n))}if(e){const t="wireframe";h=h?`${h},${t}`:t,o.push(VS("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),a.push(BS("varying vec3 vTriangleBary"),BS("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),xS.computeScreenSpaceWireframe,RS("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)","colorFragment = mix(colorFragment, uWireframeColor, edge)"))}return"phong"===s&&a.push(...KS),{idVertex:h,idFragment:r,vertexShaderModifiers:o,fragmentShader:"FragmentShader",fragmentShaderModifiers:a}}}},VertexLocation:t=>({idFeature:"VertexLocation",apply:i=>{const s=[],e=qS(i),h=e?"vec3":"vec2";if("linear-highPrecision"!==t.axisWorldTranslation)!0!==t.splitPosAttribute?s.push(BS(`attribute ${h} aPos`)):s.push(BS("attribute float aPosX"),BS("attribute float aPosY"),e&&BS("attribute float aPosZ"));else{if(!0===t.splitPosAttribute)throw new Error("splitPosAttribute: true not supported with axisWorldTranslation: linear-highPrecision");s.push(BS(`attribute ${h} aPos_highpart`),BS(`attribute ${h} aPos_lowpart`))}return s.push(...tv(t,e,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:MS,variableNameWorldCoord:_S})),{idVertex:`VertexLocation:${bS(t)}`,idFragment:void 0,vertexShaderModifiers:s}}}),LineInstanced2D:t=>({idFeature:"LineInstanced2D",apply:i=>({idVertex:`LineInstanced2D:${bS(t)}`,idFragment:void 0,vertexShaderModifiers:[BS("uniform float uThicknessPixels"),BS("uniform vec2 uRatioPxClip"),"linear-highPrecision"!==t.axisWorldTranslation&&BS("attribute vec2 aLocationA"),"linear-highPrecision"!==t.axisWorldTranslation&&BS("attribute vec2 aLocationB"),"linear-highPrecision"===t.axisWorldTranslation&&BS("attribute vec2 aLocationA_highpart"),"linear-highPrecision"===t.axisWorldTranslation&&BS("attribute vec2 aLocationB_highpart"),"linear-highPrecision"===t.axisWorldTranslation&&BS("attribute vec2 aLocationA_lowpart"),"linear-highPrecision"===t.axisWorldTranslation&&BS("attribute vec2 aLocationB_lowpart"),BS("attribute vec2 aSegmentPosition"),BS("attribute float aSegmentSide"),...tv(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),RS("worldB = ","vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm ","vec2 posWorld = offset + thicknessDirection * uThicknessPixels * uRatioPxClip"),...QS(i)?[OS("attribute float aLookupValue"),OS("vLookupValue = aLookupValue"),BS("attribute float aLookupValueA"),BS("attribute float aLookupValueB"),zS("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],...JS(i)?iv(t,!1,_S,MS):[]]})}),LineInstanced3D:t=>({idFeature:"LineInstanced3D",apply:i=>({idVertex:`LineInstanced3D:${bS(t)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[BS("uniform float uOffsetWU"),BS("attribute vec3 aLocationA"),BS("attribute vec3 aLocationB"),BS("attribute float aSegmentPosition"),BS("attribute float aPerpendHorizontal"),BS("attribute float aPerpendVertical"),...tv({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},qS(i),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),RS("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )","vec3 normal = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis","vec3 posWorld = worldA + aSegmentPosition * directionBasis + normal * uOffsetWU * 0.5"),...JS(i)?iv({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,_S,MS):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:t=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[BS("attribute vec3 aEdge"),BS("uniform float uEdgeRoundness"),RS("posWorld =","vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )","posWorld = posWorld + aEdge * edgeRoundAmount")]})},ColorGrid2D:t=>{const i=t.flipXY,s=t.intensityTextureType,e=t.littleEndian;return{idFeature:"ColorGrid2D",apply:(h,r)=>({idVertex:void 0,idFragment:`ColorGrid2D:${bS(t)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[BS("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues"),"ubyte"===s&&xS.decodeUbyteRGBAEncodedFloat,"bilinear"===t.interpolation?LS("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${i?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${i?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${i?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${i?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===s?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${e})`),"float intensity01 = "+("float"===s?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${e})`),"float intensity10 = "+("float"===s?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${e})`),"float intensity11 = "+("float"===s?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${e})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${i?"lerpFactors.y":"lerpFactors.x"})`):LS("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",`vec4 sample0 = texture2D(uTileIntensityValues, ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+("float"===s?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${e})`)),...XS("intensityP",r)]})}},DrawToNormalTexture:t=>{const i=t.flipXZ,s=t.vertexIdSource,e=t.normalTextureType,h=t.heightmapTextureType,r=t.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(n,o)=>{const a=[],l=[];return a.push(BS("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB","attribute"===s&&"attribute float aVertexID"),void 0!==s&&xS.roundUnsigned,xS.modulus,xS.texelFetchWithFallback[o],"ubyte"===h&&xS.decodeUbyteRGBAEncodedFloat,LS(void 0===s?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`} ,\n                            uTileStartLocationAxisXZ.y + iCell.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell1.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell1.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell2.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell2.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell3.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell3.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))","uint"===e?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),l.push(BS("uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),LS("uint"===e?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${bS(t)}`,idFragment:`DrawToNormalTexture:${bS(t)}`,vertexShaderModifiers:a,fragmentShaderModifiers:l,fragmentShader:"Empty",hints:["uint"===e&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:t=>{const i=t.fillColor,s=t.interpolation,e=t.flipXZ,h=t.shadingStyle,r=t.wireframe,n=t.instanceIdSource,o=t.normalTextureType,a=t.heightmapTextureType,l=t.intensityTextureType,u=t.littleEndian;return{idFeature:"SurfaceGrid",apply:(c,f)=>{const d=[],g=[];return d.push(BS("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===n&&"attribute float aInstanceID"),void 0!==n&&xS.roundUnsigned,xS.modulus,xS.texelFetchWithFallback[f],"ubyte"===a&&xS.decodeUbyteRGBAEncodedFloat,LS(void 0===n?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+("float"===a?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${u})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(e?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),d.push(...tv({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:MS,variableNameWorldCoord:_S})),"phong"===h&&d.push(VS(_S,"varying vec3 vPosWorld"),..."uint"===o?[xS.texelFetchUnsignedWithFallback[f],zS("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[zS("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],zS("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),BS("varying vec3 vNormal",..."uint"===o?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),g.push(BS("varying vec3 vTriangleBary")),"uniform"===i?g.push(BS("uniform vec4 uColorDiffuse"),LS("vec4 colorFragment = uColorDiffuse")):Array.isArray(i)&&"lookup"===i[0]?"value"===i[1]?(d.push(VS("posAxis.xz","varying vec2 vVertexLocationAxisXZ")),g.push(BS("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),"ubyte"===l&&xS.decodeUbyteRGBAEncodedFloat,"bilinear"===s?LS("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${e?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${e?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${e?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${e?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===l?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${u})`),"float intensity01 = "+("float"===l?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${u})`),"float intensity10 = "+("float"===l?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${u})`),"float intensity11 = "+("float"===l?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${u})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${e?"lerpFactors.y":"lerpFactors.x"})`):LS("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${e?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...XS("intensityP",f))):(d.push(VS(`posAxis.${i[1]}`,"varying float vLookupValue")),g.push(BS("varying float vLookupValue"),...XS("vLookupValue",f))):void 0===i&&g.push(LS("vec4 colorFragment = vec4(0.0, 0.0, 0.0, 0.0)")),"phong"===h&&g.push(...KS),r&&(d.push(BS("attribute vec3 aTriangleBary"),VS("aTriangleBary","varying vec3 vTriangleBary")),g.push(BS("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),xS.computeScreenSpaceWireframe,RS("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",i?"if (edge > 0.0) {\n                                    colorFragment = vec4(mix(colorFragment.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(colorFragment.a, uWireframeColor.a));\n                                }":"if (edge > 0.0) {\n                                    colorFragment = uWireframeColor;\n                                  } else {\n                                      discard;\n                                  }"))),{idVertex:`SurfaceGrid:${bS(t)}`,idFragment:`SurfaceGrid:${bS(t)}`,vertexShaderModifiers:d,fragmentShader:"FragmentShader",fragmentShaderModifiers:g}}}},DebugSurfaceGridNormals:t=>({idFeature:"DebugSurfaceGridNormals",apply:(i,s)=>({idVertex:`DebugSurfaceGridNormals:${bS(t)}`,idFragment:`DebugSurfaceGridNormals:${bS(t)}`,vertexShaderModifiers:[BS("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===t.instanceIdSource&&"attribute float aInstanceID",..."uint"===t.normalTextureType?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),xS.roundUnsigned,xS.modulus,xS.texelFetchWithFallback[s],"ubyte"===t.heightmapTextureType&&xS.decodeUbyteRGBAEncodedFloat,LS(void 0===t.instanceIdSource?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y01 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y10 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y11 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${t.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",..."uint"===t.normalTextureType?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),..."uint"===t.normalTextureType?[xS.texelFetchUnsignedWithFallback[s]]:[],...tv({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:MS,variableNameWorldCoord:_S}),RS("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025","if (aNormalArrow == 0.0) {\n                        posWorld = posArrowStart;\n                    } else if (aNormalArrow == 1.0) {\n                        posWorld = posArrowEnd;\n                    } else if (aNormalArrow == 2.0) {\n                        posWorld = posArrowLeft;\n                    } else if (aNormalArrow == 3.0) {\n                        posWorld = posArrowRight;\n                    }")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[zS("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:t=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[BS("uniform vec3 uCameraLoc"),RS("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:t=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[BS("attribute float aSegmentInside"),BS("varying float vSegmentInside"),BS("varying float vSegmentSide"),RS("gl_Position = ","\n                vSegmentInside = aSegmentInside;\n                vSegmentSide = aSegmentSide;\n                ")],fragmentShaderModifiers:[NS("#extension GL_OES_standard_derivatives : enable"),BS("uniform float uAALimit"),BS("varying float vSegmentInside"),BS("varying float vSegmentSide"),RS("antiAliasFactor = ","\n                float dist = (uAALimit - vSegmentInside);\n                vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n                float pixelDist = dist / length(ddist);\n                // additional blurring\n                pixelDist *= 0.5;\n\n                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);\n                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){\n                    aa *= 0.5;\n                }\n                antiAliasFactor = aa;\n                ")]})},Glow1D:t=>({idFeature:"Glow1D",apply:()=>{const i=Math.round(t.spreadPx),s=Math.round(t.blurPx),e=i+s,h=t.firstPass,r=[];for(let t=-e;t<=e;t+=1){const i=Math.abs(t);r.push(h?{x:t.toFixed(1),y:"0.0",distPx:i.toFixed(1)}:{x:"0.0",y:t.toFixed(1),distPx:i.toFixed(1)})}return{idVertex:`Glow1D:${bS(t)}`,idFragment:`Glow1D:${bS(t)}`,vertexShaderModifiers:[VS("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[BS("uniform sampler2D uTexture"),BS("varying vec2 vTextureCoord"),BS("uniform vec2 uTextureSize"),h&&BS("uniform vec2 uOffsetPx"),!h&&BS("uniform sampler2D uTextureFirstGlowPass"),!h&&BS("uniform vec4 uGlowColor"),RS("antiAliasFactor =","vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize",...h?[]:["float inverseIntensity =\n                        0.25 * texture2D(uTexture, vTextureCoord).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, -oneTexel.y)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, oneTexel.y)).a","antiAliasFactor *= 1.0 - (inverseIntensity * inverseIntensity)","if (antiAliasFactor <= 0.0) { discard; }"],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...h?["vec2 texCoordOffset = vTextureCoord - uOffsetPx * oneTexel",...r.map(((t,i)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${t.x}, ${t.y})`,`if (distancePx > ${t.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${t.distPx}; }`])).flat(),"vec4 colorFragment = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)"]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...r.map(((t,i)=>[`sample_tx = vTextureCoord + oneTexel * vec2(${t.x}, ${t.y})`,"if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {\n                                            sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);\n                                            horizontal_dist = sample_horizontal.r * 255.0;\n                                          }","if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${t.y} * ${t.y}, 0.5))`])).flat(),`if (distancePx > ${e.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${i.toFixed(1)}) {\n                                        float lerpAmount = (distancePx - ${i.toFixed(1)}) / ${(s+1).toFixed(1)};\n                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));\n                                    } else {\n                                        pixelGlowColor = uGlowColor;\n                                    }`,"vec4 colorFragment = pixelGlowColor"])]}}}),MousePicking:{idFeature:"MousePicking",apply:t=>({idVertex:void 0,idFragment:"MousePicking",fragmentShaderModifiers:[BS("uniform vec4 uColor"),LS("vec4 colorFragment = uColor"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)","if (antiAliasFactor <= 0.0) { discard; }\ngl_FragColor = fragColorEnd")]})},MousePickingAttribute:{idFeature:"MousePickingAttribute",apply:t=>({idVertex:"MousePickingAttribute",idFragment:"MousePickingAttribute",vertexShaderModifiers:[VS("attribute vec4 aColor","varying vec4 vColor")],fragmentShaderModifiers:[BS("varying vec4 vColor"),LS("vec4 colorFragment = vColor"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)","if (antiAliasFactor <= 0.0) { discard; }\ngl_FragColor = fragColorEnd")]})},AttributeHighlight:{idFeature:"AttributeHighlight",apply:t=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[VS("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(t,i)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[BS("attribute vec2 aLengthSoFar"),BS("varying float vLengthSoFar"),BS("uniform vec2 uStippleCount"),zS("\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[BS("uniform sampler2D uStippleTexture"),BS("uniform float uStippleScale"),BS("varying float vLengthSoFar"),"webgl1"===i&&BS("uniform float uStippleTextureWidthLimiter"),RS("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(t,i)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[BS("attribute vec2 aLengthSoFarA"),BS("attribute vec2 aLengthSoFarB"),BS("varying float vLengthSoFar"),BS("uniform vec2 uStippleCount"),zS("\n                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[BS("uniform sampler2D uStippleTexture"),BS("uniform float uStippleScale"),BS("varying float vLengthSoFar"),"webgl1"===i&&BS("uniform float uStippleTextureWidthLimiter"),RS("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},PolarHeatmap:t=>({idFeature:"PolarHeatmap",apply:(i,s)=>{const e="dataType"in t,h="interpolation"in t?t:void 0,r="bilinear"===(null==h?void 0:h.interpolation),n=null==h?void 0:h.intensityTextureType,o=null==h?void 0:h.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${bS(t)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[BS("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",h&&"uniform sampler2D uTileIntensityValues",e&&"uniform vec4 uColor"),xS.texelFetchWithFallback[s],"ubyte"===n&&xS.decodeUbyteRGBAEncodedFloat,LS("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep","if (iAnnulus < 0.0 || iAnnulus > uAnnuli) { discard; }"),e&&LS("vec4 colorFragment = uColor"),h&&RS("if (iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",h.flipXY&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",h.flipXY&&"cellStart = ivec2(cellStart.y, cellStart.x)",h.flipXY&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)","vec2 tileDimensions = "+(h.flipXY?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),r&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",r&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",r&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",r&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",r&&"float intensity00 = "+("float"===n?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${o})`),r&&"float intensity01 = "+("float"===n?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${o})`),r&&"float intensity10 = "+("float"===n?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${o})`),r&&"float intensity11 = "+("float"===n?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${o})`),r&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",r&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",r&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",r&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!r&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!r&&"float intensityP = "+("float"===n?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${o})`)),...h?XS("intensityP",s):[]]}}})},ev=(t,i,s,e)=>{const h=t.zO(),r=Math.round(Math.min(s.spread,10)*h),n=Math.round(Math.min(s.blur,10)*h),o={x:Math.round(s.offset.x*h),y:Math.round(s.offset.y*h)},a=t.bL(),l=t.xL(),u=t.ML(),c=t._L(),f=t.AL();t.wL("disabled"),t.Np(!1),t.kL(!1);const d=i.CL();((t,i,s)=>{const e=t.gl,h=t.zO();e.bindFramebuffer(e.FRAMEBUFFER,s.frameBuffer),e.bindRenderbuffer(e.RENDERBUFFER,s.depthBuffer),e.bindTexture(e.TEXTURE_2D,s.texture),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.clear(e.DEPTH_BUFFER_BIT);const r=s.sizeDpr;t.TL(0,0,r.x,r.y),i.forEach((i=>{let s;i instanceof Ua?s=i.re.Xm():i instanceof YS&&(s=i.re.nv()),s?t.FL(s.x*h,s.y*h,s.width*h,s.height*h):t.kL(!1),i.YB(2)})),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),t.kL(!1)})(t,e,d);let g=d;const m=r+n+5,y=((t,i,s,e)=>{const h=(t=>{const i=[];for(let s=0;s<t.length;s+=1){let e,h=t[s];do{const t=i.findIndex((t=>Rr(h,t)));e=t>=0?i[t]:void 0,e&&(i.splice(t,1),h=Kr(h,e))}while(e);i.push(h)}return i})(i.map((t=>{const i=t instanceof Ua||t instanceof YS?t.re.IL(t):Or;if(Mr(i))return Or;const h={min:{x:Math.max(i.min.x-s.left,0),y:Math.max(i.min.y-s.bottom,0)},max:{x:Math.min(i.max.x+s.right,e.x),y:Math.min(i.max.y+s.top,e.y)}};return h.max.x<=h.min.x||h.max.y<=h.min.y?Or:h})).filter((t=>!Mr(t)))),r=6*h.length,n=new Float32Array(4*r);let o=0;return h.forEach((t=>{const i=cn(t.min,e),s=cn(t.max,e),h=i,r=s;n[o+0]=i.x,n[o+1]=i.y,n[o+2]=h.x,n[o+3]=h.y,n[o+4]=s.x,n[o+5]=i.y,n[o+6]=r.x,n[o+7]=h.y,n[o+8]=s.x,n[o+9]=s.y,n[o+10]=r.x,n[o+11]=r.y,n[o+12]=s.x,n[o+13]=s.y,n[o+14]=r.x,n[o+15]=r.y,n[o+16]=i.x,n[o+17]=s.y,n[o+18]=h.x,n[o+19]=r.y,n[o+20]=i.x,n[o+21]=i.y,n[o+22]=h.x,n[o+23]=h.y,o+=24})),{vertexBuffer:t.PL(n),vertexCount:r}})(t,e,{left:m+(o.x<0?-o.x:0),top:m+(o.y>0?o.y:0),right:m+(o.x>0?o.x:0),bottom:m+(o.y<0?-o.y:0)},i.DL()),p=i.CL(d,g),S=t.BL(sv["2D"],sv.Glow1D({spreadPx:r,blurPx:n,firstPass:!0}),sv.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,i,s,e,h,r)=>{const n=t.gl;n.bindFramebuffer(n.FRAMEBUFFER,s.frameBuffer),n.bindRenderbuffer(n.RENDERBUFFER,s.depthBuffer),n.bindTexture(n.TEXTURE_2D,s.texture),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.clear(n.DEPTH_BUFFER_BIT),t.TL(0,0,s.sizeDpr.x,s.sizeDpr.y),t.OL(e,((o,a,l,u)=>(t.BO(e),r&&r(o),t.zL(o("uIsHighlighted"),0).VL(o("uHighlightColorOffset"),Me).zL(o("uRenderEffectMask"),0).RL(o("uTexture"),i.texture,0).EL(u("uTextureSize"),[i.sizeDpr.x,i.sizeDpr.y]).EL(o("uScale"),s.uniforms.NL()).EL(o("uDisp"),s.uniforms.GL()).EL(o("uScaling"),[s.size.x,s.size.y]).EL(o("uTranslationAxis"),[0,0]).LL(h.vertexBuffer,void 0,{location:a("aPos"),size:2},{location:a("aTextureCoord"),size:2}).Ly(n.TRIANGLES,h.vertexCount,0),!0))),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindTexture(n.TEXTURE_2D,null)})(t,g,p,S,y,((i,s,e,h)=>(t.EL(i("uOffsetPx"),[o.x,o.y]),!0))),g=p,t.kL(l),t.WL(f);const v=t.BL(sv["2D"],sv.Glow1D({spreadPx:r,blurPx:n,firstPass:!1}),sv.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,i,s,e,h)=>{const r=t.gl,n={x:t.$s.Ci().x,y:t.$s.Ci().y};t.TL(0,0,n.x*t.zO(),n.y*t.zO());const o=ah.d2({scaleXYConstructor:Rn}).Gt(n).es(0,n.x).hs(0,n.y),a=new ov;a.HL(o),t.OL(s,((o,l,u,c)=>(t.BO(s),h&&h(o),t.zL(o("uIsHighlighted"),0).VL(o("uHighlightColorOffset"),Me).zL(o("uRenderEffectMask"),0).RL(o("uTexture"),i.texture,0).EL(c("uTextureSize"),[i.sizeDpr.x,i.sizeDpr.y]).EL(o("uScale"),a.NL()).EL(o("uDisp"),a.GL()).EL(o("uScaling"),[n.x,n.y]).EL(o("uTranslationAxis"),[0,0]).LL(e.vertexBuffer,void 0,{location:l("aPos"),size:2},{location:l("aTextureCoord"),size:2}).Ly(r.TRIANGLES,e.vertexCount,0),!0)))})(t,d,v,y,((i,e,h,r)=>(t.RL(i("uTextureFirstGlowPass"),p.texture,1).VL(i("uGlowColor"),s.color),!0))),t.TL(a.x,a.y,a.width,a.height),t.wL(u),t.Np(c),t.UL(y.vertexBuffer)};class hv{constructor(t){this.jL=[],this.XB=t}$L(t,i){ev(this.XB,this,i,t)}DL(){const t=this.XB.$s.Ci();return{x:Math.ceil(t.x),y:Math.ceil(t.y)}}CL(...t){const i=this.jL,s=this.DL(),e={x:Math.ceil(s.x*this.XB.zO()),y:Math.ceil(s.y*this.XB.zO())},h=this.XB.gl,r=i.find((i=>!t.includes(i)));if(r)return r.sizeDpr.x===e.x&&r.sizeDpr.y===e.y||(r.size=s,r.sizeDpr=e,h.bindTexture(h.TEXTURE_2D,r.texture),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,e.x,e.y,0,h.RGBA,h.UNSIGNED_BYTE,null),h.bindRenderbuffer(h.RENDERBUFFER,r.depthBuffer),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,e.x,e.y),h.bindTexture(h.TEXTURE_2D,null),h.bindRenderbuffer(h.RENDERBUFFER,null),r.scale.Gt(s).es(0,s.x).hs(0,s.y),r.uniforms.HL(r.scale)),r;const n=h.createTexture(),o=this.XB.YL(),a=this.XB.XL();h.bindTexture(h.TEXTURE_2D,n),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,e.x,e.y,0,h.RGBA,h.UNSIGNED_BYTE,null),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),h.bindFramebuffer(h.FRAMEBUFFER,o),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0),h.bindRenderbuffer(h.RENDERBUFFER,a),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,e.x,e.y),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,a),h.bindTexture(h.TEXTURE_2D,null),h.bindFramebuffer(h.FRAMEBUFFER,null),h.bindRenderbuffer(h.RENDERBUFFER,null);const l=ah.d2({scaleXYConstructor:Rn}).Gt(s).es(0,s.x).hs(0,s.y),u=new ov;u.HL(l);const c={size:s,sizeDpr:e,texture:n,frameBuffer:o,depthBuffer:a,scale:l,uniforms:u};return i.push(c),c}Pt(){[this.jL].forEach((t=>{t.forEach((t=>{this.XB.ZL(t.depthBuffer),this.XB.KL(t.frameBuffer),this.XB.AO(t.texture)})),t.length=0}))}}class rv{constructor(i,s,h,r,n=!0){this.qL=new lS,this.JL=new Map,this.QL=new Map,this.tE=new Map,this.iE=[],this.sE=1,this.IS_MACHINE_LITTLE_ENDIAN=(()=>{const t=new Uint32Array([287454020]),i=new Uint8Array(t.buffer);return 68===i[0]||17!==i[0]&&(Mh.console.error("Unidentified machine endianness. Some features might behave unexpectedly."),!0)})(),this.Lp=!1,this.EL=(t,[i,s])=>(void 0===t||this.gl.uniform2f(t,i,s),this),this.eE=(t,[i,s])=>(void 0===t||this.gl.uniform2i(t,i,s),this),this.hE=(t,[i,s,e,h])=>(void 0===t||this.gl.uniform4f(t,i,s,e,h),this),this.rE=(t,[i,s,e])=>(void 0===t||this.gl.uniform3f(t,i,s,e),this),this.nE=(t,i)=>(void 0===t||this.gl.uniformMatrix3fv(t,!1,i),this),this.oE=(t,i)=>(void 0===t||this.gl.uniformMatrix4fv(t,!1,i),this),this.VL=(t,i)=>(void 0===t||this.gl.uniform4f(t,i.r,i.g,i.b,i.a),this),this.zL=(t,i)=>(void 0===t||this.gl.uniform1f(t,i),this),this.aE=(t,i)=>(this.gl.uniform1i(t,i),this),this.RL=(t,i,s)=>{if(void 0===t)return this;if(i){const e=this.gl.TEXTURE0+s;return this.gl.activeTexture(e),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(t,s),this}throw new yh("Could not bind a texture.")},this.lE=i=>(((i,s)=>{s===t.ImageFitMode.Tile?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.REPEAT)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE))})(this.gl,i),this),this.PL=(t,i=!1,s)=>{const e=t.length,h=this.uE(e,s);if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,h),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof Float32Array?t:new Float32Array(t),i?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),h)return h;throw new yh("Could not create vertex buffer")},this.cE=(t,i,s)=>{const e=s||this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t),this.gl.STATIC_DRAW),i&&this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,i instanceof Float32Array?i:new Float32Array(i)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e)return e;throw new yh("Could not create vertex buffer")},this.fE=(t,i,s)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,i*Float32Array.BYTES_PER_ELEMENT,s instanceof Float32Array?s:new Float32Array(s)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.dE=(t,i,s=!1)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,s?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.gE=(t,i)=>{const s=t.length,e=this.uE(s,i);if(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e)return e;throw new yh("Could not create index buffer")},this.mE=t=>{const i=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof Float32Array?t:new Float32Array(t),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),i)return i;throw new yh("Could not create float buffer")},this.yE=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0)),this),this.pE=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(t,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t)),this),this.LL=(t,i,...s)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t);const e=s.length;let h=0;for(let t=0;t<e;t+=1)h+=s[t].size;for(let t=0;t<e;t+=1){const i=s[t].location;void 0!==i&&i>-1&&this.gl.enableVertexAttribArray(i)}let r=0;for(let t=0;t<e;t+=1){const i=s[t];void 0!==i.location&&i.location>-1&&this.gl.vertexAttribPointer(i.location,i.size,this.gl.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),r+=i.size}if(void 0!==i)for(let t=0;t<e;t+=1){const e=s[t].location;void 0!==e&&e>-1&&this.SE(e,i)}return this},this.vE=(...t)=>{const i=t.length;for(let s=0;s<i;s+=1){const i=t[s];0!==i&&i>-1&&this.gl.disableVertexAttribArray(i)}return this},this.bE=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,4,this.gl.FLOAT,!1,0,0)),this),this.xE=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t)),this),this.ME=t=>(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this),this.Ly=(t,i,s=0)=>(i>0&&this.gl.drawArrays(t,s,i),this),this._E=(t,i=this.gl.TRIANGLES,s=0,e=this.gl.UNSIGNED_SHORT)=>(t>0&&this.gl.drawElements(i,t,e,s),this),this.AE=(t,i,s,e)=>{if(e>0&&(this.gl2&&this.gl2.ctx.drawArraysInstanced(t,i,s,e),this.gl1)){if(!this.gl1.wE.ANGLE_instanced_arrays)return Mh.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.wE.ANGLE_instanced_arrays.drawArraysInstancedANGLE(t,i,s,e)}return this},this.kE=(t,i,s,e,h=this.gl.UNSIGNED_SHORT)=>{if(e>0&&(this.gl2&&this.gl2.ctx.drawElementsInstanced(t,i,h,s,e),this.gl1)){if(!this.gl1.wE.ANGLE_instanced_arrays)return Mh.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.wE.ANGLE_instanced_arrays.drawElementsInstancedANGLE(t,i,h,s,e)}return this},this.SE=(t,i)=>{if(t>-1&&(this.gl2&&this.gl2.ctx.vertexAttribDivisor(t,i),this.gl1)){if(!this.gl1.wE.ANGLE_instanced_arrays)return Mh.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.wE.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(t,i)}return this},this.CE=(t,i,s,e=0)=>{const h=this.gl.TEXTURE0+e;this.gl.activeTexture(h),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,i),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,s,0);const r=this.xL();r&&this.kL(!1),t(),r&&this.kL(!0),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)},this.TE=(t,i,s)=>{const e=Mh.document.createElement("canvas").getContext("2d").createImageData(s.x,s.y),h=e.data;return this.gl.readPixels(t,i,s.x,s.y,this.gl.RGBA,this.gl.UNSIGNED_BYTE,h),e},this.Al=()=>(this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.clear(this.gl.DEPTH_BUFFER_BIT),this),this.FE=t=>(this.gl.clearColor(t.r,t.g,t.b,t.a),this),this.BO=t=>(this.gl.useProgram(t.jO),this),this.IE=!1,this.PE=[],this.$s=i,this.Yd=s,this.$s=i,this.gl=h.ctx,this.DE=h.antialias,this.BE=h.lineAntialias,this.OE=new Map,n&&(this.WL(!0),this.LE());const o=[];if(this.wE={WEBGL_lose_context:this.gl.getExtension("WEBGL_lose_context")},Object.keys(this.wE).forEach((t=>{null===this.wE[t]&&o.push(t)})),"webgl2"===h.type)this.gl2={ctx:h.ctx},this.EE=!0;else{const t={ANGLE_instanced_arrays:this.gl.getExtension("ANGLE_instanced_arrays"),EXT_blend_minmax:this.gl.getExtension("EXT_blend_minmax"),OES_element_index_uint:this.gl.getExtension("OES_element_index_uint"),OES_standard_derivatives:this.gl.getExtension("OES_standard_derivatives"),OES_vertex_array_object:this.gl.getExtension("OES_vertex_array_object")};t.OES_standard_derivatives||(this.BE=!1),Object.keys(t).forEach((i=>{null===t[i]&&o.push(i)}));const i={OES_texture_float:this.gl.getExtension("OES_texture_float")};this.EE=!!i.OES_texture_float,this.gl1={ctx:h.ctx,wE:t,optional:i}}this.iE=o,this.MO=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.TO=this.RE(),this.BL=(t=>{const i=t.gl,s=new Map,e=new Map,h=new Map,r={totalMs:0,vertexShaders:0,fragmentShaders:0,programs:0},n=(i,s,e=[])=>{const h=[],r=[],n={allAttributeNames:Array.from(i.matchAll(/attribute\s[^\s]*\s(.*);/g)).map((t=>t[1])),allUniformNames:Array.from(i.matchAll(/uniform\s[^\s]*\s(.*);/g)).map((t=>t[1])),allVaryingNames:Array.from(i.matchAll(/varying\s[^\s]*\s(.*);/g)).map((t=>t[1])),removedVariableNames:[]};if(t.gl1){const t=i.match(/#extension.*/g);t&&r.push(...t),i=i.replace(/#extension.*/g,"")}else if(h.push("#version 300 es"),(i=(i=(i=i.replace(/#extension.*/g,"")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).includes("usampler2D")&&h.push("precision highp usampler2D;"),"vertex"===s)i=i.replace(/varying/g,"out");else{i=i.replace(/varying/g,"in");const t=e.find((t=>"fragOutput"===t.type));i=(i=t?`out ${t.fragOutput} fragOutput;\n${i}`:`out vec4 fragOutput;\n${i}`).replace(/gl_FragColor/g,"fragOutput")}return r&&h.push(...r),h.push("precision highp float;"),h.push("precision highp int;"),{source:i=`${h.join("\n")}\n${i}`,info:n}};return(...o)=>{const a=t.gl2?"webgl2":"webgl1";let l,u,c,f,d,g,m,y,p;try{const t=Mh.performance.now();l=o.filter((t=>!1!==t&&void 0!==t)),u=((t,i)=>{const s=t.map((s=>s.apply(t,i))),e=s.map((t=>t.idVertex)).filter((t=>void 0!==t)).sort().join(" "),h=s.map((t=>t.idFragment)).filter((t=>void 0!==t)).sort().join(" "),r=`vert: ${e} frag: ${h}`;let n,o=!1,a=!1;const l=[];let u;const c=[],f=[];if(s.forEach((t=>{if(t.defaultVertexShader&&(o||(n=t.defaultVertexShader)),t.vertexShader){if(n&&o&&n!==t.vertexShader)throw new vS(`Conflicting vertex shader templates ${n} vs ${t.vertexShader}`,r,t);n=t.vertexShader,o=!0}if(t.vertexShaderModifiers)for(const i of t.vertexShaderModifiers)void 0!==i&&!1!==i&&l.push(i);if(t.defaultFragmentShader&&(a||(u=t.defaultFragmentShader)),t.fragmentShader){if(u&&a&&u!==t.fragmentShader)throw new vS(`Conflicting fragment shader templates ${u} vs ${t.fragmentShader}`,r,t);u=t.fragmentShader,a=!0}if(t.fragmentShaderModifiers)for(const i of t.fragmentShaderModifiers)void 0!==i&&!1!==i&&c.push(i);t.hints&&t.hints.forEach((t=>{t&&f.push(t)}))})),!n)throw new vS("No vertex shader template defined",r);if(!u)throw new vS("Fragment shader not defined",r);return{id:r,vertexShader:{id:e,template:n,modifiers:l},fragmentShader:{id:h,template:u,modifiers:c},hints:f}})(l,a);const S=h.get(u.id);if(c="new",S)return c="existing",g=S.vertexShaderSrc,m=S.fragmentShaderSrc,S;const v=u.vertexShader.id;let b=s.get(v);if(b)g=b.src,f="existing";else{f="new";const t=new IS(u.vertexShader.modifiers).build(TS[u.vertexShader.template]),{source:e,info:h}=n(t,"vertex");g=e,y=h,b=new WS(v,e,i,h),s.set(v,b),r.vertexShaders+=1}const x=u.fragmentShader;let M;const _=x.id;if(M=e.get(_),M)m=M.src,d="existing";else{d="new";const t=FS[x.template],s=new IS([...x.modifiers]).build(t),{source:h,info:o}=n(s,"fragment",u.hints);m=h,p=o,M=new HS(_,h,i,o),e.set(_,M),r.fragmentShaders+=1}const A=new US(b,M,i,u);return h.set(u.id,A),r.programs+=1,r.totalMs+=Mh.performance.now()-t,A}catch(t){throw br(0,(()=>{const t="Unexpected LightningChart JS rendering error.\nThis can mean a bug in the library, or that it is simply used in unsupported manner (passing wrong type to method, using disposed component, etc).";return Mh.alert(t),new Error(t)}))}}})(this),this.zE=dh(this.gl),this.VE=new lv(this),this.RO=(t=>{const i=Mh.document.createElement("canvas"),s=i.getContext("2d",{willReadFrequently:!0});if(!s)throw new yh("Failed to get Text canvas rendering context");return s.fillStyle="#fff",(h,r,n)=>{const o=`${r.style} ${r.weight} ${r.size*n}px ${r.family}`;s.font=o,s.textBaseline="alphabetic",s.textAlign="left";const a=s.measureText(h);if(0===a.width)return;const l=void 0!==a.actualBoundingBoxLeft&&void 0!==a.actualBoundingBoxRight?Math.ceil(a.actualBoundingBoxLeft+a.actualBoundingBoxRight):Math.ceil(a.width),u=a.width,c=Math.round(r.size*n),f=void 0!==a.actualBoundingBoxLeft?a.actualBoundingBoxLeft:0;i.width=l>0?l:u,i.height=2*c,s.font=o,s.textBaseline="alphabetic",s.textAlign="left",t?(s.clearRect(0,0,i.width,i.height),s.fillStyle="#fff"):(s.fillStyle="rgba(255,255,255,0)",s.fillRect(0,0,i.width,i.height),s.fillStyle="#000"),s.fillText(h,f,c);const d=s.getImageData(0,0,i.width,i.height);let g=0,m=0;const y=d.width;for(let t=0;t<d.height;t+=1){for(let i=0;i<y;i+=1)if(0!==d.data[t*y*4+4*i+3]){g=t;break}if(0!==g)break}for(let t=d.height-1;t>=0;t-=1){for(let i=0;i<y;i+=1)if(0!==d.data[t*y*4+4*i+3]){m=t;break}if(0!==m)break}const p=s.canvas.height/2-g,S=m-g+1,v=y,b=new Uint8ClampedArray(v*S*1);for(let t=0;t<S;t+=1)for(let i=0;i<v;i+=1)b[1*t*v+1*i+0]=d.data[(t+g)*v*4+4*i+3];return[b,{advance:u,offsetX:f,baseline:p,glyph:h,size:e(v,S)}]}})(r),this.NE=new hv(this),this.GE=this.PL([0,0,1,0,1,1,0,1]),this.WE=this.PL([0,0,1,0,0,1,0,1,1,0,1,1]),this.HE=this.PL([])}wL(t){return t!==this.UE&&(this.UE=t,"disabled"===t?this.gl.disable(this.gl.CULL_FACE):"cull-back"===t?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK)):"cull-front"===t&&(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT))),this}ML(){return this.UE||"disabled"}Np(t){return t!==this.Lp&&(this.Lp=t,t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST)),this}_L(){return this.Lp}jE(t){return this.sE=t,this}zO(){return this.sE}uE(t,i){let s;if(i){const e=this.OE.get(i);e&&e.size>=t&&e.size-t<1e6?s=i:this.UL(i)}return s||(s=this.gl.createBuffer(),this.OE.set(s,{size:t})),s}$E(t,i=this.gl.RGBA,s=!1,e,h,r=!1,n=this.gl.UNSIGNED_BYTE,o=i){const a=this.gl.createTexture();if(!a)throw new yh("Couldn't reserve Texture.");return this.gl.bindTexture(this.gl.TEXTURE_2D,a),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),t&&null===h?this.gl.texImage2D(this.gl.TEXTURE_2D,0,o,i,n,t):h&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,o,h.x,h.y,0,i,n,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,e?this.gl.NEAREST:this.gl.LINEAR),s?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,e?this.gl.NEAREST:this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),a}AO(t){this.gl.deleteTexture(t)}YL(){const t=this.gl.createFramebuffer();if(!t)throw new yh("Couldn't reserve Framebuffer.");return t}KL(t){this.gl.deleteFramebuffer(t)}XL(){const t=this.gl.createRenderbuffer();if(!t)throw new yh("Couldn't reserve Render buffer.");return t}ZL(t){this.gl.deleteRenderbuffer(t)}TL(t,i,s,e){return this.YE&&t===this.YE.x&&i===this.YE.y&&s===this.YE.width&&e===this.YE.height||(this.gl.viewport(t,i,s,e),this.YE={x:t,y:i,width:s,height:e}),this}bL(){return this.YE||{x:0,y:0,width:0,height:0}}FL(t,i,s,e){return this.kL(!0),this.gl.scissor(Math.max(t,0),Math.max(i,0),Math.max(s,0),Math.max(e,0)),this}kL(t){return t===this.XE||(t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this.XE=t),this}WL(t){return t!==this.IE&&(this.IE=t,t&&this.gl.enable(this.gl.BLEND),t||this.gl.disable(this.gl.BLEND)),this}AL(){return this.IE}LE(t,i,s,e){return t?(void 0!==t&&void 0!==i&&(void 0!==s&&void 0!==e?this.gl.blendFuncSeparate(t,i,s,e):this.gl.blendFunc(t,i)),this):(this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this)}xL(){return void 0!==this.XE&&this.XE}OL(t,i){const s=new uv(this,t),e=i(s.uniform,s.attribute,s,s.uniformOptional);s.finish(e)}UL(t){this.gl.deleteBuffer(t),this.OE.delete(t)}ZE(t,i,s){this.EL(t.uniform("uCenter"),i.center).EL(t.uniform("uDistance"),i.distance).hE(t.uniform("uBounds"),i.bounds).zL(t.uniform("uAspect"),i.aspectRatio);const e=s.getColorStops();if(e.length<2)throw new Error("Minimum two color stops required");for(let i=0;i<e.length;i+=1)this.VL(t.uniform(`color_${i}`),e[i].color).zL(t.uniform(`stop_${i}`),e[i].offset);return this}KE(t,i,s){this.EL(t.uniform("uStartPoint"),i.startPoint).EL(t.uniform("uEndPoint"),i.endPoint).hE(t.uniform("uBounds"),i.bounds);const e=s.getColorStops();if(e.length<2)throw new Error("Minimum two color stops required");for(let i=0;i<e.length;i+=1)this.VL(t.uniform(`color_${i}`),e[i].color).zL(t.uniform(`stop_${i}`),e[i].offset);return this}cr(t){const i=this.JL.get(t);if(!i){const i=new SS(this);return this.JL.set(t,i),i}return i}qE(t){const i=this.QL.get(t);if(!i){const i=new $S(this,t);return this.JE(t,i),i}return i}JE(t,i){this.QL.set(t,i)}RE(){const t=this.gl,i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,1,1,0,t.ALPHA,t.UNSIGNED_BYTE,new Uint8ClampedArray([0]));const s=0===t.getError();return s||!1!==this.Yd.do&&Mh.console.info("LightningChart JS - Uint8ClampedArray is not supported as texture data. The above WebGL error/warning is from the feature detection. There is nothing to worry about."),t.deleteTexture(i),s}QE(t,i,s,e){if(s)this.LL(i,e,{location:t.attribute("aPos_highpart"),size:2},{location:t.attribute("aPos_lowpart"),size:2});else{const s=t.attribute("aPos");this.yE(s,i),void 0!==e&&this.SE(s,e)}return this}tR(){this.wE.WEBGL_lose_context&&this.wE.WEBGL_lose_context.loseContext()}iR(t){if(this.sR&&this.sR.bufferIdsCount>=t)return this.sR.buffer;this.sR&&(this.UL(this.sR.buffer),this.sR=void 0);const i=t,s=new Float32Array(i);for(let t=0;t<i;t+=1)s[t]=t;const e=this.PL(s);return this.sR={buffer:e,bufferIdsCount:i},e}eR(){return this.gl2?void 0:"attribute"}hR(t,i){if("attribute"===this.eR()){const s=this.iR(i);this.LL(s,void 0,{location:t.attribute("aVertexID"),size:1})}return this}rR(){return this.gl2?void 0:"attribute"}nR(t,i){if("attribute"===this.rR()){const s=this.iR(i);this.LL(s,1,{location:t.attribute("aInstanceID"),size:1})}return this}oR(t,i,s,e,h,r,n,o,a){const l=t.createBuffer();return this.PE.push(l),t.bindFramebuffer(t.FRAMEBUFFER,i),t.bindBuffer(t.PIXEL_PACK_BUFFER,l),t.bufferData(t.PIXEL_PACK_BUFFER,a.byteLength,t.STREAM_READ),t.readPixels(s,e,h,r,n,o,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),nv(t,t.PIXEL_PACK_BUFFER,l,0,a).then((()=>a)).catch((t=>{throw t})).finally((()=>{t.deleteBuffer(l),this.PE.splice(this.PE.indexOf(l),1)}))}aR(t,i,s,e,h,r,n,o){const a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,t),a.readPixels(i,s,e,h,r,n,o),a.bindFramebuffer(a.FRAMEBUFFER,null)}lR(t){const i=this.tE.get(t);if(!i){const i=this.gl.createTexture();if(!i)throw new yh("Couldn't reserve Texture.");this.gl.bindTexture(this.gl.TEXTURE_2D,i);const e=[];let h=255;for(let i=0;i<t.length;i+=1){for(let s=0;s<t[i];s+=1)e.push(h);h=255===h?0:255}const r=e.length;if(!this.gl2&&0!=((s=e.length)&s-1)){const t=(t=>{t-=1;for(let i=1;i<32;i<<=1)t|=t>>1;return t+1})(e.length);for(let i=e.length;i<t;i+=1)e[i]=0}this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.pixelStorei(this.gl.PACK_ALIGNMENT,1),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,e.length,1,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,new Uint8Array(e)),this.gl.bindTexture(this.gl.TEXTURE_2D,null);const n={uR:i,cR:r,jw:e.length};return this.tE.set(t,n),n}var s;return i}fR(t,i,s,e){const{uniform:h}=t;return this.zL(h("uLookupMin"),i.min).zL(h("uLookupMax"),i.max).zL(h("uLookupTextureHeightPx"),s.textureHeight).RL(h("uLookupTexture"),s.texture,e).VL(h("uFallbackColor"),i.getFallbackColor()),this}}const nv=async(t,i,s,e,h,r,n)=>{const o=t.fenceSync(t.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),((t,i,s)=>{const e=void 0!==s.flags?s.flags:0,h=void 0!==s.retryTimeout?s.retryTimeout:10;return new Promise(((s,r)=>{const n=()=>{const o=t.clientWaitSync(i,e,0);return o===t.WAIT_FAILED?r(new Error(`WebGL Sync WAIT_FAILED ${t.getError()}`)):o!==t.TIMEOUT_EXPIRED?s(void 0):void Mh.setTimeout(n,h)};Mh.setTimeout(n,0)}))})(t,o,{retryTimeout:10}).then((()=>(t.deleteSync(o),t.bindBuffer(i,s),t.getBufferSubData(i,e,h,r,n),t.bindBuffer(i,null),h))).catch((t=>{throw t}))};class ov{HL(t){if(t instanceof Rn||t instanceof Fg){const i=t.zi();this.dR=i.x.scaling,this.gR=-i.x.displacement,this.mR=i.y.scaling,this.yR=-i.y.displacement,this.pR=i.x.highPrecisionOffset,this.SR=i.x.highPrecisionOffset-Math.fround(i.x.highPrecisionOffset),this.vR=i.y.highPrecisionOffset,this.bR=i.y.highPrecisionOffset-Math.fround(i.y.highPrecisionOffset)}else t instanceof zn&&(this.MixedScaleXY=t.zi());return this}GL(){return[this.gR,this.yR]}NL(){return[this.dR,this.mR]}xR(){return[this.pR,this.vR]}MR(){return[this.SR,this.bR]}}class av{constructor(){this.dR=0,this.mR=0,this._R=0,this.gR=0,this.yR=0,this.AR=0}wR(t){return this.dR=t.jt(),this.gR=t.getInnerStart()+.5*this.dR*t.$t(),this}kR(t){return this.mR=t.jt(),this.yR=t.getInnerStart()+.5*this.mR*t.$t(),this}CR(t){return this._R=t.jt(),this.AR=t.getInnerStart()+.5*this._R*t.$t(),this}NL(){return[this.dR,this.mR,this._R]}GL(){return[this.gR,this.yR,this.AR]}TR(t,i,s,h,r){const o=e(2*(t-s.x)/(s.width-s.x)-1,2*(i-s.y)/(s.height-s.y)-1),a=oS.multiply(h,[o.x,o.y,r,1]);return n(a[0],a[1],a[2])}}class lv{constructor(t){this.XB=t}YB(t,i,s,e,h,r=0){const n=this.XB,o=void 0===e;if(!(e=e||n.YL()))throw new yh("Could not bind a framebuffer.");const a=n.bL(),l=n.AL();n.WL(!1),n.CE((()=>{n.TL(0,0,s.x,s.y),t()}),e,i,r),o&&n.KL(e),this.XB.FE(h),this.XB.TL(a.x,a.y,a.width,a.height),n.WL(l)}}class uv{constructor(t,i){this.FR=[],this.IR=[],this.uniform=t=>{const i=this.shader.ZO(t);return this.IR.push({name:t,optional:!1}),i},this.uniformOptional=t=>{const i=this.shader.KO(t);return this.IR.push({name:t,optional:!0}),i},this.attribute=t=>{const i=this.shader.qO(t);return this.FR.push({name:t,location:i}),i},this.glUtils=t,this.shader=i}finish(t){for(const t of this.FR)this.glUtils.vE(t.location),this.glUtils.SE(t.location,0)}}class cv extends Ua{constructor(t,i,s,e,h){super(t,i,s,e),this.PR=new Map,this.DR=t,this.BR=i,this.XB=t.OR(),this.LR=h,this.BR=i}ER(t){return!1}_O(){return this}YB(t){if(!this.LR||0!==t||0===this.PR.size)return this;const i=Array.from(this.PR.values()).map((t=>t.RR.filter((t=>t.zR)).map((t=>t.zs)).flat().filter((t=>void 0!==t)).filter((t=>t.getVisible())))).flat();if(0===i.length)return this;const s=this.LR;return this.XB.NE.$L(i,s),this}le(){return this}oi(){return 0}ni(){return 0}li(){return 0}ai(){return 0}Rl(){return 0}zl(){return 0}Gs(t,i){const s={RR:[]},e=(t,i)=>{const e={zs:t||[],zR:void 0===i||i};s.RR.push(e);const h={Zs:t=>(e.zs=t,h),Qs:t=>(e.zR=t,h),ie:()=>e.zR};return h},h={};Object.keys(i).forEach((t=>{const s=i[t],r=s.shapes||[],n=void 0===s.themeEffectEnabled||s.themeEffectEnabled,o=e(r,n);h[t]=o}));const r={Qg:e,...h};this.PR.set(t,s);const n=t.onDispose((()=>{this.PR.delete(t),t.offDispose(n)}));return r}}function fv(i,s,e,h,r,n){let o=s.x.qt(i.max.x),a=s.x.qt(i.min.x),l=s.y.qt(i.max.y),u=s.y.qt(i.min.y),c=o-a,f=l-u;if(c<1){const t=(a+o)/2;a=t-.5,o=t+.5,c=1}if(f<1){const t=(u+l)/2;u=t-.5,l=t+.5,f=1}const d=c/f,g=c*e.x,m=f*e.y,y=c-g,p=f-m,S=g>y?[y,g]:[g,y],v=m>p?[p,m]:[m,p];let b,x,M=1,_=1;switch(h){default:case t.GradientExtent.closestSide:if(b=S[0]/c,x=v[0]/f,r===t.GradientShape.circle){const t=Math.min(b*d,x);M=t,_=t}else M=b*d,_=x;break;case t.GradientExtent.farthestSide:if(b=S[1]/c,x=v[1]/f,r===t.GradientShape.circle){const t=Math.max(b*d,x);M=t,_=t}else M=b*d,_=x;break;case t.GradientExtent.closestCorner:if(x=v[0]/f,r===t.GradientShape.circle){b=S[0]/c*d;const t=Math.sqrt(b*b+x*x);M=t,_=t}else{b=S[0]/c;const t=Math.sqrt(b*b+x*x);M=t*d,_=t}break;case t.GradientExtent.farthestCorner:if(x=v[1]/f,r===t.GradientShape.circle){b=S[1]/c*d;const t=Math.sqrt(b*b+x*x);M=t,_=t}else{b=S[1]/c;const t=Math.sqrt(b*b+x*x);M=t*d,_=t}}return{bounds:[a*n,u*n,c*n,f*n],center:[e.x*d,e.y],distance:[Math.max(M,1e-4),Math.max(_,1e-4)],aspectRatio:d}}function dv(t,i,s,h){const r=i.x.qt(t.max.x),n=i.x.qt(t.min.x),o=i.y.qt(t.max.y),a=i.y.qt(t.min.y),l=r-n,u=o-a,c=Math.abs(l*Math.sin(s))+Math.abs(u*Math.cos(s)),f=e(l/2-Math.sin(s)*(c/2),u/2-Math.cos(s)*(c/2)),d=e(l/2+Math.sin(s)*(c/2),u/2+Math.cos(s)*(c/2));return{bounds:[n*h,a*h,l*h,u*h],startPoint:[f.x*h,f.y*h],endPoint:[d.x*h,d.y*h]}}const gv=(t,i,s)=>((t,i,s,h)=>{const r=[];let n=0;const o=on(i,s/2);let a,l,u,c,f=t[t.length-1],d=0;for(let s=0;s<t.length;s+=1){a=t[s],l=s===t.length-1?t[0]:t[s+1],s>0&&(f=t[s-1]),_h(a,f)&&(f=an(a,hn(on(ln(l,a),-1)))),_h(a,l)&&(l=an(a,hn(on(ln(f,a),-1))));const h=cn(f,i),g=cn(a,i),m=cn(l,i),y=hn(ln(g,h)),p=hn(ln(m,g)),S=an(y,p),v=e(-S.y,S.x),b=e(-y.y,y.x),x=1/dn(v,b),M=nn(v),_=hn(ln(y,p)),A=Math.sign(dn(v,_))||1,w=un(v,on(o,x)),k=un(v,on(o,-x));if(M<1||x===1/0){let t={x:0,y:0},i={x:0,y:0},s={x:0,y:0},h={x:0,y:0};const u=e(-p.y,p.x),c=Math.sign(dn(y,v))||A,g=un(b,on(o,c)),m=un(u,on(o,c));1===A?(t=g,i=k,s=m,h=k):(t=w,i=g,s=w,h=m);const S=4*Hr(f,a),M=4*Hr(a,l);(x>S||x>M)&&(1===A?(t=g,i=m,s=m,h=g):(t=m,i=g,s=g,h=m));const _=an(a,t),C=an(a,i),T=an(a,s),F=an(a,h);r[n]=_,n+=1,r[n]=C,n+=1,r[n]=T,n+=1,r[n]=F,n+=1,d=4}else{const t=an(a,w),i=an(a,k);r[n]=t,n+=1,r[n]=i,n+=1,d=2}c=u,u=t[s]}return r[n]=r[0],n+=1,r[n]=r[1],n+=1,[r,d,[c,u]]})(t,i,s)[0];class mv extends nl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.HO=new ov,this.VR=Or,this.NR=Or,this.DR=t,this.BR=i,this.GR=r,this.WR=n,this.XB=t.OR()}HR(t,i){let s=0,e=Array(0),h=0;if(void 0!==i){const h=t.length,r=Array(h+i.length);let n=0,o=0;for(;n<h;)r[o]=t[n],r[o+1]=i[n],o+=2,n+=1;e=r,s=this.XB.gl.TRIANGLE_STRIP}else e=t,s=this.XB.gl.TRIANGLE_FAN;const r=sr(e,this.Jt.Ui());return h=e.length,[e,this.XB.PL(r),h,s]}UR(t,i,s,e){let h=Array(0);if(void 0===i)h=t;else{let s=0,e=0;const r=t.length;for(s=0,e=r,h=Array(r+i.length-2),i.reverse();s<r;)h[s]=t[s],h[e]=i[s],e+=1,s+=1}if(1===s||-1===s)return[sr(h,this.Jt.Ui()),h.length];const r=gv(h,e,s);return[sr(r,this.Jt.Ui()),r.length]}le(){const t=this.va(),i=this.Ko.M();if(this.ba()){const s=Math.abs(this.ot.M()-this.hu.M());this.HO.HL(this.Jt);const h=this.Jt.rs()||t,r=this.Jt.os(),n=this.ru.M(),o=this.nu.M(),[l,u]=Kg(this.Ca.M(),this.hu.M(),this.ot.M(),this.ru.M(),this.nu.M(),this.au.M()),c=this.ou.M(),f=c>0?Kg(this.Ca.M(),this.hu.M(),this.ot.M(),this.ru.M()*c/100,this.nu.M()*c/100,u)[0]:[this.Ca.M()],d=l.length-1;if(2===d){const t=(l[d-1].x+l[1].x)/2,i=(l[d-1].y+l[1].y)/2;this.lu=e(t,i)}else{const t=Math.floor(d/2);this.lu=e(l[t].x,l[t].y)}this.uu=l[1];const g=l.length-1;this.cu=l[g],this.ou.M()&&(l.shift(),f.shift());let m=!1;(this.Ca.o||this.hu.o||this.ot.o||this.ru.o||this.nu.o||this.ou.o||this.au.o||h)&&(this.NR=a(e(this.ja().x-n,this.ja().y-o),e(this.ja().x+n,this.ja().y+o)),m=!0,this.Ca.o=!1,this.hu.o=!1,this.ot.o=!1,this.ru.o=!1,this.nu.o=!1,this.ou.o=!1,this.au.o=!1);const y=this.pa();(m||y)&&this.Qe!==Ie&&(this.ou.M()?(this.jR&&this.XB.UL(this.jR),[this.$R,this.jR,this.YR,this.XR]=this.HR(l,f)):(this.jR&&this.XB.UL(this.jR),[this.$R,this.jR,this.YR,this.XR]=this.HR(l,void 0)),th(this.Qe)?this.ZR=fv(this.NR,this.Jt,this.Qe.getPosition(),this.Qe.getExtent(),this.Qe.getShape(),this.XB.zO()):eh(this.Qe)?this.KR=dv(this.NR,this.Jt,this.Qe.getAngle(!0),this.XB.zO()):(this.ZR=void 0,this.KR=void 0));const p=Oe(this.Qe)&&this.Qe,S=eh(this.Qe)&&this.Qe,v=th(this.Qe)&&this.Qe,b=p||S||v;y&&(this.qR=b?this.XB.BL(sv["2D"],sv.Color({dataType:th(this.Qe)||eh(this.Qe)?["gradient",this.Qe]:"uniform"}),sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0})):void 0,this.xa(this.Qe));const x=this.th;if(to(x)&&(m||this.Aa(x.getThickness())||h)){this.ou.M()?360===s?(l.pop(),f.pop(),[this.JR,this.QR]=this.UR(l,void 0,x.getThickness(),r),this.tz&&this.JR?this.XB.dE(this.tz,this.JR,!0):!this.tz&&this.JR?this.tz=this.XB.PL(this.JR,!0):this.tz&&!this.JR&&(this.XB.UL(this.tz),this.tz=void 0),[this.iz,this.sz]=this.UR(f,void 0,x.getThickness(),r),this.ez&&this.iz?this.XB.dE(this.ez,this.iz,!0):!this.ez&&this.iz?this.ez=this.XB.PL(this.iz,!0):this.ez&&!this.iz&&(this.XB.UL(this.ez),this.ez=void 0)):([this.JR,this.QR]=this.UR(l,f,x.getThickness(),r),this.tz&&this.JR?this.XB.dE(this.tz,this.JR,!0):!this.tz&&this.JR?this.tz=this.XB.PL(this.JR,!0):this.tz&&!this.JR&&(this.XB.UL(this.tz),this.tz=void 0),this.iz&&(this.ez&&this.XB.UL(this.ez),this.ez=void 0,this.sz=0)):(360===s&&(l.shift(),l.pop()),[this.JR,this.QR]=this.UR(l,void 0,x.getThickness(),r),this.tz&&this.JR?this.XB.dE(this.tz,this.JR,!0):!this.tz&&this.JR?this.tz=this.XB.PL(this.JR,!0):this.tz&&!this.JR&&(this.XB.UL(this.tz),this.tz=void 0));const t=x.getFillStyle();th(t)?this.hz=fv(this.NR,this.Jt,t.getPosition(),t.getExtent(),t.getShape(),this.XB.zO()):eh(t)?this.rz=dv(this.NR,this.Jt,t.getAngle(!0),this.XB.zO()):(this.hz=void 0,this.rz=void 0),this.nz=t===Ie?void 0:this.XB.BL(sv["2D"],sv.Color({dataType:th(t)||eh(t)?["gradient",t]:"uniform"}),sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0})),this.wa(x)}if(m){let t=1,i=1;to(x)&&(t=x.getThickness()*r.x,i=x.getThickness()*r.y),this.VR=a(e(this.NR.min.x-t,this.NR.min.y-i),e(this.NR.max.x+t,this.NR.max.y+i))}this.oz=i&&b?this.oz||this.XB.BL(sv["2D"],sv.MousePicking,sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0})):void 0,this.az=i&&this.th!==rh?this.az||this.XB.BL(sv["2D"],sv.MousePicking,sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0})):void 0}return this}YB(t){if(this.ba()){const i=1===t?this.oz:this.qR,s=this.Qe,e=this.jR;i&&e&&this.XB.BO(i).OL(i,((i,h,r,n)=>{if(this.XB.EL(i("uScale"),this.HO.NL()).EL(i("uDisp"),this.HO.GL()).EL(n("uScaleStart_highpart"),this.HO.xR()).EL(n("uScaleStart_lowpart"),this.HO.MR()).QE(r,e,this.Jt.Ui(),void 0).zL(i("uIsHighlighted"),1===t||2===t?0:this.ta).VL(i("uHighlightColorOffset"),this.ha).zL(i("uRenderEffectMask"),2===t?1:0),1===t)this.XB.VL(i("uColor"),this.WR);else if(Oe(s))this.XB.VL(i("uColor"),s.getColor());else if(th(s)){if(!this.ZR)return!1;this.XB.ZE(r,this.ZR,s)}else if(eh(s)){if(!this.KR)return!1;this.XB.KE(r,this.KR,s)}return this.XB.Ly(this.XR,this.YR),!0}));const h=this.th;to(h)&&(void 0!==this.tz&&this.lz(t,this.tz,this.QR,h),void 0!==this.ez&&this.lz(t,this.ez,this.sz,h))}return this}lz(t,i,s,e){const h=1===t?this.az:this.nz,r=e.getFillStyle();h&&this.XB.BO(h).OL(h,((h,n,o,a)=>{if(this.XB.EL(h("uScale"),this.HO.NL()).EL(h("uDisp"),this.HO.GL()).QE(o,i,this.Jt.Ui(),void 0).zL(h("uIsHighlighted"),1===t||2===t?0:this.ta).VL(h("uHighlightColorOffset"),this.ha).zL(h("uRenderEffectMask"),2===t?1:0),1===t)this.XB.VL(h("uColor"),this.WR);else if(Oe(r))this.XB.VL(h("uColor"),r.getColor());else if(th(r)){if(!this.hz)return!1;this.XB.ZE(o,this.hz,r)}else if(eh(r)){if(!this.rz)return!1;this.XB.KE(o,this.rz,r)}const l=e.getThickness(),u=-1===l||1===l;return this.XB.Ly(u?this.XB.gl.LINE_LOOP:this.XB.gl.TRIANGLE_STRIP,s),!0}))}ER(t){return this.GR===t&&{}}_O(){return this.uz&&(this.XB.UL(this.uz),this.uz=void 0),this.cz&&(this.XB.UL(this.cz),this.cz=void 0),this.jR&&(this.XB.UL(this.jR),this.jR=void 0),this.tz&&(this.XB.UL(this.tz),this.tz=void 0),this.ez&&(this.XB.UL(this.ez),this.ez=void 0),this.qR=void 0,this.nz=void 0,this.oz=void 0,this.az=void 0,this}oi(){return this.NR.max.x}ni(){return this.NR.min.x}li(){return this.NR.max.y}ai(){return this.NR.min.y}Rl(){return Tr(this.th)}zl(){return Tr(this.th)}}class yv{constructor(){this.first=0,this.second=1,this.third=2,this.fourth=3,this.fifth=4,this.sixth=5}fz(t){return this.first=t,this.second=t+1,this.third=t+2,this.fourth=t+3,this.fifth=t+4,this.sixth=t+5,t+=6,this}dz(){return this.first=this.second,this.second=this.third,this.third=this.fourth,this.fourth=this.fifth,this.fifth=this.sixth,this.sixth+=1,this}gz(){return this.first=this.third,this.second=this.fourth,this.third=this.fifth,this.fourth=this.sixth,this.fifth=this.fourth+1,this.sixth=this.fifth+1,this}mz(t){const i=t.buffer;let{position:s}=t;return i[s]=this.first,i[s+1]=this.second,i[s+2]=this.third,s+=3,t.position=s,t.next&&this.dz(),this}yz(t){const i=t.buffer;let{position:s}=t;return i[s]=this.first,i[s+1]=this.third,i[s+2]=this.second,i[s+3]=this.third,i[s+4]=this.fourth,i[s+5]=this.second,s+=6,t.position=s,t.next&&this.gz(),this}pz(t,i){i.next=!0,6*t>=i.buffer.length&&(i.buffer=Array(6*t));for(let s=0;s<t;s+=1)this.yz(i);return this}Sz(){return[this.first,this.second,this.third,this.fourth,this.fifth,this.sixth]}}const pv=((t=0)=>(new yv).fz(t))(),Sv=(t,i,s,e,h,r,n,o,a,l)=>(void 0===o&&void 0===n||pv.dz(),r.push(t,i),h.push(pv.first,pv.second,pv.third),o=void 0,n=void 0,h.push(pv.third,pv.fourth,pv.second),a=pv.third,pv.gz(),l&&r.push(s,e),[n,o,a]),vv=(t,i,s,e,h,r,n,o,a,l,u)=>{void 0===a&&void 0===o||pv.dz(),n.push(t,i),h.push(pv.first,pv.second,pv.third);const c=xn(t,s,i,e);return a=void 0,void 0!==c&&(void 0===a&&(a=c),n.push(a),r.push(pv.third,pv.fourth,pv.fifth),l=pv.fourth),pv.gz(),u&&n.push(s,e),[o,a,l]},bv=(t,i,s,e,h,r,n,o,a,l)=>(void 0===n&&void 0===r||pv.dz(),h.push(t,i),e.push(pv.first,pv.second,pv.third),r=s,n=void 0,o=pv.third,l?h.push(s):a=!0,[r,n,o,a]),xv=(t,i,s,e,h,r,n,o,a,l,u)=>(0!==r.length?(void 0===o&&void 0===n||pv.dz(),pv.dz()):a>0&&(pv.dz(),u>0&&(u-=1)),r.push(t),h.push(pv.first,pv.second,pv.third),a=pv.second,n=t,o=void 0,l&&r.push(s,e),[n,o,a,u]),Mv=(t,i=0)=>{pv.fz(i);const[s,e]=t,h=s.length,r=[],n=[],o=[];let a,l,u=i,c=0,f=s[c],d=e[c],g=s[c],m=e[c],y=!1,p=u>0?g.y!==m.y?2:1:0;if(h>1)for(;c<h-1;){g=f,m=d,c+=1,f=s[c],d=e[c];const t=c===h-1;g.y>m.y?f.y>d.y?[a,l,u]=Sv(g,m,f,d,r,o,a,l,u,t):f.y<d.y?[a,l,u]=vv(g,m,f,d,r,n,o,a,l,u,t):[a,l,u,y]=bv(g,m,f,r,o,a,l,u,y,t):g.y<m.y?f.y<d.y?[a,l,u]=Sv(g,m,f,d,n,o,a,l,u,t):f.y>d.y?[a,l,u]=vv(g,m,f,d,n,r,o,a,l,u,t):[a,l,u,y]=bv(g,m,f,n,o,a,l,u,y,t):f.y===d.y?(a=g,y&&(o.push(g),y=!1,pv.dz()),0===o.length&&u>0&&p>0&&(p-=1)):f.y>d.y?[a,l,u,p]=xv(g,0,f,d,r,o,a,l,u,t,p):[a,l,u,p]=xv(g,0,f,d,n,o,a,l,u,t,p)}return[o,new Uint16Array(r),new Uint16Array(n),u,p]};class _v extends rl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.HO=new ov,this.vz=0,this.el=Array(),this.bz=0,this.xz=new Uint16Array(0),this.Mz=new Uint16Array(0),this.DR=t,this.BR=i,this.GR=r,this.WR=n,this.XB=t.OR()}le(){const t=this.va(),i=this.Ko.M(),s=this.ml;if(this.ba()){this.HO.HL(this.Jt);const e=this.Jt instanceof zn==0,h=e?this.Jt.os():void 0,r=this.Zl(),n=this.Jt.rs()||t,o=s||this.Gl.o||n&&"disabled"!==r.type;if(o){if(this.vz=0,this.xz=new Uint16Array(0),this.Mz=new Uint16Array(0),this.el.length=0,this.bz=0,this.Wl>1){const[t,i,s,n]=Mv([e?r.packager(this.Vl,h,.5):this.Vl,e?r.packager(this.Nl,h,.5):this.Nl]);this.vz=n,this.xz=i,this.Mz=s,this.el=t,this.bz=t.length}this.Gl.o=!1}if(this.Ul&&this.ul[0].length>1){const[t,i]=this.ul,s=t.length,[n,o,a,l,u]=Mv([e?r.packager(t,h,.5):t,e?r.packager(i,h,.5):i],this.vz);this.vz=l;const c=n.length;for(let t=u;t<c;t+=1)this.el[this.bz]=n[t],this.bz+=1;this.xz=Mn(this.xz,o),this.Mz=Mn(this.Mz,a);for(let e=u>0||this.Wl>0?1:u;e<s;e+=1)this.Vl[this.Wl]=t[e],this.Nl[this.Wl]=i[e],this.Wl+=1;this.Hl=!0,this.Ul=!1,this.ul=[]}const a=this.Qe,l=this.Sa!==a,u=Oe(a)&&a,c=th(a)&&a,f=eh(a)&&a,d=ze(a)&&["x","y"].includes(a.getLookUpProperty())&&a,g=u||c||f||d,m=this.jl,y=this.su!==m,p=Oe(m)&&m,S=th(m)&&m,v=eh(m)&&m,b=ze(m)&&["x","y"].includes(m.getLookUpProperty())&&m,x=p||S||v||b;if((l||t)&&(this._z=g?this.XB.BL(sv["2D"],sv.Color({dataType:f?["gradient",f]:c?["gradient",c]:d?["lookup",d.getLookUpProperty()]:"uniform"}),sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0})):void 0,d?this.Az=this.DR.wz(d.lut,this.Az):this.Az&&(this.DR.kz(this.Az),this.Az=void 0)),c?this.ZR=fv(this.aa(),this.Jt,c.getPosition(),c.getExtent(),c.getShape(),this.XB.zO()):f?this.KR=dv(this.aa(),this.Jt,f.getAngle(!0),this.XB.zO()):(this.ZR=void 0,this.KR=void 0),(y||t)&&(this.Cz=x?this.XB.BL(sv["2D"],sv.Color({dataType:v?["gradient",v]:S?["gradient",S]:b?["lookup",b.getLookUpProperty()]:"uniform"}),sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0})):void 0,b?this.Tz=this.DR.wz(b.lut,this.Tz):this.Tz&&(this.DR.kz(this.Tz),this.Tz=void 0)),S?this.Fz=fv(this.aa(),this.Jt,S.getPosition(),S.getExtent(),S.getShape(),this.XB.zO()):v?this.Iz=dv(this.aa(),this.Jt,v.getAngle(!0),this.XB.zO()):(this.Fz=void 0,this.Iz=void 0),(t||this.Hl||o)&&this.Hl||o){const t=this.el,i=sr(t,this.Jt.Ui());this.Pz=this.XB.PL(i,!1,this.Pz),g&&(this.Dz=this.XB.gE(this.xz,this.Dz),this.Bz=this.xz.length),x&&(this.Oz=this.XB.gE(this.Mz,this.Oz),this.Lz=this.Mz.length),this.Hl=!1}this.oz=i&&(x||g)?this.oz||this.XB.BL(sv["2D"],sv.MousePicking,sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0})):void 0,this.xa(this.Qe),this.eu(this.jl),this.ml=!1}return this}YB(t){const i=this.Qe,s=this.jl,e=1===t?this.oz:this.Cz;if(e&&this.Pz&&this.Oz){const i=this.Pz,h=this.Oz;this.XB.BO(e).OL(e,((e,r,n,o)=>{if(this.XB.QE(n,i,this.Jt.Ui(),void 0).ME(h).zL(e("uIsHighlighted"),1===t||2===t?0:this.ta).VL(e("uHighlightColorOffset"),this.ha).zL(e("uRenderEffectMask"),2===t?1:0),this.Jt instanceof Rn||this.Jt instanceof Fg?this.XB.EL(e("uScale"),this.HO.NL()).EL(e("uDisp"),this.HO.GL()).EL(o("uScaleStart_highpart"),this.HO.xR()).EL(o("uScaleStart_lowpart"),this.HO.MR()):this.Jt instanceof zn&&this.XB.EL(o("uScaleStart"),this.HO.MixedScaleXY.uScaleStart).EL(o("uScaleStartLog"),this.HO.MixedScaleXY.uScaleStartLog).EL(o("uScaleInterval"),this.HO.MixedScaleXY.uScaleInterval).EL(o("uScaleIntervalLog"),this.HO.MixedScaleXY.uScaleIntervalLog).EL(e("uViewportStart"),this.HO.MixedScaleXY.uViewportStart).EL(e("uViewportSize"),this.HO.MixedScaleXY.uViewportSize),1===t)this.XB.VL(e("uColor"),this.WR);else if(Oe(s))this.XB.VL(e("uColor"),s.getColor());else if(th(s)){if(!this.Fz)return!1;this.XB.ZE(n,this.Fz,s)}else if(eh(s)){if(!this.Iz)return!1;this.XB.KE(n,this.Iz,s)}else ze(s)&&this.Tz&&this.XB.fR(n,s.lut,this.Tz,0);return this.XB._E(this.Lz),!0}))}const h=1===t?this.oz:this._z;if(h&&this.Pz&&this.Dz){const s=this.Pz,e=this.Dz;this.XB.BO(h).OL(h,((h,r,n,o)=>{if(this.XB.QE(n,s,this.Jt.Ui(),void 0).ME(e).zL(h("uIsHighlighted"),1===t||2===t?0:this.ta).VL(h("uHighlightColorOffset"),this.ha).zL(h("uRenderEffectMask"),2===t?1:0),this.Jt instanceof Rn||this.Jt instanceof Fg?this.XB.EL(h("uScale"),this.HO.NL()).EL(h("uDisp"),this.HO.GL()).EL(o("uScaleStart_highpart"),this.HO.xR()).EL(o("uScaleStart_lowpart"),this.HO.MR()):this.Jt instanceof zn&&this.XB.EL(o("uScaleStart"),this.HO.MixedScaleXY.uScaleStart).EL(o("uScaleStartLog"),this.HO.MixedScaleXY.uScaleStartLog).EL(o("uScaleInterval"),this.HO.MixedScaleXY.uScaleInterval).EL(o("uScaleIntervalLog"),this.HO.MixedScaleXY.uScaleIntervalLog).EL(h("uViewportStart"),this.HO.MixedScaleXY.uViewportStart).EL(h("uViewportSize"),this.HO.MixedScaleXY.uViewportSize),1===t)this.XB.VL(h("uColor"),this.WR);else if(Oe(i))this.XB.VL(h("uColor"),i.getColor());else if(th(i)){if(!this.ZR)return!1;this.XB.ZE(n,this.ZR,i)}else if(eh(i)){if(!this.KR)return!1;this.XB.KE(n,this.KR,i)}else ze(i)&&this.Az&&this.XB.fR(n,i.lut,this.Az,0);return this.XB._E(this.Bz),!0}))}return this}ER(t){return this.GR===t&&{}}oi(){return this.al.max.x}ni(){return this.al.min.x}li(){return this.al.max.y}ai(){return this.al.min.y}Rl(){return 0}zl(){return 0}Gx(t){this.kl()>0&&this.le();const[i,s]=this.Sl(),e=i.length>2&&i[1].x<i[0].x,h=La(i,t,Ba.NearestX,this.$l,this.Yl,this.Jt,this.$s.Jt,this.al,"x",e);if(void 0===h)return;const r=[i[h],s[h]];return Number.isNaN(r[0].y)||Number.isNaN(r[1].y)?void 0:r}fk(t){this.kl()>0&&this.le();const[i,s]=this.Sl(),e=i.length;if(0===e)return;const h=this.$l?1:0,r=e-(this.Yl?2:1),n=i.length>2&&i[1].x<i[0].x,o=Na(i,uh(t,this.$s.Jt,this.Jt),"x",n,h,r);if(!o)return;const a=[$r(i[o.a],i[o.b],o.lerpAmount),$r(s[o.a],s[o.b],o.lerpAmount)];return Number.isNaN(a[0].y)||Number.isNaN(a[1].y)?void 0:a}dispose(){return super.dispose(),this.Oz&&(this.XB.UL(this.Oz),this.Oz=void 0),this.Dz&&(this.XB.UL(this.Dz),this.Dz=void 0),this.Pz&&(this.XB.UL(this.Pz),this.Pz=void 0),this.Az&&(this.DR.kz(this.Az),this.Az=void 0),this.Tz&&(this.DR.kz(this.Tz),this.Tz=void 0),this}_O(){return this.dispose(),this}}class Av extends aS{constructor(t,i){super(t),this.Ez=i;const{vertices:s,indices:e,indicesCount:h,drawMode:r}=this.Rz();this.zz=t.PL(s),this.Vz=t.gE(e),this.Nz=h,this.Gz=r}BO(t,i){return this.XB.LL(this.zz,0,{location:t.attribute("aSegmentPosition"),size:2},{location:t.attribute("aSegmentSide"),size:1},{location:i?t.attribute("aSegmentInside"):void 0,size:1}),this.XB.ME(this.Vz),this}Ly(t,i,s){return this.XB.kE(void 0!==i?i:this.Gz,this.Nz,s||0,t,this.XB.gl.UNSIGNED_BYTE),this}Rz(){const t=[];[1,0].forEach((i=>{const s=1===i?.5*Math.PI:1.5*Math.PI;for(let e=0;e<=this.Ez;e+=1){const h=s-e*Math.PI/this.Ez;t.push(.5*Math.cos(h),.5*Math.sin(h),i,0)}})),t.push(0,0,1,1),t.push(0,0,0,1);const i=t.length/4,s=[];for(let t=0;t<this.Ez;t+=1)s.push(t,t+1,i-2),s.push(t+i/2-1,t+i/2,i-1);return s.push(0,i-2,i-1),s.push(i-1,i-2,i/2-1),s.push(0,i-3,i-1),s.push(i/2-2,i-2,i/2-1),{vertices:new Float32Array(t),indices:new Uint8Array(s),indicesCount:s.length,verticesCount:i,drawMode:this.XB.gl.TRIANGLES}}sO(){this.XB.UL(this.zz),this.XB.UL(this.Vz)}}const wv=(t,i)=>((t,i)=>{let s=t.qL.JB.get(i);return s||(s=new Av(t,i),t.qL.JB.set(i,s),s)})(t,i>=50?8:i>=20?6:i>=7?4:i>=4?3:1===i?1:2),kv={Wz:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aLocationA_highpart"),s=n("aLocationA_lowpart"),e=n("aLocationB_highpart"),a=n("aLocationB_lowpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.SE(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),i.SE(s,1),o.enableVertexAttribArray(s),o.vertexAttribPointer(e,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.SE(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(a,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h+2)*Float32Array.BYTES_PER_ELEMENT),i.SE(a,1),o.enableVertexAttribArray(a)}else{const t=n("aLocationA"),s=n("aLocationB");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.SE(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.SE(s,1),o.enableVertexAttribArray(s)}},Uz:(t,i,s,e,h,r,n)=>{const o=t.gl;o.bindBuffer(o.ARRAY_BUFFER,s),o.vertexAttribPointer(e,r,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.SE(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(h,r,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),t.SE(h,1),o.enableVertexAttribArray(h)},jz:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aLocationA_highpart"),s=n("aLocationA_lowpart"),e=n("aLocationB_highpart"),a=n("aLocationB_lowpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.SE(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),i.SE(s,1),o.enableVertexAttribArray(s),o.vertexAttribPointer(e,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.SE(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(a,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h+2)*Float32Array.BYTES_PER_ELEMENT),i.SE(a,1),o.enableVertexAttribArray(a)}else{const t=n("aLocationA"),s=n("aLocationB");o.vertexAttribPointer(t,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.SE(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.SE(s,1),o.enableVertexAttribArray(s)}},$z:(t,i,s,e,h,r,n)=>{const o=t.gl;o.bindBuffer(o.ARRAY_BUFFER,s),o.vertexAttribPointer(e,r,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.SE(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(h,r,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),t.SE(h,1),o.enableVertexAttribArray(h)},YB:(t,i,s,e,h,r,n)=>{const o=t.OR(),{uniform:a,uniformOptional:l}=s,u=1/t.ro.mo,c=(h?Math.max(r,u):Math.max(r,0))+1;o.zL(a("uThicknessPixels"),c).zL(l("uAALimit"),1-(c-1)/c).EL(a("uRatioPxClip"),[2/t.Ci().x,2/t.Ci().y]),i.BO(s,e).Ly(n)}},Cv={Wz:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aPos_highpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t);const i=n("aPos_lowpart");o.vertexAttribPointer(i,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(i)}else{const t=n("aPos");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t)}},Uz:(t,i,s,e,h,r)=>{const n=t.gl;n.bindBuffer(n.ARRAY_BUFFER,s),n.vertexAttribPointer(e,h,n.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),n.enableVertexAttribArray(e)},jz:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),!t){const t=n("aPos");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t)}},Yz:(t,i)=>{const s=t.OR();s.Ly(s.gl.LINE_STRIP,i,0)},Xz:(t,i)=>{const s=t.OR();s.Ly(s.gl.LINES,2*i,0)}};class Tv extends gl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.HO=new ov,this.al=Or,this.DR=t,this.BR=i,this.GR=r,this.WR=n,this.XB=t.OR(),this.Zz=this.XB.BE}le(){const t=this.Ma(),i=this.ku,s=to(i)&&i,h=Xu(i)&&i,r=s||h,n=r&&r.getFillStyle(),o=Oe(n)&&n,l=eh(n)&&n,u=th(n)&&n,c=ze(n)&&n,f=o||l||u||c&&["x","y"].includes(c.getLookUpProperty())&&c,d=this.Zi(),g=this.Xi(),m=this.Ko.M(),y=this.Ko.o,p=i.Ct();if(h&&this.Jt instanceof zn)return Mh.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;if(this.HO.HL(this.Jt),this.Pu&&(this.Kz=this.XB.PL(sr([d,g],this.Jt.Ui()),!1,this.Kz),this.al=a(e(d.x,d.y),e(g.x,g.y))),t||y){const t=this.ba()&&r&&f&&p>0,i=l?["gradient",l]:u?["gradient",u]:c?["lookup",c.getLookUpProperty()]:"uniform";this.qz=t?{type:"triangulated",shader:this.XB.BL(sv["2D"],sv.Color({dataType:i}),sv.LineInstanced2D({axisWorldTranslation:yS(this.Jt),normalSource:void 0}),this.Zz?sv.AliasedEdge:void 0,h&&sv.StippleTextureInstanced),mousePickingShader:m?this.XB.BL(sv["2D"],sv.MousePicking,sv.LineInstanced2D({axisWorldTranslation:yS(this.Jt),normalSource:void 0}),h&&sv.StippleTextureInstanced):void 0,geometry:wv(this.XB,p),thickness:p,lineStyleSolid:s,lineStyleDashed:h,fillStyleSolid:o,fillStyleLinearGradient:l,fillStyleRadialGradient:u,fillStylePaletted:c}:void 0,c?this.Jz=this.DR.wz(c.lut,this.Jz):this.Jz&&(this.DR.kz(this.Jz),this.Jz=void 0)}if(th(n)?this.hz=fv($a(this.al,{x:this.Rl(),y:this.zl()},this.Jt),this.Jt,n.getPosition(),n.getExtent(),n.getShape(),this.XB.zO()):eh(n)?this.rz=dv($a(this.al,{x:this.Rl(),y:this.zl()},this.Jt),this.Jt,n.getAngle(!0),this.XB.zO()):(this.hz=void 0,this.rz=void 0),h){if(t||this.Pu){const t=[0,0,Math.abs(g.x-d.x),Math.abs(g.y-d.y)];this.Qz=this.XB.PL(t,!1,this.Qz)}this.tV=this.XB.lR(h.getPattern())}else this.Qz&&(this.XB.UL(this.Qz),this.Qz=void 0),this.tV=void 0;return this.Iu(i),this.Pu=!1,this.Ko.o=!1,this}YB(t){var i,s;const e=this.Kz;if(!e)return this;const h=this.qz;if(!h)return this;const{fillStyleSolid:r,fillStyleLinearGradient:n,fillStyleRadialGradient:o,fillStylePaletted:a,lineStyleDashed:l,thickness:u}=h,c=1===t?null===(i=this.qz)||void 0===i?void 0:i.mousePickingShader:null===(s=this.qz)||void 0===s?void 0:s.shader;return c?(this.XB.BO(c).OL(c,((i,s,c,f)=>{if(this.XB.zL(i("uIsHighlighted"),1===t||2===t?0:this.ta).VL(i("uHighlightColorOffset"),this.ha).zL(i("uRenderEffectMask"),2===t?1:0),this.Jt instanceof Rn||this.Jt instanceof Fg?this.XB.EL(i("uScale"),this.HO.NL()).EL(i("uDisp"),this.HO.GL()).EL(f("uScaleStart_highpart"),this.HO.xR()).EL(f("uScaleStart_lowpart"),this.HO.MR()):this.Jt instanceof zn&&this.XB.EL(f("uScaleStart"),this.HO.MixedScaleXY.uScaleStart).EL(f("uScaleStartLog"),this.HO.MixedScaleXY.uScaleStartLog).EL(f("uScaleInterval"),this.HO.MixedScaleXY.uScaleInterval).EL(f("uScaleIntervalLog"),this.HO.MixedScaleXY.uScaleIntervalLog).EL(i("uViewportStart"),this.HO.MixedScaleXY.uViewportStart).EL(i("uViewportSize"),this.HO.MixedScaleXY.uViewportSize),1===t)this.XB.VL(i("uColor"),this.WR);else if(r)this.XB.VL(i("uColor"),r.getColor());else if(o){if(!this.hz)return!1;this.XB.ZE(c,this.hz,o)}else if(n){if(!this.rz)return!1;this.XB.KE(c,this.rz,n)}else if(a){if(!this.Jz)return!1;this.XB.fR(c,a.lut,this.Jz,0)}if(l){if(!this.Qz||!this.tV)return!1;kv.Uz(this.XB,c,this.Qz,s("aLengthSoFarA"),s("aLengthSoFarB"),2,0),this.XB.EL(i("uStippleCount"),[this.$s.Ci().x/this.tV.jw,this.$s.Ci().y/this.tV.jw]).zL(f("uStippleTextureWidthLimiter"),this.tV.cR/this.tV.jw).zL(i("uStippleScale"),l.getPatternScale()).RL(i("uStippleTexture"),this.tV.uR,1)}return kv.Wz(this.Jt.Ui(),this.XB,e,c,this.Jt.Ui()?4:2,0),kv.YB(this.DR,h.geometry,c,this.Zz&&1!==t,1===t,u,1),!0})),this):this}ER(t){return this.GR===t&&{}}dispose(){return super.dispose(),this.Jz&&(this.DR.kz(this.Jz),this.Jz=void 0),this.qz=void 0,this.Kz&&(this.XB.UL(this.Kz),this.Kz=void 0),this.Qz&&(this.XB.UL(this.Qz),this.Qz=void 0),this.tV=void 0,this}_O(){return this}oi(){return this.al.max.x}ni(){return this.al.min.x}li(){return this.al.max.y}ai(){return this.al.min.y}Rl(){return Tr(this.ku)}zl(){return Tr(this.ku)}}class Fv extends ml{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.iV=[],this.sV=!1,this.eV=!1,this.hV=!1,this.rV=!1,this.HO=new ov,this.al=Or,this.DR=t,this.BR=i,this.nV=r,this.XB=t.OR(),this.Zz=this.XB.BE,this.oV=t.ro.po}ln(){const t=this.nV(),i={Js:t=>this.aV(i,t),Ys:t=>this.lV(i,t),fm:(t,s)=>this.uV(i,t,s),VL:t=>this.cV(i,t),nt:{x:0,y:0},ot:{x:0,y:0},ta:0,fV:void 0,GR:t.id,WR:t.color};return this.iV.push(i),i}Al(){var t;return this.iV.length=0,this.sV=!0,this.gs&&this.jn&&(null===(t=this.$s.Hn)||void 0===t?void 0:t.entity)===this&&this.jn(this,void 0,this.$s.Hn.collectionMember),this}aV(t,i){if(i&&!this.iV.includes(t))this.iV.push(t);else if(!i){const i=this.iV.indexOf(t);this.iV.splice(i,1)}return this.hV=!0,t}lV(t,i){return t.ta=i,this.eV=!0,t}uV(t,i,s){return t.nt=i,t.ot=s,this.sV=!0,t}cV(t,i){return t.fV=i,this.rV=!0,t}le(){const t=this.Ko.M(),i=this.Ko.o,s=this.Ma(),e=this.ku,h=this.iV,r=this.eV,n=this.sV,o=this.hV,a=this.rV,l=to(e)&&e,u=Xu(e)&&e,c=l||u,f=c&&c.getFillStyle(),d=Oe(f)&&f,g=Ee(f)&&f,m=th(f)&&f,y=eh(f)&&f,p=d||g||y||m,S=e.Ct(),v=u?"triangulated":e.getThickness()<0?"primitive":"triangulated";if(u&&this.Jt instanceof zn)return Mh.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;this.HO.HL(this.Jt);const b=n||o;if(b){const t=[];for(let i=0;i<h.length;i+=1){const s=h[i];t.push(s.nt),t.push(s.ot)}this.Kz=this.XB.PL(sr(t,this.Jt.Ui()),!1,this.Kz),this.al=Xr(t)}if(s||i){const i=d?"uniform":g?"attribute":y?["gradient",y]:m?["gradient",m]:void 0,s=h.length>0&&c&&p&&S>0&&i;this.qz=s?"triangulated"===v?{type:"triangulated",shader:this.XB.BL(sv["2D"],sv.Color({dataType:i}),sv.LineInstanced2D({axisWorldTranslation:yS(this.Jt),normalSource:void 0,snapToNearestPixel:this.oV}),this.Zz?sv.AliasedEdge:void 0,u&&sv.StippleTextureInstanced,sv.AttributeHighlight),mousePicking:t?{shader:this.XB.BL(sv["2D"],sv.MousePickingAttribute,sv.LineInstanced2D({axisWorldTranslation:yS(this.Jt),normalSource:void 0,snapToNearestPixel:this.oV}),u&&sv.StippleTextureInstanced,sv.AttributeHighlight)}:void 0,geometry:wv(this.XB,S),thickness:S,lineStyleSolid:l,lineStyleDashed:u,fillStyleSolid:d,fillStyleIndividual:g,fillStyleLinearGradient:y,fillStyleRadialGradient:m}:{type:"primitive",shader:this.XB.BL(sv["2D"],sv.Color({dataType:i}),sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0,snapToNearestPixel:this.oV}),sv.AttributeHighlight),mousePicking:t?{shader:this.XB.BL(sv["2D"],sv.MousePickingAttribute,sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0,snapToNearestPixel:this.oV}),sv.AttributeHighlight)}:void 0,lineStyleSolid:l,lineStyleDashed:u,fillStyleSolid:d,fillStyleIndividual:g,fillStyleLinearGradient:y,fillStyleRadialGradient:m}:void 0}if(u){if(s||b){const t=new Float32Array(4*h.length);let i=0;for(let s=0;s<h.length;s+=1){const e=h[s].nt,r=h[s].ot;t[i]=0,t[i+1]=0,t[i+2]=Math.abs(r.x-e.x),t[i+3]=Math.abs(r.y-e.y),i+=4}this.Qz=this.XB.PL(t,!1,this.Qz)}this.tV=this.XB.lR(u.getPattern())}else this.Qz&&(this.XB.UL(this.Qz),this.Qz=void 0),this.tV=void 0;if(b||r)if("triangulated"===v){const t=new Float32Array(h.length);let i=0;h.forEach((s=>{t[i]=s.ta,i+=1})),this.dV=this.XB.PL(t,!0,this.dV)}else{const t=new Float32Array(2*h.length);let i=0;h.forEach((s=>{for(let e=i;e<i+2;e+=2)t[e]=s.ta,t[e+1]=s.ta;i+=2})),this.dV=this.XB.PL(t,!1,this.dV)}if(g)if(a||b||s)if("triangulated"===v){const t=new Float32Array(4*h.length);let i=0;h.forEach((s=>{const e=s.fV||g.color;t[i]=e.r,t[i+1]=e.g,t[i+2]=e.b,t[i+3]=e.a,i+=4})),this.gV=this.XB.PL(t,!1,this.gV)}else{const t=new Float32Array(8*h.length);let i=0;h.forEach((s=>{const e=s.fV||g.color;for(let s=i;s<i+8;s+=4)t[s]=e.r,t[s+1]=e.g,t[s+2]=e.b,t[s+3]=e.a;i+=8})),this.gV=this.XB.PL(t,!1,this.gV)}else this.gV&&(this.XB.UL(this.gV),this.gV=void 0);if(t){if(b)if("triangulated"===v){const t=new Float32Array(4*h.length);let i=0;h.forEach((s=>{t[i+0]=s.WR.r,t[i+1]=s.WR.g,t[i+2]=s.WR.b,t[i+3]=s.WR.a,i+=4})),this.mV=this.XB.PL(t,!0,this.mV)}else{const t=new Float32Array(8*h.length);let i=0;h.forEach((s=>{for(let e=i;e<i+4;e+=4)t[i+0]=s.WR.r,t[i+1]=s.WR.g,t[i+2]=s.WR.b,t[i+3]=s.WR.a;i+=8})),this.mV=this.XB.PL(t,!1,this.mV)}}else this.mV&&(this.XB.UL(this.mV),this.mV=void 0);return m?this.ZR=fv(this.Qo||this.al,this.Jt,f.getPosition(),f.getExtent(),f.getShape(),this.XB.zO()):y?this.KR=dv(this.Qo||this.al,this.Jt,f.getAngle(!0),this.XB.zO()):(this.ZR=void 0,this.KR=void 0),this.Iu(e),this.eV=!1,this.hV=!1,this.sV=!1,this.rV=!1,this.Ko.o=!1,this}YB(t){var i;const s=this.Kz,e=this.dV,h=this.mV;if(!s||!e)return this;const r=this.qz;if(!r)return this;const{type:n,fillStyleSolid:o,fillStyleIndividual:a,fillStyleLinearGradient:l,fillStyleRadialGradient:u,lineStyleDashed:c}=r,f=1===t?null===(i=r.mousePicking)||void 0===i?void 0:i.shader:r.shader;return f?(this.XB.BO(f).OL(f,((i,f,d,g)=>{if(this.Jt instanceof Rn||this.Jt instanceof Fg?this.XB.EL(i("uScale"),this.HO.NL()).EL(i("uDisp"),this.HO.GL()).EL(g("uScaleStart_highpart"),this.HO.xR()).EL(g("uScaleStart_lowpart"),this.HO.MR()):this.Jt instanceof zn&&this.XB.EL(g("uScaleStart"),this.HO.MixedScaleXY.uScaleStart).EL(g("uScaleStartLog"),this.HO.MixedScaleXY.uScaleStartLog).EL(g("uScaleInterval"),this.HO.MixedScaleXY.uScaleInterval).EL(g("uScaleIntervalLog"),this.HO.MixedScaleXY.uScaleIntervalLog).EL(i("uViewportStart"),this.HO.MixedScaleXY.uViewportStart).EL(i("uViewportSize"),this.HO.MixedScaleXY.uViewportSize),this.oV&&this.XB.EL(g("uViewportSizePx"),[this.$s.Ci().x*this.XB.zO(),this.$s.Ci().y*this.XB.zO()]),this.XB.VL(i("uHighlightColorOffset"),this.ha).zL(i("uRenderEffectMask"),2===t?1:0),1===t){if(!h)return!1;"triangulated"===n?this.XB.LL(h,1,{location:f("aColor"),size:4}):this.XB.bE(f("aColor"),h)}else if(o)this.XB.VL(i("uColor"),o.getColor());else if(a){if(!this.gV)return!1;this.XB.LL(this.gV,"triangulated"===n?1:void 0,{location:f("aColor"),size:4})}else if(u){if(!this.ZR)return!1;this.XB.ZE(d,this.ZR,u)}else if(l){if(!this.KR)return!1;this.XB.KE(d,this.KR,l)}if(c){if(!this.Qz||!this.tV)return!1;kv.$z(this.XB,d,this.Qz,f("aLengthSoFarA"),f("aLengthSoFarB"),2,0),this.XB.EL(i("uStippleCount"),[this.$s.Ci().x/this.tV.jw,this.$s.Ci().y/this.tV.jw]).zL(g("uStippleTextureWidthLimiter"),this.tV.cR/this.tV.jw).zL(i("uStippleScale"),c.getPatternScale()).RL(i("uStippleTexture"),this.tV.uR,0)}if("triangulated"===n){const{geometry:i,thickness:h}=r;kv.jz(this.Jt.Ui(),this.XB,s,d,this.Jt.Ui()?4:2,0),this.XB.LL(1===t||2===t?this.XB.HE:e,1,{location:f("aIsHighlighted"),size:1}),kv.YB(this.DR,i,d,this.Zz&&1!==t,1===t,h,this.iV.length)}else Cv.jz(this.Jt.Ui(),this.XB,s,d,this.Jt.Ui()?4:2,0),this.XB.xE(f("aIsHighlighted"),1===t||2===t?this.XB.HE:e),Cv.Xz(this.DR,this.iV.length);return!0})),this):this}ER(t){const i=this.iV.find((i=>i.GR===t));return!!i&&{collectionMember:i}}dispose(){return super.dispose(),this.qz=void 0,this.Kz&&(this.XB.UL(this.Kz),this.Kz=void 0),this.Qz&&(this.XB.UL(this.Qz),this.Qz=void 0),this.dV&&(this.XB.UL(this.dV),this.dV=void 0),this.mV&&(this.XB.UL(this.mV),this.mV=void 0),this.gV&&(this.XB.UL(this.gV),this.gV=void 0),this.tV=void 0,this}_O(){return this}oi(){return this.al.max.x}ni(){return this.al.min.x}li(){return this.al.max.y}ai(){return this.al.min.y}Rl(){return Tr(this.ku)}zl(){return Tr(this.ku)}}class Iv{constructor(t,i){this.yV=!1,this.pV=!1,this.SV=!1,this.Jt=t,this.vV=i,this.vV.na("DataPattern",(t=>{"ProgressiveX"!==t.pattern&&"RegressiveX"!==t.pattern||(this.yV="x"),"ProgressiveY"!==t.pattern&&"RegressiveY"!==t.pattern||(this.yV="y"),"RegressiveX"!==t.pattern&&"RegressiveY"!==t.pattern||(this.pV=!0),!0===t.regularProgressiveStep&&(this.SV=!0)}))}calculateUserDataPointsProgressiveRange(t){if(0===t.length)throw new Error("calculateUserDataPointsProgressiveRange called with 0 data points");return{start:"x"===this.yV?t[0].x:t[0].y,end:"x"===this.yV?t[t.length-1].x:t[t.length-1].y}}calculateUserDataPointsBoundaries(t){return this.yV?"x"===this.yV?function(t){const i=t.length;if(i>0){const s=Math.max(t[i-1].x,t[0].x),h=Math.min(t[i-1].x,t[0].x);let r=t[0].y,n=t[0].y;for(let s=0;s<i;s+=1){const i=t[s];i.y>r&&(r=i.y),i.y<n&&(n=i.y)}return a(e(h,n),e(s,r))}return Or}(t):function(t){const i=t.length;if(i>0){const s=Math.max(t[i-1].y,t[0].y),h=Math.min(t[i-1].y,t[0].y);let r=t[0].x,n=t[0].x;for(let s=0;s<i;s+=1){const i=t[s];i.x>r&&(r=i.x),i.x<n&&(n=i.x)}return a(e(n,h),e(r,s))}return Or}(t):Xr(t)}calculateAvgStepBetweenDataPoints(t,i,s){return Math.abs(t-i)/(s-1)}}const Pv=Math.min(1,1.5);class Dv extends Iv{constructor(t,i,s){super(t,i),this.bV=!1,this.xV={enabled:!1,totalDataPointsAtTime:0},this.MV=[],this.te=s,this._V=t instanceof Rn?{type:"linear",scale:t}:t instanceof zn?{type:"mixed",scale:t}:{type:"unknown"},this.vV.na("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.bV=!0)}))}AV(t,i=!1){if(this.bV||!this.yV||"linear"!==this._V.type)return!1;!1===i&&this.wV&&(clearTimeout(this.wV),this.wV=void 0);const s="x"===this.yV?this._V.scale.x.zg:this._V.scale.y.zg;if(!s)throw new Error("CP helper has no information about Axis state.");const e=t.length;if(e<2)return!1;const h=t[0],r=t[e-1],n=this.calculateAvgStepBetweenDataPoints("x"===this.yV?h.x:h.y,"x"===this.yV?r.x:r.y,e),o=this._V.scale,a=Math.abs("x"===this.yV?o.os().x:o.os().y),l=a/n,u=Math.floor(l*Pv),c=u*n,f=Mh.performance.now(),d=!(f-s.Nh<500)&&(s.Oh?f-s.Vh<1e3:f-s.Lh<2e3||s.Rh),g=e>2*this.xV.totalDataPointsAtTime;if(d&&!g)return this.wV=setTimeout((()=>this.kV(t)),1e3),!1;const m=u>=10,y=this.xV.enabled?this.xV.columnWidthAxis/a<1.5:void 0,p=this.xV.enabled&&u>this.xV.dataPointsPerColumn?u/this.xV.dataPointsPerColumn>=2:void 0;let S;!0===this.xV.enabled?y?p&&(S={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e}):S=m?{enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e}:{enabled:!1,totalDataPointsAtTime:e}:m&&(S={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e});const v=!1===i;return S?(v&&(this.xV=S),!0):(v&&(this.xV={...this.xV,totalDataPointsAtTime:e}),!1)}Hv(){this.CV=void 0,this.MV.length=0,this.wV&&(clearTimeout(this.wV),this.wV=void 0)}TV(t){if(0===t.length)return t;if(this.bV||!this.yV||"linear"!==this._V.type||!this.xV.enabled)return t;let i;i=this.MV.length>0?ur(this.MV,t,{canReturnB:!0}):t;const s=i.length,e=[];let h,r,n=void 0===this.CV,o=-1,a=-1,l=0,u=0;if("x"!==this.yV||this.pV)if("x"===this.yV&&this.pV){const t=this.xV.columnWidthAxis;let c=this.CV?this.CV.x:i[0].x,f=c-t;for(let d=0;d<s;d+=1){const s=i[d];s.x>=f?((!h||s.y>h.y)&&(h=s,o=d),(!r||s.y<r.y)&&(r=s,a=d),u=d):(h&&r&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.x,f=c-t,h=s,o=d,r=s,a=d,l=d,u=d)}}else if("y"!==this.yV||this.pV){if("y"===this.yV&&this.pV){const t=this.xV.columnWidthAxis;let c=this.CV?this.CV.y:i[0].y,f=c-t;for(let d=0;d<s;d+=1){const s=i[d];s.y>=f?((!h||s.x>h.x)&&(h=s,o=d),(!r||s.x<r.x)&&(r=s,a=d),u=d):(r&&h&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.y,f=c-t,h=s,o=d,r=s,a=d,l=d,u=d)}}}else{const t=this.xV.columnWidthAxis;let c=this.CV?this.CV.y:i[0].y,f=c+t;for(let d=0;d<s;d+=1){const s=i[d];s.y<=f?((!h||s.x>h.x)&&(h=s,o=d),(!r||s.x<r.x)&&(r=s,a=d),u=d):(r&&h&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.y,f=c+t,h=s,o=d,r=s,a=d,l=d,u=d)}}else{const t=this.xV.columnWidthAxis;let c=this.CV?this.CV.x:i[0].x,f=c+t;for(let d=0;d<s;d+=1){const s=i[d];s.x<=f?((!h||s.y>h.y)&&(h=s,o=d),(!r||s.y<r.y)&&(r=s,a=d),u=d):(h&&r&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.x,f=c+t,h=s,o=d,r=s,a=d,l=d,u=d)}}if(h||r){const t=i.slice(l,u+1);this.MV=t}else this.MV.length=0;const c=e.length;return c>0&&(this.CV=e[c-1]),e}FV(t){if(this.yV&&"linear"===this._V.type){const i="x"===this.yV?this._V.scale.x.zg:this._V.scale.y.zg;if(!i)throw new Error("CP helper has no information about Axis state.");if(i.Ih===Go.progressive||i.Ih===Go.regressive){const i=Math.abs("x"===this.yV?this._V.scale.x.getInnerInterval():this._V.scale.y.getInnerInterval());if(this.xV.enabled)return 2*i/this.xV.columnWidthAxis;const s=t.length,e=t[0],h=t[s-1];return i/this.calculateAvgStepBetweenDataPoints("x"===this.yV?e.x:e.y,"x"===this.yV?h.x:h.y,s)}}}IV(t,i,s){if(!this.yV)return i;const e=s.length;let h=Va(s,t.min,this.yV,this.pV,0,e-1);void 0===h&&(h=this.pV?e-1:0);let r=Va(s,t.max,this.yV,this.pV,0,e-1);return void 0===r&&(r=this.pV?0:e-1),1+Math.abs(r-h)}PV(){this.wV&&(clearTimeout(this.wV),this.wV=void 0)}kV(t){this.AV(t,!0)&&this.te()}}class Bv extends Iv{renderVisibleOnly(t,i){const s=this.Jt.x.getInnerStart(),e=this.Jt.x.getInnerEnd(),h=Math.min(s,e),r=Math.max(s,e),n=this.Jt.y.getInnerStart(),o=this.Jt.y.getInnerEnd(),a=Math.min(n,o),l=Math.max(n,o);t.forEach(((t,s)=>{t.existingCoordinatesCount<=1||t.boundaries.max.x<h||t.boundaries.min.x>r||t.boundaries.max.y<a||t.boundaries.min.y>l||i(t)}))}}class Ov{constructor(t,i,s){this.DV=i,this.BV=s,this.OV=t,this.LV=[]}EV(t,i,s,e){const h=t.length;if(0===h)return;let r=t,n=h,o=this.OV[this.OV.length-1];do{const t=this.OV.length;let h;o||(o=this.RV(i,n)),o&&0==o.allocatedCoordinatesCount-o.existingCoordinatesCount&&(o=void 0);let a=0;if(this.BV&&t>0&&(void 0===o||0===o.existingCoordinatesCount)){const i=this.OV[t-1].lastDataPoint;i?(r.splice(0,0,i),a=1,n+=1):console.error("SegmentationHelper _connectSegments = true, but segment has no lastDataPoint information!")}if(o)h=Math.min(n,o.allocatedCoordinatesCount-o.existingCoordinatesCount),e(o,r.slice(0,h),h,a);else{const t=Math.ceil(i)+a;h=Math.min(t,n);const e={...s(t,r.slice(0,h),h,a),isDropped:!1};this.OV.push(e)}h>0&&(n>h?(r=r.slice(h),n=r.length):(r=[],n=0))}while(n>0);this.zV()}VV(t){const i=t,s=this.OV.indexOf(i);s>=0&&this.OV.splice(s,1),i.droppedTimestamp=Mh.performance.now(),this.LV.push(i)}NV(){this.OV.slice().forEach((t=>this.VV(t)))}GV(){this.OV.forEach((t=>this.DV(t))),this.LV.forEach((t=>this.DV(t))),this.OV.length=0,this.LV.length=0}RV(t,i){const s=2*t/3,e=4*t/3,h=this.LV.findIndex((t=>t.allocatedCoordinatesCount>=s&&t.allocatedCoordinatesCount<=e));if(h>=0){const t=this.LV[h];return this.LV.splice(h,1),this.OV.push(t),t}}zV(){if(this.LV.length>5){const t=Mh.performance.now();for(let i=0;i<this.LV.length-5;i+=1){const s=this.LV[i];(void 0===s.droppedTimestamp||t-s.droppedTimestamp>=1e4)&&(this.DV(s),this.LV.splice(i,1),i-=1)}}}}class Lv extends Iv{WV(t,i){if(!i||"object"!=typeof i)return 0;const s=this.Jt.x.getInnerStart(),e=this.Jt.x.getInnerEnd(),h=Math.min(s,e),r=Math.max(s,e),n=this.Jt.y.getInnerStart(),o=this.Jt.y.getInnerEnd(),a=Math.min(n,o),l=Math.max(n,o);if("maxDataPointCount"in i)return this.HV(t,i.maxDataPointCount,h,r,a,l);if("minDataPointCount"in i)return this.UV(t,i.minDataPointCount,h,r,a,l);if("progressiveDataCleaningThreshold"in i)return this.jV(t,i.progressiveDataCleaningThreshold,h,r,a,l);throw new Error(`Unimplemented data cleaning configuration: ${JSON.stringify(i)}`)}HV(t,i,s,e,h,r){if(void 0===i||i<=0)return 0;const n=t.reduce(((t,i)=>t+i.existingDataPointsCount),0);if(n<=i)return 0;let o=0,a=n;for(let s=0;s<t.length;s+=1){const e=t[s];a>i&&(o+=1,a-=e.existingDataPointsCount)}return o}jV(t,i,s,e,h,r){if(void 0===i||!this.yV)return 0;let n=0;for(let o=0;o<t.length;o+=1){const a=t[o],l=this.pV?"x"===this.yV?a.boundaries.min.x>e:a.boundaries.min.y>r:"x"===this.yV?a.boundaries.max.x<s:a.boundaries.max.y<h;if(!((this.pV?"x"===this.yV?a.boundaries.min.x>i:a.boundaries.min.y>i:"x"===this.yV?a.boundaries.max.x<i:a.boundaries.max.y<i)&&l&&a.existingCoordinatesCount>2))break;n+=1}return n}UV(t,i,s,e,h,r){if(void 0===i||0===i)return 0;let n=0,o=0;for(let a=t.length-1;a>=0;a-=1){const l=t[a];if(o>i)if(this.yV){if(this.pV?"x"===this.yV?l.boundaries.min.x>e:l.boundaries.min.y>r:"x"===this.yV?l.boundaries.max.x<s:l.boundaries.max.y<h){n=1+a;break}}else l.boundaries.max.x<s||l.boundaries.min.x>e||l.boundaries.max.y<h||l.boundaries.min.y>r?n+=1:n=0;o+=l.existingDataPointsCount}return n}$V(t,i){const s=t.reduce(((t,i)=>Kr(t,i.boundaries)),Or);if(i&&"progressiveDataCleaningThreshold"in i&&i.progressiveDataCleaningThreshold){const t=i.progressiveDataCleaningThreshold;"x"!==this.yV||this.pV?"x"===this.yV&&this.pV?s.max.x=Math.min(s.max.x,t):"y"!==this.yV||this.pV?"y"===this.yV&&this.pV&&(s.max.y=Math.min(s.max.y,t)):s.min.y=Math.max(s.min.y,t):s.min.x=Math.max(s.min.x,t)}return s}}class Ev extends yl{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h),this.HO=new ov,this.NM=[],this.YV=new Bv(this.Jt,this),this.XV=new Dv(this.Jt,this,(()=>this.$s.te())),this.ZV=new Ov(this.NM,(t=>{t.coordsBuffer&&this.XB.UL(t.coordsBuffer),t.Qz&&this.XB.UL(t.Qz)}),!0),this.KV=new Lv(this.Jt,this),this.qV=0,this.JV=0,this.QV=!1,this.BR=i,this.GR=r,this.WR=n,this.ro=o,this.qz={type:"none"},this.XB=t.OR(),this.DR=t,this.Zz=this.XB.BE;const a=this.Jt.Ui(),l=!0===(null==o?void 0:o.individualLookupValuesEnabled);let u,c,f,d=0;a||(u=d,d+=2),a&&(c=d,d+=4),l&&(f=d,d+=1);const g=((t,i)=>i?(i,s)=>((t,i)=>{if(!i){const i=t.length,s=new Float32Array(3*i);for(let e=0,h=0;e<i;e+=1){const i=t[e];s[h+0]=i.x,s[h+1]=i.y,s[h+2]=void 0!==i.value?i.value:0,h+=3}return s}const s=t.length,e=new Float32Array(5*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s.x),n=Math.fround(s.y);e[h+0]=r,e[h+1]=n,e[h+2]=s.x-r,e[h+3]=s.y-n,e[h+4]=void 0!==s.value?s.value:0,h+=5}return e})(i,t):(i,s)=>sr(i,t))(a,l);this.tN={individualLookupValuesEnabled:l,attributesPerVertex:d,attributeOffsetCoordinateLowPrecision:u,attributeOffsetCoordinateHighPrecision:c,attributeOffsetLookUpValue:f,prepareRenderData:(t,i)=>g(t,this.ku.getFillStyle())}}iN(t,i,s){const e=new Float32Array(2*i);let h=0,r=s||t[0];for(let s=0;s<i;s+=1){const i=t[s];this.qV+=Math.abs(r.x-i.x),this.JV+=Math.abs(r.y-i.y),e[h]=this.qV,e[h+1]=this.JV,h+=2,r=i}return e}le(){const t=this.ml,i=this.ku,s=this.Ma(),e=this.ul,h=e.length,r=h>0,n=this.Ko.M(),o=this.Ko.o,a=to(i)&&i,l=Xu(i)&&i,u=a||l,c=u&&u.getThickness(),f=u&&u.getFillStyle(),d=Oe(f)&&f,g=eh(f)&&f,m=th(f)&&f,y=ze(f)&&f,p=d||g||m||y,S=this.tN.individualLookupValuesEnabled;if(l&&this.Jt instanceof zn)return Mh.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;r&&(this.Du=ur(this.Du,e,{canReturnB:!0}),this.ll+=h);let v=this.Bu.o;const b=this.KV.WV(this.NM,this.Bu.M());if(b>0){let t=0;for(let i=0;i<b;i+=1){const i=this.NM[0];t+=i.existingDataPointsCount,i.existingDataPointsCount=0,i.existingCoordinatesCount=0,i.jointPointsCount=0,i.boundaries=Or,i.lastDataPoint=void 0,this.ZV.VV(i)}this.Du=this.Du.slice(t),this.ll=this.Du.length,v=!0}let x=e,M=!1;(this.XV.AV(this.Du)||t)&&(M=!0),l&&!this.QV?(M=!0,this.QV=!0,this.ZV.GV()):!l&&this.QV&&(this.NM.forEach((t=>{t.Qz&&(this.XB.UL(t.Qz),t.Qz=void 0)})),this.QV=!1),M&&(this.XV.Hv(),this.NM.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.jointPointsCount=0,t.boundaries=Or,t.lastDataPoint=void 0})),this.ZV.NV(),x=this.Du,this.qV=0,this.JV=0);const _=this.XV.TV(x),A=_.length;if(A>0){let t=this.XV.FV(this.Du)||(this.na("ApplicationType",(t=>"InternalUI"===t.type))?this.ll:1e5);A/t>10&&(t=A/10),this.ZV.EV(_,t,((t,i,s,e)=>{const h=this.YV.calculateUserDataPointsBoundaries(i),r=this.XV.IV(h,s,this.Du)-e;return this.sN=i[s-1],{allocatedCoordinatesCount:t,existingDataPointsCount:r,existingCoordinatesCount:s,jointPointsCount:e,boundaries:h,coordsBuffer:this.XB.cE(t*this.tN.attributesPerVertex,this.tN.prepareRenderData(i,s)),lastDataPoint:i[s-1],Qz:this.QV?this.XB.cE(2*t,this.iN(i,s,this.sN)):void 0}}),((t,i,s,e)=>{const h=Kr(t.boundaries,this.YV.calculateUserDataPointsBoundaries(i)),r=this.XV.IV(h,t.existingCoordinatesCount+s,this.Du)-(t.jointPointsCount+e);this.XB.fE(t.coordsBuffer,t.existingCoordinatesCount*this.tN.attributesPerVertex,this.tN.prepareRenderData(i,s)),this.QV&&t.Qz&&this.XB.fE(t.Qz,2*t.existingCoordinatesCount,this.iN(i,s,this.sN)),this.sN=i[s-1],t.jointPointsCount+=e,t.lastDataPoint=i[s-1],t.existingDataPointsCount=r,t.existingCoordinatesCount+=s,t.boundaries=h}))}if(v&&(this.al=this.KV.$V(this.NM,this.Bu.M())),this.HO.HL(this.Jt),m?this.hz=fv(this.aa(),this.Jt,m.getPosition(),m.getExtent(),m.getShape(),this.XB.zO()):g?this.rz=dv(this.aa(),this.Jt,g.getAngle(!0),this.XB.zO()):(this.hz=void 0,this.rz=void 0),s||o){if(y&&"value"===y.getLookUpProperty()&&!S){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw Mh.alert(t),new Error(t)}if(p&&u&&!1!==c){const t=-1===c?"primitive":"triangulated",i=g?["gradient",g]:m?["gradient",m]:y?["lookup",y.getLookUpProperty()]:"uniform";this.qz="primitive"===t?{type:t,shader:this.XB.BL(sv["2D"],sv.Color({dataType:i}),sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0}),l&&sv.StippleTexture),mousePickingShader:n?this.XB.BL(sv["2D"],sv.MousePicking,sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0}),l&&sv.StippleTexture):void 0,lineStyleSolid:a,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:g,fillStyleRadialGradient:m,fillStylePaletted:y}:"triangulated"===t?{type:t,shader:this.XB.BL(sv["2D"],sv.Color({dataType:i}),sv.LineInstanced2D({axisWorldTranslation:yS(this.Jt),normalSource:void 0}),this.Zz?sv.AliasedEdge:void 0,l&&sv.StippleTextureInstanced),mousePickingShader:n?this.XB.BL(sv["2D"],sv.MousePicking,sv.LineInstanced2D({axisWorldTranslation:yS(this.Jt),normalSource:void 0}),l&&sv.StippleTextureInstanced):void 0,geometry:wv(this.XB,c),thickness:c,lineStyleSolid:a,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:g,fillStyleRadialGradient:m,fillStylePaletted:y}:{type:"none"}}else this.qz={type:"none"};y?this.Jz=this.DR.wz(y.lut,this.Jz):this.Jz&&(this.DR.kz(this.Jz),this.Jz=void 0)}return this.tV=l?this.XB.lR(l.getPattern()):void 0,this.Iu(i),this.ml=!1,this.ul=[],this.Ko.o=!1,this.Bu.o=!1,this}YB(t){const i=this.XB.gl,s=this.qz;if(!s||"none"===s.type)return this;const e=1===t?s.mousePickingShader:s.shader;if(!e)return this;const{lineStyleDashed:h,fillStyleSolid:r,fillStyleLinearGradient:n,fillStyleRadialGradient:o,fillStylePaletted:a}=s;return this.XB.BO(e).OL(e,((e,l,u,c)=>{let f=!1;if(this.XB.zL(e("uIsHighlighted"),1===t||2===t?0:this.ta).VL(e("uHighlightColorOffset"),this.ha).zL(e("uRenderEffectMask"),2===t?1:0),this.Jt instanceof Rn||this.Jt instanceof Fg?this.XB.EL(e("uScale"),this.HO.NL()).EL(e("uDisp"),this.HO.GL()).EL(c("uScaleStart_highpart"),this.HO.xR()).EL(c("uScaleStart_lowpart"),this.HO.MR()):this.Jt instanceof zn&&this.XB.EL(c("uScaleStart"),this.HO.MixedScaleXY.uScaleStart).EL(c("uScaleStartLog"),this.HO.MixedScaleXY.uScaleStartLog).EL(c("uScaleInterval"),this.HO.MixedScaleXY.uScaleInterval).EL(c("uScaleIntervalLog"),this.HO.MixedScaleXY.uScaleIntervalLog).EL(e("uViewportStart"),this.HO.MixedScaleXY.uViewportStart).EL(e("uViewportSize"),this.HO.MixedScaleXY.uViewportSize),1===t)this.XB.VL(e("uColor"),this.WR);else if(r)this.XB.VL(e("uColor"),r.getColor());else if(o){if(!this.hz)return!1;this.XB.ZE(u,this.hz,o)}else if(n){if(!this.rz)return!1;this.XB.KE(u,this.rz,n)}else if(a){if(!this.Jz)return!1;this.XB.fR(u,a.lut,this.Jz,0)}return this.YV.renderVisibleOnly(this.NM,(r=>{const{coordsBuffer:n}=r;if(!n)return;i.bindBuffer(i.ARRAY_BUFFER,n);const o="triangulated"===s.type?kv.Wz:Cv.Wz;if(this.Jt.Ui()||void 0===this.tN.attributeOffsetCoordinateLowPrecision?this.Jt.Ui()&&void 0!==this.tN.attributeOffsetCoordinateHighPrecision&&o(!0,this.XB,n,u,this.tN.attributesPerVertex,this.tN.attributeOffsetCoordinateHighPrecision):o(!1,this.XB,n,u,this.tN.attributesPerVertex,this.tN.attributeOffsetCoordinateLowPrecision),h){if(!r.Qz||!this.tV)return;"triangulated"===s.type?kv.Uz(this.XB,u,r.Qz,l("aLengthSoFarA"),l("aLengthSoFarB"),2,0):Cv.Uz(this.XB,u,r.Qz,l("aLengthSoFar"),2,0),this.XB.EL(e("uStippleCount"),[this.$s.Ci().x/this.tV.jw,this.$s.Ci().y/this.tV.jw]).zL(c("uStippleTextureWidthLimiter"),this.tV.cR/this.tV.jw).zL(e("uStippleScale"),h.getPatternScale()).RL(e("uStippleTexture"),this.tV.uR,1)}if(a&&"value"===a.lookUpProperty&&void 0!==this.tN.attributeOffsetLookUpValue&&1!==t)if("triangulated"===s.type){const t=l("aLookupValueA");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.tN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.tN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.XB.SE(t,1),i.enableVertexAttribArray(t);const s=l("aLookupValueB");i.vertexAttribPointer(s,1,i.FLOAT,!1,this.tN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.tN.attributeOffsetLookUpValue+this.tN.attributesPerVertex)*Float32Array.BYTES_PER_ELEMENT),this.XB.SE(s,1),i.enableVertexAttribArray(s)}else{const t=l("aLookupValue");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.tN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.tN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),i.enableVertexAttribArray(t)}if("triangulated"===s.type){const{thickness:i}=s;kv.YB(this.DR,s.geometry,u,this.Zz&&1!==t,1===t,i,r.existingCoordinatesCount-1)}else Cv.Yz(this.DR,r.existingCoordinatesCount);f=!0})),i.bindBuffer(i.ARRAY_BUFFER,null),f})),this}ER(t){return this.GR===t&&{}}_l(t,i){return Array.isArray(t)||(t=[t]),this.ul=ur(this.ul,t,{canReturnB:!0}),this.al=Kr(this.al,i||this.YV.calculateUserDataPointsBoundaries(t)),this}Al(){return super.Al(),this.qV=0,this.JV=0,this.sN=void 0,this}dispose(){return super.dispose(),this.ZV.GV(),this.XV.PV(),this.Jz&&(this.DR.kz(this.Jz),this.Jz=void 0),this.qz={type:"none"},this.tV=void 0,this}_O(){return this}Gx(t){this.kl()>0&&this.le();const i=this.Sl(),s=La(i,t,this.dl,this.$l,this.Yl,this.Jt,this.engine.Jt,this.al,this.YV.yV,this.YV.pV);return void 0!==s?i[s]:void 0}fk(t){this.kl()>0&&this.le();const i=this.Sl(),s=i.length;if(0===s)return;const e=this.$l?1:0,h=s-(this.Yl?2:1);if(this.dl===Ba.Nearest){let e,h,r=Dr;for(let n=0;n<s;n+=1){const s=uh(i[n],this.Jt,this.$s.Jt);if(void 0!==h){const i=Gr(h,s,t),n=(i.x-t.x)**2+(i.y-t.y)**2;n<r&&(r=n,e=i)}h=s}return void 0!==e?uh(e,this.$s.Jt,this.Jt):void 0}if("x"===this.YV.yV&&this.dl===Ba.NearestX||"y"===this.YV.yV&&this.dl===Ba.NearestY){const s=Na(i,uh(t,this.$s.Jt,this.Jt),this.YV.yV,this.YV.pV,e,h);return s?$r(i[s.a],i[s.b],s.lerpAmount):void 0}return this.Gx(t)}oi(){return this.al.max.x}ni(){return this.al.min.x}li(){return this.al.max.y}ai(){return this.al.min.y}getPointsBounds(){return this.al}Rl(){return Tr(this.ku)}zl(){return Tr(this.ku)}}class Rv extends aS{constructor(t,i){super(t),this.eN=i,this.hN=sr(i,!1),this.rN=i.length,this.cO=t.PL(this.hN);const s=Xr(this.eN);this.Et=e(s.max.x-s.min.x,s.max.y-s.min.y)}sO(){this.XB.UL(this.cO)}}const zv=t=>{const i=function(){const t=[],i=2/1.73205080757;return t.push(e(-i/2,.3333333333333333)),t.push(e(0,-.6666666666666666)),t.push(e(i/2,.3333333333333333)),t}();return new Rv(t,i)},Vv=t=>{const i=[e(-.5,-.5),e(-.5,.5),e(.5,-.5),e(.5,-.5),e(-.5,.5),e(.5,.5)];return new Rv(t,i)},Nv=(t,i,s)=>{let e=i.qL.qB.get(t);return e||(e=s(i),i.qL.qB.set(t,e)),e};class Gv extends il{constructor(t,i,s,e,r,n,o){super(t,i,s,e,r),this.HO=new ov,this.VR=a(h(Br,Br),h(Dr,Dr)),this.DR=t,this.BR=i,this.GR=n,this.WR=o,this.XB=t.OR()}le(){const i=this.Ko.M(),s=this.Ko.o,h=this.ul,r=h.length,n=r>0,o=this.hl.M(),a=this.Qe,l=this.size.M(),u=this.Jt.rs(),c=this.size.o||this.hl.o,f=this.ml||h&&h.length>0,d=u||c;if(n&&(this.el=ur(this.el,h,{canReturnB:!0}),this.ll+=r),n||this.ml){this.al=this.fl?Kr(this.al,this.fl):Kr(this.al,Xr(this.el));const t=sr(this.el,this.Jt.Ui());this.nN=this.ll,this.oN=this.XB.PL(t,!1,this.oN)}if(this.HO.HL(this.Jt),c||this.pa()||s){const t=this.rl.M()?"attribute":"uniform",s=l<=1&&sv.PointSize(t),e=sv.VertexLocation({offset:l>1?{dataType:t,sizeUnit:"px",symmetric:!0,rotation:(this.nl.M()||this.Pa.M()%360!=0)&&{dataType:this.nl.M()?"attribute":"uniform"}}:void 0,axisWorldTranslation:yS(this.Jt),normalSource:void 0}),h=Oe(this.Qe)&&this.Qe,r=th(this.Qe)&&this.Qe,n=eh(this.Qe)&&this.Qe,o=ze(this.Qe)&&this.Qe,a=Ee(this.Qe)&&this.Qe,u=h||r||n||o||a;this.jO=u?this.XB.BL(sv["2D"],s,e,h?sv.Color({dataType:"uniform"}):a?sv.Color({dataType:"attribute"}):o?sv.Color({dataType:["lookup",o.getLookUpProperty()]}):r?sv.Color({dataType:["gradient",r]}):n?sv.Color({dataType:["gradient",n]}):void 0):void 0,this.oz=i&&u?this.XB.BL(sv["2D"],s,e,sv.MousePicking):void 0}if(a!==Ie?d&&(this.aN&&(this.aN=void 0),l>1||Ee(a)?l<=1?this.Gz=this.XB.gl.POINTS:o===t.PointShape.Triangle?(this.aN=Nv(t.PointShape.Triangle,this.XB,zv),this.Gz=this.XB.gl.TRIANGLES):o===t.PointShape.Circle?(this.aN=Nv(t.PointShape.Circle,this.XB,(t=>((t,i)=>{const s=function(t=25){return Kg(e(0,0),0,360,.5,.5,t)[0]}(i);return new Rv(t,s)})(t,24))),this.Gz=this.XB.gl.TRIANGLE_FAN):o===t.PointShape.Square?(this.aN=Nv(t.PointShape.Square,this.XB,Vv),this.Gz=this.XB.gl.TRIANGLES):this.Gz=this.XB.gl.POINTS:this.Gz=this.XB.gl.POINTS):this.aN&&(this.aN=void 0),f||this.pa()){const t=this.el.length;if(Ee(a)&&this.nN&&this.nN>0){const i=a.getFallbackColor(),s=new Float32Array(4*t);for(let e=0;e<t;e+=1){const t=this.el[e];t.color?(s[4*e+0]=t.color.r,s[4*e+1]=t.color.g,s[4*e+2]=t.color.b,s[4*e+3]=t.color.a):(s[4*e+0]=i.r,s[4*e+1]=i.g,s[4*e+2]=i.b,s[4*e+3]=i.a)}this.lN=this.XB.PL(s,!0,this.lN)}else this.lN&&this.XB.UL(this.lN),this.lN=void 0;if(ze(a)?this.Jz=this.DR.wz(a.lut,this.Jz):this.Jz&&(this.DR.kz(this.Jz),this.Jz=void 0),this.rl.M()&&this.nN&&this.nN>0&&l>1){const i=new Float32Array(t);for(let s=0;s<t;s+=1){const t=this.el[s];t.size?i[s]=t.size:i[s]=l}this.uN=this.XB.PL(i,!0,this.uN)}else this.uN&&(this.XB.UL(this.uN),this.uN=void 0);if(this.nl.M()&&this.nN&&this.nN>0&&l>1){const i=new Float32Array(2*t),s=yn(this.Pa.M()),e=Math.sin(s),h=Math.cos(s);for(let s=0;s<t;s+=1){const t=this.el[s];if(t.rotation){const e=yn(t.rotation);i[2*s+0]=Math.sin(e),i[2*s+1]=Math.cos(e)}else i[2*s+0]=e,i[2*s+1]=h}this.cN=this.XB.PL(i,!0,this.cN)}else this.cN&&(this.XB.UL(this.cN),this.cN=void 0);if(this.ol.M()&&this.nN&&this.nN>0){const i=new Float32Array(t);for(let s=0;s<t;s+=1){const t=this.el[s];"value"in t&&void 0!==t.value&&null!==t.value?i[s]=t.value:i[s]=gh}this.St=this.XB.PL(i,!0,this.St)}else this.St&&(this.XB.UL(this.St),this.St=void 0);this.xa(this.Qe)}return th(a)?this.ZR=fv(this.aa(),this.Jt,a.getPosition(),a.getExtent(),a.getShape(),this.XB.zO()):eh(a)?this.KR=dv(this.aa(),this.Jt,a.getAngle(!0),this.XB.zO()):(this.ZR=void 0,this.KR=void 0),f&&(this.al&&f&&(this.VR=$a(this.al,{x:l,y:l},this.Jt)),this.ul=[],this.cl=0,this.fl=Or),this.Sa=a,this.hl.o=!1,this.size.o=!1,this.Ko.o=!1,this.ml=!1,this}YB(t){const i=1===t?this.oz:this.jO,s=this.oN,e=this.nN;return i&&s&&e&&(this.XB.BO(i),this.XB.OL(i,((i,h,r,n)=>{if(this.Jt instanceof Rn||this.Jt instanceof Fg?this.XB.EL(i("uScale"),this.HO.NL()).EL(i("uDisp"),this.HO.GL()).EL(n("uScaleStart_highpart"),this.HO.xR()).EL(n("uScaleStart_lowpart"),this.HO.MR()):this.Jt instanceof zn&&this.XB.EL(n("uScaleStart"),this.HO.MixedScaleXY.uScaleStart).EL(n("uScaleStartLog"),this.HO.MixedScaleXY.uScaleStartLog).EL(n("uScaleInterval"),this.HO.MixedScaleXY.uScaleInterval).EL(n("uScaleIntervalLog"),this.HO.MixedScaleXY.uScaleIntervalLog).EL(i("uViewportStart"),this.HO.MixedScaleXY.uViewportStart).EL(i("uViewportSize"),this.HO.MixedScaleXY.uViewportSize),this.XB.QE(r,s,this.Jt.Ui(),this.aN?1:void 0).zL(i("uIsHighlighted"),1===t||2===t?0:this.ta).VL(i("uHighlightColorOffset"),this.ha).zL(i("uRenderEffectMask"),2===t?1:0).zL(n("uDevicePixelRatio"),this.XB.zO()),this.aN){const t=h("aInstanceGeo");this.XB.yE(t,this.aN.cO).SE(t,0)}if(1===t)this.XB.VL(i("uColor"),this.WR);else if(Oe(this.Qe))this.XB.VL(i("uColor"),this.Qe.getColor());else if(Ee(this.Qe)&&this.lN){const t=h("aColor");this.XB.bE(t,this.lN),this.Gz!==this.XB.gl.POINTS&&this.XB.SE(t,1)}else if(ze(this.Qe)&&this.Jz){if("value"===this.Qe.getLookUpProperty()&&this.St){const t=h("aLookupValue");this.XB.xE(t,this.St),this.Gz!==this.XB.gl.POINTS&&this.XB.SE(t,1)}this.XB.fR(r,this.Qe.lut,this.Jz,0)}else if(th(this.Qe)){if(!this.ZR)return!1;this.XB.ZE(r,this.ZR,this.Qe)}else if(eh(this.Qe)){if(!this.KR)return!1;this.XB.KE(r,this.KR,this.Qe)}if(this.uN&&this.Gz!==this.XB.gl.POINTS){const t=h("aOffsetPixels");this.XB.xE(t,this.uN),this.Gz!==this.XB.gl.POINTS&&this.XB.SE(t,1)}else if(this.Gz!==this.XB.gl.POINTS){const t=i("uOffsetPixels");this.XB.zL(t,this.size.M())}if(this.cN&&this.Gz!==this.XB.gl.POINTS){const t=h("aRot");this.XB.yE(t,this.cN),this.Gz!==this.XB.gl.POINTS&&this.XB.SE(t,1)}else if(this.Gz!==this.XB.gl.POINTS&&this.Pa.M()%360!=0){const t=yn(this.Pa.M()),s=Math.sin(t),e=Math.cos(t);this.XB.EL(i("uRot"),[s,e])}if(this.Gz===this.XB.gl.POINTS)this.XB.zL(i("uPointSize"),this.size.M());else{const t={x:2/this.$s.Ci().x,y:2/this.$s.Ci().y};this.XB.EL(i("uRatioPxClip"),[t.x,t.y])}let o=!1;return this.Gz===this.XB.gl.POINTS?(this.XB.Ly(this.Gz,e),o=!0):this.aN&&(this.XB.AE(this.Gz,0,this.aN.rN,e),o=!0),o}))),this}ER(t){return this.GR===t&&{}}fb(t){this.kl()>0&&this.le();const i=this.Sl(),s=La(i,t,this.dl,!1,!1,this.Jt,this.$s.Jt,this.al,void 0,void 0);return void 0!==s?i[s]:void 0}eh(t){return super.eh(t)}oi(){return this.al.max.x}ni(){return this.al.min.x}li(){return this.al.max.y}ai(){return this.al.min.y}Rl(){return.5*this.size.M()}zl(){return.5*this.size.M()}_O(){return this.oN&&(this.XB.UL(this.oN),this.oN=void 0),this.aN&&(this.aN=void 0),this.lN&&(this.XB.UL(this.lN),this.lN=void 0),this.cN&&(this.XB.UL(this.cN),this.cN=void 0),this.St&&(this.XB.UL(this.St),this.St=void 0),this.Jz&&(this.DR.kz(this.Jz),this.Jz=void 0),this}}var Wv="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Hv={exports:{}};function Uv(t,i,s){s=s||2;var e,h,r,n,o,a,l,u=i&&i.length,c=u?i[0]*s:t.length,f=jv(t,0,c,s,!0),d=[];if(!f||f.next===f.prev)return d;if(u&&(f=function(t,i,s,e){var h,r,n,o=[];for(h=0,r=i.length;h<r;h++)(n=jv(t,i[h]*e,h<r-1?i[h+1]*e:t.length,e,!1))===n.next&&(n.steiner=!0),o.push(sb(n));for(o.sort(Jv),h=0;h<o.length;h++)Qv(o[h],s),s=$v(s,s.next);return s}(t,i,f,s)),t.length>80*s){e=r=t[0],h=n=t[1];for(var g=s;g<c;g+=s)(o=t[g])<e&&(e=o),(a=t[g+1])<h&&(h=a),o>r&&(r=o),a>n&&(n=a);l=0!==(l=Math.max(r-e,n-h))?1/l:0}return Yv(f,d,s,e,h,l),d}function jv(t,i,s,e,h){var r,n;if(h===mb(t,i,s,e)>0)for(r=i;r<s;r+=e)n=fb(r,t[r],t[r+1],n);else for(r=s-e;r>=i;r-=e)n=fb(r,t[r],t[r+1],n);return n&&nb(n,n.next)&&(db(n),n=n.next),n}function $v(t,i){if(!t)return t;i||(i=t);var s,e=t;do{if(s=!1,e.steiner||!nb(e,e.next)&&0!==rb(e.prev,e,e.next))e=e.next;else{if(db(e),(e=i=e.prev)===e.next)break;s=!0}}while(s||e!==i);return i}function Yv(t,i,s,e,h,r,n){if(t){!n&&r&&function(t,i,s,e){var h=t;do{null===h.z&&(h.z=ib(h.x,h.y,i,s,e)),h.prevZ=h.prev,h.nextZ=h.next,h=h.next}while(h!==t);h.prevZ.nextZ=null,h.prevZ=null,function(t){var i,s,e,h,r,n,o,a,l=1;do{for(s=t,t=null,r=null,n=0;s;){for(n++,e=s,o=0,i=0;i<l&&(o++,e=e.nextZ);i++);for(a=l;o>0||a>0&&e;)0!==o&&(0===a||!e||s.z<=e.z)?(h=s,s=s.nextZ,o--):(h=e,e=e.nextZ,a--),r?r.nextZ=h:t=h,h.prevZ=r,r=h;s=e}r.nextZ=null,l*=2}while(n>1)}(h)}(t,e,h,r);for(var o,a,l=t;t.prev!==t.next;)if(o=t.prev,a=t.next,r?Zv(t,e,h,r):Xv(t))i.push(o.i/s),i.push(t.i/s),i.push(a.i/s),db(t),t=a.next,l=a.next;else if((t=a)===l){n?1===n?Yv(t=Kv($v(t),i,s),i,s,e,h,r,2):2===n&&qv(t,i,s,e,h,r):Yv($v(t),i,s,e,h,r,1);break}}}function Xv(t){var i=t.prev,s=t,e=t.next;if(rb(i,s,e)>=0)return!1;for(var h=t.next.next;h!==t.prev;){if(eb(i.x,i.y,s.x,s.y,e.x,e.y,h.x,h.y)&&rb(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function Zv(t,i,s,e){var h=t.prev,r=t,n=t.next;if(rb(h,r,n)>=0)return!1;for(var o=h.x<r.x?h.x<n.x?h.x:n.x:r.x<n.x?r.x:n.x,a=h.y<r.y?h.y<n.y?h.y:n.y:r.y<n.y?r.y:n.y,l=h.x>r.x?h.x>n.x?h.x:n.x:r.x>n.x?r.x:n.x,u=h.y>r.y?h.y>n.y?h.y:n.y:r.y>n.y?r.y:n.y,c=ib(o,a,i,s,e),f=ib(l,u,i,s,e),d=t.prevZ,g=t.nextZ;d&&d.z>=c&&g&&g.z<=f;){if(d!==t.prev&&d!==t.next&&eb(h.x,h.y,r.x,r.y,n.x,n.y,d.x,d.y)&&rb(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,g!==t.prev&&g!==t.next&&eb(h.x,h.y,r.x,r.y,n.x,n.y,g.x,g.y)&&rb(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&eb(h.x,h.y,r.x,r.y,n.x,n.y,d.x,d.y)&&rb(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;g&&g.z<=f;){if(g!==t.prev&&g!==t.next&&eb(h.x,h.y,r.x,r.y,n.x,n.y,g.x,g.y)&&rb(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function Kv(t,i,s){var e=t;do{var h=e.prev,r=e.next.next;!nb(h,r)&&ob(h,e,e.next,r)&&ub(h,r)&&ub(r,h)&&(i.push(h.i/s),i.push(e.i/s),i.push(r.i/s),db(e),db(e.next),e=t=r),e=e.next}while(e!==t);return $v(e)}function qv(t,i,s,e,h,r){var n=t;do{for(var o=n.next.next;o!==n.prev;){if(n.i!==o.i&&hb(n,o)){var a=cb(n,o);return n=$v(n,n.next),a=$v(a,a.next),Yv(n,i,s,e,h,r),void Yv(a,i,s,e,h,r)}o=o.next}n=n.next}while(n!==t)}function Jv(t,i){return t.x-i.x}function Qv(t,i){if(i=function(t,i){var s,e=i,h=t.x,r=t.y,n=-1/0;do{if(r<=e.y&&r>=e.next.y&&e.next.y!==e.y){var o=e.x+(r-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(o<=h&&o>n){if(n=o,o===h){if(r===e.y)return e;if(r===e.next.y)return e.next}s=e.x<e.next.x?e:e.next}}e=e.next}while(e!==i);if(!s)return null;if(h===n)return s;var a,l=s,u=s.x,c=s.y,f=1/0;e=s;do{h>=e.x&&e.x>=u&&h!==e.x&&eb(r<c?h:n,r,u,c,r<c?n:h,r,e.x,e.y)&&(a=Math.abs(r-e.y)/(h-e.x),ub(e,t)&&(a<f||a===f&&(e.x>s.x||e.x===s.x&&tb(s,e)))&&(s=e,f=a)),e=e.next}while(e!==l);return s}(t,i),i){var s=cb(i,t);$v(i,i.next),$v(s,s.next)}}function tb(t,i){return rb(t.prev,t,i.prev)<0&&rb(i.next,t,t.next)<0}function ib(t,i,s,e,h){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-s)*h)|t<<8))|t<<4))|t<<2))|t<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-e)*h)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function sb(t){var i=t,s=t;do{(i.x<s.x||i.x===s.x&&i.y<s.y)&&(s=i),i=i.next}while(i!==t);return s}function eb(t,i,s,e,h,r,n,o){return(h-n)*(i-o)-(t-n)*(r-o)>=0&&(t-n)*(e-o)-(s-n)*(i-o)>=0&&(s-n)*(r-o)-(h-n)*(e-o)>=0}function hb(t,i){return t.next.i!==i.i&&t.prev.i!==i.i&&!function(t,i){var s=t;do{if(s.i!==t.i&&s.next.i!==t.i&&s.i!==i.i&&s.next.i!==i.i&&ob(s,s.next,t,i))return!0;s=s.next}while(s!==t);return!1}(t,i)&&(ub(t,i)&&ub(i,t)&&function(t,i){var s=t,e=!1,h=(t.x+i.x)/2,r=(t.y+i.y)/2;do{s.y>r!=s.next.y>r&&s.next.y!==s.y&&h<(s.next.x-s.x)*(r-s.y)/(s.next.y-s.y)+s.x&&(e=!e),s=s.next}while(s!==t);return e}(t,i)&&(rb(t.prev,t,i.prev)||rb(t,i.prev,i))||nb(t,i)&&rb(t.prev,t,t.next)>0&&rb(i.prev,i,i.next)>0)}function rb(t,i,s){return(i.y-t.y)*(s.x-i.x)-(i.x-t.x)*(s.y-i.y)}function nb(t,i){return t.x===i.x&&t.y===i.y}function ob(t,i,s,e){var h=lb(rb(t,i,s)),r=lb(rb(t,i,e)),n=lb(rb(s,e,t)),o=lb(rb(s,e,i));return h!==r&&n!==o||!(0!==h||!ab(t,s,i))||!(0!==r||!ab(t,e,i))||!(0!==n||!ab(s,t,e))||!(0!==o||!ab(s,i,e))}function ab(t,i,s){return i.x<=Math.max(t.x,s.x)&&i.x>=Math.min(t.x,s.x)&&i.y<=Math.max(t.y,s.y)&&i.y>=Math.min(t.y,s.y)}function lb(t){return t>0?1:t<0?-1:0}function ub(t,i){return rb(t.prev,t,t.next)<0?rb(t,i,t.next)>=0&&rb(t,t.prev,i)>=0:rb(t,i,t.prev)<0||rb(t,t.next,i)<0}function cb(t,i){var s=new gb(t.i,t.x,t.y),e=new gb(i.i,i.x,i.y),h=t.next,r=i.prev;return t.next=i,i.prev=t,s.next=h,h.prev=s,e.next=s,s.prev=e,r.next=e,e.prev=r,e}function fb(t,i,s,e){var h=new gb(t,i,s);return e?(h.next=e.next,h.prev=e,e.next.prev=h,e.next=h):(h.prev=h,h.next=h),h}function db(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function gb(t,i,s){this.i=t,this.x=i,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function mb(t,i,s,e){for(var h=0,r=i,n=s-e;r<s;r+=e)h+=(t[n]-t[r])*(t[r+1]+t[n+1]),n=r;return h}Hv.exports=Uv,Hv.exports.default=Uv,Uv.deviation=function(t,i,s,e){var h=i&&i.length,r=h?i[0]*s:t.length,n=Math.abs(mb(t,0,r,s));if(h)for(var o=0,a=i.length;o<a;o++){var l=i[o]*s,u=o<a-1?i[o+1]*s:t.length;n-=Math.abs(mb(t,l,u,s))}var c=0;for(o=0;o<e.length;o+=3){var f=e[o]*s,d=e[o+1]*s,g=e[o+2]*s;c+=Math.abs((t[f]-t[g])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[g+1]-t[f+1]))}return 0===n&&0===c?0:Math.abs((c-n)/n)},Uv.flatten=function(t){for(var i=t[0][0].length,s={vertices:[],holes:[],dimensions:i},e=0,h=0;h<t.length;h++){for(var r=0;r<t[h].length;r++)for(var n=0;n<i;n++)s.vertices.push(t[h][r][n]);h>0&&(e+=t[h-1].length,s.holes.push(e))}return s};class yb extends Ja{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.qz={fill:void 0,border:void 0},this.HO=new ov,this.al=Or,this.fN=!1,this.dN=!1,this.gN=!1,this.mN=!1,this.Mf=[],this.DR=t,this.BR=i,this.nV=r,this.XB=t.OR(),this.Zz=this.XB.BE}ln(){const t=this.nV(),i={Js:t=>this.aV(i,t),Ys:t=>this.lV(i,t),Ll:t=>this.yN(i,t),Wb:t=>this.pN(i,t),el:[],u:void 0,ta:0,SN:!0,GR:t.id,WR:t.color};return this.Mf.push(i),i}Al(){var t;return this.Mf.length=0,this.fN=!0,this.gs&&this.jn&&(null===(t=this.$s.Hn)||void 0===t?void 0:t.entity)===this&&this.jn(this,void 0,this.$s.Hn.collectionMember),this}aV(t,i){var s;return t.SN=i,this.mN=!0,this.gs&&this.jn&&(null===(s=this.$s.Hn)||void 0===s?void 0:s.entity)===this&&this.$s.Hn.collectionMember===t&&this.jn(this,void 0,this.$s.Hn.collectionMember),t}lV(t,i){return t.ta=i,this.gN=!0,t}yN(t,i){return t.el=i,this.fN=!0,t}pN(t,i){return t.u=i,this.dN=!0,t}le(){const t=this.Ko.M(),i=this.Ko.o,s=this.pa(),e=this.gN,h=this.fN,r=this.dN,n=this.mN,o=this.th,a=this.Ma(),l=this.Mf.filter((t=>t.SN));if(this.HO.HL(this.Jt),(h||n)&&(this.al=Kr(...l.map((t=>Xr(t.el))))),h||n){const t=sr(l.map((t=>[...t.el,t.el[0],{x:Number.NaN,y:Number.NaN}])).flat(),this.Jt.Ui()),i=this.Jt.Ui()?4:2;this.Kz=this.XB.PL(t,!1,this.Kz);let s=[];l.reduce(((e,h)=>{const r=e,n=(h.el.length+1)*i,o=new Float32Array(t.buffer,r,n),a=Hv.exports(o,void 0,i),l=e/(Float32Array.BYTES_PER_ELEMENT*i);for(let t=0;t<a.length;t+=1)a[t]+=l;return s=ur(s,a,{canReturnB:!0}),r+(n+1*i)*Float32Array.BYTES_PER_ELEMENT}),0);const e=new Uint16Array(s);this.vN=this.XB.gE(e,this.vN),this.bN=e.length,this.xN=t.length/i}const u=Oe(this.Qe)&&this.Qe,c=ze(this.Qe)&&this.Qe,f=th(this.Qe)&&this.Qe,d=eh(this.Qe)&&this.Qe,g=u||c||d||f,m=to(this.th)&&this.th,y=m&&m.getFillStyle(),p=Oe(y)&&y,S=p,v=m&&Math.max(m.getThickness(),0);if((s||a||i)&&(this.qz.fill=g?{shader:this.XB.BL(sv["2D"],u&&sv.Color({dataType:"uniform"}),d&&sv.Color({dataType:["gradient",d]}),f&&sv.Color({dataType:["gradient",f]}),c&&sv.Color({dataType:["lookup",c.getLookUpProperty()]}),sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0}),sv.AttributeHighlight),mousePicking:t?{shader:this.XB.BL(sv["2D"],sv.MousePickingAttribute,sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0}),sv.AttributeHighlight)}:void 0,fillStyleSolid:u,fillStyleLinearGradient:d,fillStyleRadialGradient:f,fillStylePaletted:c}:void 0,this.qz.border=m&&S&&"number"==typeof v&&0!==v?{shader:this.XB.BL(sv["2D"],sv.Color({dataType:"uniform"}),sv.LineInstanced2D({axisWorldTranslation:yS(this.Jt),normalSource:void 0}),this.Zz?sv.AliasedEdge:void 0,sv.AttributeHighlight),geometry:wv(this.XB,v),mousePicking:t?{shader:this.XB.BL(sv["2D"],sv.MousePickingAttribute,sv.LineInstanced2D({axisWorldTranslation:yS(this.Jt),normalSource:void 0}),sv.AttributeHighlight)}:void 0,fillStyleSolid:p,thickness:v}:void 0,c?this.Jz=this.DR.wz(c.lut,this.Jz):this.Jz&&(this.DR.kz(this.Jz),this.Jz=void 0)),e||h){const t=l.reduce(((t,i)=>t+i.el.length+2),0),i=new Float32Array(t);let s=0;l.forEach((t=>{const e=t.el.length+2;for(let h=s;h<s+e;h+=1)i[h]=t.ta;s+=e})),this.MN=this.XB.PL(i,!0,this.MN)}if(t){if(h){const t=l.reduce(((t,i)=>t+i.el.length+2),0),i=new Float32Array(4*t);let s=0;l.forEach((t=>{const e=t.el.length+2;for(let h=s;h<s+4*e;h+=4)i[h]=t.WR.r,i[h+1]=t.WR.g,i[h+2]=t.WR.b,i[h+3]=t.WR.a;s+=4*e})),this._N=this.XB.PL(i,!1,this._N)}}else this._N&&(this.XB.UL(this._N),this._N=void 0);if(c&&"value"===c.getLookUpProperty()&&(r||h)){const t=l.reduce(((t,i)=>t+i.el.length+2),0),i=new Float32Array(t);let s=0;l.forEach((t=>{const e=void 0!==t.u?t.u:gh,h=t.el.length+2;for(let t=s;t<s+h;t+=1)i[t]=e;s+=h})),this.AN=this.XB.PL(i,!1,this.AN)}return f?this.ZR=fv(this.Qo||this.al,this.Jt,f.getPosition(),f.getExtent(),f.getShape(),this.XB.zO()):d?this.KR=dv(this.Qo||this.al,this.Jt,d.getAngle(!0),this.XB.zO()):(this.ZR=void 0,this.KR=void 0),this.gN=!1,this.mN=!1,this.fN=!1,this.dN=!1,this.Ko.o=!1,this.xa(this.Qe),this.wa(o),this}YB(t){var i,s;const{fill:e,border:h}=this.qz,r=this.Kz,n=this.MN,o=this._N;if(!r||!n)return this;if(e){const{fillStyleSolid:s,fillStyleLinearGradient:h,fillStyleRadialGradient:a,fillStylePaletted:l}=e,u=this.vN,c=this.bN,f=1===t?null===(i=e.mousePicking)||void 0===i?void 0:i.shader:e.shader;if(!f||!r||!u||void 0===c)return this;this.XB.BO(f).OL(f,((i,e,f,d)=>{if(this.Jt instanceof Rn||this.Jt instanceof Fg?this.XB.EL(i("uScale"),this.HO.NL()).EL(i("uDisp"),this.HO.GL()).EL(d("uScaleStart_highpart"),this.HO.xR()).EL(d("uScaleStart_lowpart"),this.HO.MR()):this.Jt instanceof zn&&this.XB.EL(d("uScaleStart"),this.HO.MixedScaleXY.uScaleStart).EL(d("uScaleStartLog"),this.HO.MixedScaleXY.uScaleStartLog).EL(d("uScaleInterval"),this.HO.MixedScaleXY.uScaleInterval).EL(d("uScaleIntervalLog"),this.HO.MixedScaleXY.uScaleIntervalLog).EL(i("uViewportStart"),this.HO.MixedScaleXY.uViewportStart).EL(i("uViewportSize"),this.HO.MixedScaleXY.uViewportSize),this.XB.QE(f,r,this.Jt.Ui(),void 0).ME(u).xE(e("aIsHighlighted"),1===t||2===t?this.XB.HE:n).VL(i("uHighlightColorOffset"),this.ha).zL(i("uRenderEffectMask"),2===t?1:0),1===t){if(!o)return!1;this.XB.bE(e("aColor"),o)}else if(s)this.XB.VL(i("uColor"),s.getColor());else if(a){if(!this.ZR)return!1;this.XB.ZE(f,this.ZR,a)}else if(h){if(!this.KR)return!1;this.XB.KE(f,this.KR,h)}else if(l){if(!this.Jz)return!1;if(this.XB.fR(f,l.lut,this.Jz,0),"value"===l.getLookUpProperty()){if(!this.AN)return!1;this.XB.xE(e("aLookupValue"),this.AN)}}return this.XB._E(c),!0}))}if(h){const{geometry:i,fillStyleSolid:e,thickness:a}=h,l=this.xN,u=1===t?null===(s=h.mousePicking)||void 0===s?void 0:s.shader:h.shader;if(!u||!r||!l)return this;this.XB.BO(u).OL(u,((s,h,u,c)=>{if(this.Jt instanceof Rn||this.Jt instanceof Fg?this.XB.EL(s("uScale"),this.HO.NL()).EL(s("uDisp"),this.HO.GL()).EL(c("uScaleStart_highpart"),this.HO.xR()).EL(c("uScaleStart_lowpart"),this.HO.MR()):this.Jt instanceof zn&&this.XB.EL(c("uScaleStart"),this.HO.MixedScaleXY.uScaleStart).EL(c("uScaleStartLog"),this.HO.MixedScaleXY.uScaleStartLog).EL(c("uScaleInterval"),this.HO.MixedScaleXY.uScaleInterval).EL(c("uScaleIntervalLog"),this.HO.MixedScaleXY.uScaleIntervalLog).EL(s("uViewportStart"),this.HO.MixedScaleXY.uViewportStart).EL(s("uViewportSize"),this.HO.MixedScaleXY.uViewportSize),this.XB.LL(1===t||2===t?this.XB.HE:n,1,{location:h("aIsHighlighted"),size:1}).VL(s("uHighlightColorOffset"),this.ha).zL(s("uRenderEffectMask"),2===t?1:0),1===t){if(!o)return!1;this.XB.LL(o,1,{location:h("aColor"),size:4})}else e&&this.XB.VL(s("uColor"),e.getColor());return kv.Wz(this.Jt.Ui(),this.XB,r,u,this.Jt.Ui()?4:2,0),kv.YB(this.DR,i,u,this.Zz&&1!==t,1===t,a,l),!0}))}return this}ER(t){const i=this.Mf.find((i=>i.GR===t));return!!i&&{collectionMember:i}}_O(){return this.vN&&(this.XB.UL(this.vN),this.vN=void 0),this.Kz&&(this.XB.UL(this.Kz),this.Kz=void 0),this.MN&&(this.XB.UL(this.MN),this.MN=void 0),this._N&&(this.XB.UL(this._N),this._N=void 0),this.AN&&(this.XB.UL(this.AN),this.AN=void 0),this.qz={fill:void 0,border:void 0},this.Jz&&(this.DR.kz(this.Jz),this.Jz=void 0),this}oi(){return this.al.max.x}ni(){return this.al.min.x}li(){return this.al.max.y}ai(){return this.al.min.y}Rl(){return Tr(this.th)}zl(){return Tr(this.th)}}class pb extends sl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.HO=new ov,this.wN=Or,this.DR=t,this.BR=i,this.GR=r,this.WR=n,this.XB=t.OR(),this.BR=i}le(){super.le();const t=this.Ko.M(),i=this.pa(),s=this.Ca.o||this.Et.o||this.Pa.o||this.K.o,h=this.th,r=this.Ma(),n=h.getThickness(),o=this.Aa(n),a=this.Pa.M();this.HO.HL(this.Jt);const l=this.Jt.rs();if(s||l){const t=this.Et.M();this.el=function(t,i,s,h,r){const n=((t,i,s)=>[t,e(t.x+i,t.y),e(t.x+i,t.y+s),e(t.x,t.y+s)])(t,i,s);if(0!==h||h%360!=0){const t=h*Math.PI/180;n[0]=sn(n[0],r,t),n[1]=sn(n[1],r,t),n[2]=sn(n[2],r,t),n[3]=sn(n[3],r,t)}return n}(this.Ca.M(),t.x,t.y,a,this.K.M());const i=sr(this.el,this.Jt.Ui());this.jR=this.XB.PL(i,!1,this.jR),this.YR=this.el.length}this.wN=Xr(this.el);const u=Oe(this.Qe)&&this.Qe,c=th(this.Qe)&&this.Qe,f=eh(this.Qe)&&this.Qe,d=ju(this.Qe)&&this.Qe,g=u||c||f||d;if(i&&(this.qR=g?this.XB.BL(sv["2D"],u&&sv.Color({dataType:"uniform"}),f&&sv.Color({dataType:["gradient",f]}),c&&sv.Color({dataType:["gradient",c]}),d&&sv.Color({dataType:["image",d.getFitMode()]}),sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0})):void 0),c?this.ZR=fv(this.Qo||this.wN,this.Jt,c.getPosition(),c.getExtent(),c.getShape(),this.XB.zO()):f?this.KR=dv(this.Qo||this.wN,this.Jt,f.getAngle(!0),this.XB.zO()):(this.ZR=void 0,this.KR=void 0),d){const t=d.getSource();if((!this.kN||i)&&t){this.kN&&(this.kN.texture.OO(this),this.XB.UL(this.kN.texCoordsBuffer));const i=this.XB.qE(t);i.BO(this),this.kN={texture:i,texCoordsBuffer:this.XB.PL([]),sourceMissingTexture:this.XB.$E(new Uint8Array(Object.values(d.getSourceMissingColor().toJS()).map((t=>255*t))),this.XB.gl.RGBA,!1,!0,{x:1,y:1},!1),textureReadyCallback:()=>{this.kN&&d&&(this.CN(),this.$s.te())}},i.uL(this.kN.textureReadyCallback),this.CN()}this.kN&&this.kN.texture.eL&&this.kN.texture.sL&&this.kN.texture.QO&&(this.kN.texture.le(),this.$s.te()),(l||s)&&this.kN&&this.kN.texture.eL&&this.CN()}else this.kN&&(this.kN.texture.OO(this),this.XB.UL(this.kN.texCoordsBuffer),this.kN=void 0);if(s||o||l&&1!==n){if(1===n||-1===n)[this.JR,this.TN]=[this.el,void 0];else{const t=this.Jt;[this.JR,this.TN]=t instanceof zn?((t,i,s)=>{const e=t[0],h=t[1],r=t[2],n=t[3],o=i/2;return[[s.ls(e,h,o,-o),s.ls(h,e,-o,-o),s.ls(n,r,-o,-o),s.ls(r,n,o,-o),s.ls(e,h,-o,o),s.ls(h,e,o,o),s.ls(n,r,o,o),s.ls(r,n,-o,o)],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.el,n,t):((t,i,s)=>{const h=t[0],r=t[1],n=t[2],o=t[3],a=e(i.x*s*.5,i.y*s*.5),l=hn(en(r,h)),u=hn(en(o,h)),c=fn(l),f=fn(u);return[[an(h,an(on(c,a.x),on(f,a.y))),an(r,an(on(l,a.x),on(f,a.y))),an(o,an(on(c,a.x),on(u,a.y))),an(n,an(on(l,a.x),on(u,a.y))),an(h,an(on(l,a.x),on(u,a.y))),an(r,an(on(c,a.x),on(u,a.y))),an(o,an(on(l,a.x),on(f,a.y))),an(n,an(on(c,a.x),on(f,a.y)))],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.el,t.os(),n)}this.tz=this.XB.PL(sr(this.JR,this.Jt.Ui()),!1,this.tz),this.TN?(this.Vz=this.XB.gE(new Uint16Array(this.TN),this.Vz),this.QR=this.TN.length):(this.Vz&&this.XB.UL(this.Vz),this.Vz=void 0,this.QR=this.JR.length)}const m=to(h)&&h,y=m&&m.getFillStyle(),p=y&&Oe(y)&&y,S=y&&eh(y)&&y,v=y&&th(y)&&y,b=m,x=p||S||v;return r&&(this.nz=b&&x?this.XB.BL(sv["2D"],sv.Color({dataType:v?["gradient",v]:S?["gradient",S]:"uniform"}),sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0})):void 0),v?this.hz=fv(this.wN,this.Jt,v.getPosition(),v.getExtent(),v.getShape(),this.XB.zO()):S?this.rz=dv(this.wN,this.Jt,S.getAngle(!0),this.XB.zO()):(this.hz=void 0,this.rz=void 0),this.oz=t&&g?this.oz||this.XB.BL(sv["2D"],sv.Color({dataType:"uniform"}),sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0})):void 0,this.az=t&&this.th!==rh?this.az||this.XB.BL(sv["2D"],sv.Color({dataType:"uniform"}),sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0})):void 0,this.xa(this.Qe),this.wa(h),this.Ca.o=!1,this.Pa.o=!1,this.Et.o=!1,this.K.o=!1,this}ER(t){return this.GR===t&&{}}CN(){if(this.kN&&ju(this.Qe)){const i=uh(this.ja(),this.Jt,this.$s.Jt),s=ln(uh(an(this.ja(),this.Ci()),this.Jt,this.$s.Jt),i);this.kN.texCoordsBuffer=this.XB.PL(((i,s,e,h,r)=>{const n=Math.min(e/i,h/s),o=i*n,a=s*n,l=e/o,u=h/a,c=o/e,f=a/h;let d=0,g=1,m=0,y=1;switch(r){case t.ImageFitMode.Fill:u<l?(d=0,g=1,m=.5+-c/2,y=.5+c/2):(m=0,y=1,d=.5+-f/2,g=.5+f/2);break;case t.ImageFitMode.Fit:u<l?(m=0,y=1,d=.5+-l/2,g=.5+l/2):(d=0,g=1,m=.5+-u/2,y=.5+u/2);break;case t.ImageFitMode.Center:{const t=e/i,r=h/s;d=.5+-t/2,g=.5+t/2,m=.5+-r/2,y=.5+r/2}break;case t.ImageFitMode.Tile:d=0,g=e/i,m=0,y=h/s;break;case t.ImageFitMode.Stretch:default:d=0,g=1,m=0,y=1}return new Float32Array([d,y,g,y,g,m,d,m])})(this.kN.texture.tL,this.kN.texture.iL,s.x,s.y,this.Qe.getFitMode()),!1,this.kN.texCoordsBuffer)}}YB(t){const i=1===t?this.oz:this.qR,s=this.jR,e=this.YR,h=this.Qe;i&&s&&e&&h!==Ie&&(this.XB.BO(i),this.XB.OL(i,((i,r,n,o)=>{if(this.Jt instanceof Rn||this.Jt instanceof Fg?this.XB.EL(i("uScale"),this.HO.NL()).EL(i("uDisp"),this.HO.GL()).EL(o("uScaleStart_highpart"),this.HO.xR()).EL(o("uScaleStart_lowpart"),this.HO.MR()):this.Jt instanceof zn&&this.XB.EL(o("uScaleStart"),this.HO.MixedScaleXY.uScaleStart).EL(o("uScaleStartLog"),this.HO.MixedScaleXY.uScaleStartLog).EL(o("uScaleInterval"),this.HO.MixedScaleXY.uScaleInterval).EL(o("uScaleIntervalLog"),this.HO.MixedScaleXY.uScaleIntervalLog).EL(i("uViewportStart"),this.HO.MixedScaleXY.uViewportStart).EL(i("uViewportSize"),this.HO.MixedScaleXY.uViewportSize),1===t)this.XB.VL(i("uColor"),this.WR);else if(Oe(h))this.XB.VL(i("uColor"),h.getColor());else if(th(h)){if(!this.ZR)return!1;this.XB.ZE(n,this.ZR,h)}else if(eh(h)){if(!this.KR)return!1;this.XB.KE(n,this.KR,h)}else if(ju(h)){if(!this.kN)return!1;const t=this.kN&&this.kN.texture.fL();this.XB.VL(o("uColor"),h.getSurroundingColor()).RL(i(kS),t||this.kN.sourceMissingTexture,0).LL(this.kN.texCoordsBuffer,void 0,{location:r("aTextureCoord"),size:2}).lE(h.fitMode)}return this.XB.zL(i("uIsHighlighted"),1===t||2===t?0:this.ta).VL(i("uHighlightColorOffset"),this.ha).zL(i("uRenderEffectMask"),2===t?1:0).QE(n,s,this.Jt.Ui(),void 0).Ly(this.XB.gl.TRIANGLE_FAN,e),!0})));const r=1===t?this.az:this.nz,n=this.th,o=this.tz;return r&&o&&to(n)&&(this.XB.BO(r),this.XB.OL(r,((i,s,e,h)=>{this.Jt instanceof Rn||this.Jt instanceof Fg?this.XB.EL(i("uScale"),this.HO.NL()).EL(i("uDisp"),this.HO.GL()).EL(h("uScaleStart_highpart"),this.HO.xR()).EL(h("uScaleStart_lowpart"),this.HO.MR()):this.Jt instanceof zn&&this.XB.EL(h("uScaleStart"),this.HO.MixedScaleXY.uScaleStart).EL(h("uScaleStartLog"),this.HO.MixedScaleXY.uScaleStartLog).EL(h("uScaleInterval"),this.HO.MixedScaleXY.uScaleInterval).EL(h("uScaleIntervalLog"),this.HO.MixedScaleXY.uScaleIntervalLog).EL(i("uViewportStart"),this.HO.MixedScaleXY.uViewportStart).EL(i("uViewportSize"),this.HO.MixedScaleXY.uViewportSize);const r=n.getFillStyle();if(1===t)this.XB.VL(i("uColor"),this.WR);else if(Oe(r))this.XB.VL(i("uColor"),r.getColor());else if(th(r)){if(!this.hz)return!1;this.XB.ZE(e,this.hz,r)}else if(eh(r)){if(!this.rz)return!1;this.XB.KE(e,this.rz,r)}return this.XB.zL(i("uIsHighlighted"),1===t||2===t?0:this.ta).VL(i("uHighlightColorOffset"),this.ha).zL(i("uRenderEffectMask"),2===t?1:0).QE(e,o,this.Jt.Ui(),void 0),this.Vz?this.XB.ME(this.Vz)._E(this.QR):this.XB.Ly(this.XB.gl.LINE_LOOP,this.QR),!0}))),this}_O(){return this.Vz&&(this.XB.UL(this.Vz),this.Vz=void 0),this.jR&&(this.XB.UL(this.jR),this.jR=void 0),this.tz&&(this.XB.UL(this.tz),this.tz=void 0),this.kN&&(this.kN.texture.OO(this),this.kN.texture.cL(this.kN.textureReadyCallback),this.XB.AO(this.kN.sourceMissingTexture),this.XB.UL(this.kN.texCoordsBuffer),this.kN=void 0),this.qR=void 0,this.nz=void 0,this.oz=void 0,this.az=void 0,this}oi(){return Math.max(this.Ca.M().x,this.Ca.M().x+this.Et.M().x)}ni(){return Math.min(this.Ca.M().x,this.Ca.M().x+this.Et.M().x)}li(){return Math.max(this.Ca.M().y,this.Ca.M().y+this.Et.M().y)}ai(){return Math.min(this.Ca.M().y,this.Ca.M().y+this.Et.M().y)}Rl(){return Tr(this.th)}zl(){return Tr(this.th)}}class Sb extends hl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.HO=new ov,this.DR=t,this.BR=i,this.GR=r,this.WR=n,this.XB=t.OR(),this.BR=i}fb(t){let i,s=Number.MAX_VALUE;for(const e of this.el){const h=Hr(uh(e,this.Jt,this.$s.Jt),t);h<s&&(s=h,i=e)}return i}le(){const t=this.Ko.M(),i=this.pa(),s=this.Ol,e=this.el.length>=3,h=this.th,r=this.Ma(),n=h.getThickness(),o=this.Aa(n);this.HO.HL(this.Jt),this.y_=this.Jt.os();const a=this.Jt.rs();if(s&&(this.al=Xr(this.el)),s&&e){const t=sr(this.el,this.Jt.Ui());this.jR=this.XB.PL(t,!1,this.jR),this.FN=new Uint16Array(Hv.exports(t)),this.IN=this.XB.gE(this.FN,this.IN),this.YR=this.FN.length}const l=Oe(this.Qe)&&this.Qe,u=ze(this.Qe)&&this.Qe,c=th(this.Qe)&&this.Qe,f=eh(this.Qe)&&this.Qe,d=l||u&&"value"!==u.getLookUpProperty()&&u||f||c;if(i&&(u?this.Jz=this.DR.wz(u.lut,this.Jz):this.Jz&&(this.DR.kz(this.Jz),this.Jz=void 0),this.qR=d?this.XB.BL(sv["2D"],l&&sv.Color({dataType:"uniform"}),f&&sv.Color({dataType:["gradient",f]}),c&&sv.Color({dataType:["gradient",c]}),u&&sv.Color({dataType:["lookup",u.getLookUpProperty()]}),sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0})):void 0),c?this.ZR=fv(this.Qo||this.al,this.Jt,c.getPosition(),c.getExtent(),c.getShape(),this.XB.zO()):f?this.KR=dv(this.Qo||this.al,this.Jt,f.getAngle(!0),this.XB.zO()):(this.ZR=void 0,this.KR=void 0),(s||o||a&&1!==n)&&e){const t=1===n||-1===n?this.el:gv(this.el,this.y_,n);this.JR=sr(t,this.Jt.Ui()),this.tz=this.XB.PL(this.JR,!0,this.tz),this.QR=t.length}const g=to(h)&&h,m=g&&g.getFillStyle(),y=m&&Oe(m)&&m,p=m&&eh(m)&&m,S=m&&th(m)&&m,v=g,b=y||p||S;return r&&(this.nz=v&&b?this.XB.BL(sv["2D"],sv.Color({dataType:S?["gradient",S]:p?["gradient",p]:"uniform"}),sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0})):void 0),S?this.hz=fv(this.Qo||this.al,this.Jt,S.getPosition(),S.getExtent(),S.getShape(),this.XB.zO()):p?this.rz=dv(this.Qo||this.al,this.Jt,p.getAngle(!0),this.XB.zO()):(this.hz=void 0,this.rz=void 0),this.oz=t&&d?this.oz||this.XB.BL(sv["2D"],sv.MousePicking,sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0})):void 0,this.az=t&&this.th!==rh?this.oz||this.XB.BL(sv["2D"],sv.MousePicking,sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0})):void 0,this.Ol=!1,this.xa(this.Qe),this.wa(h),this}YB(t){const i=this.Qe,s=1===t?this.oz:this.qR,e=this.jR,h=this.YR;s&&e&&h&&this.XB.BO(s).OL(s,((s,h,r,n)=>{if(this.XB.EL(s("uScale"),this.HO.NL()).EL(s("uDisp"),this.HO.GL()).EL(n("uScaleStart_highpart"),this.HO.xR()).EL(n("uScaleStart_lowpart"),this.HO.MR()).QE(r,e,this.Jt.Ui(),void 0).ME(this.IN).zL(s("uIsHighlighted"),1===t||2===t?0:this.ta).VL(s("uHighlightColorOffset"),this.ha).zL(s("uRenderEffectMask"),2===t?1:0),1===t)this.XB.VL(s("uColor"),this.WR);else if(Oe(i))this.XB.VL(s("uColor"),i.getColor());else if(th(i)){if(!this.ZR)return!1;this.XB.ZE(r,this.ZR,i)}else if(eh(i)){if(!this.KR)return!1;this.XB.KE(r,this.KR,i)}else ze(i)&&this.Jz&&this.XB.fR(r,i.lut,this.Jz,0);return this.XB._E(this.YR),!0}));const r=1===t?this.az:this.nz,n=this.th,o=this.tz,a=this.QR;return r&&o&&a&&this.XB.BO(r).OL(r,((i,s,e,h)=>{this.XB.zL(i("uIsHighlighted"),1===t||2===t?0:this.ta).VL(i("uHighlightColorOffset"),this.ha).zL(i("uRenderEffectMask"),2===t?1:0).EL(i("uScale"),this.HO.NL()).EL(i("uDisp"),this.HO.GL()).QE(e,o,this.Jt.Ui(),void 0);const r=n.getFillStyle();if(1===t)this.XB.VL(i("uColor"),this.WR);else if(Oe(r))this.XB.VL(i("uColor"),r.getColor());else if(th(r)){if(!this.hz)return!1;this.XB.ZE(e,this.hz,r)}else if(eh(r)){if(!this.rz)return!1;this.XB.KE(e,this.rz,r)}const a=n.getThickness(),l=-1===a||1===a;return this.XB.Ly(l?this.XB.gl.LINE_LOOP:this.XB.gl.TRIANGLE_STRIP,this.QR),!0})),this}ER(t){return this.GR===t&&{}}_O(){return this.IN&&(this.XB.UL(this.IN),this.IN=void 0),this.jR&&(this.XB.UL(this.jR),this.jR=void 0),this.tz&&(this.XB.UL(this.tz),this.tz=void 0),this.qR=void 0,this.nz=void 0,this.oz=void 0,this.az=void 0,this.Jz&&(this.DR.kz(this.Jz),this.Jz=void 0),this}}const vb=(t,i)=>{let s=0;const e=[];for(;s<t;){const h=s;let r=i;const n=s>0;r-=n?1:0,r-=s+r<t?1:0;const o=Math.min(r,t-h),a=s-(n?1:0),l={start:a,startUnique:h,sizeData:Math.min(i,t-a),sizeUniqueData:o};e.push(l),s+=o}return e},bb=(t,i)=>{let s=0;const e=[];for(;s<t;){const h=s;let r=i;const n=s>0;r-=n?1:0,r-=0;const o=Math.min(r,t-h),a=s-(n?1:0),l={start:a,startUnique:h,sizeData:Math.min(i,t-a),sizeUniqueData:o};e.push(l),s+=o}return e},xb=(t,i,s,e)=>{if(s){const t=new Map;return i.gridTiles.forEach((i=>{t.set(i,{type:s,dataInvalidationRanges:[{tileInvalidationOffset:{primary:0,secondary:0},tileInvalidationLength:i.sizeHeatmapDataVectors}]})})),t}const h=new Map;for(let s=0;s<t.length;s+=1){const r=t[s],n={x:r.startPrimary,y:r.startSecondary},o={x:n.x+r.lengthPrimary-1,y:n.y+r.lengthSecondary-1},a=[n,{x:o.x,y:n.y},o,{x:n.x,y:o.y}];i.gridTiles.forEach((t=>{const i=t.iFirstVector,s=e(t),n={x:i.primary+s.primary-1,y:i.secondary+s.secondary-1},o=[{x:i.primary,y:i.secondary},{x:n.x,y:i.secondary},n,{x:i.primary,y:n.y}];if(!zr(a,o))return;let l=h.get(t);l||(l={type:r.type,dataInvalidationRanges:[]},h.set(t,l));const u=Vr(a,o),c={primary:u.min.x-i.primary,secondary:u.min.y-i.secondary},f={primary:1+u.max.x-u.min.x,secondary:1+u.max.y-u.min.y};let d=!1;const g=[{x:c.primary,y:c.secondary},{x:c.primary+f.primary,y:c.secondary},{x:c.primary+f.primary,y:c.secondary+f.secondary},{x:c.primary,y:c.secondary+f.secondary}];for(let t=0;t<l.dataInvalidationRanges.length;t+=1)if(!d){const i=l.dataInvalidationRanges[t],s=[{x:i.tileInvalidationOffset.primary,y:i.tileInvalidationOffset.secondary},{x:i.tileInvalidationOffset.primary+i.tileInvalidationLength.primary,y:i.tileInvalidationOffset.secondary},{x:i.tileInvalidationOffset.primary+i.tileInvalidationLength.primary,y:i.tileInvalidationOffset.secondary+i.tileInvalidationLength.secondary},{x:i.tileInvalidationOffset.primary,y:i.tileInvalidationOffset.secondary+i.tileInvalidationLength.secondary}];if(zr(g,s)){const t=(m=g,y=s,{min:{x:Math.min(m[0].x,y[0].x),y:Math.min(m[0].y,y[0].y)},max:{x:Math.max(m[2].x,y[2].x),y:Math.max(m[2].y,y[2].y)}});i.tileInvalidationOffset.primary=t.min.x,i.tileInvalidationOffset.secondary=t.min.y,i.tileInvalidationLength.primary=t.max.x-t.min.x,i.tileInvalidationLength.secondary=t.max.y-t.min.y,d=!0}}var m,y;d||l.dataInvalidationRanges.push({tileInvalidationLength:f,tileInvalidationOffset:c})}))}return h},Mb=(t,i,s)=>{if(1!==t.length||0!==i.startPrimary||0!==i.startSecondary||i.lengthPrimary!==t[0].sizeHeatmapDataVectors.primary||i.lengthSecondary!==t[0].sizeHeatmapDataVectors.secondary)t.forEach((t=>{const e=s(t),h=Math.max(i.startPrimary,t.iFirstVector.primary),r=Math.min(i.startPrimary+i.lengthPrimary-1,t.iFirstVector.primary+t.sizeHeatmapDataVectors.primary-1),n=Math.max(i.startSecondary,t.iFirstVector.secondary),o=Math.min(i.startSecondary+i.lengthSecondary-1,t.iFirstVector.secondary+t.sizeHeatmapDataVectors.secondary-1);for(let s=h;s<=r;s+=1){const h=s-i.startPrimary,r=i.values[h],a=(s-t.iFirstVector.primary)*t.sizeHeatmapDataVectors.secondary;for(let s=n;s<=o;s+=1){const h=s-i.startSecondary,n=s-t.iFirstVector.secondary,o=r[h];e[a+n]=o}}}));else{const e=t[0],h=s(e);for(let t=0;t<i.lengthPrimary;t+=1){const s=t*e.sizeHeatmapDataVectors.secondary;h.set(i.values[t],s)}}},_b=(t,i,s)=>{var e,h;const r=null===(e=t.gl2)||void 0===e?void 0:e.ctx;if(r)return t.$E(null,r.RED,!1,!0,{x:i,y:s},!1,r.FLOAT,r.R32F);const n=t.gl;return(null===(h=t.gl1)||void 0===h?void 0:h.optional.OES_texture_float)?t.$E(null,n.LUMINANCE,!1,!0,{x:i,y:s},!1,n.FLOAT):t.$E(null,n.RGBA,!1,!0,{x:i,y:s},!1,n.UNSIGNED_BYTE)},Ab=(t,i,s,e)=>{i.forEach(((i,h)=>{var r,n;const o=s(h),a=e(h),l=t.gl;l.bindTexture(l.TEXTURE_2D,a),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const u=null===(r=t.gl2)||void 0===r?void 0:r.ctx,c=i.dataInvalidationRanges.length,f=i.dataInvalidationRanges.reduce(((t,i)=>t+i.tileInvalidationLength.primary),0)/h.sizeHeatmapDataVectors.primary;1===c&&f<1||f<.5&&c<10?i.dataInvalidationRanges.forEach((i=>{var s;const e=i.tileInvalidationOffset.primary*h.sizeHeatmapDataVectors.secondary,r=e+i.tileInvalidationLength.primary*h.sizeHeatmapDataVectors.secondary;if(u)u.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,u.RED,u.FLOAT,o.subarray(e,r));else if(null===(s=t.gl1)||void 0===s?void 0:s.optional.OES_texture_float)l.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,l.LUMINANCE,l.FLOAT,o.subarray(e,r));else{const t=new Uint8Array(o.buffer).subarray(4*e,4*r);l.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,l.RGBA,l.UNSIGNED_BYTE,t)}})):u?u.texImage2D(l.TEXTURE_2D,0,u.R32F,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,u.RED,u.FLOAT,o):(null===(n=t.gl1)||void 0===n?void 0:n.optional.OES_texture_float)?l.texImage2D(l.TEXTURE_2D,0,l.LUMINANCE,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,l.LUMINANCE,l.FLOAT,o):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,l.RGBA,l.UNSIGNED_BYTE,new Uint8Array(o.buffer)),l.bindTexture(l.TEXTURE_2D,null)}))};class wb extends qa{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.PN=u("bilinear"),this.Hu=ka.lineStyle,this.engine=t,this.al=a({x:Math.min(r.start.x,r.start.x+r.columns*r.step.x),y:Math.min(r.start.y,r.start.y+r.rows*r.step.y)},{x:Math.max(r.start.x,r.start.x+r.columns*r.step.x),y:Math.max(r.start.y,r.start.y+r.rows*r.step.y)});const n="columns"===r.dataOrder?r.columns:r.rows,o="columns"===r.dataOrder?r.rows:r.columns;this.ro={...r,primaryDimensionVectorsCount:n,secondaryDimensionVectorsCount:o}}US(t){return this.PN.S(t),this}jS(){return this.PN.M()}Uu(t){return this.Hu="function"==typeof t?t(this.Hu):t,this}ju(){return this.Hu}}class kb extends wb{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r),this.HO=new ov,this.qz={},this.DN=[],this.ON=!1,this.ml=!1,this.LN=vb,this.DR=t,this.BR=i,this.GR=n,this.WR=o,this.XB=t.OR(),this.BR=i;const a=Math.min(this.XB.MO,void 0!==r.EN?r.EN:2048),l={x:Math.min(a,this.ro.primaryDimensionVectorsCount),y:Math.min(a,this.ro.secondaryDimensionVectorsCount)},u=((t,i,s,e)=>{const h=[],r=s(t.primaryDimensionVectorsCount,i.x),n=s(t.secondaryDimensionVectorsCount,i.y);let o;return r.forEach((t=>n.forEach((i=>{const s={iFirstVector:{primary:t.start,secondary:i.start},iFirstUniqueVector:{primary:t.startUnique,secondary:i.startUnique},sizeHeatmapDataVectors:{primary:t.sizeData,secondary:i.sizeData},sizeUniqueHeatmapDataVectors:{primary:t.sizeUniqueData,secondary:i.sizeUniqueData}};h.push(s)})))),o=[],h.forEach((t=>{let i=o.find((i=>i.sizeHeatmapData.primary===t.sizeHeatmapDataVectors.primary&&i.sizeHeatmapData.secondary===t.sizeHeatmapDataVectors.secondary));i||(i={sizeHeatmapData:t.sizeHeatmapDataVectors,tiles:[]},o.push(i)),i.tiles.push(t)})),{gridTiles:h,gridTileSizes:o}})(this.ro,l,this.LN),c=u.gridTiles.map((t=>{const i="columns"===this.ro.dataOrder?{x:this.ro.start.x+this.ro.step.x*t.iFirstVector.primary,y:this.ro.start.y+this.ro.step.y*t.iFirstVector.secondary}:{x:this.ro.start.x+this.ro.step.x*t.iFirstVector.secondary,y:this.ro.start.y+this.ro.step.y*t.iFirstVector.primary},s="columns"===this.ro.dataOrder?{x:this.ro.step.x*t.sizeHeatmapDataVectors.primary,y:this.ro.step.y*t.sizeHeatmapDataVectors.secondary}:{x:this.ro.step.x*t.sizeHeatmapDataVectors.secondary,y:this.ro.step.y*t.sizeHeatmapDataVectors.primary},e="columns"===this.ro.dataOrder?{x:this.ro.start.x+this.ro.step.x*t.iFirstUniqueVector.primary,y:this.ro.start.y+this.ro.step.y*t.iFirstUniqueVector.secondary}:{x:this.ro.start.x+this.ro.step.x*t.iFirstUniqueVector.secondary,y:this.ro.start.y+this.ro.step.y*t.iFirstUniqueVector.primary},h="columns"===this.ro.dataOrder?{x:this.ro.step.x*t.sizeUniqueHeatmapDataVectors.primary,y:this.ro.step.y*t.sizeUniqueHeatmapDataVectors.secondary}:{x:this.ro.step.x*t.sizeUniqueHeatmapDataVectors.secondary,y:this.ro.step.y*t.sizeUniqueHeatmapDataVectors.primary},r=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary);return{...t,startLocationAxis:i,startRenderLocationAxis:e,sizeAxis:s,renderSizeAxis:h,intensityData:r,hasIntensityData:!1}})),f=u.gridTileSizes.map((t=>({...t,tiles:c.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary))})));this.RN={gridTiles:c,gridTileSizes:f}}le(){const t=this.DN,i=this.Qe,s=this.pa(),e=this.Hu,h=e!==this.cc,r=ze(i)&&i,n=Oe(i)&&i,o=r&&r.getPalette(),a=this.PN.o,l=this.PN.M(),u=this.ml,c=this.Ko.M();this.zN=this.zN||this.VN();const f=this.zN,d=xb(t,f,u?"intensity":void 0,(t=>t.sizeHeatmapDataVectors));d.size>0&&(Ab(this.XB,d,(t=>t.intensityData),(t=>t.intensityDataTexture)),this.ON=!0),this.HO.HL(this.Jt);const g=this.qz;if((s||a)&&(o?this.NN=this.DR.wz(o,this.NN):this.NN&&(this.DR.kz(this.NN),this.NN=void 0),g.tile=r&&this.NN?{renderMode:"paletted",fillStylePaletted:r,colorLookupTexture:this.NN,shader:this.XB.BL(sv["2D"],sv.ColorGrid2D({heatmapType:"intensity",interpolation:"bilinear"===l&&"bilinear",flipXY:"rows"===this.ro.dataOrder,intensityTextureType:this.XB.EE?"float":"ubyte",littleEndian:this.XB.IS_MACHINE_LITTLE_ENDIAN}),sv.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:yS(this.Jt),flipXY:"rows"===this.ro.dataOrder,normalSource:void 0}))}:n?{renderMode:"solid",fillStyleSolid:n,shader:this.XB.BL(sv["2D"],sv.Color({dataType:"uniform"}),sv.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:yS(this.Jt),flipXY:"rows"===this.ro.dataOrder,normalSource:void 0}))}:void 0),h){const t=to(e)&&e,i=t&&t.getFillStyle(),s=Oe(i)&&i;g.wireframe=t&&s?-1===t.getThickness()?{renderMode:"primitive",shader:this.XB.BL(sv["2D"],sv.Color({dataType:"uniform"}),sv.VertexLocation({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.ro.dataOrder,axisWorldTranslation:yS(this.Jt),normalSource:void 0})),fillStyleSolid:s}:{renderMode:"triangulated",shader:this.XB.BL(sv["2D"],sv.Color({dataType:"uniform"}),sv.LineInstanced2D({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.ro.dataOrder,axisWorldTranslation:yS(this.Jt),normalSource:void 0})),geometry:wv(this.XB,1),solidLine:t,fillStyleSolid:s}:void 0,g.wireframe?this.GN=this.GN||this.WN():this.GN&&(this.XB.UL(this.GN.wireframeCoordinatesBuffer),this.GN=void 0)}return g.mousePicking=c?this.qz.mousePicking||{shader:this.XB.BL(sv["2D"],sv.MousePicking,sv.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:yS(this.Jt),flipXY:"rows"===this.ro.dataOrder,normalSource:void 0}))}:void 0,this.qz=g,this.ml=!1,this.DN.length=0,this.xa(i),this.cc=e,this.PN.o=!1,this}VN(){const t=this.RN.gridTiles.map((t=>{const i=_b(this.XB,t.sizeHeatmapDataVectors.secondary,t.sizeHeatmapDataVectors.primary);return{...t,intensityDataTexture:i}})),i=this.RN.gridTileSizes.map((i=>({...i,tiles:t.filter((t=>t.sizeHeatmapDataVectors.primary===i.sizeHeatmapData.primary&&t.sizeHeatmapDataVectors.secondary===i.sizeHeatmapData.secondary))}))),s=this.XB.PL([0,0,1,0,0,1,1,1]),e=this.XB.gl.TRIANGLE_STRIP;return{gridTiles:t,gridTileSizes:i,rectangleLocationsBuffer:s,rectangleLocationsDrawMode:e,rectangleLocationsDrawLength:4}}WN(){const t=this.ro.primaryDimensionVectorsCount+1+this.ro.secondaryDimensionVectorsCount+1,i=new Float32Array(4*t);let s=0;for(let t=0;t<this.ro.primaryDimensionVectorsCount+1;t+=1)i[s+0]=t,i[s+1]=0,i[s+2]=t,i[s+3]=this.ro.secondaryDimensionVectorsCount,s+=4;for(let t=0;t<this.ro.secondaryDimensionVectorsCount+1;t+=1)i[s+0]=0,i[s+1]=t,i[s+2]=this.ro.primaryDimensionVectorsCount,i[s+3]=t,s+=4;return{wireframeCoordinatesBuffer:this.XB.PL(i),wireframeSegmentsLength:t}}YB(t){var i,s;const e=this.zN,h=1===t?null===(i=this.qz.mousePicking)||void 0===i?void 0:i.shader:null===(s=this.qz.tile)||void 0===s?void 0:s.shader;if(this.qz.tile&&h&&e){const i=h,s=this.qz.tile,r={x:(this.al.max.x-this.al.min.x)*Math.sign(this.ro.step.x),y:(this.al.max.y-this.al.min.y)*Math.sign(this.ro.step.y)},n={x:r.x/this.ro.columns,y:r.y/this.ro.rows},o=this.Jt.os(),a={x:n.x/o.x,y:n.y/o.y};if("solid"===s.renderMode||1===t)this.XB.BO(i).OL(i,((i,h,r)=>{if(1===t)this.XB.VL(i("uColor"),this.WR);else if("solid"===s.renderMode){const{fillStyleSolid:t}=s;this.XB.VL(i("uColor"),t.getColor())}return this.XB.zL(i("uIsHighlighted"),1===t||2===t?0:this.ta).VL(i("uHighlightColorOffset"),this.ha).zL(i("uRenderEffectMask"),2===t?1:0).EL(i("uScale"),this.HO.NL()).EL(i("uDisp"),this.HO.GL()).LL(e.rectangleLocationsBuffer,void 0,{location:h("aPos"),size:2}).EL(i("uScaling"),[this.ro.step.x*this.ro.columns,this.ro.step.y*this.ro.rows]).EL(i("uTranslationAxis"),[this.ro.start.x,this.ro.start.y]).Ly(e.rectangleLocationsDrawMode,e.rectangleLocationsDrawLength),!0}));else if("paletted"===s.renderMode){const{colorLookupTexture:h,fillStylePaletted:r}=s;this.XB.OL(i,((s,n,o)=>{let l=!1;var u,c;return this.XB.BO(i).EL(s("uScale"),this.HO.NL()).EL(s("uDisp"),this.HO.GL()).fR(o,r.lut,h,0).LL(e.rectangleLocationsBuffer,void 0,{location:n("aPos"),size:2}).zL(s("uIsHighlighted"),this.ta).VL(s("uHighlightColorOffset"),this.ha).zL(s("uRenderEffectMask"),2===t?1:0),u=t=>{this.XB.EL(s("uTileDimensions"),["columns"===this.ro.dataOrder?t.sizeHeatmapData.primary:t.sizeHeatmapData.secondary,"columns"===this.ro.dataOrder?t.sizeHeatmapData.secondary:t.sizeHeatmapData.primary])},c=(t,i)=>{let h;const r=this.XB.zO();if("bilinear"===this.PN.M()){const i=(this.Jt.x.qt(t.startLocationAxis.x)+a.x/2)*r,s=(this.Jt.y.qt(t.startLocationAxis.y)+a.y/2)*r;h=[i,s,(this.Jt.x.qt(t.startLocationAxis.x+t.sizeAxis.x)-a.x/2)*r-i,(this.Jt.y.qt(t.startLocationAxis.y+t.sizeAxis.y)-a.y/2)*r-s]}else{const i=this.Jt.x.qt(t.startLocationAxis.x)*r,s=this.Jt.y.qt(t.startLocationAxis.y)*r;h=[i,s,this.Jt.x.qt(t.startLocationAxis.x+t.sizeAxis.x)*r-i,this.Jt.y.qt(t.startLocationAxis.y+t.sizeAxis.y)*r-s]}this.XB.hE(s("uTileBounds"),h).EL(s("uScaling"),[t.renderSizeAxis.x,t.renderSizeAxis.y]).EL(s("uTranslationAxis"),[t.startRenderLocationAxis.x,t.startRenderLocationAxis.y]).RL(s("uTileIntensityValues"),t.intensityDataTexture,1).Ly(e.rectangleLocationsDrawMode,e.rectangleLocationsDrawLength),l=!0},e.gridTileSizes.forEach((t=>{u(t),t.tiles.forEach((t=>{c(t)}))})),l}))}}const r=this.GN,n=this.qz.wireframe,o=1===t||null==n?void 0:n.shader;if(r&&n&&o&&"primitive"===n.renderMode){const i=o,{fillStyleSolid:s}=n;this.XB.BO(i).OL(i,((i,e,h)=>((this.Jt instanceof Rn||this.Jt instanceof Fg)&&this.XB.EL(i("uScale"),this.HO.NL()).EL(i("uDisp"),this.HO.GL()),this.XB.zL(i("uIsHighlighted"),1===t||2===t?0:this.ta).VL(i("uHighlightColorOffset"),this.ha).zL(i("uRenderEffectMask"),2===t?1:0).VL(i("uColor"),s.getColor()).LL(r.wireframeCoordinatesBuffer,void 0,{location:e("aPos"),size:2}).EL(i("uScaling"),[this.ro.step.x,this.ro.step.y]).EL(i("uTranslationAxis"),[this.ro.start.x,this.ro.start.y]).Ly(this.XB.gl.LINES,2*r.wireframeSegmentsLength),!0)))}else if(r&&n&&"triangulated"===n.renderMode){const{shader:i,geometry:s,solidLine:e,fillStyleSolid:h}=n;this.XB.BO(i).OL(i,((i,n,o)=>((this.Jt instanceof Rn||this.Jt instanceof Fg)&&this.XB.EL(i("uScale"),this.HO.NL()).EL(i("uDisp"),this.HO.GL()),this.XB.zL(i("uIsHighlighted"),1===t||2===t?0:this.ta).VL(i("uHighlightColorOffset"),this.ha).zL(i("uRenderEffectMask"),2===t?1:0).VL(i("uColor"),h.getColor()).zL(i("uThicknessPixels"),e.getThickness()).EL(i("uRatioPxClip"),[2/this.$s.Ci().x,2/this.$s.Ci().y]).LL(r.wireframeCoordinatesBuffer,1,{location:n("aLocationA"),size:2},{location:n("aLocationB"),size:2}).EL(i("uScaling"),[this.ro.step.x,this.ro.step.y]).EL(i("uTranslationAxis"),[this.ro.start.x,this.ro.start.y]),s.BO(o,!1).Ly(r.wireframeSegmentsLength),!0)))}return this}$S(t){return this.DN.push(t),Mb(this.RN.gridTiles,t,(t=>(t.hasIntensityData=!0,t.intensityData))),this}Al(){return this.ON&&(this.RN.gridTiles.forEach((t=>{t.intensityData.fill(0),t.hasIntensityData=!1})),this.ml=!0,this.ON=!1),this}dispose(){super.dispose(),this.NN&&(this.DR.kz(this.NN),this.NN=void 0);const t=this.zN;t&&(t.gridTiles.forEach((t=>{this.XB.AO(t.intensityDataTexture)})),t.gridTiles.length=0,t.gridTileSizes.forEach((t=>{})),t.gridTileSizes.length=0,this.XB.UL(t.rectangleLocationsBuffer)),this.zN=void 0;const i=this.GN;return i&&this.XB.UL(i.wireframeCoordinatesBuffer),this.GN=void 0,this.qz={},this}_O(){return this.dispose(),this}ER(t){return this.GR===t&&{}}fb(t){const i=t,s="columns"===this.ro.dataOrder?i.x:i.y,e="columns"===this.ro.dataOrder?i.y:i.x,h="columns"===this.ro.dataOrder?this.ro.start.x:this.ro.start.y,r="columns"===this.ro.dataOrder?this.ro.start.y:this.ro.start.x;let n=(s-h)/("columns"===this.ro.dataOrder?this.ro.step.x:this.ro.step.y),o=(e-r)/("columns"===this.ro.dataOrder?this.ro.step.y:this.ro.step.x);n=Math.floor(Ph(n,0,this.ro.primaryDimensionVectorsCount-1)),o=Math.floor(Ph(o,0,this.ro.secondaryDimensionVectorsCount-1));const a=this.HN(n,o),l="columns"===this.ro.dataOrder?{x:this.ro.start.x+(n+.5)*this.ro.step.x,y:this.ro.start.y+(o+.5)*this.ro.step.y}:{x:this.ro.start.x+(o+.5)*this.ro.step.x,y:this.ro.start.y+(n+.5)*this.ro.step.y},u="columns"===this.ro.dataOrder?n:o,c="columns"===this.ro.dataOrder?o:n;return{x:l.x,y:l.y,column:u,row:c,cellValue:a}}Lx(t){if(t.x<this.al.min.x||t.x>this.al.max.x||t.y<this.al.min.y||t.y>this.al.max.y)return;const i=t,s="columns"===this.ro.dataOrder?i.x:i.y,e="columns"===this.ro.dataOrder?i.y:i.x,h="columns"===this.ro.dataOrder?this.ro.start.x:this.ro.start.y,r="columns"===this.ro.dataOrder?this.ro.start.y:this.ro.start.x,n="columns"===this.ro.dataOrder?this.ro.step.x:this.ro.step.y,o="columns"===this.ro.dataOrder?this.ro.step.y:this.ro.step.x,a=Ph((s-h)/n-.5,0,this.ro.primaryDimensionVectorsCount-1),l=Ph((e-r)/o-.5,0,this.ro.secondaryDimensionVectorsCount-1),u=Ph(Math.ceil(a)-1,0,this.ro.primaryDimensionVectorsCount-1),c=Ph(Math.ceil(l)-1,0,this.ro.secondaryDimensionVectorsCount-1),f={point:{x:u,y:c},value:this.HN(u,c)},d={point:{x:u,y:c+1},value:this.HN(u,c+1)},g={point:{x:u+1,y:c},value:this.HN(u+1,c)},m={point:{x:u+1,y:c+1},value:this.HN(u+1,c+1)},y=Pu({x:a,y:l},f,d,g,m);if(void 0===y)return;const p=Ph(Math.floor(a+.5),0,this.ro.primaryDimensionVectorsCount-1),S=Ph(Math.floor(l+.5),0,this.ro.secondaryDimensionVectorsCount-1),v="columns"===this.ro.dataOrder?p:S,b="columns"===this.ro.dataOrder?S:p,x=t;return{x:x.x,y:x.y,column:v,row:b,cellValue:y}}HN(t,i){for(let s=0;s<this.RN.gridTiles.length;s+=1){const e=this.RN.gridTiles[s];if(t>=e.iFirstVector.primary&&t<=e.iFirstVector.primary+e.sizeHeatmapDataVectors.primary-1&&i>=e.iFirstVector.secondary&&i<=e.iFirstVector.secondary+e.sizeHeatmapDataVectors.secondary-1){const s=t-e.iFirstVector.primary,h=i-e.iFirstVector.secondary,r=s*e.sizeHeatmapDataVectors.secondary+h;return e.intensityData[r]}}return 0}oi(){return this.al.max.x}ni(){return this.al.min.x}li(){return this.al.max.y}ai(){return this.al.min.y}Rl(){return 0}zl(){return 0}wT(){const t=[];return this.RN.gridTiles.forEach((i=>{if(!i.hasIntensityData)return;const s=new Array(i.sizeUniqueHeatmapDataVectors.primary).fill(0).map((t=>new Array(i.sizeUniqueHeatmapDataVectors.secondary).fill(0)));for(let t=0;t<i.sizeUniqueHeatmapDataVectors.primary;t+=1){const e=t*i.sizeHeatmapDataVectors.secondary,h=s[t];for(let t=0;t<i.sizeUniqueHeatmapDataVectors.secondary;t+=1){const s=i.intensityData[e+t];h[t]=s}}t.push({type:"intensity",startPrimary:i.iFirstUniqueVector.primary,startSecondary:i.iFirstUniqueVector.secondary,lengthPrimary:i.sizeUniqueHeatmapDataVectors.primary,lengthSecondary:i.sizeUniqueHeatmapDataVectors.secondary,values:s})})),t}}class Cb extends qa{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Hu=ka.lineStyle,this.Bu=u(void 0),this.PN=u("bilinear"),this.engine=t;const n="columns"===r.scrollDimension?a({x:r.start.x,y:r.start.y},{x:r.start.x,y:r.start.y+r.resolution*r.step.y}):a({x:r.start.x,y:r.start.y},{x:r.start.x+r.resolution*r.step.x,y:r.start.y});this.ro={...r,initialBoundaries:n}}Uu(t){return this.Hu="function"==typeof t?t(this.Hu):t,this}ju(){return this.Hu}Ou(t){return this.Bu.S(t),this}Lu(){return this.Bu.M()}US(t){return this.PN.S(t),this}jS(){return this.PN.M()}}class Tb extends Cb{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,o),this.UN=0,this.NM=[],this.KV=new Lv(this.Jt,this),this.DR=t,this.BR=i,this.GR=r,this.WR=n,this.XB=t.OR(),this.BR=i,this.al=this.ro.initialBoundaries,this.jN={dataPerSegment:2048}}le(){const t=this.KV.WV(this.NM,this.Bu.M());if(t>0){for(let i=0;i<t;i+=1)this.NM[0].shape.dispose()._O(),this.NM.shift();"columns"===this.ro.scrollDimension?this.al.min.x=this.NM.length>0?this.NM[0].boundaries.min.x:Dr:this.al.min.y=this.NM.length>0?this.NM[0].boundaries.min.y:Dr}return this.NM.forEach((t=>t.shape.le())),this.Bu.o=!1,this}YB(t){return this.NM.forEach((i=>i.shape.YB(t))),this}qS(t){if(0===t.length)return this;let i=0;const s=this.jN.dataPerSegment,e=t.length;do{let h=this.NM[this.NM.length-1],r=h?s-(h.existingDataPointsCount+(h.hasJoint?1:0)):0,n=!1;if(!h||0===r){const t={columns:"columns"===this.ro.scrollDimension?s:this.ro.resolution,rows:"rows"===this.ro.scrollDimension?s:this.ro.resolution,heatmapDataType:this.ro.heatmapDataType,dataOrder:this.ro.scrollDimension,step:this.ro.step,start:"columns"===this.ro.scrollDimension?{x:this.ro.start.x+this.ro.step.x*this.UN,y:this.ro.start.y}:{x:this.ro.start.x,y:this.ro.start.y+this.ro.step.y*this.UN}};this.NM.length>0&&(t.start="columns"===this.ro.scrollDimension?{x:t.start.x-1*this.ro.step.x,y:t.start.y}:{x:t.start.x,y:t.start.y-1*this.ro.step.y},n=!0);const i=new kb(this.DR,this.BR,this.Jt,Fh,[],t,this.GR,this.WR).US(this.PN.M()).eh(this.Qe).Uu(this.Hu);h={shape:i,existingDataPointsCount:0,existingCoordinatesCount:0,allocatedCoordinatesCount:s,dataStartIndex:this.UN,hasJoint:!1,boundaries:i.al},this.NM.push(h),r=s-(n?1:0)}const o=e-i,a=Math.min(r,o),l=t.slice(i,i+a),u={type:"intensity",values:l,startPrimary:h.existingDataPointsCount+(h.hasJoint?1:0),startSecondary:0,lengthPrimary:a,lengthSecondary:this.ro.resolution};n&&(u.values.unshift(this.$N),u.lengthPrimary+=1,h.hasJoint=!0),h.shape.$S(u),h.existingDataPointsCount+=a,h.existingCoordinatesCount+=a+(n?1:0),h.boundaries=h.shape.al,this.$N=l[l.length-1],this.UN+=a,i+=a}while(i<e);return this.al.max="columns"===this.ro.scrollDimension?{...this.al.max,x:this.ro.start.x+this.UN*this.ro.step.x}:{...this.al.max,y:this.ro.start.y+this.UN*this.ro.step.y},this}Al(){return this.NM.forEach((t=>{t.shape.dispose()._O()})),this.NM.length=0,this.al=this.ro.initialBoundaries,this.UN=0,this.$N=void 0,this}eh(t){return super.eh(t),this.NM.forEach((t=>t.shape.eh(this.Qe))),this}Uu(t){return super.Uu(t),this.NM.forEach((t=>t.shape.Uu(this.Hu))),this}US(t){return super.US(t),this.NM.forEach((i=>i.shape.US(t))),this}dispose(){return super.dispose(),this.NM.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.NM.forEach((i=>i.shape.setVisible(t))),this}_O(){return this.NM.forEach((t=>t.shape._O())),this}ER(t){return this.GR===t&&{}}fb(t){const i=uh(t,this.Jt,this.engine.Jt),s=this.NM.reduce(((s,e)=>{const h=e.shape.fb(t);if(h){const t=Ur(uh(h,this.Jt,this.engine.Jt),i);if(void 0===s||t<s.distance)return{result:h,distance:t,segment:e}}return s}),void 0);if(s&&s.result){const t="columns"===this.ro.scrollDimension?s.result.column+s.segment.dataStartIndex:s.result.column,i="rows"===this.ro.scrollDimension?s.result.row+s.segment.dataStartIndex:s.result.row;if("columns"===this.ro.scrollDimension&&t>=this.UN||"rows"===this.ro.scrollDimension&&i>=this.UN)return;return{x:s.result.x,y:s.result.y,column:t,row:i,cellValue:s.result.cellValue}}}Lx(t){const i=uh(t,this.Jt,this.engine.Jt),s=this.NM.reduce(((s,e)=>{const h=e.shape.Lx(t);if(h){const t=Ur(uh(h,this.Jt,this.engine.Jt),i);if(void 0===s||t<s.distance)return{result:h,distance:t,segment:e}}return s}),void 0);if(s&&s.result){const t="columns"===this.ro.scrollDimension?s.result.column+s.segment.dataStartIndex:s.result.column,i="rows"===this.ro.scrollDimension?s.result.row+s.segment.dataStartIndex:s.result.row;if("columns"===this.ro.scrollDimension&&t>=this.UN||"rows"===this.ro.scrollDimension&&i>=this.UN)return;return{x:s.result.x,y:s.result.y,column:t,row:i,cellValue:s.result.cellValue}}}oi(){return this.al.max.x}ni(){return this.al.min.x}li(){return this.al.max.y}ai(){return this.al.min.y}Rl(){return 0}zl(){return 0}Ys(t){return super.Ys(t),this.NM.forEach((i=>i.shape.Ys(t))),this}}class Fb extends qa{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.PN=u("bilinear"),this.Hu=ka.lineStyle,this.ro=r}US(t){return this.PN.S(t),this}jS(){return this.PN.M()}Uu(t){return this.Hu="function"==typeof t?t(this.Hu):t,this}ju(){return this.Hu}}class Ib extends Fb{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r),this.HO=new ov,this.qz={},this.DR=t,this.BR=i,this.GR=n,this.WR=o,this.XB=t.OR(),this.BR=i,this._T=new kb(this.DR,t.YN,t.Jt,Fh,[],{start:{x:0,y:0},step:{x:1,y:1},columns:r.sectors,rows:r.annuli,heatmapDataType:"intensity",dataOrder:"annuli"===r.dataOrder?"rows":"columns",EN:this.XB.MO},-1,Me).Uu(rh);const a=2*Math.PI/360,l=new Float32Array(724);let u=0;l[u+0]=0,l[u+1]=0,u+=2;for(let t=0;t<=360;t+=1){const i=t*a,s=Math.cos(i),e=Math.sin(i);l[u+0]=s,l[u+1]=e,u+=2}this.XN={vertexBuffer:this.XB.PL(l),drawMode:this.XB.gl.TRIANGLE_FAN,drawLength:362}}le(){const t=this.Qe,i=Oe(t)&&t,s=ze(t)&&t,e=i||s,h=this.pa(),r=s&&s.getPalette(),n=this.PN.M(),o=this.PN.o,a=this.Ko.M(),l=this.Ko.o;return this.HO.HL(this.Jt),this._T.le(),this._T.zN?((h||o)&&(this.qz.fill=e?{shader:this.XB.BL(sv["2D"],sv.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:yS(this.Jt),normalSource:void 0}),s&&sv.PolarHeatmap({interpolation:"bilinear"===n&&"bilinear",intensityTextureType:this.XB.EE?"float":"ubyte",littleEndian:this.XB.IS_MACHINE_LITTLE_ENDIAN,flipXY:"sectors"===this.ro.dataOrder}),i&&sv.PolarHeatmap({dataType:"uniform"})),fillStylePaletted:s,fillStyleSolid:i}:void 0,r?this.NN=this.DR.wz(r,this.NN):this.NN&&(this.DR.kz(this.NN),this.NN=void 0)),l&&(this.qz.mousePicking=a?{shader:this.XB.BL(sv["2D"],sv.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:yS(this.Jt),normalSource:void 0}),sv.Color({dataType:"uniform"}))}:void 0),this.xa(t),this.PN.o=!1,this.Ko.o=!1,this):this}YB(t){var i;const{vertexBuffer:s,drawLength:e,drawMode:h}=this.XN,r=this._T.zN,n=this.NN;if(!this.qz.fill||!r)return this;const{fillStylePaletted:o,fillStyleSolid:a}=this.qz.fill,l=1===t?null===(i=this.qz.mousePicking)||void 0===i?void 0:i.shader:this.qz.fill.shader;if(!l)return this;const u=this.Jt.gx(),c=Math.min(u.start,u.end),f=Math.max(u.start,u.end),d=Math.min(this.ro.amplitudeStart,this.ro.amplitudeStart+(this.ro.annuli-1)*this.ro.amplitudeStep),g=Math.max(this.ro.amplitudeStart,this.ro.amplitudeStart+(this.ro.annuli-1)*this.ro.amplitudeStep);let m;return m=u.end>u.start?Math.min(g,f)-u.start:Math.max(d,c)-u.start,this.XB.BO(l).OL(l,((i,l,u,c)=>{if(this.XB.EL(i("uScale"),this.HO.NL()).EL(i("uDisp"),this.HO.GL()).zL(i("uIsHighlighted"),1===t||2===t?0:this.ta).VL(i("uHighlightColorOffset"),this.ha).zL(i("uRenderEffectMask"),2===t?1:0).EL(c("uViewportSize"),[this.DR.Ci().x*this.XB.zO(),this.DR.Ci().y*this.XB.zO()]).EL(i("uScaling"),[m,m]).EL(i("uTranslationAxis"),[0,0]).LL(s,void 0,{location:l("aPos"),size:2}).zL(c("uAngleOffset"),this.Jt.bx()%(2*Math.PI)).zL(c("uAngleDirection"),this.Jt.wx()?1:-1).zL(c("uSectors"),this.ro.sectors).zL(c("uAnnuli"),this.ro.annuli),1===t)this.XB.VL(i("uColor"),this.WR);else{if(this.XB.zL(i("uAmplitudeStart"),this.ro.amplitudeStart).zL(i("uAmplitudeStep"),this.ro.amplitudeStep).zL(i("uAmplitudeAxisStart"),this.Jt.gx().start).zL(i("uAmplitudeAxisEnd"),this.Jt.gx().end),o){if(!n)return!1;this.XB.fR(u,o.lut,n,1).RL(i("uTileIntensityValues"),r.gridTiles[0].intensityDataTexture,0)}a&&this.XB.VL(i("uColor"),a.getColor())}return this.XB.Ly(h,e),!0})),this}$S(t){return this._T.$S(t),this}Al(){return this._T.Al(),this}dispose(){return super.dispose(),this.NN&&(this.DR.kz(this.NN),this.NN=void 0),this._T.dispose(),this.qz={},this.XB.UL(this.XN.vertexBuffer),this}_O(){return this.dispose(),this}ER(t){return this.GR===t&&{}}fb(t){const i=this.ro.amplitudeStart,s=this.ro.amplitudeStart+(this.ro.annuli-1)*this.ro.amplitudeStep,e=Math.min(i,s),h=Math.max(i,s);if(t.angle<0||t.angle>360||t.amplitude<e||t.amplitude>h)return;let r=Math.round((t.angle-0)/360*this.ro.sectors);r>=this.ro.sectors&&(r=0);const n=Math.round((t.amplitude-i)/(s-i)*(this.ro.annuli-1));return{iAnnulus:n,iSector:r,cellValue:this.HN(n,r),angle:r*(360/this.ro.sectors),amplitude:i+n*(s-i)/(this.ro.annuli-1)}}Lx(t){const i=this.ro.amplitudeStart,s=this.ro.amplitudeStart+(this.ro.annuli-1)*this.ro.amplitudeStep,e=Math.min(i,s),h=Math.max(i,s);if(t.angle<0||t.angle>360||t.amplitude<e||t.amplitude>h)return;const r=(t.angle-0)/360*this.ro.sectors,n=(t.amplitude-i)/(s-i)*(this.ro.annuli-1),o=Math.floor(r),a=Math.floor(n),l={point:{x:a,y:o},value:this.HN(a,o)},u={point:{x:a,y:o+1},value:this.HN(a,o+1)},c={point:{x:a+1,y:o},value:this.HN(a+1,o)},f={point:{x:a+1,y:o+1},value:this.HN(a+1,o+1)},d=Pu({x:n,y:r},l,u,c,f);return void 0!==d?{iAnnulus:a,iSector:o,cellValue:d,angle:t.angle,amplitude:t.amplitude}:void 0}HN(t,i){const s="annuli"===this.ro.dataOrder?t:i,e="annuli"===this.ro.dataOrder?i:t;for(let t=0;t<this._T.RN.gridTiles.length;t+=1){const i=this._T.RN.gridTiles[t];if(s>=i.iFirstVector.primary&&s<=i.iFirstVector.primary+i.sizeHeatmapDataVectors.primary-1&&e>=i.iFirstVector.secondary&&e<=i.iFirstVector.secondary+i.sizeHeatmapDataVectors.secondary-1){const t=s-i.iFirstVector.primary,h=e-i.iFirstVector.secondary,r=t*i.sizeHeatmapDataVectors.secondary+h;return i.intensityData[r]}}return 0}oi(){return 0}ni(){return 0}li(){return 0}ai(){return 0}Rl(){return 0}zl(){return 0}}const Pb={translation:(t,i)=>[1,0,0,0,1,0,t,i,1],rotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,-s,0,s,i,0,0,0,1]},scaling:(t,i)=>[t,0,0,0,i,0,0,0,1],translate:(t,i,s)=>Pb.multiply(t,Pb.translation(i,s)),rotate:(t,i)=>Pb.multiply(t,Pb.rotation(i)),scale:(t,i,s)=>Pb.multiply(t,Pb.scaling(i,s)),multiply(t,i){const s=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=i[0],f=i[1],d=i[2],g=i[3],m=i[4],y=i[5],p=i[6],S=i[7],v=i[8];return[c*s+f*r+d*a,c*e+f*n+d*l,c*h+f*o+d*u,g*s+m*r+y*a,g*e+m*n+y*l,g*h+m*o+y*u,p*s+S*r+v*a,p*e+S*n+v*l,p*h+S*o+v*u]},projection:(t,i,s)=>[2/t,0,0,0,-2*s/i,0,-1,1*s,1]};class Db extends tl{constructor(t,i,s,h,r,n,o){super(t,i,s,h,r),this.ZN=[],this.HO=new ov,this.KN=[e(0,0),e(0,0),e(0,0),e(0,0)],this.qN=a(e(0,0),e(0,0)),this.JN=a(e(0,0),e(0,0)),this.QN=e(0,0),this.tG=e(0,0),this.y_=e(0,0),this.iG=e(0,0),this.sG=0,this.DR=t,this.BR=i,this.GR=n,this.WR=o,this.XB=t.OR(),this.BR=i,this.oV=t.ro.po}le(){const t=this.ba(),i=this.va(),s=this.Ko.M();if(t){const t=this.XB,h=this.XB.zO();if(this.HO.HL(this.Jt),this.Da.o){this.eG&&this.eG.OO(this),this.font.S(Sa(this.Da.M()));const t=this.font.M();this.eG=this.XB.cr(t.properties.family),this.eG.BO(this)}const r=this.font.o,n=r||this.ka.o;if(n&&this.eG){const i=this.font.M();[this.hG,this.JN]=this.eG.EO(this.ka.M(),i.properties),this.ZN.forEach((i=>{i.texCoordBuff&&t.UL(i.texCoordBuff),i.vertexBuff&&t.UL(i.vertexBuff)})),this.ZN=this.hG.map((i=>({texCoordBuff:t.PL(i.texCoords,!1),texture:i.texture,info:i}))),this.Da.o=!1,this.font.o=!1,this.ka.o=!1}const o=this.Jt.rs()||i,a=this.Ca.o||this.Fa.o||this.Ta.o||this.Ia.o||this.Ba.o||this.di.o||n||o,l=this.Ba.M(),u=on(e(this.Fa.M()+1,this.Ta.M()+1),.5);if(a&&this.hG&&(this.QN=e(-(l.left*h+this.JN.max.x-this.JN.min.x+l.right*h)*u.x-this.JN.min.x+l.right*h,-(l.bottom*h+this.JN.max.y-this.JN.min.y+l.top*h)*u.y-this.JN.min.y+l.top*h)),(a||o||this.Pa.o||this.pa())&&this.Qe!==Ie){if(this.hG){const i=an(this.Ca.M(),this.Ia.M()),s=uh(i,this.Jt,this.$s.Jt),r=on(s,h);this.iG=r;const o=yn(this.Pa.M());this.sG=o,n&&this.ZN.forEach((i=>{const s=i.info;s&&(i.vertexBuffLen=s.vertices.length/2,i.vertexBuff=t.PL(s.vertices,!0,i.vertexBuff))}));const a=this.di.M(),c=[an(sn(e((this.JN.min.x+(-a.left-l.left)*h+this.QN.x)/h,(this.JN.max.y+(a.top+l.top)*h+this.QN.y)/h),this.K,o),s),an(sn(e((this.JN.max.x+(a.right+l.right)*h+this.QN.x)/h,(this.JN.max.y+(a.top+l.top)*h+this.QN.y)/h),this.K,o),s),an(sn(e((this.JN.max.x+(a.right+l.right)*h+this.QN.x)/h,(this.JN.min.y+(-a.bottom-l.bottom)*h+this.QN.y)/h),this.K,o),s),an(sn(e((this.JN.min.x+(-a.left-l.left)*h+this.QN.x)/h,(this.JN.min.y+(-a.bottom-l.bottom)*h+this.QN.y)/h),this.K,o),s)];this.KN=[uh(c[0],this.$s.Jt,this.Jt),uh(c[1],this.$s.Jt,this.Jt),uh(c[2],this.$s.Jt,this.Jt),uh(c[3],this.$s.Jt,this.Jt)];const f=Xr(c);this.tG=e(-(f.max.x-f.min.x)*h*u.x-f.min.x*h+this.iG.x,-(f.max.y-f.min.y)*h*u.y-f.min.y*h+this.iG.y),this.iB=ln(f.max,f.min);const d=Xr(this.KN),g=this.Jt.Ei(d.min,this.tG),m=this.Jt.Ei(d.max,this.tG);this.qN=Xr([g,m])}th(this.Qe)?this.ZR=fv(this.qN,this.Jt,this.Qe.getPosition(),this.Qe.getExtent(),this.Qe.getShape(),this.XB.zO()):eh(this.Qe)?this.KR=dv(this.qN,this.Jt,this.Qe.getAngle(!0),this.XB.zO()):(this.ZR=void 0,this.KR=void 0)}const c=Oe(this.Qe)&&this.Qe,f=th(this.Qe)&&this.Qe,d=eh(this.Qe)&&this.Qe,g=c||f||d;(this.pa()||r)&&(this.jO=g?this.XB.BL(sv["2D"],sv.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.oV}),sv.Color({dataType:f?["gradient",f]:d?["gradient",d]:"uniform",maskTexture:!0})):void 0),this.rG=s&&g?this.rG||this.XB.BL(sv["2D"],sv.MousePicking,sv.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.oV})):void 0,this.Ca.o=!1,this.Fa.o=!1,this.Ta.o=!1,this.Ia.o=!1,this.Pa.o=!1,this.xa(this.Qe)}return this.Oa=t,this}YB(t){if(this.ba()){const i=1===t?this.rG:this.jO;if(!i||0===this.ZN.length)return this;const s=this.XB.gl.drawingBufferWidth,e=this.XB.gl.drawingBufferHeight;let h=Pb.projection(s,e,-1);const r=Pb.translation(this.QN.x,this.QN.y),n=Pb.translation(this.tG.x,this.tG.y);h=Pb.translate(h,this.iG.x,this.iG.y),h=Pb.multiply(h,n),h=Pb.rotate(h,this.sG),h=Pb.multiply(h,r),1===t&&(h=Pb.scale(h,this.JN.max.x,this.JN.max.y)),this.XB.BO(i).OL(i,((i,s,e,r)=>{if(this.XB.nE(i("uMatrix"),h).zL(i("uIsHighlighted"),1===t||2===t?0:this.ta).VL(i("uHighlightColorOffset"),this.ha).zL(i("uRenderEffectMask"),2===t?1:0),this.oV&&this.XB.EL(r("uViewportSizePx"),[this.$s.Ci().x*this.XB.zO(),this.$s.Ci().y*this.XB.zO()]),1===t)this.XB.VL(i("uColor"),this.WR);else if(Oe(this.Qe))this.XB.VL(i("uColor"),this.Qe.getColor());else if(th(this.Qe)&&this.ZR){this.XB.EL(i("uCenter"),this.ZR.center).EL(i("uDistance"),this.ZR.distance).hE(i("uBounds"),this.ZR.bounds).zL(i("uAspect"),this.ZR.aspectRatio);const t=this.Qe.getColorStops();for(let s=0;s<t.length;s+=1)this.XB.VL(i(`color_${s}`),t[s].color).zL(i(`stop_${s}`),t[s].offset)}else if(eh(this.Qe)&&this.KR){this.XB.EL(i("uStartPoint"),this.KR.startPoint).EL(i("uEndPoint"),this.KR.endPoint).hE(i("uBounds"),this.KR.bounds);const t=this.Qe.getColorStops();for(let s=0;s<t.length;s+=1)this.XB.VL(i(`color_${s}`),t[s].color).zL(i(`stop_${s}`),t[s].offset)}return 1===t&&this.XB.yE(s("aPos"),this.XB.WE).Ly(this.XB.gl.TRIANGLES,6),1!==t&&this.ZN.forEach((t=>{this.XB.yE(s("aPos"),t.vertexBuff).yE(s("aMaskTextureCoord"),t.texCoordBuff).RL(i("uMaskTexture"),t.texture,0).Ly(this.XB.gl.TRIANGLES,t.vertexBuffLen)})),!0}))}return this}ER(t){return this.GR===t&&{}}Mh(){return this.ba()?this.KN:[]}cf(){return this.ba()&&this.iB?this.iB:e(0,0)}Ci(){if(this.ba()&&this.qN){const t=this.qN;return e(t.max.x-t.min.x,t.max.y-t.min.y)}return e(0,0)}_O(){return this.ZN.forEach((t=>{t.texCoordBuff&&this.XB.UL(t.texCoordBuff),t.vertexBuff&&this.XB.UL(t.vertexBuff)})),this.ZN=[],this.eG&&this.eG.OO(this),this}oi(){return this.qN.max.x}ni(){return this.qN.min.x}li(){return this.qN.max.y}ai(){return this.qN.min.y}Rl(){return 0}zl(){return 0}}class Bb{constructor(t,i,s){this.nG=new Set,this.oG=t=>(this.nG.add(t),t),this.aG=t=>(this.nG.delete(t),t._O(),this),this.$s=t,this.fa=i,this.lG=s}$B(t){this.nG.delete(t)&&this.nG.add(t)}Pt(){for(const t of this.nG)t._O().dispose();this.$s.Vn(this.fa)}te(){return this.$s.te(),this}zn(){return this.fa}}class Ob extends Bb{constructor(){super(...arguments),this.uG=u(void 0),this.da=!1}ov(t){return this.uG.S(t),this}Xm(){return this.uG.M()}}class Lb extends Ob{constructor(t,i,s){super(t,i,s),this.DR=t,this.gl=t.OR(),this.cG=this.nG}IL(t){const i=t instanceof ja&&t;if(!i)return Or;const s=i.ni(),e=i.oi(),h=i.ai(),r=i.li();if(s===Dr||e===Br||h===Dr||r===Br)return Or;const n=i.Rl(),o=i.zl(),a=$a({min:{x:s,y:h},max:{x:e,y:r}},{x:n,y:o},i.Jt),l={min:uh(a.min,i.Jt,t.$s.Jt),max:uh(a.max,i.Jt,t.$s.Jt)},u=this.uG.M();let c;if(u){if(c={min:{x:Math.max(l.min.x,u.x),y:Math.max(l.min.y,u.y)},max:{x:Math.min(l.max.x,u.x+u.width),y:Math.min(l.max.y,u.y+u.height)}},c.max.x<c.min.x||c.max.y<c.min.y)return Or}else c=l;return c}fG(t){const i=Array.from(this.cG.values());for(let s=0;s<i.length;s+=1){const e=i[s],h=e.ER(t);if(h)return{entity:e,index:s,collectionMember:h.collectionMember}}}mh(t){const i=this.DR.dG();return this.oG(new Tv(this.DR,this,t,this.aG,[],i,this.DR.gG(i)))}lm(t){return this.oG(new Fv(this.DR,this,t,this.aG,[],(()=>{const t=this.DR.dG();return{id:t,color:this.DR.gG(t)}})))}Gy(t,i,s){const e=this.DR.dG();return this.oG(new Ev(this.DR,this,t,this.aG,s,e,this.DR.gG(e),i))}tn(t){const i=this.DR.dG();return this.oG(new Db(this.DR,this,t,this.aG,[],i,this.DR.gG(i)))}iS(t){const i=this.DR.dG();return this.oG(new Gv(this.DR,this,t,this.aG,[],i,this.DR.gG(i)))}af(t,i=ol.Simple){const s=this.DR.dG();if(i===ol.Simple)return this.oG(new Sb(this.DR,this,t,this.aG,[],s,this.DR.gG(s)));throw new Error("GlEngine.addPolygon | No such polygon type!")}Rb(t){return this.oG(new yb(this.DR,this,t,this.aG,[],(()=>{const t=this.DR.dG();return{id:t,color:this.DR.gG(t)}})))}hh(t){const i=this.DR.dG();return this.oG(new pb(this.DR,this,t,this.aG,[],i,this.DR.gG(i)))}VC(t){const i=this.DR.dG();return this.oG(new _v(this.DR,this,t,this.aG,[],i,this.DR.gG(i)))}df(t){const i=this.DR.dG();return this.oG(new mv(this.DR,this,t,this.aG,[],i,this.DR.gG(i)))}PT(t,i,s){if("intensity"===s.heatmapDataType){const e=this.DR.dG();return this.oG(new Tb(this.DR,this,t,this.aG,i,e,this.DR.gG(e),s))}throw new yh("Unimplemented Heatmap Grid Static type")}AT(t,i,s){const e=this.DR.dG();return this.oG(new kb(this.DR,this,t,this.aG,i,s,e,this.DR.gG(e)))}Ox(t,i,s){const e=this.DR.dG();return this.oG(new Ib(this.DR,this,t,this.aG,i,s,e,this.DR.gG(e)))}mG(t){return this.oG(new cv(this.DR,this,this.aG,[],t))}le(){if(this.da){this.da=!1;const t=Array.from(this.nG).sort(((t,i)=>t.ma()-i.ma()));this.nG.clear();for(const i of t)this.nG.add(i)}for(const t of this.nG)t.le();return this}YB(t,i){const s=this.uG.M();if(s&&this.gl.FL(s.x*this.gl.zO()*i,s.y*this.gl.zO()*i,s.width*this.gl.zO()*i,s.height*this.gl.zO()*i),1!==t)for(const i of this.nG)i.getVisible()&&i.YB(t);else for(const i of this.nG)i.getMouseInteractions()&&i.getVisible()&&i.YB(t);return this.gl.kL(!1),this}}class Eb extends aS{constructor(t){super(t)}}class Rb extends Eb{constructor(t){super(t),this.yG="attribute";const{vertices:i,drawSize:s,drawMode:e}=zb(t.gl);this.cO=t.PL(i),this.Nz=s,this.Gz=e}Ly(t,i,s,e){return this.XB.LL(this.cO,0,{location:t.attribute("aInstanceGeo"),size:3},{location:s?t.attribute("aNormal"):void 0,size:3},{location:e?t.attribute("aTriangleBary"):void 0,size:3}).AE(this.Gz,0,this.Nz,i),this}sO(){this.XB.UL(this.cO)}}const zb=t=>{const i=new Float32Array(324);let s=0;return i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,{vertices:i,drawSize:s/9,drawMode:t.TRIANGLES}};class Vb extends Eb{constructor(t,i){super(t),this.yG="attribute",this.pG=i;const{vertices:s,indices:e}=Nb();this.cO=t.PL(s),this.Vz=t.gE(e),this.Nz=e.length,this.Gz=t.gl.TRIANGLES}Ly(t,i,s,e){return this.XB.LL(this.cO,0,{location:t.attribute("aEdge"),size:3},{location:s?t.attribute("aNormal"):void 0,size:3},{location:t.attribute("aInstanceGeo"),size:3}).ME(this.Vz).zL(t.uniform("uEdgeRoundness"),this.pG/2).kE(this.Gz,this.Nz,0,i),this}sO(){this.XB.UL(this.cO),this.XB.UL(this.Vz)}SG(t){return this.pG=t,this}vG(){return this.pG}}const Nb=()=>{const t=[{normal:{x:0,y:1,z:0},perpendA:{x:0,y:0,z:1},perpendB:{x:-1,y:0,z:0}},{normal:{x:0,y:0,z:-1},perpendA:{x:0,y:1,z:0},perpendB:{x:-1,y:0,z:0}},{normal:{x:-1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:1}},{normal:{x:1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:-1}},{normal:{x:0,y:0,z:1},perpendA:{x:0,y:1,z:0},perpendB:{x:1,y:0,z:0}},{normal:{x:0,y:-1,z:0},perpendA:{x:0,y:0,z:-1},perpendB:{x:-1,y:0,z:0}}],i=[];let s=0;const e=[];let h=0;for(const r of t){const{normal:t,perpendA:n,perpendB:o}=r,a=Pr.multiply(n,-1),l=Pr.multiply(o,-1),u=s;i[s]={thicknessDirection:Pr.addVec(t,n,o),edge:Pr.addVec(a,l),normal:t},s+=1;const c=s;i[s]={thicknessDirection:Pr.addVec(t,a,o),edge:Pr.addVec(n,l),normal:t},s+=1;const f=s;i[s]={thicknessDirection:Pr.addVec(t,a,l),edge:Pr.addVec(n,o),normal:t},s+=1;const d=s;i[s]={thicknessDirection:Pr.addVec(t,n,l),edge:Pr.addVec(a,o),normal:t},s+=1,e[h+0]=f,e[h+1]=u,e[h+2]=d,e[h+3]=f,e[h+4]=c,e[h+5]=u,h+=6;const g=[{A:n,B:o},{A:a,B:o},{A:a,B:l},{A:n,B:l}];for(const e of g){e.thicknessDirection=Pr.addVec(t,e.A,e.B),e.stripVerticesA=[],e.stripVerticesB=[];const h=[{direction:e.A,other:e.B,vertices:e.stripVerticesA},{direction:e.B,other:e.A,vertices:e.stripVerticesB}];for(const r of h)for(let h=0;h<8;h+=1){const n=.5*h/7,o=Pr.normalize(Pr.lerp(t,r.direction,n)),a=Math.PI/2-Pr.angle(o,t),l=Pr.addVec(Pr.multiply(Pr.multiply(r.direction,-1),1-Math.cos(a)),Pr.multiply(Pr.multiply(t,-1),1-Math.sin(a)),Pr.multiply(r.other,-1)),u=s;i[s]={thicknessDirection:e.thicknessDirection,normal:o,edge:l};const c=i[s];s+=1,r.vertices.push({index:u,vertex:c})}}for(let t=0;t<g.length;t+=1){const i=g[t],s=g[t<g.length-1?t+1:0],r=t%2==0?i.stripVerticesB:i.stripVerticesA,n=t%2==0?s.stripVerticesB:s.stripVerticesA;for(let t=1;t<r.length;t+=1){const i=r[t-1],s=n[t-1],o=r[t],a=n[t];e[h+0]=i.index,e[h+1]=s.index,e[h+2]=a.index,e[h+3]=o.index,e[h+4]=i.index,e[h+5]=a.index,h+=6}}}const r=[{x:-1,y:1,z:-1,flipVertexOrder:!1},{x:-1,y:1,z:1,flipVertexOrder:!0},{x:1,y:1,z:1,flipVertexOrder:!1},{x:1,y:1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:1,flipVertexOrder:!1},{x:1,y:-1,z:1,flipVertexOrder:!0},{x:1,y:-1,z:-1,flipVertexOrder:!1}],n=Math.PI/15,o=2*Math.PI/15;let a=s;for(const t of r){let h=0;i[s]={thicknessDirection:t,normal:{x:0,y:t.y,z:0},edge:{x:-t.x,y:0,z:-t.z}},s+=1,h+=1;for(let e=1;e<8.5;e+=1){const r=15===e?Math.PI:e*n,a=1*Math.cos(r)*t.y,l=Math.sin(r);for(let e=0;e<Math.ceil(3.75)+1;e+=1){const r=15===e?0:e*o,n=l*Math.cos(r)*1*t.x,u=l*Math.sin(r)*1*t.z,c={x:n,y:a,z:u},f=Pr.normalize({x:n,y:a,z:u});i[s]={thicknessDirection:t,normal:f,edge:{x:c.x-t.x,y:c.y-t.y,z:c.z-t.z}},s+=1,h+=1}}const r=[];for(let t=1;t<=Math.ceil(3.75);t+=1)r.push(a),15===t?r.push(a+1):r.push(a+t+1),r.push(a+t);const l=a+1,u=Math.ceil(3.75)+1;for(let t=0;t<6.5;t+=1)for(let i=0;i<Math.ceil(3.75);i+=1){let s=0;const e=l+(t+1)*u+i;let h=0;14===i?(s=l+t*u,h=l+(t+1)*u):(s=l+t*u+i+1,h=l+(t+1)*u+i+1),r.push(l+t*u+i),r.push(s),r.push(e),r.push(e),r.push(s),r.push(h)}e.push.apply(e,t.flipVertexOrder?r.reverse():r),a+=h}const l=new Float32Array(9*i.length);let u=0;for(const t of i)l[u+0]=t.edge.x,l[u+1]=t.edge.y,l[u+2]=t.edge.z,l[u+3]=t.normal.x,l[u+4]=t.normal.y,l[u+5]=t.normal.z,l[u+6]=t.thicknessDirection.x,l[u+7]=t.thicknessDirection.y,l[u+8]=t.thicknessDirection.z,u+=9;return{vertices:l,indices:new Uint16Array(e)}},Gb=(t,i)=>{let s=t.qL.iO.get(i);return s||(s=void 0!==i&&i>0?new Vb(t,Ph(i,0,1)):new Rb(t),t.qL.iO.set(i,s),s)};class Wb extends YS{Vp(t){return this.gL=this.Bp.M(),this.Bp.S(t),this}XS(t){return this.bG=t,this}ZS(){return this.bG}}class Hb extends Wb{constructor(t,i,s,e,h){super(t,i,s),this.xG=t,this.GR=e,this.WR=h,this.DR=t.DR,this.XB=this.DR.OR()}ER(t){return t===this.GR&&{}}}class Ub extends Hb{constructor(t,i,s,e,h){super(t,i,s,e,h),this.bG="cull-back",this.al=Lr,this.MG={},this._G=[],this.Qe=ka.fillStyle,this.Bp.S(Nu)}le(t){const i=this._G,s=this.Qe,e=s!==Ie,h=this.AG,r=this.pa()||this.wG!==h,n=this.dL(),o=this.Ko.M(),l=this.Ko.o;if(e){for(const t of i)t.id=void 0!==t.id?String(t.id):void 0,t.xSize=void 0!==t.xSize&&t.xSize<0?-t.xSize:t.xSize,t.ySize=void 0!==t.ySize&&t.ySize<0?-t.ySize:t.ySize,t.zSize=void 0!==t.zSize&&t.zSize<0?-t.zSize:t.zSize;const t=11,e=this.kG||0;let h=e;for(const t of i){const i=t.id;void 0!==i&&void 0!==this.MG[i]||(h+=1)}let u,c=!1,f=!1;if(c=h!==e,f=c,u=!f&&(i.length<100?"chunks":"all"),c){const i=h*t,s=new Float32Array(i);this.hN&&s.set(this.hN),this.hN=s,this.CG=i,this.TG=e*t}const d=Ee(s)?s.getFallbackColor():void 0;for(const s of i){const i=s.id,e=void 0!==i&&this.MG[i],h=[s.xCenter,s.yCenter,s.zCenter,s.xSize,s.ySize,s.zSize,s.color?s.color.r:d?d.r:void 0,s.color?s.color.g:d?d.g:void 0,s.color?s.color.b:d?d.b:void 0,s.color?s.color.a:d?d.a:void 0,s.value];if(e){for(let i=0;i<t;i+=1)h[i]=void 0!==h[i]?h[i]:e.buffer[i];e.buffer.set(h)}else{const s=this.TG,e=new Float32Array(this.hN.buffer,s*Float32Array.BYTES_PER_ELEMENT,t);e.set(h),void 0!==i&&(this.MG[i]={location:s,buffer:e}),this.TG+=t}}if(f&&(this.zz=this.XB.PL(this.hN,!0)),"all"===u)this.XB.fE(this.zz,0,this.hN);else if("chunks"===u)for(const t of i){const i=t.id;if(void 0!==i){const t=this.MG[i];this.XB.fE(this.zz,t.location,t.buffer)}}if(r||n||l){const t=Oe(s)&&s,i=Ee(s)&&s,e=ze(s)&&s;t||i||e?(this.FG=Gb(this.XB,this.IG()),this.jO=this.XB.BL(sv["3D"],sv.ColorShaded3D({dataType:i?"attribute":e?["lookup",e.getLookUpProperty()]:"uniform",shadingStyle:this.Bp.M().type}),sv.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:yS(this.Jt),normalSource:this.FG.yG}),void 0!==this.AG&&sv.RoundedEdges3D),this.rG=o?this.XB.BL(sv["3D"],sv.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:yS(this.Jt),normalSource:void 0}),sv.MousePicking,void 0!==this.AG&&sv.RoundedEdges3D):void 0):(this.FG=void 0,this.jO=void 0,this.rG=void 0),e?this.Jz=this.DR.wz(e.lut,this.Jz):this.Jz&&(this.DR.kz(this.Jz),this.Jz=void 0)}if(i.length>0){const i=a({x:Dr,y:Dr,z:Dr},{x:Br,y:Br,z:Br});for(let s=0;s<this.TG;s+=t){const t=this.hN[s+0],e=this.hN[s+3]/2,h=t-e,r=t+e,n=this.hN[s+1],o=this.hN[s+4]/2,a=n-o,l=n+o,u=this.hN[s+2],c=this.hN[s+5]/2,f=u-c,d=u+c;i.min.x=i.min.x<h?i.min.x:h,i.min.y=i.min.y<a?i.min.y:a,i.min.z=i.min.z<f?i.min.z:f,i.max.x=i.max.x>r?i.max.x:r,i.max.y=i.max.y>l?i.max.y:l,i.max.z=i.max.z>d?i.max.z:d}this.al=i}this.kG=h,this._G.length=0}return this.xa(s),this.wG=h,this.Bp.o=!1,this.Ko.o=!1,this}YB(t){const i=1===t?this.rG:this.jO,s=this.FG,e=this.zz,h=this.Qe,r=this.kG,n=this.Bp.M();return i&&e&&void 0!==r&&this.XB.OL(i,((o,a,l)=>{let u=!1;const c=a("aPos"),f=a("aOffsetAxis");this.XB.BO(i).rE(o("uScale"),this.xG.HO.NL()).rE(o("uDisp"),this.xG.HO.GL()).oE(o("uViewProjectionMatrix"),this.PG).zL(o("uIsHighlighted"),1===t||2===t?0:this.ta).VL(o("uHighlightColorOffset"),this.ha).zL(o("uRenderEffectMask"),2===t?1:0);const d={location:c,size:3},g={location:f,size:3},m={location:void 0,size:4},y={location:void 0,size:1};if(1!==t&&"phong"===n.type&&this.XB.rE(o("uCameraLoc"),this.DG).rE(o("uLightLoc"),this.BG).zL(o("uAmbientReflection"),n.ambientReflection).zL(o("uSpecularReflection"),n.specularReflection).zL(o("uDiffuseReflection"),n.diffuseReflection).zL(o("uShininess"),n.shininess).VL(o("uLightColor"),n.specularColor).VL(o("uAmbientColor"),n.ambientColor),1===t)this.XB.VL(o("uColor"),this.WR);else if(Oe(h))this.XB.VL(o("uColorDiffuse"),h.getColor());else if(Ee(h)){const t=a("aColor");m.location=t}else if(ze(h)){const t=h.getLookUpProperty(),i=h.getPalette();"value"===t&&(y.location=a("aLookupValue")),this.XB.fR(l,i,this.Jz,0)}return e&&(this.XB.LL(e,1,d,g,m,y),s.Ly(l,r,"phong"===n.type&&1!==t,!1),u=!0),u})),this}dispose(){return super.dispose(),this.zz&&(this.XB.UL(this.zz),this.zz=void 0),this.Jz&&(this.DR.kz(this.Jz),this.Jz=void 0),this.jO=void 0,this}_O(){return this.dispose(),this}Zp(t){this._G=ur(this._G,t,{canReturnB:!0})}eh(t){return this.Qe=Ya(this.Qe,t),this}ur(){return this.Qe}Yp(t){return this.AG=void 0!==t&&t>0?Ph(t,0,1):void 0,this}IG(){return this.AG}oi(){return this.al.max.x}ni(){return this.al.min.x}li(){return this.al.max.y}ai(){return this.al.min.y}Wp(){return this.al.max.z}Hp(){return this.al.min.z}Rl(){return 0}zl(){return 0}jp(){return 0}pa(){return Xa(this.Sa,this.Qe)}xa(t){this.Sa=t}}class jb extends aS{constructor(t,i){super(t),this.yG="custom",this.Ez=i;const{vertices:s,drawSize:e}=this.Rz();this.zz=t.PL(s),this.Nz=e}BO(t){return this.XB.LL(this.zz,0,{location:t.attribute("aSegmentPosition"),size:1},{location:t.attribute("aPerpendHorizontal"),size:1},{location:t.attribute("aPerpendVertical"),size:1}),this}Ly(t){return this.XB.AE(this.XB.gl.TRIANGLE_STRIP,0,this.Nz,t),this}Rz(){const t=this.Ez,i=new Float32Array(2*(t+1)*3);let s=0;for(let e=0;e<=t;e+=1){const h=2*Math.PI*e/t,r=Math.cos(h),n=Math.sin(h);for(const t of[0,1])i[s+0]=t,i[s+1]=r,i[s+2]=n,s+=3}return{vertices:i,drawSize:s/3}}sO(){this.XB.UL(this.zz)}}const $b=(t,i=16)=>{let s=t.qL.QB.get(i);return s||(s=new jb(t,i),t.qL.QB.set(i,s),s)};class Yb extends Hb{constructor(t,i,s,e,h){super(t,i,s,e,h),this.bG="cull-back",this.OG=Lr,this.LG=[],this.EG=!1,this.ku=ka.lineStyle,this.Bp.S(zu)}le(t){const i=this.EG,s=this.ku,e=this.Tu!==s,h=this.dL(),r=i;if(i){const t=er(this.LG);this.zG=this.XB.PL(t,!1,this.zG)}if(r&&(this.OG=Zr(this.LG)),e||h){const t=8,i=to(s)&&s.getFillStyle(),e=1===s.getThickness()?"primitive":"instanced";this.qz=void 0,Oe(i)&&("primitive"===e?this.qz={type:e,shader:this.XB.BL(sv["3D"],sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0}),sv.Color({dataType:"uniform"})),fillStyle:i}:"instanced"===e&&(this.qz={type:e,shader:this.XB.BL(sv["3D"],sv.ColorShaded3D({dataType:"uniform",shadingStyle:this.Bp.M().type}),sv.LineInstanced3D({axisWorldTranslation:yS(this.Jt)})),geometry:$b(this.XB,t),fillStyle:i}))}return this.EG=!1,this.Tu=s,this.Bp.o=!1,this}YB(t){if(1===t)return this;const i=this.XB.gl,s=this.qz,e=this.zG,h=this.ku,r=this.Bp.M();if(s&&e&&to(h))switch(s.type){case"instanced":{const n=.5*this.re.Mp(h.thickness),o=s.fillStyle.getColor(),a=s.shader,l=s.geometry;this.XB.OL(a,((s,h,u)=>{this.XB.BO(a).rE(s("uScale"),this.xG.HO.NL()).rE(s("uDisp"),this.xG.HO.GL()).oE(s("uViewProjectionMatrix"),this.PG).VL(s("uColorDiffuse"),o).zL(s("uOffsetWU"),n).zL(s("uIsHighlighted"),this.ta).VL(s("uHighlightColorOffset"),this.ha).zL(s("uRenderEffectMask"),2===t?1:0),"phong"===r.type&&this.XB.rE(s("uCameraLoc"),this.DG).rE(s("uLightLoc"),this.BG).zL(s("uAmbientReflection"),r.ambientReflection).zL(s("uSpecularReflection"),r.specularReflection).zL(s("uDiffuseReflection"),r.diffuseReflection).zL(s("uShininess"),r.shininess).VL(s("uLightColor"),r.specularColor).VL(s("uAmbientColor"),r.ambientColor),i.bindBuffer(i.ARRAY_BUFFER,e);const c=h("aLocationA"),f=h("aLocationB");return i.vertexAttribPointer(c,3,i.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.XB.SE(c,1),i.enableVertexAttribArray(c),i.vertexAttribPointer(f,3,i.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.XB.SE(f,1),i.enableVertexAttribArray(f),l.BO(u).Ly(this.LG.length/2),!0}));break}case"primitive":{const r=to(h)?h.getFillStyle():void 0,n=r&&Oe(r)?r.getColor():void 0;if(n){const h=s.shader;this.XB.OL(h,((s,r)=>(this.XB.BO(h).rE(s("uScale"),this.xG.HO.NL()).rE(s("uDisp"),this.xG.HO.GL()).oE(s("uViewProjectionMatrix"),this.PG).VL(s("uColor"),n).zL(s("uIsHighlighted"),this.ta).VL(s("uHighlightColorOffset"),this.ha).zL(s("uRenderEffectMask"),2===t?1:0).LL(e,void 0,{location:r("aPos"),size:3}).Ly(i.LINES,this.LG.length),!0)))}break}}return this}_l(t){for(let i=0;i<t.length-1;i+=1){const s=t[i],e=t[i+1];this.LG.push(s),this.LG.push(e)}return this.EG=!0,{Ys(){return this},Js(){return this}}}Al(){return this.LG.length=0,this.EG=!0,this}gh(t){return this.ku="function"==typeof t?t(this.ku):t,this}Cu(){return this.ku}_O(){return this.zG&&(this.XB.UL(this.zG),this.zG=void 0),this}oi(){return this.OG.max.x}ni(){return this.OG.min.x}li(){return this.OG.max.y}ai(){return this.OG.min.y}Wp(){return this.OG.max.z}Hp(){return this.OG.min.z}Rl(){const t=this.ku;return t===rh?0:t.getThickness()}zl(){const t=this.ku;return t===rh?0:t.getThickness()}jp(){const t=this.ku;return t===rh?0:t.getThickness()}}class Xb extends aS{constructor(t,i,s){super(t),this.yG="gpu-calculate",this.VG=i,this.NG=s;const{vertices:e,drawSize:h}=this.Rz();this.zz=t.PL(e),this.Nz=h}Ly(t,i,s,e){return this.XB.LL(this.zz,0,{location:t.attribute("aInstanceGeo"),size:3},{location:e?t.attribute("aTriangleBary"):void 0,size:3}).AE(this.XB.gl.TRIANGLES,0,this.Nz,i),this}Rz(){const t=this.NG,i=this.VG,s=new Float32Array(6*(6*i+6*(t-2)*i));let e=0;const h=2*Math.PI/i,r=Math.PI/t,n=(t,i,n,o,a)=>{const l=i*h,u=Math.PI/2-t*r,c=Math.cos(u),f=c*Math.cos(l),d=c*Math.sin(l),g=Math.sin(u);s[e]=f,s[e+1]=g,s[e+2]=d,s[e+3]=n,s[e+4]=o,s[e+5]=a,e+=6};for(let s=0;s<t;s+=1)for(let e=0;e<i;e+=1)s>0&&(n(s,e,1,0,0),n(s,e+1,1,1,0),n(s+1,e,0,0,1)),s<t-1&&(n(s,e+1,1,1,0),n(s+1,e+1,0,1,0),n(s+1,e,0,0,1));return e!==s.length&&br(0,(()=>{this.XB.Yd.do&&e>s.length&&Mh.console.warn("LightningChart JS unexpected error scenario, sphere geometry buffer size mismatch.\nA point series 3D component might have missing points.\n\nThis warning can be omitted with LightningChartOptions.warnings")})),{vertices:s,drawSize:e/6}}sO(){this.XB.UL(this.zz)}}const Zb=(t,i)=>{const s=Math.round(i);s<3&&br(0,Fh);const e=s;let h=t.qL.tO.get(Array.from(t.qL.tO.keys()).find((t=>t.sectors===s&&t.stacks===e)));return h||(h=new Xb(t,s,e),t.qL.tO.set({sectors:s,stacks:e},h),h)};class Kb extends Hb{constructor(t,i,s,e,h){super(t,i,s,e,h),this.bG="cull-back",this.NM=[],this.qz={},this.ZV=new Ov(this.NM,(t=>t.vertexBuffer&&this.XB.UL(t.vertexBuffer)),!0),this.Du=[],this.ll=0,this.ul=[],this.cl=0,this.al=Lr,this.fl=Lr,this.ml=!1,this.ku=ka.lineStyle,this.Kp=ka.pointStyle3D,this.Bp.S(Nu),this.tN={attributesPerVertex:3,prepareRenderData:(t,i)=>er(t)}}le(t){const i=this.ml,s=this.ul,e=this.cl,h=e>0,r=this.ku,n=r!==this.Tu,o=this.Kp,a=o!==this.GG,l=this.dL(),u=this.Ko.o,c=this.Ko.M();this.fl&&(this.al=qr(this.al,this.fl),this.fl=void 0),h&&(this.Du=ur(this.Du,s,{canReturnB:!0}),this.ll+=e);let f=s,d=e;if(i&&(this.NM.forEach((t=>{t.existingCoordinatesCount=0,t.existingDataPointsCount=0,t.boundaries=Lr})),this.ZV.NV(),f=this.Du,d=this.ll),d>0){const t=1e5,i=Math.floor(this.DR.WG/(this.tN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),s=this.na("ApplicationType",(t=>"UserSeries"===t.type))?d:1e3,e=Ph(s,t,i);this.ZV.EV(f,e,((t,i,s,e)=>({existingDataPointsCount:s-e,existingCoordinatesCount:s,allocatedCoordinatesCount:t,jointPointsCount:e,lastDataPoint:i[s-1],boundaries:Lr,vertexBuffer:this.XB.cE(t*this.tN.attributesPerVertex,this.tN.prepareRenderData(i,s))})),((t,i,s,e)=>{this.XB.fE(t.vertexBuffer,t.existingCoordinatesCount*this.tN.attributesPerVertex,this.tN.prepareRenderData(i,s)),t.existingDataPointsCount+=s-e,t.existingCoordinatesCount+=s,t.jointPointsCount+=e,t.lastDataPoint=i[s-1]}))}if(n||a||l||u){const t={},i=to(r)&&r,s=i&&i.getFillStyle(),e=Oe(s)&&s,h=ze(s)&&s,n=e||h,a=ca(o)&&o.getSize(),l=ca(o)&&o.getFillStyle(),u=Oe(l)&&l,f=ze(l)&&l,d=u||f,g=ca(o)&&o.getWireframeStyle(),m=g&&to(g)&&g,y=m&&m.getFillStyle(),p=y&&Oe(y)&&y,S=r.getThickness()<0||1===r.getThickness()&&this.na("ApplicationType",(t=>"InternalUI"===t.type))?"primitive":"instanced",v=h?["lookup",h.getLookUpProperty()]:"uniform";if("primitive"===S&&n?t.lines={type:"primitive",fillStyleSolid:e,fillStylePaletted:h,shader:this.XB.BL(sv["3D"],sv.Color({dataType:v}),sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0})),mousePicking:c?{shader:this.XB.BL(sv["3D"],sv.MousePicking,sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0}))}:void 0}:"instanced"===S&&i&&n&&(t.lines={type:"instanced",lineStyleSolid:i,fillStyleSolid:e,fillStylePaletted:h,shader:this.XB.BL(sv["3D"],sv.ColorShaded3D({dataType:v,shadingStyle:this.Bp.M().type}),sv.LineInstanced3D({axisWorldTranslation:yS(this.Jt)})),geometry:qb(this.XB,i.getThickness()),mousePicking:c?{shader:this.XB.BL(sv["3D"],sv.MousePicking,sv.LineInstanced3D({axisWorldTranslation:yS(this.Jt)}))}:void 0}),t.markers=void 0,d){const i=ar(o.getShape(),{cube:()=>Gb(this.XB),sphere:()=>Jb(this.XB,o)});t.markers={geometry:i,pointStyle:o,pointSizeNWU:"number"==typeof a&&a,pointSizeAxis:"object"==typeof a&&a,fillStyleSolid:u,fillStylePaletted:f,shader:this.XB.BL(sv["3D"],sv.ColorShaded3D({dataType:f?["lookup",f.getLookUpProperty()]:"uniform",shadingStyle:this.Bp.M().type,wireframe:!1!==p}),sv.VertexLocation({offset:{dataType:"uniform",sizeUnit:"number"==typeof a?"nwu":"axis",symmetric:"number"==typeof a,halved:!0},axisWorldTranslation:yS(this.Jt),normalSource:i.yG})),mousePicking:c?{shader:this.XB.BL(sv["3D"],sv.MousePicking,sv.VertexLocation({offset:{dataType:"uniform",sizeUnit:"number"==typeof a?"nwu":"axis",symmetric:"number"==typeof a,halved:!0},axisWorldTranslation:yS(this.Jt),normalSource:void 0}))}:void 0,wireframe:m&&p&&{thickness:m.getThickness(),fillStyleSolid:p}}}this.qz=t,h?this.HG=this.DR.wz(h.lut,this.HG):this.HG&&(this.DR.kz(this.HG),this.HG=void 0),f?this.UG=this.DR.wz(f.lut,this.UG):this.UG&&(this.DR.kz(this.UG),this.UG=void 0)}return this.ml=!1,this.ul=[],this.cl=0,this.Tu=r,this.GG=o,this.Bp.o=!1,this.Ko.o=!1,this}YB(t){var i,s;const e=this.XB.gl,{lines:h,markers:r}=this.qz,n=this.Bp.M(),o=1===t?null===(i=null==h?void 0:h.mousePicking)||void 0===i?void 0:i.shader:null==h?void 0:h.shader;if(h&&o&&"instanced"===h.type){const i=o,{geometry:s,lineStyleSolid:r,fillStyleSolid:a,fillStylePaletted:l}=h;this.XB.OL(i,((h,o,u)=>{let c=!1;return this.XB.BO(i).rE(h("uScale"),this.xG.HO.NL()).rE(h("uDisp"),this.xG.HO.GL()).oE(h("uViewProjectionMatrix"),this.PG).zL(h("uOffsetWU"),this.re.Mp(r.getThickness())).zL(h("uIsHighlighted"),1===t||2===t?0:this.ta).VL(h("uHighlightColorOffset"),this.ha).zL(h("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===n.type&&this.XB.rE(h("uCameraLoc"),this.DG).rE(h("uLightLoc"),this.BG).zL(h("uAmbientReflection"),n.ambientReflection).zL(h("uSpecularReflection"),n.specularReflection).zL(h("uDiffuseReflection"),n.diffuseReflection).zL(h("uShininess"),n.shininess).VL(h("uLightColor"),n.specularColor).VL(h("uAmbientColor"),n.ambientColor),1===t?this.XB.VL(h("uColor"),this.WR):a?this.XB.VL(h("uColorDiffuse"),a.getColor()):l&&this.HG&&this.XB.fR(u,l.lut,this.HG,0),this.NM.forEach((t=>{e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer);const i=o("aLocationA"),h=o("aLocationB");e.vertexAttribPointer(i,3,e.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.XB.SE(i,1),e.enableVertexAttribArray(i),e.vertexAttribPointer(h,3,e.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.XB.SE(h,1),e.enableVertexAttribArray(h),s.BO(u).Ly(t.existingCoordinatesCount-1),c=!0})),c}))}if(h&&o&&"primitive"===h.type){const i=o,{fillStyleSolid:s,fillStylePaletted:r}=h;this.XB.OL(i,((h,n,o)=>{let a=!1;return this.XB.BO(i).rE(h("uScale"),this.xG.HO.NL()).rE(h("uDisp"),this.xG.HO.GL()).oE(h("uViewProjectionMatrix"),this.PG).zL(h("uIsHighlighted"),1===t||2===t?0:this.ta).VL(h("uHighlightColorOffset"),this.ha).zL(h("uRenderEffectMask"),2===t?1:0),1===t?this.XB.VL(h("uColor"),this.WR):s?this.XB.VL(h("uColor"),s.getColor()):r&&this.HG&&this.XB.fR(o,r.lut,this.HG,0),this.NM.forEach((t=>{this.XB.LL(t.vertexBuffer,void 0,{location:n("aPos"),size:3}).Ly(e.LINE_STRIP,t.existingCoordinatesCount),a=!0})),a}))}const a=1===t?null===(s=null==r?void 0:r.mousePicking)||void 0===s?void 0:s.shader:null==r?void 0:r.shader;if(r&&a){const i=a,{geometry:s,fillStyleSolid:e,fillStylePaletted:h,pointSizeAxis:o,pointSizeNWU:l,wireframe:u}=r;this.XB.OL(i,((r,a,c,f)=>{let d=!1;return this.XB.BO(i).rE(r("uScale"),this.xG.HO.NL()).rE(r("uDisp"),this.xG.HO.GL()).oE(r("uViewProjectionMatrix"),this.PG).zL(f("uRatioNwuWu"),this.xG.jG()).zL(r("uIsHighlighted"),1===t||2===t?0:this.ta).VL(r("uHighlightColorOffset"),this.ha).zL(r("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===n.type&&this.XB.rE(r("uCameraLoc"),this.DG).rE(r("uLightLoc"),this.BG).zL(r("uAmbientReflection"),n.ambientReflection).zL(r("uSpecularReflection"),n.specularReflection).zL(r("uDiffuseReflection"),n.diffuseReflection).zL(r("uShininess"),n.shininess).VL(r("uLightColor"),n.specularColor).VL(r("uAmbientColor"),n.ambientColor),1===t?this.XB.VL(r("uColor"),this.WR):e?this.XB.VL(r("uColorDiffuse"),e.getColor()):h&&this.UG&&this.XB.fR(c,h.lut,this.UG,0),u&&1!==t&&this.XB.zL(r("uWireframeThickness"),u.thickness).VL(r("uWireframeColor"),u.fillStyleSolid.getColor()),!1!==o&&this.XB.rE(r("uOffsetAxis"),[o.x,o.y,o.z]),!1!==l&&this.XB.zL(r("uOffsetNWU"),l),this.NM.forEach((i=>{this.XB.LL(i.vertexBuffer,1,{location:a("aPos"),size:3}),s.Ly(c,i.existingCoordinatesCount,"phong"===n.type&&1!==t,Boolean(u)&&1!==t),d=!0})),d}))}return this}_l(t,i){Array.isArray(t)||(t=[t]),this.ul=ur(this.ul,t,{canReturnB:!0}),this.cl+=t.length;const s=i||Zr(t);return this.fl=this.fl?qr(this.fl,s):s,this}gh(t){return this.ku="function"==typeof t?t(this.ku):t,this}Cu(){return this.ku}Sp(t){return this.Kp="function"==typeof t?t(this.Kp):t,this}$G(){return this.Kp}oi(){return this.fl?Math.max(this.fl.max.x,this.al.max.x):this.al.max.x}ni(){return this.fl?Math.min(this.fl.min.x,this.al.min.x):this.al.min.x}li(){return this.fl?Math.max(this.fl.max.y,this.al.max.y):this.al.max.y}ai(){return this.fl?Math.min(this.fl.min.y,this.al.min.y):this.al.min.y}Wp(){return this.fl?Math.max(this.fl.max.z,this.al.max.z):this.al.max.z}Hp(){return this.fl?Math.min(this.fl.min.z,this.al.min.z):this.al.min.z}Rl(){return Tr(this.ku)}zl(){return Tr(this.ku)}jp(){return Tr(this.ku)}Sl(){return this.Du}pl(){return this.ul}wl(){return this.ll}kl(){return this.cl}Al(){return this.ml=!0,this.Du.length=0,this.ll=0,this.ul=[],this.cl=0,this.al=Lr,this.fl=void 0,this}dispose(){return super.dispose(),this.ZV.GV(),this.qz={},this.HG&&(this.DR.kz(this.HG),this.HG=void 0),this.UG&&(this.DR.kz(this.UG),this.UG=void 0),this}_O(){return this.dispose(),this}}const qb=(t,i)=>$b(t,i>50?20:i>20?16:i>10?12:i>5?8:6),Jb=(t,i)=>{const s=i.getSize();return Zb(t,"number"==typeof s?s>50?20:s>20?16:s>10?12:s>5?8:6:20)};class Qb extends Hb{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.bG="cull-back",this.NM=[],this.ZV=new Ov(this.NM,(t=>t.vertexBuffer&&this.XB.UL(t.vertexBuffer)),!1),this.Du=[],this.ll=0,this.ul=[],this.cl=0,this.al=Lr,this.fl=Lr,this.ml=!1,this.ro=r,this.Qp=ka.pointStyle3D,this.Bp.S(Nu);const n=!0===(null==r?void 0:r.individualPointColorEnabled),o=!0===(null==r?void 0:r.individualPointSizeEnabled),a=!0===(null==r?void 0:r.individualLookupValuesEnabled),l=!0===(null==r?void 0:r.individualPointSizeAxisEnabled);let u,c,f,d,g=0;g+=3,n&&(u=g,g+=4),o&&(c=g,g+=1),a&&(f=g,g+=1),l&&(d=g,g+=3);const m=((t,i,s,e)=>t||i||s||e?!t||i||s||e?t||!i||s||e?t||i||!s||e?t||i||s||!e?(h,r,n)=>{const o=3+(t?4:0)+(i?1:0)+(s?1:0)+(e?3:0),a=h.length,l=new Float32Array(a*o);let u=0,c=u;for(let t=0;t<a;t+=1){const i=h[t];l[c+0]=i.x,l[c+1]=i.y,l[c+2]=i.z,c+=o}if(u+=3,t){const t=n&&Ee(n)&&n.getFallbackColor()||Me;c=u;for(let i=0;i<a;i+=1){const s=h[i].color||t;l[c+0]=s.r,l[c+1]=s.g,l[c+2]=s.b,l[c+3]=s.a,c+=o}u+=4}if(i){const t=r&&r.getSize();let i=1;"number"==typeof t&&(i=t),c=u;for(let t=0;t<a;t+=1){const s=h[t],e=void 0!==s.size?s.size:i;l[c+0]=e,c+=o}u+=1}if(s){c=u;for(let t=0;t<a;t+=1){const i=h[t];l[c+0]=void 0!==i.value?i.value:gh,c+=o}u+=1}if(e){const t=r&&r.getSize();let i={x:1,y:1,z:1};"object"==typeof t&&(i=t),c=u;for(let t=0;t<a;t+=1){const s=h[t],e=void 0!==s.sizeAxisX?s.sizeAxisX:i.x,r=void 0!==s.sizeAxisY?s.sizeAxisY:i.y,n=void 0!==s.sizeAxisZ?s.sizeAxisZ:i.z;l[c+0]=e,l[c+1]=r,l[c+2]=n,c+=o}u+=3}return l}:(t,i,s)=>((t,i)=>{const s=i&&i.getSize();let e={x:1,y:1,z:1};"object"==typeof s&&(e=s);const h=t.length,r=new Float32Array(6*h);let n=0;for(let i=0;i<h;i+=1){const s=t[i];r[n+0]=s.x,r[n+1]=s.y,r[n+2]=s.z;const h=void 0!==s.sizeAxisX?s.sizeAxisX:e.x,o=void 0!==s.sizeAxisY?s.sizeAxisY:e.y,a=void 0!==s.sizeAxisZ?s.sizeAxisZ:e.z;r[n+3]=h,r[n+4]=o,r[n+5]=a,n+=6}return r})(t,i):(t,i,s)=>(t=>{const i=t.length,s=new Float32Array(4*i);for(let e=0,h=0;e<i;e+=1){const i=t[e];s[h+0]=i.x,s[h+1]=i.y,s[h+2]=i.z,s[h+3]=void 0!==i.value?i.value:gh,h+=4}return s})(t):(t,i,s)=>((t,i)=>{const s=i&&i.getSize();let e=1;"number"==typeof s&&(e=s);const h=t.length,r=new Float32Array(4*h);for(let i=0,s=0;i<h;i+=1){const h=t[i];r[s+0]=h.x,r[s+1]=h.y,r[s+2]=h.z;const n=void 0!==h.size?h.size:e;r[s+3]=n,s+=4}return r})(t,i):(t,i,s)=>((t,i)=>{const s=i&&Ee(i)&&i.getFallbackColor()||Me,e=t.length,h=new Float32Array(7*e);for(let i=0,r=0;i<e;i+=1){const e=t[i];h[r+0]=e.x,h[r+1]=e.y,h[r+2]=e.z;const n=e.color||s;h[r+3]=n.r,h[r+4]=n.g,h[r+5]=n.b,h[r+6]=n.a,r+=7}return h})(t,s):(t,i,s)=>er(t))(n,o,a,l);this.tN={individualPointColorEnabled:n,individualPointSizeEnabled:o,individualLookupValuesEnabled:a,individualPointSizeAxisEnabled:l,attributesPerVertex:g,attributeOffsetCoordinate:0,attributeOffsetColor:u,attributeOffsetSize:c,attributeOffsetLookUpValue:f,attributeOffsetPointSize3D:d,prepareRenderData:(t,i)=>m(t,this.Qp,this.Qp.fillStyle)}}le(t){const i=this.ml,s=this.ul,e=this.cl,h=e>0,r=this.Qp,n=this.Qp!==this.YG,o=this.Ko.M(),a=this.Ko.o,l=this.dL();this.fl&&(this.al=qr(this.al,this.fl),this.fl=void 0),h&&(this.Du=ur(this.Du,s,{canReturnB:!0}),this.ll+=e);let u=s,c=e;if(i&&(this.NM.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.boundaries=Lr})),this.ZV.NV(),u=this.Du,c=this.ll),c>0){const t=Math.floor(this.DR.WG/(this.tN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),i=Ph(c,1e5,t);this.ZV.EV(u,i,((t,i,s)=>({existingDataPointsCount:s,existingCoordinatesCount:s,allocatedCoordinatesCount:t,boundaries:Lr,vertexBuffer:this.XB.cE(t*this.tN.attributesPerVertex,this.tN.prepareRenderData(i,s))})),((t,i,s)=>{this.XB.fE(t.vertexBuffer,t.existingCoordinatesCount*this.tN.attributesPerVertex,this.tN.prepareRenderData(i,s)),t.existingDataPointsCount+=s,t.existingCoordinatesCount=t.existingDataPointsCount}))}if(n||l||a){let t;const i=r.getSize(),s=r.getFillStyle(),e=this.tN.individualPointColorEnabled,h=this.tN.individualPointSizeEnabled,n=this.tN.individualPointSizeAxisEnabled,a=this.tN.individualLookupValuesEnabled,l=Oe(s)&&s,u=Ee(s)&&s,c=ze(s)&&s,f=s===Ie&&Ie;if(u&&!e){const t="LCJS misusage error: Series individualPointColorEnabled flag must be set if using IndividualPointFill !";throw Mh.alert(t),new Error(t)}if(c&&"value"===c.getLookUpProperty()&&!a){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw Mh.alert(t),new Error(t)}const d=ca(r)&&r,g=d&&d.getWireframeStyle(),m=g&&to(g)&&g,y=m&&m.getFillStyle(),p=y&&Oe(y)&&y;if(l||u||c||p){const s=u?"attribute":c?["lookup",c.getLookUpProperty()]:"uniform",e=h&&"number"==typeof i,a=n&&"object"==typeof i,d=e||a?"attribute":"uniform";if(ca(r)){const n=ar(r.getShape(),{cube:()=>Gb(this.XB),sphere:()=>tx(this.XB,r,h)});t={type:"instanced",shader:this.XB.BL(sv["3D"],sv.ColorShaded3D({dataType:s,shadingStyle:this.Bp.M().type,wireframe:!1!==p}),sv.VertexLocation({offset:{dataType:d,sizeUnit:"number"==typeof i?"nwu":"axis",halved:!0,symmetric:"number"==typeof i},axisWorldTranslation:yS(this.Jt),normalSource:n.yG})),pointStyle:r,useIndividualPointSize:e,useIndividualPointSize3D:a,pointSizeNWU:"number"==typeof i&&i,pointSizeAxis:"object"==typeof i&&i,fillStyleSolid:l,fillStyleIndividual:u,fillStylePalette:c,fillStyleEmpty:f,mousePickingShader:o&&this.XB.BL(sv["3D"],sv.MousePicking,sv.VertexLocation({offset:{dataType:d,sizeUnit:"number"==typeof i?"nwu":"axis",halved:!0,symmetric:"number"==typeof i},axisWorldTranslation:yS(this.Jt),normalSource:void 0})),geometry:n,wireframe:m&&p&&{thickness:m.getThickness()<0?1:m.getThickness(),fillStyleSolid:p}}}else ga(r)&&"number"==typeof i&&(t={type:"primitive",shader:this.XB.BL(sv["3D"],sv.PointSize(d),sv.Color({dataType:s}),sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0})),pointStyle:r,pointSizePixels:i,useIndividualPointSize:e,fillStyleSolid:l,fillStyleIndividual:u,fillStylePalette:c,mousePickingShader:o&&this.XB.BL(sv["3D"],sv.PointSize(d),sv.MousePicking,sv.VertexLocation({axisWorldTranslation:yS(this.Jt),normalSource:void 0}))})}this.qz=t,ze(s)?this.NN=this.DR.wz(s.lut,this.NN):this.NN&&(this.DR.kz(this.NN),this.NN=void 0)}return this.ml=!1,this.ul=[],this.cl=0,this.YG=r,this.Bp.o=!1,this}YB(t){const i=this.XB.gl,s=this.qz;if(!s)return this;const e=1===t?s.mousePickingShader:s.shader;if(!e)return this;const h=this.Bp.M(),{fillStyleSolid:r,fillStylePalette:n,useIndividualPointSize:o}=s,a="instanced"===s.type&&s.useIndividualPointSize3D,l="instanced"===s.type&&s.wireframe;return this.XB.OL(e,((u,c,f,d)=>{let g=!1;if(this.XB.BO(e).rE(u("uScale"),this.xG.HO.NL()).rE(u("uDisp"),this.xG.HO.GL()).oE(u("uViewProjectionMatrix"),this.PG).zL(u("uIsHighlighted"),1===t||2===t?0:this.ta).VL(u("uHighlightColorOffset"),this.ha).zL(u("uRenderEffectMask"),2===t?1:0),"instanced"===s.type){const{pointSizeAxis:t,pointSizeNWU:i}=s;!1!==t&&!1===a&&this.XB.rE(u("uOffsetAxis"),[t.x,t.y,t.z]),!1!==i&&!1===o&&this.XB.zL(u("uOffsetNWU"),i).zL(d("uRatioNwuWu"),this.xG.jG())}else if("primitive"===s.type){const{pointSizePixels:t}=s;o||this.XB.zL(u("uPointSize"),t).zL(u("uDevicePixelRatio"),this.XB.zO())}return 1===t?this.XB.VL(u("uColor"),this.WR):("instanced"===s.type?("phong"===h.type&&this.XB.rE(u("uCameraLoc"),this.DG).rE(u("uLightLoc"),this.BG).zL(u("uAmbientReflection"),h.ambientReflection).zL(u("uSpecularReflection"),h.specularReflection).zL(u("uDiffuseReflection"),h.diffuseReflection).zL(u("uShininess"),h.shininess).VL(u("uLightColor"),h.specularColor).VL(u("uAmbientColor"),h.ambientColor),l&&this.XB.zL(u("uWireframeThickness"),l.thickness).VL(u("uWireframeColor"),l.fillStyleSolid.getColor()),r&&this.XB.VL(u("uColorDiffuse"),r.getColor()),s.fillStyleEmpty&&this.XB.VL(u("uColorDiffuse"),_e)):"primitive"===s.type&&r&&this.XB.VL(u("uColor"),r.getColor()),n&&this.NN&&this.XB.fR(f,n.lut,this.NN,0)),this.NM.forEach(((e,r)=>{i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer);const n=c("aPos");if(i.vertexAttribPointer(n,3,i.FLOAT,!1,this.tN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.tN.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.XB.SE(n,1),i.enableVertexAttribArray(n),s.fillStyleIndividual&&void 0!==this.tN.attributeOffsetColor&&1!==t){const t=c("aColor");i.vertexAttribPointer(t,4,i.FLOAT,!1,this.tN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.tN.attributeOffsetColor*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.XB.SE(t,1),i.enableVertexAttribArray(t)}if(o&&void 0!==this.tN.attributeOffsetSize){"instanced"===s.type?this.XB.zL(d("uRatioNwuWu"),this.xG.jG()):"primitive"===s.type&&this.XB.zL(u("uDevicePixelRatio"),this.XB.zO());const t=c("instanced"===s.type?"aOffsetNWU":"aPointSize");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.tN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.tN.attributeOffsetSize*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.XB.SE(t,1),i.enableVertexAttribArray(t)}if(a&&void 0!==this.tN.attributeOffsetPointSize3D&&"instanced"===s.type){const t=c("aOffsetAxis");i.vertexAttribPointer(t,3,i.FLOAT,!1,this.tN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.tN.attributeOffsetPointSize3D*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.XB.SE(t,1),i.enableVertexAttribArray(t)}if(s.fillStylePalette&&"value"===s.fillStylePalette.getLookUpProperty()&&void 0!==this.tN.attributeOffsetLookUpValue&&1!==t){const t=c("aLookupValue");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.tN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.tN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.XB.SE(t,1),i.enableVertexAttribArray(t)}"instanced"===s.type?(s.geometry.Ly(f,e.existingCoordinatesCount,"phong"===h.type&&1!==t,Boolean(l)&&1!==t),g=!0):"primitive"===s.type&&(this.XB.Ly(i.POINTS,e.existingCoordinatesCount),g=!0)})),g})),this}_l(t,i){Array.isArray(t)||(t=[t]),this.ul=ur(this.ul,t,{canReturnB:!0}),this.cl+=t.length;const s=i||Zr(t);return this.fl=this.fl?qr(this.fl,s):s,this}tS(t){return this.Qp="function"==typeof t?t(this.Qp):t,this}XG(){return this.Qp}oi(){return this.fl?Math.max(this.fl.max.x,this.al.max.x):this.al.max.x}ni(){return this.fl?Math.min(this.fl.min.x,this.al.min.x):this.al.min.x}li(){return this.fl?Math.max(this.fl.max.y,this.al.max.y):this.al.max.y}ai(){return this.fl?Math.min(this.fl.min.y,this.al.min.y):this.al.min.y}Wp(){return this.fl?Math.max(this.fl.max.z,this.al.max.z):this.al.max.z}Hp(){return this.fl?Math.min(this.fl.min.z,this.al.min.z):this.al.min.z}Rl(){const t=this.Qp,i=t.getSize();return"number"==typeof i?ca(t)?i/2:ga(t)?5:0:0}zl(){return this.Rl()}jp(){return this.Rl()}Sl(){return this.Du}pl(){return this.ul}wl(){return this.ll}kl(){return this.cl}Al(){return this.ml=!0,this.Du.length=0,this.ll=0,this.ul=[],this.cl=0,this.al=Lr,this.fl=void 0,this}dispose(){return super.dispose(),this.ZV.GV(),this.NN&&(this.DR.kz(this.NN),this.NN=void 0),this.qz=void 0,this}_O(){return this.dispose(),this}}const tx=(t,i,s)=>{const e=i.getSize();return Zb(t,"number"==typeof e?s||e>=50?20:e>=10?10:e>=3?5:3:32)};class ix extends Hb{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.bG="disabled",this.Qe=ka.fillStyle,this.Hu=ka.lineStyle,this.PN=u("bilinear"),this.ZG=[],this.KG=Lr,this.qG=void 0,this.qz={},this.JG=!1,this.Bp.S(zu);const n="columns"===e.dataOrder?e.columns:e.rows,o="columns"===e.dataOrder?e.rows:e.columns;this.ro={...e,primaryDimensionVectorsCount:n,secondaryDimensionVectorsCount:o},this.KG={min:{x:Math.min(e.start.x,e.start.x+(e.columns-1)*e.step.x),z:Math.min(e.start.z,e.start.z+(e.rows-1)*e.step.z)},max:{x:Math.max(e.start.x,e.start.x+(e.columns-1)*e.step.x),z:Math.max(e.start.z,e.start.z+(e.rows-1)*e.step.z)}},this.QG=new Array(this.ro.primaryDimensionVectorsCount).fill(void 0),this._T=new kb(this.DR,t.DR.YN,t.$s.Jt,Fh,[],{...this.ro,start:{x:0,y:0},step:{x:1,y:1}},-1,Me).Uu(rh),this._T.LN=bb;const a=this._T.RN.gridTiles.map((t=>{const i=t.sizeHeatmapDataVectors,s=t.sizeUniqueHeatmapDataVectors,e=t.iFirstVector,h=t.iFirstUniqueVector,r="columns"===this.ro.dataOrder?{x:this.ro.step.x*(t.sizeHeatmapDataVectors.primary-1),z:this.ro.step.z*(t.sizeHeatmapDataVectors.secondary-1)}:{x:this.ro.step.x*(t.sizeHeatmapDataVectors.secondary-1),z:this.ro.step.z*(t.sizeHeatmapDataVectors.primary-1)},n="columns"===this.ro.dataOrder?{x:this.ro.start.x+this.ro.step.x*t.iFirstVector.primary,z:this.ro.start.z+this.ro.step.z*t.iFirstVector.secondary}:{x:this.ro.start.x+this.ro.step.x*t.iFirstVector.secondary,z:this.ro.start.z+this.ro.step.z*t.iFirstVector.primary},o=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary),a={primary:t.sizeHeatmapDataVectors.primary-1,secondary:t.sizeHeatmapDataVectors.secondary-1};return{iFirstVector:t.iFirstVector,iFirstUniqueVector:t.iFirstUniqueVector,sizeHeatmapDataVectors:t.sizeHeatmapDataVectors,sizeUniqueHeatmapDataVectors:t.sizeUniqueHeatmapDataVectors,iFirstGeometryVector:e,iFirstGeometryUniqueVector:h,sizeGeometryDataVectors:i,sizeUniqueGeometryDataVectors:s,startLocationAxis:n,sizeAxis:r,heightmapData:o,normalmapSize:a}})),l=this._T.RN.gridTileSizes.map((t=>{const i=a.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary)),s=i[0].sizeGeometryDataVectors;return{...t,tiles:i,sizeGeometryData:s}})),c=a.reduce(((t,i)=>{const s=i.sizeHeatmapDataVectors.primary,e=i.sizeHeatmapDataVectors.secondary,h=s*e;return h>t.cells?{primary:s,secondary:e,cells:h}:t}),{primary:0,secondary:0,cells:0});this.tW={gridTiles:a,gridTileSizes:l,largestGridTileSize:c}}iW(t){this.sW=t,this.qG=void 0}eW(t){"columns"===this.ro.dataOrder?(this.KG.min.x=Math.min(this.ro.start.x,this.ro.start.x+(this.ro.columns-1)*this.ro.step.x)+t,this.KG.max.x=Math.max(this.ro.start.x,this.ro.start.x+(this.ro.columns-1)*this.ro.step.x)+t):(this.KG.min.z=Math.min(this.ro.start.z,this.ro.start.z+(this.ro.rows-1)*this.ro.step.z)+t,this.KG.max.z=Math.max(this.ro.start.z,this.ro.start.z+(this.ro.rows-1)*this.ro.step.z)+t),this.hW=t}le(t){const i=this.ZG,s=this.Qe,e=Oe(s)&&s,h=ze(s)&&s,r=Xa(this.Sa,s),n=h&&h.getPalette(),o=this.Hu,a=to(o)&&o,l=a&&a.getFillStyle(),u=l&&Oe(l)&&l,c=!1!==u,f=o!==this.cc,d=this.PN.o,g=this.PN.M(),m=this.Bp.M(),y=this.dL(),p=this.Ko.M();this._T.le();const S=this._T.zN;if(!S)return this;this.rW=this.rW||this.nW(S);const v=this.rW;this.oW(v);const b=xb(i,v,void 0,(t=>t.sizeGeometryDataVectors));if(b.size>0&&(Ab(this.XB,b,(t=>t.heightmapData),(t=>t.heightmapDataTexture)),this.JG=!0),"phong"===m.type&&(b.size>0||y)){const t=this.XB.gl,i=this.XB.BL(sv["2D"],sv.DrawToNormalTexture({flipXZ:"rows"===this.ro.dataOrder,vertexIdSource:this.XB.eR(),normalTextureType:this.XB.gl2?"uint":"ubyte",heightmapTextureType:this.XB.EE?"float":"ubyte",littleEndian:this.XB.IS_MACHINE_LITTLE_ENDIAN}));v.gridTileSizes.forEach((s=>{s.tiles.forEach((e=>{const h=e.normalmapTexture;if(!h)return;const r={x:e.normalmapSize.secondary,y:e.normalmapSize.primary},n=r.x*r.y;this.XB.VE.YB((()=>{this.XB.OL(i,((h,r,o,a)=>(this.XB.BO(i).hR(o,n).EL(h("uTileDimensionsXZ"),["columns"===this.ro.dataOrder?s.sizeHeatmapData.primary:s.sizeHeatmapData.secondary,"columns"===this.ro.dataOrder?s.sizeHeatmapData.secondary:s.sizeHeatmapData.primary]).eE(h("uTileDimensions"),[s.sizeHeatmapData.primary,s.sizeHeatmapData.secondary]).EL(h("uTileStartLocationAxisXZ"),[e.startLocationAxis.x+("columns"===this.ro.dataOrder&&this.hW||0),e.startLocationAxis.z+("rows"===this.ro.dataOrder&&this.hW||0)]).EL(h("uTileSizeAxisXZ"),[e.sizeAxis.x,e.sizeAxis.z]).RL(h("uHeightmapTexture"),e.heightmapDataTexture,1).Ly(t.POINTS,n),!0)))}),h,r,void 0,this.$s.Bn(),0)}))}))}const x=this.qz;if(r||f||d){n?this.NN=this.DR.wz(n,this.NN):this.NN&&(this.DR.kz(this.NN),this.NN=void 0);const t=a&&u?{wireframeSolid:a,wireframeFillSolid:u}:void 0;e?x.surface={shader:this.XB.BL(sv["3D"],sv.SurfaceGrid({axisWorldTranslation:yS(this.Jt),fillColor:"uniform",interpolation:"bilinear"===g&&"bilinear",flipXZ:"rows"===this.ro.dataOrder,shadingStyle:m.type,wireframe:c,instanceIdSource:this.XB.rR(),normalTextureType:this.XB.gl2?"uint":"ubyte",intensityTextureType:this.XB.EE?"float":"ubyte",heightmapTextureType:this.XB.EE?"float":"ubyte",littleEndian:this.XB.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"solid",fillStyleSolid:e},wireframe:t}:this.NN&&h&&"value"===h.getLookUpProperty()?x.surface={shader:this.XB.BL(sv["3D"],sv.SurfaceGrid({axisWorldTranslation:yS(this.Jt),fillColor:["lookup","value"],interpolation:"bilinear"===g&&"bilinear",flipXZ:"rows"===this.ro.dataOrder,shadingStyle:m.type,wireframe:c,instanceIdSource:this.XB.rR(),normalTextureType:this.XB.gl2?"uint":"ubyte",intensityTextureType:this.XB.EE?"float":"ubyte",heightmapTextureType:this.XB.EE?"float":"ubyte",littleEndian:this.XB.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"intensity",fillStylePaletted:h,colorLookupTexture:this.NN},wireframe:t}:this.NN&&h?x.surface={shader:this.XB.BL(sv["3D"],sv.SurfaceGrid({axisWorldTranslation:yS(this.Jt),fillColor:["lookup",h.getLookUpProperty()],interpolation:"bilinear"===g&&"bilinear",flipXZ:"rows"===this.ro.dataOrder,shadingStyle:m.type,wireframe:c,instanceIdSource:this.XB.rR(),normalTextureType:this.XB.gl2?"uint":"ubyte",intensityTextureType:this.XB.EE?"float":"ubyte",heightmapTextureType:this.XB.EE?"float":"ubyte",littleEndian:this.XB.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"xyz",fillStylePaletted:h,colorLookupTexture:this.NN},wireframe:t}:c&&(x.surface={shader:this.XB.BL(sv["3D"],sv.SurfaceGrid({axisWorldTranslation:yS(this.Jt),fillColor:void 0,interpolation:"bilinear"===g&&"bilinear",flipXZ:"rows"===this.ro.dataOrder,shadingStyle:m.type,wireframe:c,instanceIdSource:this.XB.rR(),normalTextureType:this.XB.gl2?"uint":"ubyte",intensityTextureType:this.XB.EE?"float":"ubyte",heightmapTextureType:this.XB.EE?"float":"ubyte",littleEndian:this.XB.IS_MACHINE_LITTLE_ENDIAN})),fill:void 0,wireframe:t})}return x.mousePicking=p?this.qz.mousePicking||{shader:this.XB.BL(sv["3D"],sv.SurfaceGrid({axisWorldTranslation:yS(this.Jt),fillColor:"uniform",interpolation:"bilinear"===g&&"bilinear",flipXZ:"rows"===this.ro.dataOrder,shadingStyle:"simple",wireframe:!1,instanceIdSource:this.XB.rR(),normalTextureType:this.XB.gl2?"uint":"ubyte",intensityTextureType:this.XB.EE?"float":"ubyte",heightmapTextureType:this.XB.EE?"float":"ubyte",littleEndian:this.XB.IS_MACHINE_LITTLE_ENDIAN}))}:void 0,this.qz=x,this.ZG.length=0,this.Sa=s,this.cc=o,this.Bp.o=!1,this}nW(t){const i=this.tW.gridTiles.map((i=>{const s=_b(this.XB,i.sizeHeatmapDataVectors.secondary,i.sizeHeatmapDataVectors.primary),e=t.gridTiles.find((t=>t.iFirstUniqueVector.primary===i.iFirstUniqueVector.primary&&t.iFirstUniqueVector.secondary===i.iFirstUniqueVector.secondary));if(!e)throw new Error("Internal LC JS error prepare surface data 2D render data not found");return{...i,intensityDataTexture:e.intensityDataTexture,heightmapDataTexture:s,normalmap:void 0}})),s=this.tW.gridTileSizes.map((t=>{const s=i.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary));return{...t,tiles:s}})),e=this.XB.PL([0,0,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,0,0]),h=this.XB.gl.TRIANGLES;return{gridTiles:i,gridTileSizes:s,rectangleLocationsBuffer:e,rectangleLocationsDrawLength:6,rectangleLocationsDrawMode:h}}oW(t){var i;if("phong"===this.Bp.M().type)for(let s=0;s<t.gridTiles.length;s+=1){const e=t.gridTiles[s];if(e.normalmapTexture)return;let h;const r=null===(i=this.XB.gl2)||void 0===i?void 0:i.ctx;if(r)h=this.XB.$E(null,r.RGBA_INTEGER,!1,!0,{x:e.normalmapSize.secondary,y:e.normalmapSize.primary},!1,r.UNSIGNED_INT,r.RGBA32UI);else{const t=this.XB.gl;h=this.XB.$E(null,t.RGBA,!1,!0,{x:e.normalmapSize.secondary,y:e.normalmapSize.primary},!1,t.UNSIGNED_BYTE)}e.normalmapTexture=h}else t.gridTiles.forEach((t=>{t.normalmapTexture&&(this.XB.AO(t.normalmapTexture),t.normalmapTexture=void 0)}))}YB(t){var i,s,e,h;const r=this.XB.gl,n=this.rW;if(!n)return this;const o=this.Bp.M(),l=this.qz,u=1===t?null===(i=l.mousePicking)||void 0===i?void 0:i.shader:null===(s=l.surface)||void 0===s?void 0:s.shader;if(!u)return this;const c=1!==t?null===(e=l.surface)||void 0===e?void 0:e.wireframe:void 0,f=1!==t?null===(h=l.surface)||void 0===h?void 0:h.fill:void 0;return this.XB.OL(u,((i,s,e,h)=>{let l=!1;if(this.XB.BO(u).nR(e,this.tW.largestGridTileSize.cells).rE(i("uScale"),this.xG.HO.NL()).rE(i("uDisp"),this.xG.HO.GL()).oE(i("uViewProjectionMatrix"),this.PG).zL(i("uIsHighlighted"),1===t||2===t?0:this.ta).VL(i("uHighlightColorOffset"),this.ha).zL(i("uRenderEffectMask"),2===t?1:0),1!==t&&("phong"===o.type&&this.XB.rE(i("uCameraLoc"),this.DG).rE(i("uLightLoc"),this.BG).zL(i("uAmbientReflection"),o.ambientReflection).zL(i("uSpecularReflection"),o.specularReflection).zL(i("uDiffuseReflection"),o.diffuseReflection).zL(i("uShininess"),o.shininess).VL(i("uLightColor"),o.specularColor).VL(i("uAmbientColor"),o.ambientColor),c)){const{wireframeFillSolid:t,wireframeSolid:s}=c,e=s.getThickness()<0?1:s.getThickness();this.XB.VL(i("uWireframeColor"),t.getColor()).zL(i("uWireframeThickness"),e)}return 1===t?this.XB.VL(i("uColorDiffuse"),this.WR):"solid"===(null==f?void 0:f.fillMode)&&this.XB.VL(i("uColorDiffuse"),f.fillStyleSolid.getColor()),n.gridTileSizes.forEach((h=>{this.XB.EL(i("uTileDimensionsXZ"),["columns"===this.ro.dataOrder?h.sizeHeatmapData.primary:h.sizeHeatmapData.secondary,"columns"===this.ro.dataOrder?h.sizeHeatmapData.secondary:h.sizeHeatmapData.primary]).eE(i("uTileDimensions"),[h.sizeHeatmapData.primary,h.sizeHeatmapData.secondary]),h.tiles.forEach((o=>{let u=0,d=(o.sizeHeatmapDataVectors.primary-1)*(o.sizeHeatmapDataVectors.secondary-1);if(this.sW){const t=this.sW.fill.iFirstPrimary,i=this.sW.fill.iFirstPrimary+this.sW.fill.amountPrimary-1,s=o.iFirstVector.primary,e=o.iFirstVector.primary+o.sizeHeatmapDataVectors.primary-1;if(s>i||e<t)return;const r=((t,i,s,e)=>a(Math.max(t,s),Math.min(i,e)))(t,i,s,e);u=(r.min-o.iFirstVector.primary)*(h.sizeGeometryData.secondary-1),d=(r.max-r.min)*(h.sizeGeometryData.secondary-1)}if(!(u<0||d<=0)){if("intensity"===(null==f?void 0:f.fillMode)){const{colorLookupTexture:t,fillStylePaletted:s}=f;this.XB.fR(e,s.lut,t,1).RL(i("uTileIntensityValues"),o.intensityDataTexture,2).hE(i("uTileBoundsAxisXZ"),[o.startLocationAxis.x+("columns"===this.ro.dataOrder&&this.hW||0),o.startLocationAxis.z+("rows"===this.ro.dataOrder&&this.hW||0),o.sizeAxis.x,o.sizeAxis.z])}if("xyz"===(null==f?void 0:f.fillMode)){const{colorLookupTexture:t,fillStylePaletted:i}=f;this.XB.fR(e,i.lut,t,1)}1!==t&&"phong"===this.Bp.M().type&&o.normalmapTexture&&this.XB.RL(i("uNormalmapTexture"),o.normalmapTexture,3),this.XB.LL(n.rectangleLocationsBuffer,0,{location:s("aGeoCellOffset"),size:2},{location:c?s("aTriangleBary"):void 0,size:3}).aE(i("uBaseInstance"),u).EL(i("uTileStartLocationAxisXZ"),[o.startLocationAxis.x+("columns"===this.ro.dataOrder&&this.hW||0),o.startLocationAxis.z+("rows"===this.ro.dataOrder&&this.hW||0)]).EL(i("uTileSizeAxisXZ"),[o.sizeAxis.x,o.sizeAxis.z]).RL(i("uHeightmapTexture"),o.heightmapDataTexture,0).AE(n.rectangleLocationsDrawMode,0,n.rectangleLocationsDrawLength,d),l=!0,r.bindBuffer(r.ARRAY_BUFFER,null)}}))})),l})),this}dispose(){return super.dispose(),this._T.dispose(),this.NN&&(this.DR.kz(this.NN),this.NN=void 0),this.rW&&(this.rW.gridTileSizes.forEach((t=>{})),this.rW.gridTiles.forEach((t=>{this.XB.AO(t.heightmapDataTexture),t.normalmapTexture&&this.XB.AO(t.normalmapTexture)})),this.XB.UL(this.rW.rectangleLocationsBuffer),this.rW=void 0),this.qz={},this}_O(){return this.dispose(),this._T._O(),this}$S(t){return this._T.$S(t),this}YS(t){this.ZG.push(t),Mb(this.tW.gridTiles,t,(t=>t.heightmapData));for(let i=t.startPrimary;i<t.startPrimary+t.lengthPrimary;i+=1)this.QG[i]=void 0;return this.qG=void 0,this}US(t){return this.PN.S(t),this}jS(){return this.PN.M()}eh(t){return this.Qe=Ya(this.Qe,t),this._T.eh(this.Qe),this}ur(){return this.Qe}Uu(t){return this.Hu="function"==typeof t?t(this.Hu):t,this}ju(){return this.Hu}oi(){return this.KG.max.x}ni(){return this.KG.min.x}li(){const t=this.qG||this.aW();return this.qG=t,t.max}ai(){const t=this.qG||this.aW();return this.qG=t,t.min}Wp(){return this.KG.max.z}Hp(){return this.KG.min.z}Rl(){return 0}zl(){return 0}jp(){return 0}aW(){if(this.qG)return this.qG;const t=this.sW?this.sW.fill.iFirstPrimary:0,i=this.sW?t+this.sW.fill.amountPrimary-1:this.ro.primaryDimensionVectorsCount-1;let s=Dr,e=Br;return this.tW.gridTiles.forEach((h=>{for(let r=Math.max(t,h.iFirstUniqueVector.primary);r<=Math.min(i,h.iFirstUniqueVector.primary+h.sizeUniqueHeatmapDataVectors.primary-1);r+=1){const t=(r-h.iFirstUniqueVector.primary)*h.sizeHeatmapDataVectors.secondary;let i=this.QG[r];if(i)s=s<i.min?s:i.min,e=e>i.max?e:i.max;else{i={min:Dr,max:Br},this.QG[r]=i;for(let r=0;r<h.sizeHeatmapDataVectors.secondary;r+=1){const n=h.heightmapData[t+r];s=s<n?s:n,e=e>n?e:n,i.min=Math.min(i.min,n),i.max=Math.max(i.max,n)}}}})),this.qG={min:s,max:e},this.qG}}class sx extends Hb{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.bG="disabled",this.UN=0,this.$N={};const n={min:{x:e.start.x,z:e.start.z},max:{x:"rows"===e.scrollDimension?e.start.x+(e.columns-1)*e.step.x:e.start.x,z:"columns"===e.scrollDimension?e.start.z+(e.rows-1)*e.step.z:e.start.z}};this.ro={...e,initialBoundaries:n,scrollDimensionSize:"columns"===e.scrollDimension?e.columns:e.rows,staticDimensionSize:"columns"===e.scrollDimension?e.rows:e.columns},this.KG=n;const o=()=>({shape:new ix(this.xG,Fh,this.sa,{columns:e.columns+("columns"===e.scrollDimension?1:0),rows:e.rows+("rows"===e.scrollDimension?1:0),start:{x:0,z:0},step:e.step,dataOrder:e.scrollDimension,heatmapDataType:"intensity"},this.GR,this.WR).dispose(),hasData:!1});this.NM=[o(),o()]}le(t){return this.NM.forEach((i=>{i.shape.le(t)})),this}YB(t){return this.NM.forEach((i=>{i.hasData&&(i.shape.PG=this.PG,i.shape.DG=this.DG,i.shape.BG=this.BG,i.shape.YB(t))})),this}Al(){return this.UN=0,this.$N={},this.KG=this.ro.initialBoundaries,this.NM.forEach((t=>{t.shape.dispose(),t.shape.JG=!1,t.hasData=!1})),this}qS(t){var i;const s=this.NM[0],e=this.NM[1],h=t.heightMapValues?t.heightMapValues.length:null===(i=t.intensityValues)||void 0===i?void 0:i.length;let r=0;if(!h)return this;do{const i=Math.floor(this.UN/this.ro.scrollDimensionSize)%this.NM.length,n=this.NM[i],o=this.UN%this.ro.scrollDimensionSize,a=this.ro.scrollDimensionSize-o,l=0===o,u=Math.min(a,h),c=o+u,f=o,d=f+1,g=r,m=r+u,y=this.UN>=this.ro.scrollDimensionSize&&c<=this.ro.scrollDimensionSize-1,p=l;if(l){const t="columns"===this.ro.scrollDimension?this.ro.start.x+(this.UN-1)*this.ro.step.x:this.ro.start.z+(this.UN-1)*this.ro.step.z;n.shape.eW(t)}const S=y?0:1,v=c+(y?1:0);n.shape.iW({fill:{iFirstPrimary:S,amountPrimary:v},wireframe:{iFirstPrimary:S,amountPrimary:v,connectNext:!1}});const b=n===s?e:s,x=c+1,M=1+this.ro.scrollDimensionSize-x;b.shape.iW({fill:{iFirstPrimary:x,amountPrimary:M},wireframe:{iFirstPrimary:x,amountPrimary:M-1,connectNext:!0}});const _={};if(t.heightMapValues){const i=t.heightMapValues.slice(g,m);let s=!1;p&&this.$N.yValues&&(s=!0,i.splice(0,0,this.$N.yValues));const e={startPrimary:s?f:d,startSecondary:0,lengthPrimary:i.length,lengthSecondary:this.ro.staticDimensionSize,values:i,type:"y"};n.shape.YS(e),n.hasData=!0,_.yValues=i[u-1]}if(t.intensityValues){const i=t.intensityValues.slice(g,m);let s=!1;p&&this.$N.intensityValues&&(s=!0,i.splice(0,0,this.$N.intensityValues));const e={startPrimary:s?f:d,startSecondary:0,lengthPrimary:i.length,lengthSecondary:this.ro.staticDimensionSize,values:i,type:"intensity"};n.shape.$S(e),n.hasData=!0,_.intensityValues=i[u-1]}this.UN+=u,r+=u,this.$N=_}while(r<h);return"columns"===this.ro.scrollDimension?(this.KG.min.x=this.ro.start.x+Math.max(this.UN-this.ro.scrollDimensionSize,0)*this.ro.step.x,this.KG.max.x=this.ro.start.x+(this.UN-1)*this.ro.step.x):(this.KG.min.z=this.ro.start.z+Math.max(this.UN-this.ro.scrollDimensionSize,0)*this.ro.step.z,this.KG.max.z=this.ro.start.z+(this.UN-1)*this.ro.step.z),this}US(t){return this.NM.forEach((i=>i.shape.US(t))),this}jS(){return this.NM[0].shape.jS()}eh(t){return this.NM.forEach((i=>i.shape.eh(t))),this}ur(){return this.NM[0].shape.ur()}Uu(t){return this.NM.forEach((i=>i.shape.Uu(t))),this}ju(){return this.NM[0].shape.ju()}_O(){return this.dispose(),this.NM.forEach((t=>t.shape._O())),this}dispose(){return super.dispose(),this.NM.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.NM.forEach((i=>i.shape.setVisible(t&&i.hasData))),this}Vp(t){return super.Vp(t),this.NM.forEach((i=>i.shape.Vp(t))),this}oi(){return this.KG.max.x}ni(){return this.KG.min.x}li(){return Math.max(this.NM[0].shape.li(),this.NM[1].shape.li())}ai(){return Math.min(this.NM[0].shape.ai(),this.NM[1].shape.ai())}Wp(){return this.KG.max.z}Hp(){return this.KG.min.z}Rl(){return 0}zl(){return 0}jp(){return 0}Ys(t){return super.Ys(t),this.NM.forEach((i=>i.shape.Ys(t))),this}}class ex extends Bb{constructor(t,i,s,e){super(t,i,s),this.lW=45,this.uW=.1,this.cW=100,this.DG=n(0,0,1),this.fW=n(0,0,-1),this.dW=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],this.Bp=new Ru,this.Jt=e}nv(){const{cellIndex:t,cellSpan:i,cellsAmount:s}=this.Jt,e=i.x/s.x,h=i.y/s.y,r=t.x/s.x,n=t.y/s.y,o=this.$s.Ci();return{x:r*o.x,y:n*o.y,width:e*o.x,height:h*o.y}}setCameraLocation(t){return this.DG=t,this}getCameraLocation(){return this.DG}setCameraDirection(t){return this.fW=Pr.normalize(t),this}getCameraDirection(){return this.fW}setLightLocation(t){return this.BG=t,this}getLightLocation(){return this.BG}gW(){return n(this.dW[0],this.dW[1],this.dW[2])}mW(){return n(this.dW[4],this.dW[5],this.dW[6])}}class hx extends ex{constructor(t,i,s,e){super(t,i,s,e),this.HO=new av,this.yW=!0,this.DR=t,this.gl=t.OR(),this.cG=this.nG,this.pW=this.$s.jo((()=>{this.yW=!0})),this.SW=e.Dt((()=>{this.yW=!0}))}IL(t){const i=t.ni(),s=t.ai(),e=t.Hp(),h=t.oi(),r=t.li(),n=t.Wp();if(i===Dr||h===Br||s===Dr||r===Br||e===Dr||n===Br)return Or;const o=t.Rl(),a=t.zl(),l=t.jp(),u=Math.abs(t.re.Mp(o)*t.Jt.x.jt()),c=Math.abs(t.re.Mp(a)*t.Jt.y.jt()),f=Math.abs(t.re.Mp(l)*t.Jt.z.jt()),d=i-u,g=h+u,m=s-c,y=r+c,p=e-f,S=n+f;let v;return[{x:d,y:m,z:p},{x:g,y:m,z:p},{x:d,y:y,z:p},{x:g,y:y,z:p},{x:d,y:m,z:S},{x:g,y:m,z:S},{x:d,y:y,z:S},{x:g,y:y,z:S}].map((i=>t.re.Ap(i))).forEach((t=>{if(!t)return;const i={min:t,max:t};v=v?Kr(v,{min:t,max:t}):i})),v||Or}fG(t){const i=Array.from(this.cG.values());for(let s=0;s<i.length;s+=1){const e=i[s],h=e.ER(t);if(h)return{entity:e,index:s,collectionMember:h.collectionMember}}}Ap(t){if(this.vW(),this.bW(),!this.PG)return;const i=this.HO.GL(),s=n(i[0],i[1],i[2]),h=this.HO.NL(),r=n(h[0],h[1],h[2]),o=Pr.divideVec(Pr.subtractVec(t,s),r),a=this.PG,l=oS.multiply(a,[o.x,o.y,o.z,1]),u=e(l[0]/l[3],l[1]/l[3]),c=this.$s.Ci();return{x:.5*(1+u.x)*c.x,y:.5*(1+u.y)*c.y}}Mv(t){const i=this.HO.GL(),s=this.HO.NL(),e=Pr.divideVec(Pr.subtractVec(t,{x:i[0],y:i[1],z:i[2]}),{x:s[0],y:s[1],z:s[2]});return{...t,x:e.x,y:e.y,z:e.z}}_v(t){const i=this.HO.GL(),s=this.HO.NL(),e=Pr.addVec(Pr.multiplyVec(t,{x:s[0],y:s[1],z:s[2]}),{x:i[0],y:i[1],z:i[2]});return{...t,x:e.x,y:e.y,z:e.z}}Mp(t){return t/1e3}jG(){return.001}le(){const t=this.DG,i=this.BG,s=this.Jt.x.o||this.Jt.y.o||this.Jt.z.o;if(!i)throw br(0,(()=>xr()));const{viewProjectionMatrix:e}=this.vW();this.bW();const h=[t.x,t.y,t.z],r=[i.x,i.y,i.z];return this.nG.forEach((t=>{t.PG=e,t.DG=h,t.BG=r,t.le(s)})),this}vW(){if(!this.yW&&this.PG)return{viewProjectionMatrix:this.PG};const t=this.nv(),i=t.width/t.height;this.xW=oS.projectionPerspective(this.lW,i,this.uW,this.cW);const s=this.DG;this.dW[12]=s.x,this.dW[13]=s.y,this.dW[14]=s.z;const e=this.fW,h=n(0,1,0),r=Pr.multiply(e,-1),o=Pr.normalize(Pr.cross(h,r)),a=Pr.normalize(Pr.cross(r,o));this.dW[0]=o.x,this.dW[1]=o.y,this.dW[2]=o.z,this.dW[4]=a.x,this.dW[5]=a.y,this.dW[6]=a.z,this.dW[8]=r.x,this.dW[9]=r.y,this.dW[10]=r.z,this.MW=oS.inverse(this.dW);const{cellIndex:l,cellSpan:u,cellsAmount:c}=this.Jt,f=u.x/c.x,d=u.y/c.y,g=(l.x+u.x/2)/c.x,m=(l.y+u.y/2)/c.y,y=oS.multiply(oS.translation(Iu(-1,1,g),Iu(-1,1,m),0),oS.scaling(f,d,1));return this.PG=oS.multiply(y,oS.multiply(this.xW,this.MW)),this._W=oS.inverse(this.PG),this.yW=!1,{viewProjectionMatrix:this.PG}}bW(){this.HO.wR(this.Jt.x),this.HO.kR(this.Jt.y),this.HO.CR(this.Jt.z)}YB(t,i){const s=this.gl.zO(),e=this.nv(),h={x:e.x*s*i,y:e.y*s*i,width:e.width*s*i,height:e.height*s*i};return this.gl.FL(h.x,h.y,h.width,h.height),this.nG.forEach((i=>{i.getVisible()&&(this.gl.wL(i.bG),1!==t&&this.gl.Np(i.Lp),(1!==t||i.getMouseInteractions())&&i.YB(t))})),this.gl.wL("disabled"),this.gl.Np(!1),this.gl.kL(!1),this}setCameraLocation(t){return this.DG.x===t.x&&this.DG.y===t.y&&this.DG.z===t.z||(this.yW=!0),super.setCameraLocation(t),this}setCameraDirection(t){return this.fW.x===t.x&&this.fW.y===t.y&&this.fW.z===t.z||(this.yW=!0),super.setCameraDirection(t),this}Pt(){super.Pt(),this.$s.$o(this.pW),this.Jt.Bt(this.SW)}iS(t){const i=this.DR.dG();return this.oG(new Qb(this,this.aG,[],i,this.DR.gG(i),t))}Gy(t){const i=this.DR.dG();return this.oG(new Kb(this,this.aG,t,i,this.DR.gG(i)))}Xp(){const t=this.DR.dG();return this.oG(new Ub(this,this.aG,[],t,this.DR.gG(t)))}lm(){const t=this.DR.dG();return this.oG(new Yb(this,this.aG,[],t,this.DR.gG(t)))}HS(t){const i=this.DR.dG();return this.oG(new ix(this,this.aG,[],t,i,this.DR.gG(i)))}KS(t){const i=this.DR.dG();return this.oG(new sx(this,this.aG,[],t,i,this.DR.gG(i)))}}const rx=(t,i,s,e,h)=>{const{range:r}=s,n={row:{...r.row},column:{...r.column}};if(n.row.end+=1,n.column.end+=1,i){n.row.end+=1,n.column.end+=1;const i=Bh(t,n),[r,o,a,l,u]=e.pixelated(i.sliced,i.rows*i.columns,h);s.vbo=r,s.ibo=o,s.length=a,s.lengthWireframe=l,s.boundary=u}else{const i=Bh(t,n),[r,o,a,l,u]=e.nonPixelated(i.sliced,i.rows*i.columns,h);s.vbo=r,s.ibo=o,s.length=a,s.lengthWireframe=l,s.boundary=u}},nx={pixelated:(t,i)=>{const s=t.length,e=i/s,r=s-1,n=e-1,o=r*n*6,l=Array(r*n*4*2),u=Array(o),c=a(h(Dr,Dr),h(Br,Br));let f=0,d=1,g=2,m=3,y=0,p=0;for(let i=0;i<s;i+=1)for(let s=0;s<e;s+=1){const e=t[i][s];if(c.min.x=Math.min(c.min.x,e.x),c.min.y=Math.min(c.min.y,e.y),c.max.x=Math.max(c.max.x,e.x),c.max.y=Math.max(c.max.y,e.y),i<r&&s<n){const e=t[i][s],h=t[i+1][s],r=t[i][s+1],n=t[i+1][s+1];l[y+0]=e.x,l[y+1]=e.y,l[y+2]=h.x,l[y+3]=h.y,l[y+4]=r.x,l[y+5]=r.y,l[y+6]=n.x,l[y+7]=n.y,y+=8,u[p+0]=f,u[p+1]=d,u[p+2]=g,p+=3,u[p+0]=g,u[p+1]=m,u[p+2]=d,p+=3,f+=4,d+=4,g+=4,m+=4}}const S=u.length;for(let t=0;t<n;t+=1){const i=4*(0*n+t);u[p+0]=i+0,u[p+1]=i+2,p+=2}for(let t=0;t<r;t+=1){const i=4*(t*n+(n-1));u[p+0]=i+2,u[p+1]=i+3,p+=2}const v=u.length;return[l,new Uint16Array(u),S,v,c]},nonPixelated:(t,i)=>{const s=t.length,e=i/s,r=s-1,n=e-1,o=Array(2*i),l=Array(r*n*6),u=a(h(Dr,Dr),h(Br,Br));let c=0;for(let i=0;i<s;i+=1)for(let s=0;s<e;s+=1){const e=t[i][s];o[c+0]=e.x,o[c+1]=e.y,c+=2,u.min.x=Math.min(u.min.x,e.x),u.min.y=Math.min(u.min.y,e.y),u.max.x=Math.max(u.max.x,e.x),u.max.y=Math.max(u.max.y,e.y)}let f=0;for(let t=0;t<r;t+=1)for(let i=0;i<n;i+=1)l[f+0]=t*e+i,l[f+1]=t*e+i+1,l[f+2]=(t+1)*e+i,f+=3,l[f+0]=t*e+i+1,l[f+1]=(t+1)*e+i+1,l[f+2]=(t+1)*e+i,f+=3;const d=l.length;for(let t=0;t<r;t+=1){const i=0,s=n-1;l[f+0]=t*e+i,l[f+1]=(t+1)*e+i,l[f+2]=t*e+s+1,l[f+3]=(t+1)*e+s+1,f+=4}const g=l.length;return[o,new Uint16Array(l),d,g,u]},verticesPerPixelatedCell:4},ox=(t,i,s,e)=>{const{range:h}=s,r={row:{...h.row},column:{...h.column}};r.row.end+=1,r.column.end+=1;const n=Bh(t,r);s.intensities=i?((t,i,s)=>{const e=t.length,h=i/e,r=new Float32Array(i*s);for(let i=0,n=0;i<e;i+=1)for(let e=0;e<h;e+=1){const{intensity:h}=t[i][e];for(let t=0;t<s;t+=1)r[n]=h,n+=1}return r})(n.sliced,n.rows*n.columns,e.verticesPerPixelatedCell):((t,i)=>{const s=new Float32Array(i),e=t.length,h=i/e;for(let i=0,r=0;i<e;i+=1)for(let e=0;e<h;e+=1)s[r]=t[i][e].intensity,r+=1;return s})(n.sliced,n.rows*n.columns)},ax=(t,i,s,e,h)=>{const{range:r}=e,n={row:{...r.row},column:{...r.column}};n.row.end+=1,n.column.end+=1;const o=Bh(t,n);e.colors=s?((t,i,s,e)=>{const h=t.length,r=i/h,n=new Float32Array(4*i*e);for(let i=0,o=0;i<h;i+=1)for(let h=0;h<r;h+=1){const{color:r}=t[i][h];for(let t=0;t<e;t+=1)r?(n[o+0]=r.r,n[o+1]=r.g,n[o+2]=r.b,n[o+3]=r.a,o+=4):(n[o+0]=s.r,n[o+1]=s.g,n[o+2]=s.b,n[o+3]=s.a,o+=4)}return n})(o.sliced,o.rows*o.columns,i,h.verticesPerPixelatedCell):((t,i,s)=>{const e=new Float32Array(4*i),h=t.length,r=i/h;for(let i=0,n=0;i<h;i+=1)for(let h=0;h<r;h+=1){const{color:r}=t[i][h];r?(e[n+0]=r.r,e[n+1]=r.g,e[n+2]=r.b,e[n+3]=r.a,n+=4):(e[n+0]=s.r,e[n+1]=s.g,e[n+2]=s.b,e[n+3]=s.a,n+=4)}return e})(o.sliced,o.rows*o.columns,i)};class lx extends pl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.AW="grid",this.HO=new ov,this.wW=[],this.DR=t,this.BR=i,this.GR=r,this.WR=n,this.XB=t.OR()}le(){const t=this.va(),i=this.Ko.M();if(this.ba()&&this.nc&&this.hc){const s=this.XB,e=this.Qe;this.HO.HL(this.Jt);const h=this.Jt.rs()||t;this.y_&&!h||(this.y_=this.Jt.os());const r=this.$u(),n=t||this.Gu||r;if(t||n){if(r){const{y:t,x:i}=this.Ru.M(),s=this.Wu?101:201;this.kW=((t,i,s=200)=>{const e=s-1;t<=1&&(t+=1),i<=1&&(i+=1);const h=Math.ceil((t-1)/e),r=Math.ceil((i-1)/e),n=Array.from(Array(h)).map((()=>Array(r)));for(let s=0,o=0,a=0,l=t-1;s<h;s+=1){const t=Math.min(e,l);l-=t,a+=t;for(let t=0,h=0,l=0,u=i-1;t<r;t+=1){const i=Math.min(e,u);u-=i,l+=i,n[s][t]={row:{start:o,end:a},column:{start:h,end:l}},h=l}o=a}return{tiles:n,tilesCount:{x:r,y:h}}})(t,i,s),this.TW=(({tiles:t,tilesCount:{x:i,y:s}})=>{const e=Array(s*i);for(let h=0,r=0;h<s;h+=1)for(let s=0;s<i;s+=1)e[r]={range:t[h][s]},r+=1;return e})(this.kW),this.FW(),this.wW=this.TW.map((()=>({vbo:void 0,ibo:void 0,colors:void 0,intensities:void 0,length:0}))),this.Ru.o=!1,this.zu.o=!1}const t=this.TW,i=this.wW,e=this.hc;if(n){this.al=Or;for(const i of t)rx(e,this.Wu,i,nx,void 0);let h=0;for(const e of i){e.vbo&&s.UL(e.vbo),e.ibo&&s.UL(e.ibo);const i=t[h];h+=1,e.vbo=s.PL(i.vbo),e.ibo=s.gE(i.ibo),e.length=i.length,e.lengthWireframe=i.lengthWireframe,this.al=Kr(this.al,i.boundary)}this.Gu=!1}}if(this.pa()){!ze(e)&&this.Jz&&(this.DR.kz(this.Jz),this.Jz=void 0),this.jO=e===Ie?void 0:s.BL(sv["2D"],sv.VertexLocation({translation:"grid"===this.AW?{dataType:"uniform",sizeUnit:"axis"}:void 0,axisWorldTranslation:yS(this.Jt),normalSource:void 0}),Oe(e)?sv.Color({dataType:"uniform"}):Ee(e)?sv.Color({dataType:"attribute"}):ze(e)?sv.Color({dataType:["lookup",e.getLookUpProperty()]}):th(e)||eh(e)?sv.Color({dataType:["gradient",e]}):void 0);const t=this.Hu;Oe(t)?this.IW=s.BL(sv["2D"],sv.Color({dataType:"uniform"}),sv.VertexLocation({translation:"grid"===this.AW?{dataType:"uniform",sizeUnit:"axis"}:void 0,axisWorldTranslation:yS(this.Jt),normalSource:void 0})):this.IW=void 0,this.xa(e),this.cc=this.Hu}const o=this.TW,a=this.wW,l=this.nc;if(ze(e)&&e.lut.isValid){if(this.Nu){for(const t of o)ox(l,this.Wu,t,nx);let t=0;for(const i of a){i&&i.intensities&&s.UL(i.intensities);const e=o[t];t+=1,i.intensities=s.mE(e.intensities)}this.Nu=!1}const t=e.getPalette();this.Jz=this.DR.wz(t,this.Jz),this.PW=t}else if(Ee(e)&&(this.DW&&s.KL(this.DW),this.Vu)){for(const t of o)ax(l,e.color,this.Wu,t,nx);let t=0;for(const i of a){i.colors&&s.UL(i.colors);const e=o[t];t+=1,i.colors=s.mE(e.colors)}this.Vu=!1}th(e)?this.ZR=fv(this.aa(),this.Jt,e.getPosition(),e.getExtent(),e.getShape(),this.XB.zO()):eh(e)?this.KR=dv(this.aa(),this.Jt,e.getAngle(!0),this.XB.zO()):(this.ZR=void 0,this.KR=void 0),this.oz=i?this.oz||this.XB.BL(sv["2D"],sv.MousePicking,sv.VertexLocation({translation:"grid"===this.AW?{dataType:"uniform",sizeUnit:"axis"}:void 0,axisWorldTranslation:yS(this.Jt),normalSource:void 0})):void 0}return this}YB(t){const i=this.nc&&this.hc;if(this.ba()&&i){const i=1===t?this.oz:this.jO;if(i){const s=this.Qe,e=Oe(s)&&s,h=ze(s)&&s,r=Ee(s)&&s,n=th(s)&&s,o=eh(s)&&s;this.XB.OL(i,((s,a,l)=>{let u=!1;this.XB.BO(i).EL(s("uScale"),this.HO.NL()).EL(s("uDisp"),this.HO.GL()).zL(s("uIsHighlighted"),1===t||2===t?0:this.ta).VL(s("uHighlightColorOffset"),this.ha).zL(s("uRenderEffectMask"),2===t?1:0),"grid"===this.AW&&this.XB.EL(s("uTranslationAxis"),[this.nt.x,this.nt.y]),1===t?this.XB.VL(s("uColor"),this.WR):e?this.XB.VL(s("uColor"),e.getColor()):h&&h.lut.isValid&&this.Jz?this.XB.fR(l,h.lut,this.Jz,0):n?this.XB.ZE(l,this.ZR,n):o&&this.XB.KE(l,this.KR,o);for(const{vbo:i,ibo:s,colors:e,intensities:n,length:o}of this.wW)this.XB.yE(a("aPos"),i).ME(s),1!==t&&(h&&"value"===h.getLookUpProperty()&&this.XB.xE(a("aLookupValue"),n),r&&this.XB.bE(a("aColor"),e)),this.XB._E(o),u=!0;return u}))}const s=1===t?void 0:this.IW;if(s){const i=this.Hu,e=Oe(i)&&i;this.XB.OL(s,((i,h,r)=>{let n=!1;this.XB.BO(s).EL(i("uScale"),this.HO.NL()).EL(i("uDisp"),this.HO.GL()).zL(i("uIsHighlighted"),1===t||2===t?0:this.ta).VL(i("uHighlightColorOffset"),this.ha).zL(i("uRenderEffectMask"),2===t?1:0),"grid"===this.AW&&this.XB.EL(i("uTranslationAxis"),[this.nt.x,this.nt.y]),e&&this.XB.VL(i("uColor"),e.getColor());for(const{vbo:t,ibo:i,lengthWireframe:s}of this.wW)this.XB.yE(h("aPos"),t).ME(i)._E(s,this.XB.gl.LINES),n=!0;return n}))}}return this}ER(t){return this.GR===t&&{}}BW(t,i){if(this.Ko.M()&&this.al&&this.hc){const r="grid"===this.AW?this.nt:{x:0,y:0},n=ln(uh({x:t,y:i},this.$s.Jt,this.Jt),r);if(!(s=n,e=this.al.min,h=this.al.max,s.x>h.x||s.y>h.y||s.x<e.x||s.y<e.y||this.Qe===Ie))for(let t=0;t<this.hc.length-1;t+=1)for(let i=0;i<this.hc[t].length-1;i+=1){const s=this.hc[t][i],e=this.hc[t][i+1],h=this.hc[t+1][i],r=this.hc[t+1][i+1];if(tn(n,s,e,h,r)&&(Jr(n,s,e,h)||Jr(n,e,h,r)))return!0}}var s,e,h;return!1}fb(t){const i="grid"===this.AW?this.nt:{x:0,y:0},s=t;let h=[0,0],r=e(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);const n=this.hc,o=this.nc,a=this.Wu;let l=0;if(a&&(l=-1),n&&o){for(let t=0;t<n.length+l;t+=1)for(let e=0;e<n[t].length+l;e+=1)if(a){const o=n[t][e],a=n[t][e+1],l=n[t+1][e],u=n[t+1][e+1],c=an(Qr(o,a,l,u),i);Math.hypot(c.x-s.x,c.y-s.y)<Math.hypot(r.x-s.x,r.y-s.y)&&(h=[t,e],r=c)}else Math.hypot(n[t][e].x+i.x-s.x,n[t][e].y+i.y-s.y)<Math.hypot(n[h[0]][h[1]].x+i.x-s.x,n[h[0]][h[1]].y+i.y-s.y)&&(h=[t,e]);if(h){o[h[0]]||(h[0]=o.length-1),o[h[0]][h[1]]||(h[1]=o[h[0]].length-1);let t={x:0,y:0};const s=o[h[0]][h[1]].intensity;return a?t={x:r.x,y:r.y}:(t.x=n[h[0]][h[1]].x+i.x,t.y=n[h[0]][h[1]].y+i.y),[t,s]}}}Lx(t){const i=t,s=this.hc,h=this.nc,r=this.Wu;{const t=[],h=uh(i,this.Jt,this.$s.Jt);if(s&&!this.BW(h.x,h.y)){for(let i=0;i<s.length-1;i+=1)t.push([s[i][0],s[i+1][0]]),t.push([s[i][s[i].length-1],s[i+1][s[i].length-1]]);for(let i=0;i<s[0].length-1;i+=1)t.push([s[0][i],s[0][i+1]]),t.push([s[s[0].length-1][i],s[s[0].length-1][i+1]]);let h=Number.MAX_SAFE_INTEGER,r=e(0,0);for(let s=0;s<t.length;s+=1){const e=jr(i,t[s][0],t[s][1]);e[0]<h&&(h=e[0],r=e[1])}i.x=r.x,i.y=r.y}}let n=[0,0];if(s&&h){for(let i=0;i<s.length+-1;i+=1)for(let e=0;e<s[i].length+-1;e+=1){const h=s[i][e],r=s[i][e+1],o=s[i+1][e],a=s[i+1][e+1];(Jr(t,h,r,o)||Jr(t,r,o,a))&&(n=[i,e])}if(n){let t;h[n[0]]||(n[0]=h.length-1),h[n[0]][n[1]]||(n[1]=h[n[0]].length-1);let e={x:0,y:0};if(e=i,r)t=h[n[0]][n[1]].intensity;else{const e={point:s[n[0]][n[1]],value:h[n[0]][n[1]].intensity},r={point:s[n[0]+1][n[1]],value:h[n[0]+1][n[1]].intensity},o={point:s[n[0]][n[1]+1],value:h[n[0]][n[1]+1].intensity},a={point:s[n[0]+1][n[1]+1],value:h[n[0]+1][n[1]+1].intensity};t=Pu(i,e,r,o,a)}return[e,t]}}}FW(){const t=this.XB;if(this.wW.length>0){for(const i of this.wW){const{vbo:s,ibo:e,colors:h,intensities:r}=i||{};s&&(t.UL(s),i.vbo=void 0),e&&(t.UL(e),i.ibo=void 0),h&&(t.UL(h),i.colors=void 0),r&&(t.UL(r),i.intensities=void 0)}this.wW.length=0}}_O(){return this.FW(),this.DW&&(this.XB.KL(this.DW),this.DW=void 0),this.Jz&&(this.DR.kz(this.Jz),this.Jz=void 0),this}Ju(t,i){return this.AW="mesh",super.Ju(t,i)}oi(){return"grid"===this.AW?this.al.max.x+this.nt.x:this.al.max.x}ni(){return"grid"===this.AW?this.al.min.x+this.nt.x:this.al.min.x}li(){return"grid"===this.AW?this.al.max.y+this.nt.y:this.al.max.y}ai(){return"grid"===this.AW?this.al.min.y+this.nt.y:this.al.min.y}Rl(){return 0}zl(){return 0}}class ux extends Ca{constructor(t,i,s=rv){var e,r,n;super(t,i),this.Et=h(1,1),this.OW=!1,this.LW=0,this.EW=!0,this.RW=0,this.WG=8388608,this.te=(t=!1)=>(this.fs||this.zW()||(t&&(this.OW=!0),void 0===this.Mn&&(this.Mn=Mh.requestAnimationFrame(this.VW))),this),this.VW=t=>{if(this.fs)return;const i=t-this.LW;if(i>=this.vo||-1===this.vo){this.LW=t,this.OW=!1;const s=i>50?1e3/60:i;this._n&&this._n(s),this.Mn=void 0,-1!==this.vo&&(this.Mn=this.OW?Mh.requestAnimationFrame(this.VW):void 0),this.js.le(i),this.Ln(),this.En(),this.An&&this.An()}else this.Mn=Mh.requestAnimationFrame(this.VW)},this.NW=new Map,this.OR=()=>this.XB,this.GW=()=>{var t,i,s;const e=this.eo(),h=this.EW,r=Mh.performance.now(),n=null===(t=this.WW)||void 0===t?void 0:t.HW.reduce(((t,i)=>t?i.UW&&t.UW&&i.UW>t.UW?i:t:i),void 0),o=null==n?void 0:n.UW,a=null===(i=this.Zn)||void 0===i?void 0:i.timeStamp,l=null===(s=this.No)||void 0===s?void 0:s.timeStamp;return h?(this.te(!0),!1):void 0===n||(void 0===n||!n.jW)&&(void 0!==l&&void 0!==o&&l>o||(void 0!==o&&void 0===e?r-o>=1e3:!(void 0!==o&&void 0!==a&&r-a>=2e3)||r-o>=1e3))},this.$W=()=>{var t,i;this.YW=void 0;const s=null===(i=null===(t=this.WW)||void 0===t?void 0:t.XW)||void 0===i?void 0:i.ZW;void 0===s||s>=this.RW||this.KW()},this.En=()=>{const t=this.XB.gl,i=Mh.performance.now(),s=this.Et,e=s.x>0&&s.y>0;if(this.Dn.o&&this.XB.FE(this.Dn.M()),this.XB.Al(),t.resize&&e&&t.resize(s.x*this.XB.zO(),s.y*this.XB.zO()),this.XB.TL(0,0,s.x*this.XB.zO(),s.y*this.XB.zO()),this.qW.width=s.x*this.XB.zO(),this.qW.height=s.y*this.XB.zO(),e)for(const t of this.vn.values())t.YB(0,1);return this.ro.yo&&e&&(this.YW&&(Mh.clearTimeout(this.YW),this.YW=void 0),this.GW()?this.KW():this.YW=Mh.setTimeout(this.$W,500)),this.Rt(),this.pn(),this.Gn&&this.Nn(this.Gn),this.EW=!1,this.RW=i,this},this.Ln=()=>{const t=this.Et;if(0===t.x||0===t.y)return this;this.ko.Gt(t);for(const t of this.vn.values())t.le();return this.Rt(),this},this.JW=0,this.QW=1,this.qW=Mh.document.createElement("canvas");const o={preserveDrawingBuffer:!0,antialias:t?t.antialias:void 0,alpha:!0,lineAntialias:!t||(!0===t.lineAntiAlias||!1===t.lineAntiAlias?t.lineAntiAlias:!1!==t.antialias)};let a;if("webgl1"!==(null===(e=null==t?void 0:t.webgl)||void 0===e?void 0:e.version)){const t=this.qW.getContext("webgl2",o);t&&(a=new s(this,this.ro,{type:"webgl2",ctx:t,antialias:o.antialias,lineAntialias:o.lineAntialias},this.Rs.isDark))}if(!a&&"webgl2"!==(null===(r=null==t?void 0:t.webgl)||void 0===r?void 0:r.version)){const t=this.qW.getContext("webgl",o)||this.qW.getContext("experimental-webgl",o);a=new s(this,this.ro,{type:"webgl1",ctx:t,antialias:o.antialias,lineAntialias:o.lineAntialias},this.Rs.isDark)}if(!a)throw new yh("No WebGL context available."+((null===(n=null==t?void 0:t.webgl)||void 0===n?void 0:n.version)?`\nSelected explicit target: ${t.webgl.version}`:""));this.XB=a,this.zE=dh(this.XB.gl);const l=this.XB.iE;if(l.length>0){const t=Mh.document.createElement("div");t.innerText="LightningChart JS: Some features might not work properly, due to missing WebGL features.",t.style.cssText="position:absolute;top:0;background:red;width:100%;padding:10px;text-align:center;color:white;z-index:1;";const i=Mh.document.createElement("button");i.innerText="X",i.addEventListener("click",(()=>{t.parentElement&&t.parentElement.removeChild(t)})),this.un.appendChild(t),t.appendChild(i),!1!==this.ro.do&&Mh.console.warn("LightningChart JS - Following WebGL extensions could not be loaded:",l.join(", "))}let u=1;if(t&&t.devicePixelRatio)u=!0===t.devicePixelRatio?Mh.devicePixelRatio||1:t.devicePixelRatio||1;else{const t=Mh.document.head.querySelector('meta[name="viewport"]');t&&t.content.includes("width=device-width")&&(u=Mh.devicePixelRatio||1)}this.XB.jE(u),this.qW.style.position="absolute",this.qW.style.top="0",this.qW.style.left="0",this.qW.style.right="0",this.qW.style.bottom="0",this.qW.style.width="100%",this.qW.style.height="100%",this.qW.style.boxSizing="content-box",this.un.appendChild(this.qW);const c=t?t.width:void 0,f=t?t.height:void 0;this._o=this.tH(c),this.wo=this.tH(f),this.iH(this._o,this.wo),this.YN=this.zF("engine offscreen",1e6),this.sH=this.zF("engine bg",0);const d="function"==typeof this.Rs.lcjsBackgroundFillStyle?this.Rs.lcjsBackgroundFillStyle(this.ro.Ae):this.Rs.lcjsBackgroundFillStyle;this.ko=this.sH.hh(this.Jt).eh(d).sh(this.Rs.lcjsBackgroundStrokeStyle).setMouseInteractions(!1).oh({x:0,y:0});const g=this.zF("engine effects",200001).mG(this.Rs.effect);this.Ns=g,this.In(),this.pn(),this.Tm=xa(this),this.Fm={Rs:this.Rs,js:this.js,Jt:this.Jt,te:t=>this.te(t),eo:()=>this.eo(),vD:t=>this.vD(t),ro:this.ro,ho:t=>this.ho(t),Ns:this.Ns,Xo:t=>this.Xo(t),Zo:t=>this.Zo(t),sB:{iB:(t,i,s)=>this.XB.cr(i.family).LO(t,i,s)}};const m=()=>{this.Pt()};Mh.addEventListener("unload",m),this.wn.push((()=>{Mh.removeEventListener("unload",m)}))}get eH(){return this.vn}Sn(t,i){let s=this.NW.get(t);if(!s){const i=this.XB.qE(t),e=new Set,h=t=>{e.add(t)},r=s=>{e.delete(s)&&0===e.size&&(i.unbindResources(),this.NW.delete(t))},n=[];s={imageTexture:i,instances:e,handleNewInstance:h,handleInstanceDisposed:r,sharedEngineReference:{bD:()=>i.eL,xD:t=>{i.eL?t():n.push(t)}}},this.NW.set(t,s),i.BO(this),i.uL((()=>{n.forEach((t=>{t()})),n.length=0}))}const e=new Ku(t,s.handleNewInstance,s.handleInstanceDisposed,i);return s.handleNewInstance(e),e}vD(t){const i=Array.from(this.NW.values()).find((i=>i.instances.has(t)));if(!i)throw br(0,(()=>new Error("LightningChart JS error, attempted to use Icon that is disposed. Please check that you are not disposing an Icon that is still in use, or attempting to use a previously disposed Icon!")));return i.sharedEngineReference}Wn(t,i){var s;const e=null===(s=this.WW)||void 0===s?void 0:s.XW;if(!e)return;const h=this.lh(i.x,i.y),r=Math.round(h.x*this.XB.zO()),n=Math.round(h.y*this.XB.zO());return[[-1,-1],[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[0,0]].map((t=>this.hH(e,r+t[0]/e.rH,n+t[1]/e.rH))).reduce(((t,i)=>{if(void 0===i)return t||void 0;const s=1e6*i.layerIndex+i.entityIndex;return!t||s>t.zIndexForComparison?{zIndexForComparison:s,entity:i.entity,collectionMember:i.collectionMember}:t}),void 0)}hH(t,i,s){const e=Math.round(i*t.rH),h=Math.round(s*t.rH);if(e<0||e>=t.Et.x||h<0||h>=t.Et.y)return;const r=4*(e+h*t.Et.x),n=t.nH[r+0],o=t.nH[r+1],a=t.nH[r+2],l=t.nH[r+3];return void 0!==n&&void 0!==o&&void 0!==a&&void 0!==l?this.oH(n,o,a,l):void 0}gn(t,i){return(t=>{const i=t.split(",")[0].split(":")[1].split(";")[0],s=Mh.atob(t.split(",")[1]),e=new Uint8Array(s.length);for(let t=0;t<s.length;t+=1)e[t]=s.charCodeAt(t);return new Mh.Blob([e.buffer],{type:i})})(this.qW.toDataURL(t,i))}mn(t,i,s=!1){this.In(e(Math.round(t),Math.round(i))),this.On();const h=this.XB.gl.drawingBufferWidth,r=this.XB.gl.drawingBufferHeight,n=new Uint8Array(h*r*4);if(this.XB.gl.readPixels(0,0,h,r,this.XB.gl.RGBA,this.XB.gl.UNSIGNED_BYTE,n),!s){const t=r/2|0,i=4*h,s=new Uint8Array(4*h);for(let e=0;e<t;e+=1){const t=e*i,h=(r-e-1)*i;s.set(n.subarray(t,t+i)),n.copyWithin(t,h,h+i),n.set(s,h)}}return this.xn={x:0,y:i},n}kB(t){return void 0!==this._o?this._o[0]=t:this._o=[t,void 0],this.un.style.minWidth=`${this._o[0]}px`,this.In(),this}TB(t){return void 0!==this._o?this._o[1]=t:this._o=[void 0,t],this.un.style.maxWidth=`${this._o[1]}px`,this.In(),this}IB(t){return void 0!==this.wo?this.wo[0]=t:this.wo=[t,void 0],this.un.style.minHeight=`${this.wo[0]}px`,this.In(),this}DB(t){return void 0!==this.wo?this.wo[1]=t:this.wo=[void 0,t],this.un.style.maxHeight=`${this.wo[1]}px`,this.In(),this}iH(t,i){return this._o=t,this.wo=i,this.un.style.minWidth=`${this._o[0]}px`,this.un.style.maxWidth=`${this._o[1]}px`,this.un.style.minHeight=`${this.wo[0]}px`,this.un.style.maxHeight=`${this.wo[1]}px`,this.In(),this}zF(t,i=this.Po()){const s=this.Io(i);if(s){if(br(0,(()=>{})),!(s instanceof Lb))throw new Error("Unexpected Engine Layer error");return s}return this.Rn(new Lb(this,i,t))}GF(t,i,s){const e=this.Io(i);if(e){if(br(0,(()=>{})),!(e instanceof hx))throw new Error("Unexpected Engine Layer error");return e}return this.Rn(new hx(this,i,t,s))}Ci(){return this.Et}tH(t){return t instanceof Array||(t=[t,t]),t}Fn(){return this.qW}zW(){const t=this.XB.gl;return t&&"resize"in t}KW(){var t;const i=this.XB.gl,s=Mh.performance.now(),e=this.eo(),h=this.ro.mo,r={x:Math.ceil(this.Et.x*this.XB.zO()*h),y:Math.ceil(this.Et.y*this.XB.zO()*h)};this.WW||(this.WW={rH:h,aH:r,HW:[],XW:void 0});let n=this.WW.HW.find((t=>!t.jW)),o=!1;n||(o=!0,n={jW:!1,Et:r,uR:i.createTexture(),lH:this.XB.YL(),uH:this.XB.XL(),cH:new Uint8Array,UW:void 0},this.WW.HW.push(n));const a=n;(o||a.Et.x!==r.x||a.Et.y!==r.y)&&(i.bindTexture(i.TEXTURE_2D,a.uR),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,r.x,r.y,0,i.RGBA,i.UNSIGNED_BYTE,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.bindFramebuffer(i.FRAMEBUFFER,a.lH),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,a.uR,0),i.bindRenderbuffer(i.RENDERBUFFER,a.uH),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,r.x,r.y),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,a.uH),a.cH=new Uint8Array(r.x*r.y*4),a.Et=r),a.jW=!0,a.UW=s,i.bindFramebuffer(i.FRAMEBUFFER,a.lH),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.clear(i.DEPTH_BUFFER_BIT),i.disable(i.BLEND),i.resize&&i.resize(r.x,r.y),this.XB.TL(0,0,r.x,r.y);for(const t of this.vn.values())t.YB(1,h);i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindTexture(i.TEXTURE_2D,null),i.bindRenderbuffer(i.RENDERBUFFER,null),i.enable(i.BLEND);const l=null===(t=this.XB.gl2)||void 0===t?void 0:t.ctx,u=()=>{if(this.WW){const t=this.WW.XW;if(t&&t.ZW>s)return;this.WW.XW={ZW:s,rH:h,Et:r,nH:a.cH,fH:e}}};l?this.XB.oR(l,a.lH,0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,a.cH).then((()=>{this.fs||(a.jW=!1,u())})).catch((t=>{this.fs||(a.jW=!1,Mh.console.warn("LightningChart JS mouse picking failed unexpectedly. This could mean that user interactions on charts are compromised.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact"))})):(this.XB.aR(a.lH,0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,a.cH),a.jW=!1,u())}In(t){const i=this.Et.x,s=this.Et.y,e=t||{x:this.un.offsetWidth,y:this.un.offsetHeight};0!==e.x&&0!==e.y&&(e.x===i&&e.y===s||(this.Et=e,this.Jt.x.Vt(0,e.x).Gt(e.x),this.Jt.y.Vt(0,e.y).Gt(e.y),this.At.emit("resize",[this.Et.x,this.Et.y])))}Pt(){super.Pt(),this.YW&&(Mh.clearTimeout(this.YW),this.YW=void 0),this.qW.width=1,this.qW.height=1,this.qW&&(this.un.removeChild(this.qW),this.qW=void 0,this.un=void 0),this.zE.ri(),Array.from(this.XB.JL.values()).forEach((t=>{t._O()})),Array.from(this.XB.QL.values()).forEach((t=>{t.unbindResources()})),this.XB.QL.clear(),this.XB.qL.sO(),this.XB.NE.Pt(),this.XB.UL(this.XB.GE),this.XB.UL(this.XB.WE),this.XB.UL(this.XB.HE),this.XB.OE.forEach(((t,i)=>{this.XB.gl.deleteBuffer(i)})),this.XB.OE.clear(),this.XB.sR&&(this.XB.UL(this.XB.sR.buffer),this.XB.sR=void 0),this.WW&&(this.WW.HW.forEach((t=>{this.XB.ZL(t.uH),this.XB.KL(t.lH),this.XB.AO(t.uR)})),this.WW=void 0),this.XB.PE.forEach((t=>this.XB.UL(t))),this.NW.clear(),this.XB.tR(),this.XB.gl=void 0}wz(t,i){if((null==i?void 0:i.lut)===t)return i;i&&this.zE.hi(i);const s=this.JW;this.JW+=1;const e=this.zE.si(t);if(e){const t={ea:s,lut:e.lut,texture:e.texture,textureHeight:e.textureHeight};return this.zE.ei(t),t}const h={x:1,y:this.XB.MO},r=h.y,n=ah.d2({scaleXYConstructor:Rn}).Gt(h);n.x.Vt(0,1),n.y.Vt(t.min,t.max);const o=new lx(this,this.YN,n,(()=>{}),[],-1,Me);o.eh(new Le({color:t.color})),t.interpolate?o.S({columns:2,rows:t.length,start:{x:0,y:t.min},end:{x:1,y:t.max},pixelate:!1}).Ju(((i,s,e)=>({x:e.x,y:t.steps[i].value}))).Ku((i=>t.steps[i].color)):o.S({columns:1,rows:t.length,start:{x:0,y:t.min},end:{x:1,y:t.max},pixelate:!0}).Ju(((i,s,e)=>({x:e.x,y:i<t.steps.length-1?t.steps[i].value:i===t.steps.length-1?t.steps[i].value-n.y.getPixelSize():t.steps[t.steps.length-1].value}))).Ku((i=>t.steps[i].color));const a=this.XB.$E(null,this.XB.gl.RGBA,!1,!t.interpolate,h,!1);this.XB.VE.YB((()=>{o.le(),o.YB(0)}),a,h,void 0,this.Dn.M()),o.dispose()._O();const l={ea:s,texture:a,textureHeight:r,lut:t};return this.zE.ei(l),l}kz(t){this.zE.hi(t)}dG(){const t=this.QW;return t>4294967295&&(console.warn("LightningChart JS picking ID overflow.\nThis is an unexpected error that could compromise user interactions on the chart.\nPlease report the issue to https://lightningchart.com/js-charts/docs/contact!"),this.QW=1),this.QW+=1,t}gG(t){let i=t;const s=Math.floor(i/16777216);i-=16777216*s;const e=Math.floor(i/65536);i-=65536*e;const h=Math.floor(i/256);return i-=256*h,Se(s,e,h,i)}oH(t,i,s,e){if(0===t&&0===i&&0===s&&0===e)return;const h=16777216*t+65536*i+256*s+e;for(const t of this.eH.values()){const i=t.fG(h);if(i)return{entity:i.entity,collectionMember:i.collectionMember,entityIndex:i.index,layerIndex:t.zn()}}}}var cx={exports:{}};!function(t,i){function s(t,i){if(!t)throw new Error(i||"Assertion failed")}function e(t,i){t.super_=i;var s=function(){};s.prototype=i.prototype,t.prototype=new s,t.prototype.constructor=t}function h(t,i,s){if(h.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==i&&"be"!==i||(s=i,i=10),this.lL(t||0,i||10,s||"be"))}var r;"object"==typeof t?t.exports=h:i.BN=h,h.BN=h,h.wordSize=26;try{r=(void 0).Buffer}catch(t){}function n(t,i,e){for(var h=0,r=Math.min(t.length,e),n=0,o=i;o<r;o++){var a,l=t.charCodeAt(o)-48;h<<=4,h|=a=l>=49&&l<=54?l-49+10:l>=17&&l<=22?l-17+10:l,n|=a}return s(!(240&n),"Invalid character in "+t),h}function o(t,i,e,h){for(var r=0,n=0,o=Math.min(t.length,e),a=i;a<o;a++){var l=t.charCodeAt(a)-48;r*=h,n=l>=49?l-49+10:l>=17?l-17+10:l,s(l>=0&&n<h,"Invalid character"),r+=n}return r}function a(t,i){t.words=i.words,t.length=i.length,t.negative=i.negative,t.red=i.red}if(h.isBN=function(t){return t instanceof h||null!==t&&"object"==typeof t&&t.constructor.wordSize===h.wordSize&&Array.isArray(t.words)},h.max=function(t,i){return t.cmp(i)>0?t:i},h.min=function(t,i){return t.cmp(i)<0?t:i},h.prototype.lL=function(t,i,e){if("number"==typeof t)return this.dH(t,i,e);if("object"==typeof t)return this.gH(t,i,e);"hex"===i&&(i=16),s(i===(0|i)&&i>=2&&i<=36);var h=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&h++,16===i?this.mH(t,h):this.yH(t,i,h),"-"===t[0]&&(this.negative=1),this.pH(),"le"===e&&this.gH(this.toArray(),i,e)},h.prototype.dH=function(t,i,e){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(s(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===e&&this.gH(this.toArray(),i,e)},h.prototype.gH=function(t,i,e){if(s("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var r,n,o=0;if("be"===e)for(h=t.length-1,r=0;h>=0;h-=3)n=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[r]|=n<<o&67108863,this.words[r+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);else if("le"===e)for(h=0,r=0;h<t.length;h+=3)n=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[r]|=n<<o&67108863,this.words[r+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);return this.pH()},h.prototype.mH=function(t,i){this.length=Math.ceil((t.length-i)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var e,h,r=0;for(s=t.length-6,e=0;s>=i;s-=6)h=n(t,s,s+6),this.words[e]|=h<<r&67108863,this.words[e+1]|=h>>>26-r&4194303,(r+=24)>=26&&(r-=26,e++);s+6!==i&&(h=n(t,i,s+6),this.words[e]|=h<<r&67108863,this.words[e+1]|=h>>>26-r&4194303),this.pH()},h.prototype.yH=function(t,i,s){this.words=[0],this.length=1;for(var e=0,h=1;h<=67108863;h*=i)e++;e--,h=h/i|0;for(var r=t.length-s,n=r%e,a=Math.min(r,r-n)+s,l=0,u=s;u<a;u+=e)l=o(t,u,u+e,i),this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this.SH(l);if(0!==n){var c=1;for(l=o(t,u,t.length,i),u=0;u<n;u++)c*=i;this.imuln(c),this.words[0]+l<67108864?this.words[0]+=l:this.SH(l)}},h.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},h.prototype.vH=function(t){a(t,this)},h.prototype.clone=function(){var t=new h(null);return this.copy(t),t},h.prototype.bH=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},h.prototype.pH=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this.xH()},h.prototype.xH=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{h.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){h.prototype.inspect=l}else h.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,i,s){s.negative=i.negative^t.negative;var e=t.length+i.length|0;s.length=e,e=e-1|0;var h=0|t.words[0],r=0|i.words[0],n=h*r,o=67108863&n,a=n/67108864|0;s.words[0]=o;for(var l=1;l<e;l++){for(var u=a>>>26,c=67108863&a,f=Math.min(l,i.length-1),d=Math.max(0,l-t.length+1);d<=f;d++){var g=l-d|0;u+=(n=(h=0|t.words[g])*(r=0|i.words[d])+c)/67108864|0,c=67108863&n}s.words[l]=0|c,a=0|u}return 0!==a?s.words[l]=0|a:s.length--,s.pH()}h.prototype.toString=function(t,i){var e;if(i=0|i||1,16===(t=t||10)||"hex"===t){e="";for(var h=0,r=0,n=0;n<this.length;n++){var o=this.words[n],a=(16777215&(o<<h|r)).toString(16);e=0!=(r=o>>>24-h&16777215)||n!==this.length-1?u[6-a.length]+a+e:a+e,(h+=2)>=26&&(h-=26,n--)}for(0!==r&&(e=r.toString(16)+e);e.length%i!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}if(t===(0|t)&&t>=2&&t<=36){var l=c[t],d=f[t];e="";var g=this.clone();for(g.negative=0;!g.isZero();){var m=g.modrn(d).toString(t);e=(g=g.idivn(d)).isZero()?m+e:u[l-m.length]+m+e}for(this.isZero()&&(e="0"+e);e.length%i!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}s(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},h.prototype.toJSON=function(){return this.toString(16,2)},r&&(h.prototype.toBuffer=function(t,i){return this.toArrayLike(r,t,i)}),h.prototype.toArray=function(t,i){return this.toArrayLike(Array,t,i)},h.prototype.toArrayLike=function(t,i,e){this.pH();var h=this.byteLength(),r=e||Math.max(1,h);s(h<=r,"byte array longer than desired length"),s(r>0,"Requested array length <= 0");var n=function(t,i){return t.allocUnsafe?t.allocUnsafe(i):new t(i)}(t,r);return this["_toArrayLike"+("le"===i?"LE":"BE")](n,h),n},h.prototype.MH=function(t,i){for(var s=0,e=0,h=0,r=0;h<this.length;h++){var n=this.words[h]<<r|e;t[s++]=255&n,s<t.length&&(t[s++]=n>>8&255),s<t.length&&(t[s++]=n>>16&255),6===r?(s<t.length&&(t[s++]=n>>24&255),e=0,r=0):(e=n>>>24,r+=2)}if(s<t.length)for(t[s++]=e;s<t.length;)t[s++]=0},h.prototype._H=function(t,i){for(var s=t.length-1,e=0,h=0,r=0;h<this.length;h++){var n=this.words[h]<<r|e;t[s--]=255&n,s>=0&&(t[s--]=n>>8&255),s>=0&&(t[s--]=n>>16&255),6===r?(s>=0&&(t[s--]=n>>24&255),e=0,r=0):(e=n>>>24,r+=2)}if(s>=0)for(t[s--]=e;s>=0;)t[s--]=0},Math.clz32?h.prototype.AH=function(t){return 32-Math.clz32(t)}:h.prototype.AH=function(t){var i=t,s=0;return i>=4096&&(s+=13,i>>>=13),i>=64&&(s+=7,i>>>=7),i>=8&&(s+=4,i>>>=4),i>=2&&(s+=2,i>>>=2),s+i},h.prototype.wH=function(t){if(0===t)return 26;var i=t,s=0;return 0==(8191&i)&&(s+=13,i>>>=13),0==(127&i)&&(s+=7,i>>>=7),0==(15&i)&&(s+=4,i>>>=4),0==(3&i)&&(s+=2,i>>>=2),0==(1&i)&&s++,s},h.prototype.bitLength=function(){var t=this.words[this.length-1],i=this.AH(t);return 26*(this.length-1)+i},h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var s=this.wH(this.words[i]);if(t+=s,26!==s)break}return t},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},h.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return 0!==this.negative},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.pH()},h.prototype.ior=function(t){return s(0==(this.negative|t.negative)),this.iuor(t)},h.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},h.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},h.prototype.iuand=function(t){var i;i=this.length>t.length?t:this;for(var s=0;s<i.length;s++)this.words[s]=this.words[s]&t.words[s];return this.length=i.length,this.pH()},h.prototype.iand=function(t){return s(0==(this.negative|t.negative)),this.iuand(t)},h.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},h.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},h.prototype.iuxor=function(t){var i,s;this.length>t.length?(i=this,s=t):(i=t,s=this);for(var e=0;e<s.length;e++)this.words[e]=i.words[e]^s.words[e];if(this!==i)for(;e<i.length;e++)this.words[e]=i.words[e];return this.length=i.length,this.pH()},h.prototype.ixor=function(t){return s(0==(this.negative|t.negative)),this.iuxor(t)},h.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},h.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},h.prototype.inotn=function(t){s("number"==typeof t&&t>=0);var i=0|Math.ceil(t/26),e=t%26;this.bH(i),e>0&&i--;for(var h=0;h<i;h++)this.words[h]=67108863&~this.words[h];return e>0&&(this.words[h]=~this.words[h]&67108863>>26-e),this.pH()},h.prototype.notn=function(t){return this.clone().inotn(t)},h.prototype.setn=function(t,i){s("number"==typeof t&&t>=0);var e=t/26|0,h=t%26;return this.bH(e+1),this.words[e]=i?this.words[e]|1<<h:this.words[e]&~(1<<h),this.pH()},h.prototype.iadd=function(t){var i,s,e;if(0!==this.negative&&0===t.negative)return this.negative=0,i=this.isub(t),this.negative^=1,this.xH();if(0===this.negative&&0!==t.negative)return t.negative=0,i=this.isub(t),t.negative=1,i.xH();this.length>t.length?(s=this,e=t):(s=t,e=this);for(var h=0,r=0;r<e.length;r++)i=(0|s.words[r])+(0|e.words[r])+h,this.words[r]=67108863&i,h=i>>>26;for(;0!==h&&r<s.length;r++)i=(0|s.words[r])+h,this.words[r]=67108863&i,h=i>>>26;if(this.length=s.length,0!==h)this.words[this.length]=h,this.length++;else if(s!==this)for(;r<s.length;r++)this.words[r]=s.words[r];return this},h.prototype.add=function(t){var i;return 0!==t.negative&&0===this.negative?(t.negative=0,i=this.sub(t),t.negative^=1,i):0===t.negative&&0!==this.negative?(this.negative=0,i=t.sub(this),this.negative=1,i):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},h.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var i=this.iadd(t);return t.negative=1,i.xH()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this.xH();var s,e,h=this.cmp(t);if(0===h)return this.negative=0,this.length=1,this.words[0]=0,this;h>0?(s=this,e=t):(s=t,e=this);for(var r=0,n=0;n<e.length;n++)r=(i=(0|s.words[n])-(0|e.words[n])+r)>>26,this.words[n]=67108863&i;for(;0!==r&&n<s.length;n++)r=(i=(0|s.words[n])+r)>>26,this.words[n]=67108863&i;if(0===r&&n<s.length&&s!==this)for(;n<s.length;n++)this.words[n]=s.words[n];return this.length=Math.max(this.length,n),s!==this&&(this.negative=1),this.pH()},h.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,i,s){var e,h,r,n=t.words,o=i.words,a=s.words,l=0,u=0|n[0],c=8191&u,f=u>>>13,d=0|n[1],g=8191&d,m=d>>>13,y=0|n[2],p=8191&y,S=y>>>13,v=0|n[3],b=8191&v,x=v>>>13,M=0|n[4],_=8191&M,A=M>>>13,w=0|n[5],k=8191&w,C=w>>>13,T=0|n[6],F=8191&T,I=T>>>13,P=0|n[7],D=8191&P,B=P>>>13,O=0|n[8],L=8191&O,E=O>>>13,R=0|n[9],z=8191&R,V=R>>>13,N=0|o[0],G=8191&N,W=N>>>13,H=0|o[1],U=8191&H,j=H>>>13,$=0|o[2],Y=8191&$,X=$>>>13,Z=0|o[3],K=8191&Z,q=Z>>>13,J=0|o[4],Q=8191&J,tt=J>>>13,it=0|o[5],st=8191&it,et=it>>>13,ht=0|o[6],rt=8191&ht,nt=ht>>>13,ot=0|o[7],at=8191&ot,lt=ot>>>13,ut=0|o[8],ct=8191&ut,ft=ut>>>13,dt=0|o[9],gt=8191&dt,mt=dt>>>13;s.negative=t.negative^i.negative,s.length=19;var yt=(l+(e=Math.imul(c,G))|0)+((8191&(h=(h=Math.imul(c,W))+Math.imul(f,G)|0))<<13)|0;l=((r=Math.imul(f,W))+(h>>>13)|0)+(yt>>>26)|0,yt&=67108863,e=Math.imul(g,G),h=(h=Math.imul(g,W))+Math.imul(m,G)|0,r=Math.imul(m,W);var pt=(l+(e=e+Math.imul(c,U)|0)|0)+((8191&(h=(h=h+Math.imul(c,j)|0)+Math.imul(f,U)|0))<<13)|0;l=((r=r+Math.imul(f,j)|0)+(h>>>13)|0)+(pt>>>26)|0,pt&=67108863,e=Math.imul(p,G),h=(h=Math.imul(p,W))+Math.imul(S,G)|0,r=Math.imul(S,W),e=e+Math.imul(g,U)|0,h=(h=h+Math.imul(g,j)|0)+Math.imul(m,U)|0,r=r+Math.imul(m,j)|0;var St=(l+(e=e+Math.imul(c,Y)|0)|0)+((8191&(h=(h=h+Math.imul(c,X)|0)+Math.imul(f,Y)|0))<<13)|0;l=((r=r+Math.imul(f,X)|0)+(h>>>13)|0)+(St>>>26)|0,St&=67108863,e=Math.imul(b,G),h=(h=Math.imul(b,W))+Math.imul(x,G)|0,r=Math.imul(x,W),e=e+Math.imul(p,U)|0,h=(h=h+Math.imul(p,j)|0)+Math.imul(S,U)|0,r=r+Math.imul(S,j)|0,e=e+Math.imul(g,Y)|0,h=(h=h+Math.imul(g,X)|0)+Math.imul(m,Y)|0,r=r+Math.imul(m,X)|0;var vt=(l+(e=e+Math.imul(c,K)|0)|0)+((8191&(h=(h=h+Math.imul(c,q)|0)+Math.imul(f,K)|0))<<13)|0;l=((r=r+Math.imul(f,q)|0)+(h>>>13)|0)+(vt>>>26)|0,vt&=67108863,e=Math.imul(_,G),h=(h=Math.imul(_,W))+Math.imul(A,G)|0,r=Math.imul(A,W),e=e+Math.imul(b,U)|0,h=(h=h+Math.imul(b,j)|0)+Math.imul(x,U)|0,r=r+Math.imul(x,j)|0,e=e+Math.imul(p,Y)|0,h=(h=h+Math.imul(p,X)|0)+Math.imul(S,Y)|0,r=r+Math.imul(S,X)|0,e=e+Math.imul(g,K)|0,h=(h=h+Math.imul(g,q)|0)+Math.imul(m,K)|0,r=r+Math.imul(m,q)|0;var bt=(l+(e=e+Math.imul(c,Q)|0)|0)+((8191&(h=(h=h+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;l=((r=r+Math.imul(f,tt)|0)+(h>>>13)|0)+(bt>>>26)|0,bt&=67108863,e=Math.imul(k,G),h=(h=Math.imul(k,W))+Math.imul(C,G)|0,r=Math.imul(C,W),e=e+Math.imul(_,U)|0,h=(h=h+Math.imul(_,j)|0)+Math.imul(A,U)|0,r=r+Math.imul(A,j)|0,e=e+Math.imul(b,Y)|0,h=(h=h+Math.imul(b,X)|0)+Math.imul(x,Y)|0,r=r+Math.imul(x,X)|0,e=e+Math.imul(p,K)|0,h=(h=h+Math.imul(p,q)|0)+Math.imul(S,K)|0,r=r+Math.imul(S,q)|0,e=e+Math.imul(g,Q)|0,h=(h=h+Math.imul(g,tt)|0)+Math.imul(m,Q)|0,r=r+Math.imul(m,tt)|0;var xt=(l+(e=e+Math.imul(c,st)|0)|0)+((8191&(h=(h=h+Math.imul(c,et)|0)+Math.imul(f,st)|0))<<13)|0;l=((r=r+Math.imul(f,et)|0)+(h>>>13)|0)+(xt>>>26)|0,xt&=67108863,e=Math.imul(F,G),h=(h=Math.imul(F,W))+Math.imul(I,G)|0,r=Math.imul(I,W),e=e+Math.imul(k,U)|0,h=(h=h+Math.imul(k,j)|0)+Math.imul(C,U)|0,r=r+Math.imul(C,j)|0,e=e+Math.imul(_,Y)|0,h=(h=h+Math.imul(_,X)|0)+Math.imul(A,Y)|0,r=r+Math.imul(A,X)|0,e=e+Math.imul(b,K)|0,h=(h=h+Math.imul(b,q)|0)+Math.imul(x,K)|0,r=r+Math.imul(x,q)|0,e=e+Math.imul(p,Q)|0,h=(h=h+Math.imul(p,tt)|0)+Math.imul(S,Q)|0,r=r+Math.imul(S,tt)|0,e=e+Math.imul(g,st)|0,h=(h=h+Math.imul(g,et)|0)+Math.imul(m,st)|0,r=r+Math.imul(m,et)|0;var Mt=(l+(e=e+Math.imul(c,rt)|0)|0)+((8191&(h=(h=h+Math.imul(c,nt)|0)+Math.imul(f,rt)|0))<<13)|0;l=((r=r+Math.imul(f,nt)|0)+(h>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,e=Math.imul(D,G),h=(h=Math.imul(D,W))+Math.imul(B,G)|0,r=Math.imul(B,W),e=e+Math.imul(F,U)|0,h=(h=h+Math.imul(F,j)|0)+Math.imul(I,U)|0,r=r+Math.imul(I,j)|0,e=e+Math.imul(k,Y)|0,h=(h=h+Math.imul(k,X)|0)+Math.imul(C,Y)|0,r=r+Math.imul(C,X)|0,e=e+Math.imul(_,K)|0,h=(h=h+Math.imul(_,q)|0)+Math.imul(A,K)|0,r=r+Math.imul(A,q)|0,e=e+Math.imul(b,Q)|0,h=(h=h+Math.imul(b,tt)|0)+Math.imul(x,Q)|0,r=r+Math.imul(x,tt)|0,e=e+Math.imul(p,st)|0,h=(h=h+Math.imul(p,et)|0)+Math.imul(S,st)|0,r=r+Math.imul(S,et)|0,e=e+Math.imul(g,rt)|0,h=(h=h+Math.imul(g,nt)|0)+Math.imul(m,rt)|0,r=r+Math.imul(m,nt)|0;var _t=(l+(e=e+Math.imul(c,at)|0)|0)+((8191&(h=(h=h+Math.imul(c,lt)|0)+Math.imul(f,at)|0))<<13)|0;l=((r=r+Math.imul(f,lt)|0)+(h>>>13)|0)+(_t>>>26)|0,_t&=67108863,e=Math.imul(L,G),h=(h=Math.imul(L,W))+Math.imul(E,G)|0,r=Math.imul(E,W),e=e+Math.imul(D,U)|0,h=(h=h+Math.imul(D,j)|0)+Math.imul(B,U)|0,r=r+Math.imul(B,j)|0,e=e+Math.imul(F,Y)|0,h=(h=h+Math.imul(F,X)|0)+Math.imul(I,Y)|0,r=r+Math.imul(I,X)|0,e=e+Math.imul(k,K)|0,h=(h=h+Math.imul(k,q)|0)+Math.imul(C,K)|0,r=r+Math.imul(C,q)|0,e=e+Math.imul(_,Q)|0,h=(h=h+Math.imul(_,tt)|0)+Math.imul(A,Q)|0,r=r+Math.imul(A,tt)|0,e=e+Math.imul(b,st)|0,h=(h=h+Math.imul(b,et)|0)+Math.imul(x,st)|0,r=r+Math.imul(x,et)|0,e=e+Math.imul(p,rt)|0,h=(h=h+Math.imul(p,nt)|0)+Math.imul(S,rt)|0,r=r+Math.imul(S,nt)|0,e=e+Math.imul(g,at)|0,h=(h=h+Math.imul(g,lt)|0)+Math.imul(m,at)|0,r=r+Math.imul(m,lt)|0;var At=(l+(e=e+Math.imul(c,ct)|0)|0)+((8191&(h=(h=h+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;l=((r=r+Math.imul(f,ft)|0)+(h>>>13)|0)+(At>>>26)|0,At&=67108863,e=Math.imul(z,G),h=(h=Math.imul(z,W))+Math.imul(V,G)|0,r=Math.imul(V,W),e=e+Math.imul(L,U)|0,h=(h=h+Math.imul(L,j)|0)+Math.imul(E,U)|0,r=r+Math.imul(E,j)|0,e=e+Math.imul(D,Y)|0,h=(h=h+Math.imul(D,X)|0)+Math.imul(B,Y)|0,r=r+Math.imul(B,X)|0,e=e+Math.imul(F,K)|0,h=(h=h+Math.imul(F,q)|0)+Math.imul(I,K)|0,r=r+Math.imul(I,q)|0,e=e+Math.imul(k,Q)|0,h=(h=h+Math.imul(k,tt)|0)+Math.imul(C,Q)|0,r=r+Math.imul(C,tt)|0,e=e+Math.imul(_,st)|0,h=(h=h+Math.imul(_,et)|0)+Math.imul(A,st)|0,r=r+Math.imul(A,et)|0,e=e+Math.imul(b,rt)|0,h=(h=h+Math.imul(b,nt)|0)+Math.imul(x,rt)|0,r=r+Math.imul(x,nt)|0,e=e+Math.imul(p,at)|0,h=(h=h+Math.imul(p,lt)|0)+Math.imul(S,at)|0,r=r+Math.imul(S,lt)|0,e=e+Math.imul(g,ct)|0,h=(h=h+Math.imul(g,ft)|0)+Math.imul(m,ct)|0,r=r+Math.imul(m,ft)|0;var wt=(l+(e=e+Math.imul(c,gt)|0)|0)+((8191&(h=(h=h+Math.imul(c,mt)|0)+Math.imul(f,gt)|0))<<13)|0;l=((r=r+Math.imul(f,mt)|0)+(h>>>13)|0)+(wt>>>26)|0,wt&=67108863,e=Math.imul(z,U),h=(h=Math.imul(z,j))+Math.imul(V,U)|0,r=Math.imul(V,j),e=e+Math.imul(L,Y)|0,h=(h=h+Math.imul(L,X)|0)+Math.imul(E,Y)|0,r=r+Math.imul(E,X)|0,e=e+Math.imul(D,K)|0,h=(h=h+Math.imul(D,q)|0)+Math.imul(B,K)|0,r=r+Math.imul(B,q)|0,e=e+Math.imul(F,Q)|0,h=(h=h+Math.imul(F,tt)|0)+Math.imul(I,Q)|0,r=r+Math.imul(I,tt)|0,e=e+Math.imul(k,st)|0,h=(h=h+Math.imul(k,et)|0)+Math.imul(C,st)|0,r=r+Math.imul(C,et)|0,e=e+Math.imul(_,rt)|0,h=(h=h+Math.imul(_,nt)|0)+Math.imul(A,rt)|0,r=r+Math.imul(A,nt)|0,e=e+Math.imul(b,at)|0,h=(h=h+Math.imul(b,lt)|0)+Math.imul(x,at)|0,r=r+Math.imul(x,lt)|0,e=e+Math.imul(p,ct)|0,h=(h=h+Math.imul(p,ft)|0)+Math.imul(S,ct)|0,r=r+Math.imul(S,ft)|0;var kt=(l+(e=e+Math.imul(g,gt)|0)|0)+((8191&(h=(h=h+Math.imul(g,mt)|0)+Math.imul(m,gt)|0))<<13)|0;l=((r=r+Math.imul(m,mt)|0)+(h>>>13)|0)+(kt>>>26)|0,kt&=67108863,e=Math.imul(z,Y),h=(h=Math.imul(z,X))+Math.imul(V,Y)|0,r=Math.imul(V,X),e=e+Math.imul(L,K)|0,h=(h=h+Math.imul(L,q)|0)+Math.imul(E,K)|0,r=r+Math.imul(E,q)|0,e=e+Math.imul(D,Q)|0,h=(h=h+Math.imul(D,tt)|0)+Math.imul(B,Q)|0,r=r+Math.imul(B,tt)|0,e=e+Math.imul(F,st)|0,h=(h=h+Math.imul(F,et)|0)+Math.imul(I,st)|0,r=r+Math.imul(I,et)|0,e=e+Math.imul(k,rt)|0,h=(h=h+Math.imul(k,nt)|0)+Math.imul(C,rt)|0,r=r+Math.imul(C,nt)|0,e=e+Math.imul(_,at)|0,h=(h=h+Math.imul(_,lt)|0)+Math.imul(A,at)|0,r=r+Math.imul(A,lt)|0,e=e+Math.imul(b,ct)|0,h=(h=h+Math.imul(b,ft)|0)+Math.imul(x,ct)|0,r=r+Math.imul(x,ft)|0;var Ct=(l+(e=e+Math.imul(p,gt)|0)|0)+((8191&(h=(h=h+Math.imul(p,mt)|0)+Math.imul(S,gt)|0))<<13)|0;l=((r=r+Math.imul(S,mt)|0)+(h>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,e=Math.imul(z,K),h=(h=Math.imul(z,q))+Math.imul(V,K)|0,r=Math.imul(V,q),e=e+Math.imul(L,Q)|0,h=(h=h+Math.imul(L,tt)|0)+Math.imul(E,Q)|0,r=r+Math.imul(E,tt)|0,e=e+Math.imul(D,st)|0,h=(h=h+Math.imul(D,et)|0)+Math.imul(B,st)|0,r=r+Math.imul(B,et)|0,e=e+Math.imul(F,rt)|0,h=(h=h+Math.imul(F,nt)|0)+Math.imul(I,rt)|0,r=r+Math.imul(I,nt)|0,e=e+Math.imul(k,at)|0,h=(h=h+Math.imul(k,lt)|0)+Math.imul(C,at)|0,r=r+Math.imul(C,lt)|0,e=e+Math.imul(_,ct)|0,h=(h=h+Math.imul(_,ft)|0)+Math.imul(A,ct)|0,r=r+Math.imul(A,ft)|0;var Tt=(l+(e=e+Math.imul(b,gt)|0)|0)+((8191&(h=(h=h+Math.imul(b,mt)|0)+Math.imul(x,gt)|0))<<13)|0;l=((r=r+Math.imul(x,mt)|0)+(h>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,e=Math.imul(z,Q),h=(h=Math.imul(z,tt))+Math.imul(V,Q)|0,r=Math.imul(V,tt),e=e+Math.imul(L,st)|0,h=(h=h+Math.imul(L,et)|0)+Math.imul(E,st)|0,r=r+Math.imul(E,et)|0,e=e+Math.imul(D,rt)|0,h=(h=h+Math.imul(D,nt)|0)+Math.imul(B,rt)|0,r=r+Math.imul(B,nt)|0,e=e+Math.imul(F,at)|0,h=(h=h+Math.imul(F,lt)|0)+Math.imul(I,at)|0,r=r+Math.imul(I,lt)|0,e=e+Math.imul(k,ct)|0,h=(h=h+Math.imul(k,ft)|0)+Math.imul(C,ct)|0,r=r+Math.imul(C,ft)|0;var Ft=(l+(e=e+Math.imul(_,gt)|0)|0)+((8191&(h=(h=h+Math.imul(_,mt)|0)+Math.imul(A,gt)|0))<<13)|0;l=((r=r+Math.imul(A,mt)|0)+(h>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,e=Math.imul(z,st),h=(h=Math.imul(z,et))+Math.imul(V,st)|0,r=Math.imul(V,et),e=e+Math.imul(L,rt)|0,h=(h=h+Math.imul(L,nt)|0)+Math.imul(E,rt)|0,r=r+Math.imul(E,nt)|0,e=e+Math.imul(D,at)|0,h=(h=h+Math.imul(D,lt)|0)+Math.imul(B,at)|0,r=r+Math.imul(B,lt)|0,e=e+Math.imul(F,ct)|0,h=(h=h+Math.imul(F,ft)|0)+Math.imul(I,ct)|0,r=r+Math.imul(I,ft)|0;var It=(l+(e=e+Math.imul(k,gt)|0)|0)+((8191&(h=(h=h+Math.imul(k,mt)|0)+Math.imul(C,gt)|0))<<13)|0;l=((r=r+Math.imul(C,mt)|0)+(h>>>13)|0)+(It>>>26)|0,It&=67108863,e=Math.imul(z,rt),h=(h=Math.imul(z,nt))+Math.imul(V,rt)|0,r=Math.imul(V,nt),e=e+Math.imul(L,at)|0,h=(h=h+Math.imul(L,lt)|0)+Math.imul(E,at)|0,r=r+Math.imul(E,lt)|0,e=e+Math.imul(D,ct)|0,h=(h=h+Math.imul(D,ft)|0)+Math.imul(B,ct)|0,r=r+Math.imul(B,ft)|0;var Pt=(l+(e=e+Math.imul(F,gt)|0)|0)+((8191&(h=(h=h+Math.imul(F,mt)|0)+Math.imul(I,gt)|0))<<13)|0;l=((r=r+Math.imul(I,mt)|0)+(h>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,e=Math.imul(z,at),h=(h=Math.imul(z,lt))+Math.imul(V,at)|0,r=Math.imul(V,lt),e=e+Math.imul(L,ct)|0,h=(h=h+Math.imul(L,ft)|0)+Math.imul(E,ct)|0,r=r+Math.imul(E,ft)|0;var Dt=(l+(e=e+Math.imul(D,gt)|0)|0)+((8191&(h=(h=h+Math.imul(D,mt)|0)+Math.imul(B,gt)|0))<<13)|0;l=((r=r+Math.imul(B,mt)|0)+(h>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,e=Math.imul(z,ct),h=(h=Math.imul(z,ft))+Math.imul(V,ct)|0,r=Math.imul(V,ft);var Bt=(l+(e=e+Math.imul(L,gt)|0)|0)+((8191&(h=(h=h+Math.imul(L,mt)|0)+Math.imul(E,gt)|0))<<13)|0;l=((r=r+Math.imul(E,mt)|0)+(h>>>13)|0)+(Bt>>>26)|0,Bt&=67108863;var Ot=(l+(e=Math.imul(z,gt))|0)+((8191&(h=(h=Math.imul(z,mt))+Math.imul(V,gt)|0))<<13)|0;return l=((r=Math.imul(V,mt))+(h>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,a[0]=yt,a[1]=pt,a[2]=St,a[3]=vt,a[4]=bt,a[5]=xt,a[6]=Mt,a[7]=_t,a[8]=At,a[9]=wt,a[10]=kt,a[11]=Ct,a[12]=Tt,a[13]=Ft,a[14]=It,a[15]=Pt,a[16]=Dt,a[17]=Bt,a[18]=Ot,0!==l&&(a[19]=l,s.length++),s};function m(t,i,s){s.negative=i.negative^t.negative,s.length=t.length+i.length;for(var e=0,h=0,r=0;r<s.length-1;r++){var n=h;h=0;for(var o=67108863&e,a=Math.min(r,i.length-1),l=Math.max(0,r-t.length+1);l<=a;l++){var u=r-l,c=(0|t.words[u])*(0|i.words[l]),f=67108863&c;o=67108863&(f=f+o|0),h+=(n=(n=n+(c/67108864|0)|0)+(f>>>26)|0)>>>26,n&=67108863}s.words[r]=o,e=n,n=h}return 0!==e?s.words[r]=e:s.length--,s.pH()}function y(t,i,s){return m(t,i,s)}Math.imul||(g=d),h.prototype.mulTo=function(t,i){var s=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,i):s<63?d(this,t,i):s<1024?m(this,t,i):y(this,t,i)},h.prototype.mul=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),this.mulTo(t,i)},h.prototype.mulf=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),y(this,t,i)},h.prototype.imul=function(t){return this.clone().mulTo(t,this)},h.prototype.imuln=function(t){var i=t<0;i&&(t=-t),s("number"==typeof t),s(t<67108864);for(var e=0,h=0;h<this.length;h++){var r=(0|this.words[h])*t,n=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=n>>>26,this.words[h]=67108863&n}return 0!==e&&(this.words[h]=e,this.length++),i?this.ineg():this},h.prototype.muln=function(t){return this.clone().imuln(t)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(t){var i=function(t){for(var i=new Array(t.bitLength()),s=0;s<i.length;s++){var e=s/26|0,h=s%26;i[s]=t.words[e]>>>h&1}return i}(t);if(0===i.length)return new h(1);for(var s=this,e=0;e<i.length&&0===i[e];e++,s=s.sqr());if(++e<i.length)for(var r=s.sqr();e<i.length;e++,r=r.sqr())0!==i[e]&&(s=s.mul(r));return s},h.prototype.iushln=function(t){s("number"==typeof t&&t>=0);var i,e=t%26,h=(t-e)/26,r=67108863>>>26-e<<26-e;if(0!==e){var n=0;for(i=0;i<this.length;i++){var o=this.words[i]&r,a=(0|this.words[i])-o<<e;this.words[i]=a|n,n=o>>>26-e}n&&(this.words[i]=n,this.length++)}if(0!==h){for(i=this.length-1;i>=0;i--)this.words[i+h]=this.words[i];for(i=0;i<h;i++)this.words[i]=0;this.length+=h}return this.pH()},h.prototype.ishln=function(t){return s(0===this.negative),this.iushln(t)},h.prototype.iushrn=function(t,i,e){var h;s("number"==typeof t&&t>=0),h=i?(i-i%26)/26:0;var r=t%26,n=Math.min((t-r)/26,this.length),o=67108863^67108863>>>r<<r,a=e;if(h-=n,h=Math.max(0,h),a){for(var l=0;l<n;l++)a.words[l]=this.words[l];a.length=n}if(0===n);else if(this.length>n)for(this.length-=n,l=0;l<this.length;l++)this.words[l]=this.words[l+n];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=h);l--){var c=0|this.words[l];this.words[l]=u<<26-r|c>>>r,u=c&o}return a&&0!==u&&(a.words[a.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.pH()},h.prototype.ishrn=function(t,i,e){return s(0===this.negative),this.iushrn(t,i,e)},h.prototype.shln=function(t){return this.clone().ishln(t)},h.prototype.ushln=function(t){return this.clone().iushln(t)},h.prototype.shrn=function(t){return this.clone().ishrn(t)},h.prototype.ushrn=function(t){return this.clone().iushrn(t)},h.prototype.testn=function(t){s("number"==typeof t&&t>=0);var i=t%26,e=(t-i)/26,h=1<<i;return!(this.length<=e||!(this.words[e]&h))},h.prototype.imaskn=function(t){s("number"==typeof t&&t>=0);var i=t%26,e=(t-i)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=e)return this;if(0!==i&&e++,this.length=Math.min(e,this.length),0!==i){var h=67108863^67108863>>>i<<i;this.words[this.length-1]&=h}return this.pH()},h.prototype.maskn=function(t){return this.clone().imaskn(t)},h.prototype.iaddn=function(t){return s("number"==typeof t),s(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this.SH(t)},h.prototype.SH=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},h.prototype.isubn=function(t){if(s("number"==typeof t),s(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.pH()},h.prototype.addn=function(t){return this.clone().iaddn(t)},h.prototype.subn=function(t){return this.clone().isubn(t)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype.kH=function(t,i,e){var h,r,n=t.length+e;this.bH(n);var o=0;for(h=0;h<t.length;h++){r=(0|this.words[h+e])+o;var a=(0|t.words[h])*i;o=((r-=67108863&a)>>26)-(a/67108864|0),this.words[h+e]=67108863&r}for(;h<this.length-e;h++)o=(r=(0|this.words[h+e])+o)>>26,this.words[h+e]=67108863&r;if(0===o)return this.pH();for(s(-1===o),o=0,h=0;h<this.length;h++)o=(r=-(0|this.words[h])+o)>>26,this.words[h]=67108863&r;return this.negative=1,this.pH()},h.prototype.CH=function(t,i){var s=(this.length,t.length),e=this.clone(),r=t,n=0|r.words[r.length-1];0!=(s=26-this.AH(n))&&(r=r.ushln(s),e.iushln(s),n=0|r.words[r.length-1]);var o,a=e.length-r.length;if("mod"!==i){(o=new h(null)).length=a+1,o.words=new Array(o.length);for(var l=0;l<o.length;l++)o.words[l]=0}var u=e.clone().kH(r,1,a);0===u.negative&&(e=u,o&&(o.words[a]=1));for(var c=a-1;c>=0;c--){var f=67108864*(0|e.words[r.length+c])+(0|e.words[r.length+c-1]);for(f=Math.min(f/n|0,67108863),e.kH(r,f,c);0!==e.negative;)f--,e.negative=0,e.kH(r,1,c),e.isZero()||(e.negative^=1);o&&(o.words[c]=f)}return o&&o.pH(),e.pH(),"div"!==i&&0!==s&&e.iushrn(s),{div:o||null,mod:e}},h.prototype.divmod=function(t,i,e){return s(!t.isZero()),this.isZero()?{div:new h(0),mod:new h(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,i),"mod"!==i&&(r=o.div.neg()),"div"!==i&&(n=o.mod.neg(),e&&0!==n.negative&&n.iadd(t)),{div:r,mod:n}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),i),"mod"!==i&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),i),"div"!==i&&(n=o.mod.neg(),e&&0!==n.negative&&n.isub(t)),{div:o.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new h(0),mod:this}:1===t.length?"div"===i?{div:this.divn(t.words[0]),mod:null}:"mod"===i?{div:null,mod:new h(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new h(this.modrn(t.words[0]))}:this.CH(t,i);var r,n,o},h.prototype.div=function(t){return this.divmod(t,"div",!1).div},h.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},h.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},h.prototype.divRound=function(t){var i=this.divmod(t);if(i.mod.isZero())return i.div;var s=0!==i.div.negative?i.mod.isub(t):i.mod,e=t.ushrn(1),h=t.andln(1),r=s.cmp(e);return r<0||1===h&&0===r?i.div:0!==i.div.negative?i.div.isubn(1):i.div.iaddn(1)},h.prototype.modrn=function(t){var i=t<0;i&&(t=-t),s(t<=67108863);for(var e=(1<<26)%t,h=0,r=this.length-1;r>=0;r--)h=(e*h+(0|this.words[r]))%t;return i?-h:h},h.prototype.modn=function(t){return this.modrn(t)},h.prototype.idivn=function(t){var i=t<0;i&&(t=-t),s(t<=67108863);for(var e=0,h=this.length-1;h>=0;h--){var r=(0|this.words[h])+67108864*e;this.words[h]=r/t|0,e=r%t}return this.pH(),i?this.ineg():this},h.prototype.divn=function(t){return this.clone().idivn(t)},h.prototype.egcd=function(t){s(0===t.negative),s(!t.isZero());var i=this,e=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var r=new h(1),n=new h(0),o=new h(0),a=new h(1),l=0;i.isEven()&&e.isEven();)i.iushrn(1),e.iushrn(1),++l;for(var u=e.clone(),c=i.clone();!i.isZero();){for(var f=0,d=1;0==(i.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(i.iushrn(f);f-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(u),n.isub(c)),r.iushrn(1),n.iushrn(1);for(var g=0,m=1;0==(e.words[0]&m)&&g<26;++g,m<<=1);if(g>0)for(e.iushrn(g);g-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(c)),o.iushrn(1),a.iushrn(1);i.cmp(e)>=0?(i.isub(e),r.isub(o),n.isub(a)):(e.isub(i),o.isub(r),a.isub(n))}return{a:o,b:a,gcd:e.iushln(l)}},h.prototype.TH=function(t){s(0===t.negative),s(!t.isZero());var i=this,e=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var r,n=new h(1),o=new h(0),a=e.clone();i.cmpn(1)>0&&e.cmpn(1)>0;){for(var l=0,u=1;0==(i.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(i.iushrn(l);l-- >0;)n.isOdd()&&n.iadd(a),n.iushrn(1);for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);i.cmp(e)>=0?(i.isub(e),n.isub(o)):(e.isub(i),o.isub(n))}return(r=0===i.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(t),r},h.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var i=this.clone(),s=t.clone();i.negative=0,s.negative=0;for(var e=0;i.isEven()&&s.isEven();e++)i.iushrn(1),s.iushrn(1);for(;;){for(;i.isEven();)i.iushrn(1);for(;s.isEven();)s.iushrn(1);var h=i.cmp(s);if(h<0){var r=i;i=s,s=r}else if(0===h||0===s.cmpn(1))break;i.isub(s)}return s.iushln(e)},h.prototype.invm=function(t){return this.egcd(t).a.umod(t)},h.prototype.isEven=function(){return 0==(1&this.words[0])},h.prototype.isOdd=function(){return 1==(1&this.words[0])},h.prototype.andln=function(t){return this.words[0]&t},h.prototype.bincn=function(t){s("number"==typeof t);var i=t%26,e=(t-i)/26,h=1<<i;if(this.length<=e)return this.bH(e+1),this.words[e]|=h,this;for(var r=h,n=e;0!==r&&n<this.length;n++){var o=0|this.words[n];r=(o+=r)>>>26,o&=67108863,this.words[n]=o}return 0!==r&&(this.words[n]=r,this.length++),this},h.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},h.prototype.cmpn=function(t){var i,e=t<0;if(0!==this.negative&&!e)return-1;if(0===this.negative&&e)return 1;if(this.pH(),this.length>1)i=1;else{e&&(t=-t),s(t<=67108863,"Number is too big");var h=0|this.words[0];i=h===t?0:h<t?-1:1}return 0!==this.negative?0|-i:i},h.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var i=this.ucmp(t);return 0!==this.negative?0|-i:i},h.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var i=0,s=this.length-1;s>=0;s--){var e=0|this.words[s],h=0|t.words[s];if(e!==h){e<h?i=-1:e>h&&(i=1);break}}return i},h.prototype.gtn=function(t){return 1===this.cmpn(t)},h.prototype.gt=function(t){return 1===this.cmp(t)},h.prototype.gten=function(t){return this.cmpn(t)>=0},h.prototype.gte=function(t){return this.cmp(t)>=0},h.prototype.ltn=function(t){return-1===this.cmpn(t)},h.prototype.lt=function(t){return-1===this.cmp(t)},h.prototype.lten=function(t){return this.cmpn(t)<=0},h.prototype.lte=function(t){return this.cmp(t)<=0},h.prototype.eqn=function(t){return 0===this.cmpn(t)},h.prototype.eq=function(t){return 0===this.cmp(t)},h.red=function(t){return new _(t)},h.prototype.toRed=function(t){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),t.convertTo(this).FH(t)},h.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype.FH=function(t){return this.red=t,this},h.prototype.forceRed=function(t){return s(!this.red,"Already a number in reduction context"),this.FH(t)},h.prototype.redAdd=function(t){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},h.prototype.redIAdd=function(t){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},h.prototype.redSub=function(t){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},h.prototype.redISub=function(t){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},h.prototype.redShl=function(t){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},h.prototype.redMul=function(t){return s(this.red,"redMul works only with red numbers"),this.red.IH(this,t),this.red.mul(this,t)},h.prototype.redIMul=function(t){return s(this.red,"redMul works only with red numbers"),this.red.IH(this,t),this.red.imul(this,t)},h.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red.PH(this),this.red.sqr(this)},h.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red.PH(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red.PH(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red.PH(this),this.red.invm(this)},h.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red.PH(this),this.red.neg(this)},h.prototype.redPow=function(t){return s(this.red&&!t.red,"redPow(normalNum)"),this.red.PH(this),this.red.pow(this,t)};var p={k256:null,p224:null,p192:null,p25519:null};function S(t,i){this.name=t,this.p=new h(i,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this.DH()}function v(){S.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){S.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){S.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){S.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _(t){if("string"==typeof t){var i=h.BH(t);this.m=i.p,this.prime=i}else s(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function A(t){_.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.TH(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S.prototype.DH=function(){var t=new h(null);return t.words=new Array(Math.ceil(this.n/13)),t},S.prototype.ireduce=function(t){var i,s=t;do{this.split(s,this.tmp),i=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(i>this.n);var e=i<this.n?-1:s.ucmp(this.p);return 0===e?(s.words[0]=0,s.length=1):e>0?s.isub(this.p):void 0!==s.strip?s.strip():s.pH(),s},S.prototype.split=function(t,i){t.iushrn(this.n,0,i)},S.prototype.imulK=function(t){return t.imul(this.k)},e(v,S),v.prototype.split=function(t,i){for(var s=4194303,e=Math.min(t.length,9),h=0;h<e;h++)i.words[h]=t.words[h];if(i.length=e,t.length<=9)return t.words[0]=0,void(t.length=1);var r=t.words[9];for(i.words[i.length++]=r&s,h=10;h<t.length;h++){var n=0|t.words[h];t.words[h-10]=(n&s)<<4|r>>>22,r=n}r>>>=22,t.words[h-10]=r,0===r&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var i=0,s=0;s<t.length;s++){var e=0|t.words[s];i+=977*e,t.words[s]=67108863&i,i=64*e+(i/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},e(b,S),e(x,S),e(M,S),M.prototype.imulK=function(t){for(var i=0,s=0;s<t.length;s++){var e=19*(0|t.words[s])+i,h=67108863&e;e>>>=26,t.words[s]=h,i=e}return 0!==i&&(t.words[t.length++]=i),t},h.BH=function(t){if(p[t])return p[t];var i;if("k256"===t)i=new v;else if("p224"===t)i=new b;else if("p192"===t)i=new x;else{if("p25519"!==t)throw new Error("Unknown prime "+t);i=new M}return p[t]=i,i},_.prototype.PH=function(t){s(0===t.negative,"red works only with positives"),s(t.red,"red works only with red numbers")},_.prototype.IH=function(t,i){s(0==(t.negative|i.negative),"red works only with positives"),s(t.red&&t.red===i.red,"red works only with red numbers")},_.prototype.imod=function(t){return this.prime?this.prime.ireduce(t).FH(this):(a(t,t.umod(this.m).FH(this)),t)},_.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t).FH(this)},_.prototype.add=function(t,i){this.IH(t,i);var s=t.add(i);return s.cmp(this.m)>=0&&s.isub(this.m),s.FH(this)},_.prototype.iadd=function(t,i){this.IH(t,i);var s=t.iadd(i);return s.cmp(this.m)>=0&&s.isub(this.m),s},_.prototype.sub=function(t,i){this.IH(t,i);var s=t.sub(i);return s.cmpn(0)<0&&s.iadd(this.m),s.FH(this)},_.prototype.isub=function(t,i){this.IH(t,i);var s=t.isub(i);return s.cmpn(0)<0&&s.iadd(this.m),s},_.prototype.shl=function(t,i){return this.PH(t),this.imod(t.ushln(i))},_.prototype.imul=function(t,i){return this.IH(t,i),this.imod(t.imul(i))},_.prototype.mul=function(t,i){return this.IH(t,i),this.imod(t.mul(i))},_.prototype.isqr=function(t){return this.imul(t,t.clone())},_.prototype.sqr=function(t){return this.mul(t,t)},_.prototype.sqrt=function(t){if(t.isZero())return t.clone();var i=this.m.andln(3);if(s(i%2==1),3===i){var e=this.m.add(new h(1)).iushrn(2);return this.pow(t,e)}for(var r=this.m.subn(1),n=0;!r.isZero()&&0===r.andln(1);)n++,r.iushrn(1);s(!r.isZero());var o=new h(1).toRed(this),a=o.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new h(2*u*u).toRed(this);0!==this.pow(u,l).cmp(a);)u.redIAdd(a);for(var c=this.pow(u,r),f=this.pow(t,r.addn(1).iushrn(1)),d=this.pow(t,r),g=n;0!==d.cmp(o);){for(var m=d,y=0;0!==m.cmp(o);y++)m=m.redSqr();s(y<g);var p=this.pow(c,new h(1).iushln(g-y-1));f=f.redMul(p),c=p.redSqr(),d=d.redMul(c),g=y}return f},_.prototype.invm=function(t){var i=t.TH(this.m);return 0!==i.negative?(i.negative=0,this.imod(i).redNeg()):this.imod(i)},_.prototype.pow=function(t,i){if(i.isZero())return new h(1).toRed(this);if(0===i.cmpn(1))return t.clone();var s=new Array(16);s[0]=new h(1).toRed(this),s[1]=t;for(var e=2;e<s.length;e++)s[e]=this.mul(s[e-1],t);var r=s[0],n=0,o=0,a=i.bitLength()%26;for(0===a&&(a=26),e=i.length-1;e>=0;e--){for(var l=i.words[e],u=a-1;u>=0;u--){var c=l>>u&1;r!==s[0]&&(r=this.sqr(r)),0!==c||0!==n?(n<<=1,n|=c,(4==++o||0===e&&0===u)&&(r=this.mul(r,s[n]),o=0,n=0)):o=0}a=26}return r},_.prototype.convertTo=function(t){var i=t.umod(this.m);return i===t?i.clone():i},_.prototype.convertFrom=function(t){var i=t.clone();return i.red=null,i},h.mont=function(t){return new A(t)},e(A,_),A.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},A.prototype.convertFrom=function(t){var i=this.imod(t.mul(this.rinv));return i.red=null,i},A.prototype.imul=function(t,i){if(t.isZero()||i.isZero())return t.words[0]=0,t.length=1,t;var s=t.imul(i),e=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=s.isub(e).iushrn(this.shift),r=h;return h.cmp(this.m)>=0?r=h.isub(this.m):h.cmpn(0)<0&&(r=h.iadd(this.m)),r.FH(this)},A.prototype.mul=function(t,i){if(t.isZero()||i.isZero())return new h(0).FH(this);var s=t.mul(i),e=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=s.isub(e).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n.FH(this)},A.prototype.invm=function(t){return this.imod(t.TH(this.m).mul(this.r2)).FH(this)}}(cx,Wv);var fx=cx.exports;function dx(t,i){if(Array.isArray(t))return t.slice();if(!t)return[];const s=[];if("string"!=typeof t){for(let i=0;i<t.length;i++)s[i]=0|t[i];return s}if("hex"===i){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t=`0${t}`);for(let i=0;i<t.length;i+=2)s.push(parseInt(t[i]+t[i+1],16))}else for(let i=0;i<t.length;i++){const e=t.charCodeAt(i),h=e>>8,r=255&e;h?s.push(h,r):s.push(r)}return s}const gx=function(t,i,s){const e=new Array(Math.max(t.bitLength(),s)+1);e.fill(0);const h=1<<i+1,r=t.clone();for(let t=0;t<e.length;t++){let i;const s=r.andln(h-1);r.isOdd()?(i=s>(h>>1)-1?(h>>1)-s:s,r.isubn(i)):i=0,e[t]=i,r.iushrn(1)}return e},mx=function(t,i){const s=[[],[]];t=t.clone(),i=i.clone();let e=0,h=0;for(;t.cmpn(-e)>0||i.cmpn(-h)>0;){let r,n,o=t.andln(3)+e&3,a=i.andln(3)+h&3;if(3===o&&(o=-1),3===a&&(a=-1),0==(1&o))r=0;else{const i=t.andln(7)+e&7;r=3!==i&&5!==i||2!==a?o:-o}if(s[0].push(r),0==(1&a))n=0;else{const t=i.andln(7)+h&7;n=3!==t&&5!==t||2!==o?a:-a}s[1].push(n),2*e===r+1&&(e=1-e),2*h===n+1&&(h=1-h),t.iushrn(1),i.iushrn(1)}return s};class yx{constructor(t,i){this.type=t,this.p=new fx(i.p,16),this.red=i.prime?fx.red(i.prime):fx.mont(this.p),this.zero=new fx(0).toRed(this.red),this.one=new fx(1).toRed(this.red),this.two=new fx(2).toRed(this.red),this.n=i.n&&new fx(i.n,16),this.g=i.g&&this.pointFromJSON(i.g,i.gRed),this.OH=new Array(4),this.LH=new Array(4),this.EH=new Array(4),this.RH=new Array(4),this.zH=this.n?this.n.bitLength():0;const s=this.n&&this.p.div(this.n);!s||s.cmpn(100)>0?this.redN=null:(this.VH=!0,this.redN=this.n.toRed(this.red))}NH(t,i){const s=t.GH(),e=gx(i,1,this.zH);let h=(1<<s.step+1)-(s.step%2==0?2:1);h/=3;const r=[];for(let t=0;t<e.length;t+=s.step){let i=0;for(let h=t+s.step-1;h>=t;h--)i=(i<<1)+e[h];r.push(i)}let n=this.jpoint(null,null,null),o=this.jpoint(null,null,null);for(let t=h;t>0;t--){for(let i=0;i<r.length;i++){const e=r[i];e===t?o=o.mixedAdd(s.points[i]):e===-t&&(o=o.mixedAdd(s.points[i].neg()))}n=n.add(o)}return n.toP()}WH(t,i){let s=4;const e=t.HH(s);s=e.wnd;const h=e.points,r=gx(i,s,this.zH);let n=this.jpoint(null,null,null);for(let s=r.length-1;s>=0;s--){for(let t=0;s>=0&&0===r[s];s--)t++;if(s>=0&&i++,n=n.dblp(i),s<0)break;const e=r[s];n="affine"===t.type?e>0?n.mixedAdd(h[e-1>>1]):n.mixedAdd(h[-e-1>>1].neg()):e>0?n.add(h[e-1>>1]):n.add(h[-e-1>>1].neg())}return"affine"===t.type?n.toP():n}UH(t,i,s,e,h){const r=this.OH,n=this.LH,o=this.EH;let a=0;for(let s=0;s<e;s++){const e=i[s].HH(t);r[s]=e.wnd,n[s]=e.points}for(let t=e-1;t>=1;t-=2){const e=t-1,h=t;if(1!==r[e]||1!==r[h]){o[e]=gx(s[e],r[e],this.zH),o[h]=gx(s[h],r[h],this.zH),a=Math.max(o[e].length,a),a=Math.max(o[h].length,a);continue}const l=[i[e],null,null,i[h]];0===i[e].y.cmp(i[h].y)?(l[1]=i[e].add(i[h]),l[2]=i[e].toJ().mixedAdd(i[h].neg())):0===i[e].y.cmp(i[h].y.redNeg())?(l[1]=i[e].toJ().mixedAdd(i[h]),l[2]=i[e].add(i[h].neg())):(l[1]=i[e].toJ().mixedAdd(i[h]),l[2]=i[e].toJ().mixedAdd(i[h].neg()));const u=[-3,-1,-5,-7,0,7,5,1,3],c=mx(s[e],s[h]);a=Math.max(c[0].length,a),o[e]=new Array(a),o[h]=new Array(a);for(let t=0;t<a;t++){const i=0|c[0][t],s=0|c[1][t];o[e][t]=u[3*(i+1)+(s+1)],o[h][t]=0,n[e]=l}}let l=this.jpoint(null,null,null);const u=this.RH;for(let t=a;t>=0;t--){let i=0;for(;t>=0;){let s=!0;for(let i=0;i<e;i++)u[i]=0|o[i][t],0!==u[i]&&(s=!1);if(!s)break;i++,t--}if(t>=0&&i++,l=l.dblp(i),t<0)break;for(let t=0;t<e;t++){const i=u[t];let s;0!==i&&(i>0?s=n[t][i-1>>1]:i<0&&(s=n[t][-i-1>>1].neg()),l="affine"===s.type?l.mixedAdd(s):l.add(s))}}for(let t=0;t<e;t++)n[t]=null;return h?l:l.toP()}decodePoint(t,i){t=dx(t,i);const s=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*s)return this.point(t.slice(1,1+s),t.slice(1+s,1+2*s));if((2===t[0]||3===t[0])&&t.length-1===s)return this.pointFromX(t.slice(1,1+s),3===t[0]);throw new Error("Unknown point format")}}class px{constructor(t,i){this.curve=t,this.type=i,this.precomputed=null}eq(t){throw new Error("Not implemented")}validate(){return this.curve.validate(this)}encodeCompressed(t){return this.encode(t,!0)}jH(t){const i=this.curve.p.byteLength(),s=this.getX().toArray("be",i);return t?[this.getY().isEven()?2:3].concat(s):[4].concat(s,this.getY().toArray("be",i))}encode(t,i){return function(t,i){return"hex"===i?function(t){let i="";for(let e=0;e<t.length;e++)i+=1===(s=t[e].toString(16)).length?`0${s}`:s;var s;return i}(t):t}(this.jH(i),t)}precompute(t){if(this.precomputed)return this;const i={doubles:null,naf:null,beta:null};return i.naf=this.HH(8),i.doubles=this.GH(4,t),i.beta=this.$H(),this.precomputed=i,this}YH(t){if(!this.precomputed)return!1;const i=this.precomputed.doubles;return!!i&&i.points.length>=Math.ceil((t.bitLength()+1)/i.step)}GH(t,i){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;const s=[this];let e=this;for(let h=0;h<i;h+=t){for(let i=0;i<t;i++)e=e.dbl();s.push(e)}return{step:t,points:s}}HH(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;const i=[this],s=(1<<t)-1,e=1===s?null:this.dbl();for(let t=1;t<s;t++)i[t]=i[t-1].add(e);return{wnd:t,points:i}}$H(){return null}dblp(t){let i=this;for(let s=0;s<t;s++)i=i.dbl();return i}}class Sx extends yx{constructor(t){super("short",t),this.a=new fx(t.a,16).toRed(this.red),this.b=new fx(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this.XH(t),this.ZH=new Array(4),this.KH=new Array(4)}pointFromJSON(t,i){return vx.fromJSON(this,t,i)}XH(t){if(!this.zeroA||!this.g||!this.n||1!==this.p.modn(3))return;let i,s,e;if(t.beta)i=new fx(t.beta,16).toRed(this.red);else{const t=this.qH(this.p);i=t[0].cmp(t[1])<0?t[0]:t[1],i=i.toRed(this.red)}if(t.lambda)s=new fx(t.lambda,16);else{const t=this.qH(this.n);s=0===this.g.mul(t[0]).x.cmp(this.g.x.redMul(i))?t[0]:t[1]}return e=t.basis?t.basis.map((t=>({a:new fx(t.a,16),b:new fx(t.b,16)}))):this.JH(s),{beta:i,lambda:s,basis:e}}qH(t){const i=t===this.p?this.red:fx.mont(t),s=new fx(2).toRed(i).redInvm(),e=s.redNeg(),h=new fx(3).toRed(i).redNeg().redSqrt().redMul(s);return[e.redAdd(h).fromRed(),e.redSub(h).fromRed()]}JH(t){const i=this.n.ushrn(Math.floor(this.n.bitLength()/2));let s,e,h,r,n,o,a,l,u,c=t,f=this.n.clone(),d=new fx(1),g=new fx(0),m=new fx(0),y=new fx(1),p=0;for(;0!==c.cmpn(0);){const t=f.div(c);l=f.sub(t.mul(c)),u=m.sub(t.mul(d));const n=y.sub(t.mul(g));if(!h&&l.cmp(i)<0)s=a.neg(),e=d,h=l.neg(),r=u;else if(h&&2==++p)break;a=l,f=c,c=l,m=d,d=u,y=g,g=n}n=l.neg(),o=u;const S=h.sqr().add(r.sqr());return n.sqr().add(o.sqr()).cmp(S)>=0&&(n=s,o=e),h.negative&&(h=h.neg(),r=r.neg()),n.negative&&(n=n.neg(),o=o.neg()),[{a:h,b:r},{a:n,b:o}]}QH(t){const i=this.endo.basis,s=i[0],e=i[1],h=e.b.mul(t).divRound(this.n),r=s.b.neg().mul(t).divRound(this.n),n=h.mul(s.a),o=r.mul(e.a),a=h.mul(s.b),l=r.mul(e.b);return{k1:t.sub(n).sub(o),k2:a.add(l).neg()}}point(t,i,s){return new vx(this,t,i,s)}pointFromX(t,i){(t=new fx(t,16)).red||(t=t.toRed(this.red));const s=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);let e=s.redSqrt();if(0!==e.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");const h=e.fromRed().isOdd();return(i&&!h||!i&&h)&&(e=e.redNeg()),this.point(t,e)}validate(t){if(t.inf)return!0;const i=t.x,s=t.y,e=this.a.redMul(i),h=i.redSqr().redMul(i).redIAdd(e).redIAdd(this.b);return 0===s.redSqr().redISub(h).cmpn(0)}tU(t,i,s){const e=this.ZH,h=this.KH;let r=0;for(r=0;r<t.length;r++){const s=this.QH(i[r]);let n=t[r],o=n.$H();s.k1.negative&&(s.k1.ineg(),n=n.neg(!0)),s.k2.negative&&(s.k2.ineg(),o=o.neg(!0)),e[2*r]=n,e[2*r+1]=o,h[2*r]=s.k1,h[2*r+1]=s.k2}const n=this.UH(1,e,h,2*r,s);for(let t=0;t<2*r;t++)e[t]=null,h[t]=null;return n}jpoint(t,i,s){return new bx(this,t,i,s)}}class vx extends px{constructor(t,i,s,e){super(t,"affine"),null===i&&null===s?(this.x=null,this.y=null,this.inf=!0):(this.x=new fx(i,16),this.y=new fx(s,16),e&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}pointFromX(t,i){throw new Error("Method not implemented.")}point(t,i,s){return new vx(this,t,i,s)}$H(){if(!this.curve.endo)return;const t=this.precomputed;if(t&&t.beta)return t.beta;const i=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){const s=this.curve,e=function(t){return s.point(t.x.redMul(s.endo.beta),t.y)};t.beta=i,i.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(e)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(e)}}}return i}toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]}static fromJSON(t,i,s){"string"==typeof i&&(i=JSON.parse(i));const e=t.point(i[0],i[1],s);if(!i[2])return e;function h(i){return t.point(i[0],i[1],s)}const r=i[2];return e.precomputed={beta:null,doubles:r.doubles&&{step:r.doubles.step,points:[e].concat(r.doubles.points.map(h))},naf:r.naf&&{wnd:r.naf.wnd,points:[e].concat(r.naf.points.map(h))}},e}inspect(){return this.isInfinity()?"<EC Point Infinity>":`<EC Point x: ${this.x.fromRed().toString(16,2)} y: ${this.y.fromRed().toString(16,2)}>`}isInfinity(){return this.inf}add(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);let i=this.y.redSub(t.y);0!==i.cmpn(0)&&(i=i.redMul(this.x.redSub(t.x).redInvm()));const s=i.redSqr().redISub(this.x).redISub(t.x),e=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,e)}dbl(){if(this.inf)return this;const t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);const i=this.curve.a,s=this.x.redSqr(),e=t.redInvm(),h=s.redAdd(s).redIAdd(s).redIAdd(i).redMul(e),r=h.redSqr().redISub(this.x.redAdd(this.x)),n=h.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)}getX(){return this.x.fromRed()}getY(){return this.y.fromRed()}mul(t){return t=new fx(t,16),this.isInfinity()?this:this.YH(t)?this.curve.NH(this,t):this.curve.endo?this.curve.tU([this],[t]):this.curve.WH(this,t)}mulAdd(t,i,s){const e=[this,i],h=[t,s];return this.curve.endo?this.curve.tU(e,h):this.curve.UH(1,e,h,2)}jmulAdd(t,i,s){const e=[this,i],h=[t,s];return this.curve.endo?this.curve.tU(e,h,!0):this.curve.UH(1,e,h,2,!0)}eq(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))}neg(t){if(this.inf)return this;const i=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){const t=this.precomputed,s=function(t){return t.neg()};i.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(s)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(s)}}}return i}toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)}}class bx extends px{constructor(t,i,s,e){super(t,"jacobian"),null===i&&null===s&&null===e?(this.x=this.curve.one,this.y=this.curve.one,this.z=new fx(0)):(this.x=new fx(i,16),this.y=new fx(s,16),this.z=new fx(e,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}getY(){throw new Error("Method not implemented.")}getX(){throw new Error("Method not implemented.")}pointFromX(t,i){throw new Error("Method not implemented.")}point(t,i,s){throw new Error("Method not implemented.")}jpoint(t,i,s){return new bx(this,t,i,s)}toP(){if(this.isInfinity())return this.curve.point(null,null);const t=this.z.redInvm(),i=t.redSqr(),s=this.x.redMul(i),e=this.y.redMul(i).redMul(t);return this.curve.point(s,e)}neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)}add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;const i=t.z.redSqr(),s=this.z.redSqr(),e=this.x.redMul(i),h=t.x.redMul(s),r=this.y.redMul(i.redMul(t.z)),n=t.y.redMul(s.redMul(this.z)),o=e.redSub(h),a=r.redSub(n);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const l=o.redSqr(),u=l.redMul(o),c=e.redMul(l),f=a.redSqr().redIAdd(u).redISub(c).redISub(c),d=a.redMul(c.redISub(f)).redISub(r.redMul(u)),g=this.z.redMul(t.z).redMul(o);return this.curve.jpoint(f,d,g)}mixedAdd(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;const i=this.z.redSqr(),s=this.x,e=t.x.redMul(i),h=this.y,r=t.y.redMul(i).redMul(this.z),n=s.redSub(e),o=h.redSub(r);if(0===n.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const a=n.redSqr(),l=a.redMul(n),u=s.redMul(a),c=o.redSqr().redIAdd(l).redISub(u).redISub(u),f=o.redMul(u.redISub(c)).redISub(h.redMul(l)),d=this.z.redMul(n);return this.curve.jpoint(c,f,d)}dblp(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){let i=this;for(let s=0;s<t;s++)i=i.dbl();return i}const i=this.curve.a,s=this.curve.tinv;let e=this.x;const h=this.y;let r=this.z,n=r.redSqr().redSqr(),o=h.redAdd(h);for(let s=0;s<t;s++){const h=e.redSqr(),a=o.redSqr(),l=a.redSqr(),u=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(n)),c=e.redMul(a),f=u.redSqr().redISub(c.redAdd(c)),d=c.redISub(f);let g=u.redMul(d);g=g.redIAdd(g).redISub(l);const m=o.redMul(r);s+1<t&&(n=n.redMul(l)),e=f,r=m,o=g}return this.curve.jpoint(e,o.redMul(s),r)}dbl(){return this.isInfinity()?this:this.curve.zeroA?this.iU():this.curve.threeA?this.sU():this.eU()}iU(){let t,i,s;if(this.zOne){const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e),a=o.redSqr().redISub(n).redISub(n);let l=r.redIAdd(r);l=l.redIAdd(l),l=l.redIAdd(l),t=a,i=o.redMul(n.redISub(a)).redISub(l),s=this.y.redAdd(this.y)}else{const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e),a=o.redSqr();let l=r.redIAdd(r);l=l.redIAdd(l),l=l.redIAdd(l),t=a.redISub(n).redISub(n),i=o.redMul(n.redISub(t)).redISub(l),s=this.y.redMul(this.z),s=s.redIAdd(s)}return this.curve.jpoint(t,i,s)}sU(){let t,i,s;if(this.zOne){const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a),a=o.redSqr().redISub(n).redISub(n);t=a;let l=r.redIAdd(r);l=l.redIAdd(l),l=l.redIAdd(l),i=o.redMul(n.redISub(a)).redISub(l),s=this.y.redAdd(this.y)}else{const e=this.z.redSqr(),h=this.y.redSqr(),r=this.x.redMul(h);let n=this.x.redSub(e).redMul(this.x.redAdd(e));n=n.redAdd(n).redIAdd(n);let o=r.redIAdd(r);o=o.redIAdd(o);const a=o.redAdd(o);t=n.redSqr().redISub(a),s=this.y.redAdd(this.z).redSqr().redISub(h).redISub(e);let l=h.redSqr();l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l),i=n.redMul(o.redISub(t)).redISub(l)}return this.curve.jpoint(t,i,s)}eU(){const t=this.curve.a,i=this.x,s=this.y,e=this.z,h=e.redSqr().redSqr(),r=i.redSqr(),n=s.redSqr(),o=r.redAdd(r).redIAdd(r).redIAdd(t.redMul(h));let a=i.redAdd(i);a=a.redIAdd(a);const l=a.redMul(n),u=o.redSqr().redISub(l.redAdd(l)),c=l.redISub(u);let f=n.redSqr();f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);const d=o.redMul(c).redISub(f),g=s.redAdd(s).redMul(e);return this.curve.jpoint(u,d,g)}trpl(){if(!this.curve.zeroA)return this.dbl().add(this);const t=this.x.redSqr(),i=this.y.redSqr(),s=this.z.redSqr(),e=i.redSqr(),h=t.redAdd(t).redIAdd(t),r=h.redSqr();let n=this.x.redAdd(i).redSqr().redISub(t).redISub(e);n=n.redIAdd(n),n=n.redAdd(n).redIAdd(n),n=n.redISub(r);const o=n.redSqr();let a=e.redIAdd(e);a=a.redIAdd(a),a=a.redIAdd(a),a=a.redIAdd(a);const l=h.redIAdd(n).redSqr().redISub(r).redISub(o).redISub(a);let u=i.redMul(l);u=u.redIAdd(u),u=u.redIAdd(u);let c=this.x.redMul(o).redISub(u);c=c.redIAdd(c),c=c.redIAdd(c);let f=this.y.redMul(l.redMul(a.redISub(l)).redISub(n.redMul(o)));f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);const d=this.z.redAdd(n).redSqr().redISub(s).redISub(o);return this.curve.jpoint(c,f,d)}mul(t,i){return t=new fx(t,i),this.curve.WH(this,t)}eq(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;const i=this.z.redSqr(),s=t.z.redSqr();if(0!==this.x.redMul(s).redISub(t.x.redMul(i)).cmpn(0))return!1;const e=i.redMul(this.z),h=s.redMul(t.z);return 0===this.y.redMul(h).redISub(t.y.redMul(e)).cmpn(0)}eqXToP(t){const i=this.z.redSqr(),s=t.toRed(this.curve.red).redMul(i);if(0===this.x.cmp(s))return!0;const e=t.clone(),h=this.curve.redN.redMul(i);for(;;){if(e.iadd(this.curve.n),e.cmp(this.curve.p)>=0)return!1;if(s.redIAdd(h),0===this.x.cmp(s))return!0}}inspect(){return this.isInfinity()?"<EC JPoint Infinity>":`<EC JPoint x: ${this.x.toString(16,2)} y: ${this.y.toString(16,2)} z: ${this.z.toString(16,2)}>`}isInfinity(){return 0===this.z.cmpn(0)}}class xx{constructor(t){this.curve=new Sx(t),this.g=this.curve.g,this.n=this.curve.n}}const Mx={};var _x,Ax;Mx.PresetCurve=xx,_x="secp256k1",Ax={type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]},Object.defineProperty(Mx,_x,{configurable:!0,enumerable:!0,get(){const t=new xx(Ax);return Object.defineProperty(Mx,_x,{configurable:!0,enumerable:!0,value:t}),t}});class wx{constructor(t,i){this.ec=t,this.priv=null,this.pub=null,i.pub&&this.hU(i.pub,i.pubEnc)}static fromPublic(t,i,s){return i instanceof wx?i:new wx(t,{pub:i,pubEnc:s})}validate(){const t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}}getPublic(t,i){return"string"==typeof t&&(i=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),i?this.pub.encode(i,t):this.pub}hU(t,i){if(t.x||t.y)return"mont"===this.ec.curve.type||"short"===this.ec.curve.type||this.ec.curve.type,void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,i)}verify(t,i){return this.ec.verify(t,i,this)}}function kx(t,i){const s=t[i.place++];if(!(128&s))return s;const e=15&s;if(0===e||e>4)return!1;let h=0,r=i.place;for(let i=0;i<e;i++,r++)h<<=8,h|=t[r],h>>>=0;return!(h<=127)&&(i.place=r,h)}class Cx{constructor(){this.place=0}}class Tx{constructor(t,i){if(t instanceof Tx)return t;this.rU(t,i)||(this.r=new fx(t.r,16),this.s=new fx(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}rU(t,i){t=dx(t,i);const s=new Cx;if(48!==t[s.place++])return!1;const e=kx(t,s);if(!1===e)return!1;if(e+s.place!==t.length)return!1;if(2!==t[s.place++])return!1;const h=kx(t,s);if(!1===h)return!1;let r=t.slice(s.place,h+s.place);if(s.place+=h,2!==t[s.place++])return!1;const n=kx(t,s);if(!1===n)return!1;if(t.length!==n+s.place)return!1;let o=t.slice(s.place,n+s.place);if(0===r[0]){if(!(128&r[1]))return!1;r=r.slice(1)}if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}return this.r=new fx(r),this.s=new fx(o),this.recoveryParam=null,!0}}class Fx{constructor(t){if(!(this instanceof Fx))return new Fx(t);"string"==typeof t&&(t=Mx[t]),t instanceof Mx.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1)}keyFromPublic(t,i){return wx.fromPublic(this,t,i)}nU(t,i){const s=8*t.byteLength()-this.n.bitLength();return s>0&&(t=t.ushrn(s)),!i&&t.cmp(this.n)>=0?t.sub(this.n):t}verify(t,i,s,e){t=this.nU(new fx(t,16)),s=this.keyFromPublic(s,e);const h=(i=new Tx(i,"hex")).r,r=i.s;if(h.cmpn(1)<0||h.cmp(this.n)>=0)return!1;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;const n=r.invm(this.n),o=n.mul(t).umod(this.n),a=n.mul(h).umod(this.n);if(!this.curve.VH){const t=this.g.mulAdd(o,s.getPublic(),a);return!t.isInfinity()&&0===t.getX().umod(this.n).cmp(h)}const l=this.g.jmulAdd(o,s.getPublic(),a);return!l.isInfinity()&&l.eqXToP(h)}}var Ix,Px={exports:{}},Dx={exports:{}};Dx.exports=(Ix=Ix||function(t,i){var s;if("undefined"!=typeof window&&window.crypto&&(s=window.crypto),"undefined"!=typeof self&&self.crypto&&(s=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(s=globalThis.crypto),!s&&"undefined"!=typeof window&&window.msCrypto&&(s=window.msCrypto),!s&&void 0!==Wv&&Wv.crypto&&(s=Wv.crypto),!s)try{s=i}catch(t){}var e=function(){if(s){if("function"==typeof s.getRandomValues)try{return s.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof s.randomBytes)try{return s.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},h=Object.create||function(){function t(){}return function(i){var s;return t.prototype=i,s=new t,t.prototype=null,s}}(),r={},n=r.lib={},o=n.Base={extend:function(t){var i=h(this);return t&&i.mixIn(t),i.hasOwnProperty("init")&&this.init!==i.init||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=o.extend({init:function(t,s){t=this.words=t||[],this.sigBytes=s!=i?s:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var i=this.words,s=t.words,e=this.sigBytes,h=t.sigBytes;if(this.clamp(),e%4)for(var r=0;r<h;r++){var n=s[r>>>2]>>>24-r%4*8&255;i[e+r>>>2]|=n<<24-(e+r)%4*8}else for(var o=0;o<h;o+=4)i[e+o>>>2]=s[o>>>2];return this.sigBytes+=h,this},clamp:function(){var i=this.words,s=this.sigBytes;i[s>>>2]&=4294967295<<32-s%4*8,i.length=t.ceil(s/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var i=[],s=0;s<t;s+=4)i.push(e());return new a.init(i,t)}}),l=r.enc={},u=l.Hex={stringify:function(t){for(var i=t.words,s=t.sigBytes,e=[],h=0;h<s;h++){var r=i[h>>>2]>>>24-h%4*8&255;e.push((r>>>4).toString(16)),e.push((15&r).toString(16))}return e.join("")},parse:function(t){for(var i=t.length,s=[],e=0;e<i;e+=2)s[e>>>3]|=parseInt(t.substr(e,2),16)<<24-e%8*4;return new a.init(s,i/2)}},c=l.Latin1={stringify:function(t){for(var i=t.words,s=t.sigBytes,e=[],h=0;h<s;h++){var r=i[h>>>2]>>>24-h%4*8&255;e.push(String.fromCharCode(r))}return e.join("")},parse:function(t){for(var i=t.length,s=[],e=0;e<i;e++)s[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new a.init(s,i)}},f=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},d=n.BufferedBlockAlgorithm=o.extend({reset:function(){this.$k=new a.init,this.oU=0},aU:function(t){"string"==typeof t&&(t=f.parse(t)),this.$k.concat(t),this.oU+=t.sigBytes},lU:function(i){var s,e=this.$k,h=e.words,r=e.sigBytes,n=this.blockSize,o=r/(4*n),l=(o=i?t.ceil(o):t.max((0|o)-this.uU,0))*n,u=t.min(4*l,r);if(l){for(var c=0;c<l;c+=n)this.cU(h,c);s=h.splice(0,l),e.sigBytes-=u}return new a.init(s,u)},clone:function(){var t=o.clone.call(this);return t.$k=this.$k.clone(),t},uU:0});n.Hasher=d.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this.fU()},update:function(t){return this.aU(t),this.lU(),this},finalize:function(t){return t&&this.aU(t),this.dU()},blockSize:16,gU:function(t){return function(i,s){return new t.init(s).finalize(i)}},mU:function(t){return function(i,s){return new g.HMAC.init(t,s).finalize(i)}}});var g=r.algo={};return r}(Math),Ix);var Bx={exports:{}};!function(t,i){var s;t.exports=(s=Dx.exports,function(t){var i=s,e=i.lib,h=e.WordArray,r=e.Hasher,n=i.algo,o=[],a=[];!function(){function i(i){for(var s=t.sqrt(i),e=2;e<=s;e++)if(!(i%e))return!1;return!0}function s(t){return 4294967296*(t-(0|t))|0}for(var e=2,h=0;h<64;)i(e)&&(h<8&&(o[h]=s(t.pow(e,.5))),a[h]=s(t.pow(e,1/3)),h++),e++}();var l=[],u=n.SHA256=r.extend({fU:function(){this.yU=new h.init(o.slice(0))},cU:function(t,i){for(var s=this.yU.words,e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],u=s[5],c=s[6],f=s[7],d=0;d<64;d++){if(d<16)l[d]=0|t[i+d];else{var g=l[d-15],m=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,y=l[d-2],p=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;l[d]=m+l[d-7]+p+l[d-16]}var S=e&h^e&r^h&r,v=(e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22),b=f+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&u^~o&c)+a[d]+l[d];f=c,c=u,u=o,o=n+b|0,n=r,r=h,h=e,e=b+(v+S)|0}s[0]=s[0]+e|0,s[1]=s[1]+h|0,s[2]=s[2]+r|0,s[3]=s[3]+n|0,s[4]=s[4]+o|0,s[5]=s[5]+u|0,s[6]=s[6]+c|0,s[7]=s[7]+f|0},dU:function(){var i=this.$k,s=i.words,e=8*this.oU,h=8*i.sigBytes;return s[h>>>5]|=128<<24-h%32,s[14+(h+64>>>9<<4)]=t.floor(e/4294967296),s[15+(h+64>>>9<<4)]=e,i.sigBytes=4*s.length,this.lU(),this.yU},clone:function(){var t=r.clone.call(this);return t.yU=this.yU.clone(),t}});i.SHA256=r.gU(u),i.HmacSHA256=r.mU(u)}(Math),s.SHA256)}(Bx);var Ox=Bx.exports;!function(t,i){var s,e,h,r,n,o;t.exports=(e=(s=o=Dx.exports).lib.WordArray,h=s.algo,r=h.SHA256,n=h.SHA224=r.extend({fU:function(){this.yU=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},dU:function(){var t=r.dU.call(this);return t.sigBytes-=4,t}}),s.SHA224=r.gU(n),s.HmacSHA224=r.mU(n),o.SHA224)}(Px);var Lx=Px.exports,Ex={exports:{}};!function(t,i){t.exports=Dx.exports.enc.Hex}(Ex);var Rx=Ex.exports,zx={exports:{}};!function(t,i){t.exports=Dx.exports.enc.Utf8}(zx);var Vx=zx.exports,Nx={exports:{}};!function(t,i){var s,e,h;t.exports=(h=(e=s=Dx.exports).lib.WordArray,e.enc.Base64={stringify:function(t){var i=t.words,s=t.sigBytes,e=this.it;t.clamp();for(var h=[],r=0;r<s;r+=3)for(var n=(i[r>>>2]>>>24-r%4*8&255)<<16|(i[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|i[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;o<4&&r+.75*o<s;o++)h.push(e.charAt(n>>>6*(3-o)&63));var a=e.charAt(64);if(a)for(;h.length%4;)h.push(a);return h.join("")},parse:function(t){var i=t.length,s=this.it,e=this.pU;if(!e){e=this.pU=[];for(var r=0;r<s.length;r++)e[s.charCodeAt(r)]=r}var n=s.charAt(64);if(n){var o=t.indexOf(n);-1!==o&&(i=o)}return function(t,i,s){for(var e=[],r=0,n=0;n<i;n++)if(n%4){var o=s[t.charCodeAt(n-1)]<<n%4*2|s[t.charCodeAt(n)]>>>6-n%4*2;e[r>>>2]|=o<<24-r%4*8,r++}return h.create(e,r)}(t,i,e)},it:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},s.enc.Base64)}({exports:{}});!function(t,i){var s;t.exports=(s=Dx.exports,function(t){var i=s,e=i.lib,h=e.WordArray,r=e.Hasher,n=i.algo,o=[];!function(){for(var i=0;i<64;i++)o[i]=4294967296*t.abs(t.sin(i+1))|0}();var a=n.MD5=r.extend({fU:function(){this.yU=new h.init([1732584193,4023233417,2562383102,271733878])},cU:function(t,i){for(var s=0;s<16;s++){var e=i+s,h=t[e];t[e]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}var r=this.yU.words,n=t[i+0],a=t[i+1],d=t[i+2],g=t[i+3],m=t[i+4],y=t[i+5],p=t[i+6],S=t[i+7],v=t[i+8],b=t[i+9],x=t[i+10],M=t[i+11],_=t[i+12],A=t[i+13],w=t[i+14],k=t[i+15],C=r[0],T=r[1],F=r[2],I=r[3];C=l(C,T,F,I,n,7,o[0]),I=l(I,C,T,F,a,12,o[1]),F=l(F,I,C,T,d,17,o[2]),T=l(T,F,I,C,g,22,o[3]),C=l(C,T,F,I,m,7,o[4]),I=l(I,C,T,F,y,12,o[5]),F=l(F,I,C,T,p,17,o[6]),T=l(T,F,I,C,S,22,o[7]),C=l(C,T,F,I,v,7,o[8]),I=l(I,C,T,F,b,12,o[9]),F=l(F,I,C,T,x,17,o[10]),T=l(T,F,I,C,M,22,o[11]),C=l(C,T,F,I,_,7,o[12]),I=l(I,C,T,F,A,12,o[13]),F=l(F,I,C,T,w,17,o[14]),C=u(C,T=l(T,F,I,C,k,22,o[15]),F,I,a,5,o[16]),I=u(I,C,T,F,p,9,o[17]),F=u(F,I,C,T,M,14,o[18]),T=u(T,F,I,C,n,20,o[19]),C=u(C,T,F,I,y,5,o[20]),I=u(I,C,T,F,x,9,o[21]),F=u(F,I,C,T,k,14,o[22]),T=u(T,F,I,C,m,20,o[23]),C=u(C,T,F,I,b,5,o[24]),I=u(I,C,T,F,w,9,o[25]),F=u(F,I,C,T,g,14,o[26]),T=u(T,F,I,C,v,20,o[27]),C=u(C,T,F,I,A,5,o[28]),I=u(I,C,T,F,d,9,o[29]),F=u(F,I,C,T,S,14,o[30]),C=c(C,T=u(T,F,I,C,_,20,o[31]),F,I,y,4,o[32]),I=c(I,C,T,F,v,11,o[33]),F=c(F,I,C,T,M,16,o[34]),T=c(T,F,I,C,w,23,o[35]),C=c(C,T,F,I,a,4,o[36]),I=c(I,C,T,F,m,11,o[37]),F=c(F,I,C,T,S,16,o[38]),T=c(T,F,I,C,x,23,o[39]),C=c(C,T,F,I,A,4,o[40]),I=c(I,C,T,F,n,11,o[41]),F=c(F,I,C,T,g,16,o[42]),T=c(T,F,I,C,p,23,o[43]),C=c(C,T,F,I,b,4,o[44]),I=c(I,C,T,F,_,11,o[45]),F=c(F,I,C,T,k,16,o[46]),C=f(C,T=c(T,F,I,C,d,23,o[47]),F,I,n,6,o[48]),I=f(I,C,T,F,S,10,o[49]),F=f(F,I,C,T,w,15,o[50]),T=f(T,F,I,C,y,21,o[51]),C=f(C,T,F,I,_,6,o[52]),I=f(I,C,T,F,g,10,o[53]),F=f(F,I,C,T,x,15,o[54]),T=f(T,F,I,C,a,21,o[55]),C=f(C,T,F,I,v,6,o[56]),I=f(I,C,T,F,k,10,o[57]),F=f(F,I,C,T,p,15,o[58]),T=f(T,F,I,C,A,21,o[59]),C=f(C,T,F,I,m,6,o[60]),I=f(I,C,T,F,M,10,o[61]),F=f(F,I,C,T,d,15,o[62]),T=f(T,F,I,C,b,21,o[63]),r[0]=r[0]+C|0,r[1]=r[1]+T|0,r[2]=r[2]+F|0,r[3]=r[3]+I|0},dU:function(){var i=this.$k,s=i.words,e=8*this.oU,h=8*i.sigBytes;s[h>>>5]|=128<<24-h%32;var r=t.floor(e/4294967296),n=e;s[15+(h+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),s[14+(h+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),i.sigBytes=4*(s.length+1),this.lU();for(var o=this.yU,a=o.words,l=0;l<4;l++){var u=a[l];a[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return o},clone:function(){var t=r.clone.call(this);return t.yU=this.yU.clone(),t}});function l(t,i,s,e,h,r,n){var o=t+(i&s|~i&e)+h+n;return(o<<r|o>>>32-r)+i}function u(t,i,s,e,h,r,n){var o=t+(i&e|s&~e)+h+n;return(o<<r|o>>>32-r)+i}function c(t,i,s,e,h,r,n){var o=t+(i^s^e)+h+n;return(o<<r|o>>>32-r)+i}function f(t,i,s,e,h,r,n){var o=t+(s^(i|~e))+h+n;return(o<<r|o>>>32-r)+i}i.MD5=r.gU(a),i.HmacMD5=r.mU(a)}(Math),s.MD5)}({exports:{}});!function(t,i){var s,e,h,r,n,o,a,l;t.exports=(e=(s=l=Dx.exports).lib,h=e.WordArray,r=e.Hasher,n=s.algo,o=[],a=n.SHA1=r.extend({fU:function(){this.yU=new h.init([1732584193,4023233417,2562383102,271733878,3285377520])},cU:function(t,i){for(var s=this.yU.words,e=s[0],h=s[1],r=s[2],n=s[3],a=s[4],l=0;l<80;l++){if(l<16)o[l]=0|t[i+l];else{var u=o[l-3]^o[l-8]^o[l-14]^o[l-16];o[l]=u<<1|u>>>31}var c=(e<<5|e>>>27)+a+o[l];c+=l<20?1518500249+(h&r|~h&n):l<40?1859775393+(h^r^n):l<60?(h&r|h&n|r&n)-1894007588:(h^r^n)-899497514,a=n,n=r,r=h<<30|h>>>2,h=e,e=c}s[0]=s[0]+e|0,s[1]=s[1]+h|0,s[2]=s[2]+r|0,s[3]=s[3]+n|0,s[4]=s[4]+a|0},dU:function(){var t=this.$k,i=t.words,s=8*this.oU,e=8*t.sigBytes;return i[e>>>5]|=128<<24-e%32,i[14+(e+64>>>9<<4)]=Math.floor(s/4294967296),i[15+(e+64>>>9<<4)]=s,t.sigBytes=4*i.length,this.lU(),this.yU},clone:function(){var t=r.clone.call(this);return t.yU=this.yU.clone(),t}}),s.SHA1=r.gU(a),s.HmacSHA1=r.mU(a),l.SHA1)}({exports:{}});!function(t,i){var s,e,h;t.exports=(e=(s=Dx.exports).lib.Base,h=s.enc.Utf8,void(s.algo.HMAC=e.extend({init:function(t,i){t=this.SU=new t.init,"string"==typeof i&&(i=h.parse(i));var s=t.blockSize,e=4*s;i.sigBytes>e&&(i=t.finalize(i)),i.clamp();for(var r=this.vU=i.clone(),n=this.bU=i.clone(),o=r.words,a=n.words,l=0;l<s;l++)o[l]^=1549556828,a[l]^=909522486;r.sigBytes=n.sigBytes=e,this.reset()},reset:function(){var t=this.SU;t.reset(),t.update(this.bU)},update:function(t){return this.SU.update(t),this},finalize:function(t){var i=this.SU,s=i.finalize(t);return i.reset(),i.finalize(this.vU.clone().concat(s))}})))}({exports:{}}),function(t,i){var s,e,h,r,n,o,a,l;t.exports=(h=(e=(s=l=Dx.exports).lib).Base,r=e.WordArray,o=(n=s.algo).MD5,a=n.EvpKDF=h.extend({cfg:h.extend({keySize:4,hasher:o,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,i){for(var s,e=this.cfg,h=e.hasher.create(),n=r.create(),o=n.words,a=e.keySize,l=e.iterations;o.length<a;){s&&h.update(s),s=h.update(t).finalize(i),h.reset();for(var u=1;u<l;u++)s=h.finalize(s),h.reset();n.concat(s)}return n.sigBytes=4*a,n}}),s.EvpKDF=function(t,i,s){return a.create(s).compute(t,i)},l.EvpKDF)}({exports:{}});!function(t,i){var s;t.exports=void((s=Dx.exports).lib.Cipher||function(t){var i=s,e=i.lib,h=e.Base,r=e.WordArray,n=e.BufferedBlockAlgorithm,o=i.enc;o.Utf8;var a=o.Base64,l=i.algo.EvpKDF,u=e.Cipher=n.extend({cfg:h.extend(),createEncryptor:function(t,i){return this.create(this.xU,t,i)},createDecryptor:function(t,i){return this.create(this.MU,t,i)},init:function(t,i,s){this.cfg=this.cfg.extend(s),this._U=t,this.AU=i,this.reset()},reset:function(){n.reset.call(this),this.fU()},process:function(t){return this.aU(t),this.lU()},finalize:function(t){return t&&this.aU(t),this.dU()},keySize:4,ivSize:4,xU:1,MU:2,gU:function(){function t(t){return"string"==typeof t?v:p}return function(i){return{encrypt:function(s,e,h){return t(e).encrypt(i,s,e,h)},decrypt:function(s,e,h){return t(e).decrypt(i,s,e,h)}}}}()});e.StreamCipher=u.extend({dU:function(){return this.lU(!0)},blockSize:1});var c=i.mode={},f=e.BlockCipherMode=h.extend({createEncryptor:function(t,i){return this.Encryptor.create(t,i)},createDecryptor:function(t,i){return this.Decryptor.create(t,i)},init:function(t,i){this.wU=t,this.kU=i}}),d=c.CBC=function(){var t=f.extend();function i(t,i,s){var e,h=this.kU;h?(e=h,this.kU=undefined):e=this.CU;for(var r=0;r<s;r++)t[i+r]^=e[r]}return t.Encryptor=t.extend({processBlock:function(t,s){var e=this.wU,h=e.blockSize;i.call(this,t,s,h),e.encryptBlock(t,s),this.CU=t.slice(s,s+h)}}),t.Decryptor=t.extend({processBlock:function(t,s){var e=this.wU,h=e.blockSize,r=t.slice(s,s+h);e.decryptBlock(t,s),i.call(this,t,s,h),this.CU=r}}),t}(),g=(i.pad={}).Pkcs7={pad:function(t,i){for(var s=4*i,e=s-t.sigBytes%s,h=e<<24|e<<16|e<<8|e,n=[],o=0;o<e;o+=4)n.push(h);var a=r.create(n,e);t.concat(a)},unpad:function(t){var i=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=i}};e.BlockCipher=u.extend({cfg:u.cfg.extend({mode:d,padding:g}),reset:function(){var t;u.reset.call(this);var i=this.cfg,s=i.iv,e=i.mode;this._U==this.xU?t=e.createEncryptor:(t=e.createDecryptor,this.uU=1),this.TU&&this.TU.FU==t?this.TU.init(this,s&&s.words):(this.TU=t.call(e,this,s&&s.words),this.TU.FU=t)},cU:function(t,i){this.TU.processBlock(t,i)},dU:function(){var t,i=this.cfg.padding;return this._U==this.xU?(i.pad(this.$k,this.blockSize),t=this.lU(!0)):(t=this.lU(!0),i.unpad(t)),t},blockSize:4});var m=e.CipherParams=h.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),y=(i.format={}).OpenSSL={stringify:function(t){var i=t.ciphertext,s=t.salt;return(s?r.create([1398893684,1701076831]).concat(s).concat(i):i).toString(a)},parse:function(t){var i,s=a.parse(t),e=s.words;return 1398893684==e[0]&&1701076831==e[1]&&(i=r.create(e.slice(2,4)),e.splice(0,4),s.sigBytes-=16),m.create({ciphertext:s,salt:i})}},p=e.SerializableCipher=h.extend({cfg:h.extend({format:y}),encrypt:function(t,i,s,e){e=this.cfg.extend(e);var h=t.createEncryptor(s,e),r=h.finalize(i),n=h.cfg;return m.create({ciphertext:r,key:s,iv:n.iv,algorithm:t,mode:n.mode,padding:n.padding,blockSize:t.blockSize,formatter:e.format})},decrypt:function(t,i,s,e){return e=this.cfg.extend(e),i=this.IU(i,e.format),t.createDecryptor(s,e).finalize(i.ciphertext)},IU:function(t,i){return"string"==typeof t?i.parse(t,this):t}}),S=(i.kdf={}).OpenSSL={execute:function(t,i,s,e){e||(e=r.random(8));var h=l.create({keySize:i+s}).compute(t,e),n=r.create(h.words.slice(i),4*s);return h.sigBytes=4*i,m.create({key:h,iv:n,salt:e})}},v=e.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:S}),encrypt:function(t,i,s,e){var h=(e=this.cfg.extend(e)).kdf.execute(s,t.keySize,t.ivSize);e.iv=h.iv;var r=p.encrypt.call(this,t,i,h.key,e);return r.mixIn(h),r},decrypt:function(t,i,s,e){e=this.cfg.extend(e),i=this.IU(i,e.format);var h=e.kdf.execute(s,t.keySize,t.ivSize,i.salt);return e.iv=h.iv,p.decrypt.call(this,t,i,h.key,e)}})}())}({exports:{}}),function(t,i){var s;t.exports=(s=Dx.exports,function(){var t=s,i=t.lib.BlockCipher,e=t.algo,h=[],r=[],n=[],o=[],a=[],l=[],u=[],c=[],f=[],d=[];!function(){for(var t=[],i=0;i<256;i++)t[i]=i<128?i<<1:i<<1^283;var s=0,e=0;for(i=0;i<256;i++){var g=e^e<<1^e<<2^e<<3^e<<4;g=g>>>8^255&g^99,h[s]=g,r[g]=s;var m=t[s],y=t[m],p=t[y],S=257*t[g]^16843008*g;n[s]=S<<24|S>>>8,o[s]=S<<16|S>>>16,a[s]=S<<8|S>>>24,l[s]=S,S=16843009*p^65537*y^257*m^16843008*s,u[g]=S<<24|S>>>8,c[g]=S<<16|S>>>16,f[g]=S<<8|S>>>24,d[g]=S,s?(s=m^t[t[t[p^m]]],e^=t[t[e]]):s=e=1}}();var g=[0,1,2,4,8,16,32,64,128,27,54],m=e.AES=i.extend({fU:function(){if(!this.PU||this.DU!==this.AU){for(var t=this.DU=this.AU,i=t.words,s=t.sigBytes/4,e=4*((this.PU=s+6)+1),r=this.BU=[],n=0;n<e;n++)n<s?r[n]=i[n]:(l=r[n-1],n%s?s>6&&n%s==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]):(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=g[n/s|0]<<24),r[n]=r[n-s]^l);for(var o=this.OU=[],a=0;a<e;a++){if(n=e-a,a%4)var l=r[n];else l=r[n-4];o[a]=a<4||n<=4?l:u[h[l>>>24]]^c[h[l>>>16&255]]^f[h[l>>>8&255]]^d[h[255&l]]}}},encryptBlock:function(t,i){this.LU(t,i,this.BU,n,o,a,l,h)},decryptBlock:function(t,i){var s=t[i+1];t[i+1]=t[i+3],t[i+3]=s,this.LU(t,i,this.OU,u,c,f,d,r),s=t[i+1],t[i+1]=t[i+3],t[i+3]=s},LU:function(t,i,s,e,h,r,n,o){for(var a=this.PU,l=t[i]^s[0],u=t[i+1]^s[1],c=t[i+2]^s[2],f=t[i+3]^s[3],d=4,g=1;g<a;g++){var m=e[l>>>24]^h[u>>>16&255]^r[c>>>8&255]^n[255&f]^s[d++],y=e[u>>>24]^h[c>>>16&255]^r[f>>>8&255]^n[255&l]^s[d++],p=e[c>>>24]^h[f>>>16&255]^r[l>>>8&255]^n[255&u]^s[d++],S=e[f>>>24]^h[l>>>16&255]^r[u>>>8&255]^n[255&c]^s[d++];l=m,u=y,c=p,f=S}m=(o[l>>>24]<<24|o[u>>>16&255]<<16|o[c>>>8&255]<<8|o[255&f])^s[d++],y=(o[u>>>24]<<24|o[c>>>16&255]<<16|o[f>>>8&255]<<8|o[255&l])^s[d++],p=(o[c>>>24]<<24|o[f>>>16&255]<<16|o[l>>>8&255]<<8|o[255&u])^s[d++],S=(o[f>>>24]<<24|o[l>>>16&255]<<16|o[u>>>8&255]<<8|o[255&c])^s[d++],t[i]=m,t[i+1]=y,t[i+2]=p,t[i+3]=S},keySize:8});t.AES=i.gU(m)}(),s.AES)}(Nx);var Gx=Nx.exports,Wx={exports:{}};!function(t,i){var s,e,h;t.exports=((h=Dx.exports).mode.CTR=(e=(s=h.lib.BlockCipherMode.extend()).Encryptor=s.extend({processBlock:function(t,i){var s=this.wU,e=s.blockSize,h=this.kU,r=this.EU;h&&(r=this.EU=h.slice(0),this.kU=void 0);var n=r.slice(0);s.encryptBlock(n,0),r[e-1]=r[e-1]+1|0;for(var o=0;o<e;o++)t[i+o]^=n[o]}}),s.Decryptor=e,s),h.mode.CTR)}(Wx);var Hx=Wx.exports,Ux={exports:{}};!function(t,i){var s;t.exports=(s=Dx.exports,function(){if("function"==typeof ArrayBuffer){var t=s.lib.WordArray,i=t.init,e=t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var s=t.byteLength,e=[],h=0;h<s;h++)e[h>>>2]|=t[h]<<24-h%4*8;i.call(this,e,s)}else i.apply(this,arguments)};e.prototype=t}}(),s.lib.WordArray)}(Ux);var jx=Ux.exports,$x={exports:{}};!function(t,i){var s;t.exports=((s=Dx.exports).pad.NoPadding={pad:function(){},unpad:function(){}},s.pad.NoPadding)}($x);var Yx=$x.exports;const Xx=9e5,Zx={"-4":["MDQxMmQ1MWU5MjFhYTMzODUwMWE4ZGYzN2ViZTE4NTU3ZDViYmRlZDg1Yzk0OGI3YTJkMDBmZTNhZGVlMjdjY2VmNzBiMWVlOWI3MDZjMTIwYTAzZDZlZTNkNmYyOTc5Y2E2NGEzN2Y3YjY4N2E1ZjljZWY2ODYxN2I1NWU5ZmJjMA=="],"-3":["MjAxODAxMjA="],"-2":["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2Vzc2lvbg=="],"-1":["WE1MSHR0cFJlcXVlc3Q=","ZG9jdW1lbnQ=","ZGVmYXVsdFZpZXc=","YQ==","Yg==","bGljZW5zZV9leHBpcmF0aW9uX2RhdGU=","bG9jYXRpb24=","aG9zdG5hbWU=","dGVzdF9kb21haW4=","ZG9tYWlucw==","Y3J5cHRv","U2lnbmF0dXJl","RUNEU0E=","U0hBMjI0d2l0aEVDRFNB","YWxn","Y3VydmU=","c2VjcDI1Nmsx","YWRkRXZlbnRMaXN0ZW5lcg==","cmVtb3ZlRXZlbnRMaXN0ZW5lcg==","bG9hZGVuZA==","ZXJyb3I=","YWJvcnQ=","dGltZW91dA==","cmVzcG9uc2VUZXh0","Q29udGVudC1UeXBl","YXBwbGljYXRpb24vanNvbg==","TWVzc2FnZURpZ2VzdA==","c2hhMjU2","Y3J5cHRvanM=","dXBkYXRlU3RyaW5n","ZGlnZXN0","Y29tcGFueQ==","YXBwVGl0bGU=","bGNqcy1zZXNzaW9u","bG9jYWxTdG9yYWdl","Z2V0SXRlbQ==","c2V0SXRlbQ==","ZA==","dA==","bGNqcy1zZXNzaW9uLTI="],0:["TGljZW5zZQ==","IA==","a2V5","aGFz","ZXhwaXJlZA==","Lg==","dmVyc2lvbg==","aXM=","dG9v","bmV3","b2xk","b3I=","aW52YWxpZA==","MDAwMQ==","SW52YWxpZA==","bnVtYmVy","b2Y=","ZG9tYWlucw==","ZGVwbG95bWVudA==","aW4=","ZG9tYWlu","RGVwbG95bWVudA==","ZG9tYWlu","dmFsaWRhdGlvbg==","ZmFpbGVk","Og==","UE9TVA==","c2VydmVy","cmVzcG9uZGVk","d2l0aA==","dW5leHBlY3RlZA==","dmFsdWU=","cmVxdWVzdA==","VEVTVA==","REVQTE9ZTUVOVA==","S2V5","VGFtcGVyaW5n","YmVlbg==","ZGV0ZWN0ZWQ=","TWlzc2luZw==","TGljZW5zZQ==","aW5mb3JtYXRpb24=","ZG9lcw==","bm90","aW5jbHVkZQ==","cGVybWlzc2lvbg==","dG8=","dXNl","Q2hhcnQ=","M0Q=","WFk=","RGF0YUdyaWQ=","TWFw","UG9sYXI=","RnVubmVs","R2F1Z2U=","UGll","UHlyYW1pZA==","U3BpZGVy","Zm9y","dGhpcw=="]},Kx=Mh,qx=(...t)=>t.slice(1).reduce(((i,s)=>i+Kx.atob(Zx[t[0]][s].toString())),"");let Jx,Qx,tM=!1,iM=new Uint8Array([34]);class sM{set e(t){Jx=t}get e(){Qx={no:!1,oo:!1,ao:!1,lo:!1,uo:!1,co:!1};const t=iM.length>=1?iM[0]:void 0;return void 0!==t&&(Qx.no=!!(1&t),Qx.oo=!!(2&t),Qx.ao=!!(4&t),Qx.lo=!!(8&t),Qx.uo=!!(16&t),Qx.co=!!(32&t)),Qx.co}}let eM=!1;const hM=(t,i)=>{const s=new RegExp(`.{${i}}`,"g");return(t.match(s)||[]).map((t=>parseInt(t,16)))},rM=t=>{if(4===t.byteLength)return`${t[0].toString().padStart(2,"0")}${t[1].toString().padStart(2,"0")}${t[2].toString().padStart(2,"0")}${t[3].toString().padStart(2,"0")}`},nM=t=>t.getFullYear().toString()+(t.getMonth()+1).toString().padStart(2,"0")+t.getDate().toString().padStart(2,"0"),oM=t=>{const i={},s=t.split("-");if(3!==s.length)throw new Error(qx(0,0,1,7,1,12,5));let e=0;const h=Uint8Array.from(atob(s[1]),(t=>t.charCodeAt(0)));e+=1;const r=h.subarray(e,e+=20),n=new DataView(h.buffer).getUint16(e,!0);e+=2;const o=Uint8Array.from(Array(n));for(let t=0;t<n;t+=1)o[t]=h[t+e]^r[t%r.byteLength];const a=new DataView(o.buffer);i.RU=o,e=0;const l=Uint8Array.from(Array(a.getUint16(e,!0)));e+=2,l.set(o.subarray(e,e+=l.byteLength)),iM=new Uint8Array(l);const u=rM(o.subarray(e,e+=4)),c=qx(-3,0);if(!u)throw new Error(qx(0,0,1,7,1,12,5));if(u<c)throw new Error(qx(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5));if(8&l[0]){const t=rM(o.subarray(e,e+=4)),i=nM(new Date);if(!t)throw new Error(qx(0,0,1,7,1,12,5));if(t<i)throw new Error(qx(0,0,1,2,1,3,1,4,5))}i.zU=e;const f=`${s[0]}-${s[1]}`,d=Array.prototype.reduce.call(atob(s[2]),((t,i)=>t+`0${i.charCodeAt(0).toString(16)}`.slice(-2)),"");return uM(f,d)?i:null},aM=t=>{const i=t.slice(0,4);let s=t.slice(5);switch(i){case"0001":{s=s.replace(/-/g,"");const t=Uint8Array.from(hM(s,2)),i=t.slice(36,40),e=new Uint8Array(4),h=(t=>{let i;const s=[];for(let t=0;t<256;t+=1){i=t;for(let t=0;t<8;t+=1)i=1&i?3988292384^i>>>1:i>>>1;s[t]=i}let e=-1;for(let i=0;i<t.length;i+=1)e=e>>>8^s[255&(e^t[i])];return(-1^e)>>>0})(t.slice(0,36));new DataView(e.buffer).setUint32(0,h,!0);const r=t.slice(28,34);let n=0;for(let t=r.length-1;t>0;t-=1)n+=r[t]*2**(8*t);const o=new Date(n);if(nM(o)<qx(-3,0))throw new Error(qx(0,0,1,2,1,3,1,4,5));if(i.every(((t,i)=>e[i]===t)))return;break}case"0002":if(!oM(t))throw new Error(qx(0,0,1,7,1,12,5));return;default:throw new Error(qx(0,0,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5))}throw new Error(qx(0,0,1,2,1,7,1,12,5))},lM=t=>{if(!t)throw new Error(qx(0,14,1,15,1,16,1,17,1,19,1,18,1,2,5));const i=(t[qx(-1,9)]||t[qx(-1,37)]).map((t=>(t||"").trim()));if(i.indexOf(Kx[qx(-1,6)][qx(-1,7)])>-1)return!0;const s=i.filter((t=>t.indexOf("*")>-1));if(mM(Kx[qx(-1,6)][qx(-1,7)],s))return!0;const e=t[qx(-1,8)]||t[qx(-1,38)];if(""!==e&&null!=e){if(mM(Kx[qx(-1,6)][qx(-1,7)],[e]))return!1;if(e===Kx[qx(-1,6)][qx(-1,7)])return!1}throw new Error(qx(0,14,1,20,5))},uM=(t,i)=>{const s=new Fx("secp256k1").keyFromPublic(qx(-4,0),"hex"),e=Lx(t).toString();return s.verify(e,i)},cM=t=>{switch(t.slice(0,4)){case"0001":return(t=>{let i,s="";try{const i=t.split("-"),e=i[1],h=i[2],r=i[3];if(!uM(h,r))throw new Error(qx(0,21,1,2,1,7,1,12,5));const n=Rx.parse(h);s=Gx.decrypt({ciphertext:Rx.parse(e)},n,{mode:Hx,padding:Yx,iv:Rx.parse("00000000000000000000000000000001")}).toString(Vx)}catch(t){throw new Error(qx(0,21,1,2,1,7,1,12,5))}try{i=JSON.parse(s)}catch(t){throw new Error(qx(0,21,1,2,1,7,1,12,5))}if(void 0===i[qx(-1,5)]||null===i[qx(-1,4)]||!i[qx(-1,9)])throw new Error(qx(0,21,1,2,1,7,1,12,5));const e=parseInt(qx(-3,0),10)||Number(parseInt(qx(-3,0),10));if(i[qx(-1,5)]<e)throw new Error(qx(0,21,1,2,1,3,1,4,5));let h=!1;try{h=lM(i)}catch(t){throw new Error(qx(0,14,1,22,5))}return h})(t);case"0002":return(t=>{const i=oM(t);if(!i)throw new Error(qx(0,0,1,7,1,12,5));let s,e="";try{const t=i.RU.slice(i.zU,i.zU+16),s=new DataView(t.buffer),h=new Int32Array(4);for(let t=0;t<h.length;t+=1)h[t]=s.getInt32(4*t,!1);const r=jx.create(Array.from(h)),n=i.zU+16,o=i.RU.slice(n,i.RU.length),a=new DataView(o.buffer),l=new Int32Array(Math.floor(o.byteLength/4));for(let t=0;t<l.length;t+=1)l[t]=a.getInt32(4*t,!1);const u=jx.create(Array.from(l)),c=Gx.decrypt({ciphertext:u},r,{mode:Hx,padding:Yx,iv:Rx.parse("00000000000000000000000000000001")});e=Kx.atob(c.toString(Vx))}catch(t){throw new Error(qx(0,21,1,2,1,7,1,12,5))}try{s=JSON.parse(e)}catch(t){throw new Error(qx(0,21,1,2,1,7,1,12,5))}if(!s[qx(-1,37)])throw new Error(qx(0,21,1,2,1,7,1,12,5));let h=!1;try{h=lM(s)}catch(t){throw new Error(qx(0,14,1,22,5))}return h})(t);default:throw new Error(qx(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5))}},fM=(t,i)=>{switch(t.slice(0,4)){case"0001":((t,i)=>{if(!i)throw new Error(qx(0,39,1,40,1,41,5));const s=t.split("-"),e=s[1].slice(1),h=s[2],r=s[3];if(!uM(`${e}-${h}`,r))throw new Error(qx(0,21,1,2,1,7,1,12,5));const n=Uint8Array.from(hM(h,2));let o=0;for(let t=n.length-1;t>0;t-=1)o+=n[t]*2**(8*t);if(o<(parseInt(qx(-3,0),10)||Number(parseInt(qx(-3,0),10))))throw new Error(qx(0,21,1,2,1,3,1,4,5));const a=Int32Array.from(hM(e,8)),l=Ox(i[qx(-1,31)]).toString(Rx),u=Int32Array.from(hM(l,8)),c=Ox(i[qx(-1,32)]).toString(Rx),f=Int32Array.from(hM(c,8)),d=new Int32Array(u.length);for(let t=0;t<d.length;t+=1)d[t]=u[t]^f[t];if(!a.every(((t,i)=>d[i]===t)))throw new Error(qx(0,21,1,2,1,7,1,12,5))})(t,i);break;case"0002":((t,i)=>{if(!i)throw new Error(qx(0,39,1,40,1,41,5));const s=oM(t);if(!s)throw new Error(qx(0,0,1,7,1,12,5));const e=s.RU.slice(s.zU,s.RU.length),h=new DataView(e.buffer),r=new Int32Array(8);for(let t=0;t<r.length;t+=1)r[t]=h.getInt32(4*t,!1);const n=Ox(i[qx(-1,31)]).toString(Rx),o=Int32Array.from(hM(n,8)),a=Ox(i[qx(-1,32)]).toString(Rx),l=Int32Array.from(hM(a,8)),u=new Int32Array(o.length);for(let t=0;t<u.length;t+=1)u[t]=o[t]^l[t];if(!r.every(((t,i)=>u[i]===t)))throw new Error(qx(0,21,1,2,1,7,1,12,5))})(t,i);break;default:throw new Error(qx(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5))}},dM=(t,i,s=!0)=>{let e;eM=!1,i instanceof Ca?(e=i.un,i.Pt()):"container"in i&&(e="string"==typeof i.container?Mh.document.getElementById(i.container):i.container);const h=!!e&&(e===Mh.document.body||Mh.document.body.contains(e)),r=e&&h?e:document.body,n=Mh.document.createElement("div");n.id="lcjs-error",r.append(n),n.style.width="100%",n.style.height="100%",n.style.backgroundColor="black",n.style.boxSizing="border-box",n.style.padding="20px",n.style.font="Arial",n.style.fontSize="20px";let o=(t||"LICENSE_ERROR").toLowerCase().split("_").join(" ");o=(s?qx(0,0,1,2,1,23,1,24,25,1):"")+o.charAt(0).toUpperCase()+o.substr(1);const a=Mh.document.createElement("p1");n.append(a),a.innerHTML=o,a.style.color="red"},gM=(t,i,s)=>{i?(t[qx(-1,17)](qx(-1,19),s),t[qx(-1,17)](qx(-1,20),s),t[qx(-1,17)](qx(-1,21),s),t[qx(-1,17)](qx(-1,22),s)):(t[qx(-1,18)](qx(-1,19),s),t[qx(-1,18)](qx(-1,20),s),t[qx(-1,18)](qx(-1,21),s),t[qx(-1,18)](qx(-1,22),s))},mM=(t,i)=>{const s=t.split(".").reverse();return i.some((t=>{const i=t.split(".").reverse();let e=!1;const h=i.findIndex((t=>"*"===t)),r=s.every(((t,s)=>{if(!e){if(!(s<i.length))return!1;if(e="*"===i[s]&&s+1>2,!e&&t!==i[s])return!1}return!0}));return!(h>s.length-1||!r)}))},yM=i=>{const s=()=>{};let e,h,r;if(new Mh.Image instanceof Mh.HTMLImageElement){const i=new Mh.Image;i.src=nS,h=new Uu({source:i,fitMode:t.ImageFitMode.Stretch});const s=new Mh.Image;s.src=rS,r=new Uu({source:s,fitMode:t.ImageFitMode.Stretch})}else if(Mh.lcjs_setup){const i=new Mh.Image;i.src=nS;const s=Mh.lcjs_setup(i.naturalWidth,i.naturalHeight);s.getContext("2d").drawImage(i,0,0),h=new Uu({source:s,fitMode:t.ImageFitMode.Stretch}),r=h}else h=new Be({color:ve("#f00")}),r=h;const n=t=>{if(t.Rf&&(t.VU&&(r?t.Rf.eh(r):Mh.requestAnimationFrame((()=>n(t)))),t.VU||(h?t.Rf.eh(h):Mh.requestAnimationFrame((()=>n(t))))),t.Rf){const i=(t.VU,150),s=(t.VU,32),e=t.Jt.Ei({x:t.Jt.x.getInnerEnd(),y:t.Jt.y.getInnerStart()},{x:-(3+i),y:3}),h=t.Jt.Ei({x:t.Jt.x.getInnerEnd(),y:t.Jt.y.getInnerStart()},{x:-3,y:3+s}),r={x:h.x-e.x,y:h.y-e.y};t.Rf.oh(e).Gt(r)}!1===t.VU&&(6530!==nS.length&&dM(qx(0,36,1,38,5),i,!1),"W"!==nS[3361]&&dM(qx(0,36,1,38,5),i,!1)),!0===t.VU&&(8542!==rS.length&&dM(qx(0,36,1,38,5),i,!1),"2"!==rS[571]&&dM(qx(0,36,1,38,5),i,!1)),e&&e.te()};return e=i.zF("logo",Number.MAX_SAFE_INTEGER),r=>{const o={Jt:r,VU:!1};let a,l;return o.NU=()=>{a=Mh.setTimeout((()=>{l=i.cn(t.MouseStyles.Point),void 0!==o.Rf&&(o.Rf.setMouseClickEventHandler(pM),o.Rf.setTouchEndEventHandler(pM)),o.VU=!0,n(o)}),3e3)},o.GU=()=>{Mh.clearTimeout(a),i.fn(l),void 0!==o.Rf&&(o.Rf.setMouseClickEventHandler(s),o.Rf.setTouchEndEventHandler(s)),o.VU=!1,n(o)},(t=>{t.Rf&&t.Rf.dispose(),e&&(t.Rf=e.hh(t.Jt).eh(h).setMouseInteractions(!0).setMouseClickEventHandler(s).setTouchEndEventHandler(s).sh(rh),t.NU&&t.Rf.setMouseEnterEventHandler(t.NU),t.GU&&t.Rf.setMouseLeaveEventHandler(t.GU),n(t))})(o),{le:()=>n(o),Pt:()=>(t=>{t.Rf&&(t.Rf.dispose(),t.Rf=void 0,t.NU=()=>{},t.GU=()=>{})})(o)}}},pM=()=>Mh.open("https://lightningchart.com/lightningchart-js/"),SM={Angola:{name:"Angola",ISO_A3:"AGO"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Gabon:{name:"Gabon",ISO_A3:"GAB"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Namibia:{name:"Namibia",ISO_A3:"NAM"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Oman:{name:"Oman",ISO_A3:"OMN"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},Somalia:{name:"Somalia",ISO_A3:"SOM"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"}},vM={Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Armenia:{name:"Armenia",ISO_A3:"ARM"},Australia:{name:"Australia",ISO_A3:"AUS"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},China:{name:"China",ISO_A3:"CHN"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},India:{name:"India",ISO_A3:"IND"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Nepal:{name:"Nepal",ISO_A3:"NPL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Philippines:{name:"Philippines",ISO_A3:"PHL"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Palestine:{name:"Palestine",ISO_A3:"PSE"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Russia:{name:"Russia",ISO_A3:"RUS"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Singapore:{name:"Singapore",ISO_A3:"SGP"},Syria:{name:"Syria",ISO_A3:"SYR"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Yemen:{name:"Yemen",ISO_A3:"YEM"}},bM={"New South Wales":{name:"New South Wales"},Victoria:{name:"Victoria"},Queensland:{name:"Queensland"},"South Australia":{name:"South Australia"},"Western Australia":{name:"Western Australia"},Tasmania:{name:"Tasmania"},"Northern Territory":{name:"Northern Territory"},"Australian Capital Territory":{name:"Australian Capital Territory"},"Other Territories":{name:"Other Territories"}},xM={"British Columbia":{name:"British Columbia"},Quebec:{name:"Quebec"},Nunavut:{name:"Nunavut"},"Prince Edward Island":{name:"Prince Edward Island"},Saskatchewan:{name:"Saskatchewan"},Yukon:{name:"Yukon"},Manitoba:{name:"Manitoba"},Ontario:{name:"Ontario"},"New Brunswick":{name:"New Brunswick"},"Northwest Territories":{name:"Northwest Territories"},Alberta:{name:"Alberta"},"Newfoundland and Labrador":{name:"Newfoundland and Labrador"},"Nova Scotia":{name:"Nova Scotia"}},MM={Albania:{name:"Albania",ISO_A3:"ALB"},Austria:{name:"Austria",ISO_A3:"AUT"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Denmark:{name:"Denmark",ISO_A3:"DNK"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Finland:{name:"Finland",ISO_A3:"FIN"},France:{name:"France",ISO_A3:"FRA"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Greece:{name:"Greece",ISO_A3:"GRC"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Italy:{name:"Italy",ISO_A3:"ITA"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Malta:{name:"Malta",ISO_A3:"MLT"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Poland:{name:"Poland",ISO_A3:"POL"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Romania:{name:"Romania",ISO_A3:"ROU"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Russia:{name:"Russia",ISO_A3:"RUS"},Turkey:{name:"Turkey",ISO_A3:"TUR"}},_M={Aruba:{name:"Aruba",ISO_A3:"ABW"},Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},Angola:{name:"Angola",ISO_A3:"AGO"},Anguilla:{name:"Anguilla",ISO_A3:"AIA"},Albania:{name:"Albania",ISO_A3:"ALB"},Aland:{name:"Aland",ISO_A3:"ALA"},Andorra:{name:"Andorra",ISO_A3:"AND"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Argentina:{name:"Argentina",ISO_A3:"ARG"},Armenia:{name:"Armenia",ISO_A3:"ARM"},"American Samoa":{name:"American Samoa",ISO_A3:"ASM"},Antarctica:{name:"Antarctica",ISO_A3:"ATA"},"French Southern and Antarctic Lands":{name:"French Southern and Antarctic Lands",ISO_A3:"ATF"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},Australia:{name:"Australia",ISO_A3:"AUS"},Austria:{name:"Austria",ISO_A3:"AUT"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belize:{name:"Belize",ISO_A3:"BLZ"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},Canada:{name:"Canada",ISO_A3:"CAN"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Chile:{name:"Chile",ISO_A3:"CHL"},China:{name:"China",ISO_A3:"CHN"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Cyprus No Mans Area":{name:"Cyprus No Mans Area",ISO_A3:"-99"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},"Cook Islands":{name:"Cook Islands",ISO_A3:"COK"},Colombia:{name:"Colombia",ISO_A3:"COL"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Curaçao":{name:"Curaçao",ISO_A3:"CUW"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},"Northern Cyprus":{name:"Northern Cyprus",ISO_A3:"-99"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Dominica:{name:"Dominica",ISO_A3:"DMA"},Denmark:{name:"Denmark",ISO_A3:"DNK"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},"Dhekelia Sovereign Base Area":{name:"Dhekelia Sovereign Base Area",ISO_A3:"-99"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Finland:{name:"Finland",ISO_A3:"FIN"},Fiji:{name:"Fiji",ISO_A3:"FJI"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},France:{name:"France",ISO_A3:"FRA"},"Faroe Islands":{name:"Faroe Islands",ISO_A3:"FRO"},"Federated States of Micronesia":{name:"Federated States of Micronesia",ISO_A3:"FSM"},Gabon:{name:"Gabon",ISO_A3:"GAB"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Guernsey:{name:"Guernsey",ISO_A3:"GGY"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Greece:{name:"Greece",ISO_A3:"GRC"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},Guam:{name:"Guam",ISO_A3:"GUM"},Guyana:{name:"Guyana",ISO_A3:"GUY"},"Hong Kong S.A.R.":{name:"Hong Kong S.A.R.",ISO_A3:"HKG"},"Heard Island and McDonald Islands":{name:"Heard Island and McDonald Islands",ISO_A3:"HMD"},Honduras:{name:"Honduras",ISO_A3:"HND"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},"Isle of Man":{name:"Isle of Man",ISO_A3:"IMN"},India:{name:"India",ISO_A3:"IND"},"Indian Ocean Territories":{name:"Indian Ocean Territories",ISO_A3:"-99"},"British Indian Ocean Territory":{name:"British Indian Ocean Territory",ISO_A3:"IOT"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Israel:{name:"Israel",ISO_A3:"ISR"},Italy:{name:"Italy",ISO_A3:"ITA"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},Jersey:{name:"Jersey",ISO_A3:"JEY"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},"Baykonur Cosmodrome":{name:"Baykonur Cosmodrome",ISO_A3:"-99"},"Siachen Glacier":{name:"Siachen Glacier",ISO_A3:"-99"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},Kiribati:{name:"Kiribati",ISO_A3:"KIR"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},Liechtenstein:{name:"Liechtenstein",ISO_A3:"LIE"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},"Macao S.A.R":{name:"Macao S.A.R",ISO_A3:"MAC"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Mexico:{name:"Mexico",ISO_A3:"MEX"},"Marshall Islands":{name:"Marshall Islands",ISO_A3:"MHL"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},"Northern Mariana Islands":{name:"Northern Mariana Islands",ISO_A3:"MNP"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Namibia:{name:"Namibia",ISO_A3:"NAM"},"New Caledonia":{name:"New Caledonia",ISO_A3:"NCL"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Niue:{name:"Niue",ISO_A3:"NIU"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Nepal:{name:"Nepal",ISO_A3:"NPL"},"New Zealand":{name:"New Zealand",ISO_A3:"NZL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Panama:{name:"Panama",ISO_A3:"PAN"},"Pitcairn Islands":{name:"Pitcairn Islands",ISO_A3:"PCN"},Peru:{name:"Peru",ISO_A3:"PER"},"Spratly Islands":{name:"Spratly Islands",ISO_A3:"-99"},Philippines:{name:"Philippines",ISO_A3:"PHL"},Palau:{name:"Palau",ISO_A3:"PLW"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},Poland:{name:"Poland",ISO_A3:"POL"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Palestine:{name:"Palestine",ISO_A3:"PSE"},"French Polynesia":{name:"French Polynesia",ISO_A3:"PYF"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Romania:{name:"Romania",ISO_A3:"ROU"},Russia:{name:"Russia",ISO_A3:"RUS"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},Singapore:{name:"Singapore",ISO_A3:"SGP"},"South Georgia and South Sandwich Islands":{name:"South Georgia and South Sandwich Islands",ISO_A3:"SGS"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Solomon Islands":{name:"Solomon Islands",ISO_A3:"SLB"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Somalia:{name:"Somalia",ISO_A3:"SOM"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},"Sao Tome and Principe":{name:"Sao Tome and Principe",ISO_A3:"STP"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},"East Timor":{name:"East Timor",ISO_A3:"TLS"},Tonga:{name:"Tonga",ISO_A3:"TON"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Tuvalu:{name:"Tuvalu",ISO_A3:"TUV"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},"United States Minor Outlying Islands":{name:"United States Minor Outlying Islands",ISO_A3:"UMI"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"US Naval Base Guantanamo Bay":{name:"US Naval Base Guantanamo Bay",ISO_A3:"-99"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Vanuatu:{name:"Vanuatu",ISO_A3:"VUT"},"Wallis and Futuna":{name:"Wallis and Futuna",ISO_A3:"WLF"},"Akrotiri Sovereign Base Area":{name:"Akrotiri Sovereign Base Area",ISO_A3:"-99"},Samoa:{name:"Samoa",ISO_A3:"WSM"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"}},AM={Alabama:{name:"Alabama"},Alaska:{name:"Alaska"},Arizona:{name:"Arizona"},Arkansas:{name:"Arkansas"},California:{name:"California"},Colorado:{name:"Colorado"},Connecticut:{name:"Connecticut"},Delaware:{name:"Delaware"},"District of Columbia":{name:"District of Columbia"},Florida:{name:"Florida"},Georgia:{name:"Georgia"},Hawaii:{name:"Hawaii"},Idaho:{name:"Idaho"},Illinois:{name:"Illinois"},Indiana:{name:"Indiana"},Iowa:{name:"Iowa"},Kansas:{name:"Kansas"},Kentucky:{name:"Kentucky"},Louisiana:{name:"Louisiana"},Maine:{name:"Maine"},Maryland:{name:"Maryland"},Massachusetts:{name:"Massachusetts"},Michigan:{name:"Michigan"},Minnesota:{name:"Minnesota"},Mississippi:{name:"Mississippi"},Missouri:{name:"Missouri"},Montana:{name:"Montana"},Nebraska:{name:"Nebraska"},Nevada:{name:"Nevada"},"New Hampshire":{name:"New Hampshire"},"New Jersey":{name:"New Jersey"},"New Mexico":{name:"New Mexico"},"New York":{name:"New York"},"North Carolina":{name:"North Carolina"},"North Dakota":{name:"North Dakota"},Ohio:{name:"Ohio"},Oklahoma:{name:"Oklahoma"},Oregon:{name:"Oregon"},Pennsylvania:{name:"Pennsylvania"},"Rhode Island":{name:"Rhode Island"},"South Carolina":{name:"South Carolina"},"South Dakota":{name:"South Dakota"},Tennessee:{name:"Tennessee"},Texas:{name:"Texas"},Utah:{name:"Utah"},Vermont:{name:"Vermont"},Virginia:{name:"Virginia"},Washington:{name:"Washington"},"West Virginia":{name:"West Virginia"},Wisconsin:{name:"Wisconsin"},Wyoming:{name:"Wyoming"}},wM={Anguilla:{name:"Anguilla",ISO_A3:"AIA"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Canada:{name:"Canada",ISO_A3:"CAN"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},Dominica:{name:"Dominica",ISO_A3:"DMA"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Mexico:{name:"Mexico",ISO_A3:"MEX"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"}},kM={Argentina:{name:"Argentina",ISO_A3:"ARG"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Chile:{name:"Chile",ISO_A3:"CHL"},Colombia:{name:"Colombia",ISO_A3:"COL"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},Guyana:{name:"Guyana",ISO_A3:"GUY"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Panama:{name:"Panama",ISO_A3:"PAN"},Peru:{name:"Peru",ISO_A3:"PER"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Honduras:{name:"Honduras",ISO_A3:"HND"}},CM={World:_M,USA:AM,NorthAmerica:wM,SouthAmerica:kM,Canada:xM,Europe:MM,Asia:vM,Africa:SM,Australia:bM},TM={Solid:qg},FM=(t,i)=>{const s=(t=>{const i=new Be({color:t.uiStrokeColorContrastHigh}),s=new Be({color:t.uiStrokeColorContrastMedium}),e=new Be({color:t.uiStrokeColorContrastLow}),h=new ra({family:t.fontFamily,weight:"normal",style:"normal"}),r=h.setSize(18*t.fontScaler),n=h.setSize(16*t.fontScaler),o=h.setSize(14*t.fontScaler),a=h.setSize(10*t.fontScaler),l=h.withMutations((i=>i.set("size",14*t.fontScaler).set("weight","bold"))),u=h.setSize(13*t.fontScaler),c=new Qn({thickness:2,fillStyle:e}),f=new Be({color:t.dataHighlightOverlayColor}),d=new Qn({thickness:2,fillStyle:t.legendBackgroundBorderFillStyle}),g=t.dataColorPalette.map((t=>new Be({color:t.stroke}))),m=t=>g[t%g.length],y=g.map((t=>new Qn({thickness:2,fillStyle:t}))),p=t=>y[t%y.length],S=t.dataColorPalette.map((t=>new Be({color:t.border}))).map((t=>new Qn({thickness:2,fillStyle:t}))),v=t=>S[t%S.length],b=t.dataColorPalette.map((t=>{const i=t.area;return new sh({angle:180,stops:[{color:cr(i,Se(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:cr(i,Se(0,0,0,i.getA()),.3),offset:1}]})})),x=t=>b[t%b.length],M=t.dataColorPaletteInverted.map((t=>{const i=t.area;return new sh({angle:180,stops:[{color:cr(i,Se(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:cr(i,Se(0,0,0,i.getA()),.3),offset:1}]})})),_=t=>M[t%M.length],A=t.dataColorPaletteInverted.map((t=>new Be({color:t.border}))).map((t=>new Qn({thickness:2,fillStyle:t}))),w=t=>A[t%A.length],k=new Be({color:t.dataColorPositive}),C=new Be({color:t.dataColorNegative}),T=new Qn({thickness:1,fillStyle:new Be({color:t.dataStrokeColorContrastHigh.setA(50)})}),F=new Qn({thickness:2,fillStyle:t.axisLineFillStyle}),I=rh,P=new Be({color:Se(0,0,0,1)}),D=new Qn({thickness:1,fillStyle:t.axisGridMajorFillStyle}),B=new Qn({thickness:1,fillStyle:t.axisTickMajorFillStyle}),O=o,L=t.axisLabelMajorFillStyle,E=new Qn({thickness:1,fillStyle:t.axisGridMajorFillStyle}),R=new Qn({thickness:1,fillStyle:t.axisTickMajorFillStyle}),z=o,V=t.axisLabelMajorFillStyle,N=new Qn({thickness:1,fillStyle:t.axisGridMinorFillStyle}),G=new Qn({thickness:1,fillStyle:t.axisTickMinorFillStyle}),W=a,H=t.axisLabelMinorFillStyle,U=dc,j=new cc({gridStrokeStyle:D,tickStyle:B,tickLength:50,tickPadding:-14,labelFont:O,labelPadding:0,labelFillStyle:L}),$=new cc({gridStrokeStyle:E,tickStyle:R,tickLength:7,tickPadding:0,labelFont:z,labelPadding:0,labelFillStyle:V}),Y=new cc({gridStrokeStyle:N,tickStyle:G,tickLength:4,tickPadding:5,labelFont:W,labelPadding:0,labelFillStyle:H}),X=new Bc({extremeTickStyle:U,majorTickStyle:$,minorTickStyle:Y}),Z=new kc({greatTickStyle:j,majorTickStyle:$,minorTickStyle:Y}),K=new Hc({majorTickStyle:$,minorTickStyle:Y}),q=new Be({color:t.dataHighlightOverlayColor}),J=new Qn({thickness:1,fillStyle:s}),Q=new Qn({thickness:2,fillStyle:s}),tt=t=>new ma.Triangulated({shape:"sphere",size:10,fillStyle:g[t%g.length]}),it=g[0],st=t.uiTextFillStyle,et=t.legendBackgroundFillStyle,ht=new Qn({thickness:1,fillStyle:t.legendBackgroundBorderFillStyle}),rt=dr(t.legendButtonDefaultColor),nt=new Qn({thickness:1,fillStyle:i}),ot=new Qn({thickness:1,fillStyle:t.cursorGridFillStyle});let at={isDark:t.isDark,effect:t.effect,effectsText:t.effectsText,effectsDashboardSplitters:t.effectsDashboardSplitters,lcjsBackgroundFillStyle:t.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:rh,highlightColorOffset:t.highlightColorOffset,highlightColorOffsetAxisOverlay:t.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new Qn({thickness:4,fillStyle:t.dashboardSplitterFillStyle}),chartXYBackgroundFillStyle:t.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:rh,chartXYTitleFont:r,chartXYTitleFillStyle:t.titleFillStyle,chartXYSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:c,chartXYZoomingRectangleFillStyle:f,chartXYZoomingRectangleStrokeStyle:d,chartXYFittingRectangleFillStyle:f,chartXYFittingRectangleStrokeStyle:d,lineSeriesStrokeStyle:p,pointLineSeriesStrokeStyle:p,pointLineSeriesFillStyle:m,pointSeriesFillStyle:m,ellipseSeriesFillStyle:m,ellipseSeriesStrokeStyle:p,polygonSeriesFillStyle:m,polygonSeriesStrokeStyle:p,rectangleSeriesFillStyle:m,rectangleSeriesStrokeStyle:rh,segmentSeriesStrokeStyle:p,boxSeriesBodyFillStyle:m(0),boxSeriesBodyStrokeStyle:rh,boxSeriesStrokeStyle:new Qn({thickness:1,fillStyle:g[0]}),boxSeriesMedianStrokeStyle:new Qn({thickness:1,fillStyle:new Be({color:Se(0,0,0)})}),ohlcCandleBodyFillStylePositive:k,ohlcCandleBodyFillStyleNegative:C,ohlcCandleBodyStrokeStylePositive:rh,ohlcCandleBodyStrokeStyleNegative:rh,ohlcCandleStrokeStyle:new Qn({thickness:1,fillStyle:new Be({color:t.uiStrokeColorContrastHigh})}),ohlcBarStrokeStylePositive:new Qn({thickness:2,fillStyle:k}),ohlcBarStrokeStyleNegative:new Qn({thickness:2,fillStyle:C}),heatmapGridSeriesFillStyle:m,heatmapGridSeriesWireframeStyle:T,heatmapScrollingGridSeriesFillStyle:m,heatmapScrollingGridSeriesWireframeStyle:T,areaRangeSeriesFillStyle:x,areaRangeSeriesStrokeStyle:v,areaRangeSeriesFillStyleInverted:_,areaRangeSeriesStrokeStyleInverted:w,areaSeriesBipolarHighFillStyle:x,areaSeriesBipolarHighStrokeStyle:v,areaSeriesBipolarLowFillStyle:_,areaSeriesBipolarLowStrokeStyle:w,areaSeriesPositiveFillStyle:x,areaSeriesPositiveStrokeStyle:v,areaSeriesNegativeFillStyle:_,areaSeriesNegativeStrokeStyle:w,xAxisTitleFont:n,xAxisTitleFillStyle:t.axisTitleFillStyle,xAxisStrokeStyle:F,xAxisNibStyle:I,xAxisOverlayStyle:P,xAxisZoomingBandFillStyle:f,xAxisZoomingBandStrokeStyle:rh,xAxisNumericTicks:X,xAxisDateTimeTicks:Z,xAxisTimeTicks:K,yAxisTitleFont:n,yAxisTitleFillStyle:t.axisTitleFillStyle,yAxisStrokeStyle:F,yAxisNibStyle:I,yAxisOverlayStyle:P,yAxisZoomingBandFillStyle:f,yAxisZoomingBandStrokeStyle:rh,yAxisNumericTicks:X,yAxisDateTimeTicks:Z,yAxisTimeTicks:K,bandFillStyle:q,bandStrokeStyle:J,constantLineStrokeStyle:Q,barChartBackgroundFillStyle:t.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:rh,barChartTitleFont:r,barChartTitleFillStyle:t.titleFillStyle,barChartSeriesBackgroundFillStyle:Ie,barChartSeriesBackgroundStrokeStyle:rh,barChartBarFillStyle:m,barChartBarStrokeStyle:rh,barChartValueAxisTitleFont:n,barChartValueAxisTitleFillStyle:t.axisTitleFillStyle,barChartValueAxisStrokeStyle:F,barChartValueAxisTicks:X.setMajorTickStyle((t=>t.setGridStrokeStyle(rh))).setMinorTickStyle((t=>fc(t)?t.setGridStrokeStyle(rh):t)),barChartCategoryAxisTitleFont:n,barChartCategoryAxisTitleFillStyle:t.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:F,barChartCategoryLabels:{formatter:(t,i,s)=>i,labelFillStyle:X.majorTickStyle.labelFillStyle,labelFont:X.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,tickStyle:X.majorTickStyle.tickStyle,tickLength:0},barChartValueLabelsAfterBars:{position:"after-bar",formatter:(t,i,s)=>t.chart.valueAxis.formatValue(s),labelFillStyle:X.majorTickStyle.labelFillStyle,labelFont:X.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:(t,i,s)=>t.chart.valueAxis.formatValue(s),labelFillStyle:X.majorTickStyle.labelFillStyle,labelFont:X.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},chart3DBackgroundFillStyle:t.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:rh,chart3DTitleFont:r,chart3DTitleFillStyle:t.titleFillStyle,chart3DSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:c,chart3DBoundingBoxStrokeStyle:rh,xAxis3DTitleFont:n,xAxis3DTitleFillStyle:t.axisTitleFillStyle,xAxis3DStrokeStyle:F,xAxis3DNumericTicks:X,xAxis3DDateTimeTicks:Z,xAxis3DTimeTicks:K,yAxis3DTitleFont:n,yAxis3DTitleFillStyle:t.axisTitleFillStyle,yAxis3DStrokeStyle:F,yAxis3DNumericTicks:X,yAxis3DDateTimeTicks:Z,yAxis3DTimeTicks:K,zAxis3DTitleFont:n,zAxis3DTitleFillStyle:t.axisTitleFillStyle,zAxis3DStrokeStyle:F,zAxis3DNumericTicks:X,zAxis3DDateTimeTicks:Z,zAxis3DTimeTicks:K,lineSeries3DStrokeStyle:p,pointLineSeries3DStrokeStyle:p,pointLineSeries3DPointStyle:tt,pointSeries3DPointStyle:tt,pointCloudSeries3DPointStyle:t=>new ma.Pixelated({size:5,fillStyle:g[t%g.length]}),surfaceGridSeries3DFillStyle:m,surfaceGridSeries3DWireframeStyle:T,surfaceScrollingGridSeries3DFillStyle:m,surfaceScrollingGridSeries3DWireframeStyle:T,boxSeries3DFillStyle:m,polarChartBackgroundFillStyle:t.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:rh,polarChartTitleFont:r,polarChartTitleFillStyle:t.titleFillStyle,polarChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:c,polarSectorFillStyle:q,polarSectorStrokeStyle:J,polarAmplitudeAxisTitleFont:n,polarAmplitudeAxisTitleFillStyle:t.axisTitleFillStyle,polarAmplitudeAxisStrokeStyle:F,polarAmplitudeAxisNumericTicks:X,polarAmplitudeAxisDateTimeTicks:Z,polarAmplitudeAxisTimeTicks:K,polarRadialAxisTitleFont:n,polarRadialAxisTitleFillStyle:t.axisTitleFillStyle,polarRadialAxisStrokeStyle:F,polarRadialAxisTickStyle:$,polarLineSeriesStrokeStyle:p,polarPointLineSeriesFillStyle:m,polarPointLineSeriesStrokeStyle:p,polarPointSeriesFillStyle:m,polarPolygonSeriesFillStyle:x,polarPolygonSeriesStrokeStyle:v,polarAreaSeriesFillStyle:x,polarAreaSeriesStrokeStyle:v,polarHeatmapSeriesFillStyle:m,mapChartBackgroundFillStyle:t.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:rh,mapChartTitleFont:r,mapChartTitleFillStyle:t.titleFillStyle,mapChartFillStyle:it,mapChartStrokeStyle:new Qn({thickness:1,fillStyle:new Be({color:t.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:Ie,mapChartOutlierRegionStrokeStyle:new Qn({thickness:1,fillStyle:e}),mapChartSeparateRegionFillStyle:et,mapChartSeparateRegionStrokeStyle:ht,dataGridBackgroundFillStyle:t.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:rh,dataGridTitleFont:r,dataGridTitleFillStyle:t.titleFillStyle,dataGridTextFont:o,dataGridTextFillStyle:it,dataGridCellBackgroundFillStyle:new Be({color:t.uiBackgroundColor}),dataGridBorderStrokeStyle:new Qn({thickness:.4,fillStyle:new Be({color:t.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:rh,dataGridScrollBarFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:ht,dataGridScrollBarButtonFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:ht,dataGridScrollBarButtonArrowFillStyle:rt,dataGridScrollBarButtonArrowStrokeStyle:ht,sparkLineChartStrokeStyle:p(0),sparkPointChartFillStyle:m(0),sparkBarChartFillStyle:m(0),sparkBarChartStrokeStyle:v(0),sparkAreaChartFillStyle:x(0),sparkAreaChartStrokeStyle:v(0),sparkPieChartFillStyle:m,sparkPieChartStrokeStyle:ht,sparkChartBandFillStyle:q,sparkChartBandStrokeStyle:J,sparkChartConstantLineStrokeStyle:Q,spiderChartBackgroundFillStyle:t.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:rh,spiderChartTitleFont:r,spiderChartTitleFillStyle:t.titleFillStyle,spiderChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:c,spiderChartWebStyle:new Qn({thickness:2,fillStyle:e}),spiderChartScaleLabelFillStyle:t.axisLabelMajorFillStyle,spiderChartScaleLabelFont:o,spiderChartAxisLabelFillStyle:t.axisTitleFillStyle,spiderChartAxisLabelFont:n,spiderChartAxisStrokeStyle:new Qn({thickness:2,fillStyle:s}),spiderChartAxisNibStrokeStyle:new Qn({thickness:2,fillStyle:i}),spiderSeriesFillStyle:x,spiderSeriesStrokeStyle:v,spiderSeriesPointFillStyle:m,pieChartBackgroundFillStyle:t.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:rh,pieChartTitleFont:r,pieChartTitleFillStyle:t.titleFillStyle,pieChartSliceFillStylePalette:m,pieChartSliceStrokeStyle:ht,pieChartSliceLabelFont:u,pieChartSliceLabelFillStyle:t.uiTextFillStyle,pieChartConnectorStrokeStyle:nt,funnelChartBackgroundFillStyle:t.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:rh,funnelChartTitleFont:r,funnelChartTitleFillStyle:t.titleFillStyle,funnelChartSliceFillStylePalette:m,funnelChartSliceStrokeStyle:ht,funnelChartSliceLabelFont:u,funnelChartSliceLabelFillStyle:t.uiTextFillStyle,funnelChartConnectorStrokeStyle:nt,pyramidChartBackgroundFillStyle:t.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:rh,pyramidChartTitleFont:r,pyramidChartTitleFillStyle:t.titleFillStyle,pyramidChartSliceFillStylePalette:m,pyramidChartSliceStrokeStyle:ht,pyramidChartSliceLabelFont:u,pyramidChartSliceLabelFillStyle:t.uiTextFillStyle,pyramidChartConnectorStrokeStyle:nt,gaugeChartBackgroundFillStyle:t.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:rh,gaugeChartTitleFont:r,gaugeChartTitleFillStyle:t.titleFillStyle,gaugeChartEmptyGaugeFillStyle:new Be({color:t.uiBackgroundColor}),gaugeChartEmptyGaugeStrokeStyle:ht,gaugeChartGaugeFillStyle:it,gaugeChartIntervalLabelsFillStyle:st,gaugeChartIntervalLabelsFont:u,gaugeChartValueLabelFillStyle:st,gaugeChartValueLabelFont:u,uiPanelBackgroundFillStyle:t.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:rh,onScreenMenuBackgroundColor:Se(254,204,0,.7),uiButtonFillStyle:rt,uiButtonStrokeStyle:ht,uiButtonSize:10,uiBackgroundFillStyle:et,uiBackgroundStrokeStyle:ht,uiTextFillStyle:st,uiTextFont:u,legendTitleFillStyle:st,legendTitleFont:l,cursorTickMarkerXBackgroundFillStyle:et,cursorTickMarkerXBackgroundStrokeStyle:ht,cursorTickMarkerXTextFillStyle:st,cursorTickMarkerXTextFont:u,cursorTickMarkerYBackgroundFillStyle:et,cursorTickMarkerYBackgroundStrokeStyle:ht,cursorTickMarkerYTextFillStyle:st,cursorTickMarkerYTextFont:u,cursorPointMarkerFillStyle:Ie,cursorPointMarkerStrokeStyle:rh,cursorResultTableFillStyle:et,cursorResultTableStrokeStyle:ht,cursorResultTableTextFillStyle:st,cursorResultTableTextFont:u,cursorGridStrokeStyleX:ot,cursorGridStrokeStyleY:ot,chartMarkerPointMarkerFillStyle:t.legendBackgroundBorderFillStyle,chartMarkerPointMarkerStrokeStyle:rh};return t.overrideThemeProperties&&(at={...at,...t.overrideThemeProperties}),at})(t),e={...i,header1Font:s.xAxisTitleFont,header2Font:s.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:s.uiTextFont,mainDataColor:t.dataColorPalette[0].stroke};return{...s,examples:e}},IM=(t,i)=>{const s=new Image;s.crossOrigin="*";const e=`${t}/themes/${i}`;return s.addEventListener("error",(i=>{Fr(t,e,"Theme with asset",{shouldCrash:!1})})),s.src=e,s},PM=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:cr(i[e%i.length].stroke,Se(255,255,255),.5);return new Qe({stops:[{color:cr(h,Se(255,255,255),.5*s).setA(100),offset:0},{color:h.setA(100),offset:.5},{color:cr(h,Se(30,30,30),.5*s).setA(100),offset:1}]})},DM=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:cr(i[e%i.length].stroke,Se(255,255,255),.2);return new Qe({stops:[{color:cr(h,Se(255,255,255),.2*s),offset:0},{color:h,offset:.5},{color:cr(h,Se(0,0,0),.2*s),offset:1}]})},BM=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:cr(i[e%i.length].stroke,Se(255,255,255),.2);return new sh({angle:90,stops:[{color:cr(h,Se(255,255,255),.5*s),offset:0},{color:h,offset:.35},{color:cr(h,Se(30,30,30),.5*s),offset:1}]})},OM=(t,i,s)=>s=>{const e=!0===t?i[s%i.length].stroke:cr(i[s%i.length].stroke,Se(255,255,255),.3);return new sh({angle:90,stops:[{color:cr(e,Se(255,255,255),.5),offset:0},{color:e,offset:.35},{color:cr(e,Se(30,30,30),.5),offset:1}]})},LM=(i,s,e)=>{const h=s[0].stroke;return new Qe({shape:t.GradientShape.ellipse,extent:t.GradientExtent.farthestCorner,position:{x:.5,y:.5},stops:[{color:!0===i?h:cr(h,Se(255,255,255),.5*e),offset:0},{color:h,offset:.5},{color:!0===i?h:cr(h,Se(0,0,0),.5*e),offset:1}]})},EM=Cr((()=>{const i=Se(255,255,255),s=new Be({color:i}),e=!0,h=new Qu({spread:1,blur:9,offset:{x:0,y:0},color:Se(0,0,0,150)}),r=new Qe({position:{x:.8,y:.8},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.ellipse,stops:[{offset:0,color:Se(50,51,52)},{offset:.5,color:Se(14,15,16)},{offset:1,color:Se(0,0,0)}]}),n=new Be({color:Se(45,45,45)}),o=new Qe({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:Se(120,120,120,100)},{offset:1,color:Se(0,0,0,50)}]}),a=new Qe({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:Se(30,30,30,200)},{offset:1,color:Se(0,0,0,255)}]}),l=new Be({color:Se(255,255,220)}),u=new Be({color:Se(255,255,166)}),c=new Be({color:Se(255,255,220)}),f=new Be({color:Se(255,255,220,130)}),d=new Be({color:Se(255,255,200)}),g=d,m=g,y=new sh({angle:45,stops:[{offset:0,color:Se(230,230,230)},{offset:1,color:Se(150,150,150)}]}),p=new Be({color:Se(220,220,220)}),S=new Be({color:Se(200,200,200,50)}),v=new Be({color:Se(200,200,200,150)}),b=new Be({color:Se(200,200,200,20)}),x=new Be({color:Se(150,150,150)}),M=new sh({angle:0,stops:[{offset:0,color:Se(10,10,10,220)},{offset:1,color:Se(30,30,30,220)}]}),_=s,A=Se(255,255,200),w=M,k=_,C=Se(20,20,20),T=Se(0,0,0),F=i,I=Se(150,150,150),P=Se(50,50,50),D=Se(50,50,50),B=Se(100,100,100),O=Se(200,200,200),L=[Se(255,255,91,255),Se(255,205,91,255),Se(255,155,91,255),Se(255,196,188,255),Se(255,148,184,255),Se(219,148,198,255),Se(235,196,224,255),Se(169,148,198,255),Se(148,226,198,255),Se(148,255,176,255),Se(180,255,165,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),E=i.setA(20),R=Se(176,255,157,255),z=Se(255,112,76,255),V={mapChartFillStyle:new sh({angle:135,stops:[{color:Se(255,255,91,255),offset:0},{color:Se(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:PM(e,L,.5),pieChartSliceFillStylePalette:DM(e,L,1),funnelChartSliceFillStylePalette:BM(e,L,1),pyramidChartSliceFillStylePalette:BM(e,L,1),rectangleSeriesFillStyle:OM(e,L),gaugeChartGaugeFillStyle:LM(e,L,1),barChartBarFillStyle:OM(e,L)},N=new Be({color:Se(176,255,157,255)}),G=new Be({color:Se(255,146,146,255)}),W=new Be({color:Se(176,255,157,255)}),H=new Be({color:Se(230,63,63,255)}),U=new Be({color:Se(176,255,157,120)}),j=new Be({color:Se(229,63,63,180)}),$=new Be({color:Se(27,37,36,255)}),Y=new Be({color:Se(62,27,27,255)}),X=[Se(255,0,0),Se(255,255,0),Se(0,255,0)],Z=[Se(10,10,255),Se(10,190,255),Se(251,255,0),Se(255,38,0)],K=[Se(255,255,0),Se(255,204,0),Se(255,128,0),Se(255,0,0)],q=[Se(0,0,0),Se(167,4,69,255),Se(255,0,0),Se(252,252,168,255)],J=new Qe({stops:[{color:Se(61,61,80,100),offset:0},{color:Se(44,44,55,30),offset:1}]}),Q=new Be({color:Se(148,148,198,255)}),tt=U.getColor().setA(255),it=Se(100,100,100);return FM({isDark:e,highlightColorOffset:Se(60,60,60,60),highlightColorOffsetAxisOverlay:Se(255,255,255,40),effect:h,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:r,dashboardSplitterFillStyle:n,panelBackgroundFillStyle:o,seriesBackgroundFillStyle:a,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:l,axisTitleFillStyle:u,axisLabelMajorFillStyle:c,axisLabelMinorFillStyle:f,uiTitleFillStyle:d,uiTextFillStyle:g,cursorTextFillStyle:m,axisLineFillStyle:y,axisTickMajorFillStyle:p,axisGridMajorFillStyle:S,axisTickMinorFillStyle:v,axisGridMinorFillStyle:b,cursorGridFillStyle:x,legendBackgroundFillStyle:M,legendBackgroundBorderFillStyle:_,legendButtonDefaultColor:A,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:k,uiBackgroundColor:C,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:D,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:O,dataColorPalette:L,dataColorPaletteInverted:[{area:Se(190,50,50,100),border:Se(210,80,80)}],dataHighlightOverlayColor:E,dataColorPositive:R,dataColorNegative:z,overrideThemeProperties:V},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:W,negativeFillStyle:H,positiveAreaFillStyle:U,negativeAreaFillStyle:j,positiveBackgroundFillStyle:$,negativeBackgroundFillStyle:Y,badGoodColorPalette:X,coldHotColorPalette:Z,intensityColorPalette:K,spectrogramColorPalette:q,bollingerFillStyle:J,bollingerBorderFillStyle:Q,highlightPointColor:i,highlightDataGridColor:tt,unfocusedDataColor:it})})),RM=Cr((()=>{const i=Se(255,255,255),s=new Be({color:i}),e=!0,h=new Qu({spread:0,blur:9,offset:{x:0,y:0},color:Se(105,255,236,40)}),r=new Be({color:Se(2,21,30)}),n=new Qe({stops:[{color:Se(19,40,66,150),offset:0},{color:Se(0,0,0,150),offset:1}]}),o=new Be({color:Se(0,5,8,150)}),a=s,l=s,u=s,c=new Be({color:Se(255,255,220,130)}),f=s,d=s,g=d,m=new Be({color:Se(20,224,250,255)}),y=s,p=new Be({color:Se(61,94,110,100)}),S=new Be({color:Se(61,94,110,255)}),v=new Be({color:Se(61,94,110,40)}),b=s,x=new Be({color:Se(0,18,23,255)}),M=s,_=i,A=new Be({color:Se(0,17,22,240)}),w=s,k=Se(0,38,48,220),C=Se(0,0,0),T=i,F=Se(150,150,150),I=Se(19,78,93),P=Se(50,50,50),D=Se(0,36,48),B=Se(200,200,200),O=[Se(45,253,253,255),Se(44,172,247,255),Se(46,100,248,255),Se(96,84,199,255),Se(184,104,245,255),Se(98,160,218,255),Se(43,238,245,255),Se(38,140,206,255),Se(112,96,224,255),Se(206,157,255,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),L=i.setA(50),E=Se(3,217,194,255),R=Se(230,63,63,255),z={mapChartFillStyle:new sh({angle:135,stops:[{color:Se(118,248,231,255),offset:0},{color:Se(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:PM(e,O,1),pieChartSliceFillStylePalette:DM(e,O,1),funnelChartSliceFillStylePalette:BM(e,O,1),pyramidChartSliceFillStylePalette:BM(e,O,1),rectangleSeriesFillStyle:OM(e,O),gaugeChartGaugeFillStyle:LM(e,O,1),barChartBarFillStyle:OM(e,O)},V=new Be({color:Se(45,253,253,255)}),N=new Be({color:Se(255,146,146,255)}),G=new Be({color:Se(45,253,253,255)}),W=new Be({color:Se(230,63,63,255)}),H=new Be({color:Se(1,190,164,120)}),U=new Be({color:Se(229,63,63,180)}),j=new Be({color:Se(1,53,57,255)}),$=new Be({color:Se(62,27,27,255)}),Y=[Se(1,104,119,255),Se(0,165,144,255),Se(0,246,214,255)],X=[Se(0,87,95,255),Se(0,125,124,255),Se(1,209,182,255),Se(0,255,221,255),Se(218,112,112,255),Se(172,47,47,255)],Z=[Se(126,255,253,255),Se(50,233,230,255),Se(0,196,193,255),Se(62,138,178,255),Se(139,88,191,255),Se(162,55,143,255)],K=[Se(13,31,52,255),Se(101,50,118,255),Se(1,142,172,255),Se(2,196,170,255),Se(0,255,221,255)],q=new Qe({stops:[{color:Se(122,103,254,70),offset:0},{color:Se(178,168,255,10),offset:1}]}),J=new Be({color:Se(122,103,254,255)}),Q=H.getColor().setA(255),tt=Se(15,83,83);return FM({isDark:e,highlightColorOffset:Se(60,60,60,60),highlightColorOffsetAxisOverlay:Se(255,255,255,40),effect:h,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:i=>new Uu({source:IM(i,"turquoiseHexagon.jpg"),fitMode:t.ImageFitMode.Fill}),dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:c,uiTitleFillStyle:f,uiTextFillStyle:d,cursorTextFillStyle:g,axisLineFillStyle:m,axisTickMajorFillStyle:y,axisGridMajorFillStyle:p,axisTickMinorFillStyle:S,axisGridMinorFillStyle:v,cursorGridFillStyle:b,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:_,resultTableBackgroundFillStyle:A,resultTableBackgroundBorderFillStyle:w,uiBackgroundColor:k,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:B,dataColorPalette:O,dataColorPaletteInverted:[{area:Se(170,60,210,100),border:Se(210,100,250)}],dataHighlightOverlayColor:L,dataColorPositive:E,dataColorNegative:R,overrideThemeProperties:z},{positiveTextFillStyle:V,negativeTextFillStyle:N,positiveFillStyle:G,negativeFillStyle:W,positiveAreaFillStyle:H,negativeAreaFillStyle:U,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:$,badGoodColorPalette:Y,coldHotColorPalette:X,intensityColorPalette:Z,spectrogramColorPalette:K,bollingerFillStyle:q,bollingerBorderFillStyle:J,highlightPointColor:i,highlightDataGridColor:Q,unfocusedDataColor:tt})})),zM=Cr((()=>{const i=!1,s=new Qu({spread:0,blur:6,offset:{x:2,y:-2},color:Se(0,0,0,30)}),e=new Qe({position:{x:.8,y:.8},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.ellipse,stops:[{offset:0,color:Se(255,255,255)},{offset:1,color:Se(255,255,255)}]}),h=new Be({color:Se(219,227,233,255)}),r=new Qe({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:Se(255,255,255,200)},{offset:1,color:Se(240,244,246,200)}]}),n=new Qe({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:Se(255,255,255,255)},{offset:1,color:Se(255,255,255,255)}]}),o=new Be({color:Se(33,43,49)}),a=new Be({color:Se(33,43,49)}),l=new Be({color:Se(33,43,49)}),u=new Be({color:Se(33,43,49,150)}),c=new Be({color:Se(33,43,49)}),f=c,d=f,g=new sh({angle:45,stops:[{offset:0,color:Se(225,225,225)},{offset:1,color:Se(225,225,225)}]}),m=new Be({color:Se(168,186,199,255)}),y=new Be({color:Se(168,186,199,120)}),p=new Be({color:Se(168,186,199,40)}),S=new Be({color:Se(168,186,199,40)}),v=new Be({color:Se(128,146,159,255)}),b=new sh({angle:0,stops:[{offset:0,color:Se(255,255,255,240)},{offset:1,color:Se(255,255,255,240)}]}),x=new Be({color:Se(168,186,199)}),M=Se(255,255,200),_=new Be({color:Se(255,255,255,240)}),A=new Be({color:Se(128,146,159,255)}),w=Se(255,255,255,255),k=Se(168,168,199,255),C=Se(168,186,199,255),T=Se(168,186,199,255),F=Se(168,186,199,255),I=Se(168,186,199,255),P=Se(100,100,100),D=Se(200,200,200),B=[Se(28,181,140,255),Se(255,132,0,255),Se(240,39,39,255),Se(86,121,251,255),Se(2,181,213,255),Se(13,212,158,255),Se(22,167,3,255),Se(234,103,232,255),Se(62,183,179,255),Se(140,93,3,255),Se(155,158,186,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),O=Se(150,150,150,80),L=Se(46,182,120,255),E=Se(255,66,66,255),R=new Qn({thickness:2,fillStyle:new Be({color:Se(168,186,199,255)})}),z={mapChartFillStyle:new sh({angle:-45,stops:[{color:Se(2,181,213,255),offset:0},{color:Se(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:PM(i,B,.8),pieChartSliceFillStylePalette:DM(i,B,.8),funnelChartSliceFillStylePalette:BM(i,B,.5),pyramidChartSliceFillStylePalette:BM(i,B,.5),rectangleSeriesFillStyle:OM(i,B),gaugeChartGaugeFillStyle:LM(i,B,.8),barChartBarFillStyle:OM(i,B),chartXYSeriesBackgroundStrokeStyle:R,chart3DSeriesBackgroundStrokeStyle:R,polarChartSeriesBackgroundStrokeStyle:R,spiderChartSeriesBackgroundStrokeStyle:R,dataGridTextFillStyle:new Be({color:Se(0,88,64,255)})},V=new Be({color:Se(4,146,108,255)}),N=new Be({color:Se(240,39,39,255)}),G=new Be({color:Se(28,181,140,255)}),W=new Be({color:Se(230,88,88,255)}),H=new Be({color:Se(28,181,140,180)}),U=new Be({color:Se(230,88,88,180)}),j=new Be({color:Se(229,243,228)}),$=new Be({color:Se(232,225,216)}),Y=[Se(193,48,48,255),Se(240,234,60,255),Se(45,191,55,255)],X=[Se(10,19,255,255),Se(15,191,250,255),Se(249,255,2,255),Se(253,133,0,255),Se(255,24,0,255)],Z=[Se(50,99,213),Se(8,179,77),Se(255,246,0),Se(255,126,0),Se(189,36,30)],K=[Se(16,64,176),Se(8,179,77),Se(255,246,0),Se(255,126,0),Se(168,6,0)],q=new Be({color:Se(185,198,207,255)}),J=new Qe({stops:[{color:Se(151,190,220,10),offset:0},{color:Se(151,190,220,50),offset:1}]}),Q=H.getColor().setA(255),tt=Se(150,150,150);return FM({isDark:i,highlightColorOffset:Se(-60,-60,-60,60),highlightColorOffsetAxisOverlay:Se(0,0,0,40),effect:s,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:e,dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:f,cursorTextFillStyle:d,axisLineFillStyle:g,axisTickMajorFillStyle:m,axisGridMajorFillStyle:y,axisTickMinorFillStyle:p,axisGridMinorFillStyle:S,cursorGridFillStyle:v,legendBackgroundFillStyle:b,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:_,resultTableBackgroundBorderFillStyle:A,uiBackgroundColor:w,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:C,uiStrokeColorContrastMedium:T,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:I,dataStrokeColorContrastMedium:P,dataStrokeColorContrastLow:D,dataColorPalette:B,dataColorPaletteInverted:[{area:Se(190,50,50,100),border:Se(210,80,80)}],dataHighlightOverlayColor:O,dataColorPositive:L,dataColorNegative:E,overrideThemeProperties:z},{positiveTextFillStyle:V,negativeTextFillStyle:N,positiveFillStyle:G,negativeFillStyle:W,positiveAreaFillStyle:H,negativeAreaFillStyle:U,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:$,badGoodColorPalette:Y,coldHotColorPalette:X,intensityColorPalette:Z,spectrogramColorPalette:K,bollingerFillStyle:J,bollingerBorderFillStyle:q,highlightPointColor:Se(0,0,0),highlightDataGridColor:Q,unfocusedDataColor:tt})})),VM=Cr((()=>{const i=!1,s=new Qe({position:{x:.8,y:.8},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.ellipse,stops:[{offset:0,color:Se(255,255,255)},{offset:1,color:Se(255,255,255)}]}),e=new Be({color:Se(214,236,216,255)}),h=new Qe({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:Se(233,244,231,70)},{offset:1,color:Se(233,244,231,200)}]}),r=new Qe({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:Se(255,255,255,255)},{offset:1,color:Se(255,255,255,255)}]}),n=new Be({color:Se(1,61,53)}),o=new Be({color:Se(1,61,53)}),a=new Be({color:Se(1,61,53)}),l=new Be({color:Se(1,61,53,150)}),u=new Be({color:Se(1,61,53)}),c=u,f=c,d=new sh({angle:45,stops:[{offset:0,color:Se(225,225,225)},{offset:1,color:Se(225,225,225)}]}),g=new Be({color:Se(188,211,186,255)}),m=new Be({color:Se(188,211,186,150)}),y=new Be({color:Se(188,211,186,50)}),p=new Be({color:Se(188,211,186,50)}),S=new Be({color:Se(104,148,111,255)}),v=new sh({angle:0,stops:[{offset:0,color:Se(255,255,255,240)},{offset:1,color:Se(255,255,255,240)}]}),b=new Be({color:Se(104,148,111)}),x=Se(255,255,200),M=new Be({color:Se(255,255,255,240)}),_=new Be({color:Se(104,148,111,255)}),A=Se(255,255,255,255),w=Se(179,201,183,255),k=Se(188,211,186,255),C=Se(188,211,186,255),T=Se(188,211,186,255),F=Se(188,211,186,255),I=Se(100,100,100),P=Se(200,200,200),D=[Se(138,195,142,255),Se(193,161,114,255),Se(178,99,99,255),Se(142,156,210,255),Se(154,209,219,255),Se(164,212,199,255),Se(104,156,97,255),Se(196,147,195,255),Se(92,190,187,255),Se(126,100,51,255),Se(136,138,157,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),B=Se(150,150,150,80),O=Se(46,182,84,255),L=Se(232,96,96,255),E=new Qn({thickness:2,fillStyle:new Be({color:Se(188,211,186,255)})}),R={mapChartFillStyle:new sh({angle:-45,stops:[{color:Se(118,160,121,255),offset:0},{color:Se(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:PM(i,D,.8),pieChartSliceFillStylePalette:DM(i,D,.8),pyramidChartSliceFillStylePalette:BM(i,D,.5),funnelChartSliceFillStylePalette:BM(i,D,.5),rectangleSeriesFillStyle:OM(i,D),gaugeChartGaugeFillStyle:LM(i,D,.8),barChartBarFillStyle:OM(i,D),chartXYSeriesBackgroundStrokeStyle:E,chart3DSeriesBackgroundStrokeStyle:E,polarChartSeriesBackgroundStrokeStyle:E,spiderChartSeriesBackgroundStrokeStyle:E,dataGridTextFillStyle:new Be({color:Se(77,66,21,255)})},z=new Be({color:Se(93,151,97,255)}),V=new Be({color:Se(178,99,99,255)}),N=new Be({color:Se(138,195,142,255)}),G=new Be({color:Se(178,99,99,255)}),W=new Be({color:Se(138,195,142,180)}),H=new Be({color:Se(178,99,99,180)}),U=new Be({color:Se(224,240,237)}),j=new Be({color:Se(251,227,227)}),$=[Se(178,99,99,255),Se(215,224,111,255),Se(80,186,88,255)],Y=[Se(62,64,142,255),Se(66,131,77,255),Se(250,250,135,255),Se(202,161,78,255),Se(179,53,53,255)],X=[Se(64,86,138),Se(123,192,205),Se(255,252,149),Se(220,155,92),Se(184,78,74)],Z=[Se(64,86,138),Se(123,192,205),Se(255,252,149),Se(220,155,92),Se(132,60,57)],K=new Be({color:Se(185,198,207,255)}),q=new Qe({stops:[{color:Se(151,190,220,10),offset:0},{color:Se(151,190,220,50),offset:1}]}),J=W.getColor().setA(255),Q=Se(150,150,150);return FM({isDark:i,highlightColorOffset:Se(-60,-60,-60,60),highlightColorOffsetAxisOverlay:Se(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:e,panelBackgroundFillStyle:h,seriesBackgroundFillStyle:r,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:n,axisTitleFillStyle:o,axisLabelMajorFillStyle:a,axisLabelMinorFillStyle:l,uiTitleFillStyle:u,uiTextFillStyle:c,cursorTextFillStyle:f,axisLineFillStyle:d,axisTickMajorFillStyle:g,axisGridMajorFillStyle:m,axisTickMinorFillStyle:y,axisGridMinorFillStyle:p,cursorGridFillStyle:S,legendBackgroundFillStyle:v,legendBackgroundBorderFillStyle:b,legendButtonDefaultColor:x,resultTableBackgroundFillStyle:M,resultTableBackgroundBorderFillStyle:_,uiBackgroundColor:A,uiBackgroundBorderColor:w,uiStrokeColorContrastHigh:k,uiStrokeColorContrastMedium:C,uiStrokeColorContrastLow:T,dataStrokeColorContrastHigh:F,dataStrokeColorContrastMedium:I,dataStrokeColorContrastLow:P,dataColorPalette:D,dataColorPaletteInverted:[{area:Se(210,70,70,100),border:Se(200,110,110)}],dataHighlightOverlayColor:B,dataColorPositive:O,dataColorNegative:L,overrideThemeProperties:R},{positiveTextFillStyle:z,negativeTextFillStyle:V,positiveFillStyle:N,negativeFillStyle:G,positiveAreaFillStyle:W,negativeAreaFillStyle:H,positiveBackgroundFillStyle:U,negativeBackgroundFillStyle:j,badGoodColorPalette:$,coldHotColorPalette:Y,intensityColorPalette:X,spectrogramColorPalette:Z,bollingerFillStyle:q,bollingerBorderFillStyle:K,highlightPointColor:Se(0,0,0),highlightDataGridColor:J,unfocusedDataColor:Q})})),NM=Cr((()=>{const i=Se(255,255,255),s=new Be({color:i}),e=!0,h=new Qu({spread:1,blur:9,offset:{x:0,y:0},color:Se(255,255,255,30)}),r=new Be({color:Se(6,15,36)}),n=new Qe({stops:[{color:Se(46,13,87,50),offset:0},{color:Se(0,0,0,150),offset:1}]}),o=new Be({color:Se(0,5,8,150)}),a=s,l=s,u=s,c=new Be({color:Se(255,255,220,130)}),f=s,d=s,g=d,m=new sh({angle:45,stops:[{offset:0,color:Se(241,133,255,255)},{offset:1,color:Se(115,207,238,255)}]}),y=s,p=new Be({color:Se(61,94,110,100)}),S=new Be({color:Se(61,94,110,255)}),v=new Be({color:Se(61,94,110,40)}),b=s,x=new Be({color:Se(0,18,23,255)}),M=s,_=Se(115,207,238,255),A=new Be({color:Se(0,17,22,240)}),w=s,k=Se(0,38,48,255),C=Se(0,0,0),T=i,F=Se(150,150,150),I=Se(19,57,93),P=Se(50,50,50),D=Se(0,17,48),B=Se(200,200,200),O=[Se(20,211,237,255),Se(98,147,252,255),Se(164,73,250,255),Se(129,117,253,255),Se(95,134,252,255),Se(22,133,212,255),Se(35,200,242,255),Se(104,121,233,255),Se(137,69,232,255),Se(70,72,241,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),L=i.setA(50),E=Se(3,217,194,255),R=Se(243,21,110,255),z={mapChartFillStyle:new sh({angle:135,stops:[{color:Se(118,248,231,255),offset:0},{color:Se(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:PM(e,O,.5),pieChartSliceFillStylePalette:DM(e,O,2),funnelChartSliceFillStylePalette:BM(e,O,1),pyramidChartSliceFillStylePalette:BM(e,O,1),rectangleSeriesFillStyle:OM(e,O),gaugeChartGaugeFillStyle:LM(e,O,1),barChartBarFillStyle:OM(e,O)},V=new Be({color:Se(20,211,237,255)}),N=new Be({color:Se(253,145,178,255)}),G=new Be({color:Se(20,211,237,255)}),W=new Be({color:Se(239,68,121,255)}),H=new Be({color:Se(20,211,237,120)}),U=new Be({color:Se(239,68,121,180)}),j=new Be({color:Se(1,53,57,255)}),$=new Be({color:Se(94,19,42,255)}),Y=[Se(174,51,132,255),Se(204,107,218,255),Se(189,215,253,255)],X=[Se(0,63,95,255),Se(0,149,255,255),Se(0,225,255,255),Se(255,154,254,255),Se(204,98,170,255),Se(139,39,84,255)],Z=[Se(197,241,255,255),Se(70,210,255,255),Se(0,164,217,255),Se(90,99,222,255),Se(138,75,192,255),Se(151,27,162,255)],K=[Se(13,31,52,255),Se(129,54,130,255),Se(131,108,176,255),Se(7,162,213,255),Se(26,247,255,255)],q=new Qe({stops:[{color:Se(219,42,235,60),offset:0},{color:Se(237,73,252,10),offset:1}]}),J=new Be({color:Se(237,73,252,255)}),Q=H.getColor().setA(255),tt=Se(8,70,100);return FM({isDark:e,highlightColorOffset:Se(60,60,60,60),highlightColorOffsetAxisOverlay:Se(255,255,255,40),effect:h,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:i=>new Uu({source:IM(i,"cyberSpace.jpg"),fitMode:t.ImageFitMode.Fill}),dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:c,uiTitleFillStyle:f,uiTextFillStyle:d,cursorTextFillStyle:g,axisLineFillStyle:m,axisTickMajorFillStyle:y,axisGridMajorFillStyle:p,axisTickMinorFillStyle:S,axisGridMinorFillStyle:v,cursorGridFillStyle:b,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:_,resultTableBackgroundFillStyle:A,resultTableBackgroundBorderFillStyle:w,uiBackgroundColor:k,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:B,dataColorPalette:O,dataColorPaletteInverted:[{area:Se(41,130,255,100),border:Se(45,110,240)}],dataHighlightOverlayColor:L,dataColorPositive:E,dataColorNegative:R,overrideThemeProperties:z},{positiveTextFillStyle:V,negativeTextFillStyle:N,positiveFillStyle:G,negativeFillStyle:W,positiveAreaFillStyle:H,negativeAreaFillStyle:U,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:$,badGoodColorPalette:Y,coldHotColorPalette:X,intensityColorPalette:Z,spectrogramColorPalette:K,bollingerFillStyle:q,bollingerBorderFillStyle:J,highlightPointColor:i,highlightDataGridColor:Q,unfocusedDataColor:tt})})),GM={};Object.defineProperty(GM,"darkGold",{get:EM,enumerable:!0}),Object.defineProperty(GM,"turquoiseHexagon",{get:RM,enumerable:!0}),Object.defineProperty(GM,"light",{get:zM,enumerable:!0}),Object.defineProperty(GM,"lightNature",{get:VM,enumerable:!0}),Object.defineProperty(GM,"cyberSpace",{get:NM,enumerable:!0});const WM=GM,HM=WM.darkGold,UM=(t,i,s)=>e=>{const h={theme:HM,...s,...e},r=t(h),n=i?yM(r):void 0,o=new eS(r.ro,e,r,r.Pt.bind(r),n);return r.Fo((t=>o.YB(t))).To((()=>o.Rt())).te(),o},jM=(t,i)=>{t.Fo((t=>{i.rh(t)})).To((()=>i.Rt())).te()},$M=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||HM},r=t(h),n=i?yM(r):void 0,o=new Kc(r.ro,mp(r,1).NF(0),ah,r.Pt.bind(r),n);return jM(r,o),o},YM=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||HM},r=t(h),n=i?yM(r):void 0,o=new rp(r.ro,mp(r,1).NF(0),ah,r.Pt.bind(r),n,e);return jM(r,o),o},XM=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||HM},r=t(h),n=i?yM(r):void 0,o=new Mm(r.ro,mp(r,1).NF(0),ah,r.Pt.bind(r),n,e);return jM(r,o),o},ZM=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||HM},r=t(h),n=i?yM(r):void 0,o=new Ig(r.ro,mp(r,1).NF(0),ah,r.Pt.bind(r),n,e);return jM(r,o),o},KM=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||HM},r=t(h),n=i?yM(r):void 0,o=new(e&&e.type?e.type:Mf)(r.ro,mp(r,1).NF(0),ah,r.Pt.bind(r),n,void 0,e&&e.disableAnimations);return jM(r,o),o},qM=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||HM},r=t(h),n=i?yM(r):void 0,o=new(e&&e.type?e.type:qg)(r.ro,mp(r,1).NF(0),ah,r.Pt.bind(r),n,void 0,e&&e.disableAnimations);return jM(r,o),o},JM=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||HM},r=t(h),n=i?yM(r):void 0,o=new(e&&e.type?e.type:Ng)(r.ro,mp(r,1).NF(0),ah,r.Pt.bind(r),n,void 0,e&&e.disableAnimations);return jM(r,o),o},QM=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||HM},r=t(h),n=i?yM(r):void 0,o=new(e&&e.type?e.type:rm)(r.ro,mp(r,1).NF(0),ah,r.Pt.bind(r),n,void 0,!(!e||!e.disableAnimations));return jM(r,o),o},t_=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||HM},r=t(h),n=i?yM(r):void 0,o=new Bd(r.ro,mp(r,1).NF(0),ah,r.Pt.bind(r),n,e,void 0);return jM(r,o),o},i_=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||HM},r=t(h),n=i?yM(r):void 0,o=new Qf(r.ro,mp(r,1).NF(0),ah,r.Pt.bind(r),n,void 0,e);return jM(r,o),o},s_=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||HM},r=t(h),n=i?yM(r):void 0,o=new Vp(r.ro,mp(r,1).NF(0),ah,r.Pt.bind(r),n,void 0);return jM(r,o),o},e_=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||HM},r=t(h),n=i?yM(r):void 0,o=new Kp(r.ro,mp(r,1).NF(0),ah,r.Pt.bind(r),n,void 0,e);return jM(r,o),o};let h_;const r_={None:Rl,Rectangle:Ul,Circle:jl,Diamond:$l,Pointer:Yl},n_={Rectangle:Ul,Circle:jl,Diamond:$l},o_={XY:fg},a_={XY:cg,Spider:vd,BarChart:bd,Map:Md,Polar:vd},l_={None:zl,UIRectangle:Ul,UICircle:jl,UIDiamond:$l};return t.Animation=Xe,t.AnimationEasings=Ye,t.Animator=Ze,t.AreaRangeSeries=Vy,t.AreaSeries=Dy,t.AreaSeriesBipolar=Ey,t.AreaSeriesMonopolar=By,t.AreaSeriesNegative=Ly,t.AreaSeriesPositive=Oy,t.AreaSeriesTypes=Ry,t.AutoCursor2DBuilder=gd,t.AutoCursorBuilders=a_,t.AutoCursorXYBuilder=lg,t.AutoFitStrategies=nd,t.AutoFitStrategy=ed,t.Axis=rc,t.Axis3D=Ff,t.AxisScrollStrategies=Go,t.AxisTickStrategies=Wo,t.Band=Vo,t.BarChart=Kp,t.BarChartBar=Yp,t.BarChartCategoryAxis=jp,t.BarChartSorting=qp,t.BarChartTypes={Horizontal:"horizontal",Vertical:"vertical"},t.BarChartValueAxis=$p,t.BasicSeries=Ag,t.BorderedPicture=Nl,t.BoxAndWhiskers=Im,t.BoxFigure=Fm,t.BoxSeries=Fy,t.BoxSeries3D=Ef,t.Button=uu,t.Chart=Jc,t.Chart3D=Qf,t.ChartComponent=jn,t.ChartMarker=mg,t.ChartMarker2D=class extends mg{constructor(t,i,s,e,h,r){super(t,i,s,e.eb(t,i,s,r),h,r)}},t.ChartMarkerXY=pg,t.ChartWithCursor=Dd,t.ChartWithSeries=Uf,t.ChartXY=rp,t.Color=ye,t.ColorCSS=t=>{try{if(t.startsWith("rgba")){const i=t.substr(5).slice(0,-1),s=JSON.parse(`[${i}]`);return Se(s[0],s[1],s[2],255*s[3])}if(t.startsWith("rgb")){const i=t.substr(4).slice(0,-1),s=JSON.parse(`[${i}]`);return Se(s[0],s[1],s[2])}if(t.startsWith("hsl")){const i=t.substr(4).slice(0,-1).split(",").map(parseFloat),s=((t,i,s)=>{i/=100,s/=100;const e=(1-Math.abs(2*s-1))*i,h=t/60,r=e*(1-Math.abs(h%2-1));let n=[];isNaN(t)?n=[0,0,0]:h<=1?n=[e,r,0]:h<=2?n=[r,e,0]:h<=3?n=[0,e,r]:h<=4?n=[0,r,e]:h<=5?n=[r,0,e]:h<=6&&(n=[e,0,r]);const o=s-.5*e;return[Math.round(255*(n[0]+o)),Math.round(255*(n[1]+o)),Math.round(255*(n[2]+o))]})(i[0],i[1],i[2]);return Se(s[0],s[1],s[2])}return t.startsWith("#")||t.startsWith("0x")?ve(t):ve((t=>{const i=xe[t.toLowerCase()];if(i)return i;throw new Error(`Unknown color code: ${t}`)})(t))}catch(t){}return console.warn(`ColorCSS parsing error: ${t}`),ve("#fff")},t.ColorHEX=ve,t.ColorHSV=be,t.ColorPalettes=Du,t.ColorRGBA=Se,t.ColorShadingStyles=Gu,t.ConstantLine=No,t.CursorBuilder=dd,t.CursorBuilderXY=ag,t.CustomTick=Cl,t.CustomizableFigure=Cm,t.Dashboard=eS,t.DashedLine=class extends Yu{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return this.set("thickness",t)}getThickness(){return this.get("thickness")}Ct(){const t=this.getThickness();return t<0?1:t}setPattern(t){return this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}},t.DataGrid=Vp,t.DateTimeTickStrategy=kc,t.EllipseFigure=ly,t.EllipseSeries=uy,t.EmptyFill=Fe,t.EmptyPointMarker=zl,t.EmptyUIElement=El,t.Figure=wm,t.FigureSeries=km,t.FontSettings=ra,t.FormattingFunctions=Dn,t.FunnelChart=Rg,t.FunnelChartTypes=Wg,t.FunnelChartWithLabelsInsideSlices=Gg,t.FunnelChartWithLabelsOnSides=Ng,t.FunnelSlice=Dg,t.GaugeChart=jg,t.GaugeChartTypes=TM,t.GaugeSlice=Yg,t.GenericAxis=ta,t.GlowEffect=Qu,t.HeatmapGridSeries=Hy,t.HeatmapGridSeriesIntensityValues=Uy,t.HeatmapScrollingGridSeries=jy,t.HeatmapScrollingGridSeriesIntensityValues=$y,t.Highlighter=$n,t.Icon=Ku,t.ImageFill=Uu,t.IndividualPointFill=Le,t.LUT=Ce,t.LegendBoxBuilders=Fu,t.LineAndPointSeries3D=Rf,t.LineSeries=sy,t.LineSeries3D=zf,t.LinearGradientFill=sh,t.LinearGradientFillPalette=(t,i,s,e)=>{const h=t(i+1,e);return t=>new sh({stops:[{offset:0,color:h(t).getDarker()},{offset:.5,color:h(t)},{offset:1,color:h(t).getDarker()}],angle:s||90})},t.MapChart=Bd,t.MapRegions=CM,t.MapRegionsAfrica=SM,t.MapRegionsAsia=vM,t.MapRegionsAustralia=bM,t.MapRegionsCanada=xM,t.MapRegionsEurope=MM,t.MapRegionsNorthAmerica=wM,t.MapRegionsSouthAmerica=kM,t.MapRegionsUSA=AM,t.MapRegionsWorld=_M,t.MapTypes=Ad,t.MarkerBuilders=o_,t.NumericTickStrategy=Bc,t.OHLCBar=Bm,t.OHLCCandleStick=Dm,t.OHLCFigure=Pm,t.OHLCFigures=Om,t.OHLCSeries=Ay,t.OHLCSeriesTraditional=wy,t.OHLCSeriesTypes=Cy,t.OHLCSeriesWithAutomaticPacking=ky,t.OnScreenMenu=Gy,t.OnScreenMenuAnimationsButton=Ao,t.OnScreenMenuButton=yo,t.OnScreenMenuControlBase=io,t.OnScreenMenuCustomButton=ko,t.OnScreenMenuOsmToggleButton=Co,t.OnScreenMenuToggleButton=po,t.OnScreenMenuZoomInButton=So,t.OnScreenMenuZoomInXButton=vo,t.OnScreenMenuZoomInYButton=bo,t.OnScreenMenuZoomOutButton=xo,t.OnScreenMenuZoomOutXButton=Mo,t.OnScreenMenuZoomOutYButton=_o,t.OnScreenMenuZoomToFitButton=wo,t.PalettedFill=class extends Re{constructor(t){super({...t,fillType:"palette"})}toString(){return`palettedFill:lut=${this.lut.toString()},lookUpProperty=${this.lookUpProperty}`}getPalette(){return this.get("lut")}setLookUpProperty(t){return"function"==typeof t?this.set("lookUpProperty",t(this.get("lookUpProperty"))):this.set("lookUpProperty",t)}getLookUpProperty(){return this.get("lookUpProperty")}},t.Panel=Xc,t.PhongShadingStyle=Vu,t.Picture=Vl,t.PieChart=cf,t.PieChartTypes=Af,t.PieChartWithLabelsInsideSlices=_f,t.PieChartWithLabelsOnSides=Mf,t.PieSlice=nf,t.PixelatedPoints3D=da,t.PointCloudSeries3D=Wf,t.PointLineSeries=Vm,t.PointLineSeries3D=Vf,t.PointMarkers=l_,t.PointSeries=Ny,t.PointSeries3D=Gf,t.PointSeriesTypes3D=Hf,t.PointStyle3D=ma,t.PolarAreaSeries=Cg,t.PolarAreaSeriesInterior=Tg,t.PolarAxis=Ed,t.PolarAxisAmplitude=zd,t.PolarAxisTick=Rd,t.PolarChart=Ig,t.PolarHeatmapSeries=Qd,t.PolarLineSeries=ig,t.PolarPointLineSeries=sg,t.PolarPointSeries=eg,t.PolarPolygon=hg,t.PolarPolygonSeries=kg,t.PolarSector=jd,t.PolarSeries=Yd,t.PolygonFigure=ry,t.PolygonSeries=ny,t.PyramidChart=sm,t.PyramidChartTypes=om,t.PyramidChartWithLabelsInsideSlices=nm,t.PyramidChartWithLabelsOnSides=rm,t.PyramidSlice=Jg,t.RadialGauge=$g,t.RadialGradientFill=Qe,t.RadialGradientFillPalette=(t,i,s)=>{const e=t(i+1,s);return t=>new Qe({stops:[{offset:0,color:e(t)},{offset:1,color:e(t).getDarker()}]})},t.RangeSeries=Iy,t.RectangleFigure=ey,t.RectangleSeries=hy,t.SegmentFigure=oy,t.SegmentSeries=ay,t.Series2D=$d,t.Series3D=Lf,t.SeriesMarkerXY=Sg,t.SeriesXY=vg,t.SimpleFigureSeries=Tm,t.SimpleShadingStyle=Ru,t.Slice=hf,t.SliceLabelFormatters=ef,t.SliceSorters=sf,t.SolidFill=Be,t.SolidFillPalette=(t,i,s)=>{const e=t(i,s);return t=>new Be({color:e(t)})},t.SolidGauge=qg,t.SolidGaugeSlice=Xg,t.SolidLine=Qn,t.SpiderAxis=fm,t.SpiderChart=Mm,t.SpiderSeries=gm,t.SplineSeries=Hm,t.StaticCursor2DBuilder=md,t.StaticCursorXYBuilder=ug,t.StepSeries=iy,t.StipplePatterns=$u,t.SurfaceGridSeries3D=Zf,t.SurfaceScrollingGridSeries3D=Kf,t.TableContentBuilder=od,t.Themes=WM,t.Tick=hc,t.TickStyle=uc,t.TimeFormattingFunctions=Gc,t.TimeTickStrategy=Hc,t.TriangulatedPoints3D=ua,t.UIBackgrounds=r_,t.UIButtonPictures=n_,t.UICircle=jl,t.UIColumnGrid=class extends Kl{constructor(){super(...arguments),this.Mf=[]}addColumn(){return this.addElement(iu,void 0)}getColumn(t,i=!1){return i&&this.Mf.length<=t?(this.addColumn(),this.getColumn(t,!0)):this.Mf[t]}},t.UIDiamond=$l,t.UIElementBuilders=Tu,t.UIElementColumn=ql,t.UIElementLine=Zl,t.UIElementRow=Kl,t.UIElementWithBackground=wl,t.UIEmptyBackground=Rl,t.UILabel=Wl,t.UILayoutBuilders=td,t.UILayoutGap=Xl,t.UILegendBoxPanel=id,t.UIObject=bl,t.UIOrigins=Fo,t.UIPanel=Kc,t.UIPointer=Yl,t.UIPolygon=Gl,t.UIRectangle=Ul,t.UIRowGrid=Ql,t.VisibleFill=De,t.VisibleTicks=cc,t.ZoomBandChart=up,t.defaultOsmBackgroundColor=Ro,t.disableThemeEffects=t=>({...t,effect:void 0}),t.emptyFill=Ie,t.emptyLine=rh,t.emptyPoints3D=aa,t.emptyTick=dc,t.formatLongitudeLatitude=Ld,t.isColor=pe,t.isCoordinate3D=Jf,t.isCoordinateBarChart=Xp,t.isCoordinateClient=Gn,t.isCoordinatePolar=Ud,t.isCoordinateXY=Hn,t.isDashedLine=Xu,t.isDateTimeTickStrategy=t=>!(!t||"object"!=typeof t||!("type"in t)||"date-time-ticks"!==t.type),t.isEmptyFill=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"empty"===t.fillType),t.isEmptyTick=t=>!(!t||"object"!=typeof t||!("type"in t)||"empty-ticks"!==t.type),t.isFontSettings=na,t.isGlowEffect=t=>!(!t||"object"!=typeof t||!("type"in t)||"glow"!==t.type),t.isIcon=qu,t.isIndividualPointFill=Ee,t.isLUT=t=>!(!t||"object"!=typeof t||!("type"in t)||"lut"!==t.type),t.isLinearGradientFill=eh,t.isNumericTickStrategy=t=>!(!t||"object"!=typeof t||!("type"in t)||"numeric-ticks"!==t.type),t.isPalettedFill=ze,t.isPhongShadingStyle=t=>!(!t||"object"!=typeof t||!("type"in t)||"phong"!==t.type),t.isPixelatedPoints3D=ga,t.isRadialGradientFill=th,t.isSimpleShadingStyle=t=>!(!t||"object"!=typeof t||!("type"in t)||"simple"!==t.type),t.isSolidFill=Oe,t.isSolidLine=to,t.isTimeTickStrategy=t=>!(!t||"object"!=typeof t||!("type"in t)||"time-ticks"!==t.type),t.isTriangulatedPoints3D=ca,t.isVisibleTicks=fc,t.lightningChart=(t,i)=>{const s="object"==typeof t?t.license:t,e="object"==typeof t?t.licenseInformation:i,h="object"==typeof t?t:void 0,r=new sM;return r.e=s||"",h_||(h_=(t=>{let i,s,e=!1,h=!1,r=!1,n=!1,o="";try{if(Jx){const i=(t=>{if(!t)return;const i=t.split("-");if(i.length>0)switch(i[0]){case"0001":return"0001";case"0002":return"0002";default:return}})(Jx);if("0001"===i){iM=new Uint8Array([2]);const i=(t=>{if(!t)return;const i=t.split("-");return 4===i.length?i[1].startsWith("m")?2:1:0})(Jx);1===i?(r=!cM(Jx),e=!0):2===i?(fM(Jx,t),h=!0):(eM=!0,aM(Jx),n=!0)}else{if("0002"!==i)throw new Error(qx(0,0,1,7,1,12,5));{const i=(t=>{if(!t)return;const i=t.split("-");return i.length>=2?Uint8Array.from(atob(i[1]),(t=>t.charCodeAt(0)))[0]:void 0})(Jx);if(104===i)eM=!0,aM(Jx),n=!0;else if(189===i)r=!cM(Jx),e=!0;else{if(159!==i)throw new Error(qx(0,0,1,7,1,12,5));fM(Jx,t),h=!0}}}}else tM=!0}catch(t){t instanceof Error&&(i=t)}try{n&&(s=Kx[qx(-1,34)][qx(-1,35)](qx(-1,39))||void 0)}catch(t){Kx.console.error(t)}let a=!1;if(s){const t=s.split("-");if(2===t.length&&uM(t[0],t[1])){const[i,s]=t[0].split(":").map((t=>Number(t)));Date.now()-s<.95*i*1e3&&(a=!0)}}const l=!(i||tM||e||h||a),u=(()=>{const t=new(Kx[qx(-1,0)]);return t.open(qx(0,26),qx(-2,0)),t.setRequestHeader(qx(-1,24),qx(-1,25)),t.withCredentials=!0,t})();if(l){let t;try{t=parseInt(Jx?Jx.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch(i){t=Math.floor(1e6*Math.random())}const i=Math.floor(1e6*Math.random());o=(t^i).toString();const s={};let e="",h="",r="";Jx=Jx||"";const n=qx(-4,0);for(let t=0;t<Jx.length;t+=1){const i=Jx.charCodeAt(t)^n.charCodeAt(t);e+=String.fromCharCode(i)}const a=qx(-3,0);for(let t=0;t<a.length;t+=1)h+=String.fromCharCode(a.charCodeAt(t)^n.charCodeAt(t));for(let t=0;t<o.length;t+=1)r+=String.fromCharCode(o.charCodeAt(t)^n.charCodeAt(t));s[qx(-1,3)]=Kx.btoa(e),s[qx(-1,4)]=Kx.btoa(h),s.h=Kx.btoa(r),s.v=3,s.s=Kx[qx(-1,34)][qx(-1,35)](qx(-1,33))||void 0,u.send(JSON.stringify(s))}return t=>{if(i)throw dM(i.message,t),i;const e={ho:t=>{const i=`${qx(0,40,1,42,1,43,1,44,1,45,1,46,1,47,1)}${(t=>{switch(t){case 1:return qx(0,48,49);case 0:return qx(0,48,50);case 2:return qx(0,51);case 3:return qx(0,52,48);case 4:return qx(0,53,48);case 5:return qx(0,54,48);case 6:return qx(0,55,48);case 7:return qx(0,56,48);case 8:return qx(0,57,48);case 9:return qx(0,58,48)}return wr(0,"")})(t)}`;throw dM(i,h,!1),new Error(i)},...Qx},h=new ux(t,e),n=t=>{if("error"===(null==t?void 0:t.type)&&s){const t=s.split("-");if(2===t.length&&uM(t[0],t[1])){const[,i]=t[0].split(":").map((t=>Number(t))),s=Date.now();if(i+Xx>s)return eM=!1,void gM(u,!1,a)}}if(u.readyState===Kx[qx(-1,0)].DONE){if(200!==u.status){let i="";try{i=t&&"loadend"!==t.type?qx(0,0,1,23,1,32,1,24,5):JSON.parse(u[qx(-1,23)]).message,gM(u,!1,a)}catch(t){console.error(t)}throw dM(i,h),new Error(qx(0,0,1,2,1,7,1,12,5)+i)}{const t=JSON.parse(u[qx(-1,23)]);if(!uM(o+qx(-3,0),t.h)){const t=qx(0,0,1,27,1,28,1,29,1,30,1,31,5);throw dM(t,h),new Error(t)}Kx[qx(-1,34)][qx(-1,36)](qx(-1,39),t.t),Kx[qx(-1,34)][qx(-1,36)](qx(-1,33),t.s),eM=!1}}},a=t=>{n(t)};return gM(u,!0,a),l?setTimeout((()=>{if(eM){let t=!0;if(s){const i=s.split("-");if(2===i.length&&uM(i[0],i[1])){const[,s]=i[0].split(":").map((t=>Number(t))),e=Date.now();s+Xx>e&&(t=!1)}}t&&dM(qx(0,25,1,23,1,32,1,24,5),h)}}),1e4):gM(u,!1,a),r?(t=>{let i;eM=!1;const s=t.Ci(),e=()=>{i&&(t.Vn(i.zn()),i=void 0),i=t.zF("deployment test"),i.tn(t.Jt).lr(qx(0,34,1,33)).oh({x:s.x/2,y:s.y/2}).Ra(50).gr(13).eh(new Be({color:Se(128,128,128,100)})).La("Arial").Va(500).setMouseInteractions(!1),t.Ln().En()};t.jo((()=>{e()})),setTimeout(e,0),setInterval((()=>{i&&i.zn()<t.Po()-1?e():i||e()}),1e3)})(h):u.readyState===Kx[qx(-1,0)].DONE&&n(),h}})(e)),((t,i,s)=>({Dashboard:UM(t,i,s),ChartXY:YM(t,i,s),Spider:XM(t,i,s),Polar:ZM(t,i,s),Pie:KM(t,i,s),UIPanel:$M(t,i,s),Gauge:qM(t,i,s),Funnel:JM(t,i,s),Pyramid:QM(t,i,s),Chart3D:i_(t,i,s),Map:t_(t,i,s),DataGrid:s_(t,i,s),BarChart:e_(t,i,s)}))(h_,r.e,h)},t.onScreenMenuControlBaseHeight=Do,t.onScreenMenuControlBaseWidth=Bo,t.onScreenMenuControlOpacity=Oo,t.onScreenMenuDefaultButtonShape=Eo,t.onScreenMenuSpriteURL=Lo,t.regularColorSteps=(t,i,s,e)=>{if(!s||0===s.length)throw new Error("Invalid use regularColorSteps 'colorPalette' is undefined or empty");const h=null==e?void 0:e.formatLabels,r=null==e?void 0:e.alpha;return s.map(((e,n)=>{const o=t+n/(s.length-1)*(i-t);return{color:void 0!==r?e.setA(r):e,value:o,label:h?h(o):void 0}}))},t.saveToFile=Uc,t.synchronizeAxisIntervals=ch,t.translatePoint=uh,t.translatePoint3D=(t,i,s)=>{if("axes"===i.id&&"world"===s.id)return i.chart.dp.Mv(t);if("world"===i.id&&"axes"===s.id)return i.chart.dp._v(t);if(i.id===s.id)return t;throw new Error("LC JS translatePoint3D misusage | originCoordinateSystem and targetCoordinateSystem arguments must be either Chart3D.coordsWorld or Chart3D.coordsAxis")},t.transparentFill=Io,t.transparentLine=Po,t.vec3Utils=Pr,t.xDimensionStrategy=nc,t.yDimensionStrategy=oc,Object.defineProperty(t,"WU",{value:!0}),t}({});
